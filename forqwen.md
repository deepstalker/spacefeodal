# Контекст проекта SF A2 для Qwen

## Общее описание
Это браузерная 2D-игра на Phaser 3 с элементами стратегии и песочницы в космическом сеттинге. Игрок управляет массивным кораблём, исследуя звёздные системы, взаимодействуя с точками интереса и участвуя в боях.

## Технологический стек
- **Phaser 3**: Основной 2D-движок.
- **TypeScript**: Строгая типизация.
- **Vite**: Сборка и Dev-server.
- **Vitest**: Тестирование.
- **rexUI**: Плагин для создания пользовательского интерфейса.
- **Spine** (планируется): Для анимаций.

## Архитектура
### Сцены
1.  **`BootScene`**: Инициализация, настройка масштабирования и плагинов.
2.  **`PreloadScene`**: Загрузка ассетов с отображением прогресса через rexUI.
3.  **`StarSystemScene`**: Основная игровая сцена. Отвечает за:
    -   Отображение звездной системы (звезда, планеты на орбитах, POI).
    -   Перемещение корабля игрока.
    -   Боевую систему.
    -   Туман войны.
    -   Сохранение состояния.
4.  **`UIScene`**: Пользовательский интерфейс:
    -   Миникарта.
    -   HUD (панель состояния корабля).
    -   Управление камерой.

### Менеджеры (`src/sys`)
Инкапсулируют ключевые функции:
-   `ConfigManager`: Загрузка конфигураций из JSON.
-   `SaveManager`: Сохранение/загрузка состояния игрока.
-   `CameraManager`: Управление камерой.
-   `InputManager`: Обработка ввода.
-   `MovementManager`: Логика перемещения корабля (кинематика).
-   `PathfindingManager`: (Заглушка) Планирование пути.
-   `CombatManager`: Боевая система (ИИ, оружие, урон).
-   `MinimapManager`: Отображение миникарты.
-   `FogOfWar`: Туман войны.
-   `SystemGenerator`: Генерация процедурных систем.

### Модули (`src/modules`)
-   `navigation-exploration`: Содержит более продвинутые планировщики пути и исполнитель, но в прототипе они не используются.

### Конфигурации (`public/configs`)
Все настройки вынесены в JSON:
-   `settings.json`: Основные настройки (разрешение, камера, UI).
-   `gameplay.json`: Параметры геймплея (движение, FOV).
-   `system*.json`: Описание звёздных систем.
-   `ships.json`, `weapons.json`, `enemies.json`: Параметры кораблей, оружия, врагов.
-   `ai_profiles.json`, `stardwellers.json`: Конфигурации ИИ и NPC.
-   `assets.json`: Описание ассетов.
-   `keybinds.json`, `modules.json`, `persistence.json`: Прочие настройки.

## Основные механики
-   **RTS-управление**: ПКМ для установки цели.
-   **Кинематика**: Ускорение, торможение, поворот без физики.
-   **Исследование**: Открытие POI при приближении.
-   **Миникарта**: Обзор системы.
-   **Туман войны**: Ограничивает видимость.
-   **Процедурная генерация**: Возможность генерировать новые системы.
-   **Системы**: Выбор между несколькими статическими и процедурными системами.
-   **Сохранения**: Позиция корабля сохраняется.

## Документация
-   `spec.md`: Полная спецификация проекта.
-   `plam.md`: План разработки.
-   `gamebook.md`: Описание реализованных механик и влияния конфигов.