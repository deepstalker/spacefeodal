(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const C of document.querySelectorAll('link[rel="modulepreload"]'))f(C);new MutationObserver(C=>{for(const S of C)if(S.type==="childList")for(const r of S.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&f(r)}).observe(document,{childList:!0,subtree:!0});function s(C){const S={};return C.integrity&&(S.integrity=C.integrity),C.referrerPolicy&&(S.referrerPolicy=C.referrerPolicy),C.crossOrigin==="use-credentials"?S.credentials="include":C.crossOrigin==="anonymous"?S.credentials="omit":S.credentials="same-origin",S}function f(C){if(C.ep)return;C.ep=!0;const S=s(C);fetch(C.href,S)}})();function Iy(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Ia={exports:{}},By=Ia.exports,Hd;function Gy(){return Hd||(Hd=1,(function(i,t){(function(f,C){i.exports=C()})(By,()=>(()=>{var s={6659:(r=>{var y=Object.prototype.hasOwnProperty,e="~";function u(){}Object.create&&(u.prototype=Object.create(null),new u().__proto__||(e=!1));function m(n,a,c){this.fn=n,this.context=a,this.once=c||!1}function d(n,a,c,o,v){if(typeof c!="function")throw new TypeError("The listener must be a function");var g=new m(c,o||n,v),p=e?e+a:a;return n._events[p]?n._events[p].fn?n._events[p]=[n._events[p],g]:n._events[p].push(g):(n._events[p]=g,n._eventsCount++),n}function l(n,a){--n._eventsCount===0?n._events=new u:delete n._events[a]}function h(){this._events=new u,this._eventsCount=0}h.prototype.eventNames=function(){var a=[],c,o;if(this._eventsCount===0)return a;for(o in c=this._events)y.call(c,o)&&a.push(e?o.slice(1):o);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(c)):a},h.prototype.listeners=function(a){var c=e?e+a:a,o=this._events[c];if(!o)return[];if(o.fn)return[o.fn];for(var v=0,g=o.length,p=new Array(g);v<g;v++)p[v]=o[v].fn;return p},h.prototype.listenerCount=function(a){var c=e?e+a:a,o=this._events[c];return o?o.fn?1:o.length:0},h.prototype.emit=function(a,c,o,v,g,p){var x=e?e+a:a;if(!this._events[x])return!1;var T=this._events[x],E=arguments.length,M,P;if(T.fn){switch(T.once&&this.removeListener(a,T.fn,void 0,!0),E){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,c),!0;case 3:return T.fn.call(T.context,c,o),!0;case 4:return T.fn.call(T.context,c,o,v),!0;case 5:return T.fn.call(T.context,c,o,v,g),!0;case 6:return T.fn.call(T.context,c,o,v,g,p),!0}for(P=1,M=new Array(E-1);P<E;P++)M[P-1]=arguments[P];T.fn.apply(T.context,M)}else{var w=T.length,R;for(P=0;P<w;P++)switch(T[P].once&&this.removeListener(a,T[P].fn,void 0,!0),E){case 1:T[P].fn.call(T[P].context);break;case 2:T[P].fn.call(T[P].context,c);break;case 3:T[P].fn.call(T[P].context,c,o);break;case 4:T[P].fn.call(T[P].context,c,o,v);break;default:if(!M)for(R=1,M=new Array(E-1);R<E;R++)M[R-1]=arguments[R];T[P].fn.apply(T[P].context,M)}}return!0},h.prototype.on=function(a,c,o){return d(this,a,c,o,!1)},h.prototype.once=function(a,c,o){return d(this,a,c,o,!0)},h.prototype.removeListener=function(a,c,o,v){var g=e?e+a:a;if(!this._events[g])return this;if(!c)return l(this,g),this;var p=this._events[g];if(p.fn)p.fn===c&&(!v||p.once)&&(!o||p.context===o)&&l(this,g);else{for(var x=0,T=[],E=p.length;x<E;x++)(p[x].fn!==c||v&&!p[x].once||o&&p[x].context!==o)&&T.push(p[x]);T.length?this._events[g]=T.length===1?T[0]:T:l(this,g)}return this},h.prototype.removeAllListeners=function(a){var c;return a?(c=e?e+a:a,this._events[c]&&l(this,c)):(this._events=new u,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=e,h.EventEmitter=h,r.exports=h}),62270:((r,y,e)=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(82590),m=function(d,l,h,n){for(var a=d[0],c=1;c<d.length;c++){var o=d[c];u(o,a,l,h,n),a=o}return d};r.exports=m}),61148:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(6124),m=function(d,l,h,n,a){return u(d,"angle",l,h,n,a)};r.exports=m}),22015:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){for(var d=0;d<e.length;d++){var l=e[d];u.call(m,l)}return e};r.exports=y}),31060:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){m===void 0&&(m=0);for(var d=m;d<e.length;d++){var l=e[d],h=!0;for(var n in u)l[n]!==u[n]&&(h=!1);if(h)return l}return null};r.exports=y}),52367:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){m===void 0&&(m=0);for(var d=m;d<e.length;d++){var l=e[d],h=!0;for(var n in u)l[n]!==u[n]&&(h=!1);if(h)return l}return null};r.exports=y}),12673:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(40327),m=e(84093),d=e(72632),l=e(72283),h=e(71030),n=new h({sys:{queueDepthSort:l,events:{once:l}}},0,0,1,1).setOrigin(0,0),a=function(c,o){o===void 0&&(o={});var v=o.hasOwnProperty("width"),g=o.hasOwnProperty("height"),p=d(o,"width",-1),x=d(o,"height",-1),T=d(o,"cellWidth",1),E=d(o,"cellHeight",T),M=d(o,"position",m.TOP_LEFT),P=d(o,"x",0),w=d(o,"y",0),R=0,A=0,O=p*T,F=x*E;n.setPosition(P,w),n.setSize(T,E);for(var b=0;b<c.length;b++)if(u(c[b],n,M),v&&p===-1)n.x+=T;else if(g&&x===-1)n.y+=E;else if(g&&!v){if(A+=E,n.y+=E,A===F&&(A=0,R+=T,n.y=w,n.x+=T,R===O))break}else if(R+=T,n.x+=T,R===O&&(R=0,A+=E,n.x=P,n.y+=E,A===F))break;return c};r.exports=a}),691:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(6124),m=function(d,l,h,n,a){return u(d,"alpha",l,h,n,a)};r.exports=m}),3877:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(6124),m=function(d,l,h,n,a){return u(d,"x",l,h,n,a)};r.exports=m}),71020:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(6124),m=function(d,l,h,n,a,c,o){return h==null&&(h=l),u(d,"x",l,n,c,o),u(d,"y",h,a,c,o)};r.exports=m}),28970:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(6124),m=function(d,l,h,n,a){return u(d,"y",l,h,n,a)};r.exports=m}),82249:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d){m===void 0&&(m=0),d===void 0&&(d=6.28);for(var l=m,h=(d-m)/e.length,n=u.x,a=u.y,c=u.radius,o=0;o<e.length;o++)e[o].x=n+c*Math.cos(l),e[o].y=a+c*Math.sin(l),l+=h;return e};r.exports=y}),30285:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d){m===void 0&&(m=0),d===void 0&&(d=6.28);for(var l=m,h=(d-m)/e.length,n=u.width/2,a=u.height/2,c=0;c<e.length;c++)e[c].x=u.x+n*Math.cos(l),e[c].y=u.y+a*Math.sin(l),l+=h;return e};r.exports=y}),61557:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(8570),m=function(d,l){for(var h=u(l,d.length),n=0;n<d.length;n++){var a=d[n],c=h[n];a.x=c.x,a.y=c.y}return d};r.exports=m}),63549:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(40053),m=e(77640),d=e(38487),l=function(h,n,a){a===void 0&&(a=0);var c=u(n,!1,h.length);a>0?m(c,a):a<0&&d(c,Math.abs(a));for(var o=0;o<h.length;o++)h[o].x=c[o].x,h[o].y=c[o].y;return h};r.exports=l}),51629:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(58813),m=function(d,l,h){var n=u({x1:l.x1,y1:l.y1,x2:l.x2,y2:l.y2},h),a=u({x1:l.x2,y1:l.y2,x2:l.x3,y2:l.y3},h),c=u({x1:l.x3,y1:l.y3,x2:l.x1,y2:l.y1},h);n.pop(),a.pop(),c.pop(),n=n.concat(a,c);for(var o=n.length/d.length,v=0,g=0;g<d.length;g++){var p=d[g],x=n[Math.floor(v)];p.x=x.x,p.y=x.y,v+=o}return d};r.exports=m}),1045:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){for(var d=0;d<e.length;d++){var l=e[d];l.anims&&l.anims.play(u,m)}return e};r.exports=y}),6124:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d,l,h){d===void 0&&(d=0),l===void 0&&(l=0),h===void 0&&(h=1);var n,a=0,c=e.length;if(h===1)for(n=l;n<c;n++)e[n][u]+=m+a*d,a++;else for(n=l;n>=0;n--)e[n][u]+=m+a*d,a++;return e};r.exports=y}),23646:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d,l,h){d===void 0&&(d=0),l===void 0&&(l=0),h===void 0&&(h=1);var n,a=0,c=e.length;if(h===1)for(n=l;n<c;n++)e[n][u]=m+a*d,a++;else for(n=l;n>=0;n--)e[n][u]=m+a*d,a++;return e};r.exports=y}),4392:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(30977),m=function(d,l){for(var h=0;h<d.length;h++)u(l,d[h]);return d};r.exports=m}),94985:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72006),m=function(d,l){for(var h=0;h<d.length;h++)u(l,d[h]);return d};r.exports=m}),63305:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(74077),m=function(d,l){for(var h=0;h<d.length;h++)u(l,d[h]);return d};r.exports=m}),90739:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(30001),m=function(d,l){for(var h=0;h<d.length;h++)u(l,d[h]);return d};r.exports=m}),91417:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(99761),m=function(d,l){for(var h=0;h<d.length;h++)u(l,d[h]);return d};r.exports=m}),26182:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(6124),m=function(d,l,h,n,a){return u(d,"rotation",l,h,n,a)};r.exports=m}),87299:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72395),m=e(53996),d=function(l,h,n){for(var a=h.x,c=h.y,o=0;o<l.length;o++){var v=l[o];u(v,a,c,n,Math.max(1,m(v.x,v.y,a,c)))}return l};r.exports=d}),92194:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72395),m=function(d,l,h,n){var a=l.x,c=l.y;if(n===0)return d;for(var o=0;o<d.length;o++)u(d[o],a,c,h,n);return d};r.exports=m}),30363:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(6124),m=function(d,l,h,n,a){return u(d,"scaleX",l,h,n,a)};r.exports=m}),51449:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(6124),m=function(d,l,h,n,a,c,o){return h==null&&(h=l),u(d,"scaleX",l,n,c,o),u(d,"scaleY",h,a,c,o)};r.exports=m}),64895:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(6124),m=function(d,l,h,n,a){return u(d,"scaleY",l,h,n,a)};r.exports=m}),30329:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(23646),m=function(d,l,h,n,a){return u(d,"alpha",l,h,n,a)};r.exports=m}),43954:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(23646),m=function(d,l,h,n){return u(d,"blendMode",l,0,h,n)};r.exports=m}),70688:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(23646),m=function(d,l,h,n,a){return u(d,"depth",l,h,n,a)};r.exports=m}),8314:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){for(var d=0;d<e.length;d++)e[d].setInteractive(u,m);return e};r.exports=y}),12894:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(23646),m=function(d,l,h,n,a,c,o){return h==null&&(h=l),u(d,"originX",l,n,c,o),u(d,"originY",h,a,c,o),d.forEach(function(v){v.updateDisplayOrigin()}),d};r.exports=m}),38767:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(23646),m=function(d,l,h,n,a){return u(d,"rotation",l,h,n,a)};r.exports=m}),18584:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(23646),m=function(d,l,h,n,a,c,o){return h==null&&(h=l),u(d,"scaleX",l,n,c,o),u(d,"scaleY",h,a,c,o)};r.exports=m}),17381:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(23646),m=function(d,l,h,n,a){return u(d,"scaleX",l,h,n,a)};r.exports=m}),74370:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(23646),m=function(d,l,h,n,a){return u(d,"scaleY",l,h,n,a)};r.exports=m}),27773:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(23646),m=function(d,l,h,n,a,c,o){return h==null&&(h=l),u(d,"scrollFactorX",l,n,c,o),u(d,"scrollFactorY",h,a,c,o)};r.exports=m}),75257:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(23646),m=function(d,l,h,n,a){return u(d,"scrollFactorX",l,h,n,a)};r.exports=m}),54512:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(23646),m=function(d,l,h,n,a){return u(d,"scrollFactorY",l,h,n,a)};r.exports=m}),69423:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d,l){for(var h=0;h<e.length;h++)e[h].setTint(u,m,d,l);return e};r.exports=y}),58291:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(23646),m=function(d,l,h,n){return u(d,"visible",l,0,h,n)};r.exports=m}),94833:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(23646),m=function(d,l,h,n,a){return u(d,"x",l,h,n,a)};r.exports=m}),14284:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(23646),m=function(d,l,h,n,a,c,o){return h==null&&(h=l),u(d,"x",l,n,c,o),u(d,"y",h,a,c,o)};r.exports=m}),96574:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(23646),m=function(d,l,h,n,a){return u(d,"y",l,h,n,a)};r.exports=m}),74086:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(93736),m=function(d,l,h,n,a){n===void 0&&(n=0),a===void 0&&(a=new u);var c,o,v=d.length;if(v===1)c=d[0].x,o=d[0].y,d[0].x=l,d[0].y=h;else{var g=1,p=0;n===0&&(p=v-1,g=v-2),c=d[p].x,o=d[p].y,d[p].x=l,d[p].y=h;for(var x=0;x<v;x++)if(!(g>=v||g===-1)){var T=d[g],E=T.x,M=T.y;T.x=c,T.y=o,c=E,o=M,n===0?g--:g++}}return a.x=c,a.y=o,a};r.exports=m}),86347:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(18592),m=function(d){return u(d)};r.exports=m}),1558:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(5514),m=function(d,l,h,n,a){a===void 0&&(a=!1);var c=Math.abs(n-h)/d.length,o;if(a)for(o=0;o<d.length;o++)d[o][l]+=u(o*c,h,n);else for(o=0;o<d.length;o++)d[o][l]=u(o*c,h,n);return d};r.exports=m}),9938:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(87736),m=function(d,l,h,n,a){a===void 0&&(a=!1);var c=Math.abs(n-h)/d.length,o;if(a)for(o=0;o<d.length;o++)d[o][l]+=u(o*c,h,n);else for(o=0;o<d.length;o++)d[o][l]=u(o*c,h,n);return d};r.exports=m}),71060:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d,l){if(l===void 0&&(l=!1),e.length===0)return e;if(e.length===1)return l?e[0][u]+=(d+m)/2:e[0][u]=(d+m)/2,e;var h=Math.abs(d-m)/(e.length-1),n;if(l)for(n=0;n<e.length;n++)e[n][u]+=n*h+m;else for(n=0;n<e.length;n++)e[n][u]=n*h+m;return e};r.exports=y}),11207:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){for(var u=0;u<e.length;u++)e[u].visible=!e[u].visible;return e};r.exports=y}),24404:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       samme <samme.npm@gmail.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(1071),m=function(d,l,h){h===void 0&&(h=0);for(var n=0;n<d.length;n++){var a=d[n];a.x=u(a.x,l.left-h,l.right+h),a.y=u(a.y,l.top-h,l.bottom+h)}return d};r.exports=m}),83979:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={AlignTo:e(62270),Angle:e(61148),Call:e(22015),GetFirst:e(31060),GetLast:e(52367),GridAlign:e(12673),IncAlpha:e(691),IncX:e(3877),IncXY:e(71020),IncY:e(28970),PlaceOnCircle:e(82249),PlaceOnEllipse:e(30285),PlaceOnLine:e(61557),PlaceOnRectangle:e(63549),PlaceOnTriangle:e(51629),PlayAnimation:e(1045),PropertyValueInc:e(6124),PropertyValueSet:e(23646),RandomCircle:e(4392),RandomEllipse:e(94985),RandomLine:e(63305),RandomRectangle:e(90739),RandomTriangle:e(91417),Rotate:e(26182),RotateAround:e(87299),RotateAroundDistance:e(92194),ScaleX:e(30363),ScaleXY:e(51449),ScaleY:e(64895),SetAlpha:e(30329),SetBlendMode:e(43954),SetDepth:e(70688),SetHitArea:e(8314),SetOrigin:e(12894),SetRotation:e(38767),SetScale:e(18584),SetScaleX:e(17381),SetScaleY:e(74370),SetScrollFactor:e(27773),SetScrollFactorX:e(75257),SetScrollFactorY:e(54512),SetTint:e(69423),SetVisible:e(58291),SetX:e(94833),SetXY:e(14284),SetY:e(96574),ShiftPosition:e(74086),Shuffle:e(86347),SmootherStep:e(9938),SmoothStep:e(1558),Spread:e(71060),ToggleVisible:e(11207),WrapInRectangle:e(24404)}}),85463:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(82897),m=e(56694),d=e(16938),l=e(2406),h=e(71519),n=e(10850),a=e(28834),c=new m({initialize:function(v,g,p){this.manager=v,this.key=g,this.type="frame",this.frames=this.getFrames(v.textureManager,n(p,"frames",[]),n(p,"defaultTextureKey",null),n(p,"sortFrames",!0)),this.frameRate=n(p,"frameRate",null),this.duration=n(p,"duration",null),this.msPerFrame,this.skipMissedFrames=n(p,"skipMissedFrames",!0),this.delay=n(p,"delay",0),this.repeat=n(p,"repeat",0),this.repeatDelay=n(p,"repeatDelay",0),this.yoyo=n(p,"yoyo",!1),this.showBeforeDelay=n(p,"showBeforeDelay",!1),this.showOnStart=n(p,"showOnStart",!1),this.hideOnComplete=n(p,"hideOnComplete",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(d.PAUSE_ALL,this.pause,this),this.manager.on(d.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(o,v,g,p){g===null&&p===null?(o.frameRate=24,o.duration=24/v*1e3):g&&p===null?(o.duration=g,o.frameRate=v/(g/1e3)):(o.frameRate=p,o.duration=v/p*1e3),o.msPerFrame=1e3/o.frameRate},addFrame:function(o){return this.addFrameAt(this.frames.length,o)},addFrameAt:function(o,v){var g=this.getFrames(this.manager.textureManager,v);if(g.length>0){if(o===0)this.frames=g.concat(this.frames);else if(o===this.frames.length)this.frames=this.frames.concat(g);else{var p=this.frames.slice(0,o),x=this.frames.slice(o);this.frames=p.concat(g,x)}this.updateFrameSequence()}return this},checkFrame:function(o){return o>=0&&o<this.frames.length},getFirstTick:function(o){o.accumulator=0,o.nextTick=o.msPerFrame+o.currentFrame.duration},getFrameAt:function(o){return this.frames[o]},getFrames:function(o,v,g,p){p===void 0&&(p=!0);var x=[],T,E,M=1,P,w;if(typeof v=="string"){if(w=v,!o.exists(w))return console.warn('Texture "%s" not found',w),x;var R=o.get(w),A=R.getFrameNames();p&&a(A),v=[],A.forEach(function(B){v.push({key:w,frame:B})})}if(!Array.isArray(v)||v.length===0)return x;for(P=0;P<v.length;P++){var O=v[P],F=n(O,"key",g);if(F){var b=n(O,"frame",0),D=o.getFrame(F,b);if(!D){console.warn('Texture "%s" not found',F);continue}E=new h(F,b,M,D),E.duration=n(O,"duration",0),E.isFirst=!T,T&&(T.nextFrame=E,E.prevFrame=T),x.push(E),T=E,M++}}if(x.length>0){E.isLast=!0,E.nextFrame=x[0],x[0].prevFrame=E;var I=1/(x.length-1);for(P=0;P<x.length;P++)x[P].progress=P*I}return x},getNextTick:function(o){o.accumulator-=o.nextTick,o.nextTick=o.msPerFrame+o.currentFrame.duration},getFrameByProgress:function(o){return o=u(o,0,1),l(o,this.frames,"progress")},nextFrame:function(o){var v=o.currentFrame;v.isLast?o.yoyo?this.handleYoyoFrame(o,!1):o.repeatCounter>0?o.inReverse&&o.forward?o.forward=!1:this.repeatAnimation(o):o.complete():this.updateAndGetNextTick(o,v.nextFrame)},handleYoyoFrame:function(o,v){if(v||(v=!1),o.inReverse===!v&&o.repeatCounter>0){(o.repeatDelay===0||o.pendingRepeat)&&(o.forward=v),this.repeatAnimation(o);return}if(o.inReverse!==v&&o.repeatCounter===0){o.complete();return}o.forward=v;var g=v?o.currentFrame.nextFrame:o.currentFrame.prevFrame;this.updateAndGetNextTick(o,g)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(o){var v=o.currentFrame;v.isFirst?o.yoyo?this.handleYoyoFrame(o,!0):o.repeatCounter>0?o.inReverse&&!o.forward?this.repeatAnimation(o):(o.forward=!0,this.repeatAnimation(o)):o.complete():this.updateAndGetNextTick(o,v.prevFrame)},updateAndGetNextTick:function(o,v){o.setCurrentFrame(v),this.getNextTick(o)},removeFrame:function(o){var v=this.frames.indexOf(o);return v!==-1&&this.removeFrameAt(v),this},removeFrameAt:function(o){return this.frames.splice(o,1),this.updateFrameSequence(),this},repeatAnimation:function(o){if(o._pendingStop===2){if(o._pendingStopValue===0)return o.stop();o._pendingStopValue--}o.repeatDelay>0&&!o.pendingRepeat?(o.pendingRepeat=!0,o.accumulator-=o.nextTick,o.nextTick+=o.repeatDelay):(o.repeatCounter--,o.forward?o.setCurrentFrame(o.currentFrame.nextFrame):o.setCurrentFrame(o.currentFrame.prevFrame),o.isPlaying&&(this.getNextTick(o),o.handleRepeat()))},toJSON:function(){var o={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showBeforeDelay:this.showBeforeDelay,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(v){o.frames.push(v.toJSON())}),o},updateFrameSequence:function(){for(var o=this.frames.length,v=1/(o-1),g,p=0;p<o;p++)g=this.frames[p],g.index=p+1,g.isFirst=!1,g.isLast=!1,g.progress=p*v,p===0?(g.isFirst=!0,o===1?(g.isLast=!0,g.nextFrame=g,g.prevFrame=g):(g.isLast=!1,g.prevFrame=this.frames[o-1],g.nextFrame=this.frames[p+1])):p===o-1&&o>1?(g.isLast=!0,g.prevFrame=this.frames[o-2],g.nextFrame=this.frames[0]):o>1&&(g.prevFrame=this.frames[p-1],g.nextFrame=this.frames[p+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(d.PAUSE_ALL,this.pause,this),this.manager.off(d.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var o=0;o<this.frames.length;o++)this.frames[o].destroy();this.frames=[],this.manager=null}});r.exports=c}),71519:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=new u({initialize:function(l,h,n,a,c){c===void 0&&(c=!1),this.textureKey=l,this.textureFrame=h,this.index=n,this.frame=a,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=c},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});r.exports=m}),90249:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(85463),m=e(56694),d=e(33885),l=e(6659),h=e(16938),n=e(97081),a=e(72632),c=e(10850),o=e(83392),v=e(13401),g=e(76400),p=new m({Extends:l,initialize:function(T){l.call(this),this.game=T,this.textureManager=null,this.globalTimeScale=1,this.anims=new d,this.mixes=new d,this.paused=!1,this.name="AnimationManager",T.events.once(n.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(n.DESTROY,this.destroy,this)},addMix:function(x,T,E){var M=this.anims,P=this.mixes,w=typeof x=="string"?x:x.key,R=typeof T=="string"?T:T.key;if(M.has(w)&&M.has(R)){var A=P.get(w);A||(A={}),A[R]=E,P.set(w,A)}return this},removeMix:function(x,T){var E=this.mixes,M=typeof x=="string"?x:x.key,P=E.get(M);if(P)if(T){var w=typeof T=="string"?T:T.key;P.hasOwnProperty(w)&&delete P[w]}else T||E.delete(M);return this},getMix:function(x,T){var E=this.mixes,M=typeof x=="string"?x:x.key,P=typeof T=="string"?T:T.key,w=E.get(M);return w&&w.hasOwnProperty(P)?w[P]:0},add:function(x,T){return this.anims.has(x)?(console.warn("Animation key exists: "+x),this):(T.key=x,this.anims.set(x,T),this.emit(h.ADD_ANIMATION,x,T),this)},exists:function(x){return this.anims.has(x)},createFromAseprite:function(x,T,E){var M=[],P=this.game.cache.json.get(x);if(!P)return console.warn("No Aseprite data found for: "+x),M;var w=this,R=c(P,"meta",null),A=c(P,"frames",null);if(R&&A){var O=c(R,"frameTags",[]);O.forEach(function(F){var b=[],D=a(F,"name",null),I=a(F,"from",0),B=a(F,"to",0),z=a(F,"direction","forward");if(D&&(!T||T&&T.indexOf(D)>-1)){for(var Y=0,X=I;X<=B;X++){var H=X.toString(),N=A[H];if(N){var U=a(N,"duration",o.MAX_SAFE_INTEGER);b.push({key:x,frame:H,duration:U}),Y+=U}}var L=Y/b.length;b.forEach(function(k){k.duration-=L}),z==="reverse"&&(b=b.reverse());var G={key:D,frames:b,duration:Y,yoyo:z==="pingpong"},V;E?E.anims&&(V=E.anims.create(G)):V=w.create(G),V&&M.push(V)}})}return M},create:function(x){var T=x.key,E=!1;return T&&(E=this.get(T),E?console.warn("AnimationManager key already exists: "+T):(E=new u(this,T,x),this.anims.set(T,E),this.emit(h.ADD_ANIMATION,T,E))),E},fromJSON:function(x,T){T===void 0&&(T=!1),T&&this.anims.clear(),typeof x=="string"&&(x=JSON.parse(x));var E=[];if(x.hasOwnProperty("anims")&&Array.isArray(x.anims)){for(var M=0;M<x.anims.length;M++)E.push(this.create(x.anims[M]));x.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=x.globalTimeScale)}else x.hasOwnProperty("key")&&x.type==="frame"&&E.push(this.create(x));return E},generateFrameNames:function(x,T){var E=c(T,"prefix",""),M=c(T,"start",0),P=c(T,"end",0),w=c(T,"suffix",""),R=c(T,"zeroPad",0),A=c(T,"outputArray",[]),O=c(T,"frames",!1);if(!this.textureManager.exists(x))return console.warn('Texture "%s" not found',x),A;var F=this.textureManager.get(x);if(!F)return A;var b;if(T)for(O||(O=v(M,P)),b=0;b<O.length;b++){var D=E+g(O[b],R,"0",1)+w;F.has(D)?A.push({key:x,frame:D}):console.warn('Frame "%s" not found in texture "%s"',D,x)}else for(O=F.getFrameNames(),b=0;b<O.length;b++)A.push({key:x,frame:O[b]});return A},generateFrameNumbers:function(x,T){var E=c(T,"start",0),M=c(T,"end",-1),P=c(T,"first",!1),w=c(T,"outputArray",[]),R=c(T,"frames",!1);if(!this.textureManager.exists(x))return console.warn('Texture "%s" not found',x),w;var A=this.textureManager.get(x);if(!A)return w;P&&A.has(P)&&w.push({key:x,frame:P}),R||(M===-1&&(M=A.frameTotal-2),R=v(E,M));for(var O=0;O<R.length;O++){var F=R[O];A.has(F)?w.push({key:x,frame:F}):console.warn('Frame "%s" not found in texture "%s"',F,x)}return w},get:function(x){return this.anims.get(x)},getAnimsFromTexture:function(x){for(var T=this.textureManager.get(x),E=T.key,M=this.anims.getArray(),P=[],w=0;w<M.length;w++)for(var R=M[w],A=R.frames,O=0;O<A.length;O++)if(A[O].textureKey===E){P.push(R.key);break}return P},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(h.PAUSE_ALL)),this},play:function(x,T){Array.isArray(T)||(T=[T]);for(var E=0;E<T.length;E++)T[E].anims.play(x);return this},staggerPlay:function(x,T,E,M){E===void 0&&(E=0),M===void 0&&(M=!0),Array.isArray(T)||(T=[T]);var P=T.length;M||P--;for(var w=0;w<T.length;w++){var R=E<0?Math.abs(E)*(P-w):E*w;T[w].anims.playAfterDelay(x,R)}return this},remove:function(x){var T=this.get(x);return T&&(this.emit(h.REMOVE_ANIMATION,x,T),this.anims.delete(x),this.removeMix(x)),T},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(h.RESUME_ALL)),this},toJSON:function(x){var T={anims:[],globalTimeScale:this.globalTimeScale};return x!==void 0&&x!==""?T.anims.push(this.anims.get(x).toJSON()):this.anims.each(function(E,M){T.anims.push(M.toJSON())}),T},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});r.exports=p}),16569:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(33885),d=e(72632),l=e(16938),h=e(85463),n=new u({initialize:function(c){this.parent=c,this.animationManager=c.scene.sys.anims,this.animationManager.on(l.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showBeforeDelay=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(a){var c=this.parent;if(a===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,c;Array.isArray(a)||(a=[a]);for(var o=0;o<a.length;o++){var v=a[o];this.nextAnim?this.nextAnimsQueue.push(v):this.nextAnim=v}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(a){this.isPlaying&&this.stop();var c=this.animationManager,o=typeof a=="string"?a:d(a,"key",null),v=this.exists(o)?this.get(o):c.get(o);if(!v)console.warn("Missing animation: "+o);else{this.currentAnim=v;var g=v.getTotalFrames(),p=d(a,"frameRate",v.frameRate),x=d(a,"duration",v.duration);v.calculateDuration(this,g,x,p),this.delay=d(a,"delay",v.delay),this.repeat=d(a,"repeat",v.repeat),this.repeatDelay=d(a,"repeatDelay",v.repeatDelay),this.yoyo=d(a,"yoyo",v.yoyo),this.showBeforeDelay=d(a,"showBeforeDelay",v.showBeforeDelay),this.showOnStart=d(a,"showOnStart",v.showOnStart),this.hideOnComplete=d(a,"hideOnComplete",v.hideOnComplete),this.skipMissedFrames=d(a,"skipMissedFrames",v.skipMissedFrames),this.timeScale=d(a,"timeScale",this.timeScale);var T=d(a,"startFrame",0);T>v.getTotalFrames()&&(T=0);var E=v.frames[T];T===0&&!this.forward&&(E=v.getLastFrame()),this.currentFrame=E}return this.parent},pause:function(a){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),a!==void 0&&this.setCurrentFrame(a),this.parent},resume:function(a){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),a!==void 0&&this.setCurrentFrame(a),this.parent},playAfterDelay:function(a,c){if(!this.isPlaying)this.delayCounter=c,this.play(a,!0);else{var o=this.nextAnim,v=this.nextAnimsQueue;o&&v.unshift(o),this.nextAnim=a,this._pendingStop=1,this._pendingStopValue=c}return this.parent},playAfterRepeat:function(a,c){if(c===void 0&&(c=1),!this.isPlaying)this.play(a);else{var o=this.nextAnim,v=this.nextAnimsQueue;o&&v.unshift(o),this.repeatCounter!==-1&&c>this.repeatCounter&&(c=this.repeatCounter),this.nextAnim=a,this._pendingStop=2,this._pendingStopValue=c}return this.parent},play:function(a,c){c===void 0&&(c=!1);var o=this.currentAnim,v=this.parent,g=typeof a=="string"?a:a.key;if(c&&this.isPlaying&&o.key===g)return v;if(o&&this.isPlaying){var p=this.animationManager.getMix(o.key,a);if(p>0)return this.playAfterDelay(a,p)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(a)},playReverse:function(a,c){c===void 0&&(c=!1);var o=typeof a=="string"?a:a.key;return c&&this.isPlaying&&this.currentAnim.key===o?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(a))},startAnimation:function(a){this.load(a);var c=this.currentAnim,o=this.parent;return c&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,c.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0?this.handleStart():this.showBeforeDelay&&this.setCurrentFrame(this.currentFrame)),o},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(l.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(l.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(l.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(l.ANIMATION_COMPLETE,l.ANIMATION_COMPLETE_KEY)},emitEvents:function(a,c){var o=this.currentAnim;if(o){var v=this.currentFrame,g=this.parent,p=v.textureFrame;g.emit(a,o,v,g,p),c&&g.emit(c+o.key,o,v,g,p)}},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var a=this.currentFrame;if(!a)return 0;var c=a.progress;return this.inReverse&&(c*=-1),c},setProgress:function(a){return this.forward||(a=1-a),this.setCurrentFrame(this.currentAnim.getFrameByProgress(a)),this.parent},setRepeat:function(a){return this.repeatCounter=a===-1?Number.MAX_VALUE:a,this.parent},globalRemove:function(a,c){c===void 0&&(c=this.currentAnim),this.isPlaying&&c.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(a,c){a===void 0&&(a=!1),c===void 0&&(c=!1);var o=this.currentAnim,v=this.parent;return o?(c&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),o.getFirstTick(this),this.emitEvents(l.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!a,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(o.frames[0]),this.parent):v},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var a=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(a)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.delayCounter=0,this.currentAnim&&this.handleStop(),this.nextAnim){var a=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(a)}return this.parent},stopAfterDelay:function(a){return this._pendingStop=1,this._pendingStopValue=a,this.parent},stopAfterRepeat:function(a){return a===void 0&&(a=1),this.repeatCounter!==-1&&a>this.repeatCounter&&(a=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=a,this.parent},stopOnFrame:function(a){return this._pendingStop=3,this._pendingStopValue=a,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(a,c){var o=this.currentAnim;if(!(!this.isPlaying||!o||o.paused)){if(this.accumulator+=c*this.timeScale,this._pendingStop===1&&(this._pendingStopValue-=c,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?o.nextFrame(this):o.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var v=0;do this.forward?o.nextFrame(this):o.previousFrame(this),v++;while(this.isPlaying&&this.accumulator>this.nextTick&&v<60)}}},setCurrentFrame:function(a){var c=this.parent;return this.currentFrame=a,c.texture=a.frame.texture,c.frame=a.frame,c.isCropped&&c.frame.updateCropUVs(c._crop,c.flipX,c.flipY),a.setAlpha&&(c.alpha=a.alpha),c.setSizeToFrame(),c._originComponent&&(a.frame.customPivot?c.setOrigin(a.frame.pivotX,a.frame.pivotY):c.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(l.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===a&&this.stop()),c},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(a){return this.anims?this.anims.get(a):null},exists:function(a){return this.anims?this.anims.has(a):!1},create:function(a){var c=a.key,o=!1;return c&&(o=this.get(c),o?console.warn("Animation key already exists: "+c):(o=new h(this,c,a),this.anims||(this.anims=new m),this.anims.set(c,o))),o},createFromAseprite:function(a,c){return this.animationManager.createFromAseprite(a,c,this.parent)},generateFrameNames:function(a,c){return this.animationManager.generateFrameNames(a,c)},generateFrameNumbers:function(a,c){return this.animationManager.generateFrameNumbers(a,c)},remove:function(a){var c=this.get(a);return c&&(this.currentAnim===c&&this.stop(),this.anims.delete(a)),c},destroy:function(){this.animationManager.off(l.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});r.exports=n}),44509:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="add"}),84563:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="animationcomplete"}),61586:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="animationcomplete-"}),72175:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="animationrepeat"}),568:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="animationrestart"}),37690:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="animationstart"}),58525:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="animationstop"}),5243:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="animationupdate"}),10598:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pauseall"}),4860:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="remove"}),31865:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="resumeall"}),16938:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={ADD_ANIMATION:e(44509),ANIMATION_COMPLETE:e(84563),ANIMATION_COMPLETE_KEY:e(61586),ANIMATION_REPEAT:e(72175),ANIMATION_RESTART:e(568),ANIMATION_START:e(37690),ANIMATION_STOP:e(58525),ANIMATION_UPDATE:e(5243),PAUSE_ALL:e(10598),REMOVE_ANIMATION:e(4860),RESUME_ALL:e(31865)}}),13517:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Animation:e(85463),AnimationFrame:e(71519),AnimationManager:e(90249),AnimationState:e(16569),Events:e(16938)}}),23740:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(33885),d=e(6659),l=e(69773),h=new u({initialize:function(){this.entries=new m,this.events=new d},add:function(n,a){return this.entries.set(n,a),this.events.emit(l.ADD,this,n,a),this},has:function(n){return this.entries.has(n)},exists:function(n){return this.entries.has(n)},get:function(n){return this.entries.get(n)},remove:function(n){var a=this.get(n);return a&&(this.entries.delete(n),this.events.emit(l.REMOVE,this,n,a.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});r.exports=h}),43474:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(23740),m=e(56694),d=e(97081),l=new m({initialize:function(n){this.game=n,this.binary=new u,this.bitmapFont=new u,this.json=new u,this.physics=new u,this.shader=new u,this.audio=new u,this.video=new u,this.text=new u,this.html=new u,this.obj=new u,this.tilemap=new u,this.xml=new u,this.custom={},this.game.events.once(d.DESTROY,this.destroy,this)},addCustom:function(h){return this.custom.hasOwnProperty(h)||(this.custom[h]=new u),this.custom[h]},destroy:function(){for(var h=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],n=0;n<h.length;n++)this[h[n]].destroy(),this[h[n]]=null;for(var a in this.custom)this.custom[a].destroy();this.custom=null,this.game=null}});r.exports=l}),94762:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="add"}),75968:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="remove"}),69773:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={ADD:e(94762),REMOVE:e(75968)}}),45820:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={BaseCache:e(23740),CacheManager:e(43474),Events:e(69773)}}),51052:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(64937),d=e(75606),l=e(6659),h=e(89787),n=e(74118),a=e(69360),c=e(93222),o=e(93736),v=new u({Extends:l,Mixins:[m.AlphaSingle,m.Visible],initialize:function(p,x,T,E){p===void 0&&(p=0),x===void 0&&(x=0),T===void 0&&(T=0),E===void 0&&(E=0),l.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new n,this.dirty=!0,this._x=p,this._y=x,this._width=T,this._height=E,this._bounds=new n,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new a,this.transparent=!0,this.backgroundColor=c("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new o(T/2,E/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[],this.isSceneCamera=!0},addToRenderList:function(g){this.renderList.push(g)},setOrigin:function(g,p){return g===void 0&&(g=.5),p===void 0&&(p=g),this.originX=g,this.originY=p,this},getScroll:function(g,p,x){x===void 0&&(x=new o);var T=this.width*.5,E=this.height*.5;return x.x=g-T,x.y=p-E,this.useBounds&&(x.x=this.clampX(x.x),x.y=this.clampY(x.y)),x},centerOnX:function(g){var p=this.width*.5;return this.midPoint.x=g,this.scrollX=g-p,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(g){var p=this.height*.5;return this.midPoint.y=g,this.scrollY=g-p,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(g,p){return this.centerOnX(g),this.centerOnY(p),this},centerToBounds:function(){if(this.useBounds){var g=this._bounds,p=this.width*.5,x=this.height*.5;this.midPoint.set(g.centerX,g.centerY),this.scrollX=g.centerX-p,this.scrollY=g.centerY-x}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(g){if(this.disableCull)return g;var p=this.matrix.matrix,x=p[0],T=p[1],E=p[2],M=p[3],P=x*M-T*E;if(!P)return g;var w=p[4],R=p[5],A=this.scrollX,O=this.scrollY,F=this.width,b=this.height,D=this.y,I=D+b,B=this.x,z=B+F,Y=this.culledObjects,X=g.length;P=1/P,Y.length=0;for(var H=0;H<X;++H){var N=g[H];if(!N.hasOwnProperty("width")||N.parentContainer){Y.push(N);continue}var U=N.width,L=N.height,G=N.x-A*N.scrollFactorX-U*N.originX,V=N.y-O*N.scrollFactorY-L*N.originY,k=G*x+V*E+w,W=G*T+V*M+R,$=(G+U)*x+(V+L)*E+w,K=(G+U)*T+(V+L)*M+R;$>B&&k<z&&K>D&&W<I&&Y.push(N)}return Y},getWorldPoint:function(g,p,x){x===void 0&&(x=new o);var T=this.matrix.matrix,E=T[0],M=T[1],P=T[2],w=T[3],R=T[4],A=T[5],O=E*w-M*P;if(!O)return x.x=g,x.y=p,x;O=1/O;var F=w*O,b=-M*O,D=-P*O,I=E*O,B=(P*A-w*R)*O,z=(M*R-E*A)*O,Y=Math.cos(this.rotation),X=Math.sin(this.rotation),H=this.zoomX,N=this.zoomY,U=this.scrollX,L=this.scrollY,G=g+(U*Y-L*X)*H,V=p+(U*X+L*Y)*N;return x.x=G*F+V*D+B,x.y=G*b+V*I+z,x},ignore:function(g){var p=this.id;Array.isArray(g)||(g=[g]);for(var x=0;x<g.length;x++){var T=g[x];Array.isArray(T)?this.ignore(T):T.isParent?this.ignore(T.getChildren()):T.cameraFilter|=p}return this},preRender:function(){this.renderList.length=0;var g=this.width,p=this.height,x=g*.5,T=p*.5,E=this.zoomX,M=this.zoomY,P=this.matrix,w=g*this.originX,R=p*this.originY,A=this.scrollX,O=this.scrollY;this.useBounds&&(A=this.clampX(A),O=this.clampY(O)),this.roundPixels&&(w=Math.round(w),R=Math.round(R)),this.scrollX=A,this.scrollY=O;var F=A+x,b=O+T;this.midPoint.set(F,b);var D=g/E,I=p/M;this.worldView.setTo(F-D/2,b-I/2,D,I),P.applyITRS(this.x+w,this.y+R,this.rotation,E,M),P.translate(-w,-R)},clampX:function(g){var p=this._bounds,x=this.displayWidth,T=p.x+(x-this.width)/2,E=Math.max(T,T+p.width-x);return g<T?g=T:g>E&&(g=E),g},clampY:function(g){var p=this._bounds,x=this.displayHeight,T=p.y+(x-this.height)/2,E=Math.max(T,T+p.height-x);return g<T?g=T:g>E&&(g=E),g},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(g){return g===void 0&&(g=0),this.rotation=d(g),this},setBackgroundColor:function(g){return g===void 0&&(g="rgba(0,0,0,0)"),this.backgroundColor=c(g),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(g,p,x,T,E){return E===void 0&&(E=!1),this._bounds.setTo(g,p,x,T),this.dirty=!0,this.useBounds=!0,E?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(g){g===void 0&&(g=new n);var p=this._bounds;return g.setTo(p.x,p.y,p.width,p.height),g},setName:function(g){return g===void 0&&(g=""),this.name=g,this},setPosition:function(g,p){return p===void 0&&(p=g),this.x=g,this.y=p,this},setRotation:function(g){return g===void 0&&(g=0),this.rotation=g,this},setRoundPixels:function(g){return this.roundPixels=g,this},setScene:function(g,p){p===void 0&&(p=!0),this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=g,this.isSceneCamera=p;var x=g.sys;return this.sceneManager=x.game.scene,this.scaleManager=x.scale,this.cameraManager=x.cameras,this.updateSystem(),this},setScroll:function(g,p){return p===void 0&&(p=g),this.scrollX=g,this.scrollY=p,this},setSize:function(g,p){return p===void 0&&(p=g),this.width=g,this.height=p,this},setViewport:function(g,p,x,T){return this.x=g,this.y=p,this.width=x,this.height=T,this},setZoom:function(g,p){return g===void 0&&(g=1),p===void 0&&(p=g),g===0&&(g=.001),p===0&&(p=.001),this.zoomX=g,this.zoomY=p,this},setMask:function(g,p){return p===void 0&&(p=!0),this.mask=g,this._maskCamera=p?this.cameraManager.default:this,this},clearMask:function(g){return g===void 0&&(g=!1),g&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var g={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(g.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),g},update:function(){},setIsSceneCamera:function(g){return this.isSceneCamera=g,this},updateSystem:function(){if(!(!this.scaleManager||!this.isSceneCamera)){var g=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,p=this.sceneManager;g&&!this._customViewport?p.customViewports++:!g&&this._customViewport&&p.customViewports--,this.dirty=!0,this._customViewport=g}},destroy:function(){this.emit(h.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(g){this._x=g,this.updateSystem()}},y:{get:function(){return this._y},set:function(g){this._y=g,this.updateSystem()}},width:{get:function(){return this._width},set:function(g){this._width=g,this.updateSystem()}},height:{get:function(){return this._height},set:function(g){this._height=g,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(g){g!==this._scrollX&&(this._scrollX=g,this.dirty=!0)}},scrollY:{get:function(){return this._scrollY},set:function(g){g!==this._scrollY&&(this._scrollY=g,this.dirty=!0)}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(g){this._zoomX=g,this._zoomY=g,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(g){this._zoomX=g,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(g){this._zoomY=g,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(g){this._rotation=g,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});r.exports=v}),47751:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(51052),m=e(79993),d=e(82897),l=e(56694),h=e(64937),n=e(53030),a=e(89787),c=e(42798),o=e(74118),v=e(93736),g=new l({Extends:u,Mixins:[h.PostPipeline],initialize:function(x,T,E,M){u.call(this,x,T,E,M),this.initPostPipeline(),this.inputEnabled=!0,this.fadeEffect=new n.Fade(this),this.flashEffect=new n.Flash(this),this.shakeEffect=new n.Shake(this),this.panEffect=new n.Pan(this),this.rotateToEffect=new n.RotateTo(this),this.zoomEffect=new n.Zoom(this),this.lerp=new v(1,1),this.followOffset=new v,this.deadzone=null,this._follow=null},setDeadzone:function(p,x){if(p===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=p,this.deadzone.height=x):this.deadzone=new o(0,0,p,x),this._follow){var T=this.width/2,E=this.height/2,M=this._follow.x-this.followOffset.x,P=this._follow.y-this.followOffset.y;this.midPoint.set(M,P),this.scrollX=M-T,this.scrollY=P-E}m(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(p,x,T,E,M,P){return this.fadeEffect.start(!1,p,x,T,E,!0,M,P)},fadeOut:function(p,x,T,E,M,P){return this.fadeEffect.start(!0,p,x,T,E,!0,M,P)},fadeFrom:function(p,x,T,E,M,P,w){return this.fadeEffect.start(!1,p,x,T,E,M,P,w)},fade:function(p,x,T,E,M,P,w){return this.fadeEffect.start(!0,p,x,T,E,M,P,w)},flash:function(p,x,T,E,M,P,w){return this.flashEffect.start(p,x,T,E,M,P,w)},shake:function(p,x,T,E,M){return this.shakeEffect.start(p,x,T,E,M)},pan:function(p,x,T,E,M,P,w){return this.panEffect.start(p,x,T,E,M,P,w)},rotateTo:function(p,x,T,E,M,P,w){return this.rotateToEffect.start(p,x,T,E,M,P,w)},zoomTo:function(p,x,T,E,M,P){return this.zoomEffect.start(p,x,T,E,M,P)},preRender:function(){this.renderList.length=0;var p=this.width,x=this.height,T=p*.5,E=x*.5,M=this.zoom,P=this.matrix,w=p*this.originX,R=x*this.originY,A=this._follow,O=this.deadzone,F=this.scrollX,b=this.scrollY;O&&m(O,this.midPoint.x,this.midPoint.y);var D=!1;if(this.roundPixels&&(w=Math.floor(w),R=Math.floor(R)),A&&!this.panEffect.isRunning){var I=this.lerp,B=A.x-this.followOffset.x,z=A.y-this.followOffset.y;this.roundPixels&&(B=Math.floor(B),z=Math.floor(z)),O?(B<O.x?F=c(F,F-(O.x-B),I.x):B>O.right&&(F=c(F,F+(B-O.right),I.x)),z<O.y?b=c(b,b-(O.y-z),I.y):z>O.bottom&&(b=c(b,b+(z-O.bottom),I.y))):(F=c(F,B-w,I.x),b=c(b,z-R,I.y)),D=!0}this.useBounds&&(F=this.clampX(F),b=this.clampY(b)),this.roundPixels&&(F=Math.floor(F),b=Math.floor(b)),this.scrollX=F,this.scrollY=b;var Y=F+T,X=b+E;this.midPoint.set(Y,X);var H=p/M,N=x/M,U=Y-H/2,L=X-N/2;this.roundPixels&&(U=Math.floor(U),L=Math.floor(L)),this.worldView.setTo(U,L,H,N),P.applyITRS(Math.floor(this.x+w),Math.floor(this.y+R),this.rotation,M,M),P.translate(-w,-R),this.shakeEffect.preRender(),D&&this.emit(a.FOLLOW_UPDATE,this,A)},setLerp:function(p,x){return p===void 0&&(p=1),x===void 0&&(x=p),this.lerp.set(p,x),this},setFollowOffset:function(p,x){return p===void 0&&(p=0),x===void 0&&(x=0),this.followOffset.set(p,x),this},startFollow:function(p,x,T,E,M,P){x===void 0&&(x=!1),T===void 0&&(T=1),E===void 0&&(E=T),M===void 0&&(M=0),P===void 0&&(P=M),this._follow=p,this.roundPixels=x,T=d(T,0,1),E=d(E,0,1),this.lerp.set(T,E),this.followOffset.set(M,P);var w=this.width/2,R=this.height/2,A=p.x-M,O=p.y-P;return this.midPoint.set(A,O),this.scrollX=A-w,this.scrollY=O-R,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(p,x){this.visible&&(this.rotateToEffect.update(p,x),this.panEffect.update(p,x),this.zoomEffect.update(p,x),this.shakeEffect.update(p,x),this.flashEffect.update(p,x),this.fadeEffect.update(p,x))},destroy:function(){this.resetFX(),u.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});r.exports=g}),62382:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(47751),m=e(56694),d=e(72632),l=e(91963),h=e(94287),n=e(40444),a=e(7599),c=new m({initialize:function(v){this.scene=v,this.systems=v.sys,this.roundPixels=v.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,v.sys.events.once(a.BOOT,this.boot,this),v.sys.events.on(a.START,this.start,this)},boot:function(){var o=this.systems;o.settings.cameras?this.fromJSON(o.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new u(0,0,o.scale.width,o.scale.height).setScene(this.scene),o.game.scale.on(n.RESIZE,this.onResize,this),this.systems.events.once(a.DESTROY,this.destroy,this)},start:function(){if(!this.main){var o=this.systems;o.settings.cameras?this.fromJSON(o.settings.cameras):this.add(),this.main=this.cameras[0]}var v=this.systems.events;v.on(a.UPDATE,this.update,this),v.once(a.SHUTDOWN,this.shutdown,this)},add:function(o,v,g,p,x,T){o===void 0&&(o=0),v===void 0&&(v=0),g===void 0&&(g=this.scene.sys.scale.width),p===void 0&&(p=this.scene.sys.scale.height),x===void 0&&(x=!1),T===void 0&&(T="");var E=new u(o,v,g,p);return E.setName(T),E.setScene(this.scene),E.setRoundPixels(this.roundPixels),E.id=this.getNextID(),this.cameras.push(E),x&&(this.main=E),E},addExisting:function(o,v){v===void 0&&(v=!1);var g=this.cameras.indexOf(o);return g===-1?(o.id=this.getNextID(),o.setRoundPixels(this.roundPixels),this.cameras.push(o),v&&(this.main=o),o):null},getNextID:function(){for(var o=this.cameras,v=1,g=0;g<32;g++){for(var p=!1,x=0;x<o.length;x++){var T=o[x];if(T&&T.id===v){p=!0;continue}}if(p)v=v<<1;else return v}return 0},getTotal:function(o){o===void 0&&(o=!1);for(var v=0,g=this.cameras,p=0;p<g.length;p++){var x=g[p];(!o||o&&x.visible)&&v++}return v},fromJSON:function(o){Array.isArray(o)||(o=[o]);for(var v=this.scene.sys.scale.width,g=this.scene.sys.scale.height,p=0;p<o.length;p++){var x=o[p],T=d(x,"x",0),E=d(x,"y",0),M=d(x,"width",v),P=d(x,"height",g),w=this.add(T,E,M,P);w.name=d(x,"name",""),w.zoom=d(x,"zoom",1),w.rotation=d(x,"rotation",0),w.scrollX=d(x,"scrollX",0),w.scrollY=d(x,"scrollY",0),w.roundPixels=d(x,"roundPixels",!1),w.visible=d(x,"visible",!0);var R=d(x,"backgroundColor",!1);R&&w.setBackgroundColor(R);var A=d(x,"bounds",null);if(A){var O=d(A,"x",0),F=d(A,"y",0),b=d(A,"width",v),D=d(A,"height",g);w.setBounds(O,F,b,D)}}return this},getCamera:function(o){for(var v=this.cameras,g=0;g<v.length;g++)if(v[g].name===o)return v[g];return null},getCamerasBelowPointer:function(o){for(var v=this.cameras,g=o.x,p=o.y,x=[],T=0;T<v.length;T++){var E=v[T];E.visible&&E.inputEnabled&&h(E,g,p)&&x.unshift(E)}return x},remove:function(o,v){v===void 0&&(v=!0),Array.isArray(o)||(o=[o]);for(var g=0,p=this.cameras,x=0;x<o.length;x++){var T=p.indexOf(o[x]);T!==-1&&(v?p[T].destroy():p[T].renderList=[],p.splice(T,1),g++)}return!this.main&&p[0]&&(this.main=p[0]),g},render:function(o,v){for(var g=this.scene,p=this.cameras,x=0;x<p.length;x++){var T=p[x];if(T.visible&&T.alpha>0){T.preRender();var E=this.getVisibleChildren(v.getChildren(),T);o.render(g,E,T)}}},getVisibleChildren:function(o,v){return o.filter(function(g){return g.willRender(v)})},resetAll:function(){for(var o=0;o<this.cameras.length;o++)this.cameras[o].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(o,v){for(var g=0;g<this.cameras.length;g++)this.cameras[g].update(o,v)},onResize:function(o,v,g,p,x){for(var T=0;T<this.cameras.length;T++){var E=this.cameras[T];E._x===0&&E._y===0&&E._width===p&&E._height===x&&E.setSize(v.width,v.height)}},resize:function(o,v){for(var g=0;g<this.cameras.length;g++)this.cameras[g].setSize(o,v)},shutdown:function(){this.main=void 0;for(var o=0;o<this.cameras.length;o++)this.cameras[o].destroy();this.cameras=[];var v=this.systems.events;v.off(a.UPDATE,this.update,this),v.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.systems.events.off(a.START,this.start,this),this.systems.events.off(a.DESTROY,this.destroy,this),this.systems.game.scale.off(n.RESIZE,this.onResize,this),this.scene=null,this.systems=null}});l.register("CameraManager",c,"cameras"),r.exports=c}),92522:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(82897),m=e(56694),d=e(89787),l=new m({initialize:function(n){this.camera=n,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(h,n,a,c,o,v,g,p){if(h===void 0&&(h=!0),n===void 0&&(n=1e3),a===void 0&&(a=0),c===void 0&&(c=0),o===void 0&&(o=0),v===void 0&&(v=!1),g===void 0&&(g=null),p===void 0&&(p=this.camera.scene),!v&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=n,this.direction=h,this.progress=0,this.red=a,this.green=c,this.blue=o,this.alpha=h?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=g,this._onUpdateScope=p;var x=h?d.FADE_OUT_START:d.FADE_IN_START;return this.camera.emit(x,this.camera,this,n,a,c,o),this.camera},update:function(h,n){this.isRunning&&(this._elapsed+=n,this.progress=u(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(h){if(!this.isRunning&&!this.isComplete)return!1;var n=this.camera;return h.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",h.fillRect(n.x,n.y,n.width,n.height),!0},postRenderWebGL:function(h,n){if(!this.isRunning&&!this.isComplete)return!1;var a=this.camera,c=this.red/255,o=this.green/255,v=this.blue/255;return h.drawFillRect(a.x,a.y,a.width,a.height,n(v,o,c,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var h=this.direction?d.FADE_OUT_COMPLETE:d.FADE_IN_COMPLETE;this.camera.emit(h,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});r.exports=l}),22151:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(82897),m=e(56694),d=e(89787),l=new m({initialize:function(n){this.camera=n,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=1,this.progress=0,this._elapsed=0,this._alpha,this._onUpdate,this._onUpdateScope},start:function(h,n,a,c,o,v,g){return h===void 0&&(h=250),n===void 0&&(n=255),a===void 0&&(a=255),c===void 0&&(c=255),o===void 0&&(o=!1),v===void 0&&(v=null),g===void 0&&(g=this.camera.scene),!o&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=h,this.progress=0,this.red=n,this.green=a,this.blue=c,this._alpha=this.alpha,this._elapsed=0,this._onUpdate=v,this._onUpdateScope=g,this.camera.emit(d.FLASH_START,this.camera,this,h,n,a,c),this.camera)},update:function(h,n){this.isRunning&&(this._elapsed+=n,this.progress=u(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this._alpha*(1-this.progress):this.effectComplete())},postRenderCanvas:function(h){if(!this.isRunning)return!1;var n=this.camera;return h.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",h.fillRect(n.x,n.y,n.width,n.height),!0},postRenderWebGL:function(h,n){if(!this.isRunning)return!1;var a=this.camera,c=this.red/255,o=this.green/255,v=this.blue/255;return h.drawFillRect(a.x,a.y,a.width,a.height,n(v,o,c,1),this.alpha),!0},effectComplete:function(){this.alpha=this._alpha,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(d.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});r.exports=l}),37551:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(82897),m=e(56694),d=e(35060),l=e(89787),h=e(93736),n=new m({initialize:function(c){this.camera=c,this.isRunning=!1,this.duration=0,this.source=new h,this.current=new h,this.destination=new h,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(a,c,o,v,g,p,x){o===void 0&&(o=1e3),v===void 0&&(v=d.Linear),g===void 0&&(g=!1),p===void 0&&(p=null),x===void 0&&(x=this.camera.scene);var T=this.camera;return!g&&this.isRunning||(this.isRunning=!0,this.duration=o,this.progress=0,this.source.set(T.scrollX,T.scrollY),this.destination.set(a,c),T.getScroll(a,c,this.current),typeof v=="string"&&d.hasOwnProperty(v)?this.ease=d[v]:typeof v=="function"&&(this.ease=v),this._elapsed=0,this._onUpdate=p,this._onUpdateScope=x,this.camera.emit(l.PAN_START,this.camera,this,o,a,c)),T},update:function(a,c){if(this.isRunning){this._elapsed+=c;var o=u(this._elapsed/this.duration,0,1);this.progress=o;var v=this.camera;if(this._elapsed<this.duration){var g=this.ease(o);v.getScroll(this.destination.x,this.destination.y,this.current);var p=this.source.x+(this.current.x-this.source.x)*g,x=this.source.y+(this.current.y-this.source.y)*g;v.setScroll(p,x),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,v,o,p,x)}else v.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,v,o,v.scrollX,v.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(l.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});r.exports=n}),1771:((r,y,e)=>{/**
 * @author       Jason Nicholls <nicholls.jason@gmail.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var u=e(82897),m=e(56694),d=e(89787),l=e(35060),h=new m({initialize:function(a){this.camera=a,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(n,a,c,o,v,g,p){c===void 0&&(c=1e3),o===void 0&&(o=l.Linear),v===void 0&&(v=!1),g===void 0&&(g=null),p===void 0&&(p=this.camera.scene),a===void 0&&(a=!1),this.shortestPath=a;var x=n;n<0?(x=-1*n,this.clockwise=!1):this.clockwise=!0;var T=360*Math.PI/180;x=x-Math.floor(x/T)*T;var E=this.camera;if(!v&&this.isRunning)return E;if(this.isRunning=!0,this.duration=c,this.progress=0,this.source=E.rotation,this.destination=x,typeof o=="string"&&l.hasOwnProperty(o)?this.ease=l[o]:typeof o=="function"&&(this.ease=o),this._elapsed=0,this._onUpdate=g,this._onUpdateScope=p,this.shortestPath){var M=0,P=0;this.destination>this.source?M=Math.abs(this.destination-this.source):M=Math.abs(this.destination+T)-this.source,this.source>this.destination?P=Math.abs(this.source-this.destination):P=Math.abs(this.source+T)-this.destination,M<P?this.clockwise=!0:M>P&&(this.clockwise=!1)}return this.camera.emit(d.ROTATE_START,this.camera,this,c,x),E},update:function(n,a){if(this.isRunning){this._elapsed+=a;var c=u(this._elapsed/this.duration,0,1);this.progress=c;var o=this.camera;if(this._elapsed<this.duration){var v=this.ease(c);this.current=o.rotation;var g=0,p=360*Math.PI/180,x=this.destination,T=this.current;this.clockwise===!1&&(x=this.current,T=this.destination),x>=T?g=Math.abs(x-T):g=Math.abs(x+p)-T;var E=0;this.clockwise?E=o.rotation+g*v:E=o.rotation-g*v,o.rotation=E,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,o,c,E)}else o.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,o,c,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(d.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});r.exports=h}),3241:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(82897),m=e(56694),d=e(89787),l=e(93736),h=new m({initialize:function(a){this.camera=a,this.isRunning=!1,this.duration=0,this.intensity=new l,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(n,a,c,o,v){return n===void 0&&(n=100),a===void 0&&(a=.05),c===void 0&&(c=!1),o===void 0&&(o=null),v===void 0&&(v=this.camera.scene),!c&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=n,this.progress=0,typeof a=="number"?this.intensity.set(a):this.intensity.set(a.x,a.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=o,this._onUpdateScope=v,this.camera.emit(d.SHAKE_START,this.camera,this,n,a),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(n,a){if(this.isRunning)if(this._elapsed+=a,this.progress=u(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var c=this.intensity,o=this.camera.width,v=this.camera.height,g=this.camera.zoom;this._offsetX=(Math.random()*c.x*o*2-c.x*o)*g,this._offsetY=(Math.random()*c.y*v*2-c.y*v)*g,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(d.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});r.exports=h}),13383:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(82897),m=e(56694),d=e(35060),l=e(89787),h=new m({initialize:function(a){this.camera=a,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(n,a,c,o,v,g){a===void 0&&(a=1e3),c===void 0&&(c=d.Linear),o===void 0&&(o=!1),v===void 0&&(v=null),g===void 0&&(g=this.camera.scene);var p=this.camera;return!o&&this.isRunning||(this.isRunning=!0,this.duration=a,this.progress=0,this.source=p.zoom,this.destination=n,typeof c=="string"&&d.hasOwnProperty(c)?this.ease=d[c]:typeof c=="function"&&(this.ease=c),this._elapsed=0,this._onUpdate=v,this._onUpdateScope=g,this.camera.emit(l.ZOOM_START,this.camera,this,a,n)),p},update:function(n,a){this.isRunning&&(this._elapsed+=a,this.progress=u(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(l.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});r.exports=h}),53030:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Fade:e(92522),Flash:e(22151),Pan:e(37551),Shake:e(3241),RotateTo:e(1771),Zoom:e(13383)}}),39577:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="cameradestroy"}),85373:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="camerafadeincomplete"}),92057:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="camerafadeinstart"}),1903:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="camerafadeoutcomplete"}),96131:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="camerafadeoutstart"}),85409:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="cameraflashcomplete"}),25500:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="cameraflashstart"}),44071:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="followupdate"}),19818:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="camerapancomplete"}),80002:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="camerapanstart"}),87966:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="postrender"}),74217:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="prerender"}),34805:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="camerarotatecomplete"}),30408:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="camerarotatestart"}),49856:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="camerashakecomplete"}),69189:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="camerashakestart"}),67657:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="camerazoomcomplete"}),14229:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="camerazoomstart"}),89787:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={DESTROY:e(39577),FADE_IN_COMPLETE:e(85373),FADE_IN_START:e(92057),FADE_OUT_COMPLETE:e(1903),FADE_OUT_START:e(96131),FLASH_COMPLETE:e(85409),FLASH_START:e(25500),FOLLOW_UPDATE:e(44071),PAN_COMPLETE:e(19818),PAN_START:e(80002),POST_RENDER:e(87966),PRE_RENDER:e(74217),ROTATE_COMPLETE:e(34805),ROTATE_START:e(30408),SHAKE_COMPLETE:e(49856),SHAKE_START:e(69189),ZOOM_COMPLETE:e(67657),ZOOM_START:e(14229)}}),32356:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Camera:e(47751),BaseCamera:e(51052),CameraManager:e(62382),Effects:e(53030),Events:e(89787)}}),84219:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(10850),d=new u({initialize:function(h){this.camera=m(h,"camera",null),this.left=m(h,"left",null),this.right=m(h,"right",null),this.up=m(h,"up",null),this.down=m(h,"down",null),this.zoomIn=m(h,"zoomIn",null),this.zoomOut=m(h,"zoomOut",null),this.zoomSpeed=m(h,"zoomSpeed",.01),this.minZoom=m(h,"minZoom",.001),this.maxZoom=m(h,"maxZoom",1e3),this.speedX=0,this.speedY=0;var n=m(h,"speed",null);typeof n=="number"?(this.speedX=n,this.speedY=n):(this.speedX=m(h,"speed.x",0),this.speedY=m(h,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(l){return this.camera=l,this},update:function(l){if(this.active){l===void 0&&(l=1);var h=this.camera;this.up&&this.up.isDown?h.scrollY-=this.speedY*l|0:this.down&&this.down.isDown&&(h.scrollY+=this.speedY*l|0),this.left&&this.left.isDown?h.scrollX-=this.speedX*l|0:this.right&&this.right.isDown&&(h.scrollX+=this.speedX*l|0),this.zoomIn&&this.zoomIn.isDown?(h.zoom-=this.zoomSpeed,h.zoom<this.minZoom&&(h.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(h.zoom+=this.zoomSpeed,h.zoom>this.maxZoom&&(h.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});r.exports=d}),69370:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(10850),d=new u({initialize:function(h){this.camera=m(h,"camera",null),this.left=m(h,"left",null),this.right=m(h,"right",null),this.up=m(h,"up",null),this.down=m(h,"down",null),this.zoomIn=m(h,"zoomIn",null),this.zoomOut=m(h,"zoomOut",null),this.zoomSpeed=m(h,"zoomSpeed",.01),this.minZoom=m(h,"minZoom",.001),this.maxZoom=m(h,"maxZoom",1e3),this.accelX=0,this.accelY=0;var n=m(h,"acceleration",null);typeof n=="number"?(this.accelX=n,this.accelY=n):(this.accelX=m(h,"acceleration.x",0),this.accelY=m(h,"acceleration.y",0)),this.dragX=0,this.dragY=0;var a=m(h,"drag",null);typeof a=="number"?(this.dragX=a,this.dragY=a):(this.dragX=m(h,"drag.x",0),this.dragY=m(h,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var c=m(h,"maxSpeed",null);typeof c=="number"?(this.maxSpeedX=c,this.maxSpeedY=c):(this.maxSpeedX=m(h,"maxSpeed.x",0),this.maxSpeedY=m(h,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(l){return this.camera=l,this},update:function(l){if(this.active){l===void 0&&(l=1);var h=this.camera;this._speedX>0?(this._speedX-=this.dragX*l,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*l,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*l,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*l,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(h.scrollX-=this._speedX*l|0),this._speedY!==0&&(h.scrollY-=this._speedY*l|0),this._zoom!==0&&(h.zoom+=this._zoom,h.zoom<this.minZoom?h.zoom=this.minZoom:h.zoom>this.maxZoom&&(h.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});r.exports=d}),6524:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={FixedKeyControl:e(84219),SmoothedKeyControl:e(69370)}}),44143:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Controls:e(6524),Scene2D:e(32356)}}),86459:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u={VERSION:"3.60.0",BlendModes:e(95723),ScaleModes:e(27394),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};r.exports=u}),14033:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(86459),d=e(18360),l=e(77290),h=e(72632),n=e(10850),a=e(42911),c=e(72283),o=e(5923),v=e(65641),g=e(93222),p=new u({initialize:function(T){T===void 0&&(T={});var E=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],M="#ffffff",P=n(T,"scale",null);this.width=n(P,"width",1024,T),this.height=n(P,"height",768,T),this.zoom=n(P,"zoom",1,T),this.parent=n(P,"parent",void 0,T),this.scaleMode=n(P,P?"mode":"scaleMode",0,T),this.expandParent=n(P,"expandParent",!0,T),this.autoRound=n(P,"autoRound",!1,T),this.autoCenter=n(P,"autoCenter",0,T),this.resizeInterval=n(P,"resizeInterval",500,T),this.fullscreenTarget=n(P,"fullscreenTarget",null,T),this.minWidth=n(P,"minWidth",0,T),this.maxWidth=n(P,"maxWidth",0,T),this.minHeight=n(P,"minHeight",0,T),this.maxHeight=n(P,"maxHeight",0,T),this.renderType=n(T,"type",m.AUTO),this.canvas=n(T,"canvas",null),this.context=n(T,"context",null),this.canvasStyle=n(T,"canvasStyle",null),this.customEnvironment=n(T,"customEnvironment",!1),this.sceneConfig=n(T,"scene",null),this.seed=n(T,"seed",[(Date.now()*Math.random()).toString()]),o.RND=new o.RandomDataGenerator(this.seed),this.gameTitle=n(T,"title",""),this.gameURL=n(T,"url","https://phaser.io"),this.gameVersion=n(T,"version",""),this.autoFocus=n(T,"autoFocus",!0),this.stableSort=n(T,"stableSort",-1),this.stableSort===-1&&(this.stableSort=l.browser.es2019?1:0),l.features.stableSort=this.stableSort,this.domCreateContainer=n(T,"dom.createContainer",!1),this.domPointerEvents=n(T,"dom.pointerEvents","none"),this.inputKeyboard=n(T,"input.keyboard",!0),this.inputKeyboardEventTarget=n(T,"input.keyboard.target",window),this.inputKeyboardCapture=n(T,"input.keyboard.capture",[]),this.inputMouse=n(T,"input.mouse",!0),this.inputMouseEventTarget=n(T,"input.mouse.target",null),this.inputMousePreventDefaultDown=n(T,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=n(T,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=n(T,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=n(T,"input.mouse.preventDefaultWheel",!0),this.inputTouch=n(T,"input.touch",l.input.touch),this.inputTouchEventTarget=n(T,"input.touch.target",null),this.inputTouchCapture=n(T,"input.touch.capture",!0),this.inputActivePointers=n(T,"input.activePointers",1),this.inputSmoothFactor=n(T,"input.smoothFactor",0),this.inputWindowEvents=n(T,"input.windowEvents",!0),this.inputGamepad=n(T,"input.gamepad",!1),this.inputGamepadEventTarget=n(T,"input.gamepad.target",window),this.disableContextMenu=n(T,"disableContextMenu",!1),this.audio=n(T,"audio",{}),this.hideBanner=n(T,"banner",null)===!1,this.hidePhaser=n(T,"banner.hidePhaser",!1),this.bannerTextColor=n(T,"banner.text",M),this.bannerBackgroundColor=n(T,"banner.background",E),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=n(T,"fps",null);var w=n(T,"render",null);this.pipeline=n(w,"pipeline",null,T),this.autoMobilePipeline=n(w,"autoMobilePipeline",!0,T),this.defaultPipeline=n(w,"defaultPipeline",v.MULTI_PIPELINE,T),this.antialias=n(w,"antialias",!0,T),this.antialiasGL=n(w,"antialiasGL",!0,T),this.mipmapFilter=n(w,"mipmapFilter","",T),this.desynchronized=n(w,"desynchronized",!1,T),this.roundPixels=n(w,"roundPixels",!1,T),this.pixelArt=n(w,"pixelArt",this.zoom!==1,T),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=n(w,"transparent",!1,T),this.clearBeforeRender=n(w,"clearBeforeRender",!0,T),this.preserveDrawingBuffer=n(w,"preserveDrawingBuffer",!1,T),this.premultipliedAlpha=n(w,"premultipliedAlpha",!0,T),this.failIfMajorPerformanceCaveat=n(w,"failIfMajorPerformanceCaveat",!1,T),this.powerPreference=n(w,"powerPreference","default",T),this.batchSize=n(w,"batchSize",4096,T),this.maxTextures=n(w,"maxTextures",-1,T),this.maxLights=n(w,"maxLights",10,T);var R=n(T,"backgroundColor",0);this.backgroundColor=g(R),this.transparent&&(this.backgroundColor=g(0),this.backgroundColor.alpha=0),this.preBoot=n(T,"callbacks.preBoot",c),this.postBoot=n(T,"callbacks.postBoot",c),this.physics=n(T,"physics",{}),this.defaultPhysicsSystem=n(this.physics,"default",!1),this.loaderBaseURL=n(T,"loader.baseURL",""),this.loaderPath=n(T,"loader.path",""),this.loaderMaxParallelDownloads=n(T,"loader.maxParallelDownloads",l.os.android?6:32),this.loaderCrossOrigin=n(T,"loader.crossOrigin",void 0),this.loaderResponseType=n(T,"loader.responseType",""),this.loaderAsync=n(T,"loader.async",!0),this.loaderUser=n(T,"loader.user",""),this.loaderPassword=n(T,"loader.password",""),this.loaderTimeout=n(T,"loader.timeout",0),this.loaderWithCredentials=n(T,"loader.withCredentials",!1),this.loaderImageLoadType=n(T,"loader.imageLoadType","XHR"),this.loaderLocalScheme=n(T,"loader.localScheme",["file://","capacitor://"]),this.glowFXQuality=n(T,"fx.glow.quality",.1),this.glowFXDistance=n(T,"fx.glow.distance",10),this.installGlobalPlugins=[],this.installScenePlugins=[];var A=n(T,"plugins",null),O=d.DefaultScene;A&&(Array.isArray(A)?this.defaultPlugins=A:a(A)&&(this.installGlobalPlugins=h(A,"global",[]),this.installScenePlugins=h(A,"scene",[]),Array.isArray(A.default)?O=A.default:Array.isArray(A.defaultMerge)&&(O=O.concat(A.defaultMerge)))),this.defaultPlugins=O;var F="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=n(T,"images.default",F+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=n(T,"images.missing",F+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=n(T,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=m.WEBGL:window.FORCE_CANVAS&&(this.renderType=m.CANVAS))}});r.exports=p}),50150:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(70616),m=e(61068),d=e(86459),l=e(90185),h=function(n){var a=n.config;if((a.customEnvironment||a.canvas)&&a.renderType===d.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!a.customEnvironment&&!a.canvas&&a.renderType!==d.HEADLESS)if(a.renderType===d.AUTO&&(a.renderType=l.webGL?d.WEBGL:d.CANVAS),a.renderType===d.WEBGL){if(!l.webGL)throw new Error("Cannot create WebGL context, aborting.")}else if(a.renderType===d.CANVAS){if(!l.canvas)throw new Error("Cannot create Canvas context, aborting.")}else throw new Error("Unknown value for renderer type: "+a.renderType);a.antialias||m.disableSmoothing();var c=n.scale.baseSize,o=c.width,v=c.height;if(a.canvas?(n.canvas=a.canvas,n.canvas.width=o,n.canvas.height=v):n.canvas=m.create(n,o,v,a.renderType),a.canvasStyle&&(n.canvas.style=a.canvasStyle),a.antialias||u.setCrisp(n.canvas),a.renderType!==d.HEADLESS){var g,p;g=e(91135),p=e(11857),a.renderType===d.WEBGL?n.renderer=new p(n):(n.renderer=new g(n),n.context=n.renderer.gameContext)}};r.exports=h}),77291:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(86459),m=function(d){var l=d.config;if(!l.hideBanner){var h="WebGL";l.renderType===u.CANVAS?h="Canvas":l.renderType===u.HEADLESS&&(h="Headless");var n=l.audio,a=d.device.audio,c;if(a.webAudio&&!n.disableWebAudio?c="Web Audio":n.noAudio||!a.webAudio&&!a.audioData?c="No Audio":c="HTML5 Audio",d.device.browser.ie)window.console&&console.log("Phaser v"+u.VERSION+" / https://phaser.io");else{var o="",v=[o];if(Array.isArray(l.bannerBackgroundColor)){var g;l.bannerBackgroundColor.forEach(function(x){o=o.concat("%c "),v.push("background: "+x),g=x}),v[v.length-1]="color: "+l.bannerTextColor+"; background: "+g}else o=o.concat("%c "),v.push("color: "+l.bannerTextColor+"; background: "+l.bannerBackgroundColor);v.push("background: transparent"),l.gameTitle&&(o=o.concat(l.gameTitle),l.gameVersion&&(o=o.concat(" v"+l.gameVersion)),l.hidePhaser||(o=o.concat(" / ")));var p="";l.hidePhaser||(o=o.concat("Phaser v"+u.VERSION+p+" ("+h+" | "+c+")")),o=o.concat(" %c "+l.gameURL),v[0]=o,console.log.apply(console,v)}}};r.exports=m}),15213:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(99584),m=e(90249),d=e(43474),l=e(61068),h=e(56694),n=e(14033),a=e(85178),c=e(50150),o=e(81078),v=e(77291),g=e(77290),p=e(21546),x=e(6659),T=e(97081),E=e(69898),M=e(91963),P=e(49274),w=e(756),R=e(13553),A=e(38203),O=e(6237),F=e(26617),b=e(26493),D=e(84191),I=new h({initialize:function(z){this.config=new n(z),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new x,this.anims=new m(this),this.textures=new O(this),this.cache=new d(this),this.registry=new o(this,new x),this.input=new E(this,this.config),this.scene=new R(this,this.config.sceneConfig),this.device=g,this.scale=new w(this,this.config),this.sound=null,this.sound=D.create(this),this.loop=new F(this,this.config.fps),this.plugins=new P(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,this.isPaused=!1,p(this.boot.bind(this))},boot:function(){if(!M.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),c(this),a(this),v(this),u(this.canvas,this.config.parent),this.textures.once(A.READY,this.texturesReady,this),this.events.emit(T.BOOT)},texturesReady:function(){this.events.emit(T.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),b(this);var B=this.events;B.on(T.HIDDEN,this.onHidden,this),B.on(T.VISIBLE,this.onVisible,this),B.on(T.BLUR,this.onBlur,this),B.on(T.FOCUS,this.onFocus,this)},step:function(B,z){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var Y=this.events;Y.emit(T.PRE_STEP,B,z),Y.emit(T.STEP,B,z),this.scene.update(B,z),Y.emit(T.POST_STEP,B,z);var X=this.renderer;X.preRender(),Y.emit(T.PRE_RENDER,X,B,z),this.scene.render(X),X.postRender(),Y.emit(T.POST_RENDER,X,B,z)}},headlessStep:function(B,z){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var Y=this.events;Y.emit(T.PRE_STEP,B,z),Y.emit(T.STEP,B,z),this.scene.update(B,z),Y.emit(T.POST_STEP,B,z),this.scene.isProcessing=!1,Y.emit(T.PRE_RENDER,null,B,z),Y.emit(T.POST_RENDER,null,B,z)}},onHidden:function(){this.loop.pause(),this.events.emit(T.PAUSE)},pause:function(){var B=this.isPaused;this.isPaused=!0,B||this.events.emit(T.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(T.RESUME)},resume:function(){var B=this.isPaused;this.isPaused=!1,B&&this.events.emit(T.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(B,z){z===void 0&&(z=!1),this.pendingDestroy=!0,this.removeCanvas=B,this.noReturn=z},runDestroy:function(){this.scene.destroy(),this.events.emit(T.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(l.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});r.exports=I}),26617:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(10850),d=e(72283),l=e(27385),h=new u({initialize:function(a,c){this.game=a,this.raf=new l,this.started=!1,this.running=!1,this.minFps=m(c,"min",5),this.targetFps=m(c,"target",60),this.fpsLimit=m(c,"limit",0),this.hasFpsLimit=this.fpsLimit>0,this._limitRate=this.hasFpsLimit?1e3/this.fpsLimit:0,this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=d,this.forceSetTimeOut=m(c,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=m(c,"deltaHistory",10),this.panicMax=m(c,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=m(c,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var n=window.performance.now();this.time=n,this.lastTime=n,this.nextFpsUpdate=n+1e3,this.framesThisSecond=0;for(var a=0;a<this.deltaSmoothingMax;a++)this.deltaHistory[a]=Math.min(this._target,this.deltaHistory[a]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(n){if(this.started)return this;this.started=!0,this.running=!0;for(var a=0;a<this.deltaSmoothingMax;a++)this.deltaHistory[a]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=n;var c=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(c,this.forceSetTimeOut,this._target)},smoothDelta:function(n){var a=this.deltaIndex,c=this.deltaHistory,o=this.deltaSmoothingMax;(this._coolDown>0||!this.inFocus)&&(this._coolDown--,n=Math.min(n,this._target)),n>this._min&&(n=c[a],n=Math.min(n,this._min)),c[a]=n,this.deltaIndex++,this.deltaIndex>=o&&(this.deltaIndex=0);for(var v=0,g=0;g<o;g++)v+=c[g];return v/=o,v},updateFPS:function(n){this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=n+1e3,this.framesThisSecond=0},stepLimitFPS:function(n){this.now=n;var a=Math.max(0,n-this.lastTime);this.rawDelta=a,this.time+=this.rawDelta,this.smoothStep&&(a=this.smoothDelta(a)),this.delta+=a,n>=this.nextFpsUpdate&&this.updateFPS(n),this.framesThisSecond++,this.delta>=this._limitRate&&(this.callback(n,this.delta),this.delta=0),this.lastTime=n,this.frame++},step:function(n){this.now=n;var a=Math.max(0,n-this.lastTime);this.rawDelta=a,this.time+=this.rawDelta,this.smoothStep&&(a=this.smoothDelta(a)),this.delta=a,n>=this.nextFpsUpdate&&this.updateFPS(n),this.framesThisSecond++,this.callback(n,a),this.lastTime=n,this.frame++},tick:function(){var n=window.performance.now();this.hasFpsLimit?this.stepLimitFPS(n):this.step(n)},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(n){n===void 0&&(n=!1);var a=window.performance.now();if(!this.running){n&&(this.startTime+=-this.lastTime+(this.lastTime+a));var c=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(c,this.forceSetTimeOut,this._target),this.running=!0,this.nextFpsUpdate=a+1e3,this.framesThisSecond=0,this.fpsLimitTriggered=!1,this.tick()}},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.raf.destroy(),this.raf=null,this.game=null,this.callback=null}});r.exports=h}),26493:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(97081),m=function(d){var l,h=d.events;if(document.hidden!==void 0)l="visibilitychange";else{var n=["webkit","moz","ms"];n.forEach(function(c){document[c+"Hidden"]!==void 0&&(document.hidden=function(){return document[c+"Hidden"]},l=c+"visibilitychange")})}var a=function(c){document.hidden||c.type==="pause"?h.emit(u.HIDDEN):h.emit(u.VISIBLE)};l&&document.addEventListener(l,a,!1),window.onblur=function(){h.emit(u.BLUR)},window.onfocus=function(){h.emit(u.FOCUS)},window.focus&&d.config.autoFocus&&window.focus()};r.exports=m}),41651:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="blur"}),5520:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="boot"}),51673:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="contextlost"}),25055:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="destroy"}),23767:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="focus"}),57564:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="hidden"}),38327:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pause"}),43807:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="postrender"}),73652:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="poststep"}),780:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="prerender"}),13781:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="prestep"}),38247:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="ready"}),29129:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="resume"}),34994:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="step"}),98704:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="visible"}),97081:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={BLUR:e(41651),BOOT:e(5520),CONTEXT_LOST:e(51673),DESTROY:e(25055),FOCUS:e(23767),HIDDEN:e(57564),PAUSE:e(38327),POST_RENDER:e(43807),POST_STEP:e(73652),PRE_RENDER:e(780),PRE_STEP:e(13781),READY:e(38247),RESUME:e(29129),STEP:e(34994),VISIBLE:e(98704)}}),80293:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Config:e(14033),CreateRenderer:e(50150),DebugHeader:e(77291),Events:e(97081),TimeStep:e(26617),VisibilityHandler:e(26493)}}),52780:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(81543),m=e(61068),d=e(10850),l=function(h){var n=d(h,"data",[]),a=d(h,"canvas",null),c=d(h,"palette",u),o=d(h,"pixelWidth",1),v=d(h,"pixelHeight",o),g=d(h,"resizeCanvas",!0),p=d(h,"clearCanvas",!0),x=d(h,"preRender",null),T=d(h,"postRender",null),E=Math.floor(Math.abs(n[0].length*o)),M=Math.floor(Math.abs(n.length*v));a||(a=m.create2D(this,E,M),g=!1,p=!1),g&&(a.width=E,a.height=M);var P=a.getContext("2d",{willReadFrequently:!0});p&&P.clearRect(0,0,E,M),x&&x(a,P);for(var w=0;w<n.length;w++)for(var R=n[w],A=0;A<R.length;A++){var O=R[A];O!=="."&&O!==" "&&(P.fillStyle=c[O],P.fillRect(A*o,w*v,o,v))}return T&&T(a,P),a};r.exports=l}),84106:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={GenerateTexture:e(52780),Palettes:e(25235)}}),81543:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}}),75846:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}}),83206:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}}),13194:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}}),50686:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}}),25235:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={ARNE16:e(81543),C64:e(75846),CGA:e(83206),JMP:e(13194),MSX:e(50686)}}),63120:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(34631),d=e(38517),l=e(93736),h=new u({Extends:d,initialize:function(a,c,o,v){d.call(this,"CubicBezierCurve"),Array.isArray(a)&&(v=new l(a[6],a[7]),o=new l(a[4],a[5]),c=new l(a[2],a[3]),a=new l(a[0],a[1])),this.p0=a,this.p1=c,this.p2=o,this.p3=v},getStartPoint:function(n){return n===void 0&&(n=new l),n.copy(this.p0)},getResolution:function(n){return n},getPoint:function(n,a){a===void 0&&(a=new l);var c=this.p0,o=this.p1,v=this.p2,g=this.p3;return a.set(m(n,c.x,o.x,v.x,g.x),m(n,c.y,o.y,v.y,g.y))},draw:function(n,a){a===void 0&&(a=32);var c=this.getPoints(a);n.beginPath(),n.moveTo(this.p0.x,this.p0.y);for(var o=1;o<c.length;o++)n.lineTo(c[o].x,c[o].y);return n.strokePath(),n},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});h.fromJSON=function(n){var a=n.points,c=new l(a[0],a[1]),o=new l(a[2],a[3]),v=new l(a[4],a[5]),g=new l(a[6],a[7]);return new h(c,o,v,g)},r.exports=h}),38517:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(80222),d=e(74118),l=e(93736),h=new u({initialize:function(a){this.type=a,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new l,this._tmpVec2B=new l},draw:function(n,a){return a===void 0&&(a=32),n.strokePoints(this.getPoints(a))},getBounds:function(n,a){n||(n=new d),a===void 0&&(a=16);var c=this.getLength();a>c&&(a=c/2);var o=Math.max(1,Math.round(c/a));return m(this.getSpacedPoints(o),n)},getDistancePoints:function(n){var a=this.getLength(),c=Math.max(1,a/n);return this.getSpacedPoints(c)},getEndPoint:function(n){return n===void 0&&(n=new l),this.getPointAt(1,n)},getLength:function(){var n=this.getLengths();return n[n.length-1]},getLengths:function(n){if(n===void 0&&(n=this.arcLengthDivisions),this.cacheArcLengths.length===n+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var a=[],c,o=this.getPoint(0,this._tmpVec2A),v=0;a.push(0);for(var g=1;g<=n;g++)c=this.getPoint(g/n,this._tmpVec2B),v+=c.distance(o),a.push(v),o.copy(c);return this.cacheArcLengths=a,a},getPointAt:function(n,a){var c=this.getUtoTmapping(n);return this.getPoint(c,a)},getPoints:function(n,a,c){c===void 0&&(c=[]),n||(a?n=this.getLength()/a:n=this.defaultDivisions);for(var o=0;o<=n;o++)c.push(this.getPoint(o/n));return c},getRandomPoint:function(n){return n===void 0&&(n=new l),this.getPoint(Math.random(),n)},getSpacedPoints:function(n,a,c){c===void 0&&(c=[]),n||(a?n=this.getLength()/a:n=this.defaultDivisions);for(var o=0;o<=n;o++){var v=this.getUtoTmapping(o/n,null,n);c.push(this.getPoint(v))}return c},getStartPoint:function(n){return n===void 0&&(n=new l),this.getPointAt(0,n)},getTangent:function(n,a){a===void 0&&(a=new l);var c=1e-4,o=n-c,v=n+c;return o<0&&(o=0),v>1&&(v=1),this.getPoint(o,this._tmpVec2A),this.getPoint(v,a),a.subtract(this._tmpVec2A).normalize()},getTangentAt:function(n,a){var c=this.getUtoTmapping(n);return this.getTangent(c,a)},getTFromDistance:function(n,a){return n<=0?0:this.getUtoTmapping(0,n,a)},getUtoTmapping:function(n,a,c){var o=this.getLengths(c),v=0,g=o.length,p;a?p=Math.min(a,o[g-1]):p=n*o[g-1];for(var x=0,T=g-1,E;x<=T;)if(v=Math.floor(x+(T-x)/2),E=o[v]-p,E<0)x=v+1;else if(E>0)T=v-1;else{T=v;break}if(v=T,o[v]===p)return v/(g-1);var M=o[v],P=o[v+1],w=P-M,R=(p-M)/w;return(v+R)/(g-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});r.exports=h}),48835:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(38517),d=e(75606),l=e(10850),h=e(23701),n=e(93736),a=new u({Extends:m,initialize:function(o,v,g,p,x,T,E,M){if(typeof o=="object"){var P=o;o=l(P,"x",0),v=l(P,"y",0),g=l(P,"xRadius",0),p=l(P,"yRadius",g),x=l(P,"startAngle",0),T=l(P,"endAngle",360),E=l(P,"clockwise",!1),M=l(P,"rotation",0)}else p===void 0&&(p=g),x===void 0&&(x=0),T===void 0&&(T=360),E===void 0&&(E=!1),M===void 0&&(M=0);m.call(this,"EllipseCurve"),this.p0=new n(o,v),this._xRadius=g,this._yRadius=p,this._startAngle=d(x),this._endAngle=d(T),this._clockwise=E,this._rotation=d(M)},getStartPoint:function(c){return c===void 0&&(c=new n),this.getPoint(0,c)},getResolution:function(c){return c*2},getPoint:function(c,o){o===void 0&&(o=new n);for(var v=Math.PI*2,g=this._endAngle-this._startAngle,p=Math.abs(g)<Number.EPSILON;g<0;)g+=v;for(;g>v;)g-=v;g<Number.EPSILON&&(p?g=0:g=v),this._clockwise&&!p&&(g===v?g=-v:g=g-v);var x=this._startAngle+c*g,T=this.p0.x+this._xRadius*Math.cos(x),E=this.p0.y+this._yRadius*Math.sin(x);if(this._rotation!==0){var M=Math.cos(this._rotation),P=Math.sin(this._rotation),w=T-this.p0.x,R=E-this.p0.y;T=w*M-R*P+this.p0.x,E=w*P+R*M+this.p0.y}return o.set(T,E)},setXRadius:function(c){return this.xRadius=c,this},setYRadius:function(c){return this.yRadius=c,this},setWidth:function(c){return this.xRadius=c/2,this},setHeight:function(c){return this.yRadius=c/2,this},setStartAngle:function(c){return this.startAngle=c,this},setEndAngle:function(c){return this.endAngle=c,this},setClockwise:function(c){return this.clockwise=c,this},setRotation:function(c){return this.rotation=c,this},x:{get:function(){return this.p0.x},set:function(c){this.p0.x=c}},y:{get:function(){return this.p0.y},set:function(c){this.p0.y=c}},xRadius:{get:function(){return this._xRadius},set:function(c){this._xRadius=c}},yRadius:{get:function(){return this._yRadius},set:function(c){this._yRadius=c}},startAngle:{get:function(){return h(this._startAngle)},set:function(c){this._startAngle=d(c)}},endAngle:{get:function(){return h(this._endAngle)},set:function(c){this._endAngle=d(c)}},clockwise:{get:function(){return this._clockwise},set:function(c){this._clockwise=c}},angle:{get:function(){return h(this._rotation)},set:function(c){this._rotation=d(c)}},rotation:{get:function(){return this._rotation},set:function(c){this._rotation=c}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:h(this._startAngle),endAngle:h(this._endAngle),clockwise:this._clockwise,rotation:h(this._rotation)}}});a.fromJSON=function(c){return new a(c)},r.exports=a}),58084:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(38517),d=e(80222),l=e(74118),h=e(93736),n=new u({Extends:m,initialize:function(c,o){m.call(this,"LineCurve"),Array.isArray(c)&&(o=new h(c[2],c[3]),c=new h(c[0],c[1])),this.p0=c,this.p1=o,this.arcLengthDivisions=1},getBounds:function(a){return a===void 0&&(a=new l),d([this.p0,this.p1],a)},getStartPoint:function(a){return a===void 0&&(a=new h),a.copy(this.p0)},getResolution:function(a){return a===void 0&&(a=1),a},getPoint:function(a,c){return c===void 0&&(c=new h),a===1?c.copy(this.p1):(c.copy(this.p1).subtract(this.p0).scale(a).add(this.p0),c)},getPointAt:function(a,c){return this.getPoint(a,c)},getTangent:function(a,c){return c===void 0&&(c=new h),c.copy(this.p1).subtract(this.p0).normalize(),c},getUtoTmapping:function(a,c,o){var v;if(c){var g=this.getLengths(o),p=g[g.length-1],x=Math.min(c,p);v=x/p}else v=a;return v},draw:function(a){return a.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),a},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});n.fromJSON=function(a){var c=a.points,o=new h(c[0],c[1]),v=new h(c[2],c[3]);return new n(o,v)},r.exports=n}),64761:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(38517),d=e(16252),l=e(93736),h=new u({Extends:m,initialize:function(a,c,o){m.call(this,"QuadraticBezierCurve"),Array.isArray(a)&&(o=new l(a[4],a[5]),c=new l(a[2],a[3]),a=new l(a[0],a[1])),this.p0=a,this.p1=c,this.p2=o},getStartPoint:function(n){return n===void 0&&(n=new l),n.copy(this.p0)},getResolution:function(n){return n},getPoint:function(n,a){a===void 0&&(a=new l);var c=this.p0,o=this.p1,v=this.p2;return a.set(d(n,c.x,o.x,v.x),d(n,c.y,o.y,v.y))},draw:function(n,a){a===void 0&&(a=32);var c=this.getPoints(a);n.beginPath(),n.moveTo(this.p0.x,this.p0.y);for(var o=1;o<c.length;o++)n.lineTo(c[o].x,c[o].y);return n.strokePath(),n},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});h.fromJSON=function(n){var a=n.points,c=new l(a[0],a[1]),o=new l(a[2],a[3]),v=new l(a[4],a[5]);return new h(c,o,v)},r.exports=h}),11956:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(14976),m=e(56694),d=e(38517),l=e(93736),h=new m({Extends:d,initialize:function(a){a===void 0&&(a=[]),d.call(this,"SplineCurve"),this.points=[],this.addPoints(a)},addPoints:function(n){for(var a=0;a<n.length;a++){var c=new l;typeof n[a]=="number"?(c.x=n[a],c.y=n[a+1],a++):Array.isArray(n[a])?(c.x=n[a][0],c.y=n[a][1]):(c.x=n[a].x,c.y=n[a].y),this.points.push(c)}return this},addPoint:function(n,a){var c=new l(n,a);return this.points.push(c),c},getStartPoint:function(n){return n===void 0&&(n=new l),n.copy(this.points[0])},getResolution:function(n){return n*this.points.length},getPoint:function(n,a){a===void 0&&(a=new l);var c=this.points,o=(c.length-1)*n,v=Math.floor(o),g=o-v,p=c[v===0?v:v-1],x=c[v],T=c[v>c.length-2?c.length-1:v+1],E=c[v>c.length-3?c.length-1:v+2];return a.set(u(g,p.x,x.x,T.x,E.x),u(g,p.y,x.y,T.y,E.y))},toJSON:function(){for(var n=[],a=0;a<this.points.length;a++)n.push(this.points[a].x),n.push(this.points[a].y);return{type:this.type,points:n}}});h.fromJSON=function(n){return new h(n.points)},r.exports=h}),73962:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Path:e(12822),MoveTo:e(53639),CubicBezier:e(63120),Curve:e(38517),Ellipse:e(48835),Line:e(58084),QuadraticBezier:e(64761),Spline:e(11956)}}),53639:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(93736),d=new u({initialize:function(h,n){this.active=!1,this.p0=new m(h,n)},getPoint:function(l,h){return h===void 0&&(h=new m),h.copy(this.p0)},getPointAt:function(l,h){return this.getPoint(l,h)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});r.exports=d}),12822:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(63120),d=e(48835),l=e(61286),h=e(58084),n=e(53639),a=e(64761),c=e(74118),o=e(11956),v=e(93736),g=e(83392),p=new u({initialize:function(T,E){T===void 0&&(T=0),E===void 0&&(E=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new v,this._tmpVec2A=new v,this._tmpVec2B=new v,typeof T=="object"?this.fromJSON(T):this.startPoint.set(T,E)},add:function(x){return this.curves.push(x),this},circleTo:function(x,T,E){return T===void 0&&(T=!1),this.ellipseTo(x,x,0,360,T,E)},closePath:function(){var x=this.curves[0].getPoint(0),T=this.curves[this.curves.length-1].getPoint(1);return x.equals(T)||this.curves.push(new h(T,x)),this},cubicBezierTo:function(x,T,E,M,P,w){var R=this.getEndPoint(),A,O,F;return x instanceof v?(A=x,O=T,F=E):(A=new v(E,M),O=new v(P,w),F=new v(x,T)),this.add(new m(R,A,O,F))},quadraticBezierTo:function(x,T,E,M){var P=this.getEndPoint(),w,R;return x instanceof v?(w=x,R=T):(w=new v(E,M),R=new v(x,T)),this.add(new a(P,w,R))},draw:function(x,T){for(var E=0;E<this.curves.length;E++){var M=this.curves[E];M.active&&M.draw(x,T)}return x},ellipseTo:function(x,T,E,M,P,w){var R=new d(0,0,x,T,E,M,P,w),A=this.getEndPoint(this._tmpVec2A),O=R.getStartPoint(this._tmpVec2B);return A.subtract(O),R.x=A.x,R.y=A.y,this.add(R)},fromJSON:function(x){this.curves=[],this.cacheLengths=[],this.startPoint.set(x.x,x.y),this.autoClose=x.autoClose;for(var T=0;T<x.curves.length;T++){var E=x.curves[T];switch(E.type){case"LineCurve":this.add(h.fromJSON(E));break;case"EllipseCurve":this.add(d.fromJSON(E));break;case"SplineCurve":this.add(o.fromJSON(E));break;case"CubicBezierCurve":this.add(m.fromJSON(E));break;case"QuadraticBezierCurve":this.add(a.fromJSON(E));break}}return this},getBounds:function(x,T){x===void 0&&(x=new c),T===void 0&&(T=16),x.x=Number.MAX_VALUE,x.y=Number.MAX_VALUE;for(var E=new c,M=g.MIN_SAFE_INTEGER,P=g.MIN_SAFE_INTEGER,w=0;w<this.curves.length;w++){var R=this.curves[w];R.active&&(R.getBounds(E,T),x.x=Math.min(x.x,E.x),x.y=Math.min(x.y,E.y),M=Math.max(M,E.right),P=Math.max(P,E.bottom))}return x.right=M,x.bottom=P,x},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var x=[],T=0,E=0;E<this.curves.length;E++)T+=this.curves[E].getLength(),x.push(T);return this.cacheLengths=x,x},getCurveAt:function(x){for(var T=x*this.getLength(),E=this.getCurveLengths(),M=0;M<E.length;){if(E[M]>=T)return this.curves[M];M++}return null},getEndPoint:function(x){return x===void 0&&(x=new v),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,x):x.copy(this.startPoint),x},getLength:function(){var x=this.getCurveLengths();return x[x.length-1]},getPoint:function(x,T){T===void 0&&(T=new v);for(var E=x*this.getLength(),M=this.getCurveLengths(),P=0;P<M.length;){if(M[P]>=E){var w=M[P]-E,R=this.curves[P],A=R.getLength(),O=A===0?0:1-w/A;return R.getPointAt(O,T)}P++}return null},getPoints:function(x){x===void 0&&(x=12);for(var T=[],E,M=0;M<this.curves.length;M++){var P=this.curves[M];if(P.active)for(var w=P.getResolution(x),R=P.getPoints(w),A=0;A<R.length;A++){var O=R[A];E&&E.equals(O)||(T.push(O),E=O)}}return this.autoClose&&T.length>1&&!T[T.length-1].equals(T[0])&&T.push(T[0]),T},getRandomPoint:function(x){return x===void 0&&(x=new v),this.getPoint(Math.random(),x)},getSpacedPoints:function(x){x===void 0&&(x=40);for(var T=[],E=0;E<=x;E++)T.push(this.getPoint(E/x));return this.autoClose&&T.push(T[0]),T},getStartPoint:function(x){return x===void 0&&(x=new v),x.copy(this.startPoint)},getTangent:function(x,T){T===void 0&&(T=new v);for(var E=x*this.getLength(),M=this.getCurveLengths(),P=0;P<M.length;){if(M[P]>=E){var w=M[P]-E,R=this.curves[P],A=R.getLength(),O=A===0?0:1-w/A;return R.getTangentAt(O,T)}P++}return null},lineTo:function(x,T){x instanceof v?this._tmpVec2B.copy(x):this._tmpVec2B.set(x,T);var E=this.getEndPoint(this._tmpVec2A);return this.add(new h([E.x,E.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(x){return x.unshift(this.getEndPoint()),this.add(new o(x))},moveTo:function(x,T){return x instanceof v?this.add(new n(x.x,x.y)):this.add(new n(x,T))},toJSON:function(){for(var x=[],T=0;T<this.curves.length;T++)x.push(this.curves[T].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:x}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});l.register("path",function(x,T){return new p(x,T)}),r.exports=p}),81078:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(35026),d=new u({initialize:function(h,n){this.parent=h,this.events=n,n||(this.events=h.events?h.events:h),this.list={},this.values={},this._frozen=!1,!h.hasOwnProperty("sys")&&this.events&&this.events.once(m.DESTROY,this.destroy,this)},get:function(l){var h=this.list;if(Array.isArray(l)){for(var n=[],a=0;a<l.length;a++)n.push(h[l[a]]);return n}else return h[l]},getAll:function(){var l={};for(var h in this.list)this.list.hasOwnProperty(h)&&(l[h]=this.list[h]);return l},query:function(l){var h={};for(var n in this.list)this.list.hasOwnProperty(n)&&n.match(l)&&(h[n]=this.list[n]);return h},set:function(l,h){if(this._frozen)return this;if(typeof l=="string")return this.setValue(l,h);for(var n in l)this.setValue(n,l[n]);return this},inc:function(l,h){if(this._frozen)return this;h===void 0&&(h=1);var n=this.get(l);return n===void 0&&(n=0),this.set(l,n+h),this},toggle:function(l){return this._frozen?this:(this.set(l,!this.get(l)),this)},setValue:function(l,h){if(this._frozen)return this;if(this.has(l))this.values[l]=h;else{var n=this,a=this.list,c=this.events,o=this.parent;Object.defineProperty(this.values,l,{enumerable:!0,configurable:!0,get:function(){return a[l]},set:function(v){if(!n._frozen){var g=a[l];a[l]=v,c.emit(m.CHANGE_DATA,o,l,v,g),c.emit(m.CHANGE_DATA_KEY+l,o,v,g)}}}),a[l]=h,c.emit(m.SET_DATA,o,l,h)}return this},each:function(l,h){for(var n=[this.parent,null,void 0],a=1;a<arguments.length;a++)n.push(arguments[a]);for(var c in this.list)n[1]=c,n[2]=this.list[c],l.apply(h,n);return this},merge:function(l,h){h===void 0&&(h=!0);for(var n in l)l.hasOwnProperty(n)&&(h||!h&&!this.has(n))&&this.setValue(n,l[n]);return this},remove:function(l){if(this._frozen)return this;if(Array.isArray(l))for(var h=0;h<l.length;h++)this.removeValue(l[h]);else return this.removeValue(l);return this},removeValue:function(l){if(this.has(l)){var h=this.list[l];delete this.list[l],delete this.values[l],this.events.emit(m.REMOVE_DATA,this.parent,l,h)}return this},pop:function(l){var h=void 0;return!this._frozen&&this.has(l)&&(h=this.list[l],delete this.list[l],delete this.values[l],this.events.emit(m.REMOVE_DATA,this.parent,l,h)),h},has:function(l){return this.list.hasOwnProperty(l)},setFreeze:function(l){return this._frozen=l,this},reset:function(){for(var l in this.list)delete this.list[l],delete this.values[l];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(m.CHANGE_DATA),this.events.off(m.SET_DATA),this.events.off(m.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(l){this._frozen=!!l}},count:{get:function(){var l=0;for(var h in this.list)this.list[h]!==void 0&&l++;return l}}});r.exports=d}),76508:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(81078),d=e(91963),l=e(7599),h=new u({Extends:m,initialize:function(a){m.call(this,a,a.sys.events),this.scene=a,this.systems=a.sys,a.sys.events.once(l.BOOT,this.boot,this),a.sys.events.on(l.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(l.DESTROY,this.destroy,this)},start:function(){this.events.once(l.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){m.prototype.destroy.call(this),this.events.off(l.START,this.start,this),this.scene=null,this.systems=null}});d.register("DataManagerPlugin",h,"data"),r.exports=h}),73569:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="changedata"}),15590:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="changedata-"}),37669:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="destroy"}),87090:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="removedata"}),90142:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="setdata"}),35026:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={CHANGE_DATA:e(73569),CHANGE_DATA_KEY:e(15590),DESTROY:e(37669),REMOVE_DATA:e(87090),SET_DATA:e(90142)}}),1999:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={DataManager:e(81078),DataManagerPlugin:e(76508),Events:e(35026)}}),10720:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(1350),m={flac:!1,aac:!1,audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function d(){if(typeof importScripts=="function")return m;m.audioData=!!window.Audio,m.webAudio=!!(window.AudioContext||window.webkitAudioContext);var l=document.createElement("audio"),h=!!l.canPlayType;try{if(h){var n=function(o,v){var g=l.canPlayType("audio/"+o).replace(/^no$/,"");return v?!!(g||l.canPlayType("audio/"+v).replace(/^no$/,"")):!!g};if(m.ogg=n('ogg; codecs="vorbis"'),m.opus=n('ogg; codecs="opus"',"opus"),m.mp3=n("mpeg"),m.wav=n("wav"),m.m4a=n("x-m4a"),m.aac=n("aac"),m.flac=n("flac","x-flac"),m.webm=n('webm; codecs="vorbis"'),l.canPlayType('audio/mp4; codecs="ec-3"')!==""){if(u.edge)m.dolby=!0;else if(u.safari&&u.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var a=parseInt(RegExp.$1,10),c=parseInt(RegExp.$2,10);(a===10&&c>=11||a>10)&&(m.dolby=!0)}}}}catch{}return m}r.exports=d()}),1350:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(36580),m={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0,es2019:!1};function d(){var l=navigator.userAgent;return/Edg\/\d+/.test(l)?(m.edge=!0,m.es2019=!0):/OPR/.test(l)?(m.opera=!0,m.es2019=!0):/Chrome\/(\d+)/.test(l)&&!u.windowsPhone?(m.chrome=!0,m.chromeVersion=parseInt(RegExp.$1,10),m.es2019=m.chromeVersion>69):/Firefox\D+(\d+)/.test(l)?(m.firefox=!0,m.firefoxVersion=parseInt(RegExp.$1,10),m.es2019=m.firefoxVersion>10):/AppleWebKit/.test(l)&&u.iOS?m.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(l)?(m.ie=!0,m.ieVersion=parseInt(RegExp.$1,10)):/Version\/(\d+\.\d+) Safari/.test(l)&&!u.windowsPhone?(m.safari=!0,m.safariVersion=parseInt(RegExp.$1,10),m.es2019=m.safariVersion>10):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(l)&&(m.ie=!0,m.trident=!0,m.tridentVersion=parseInt(RegExp.$1,10),m.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(l)&&(m.silk=!0),m}r.exports=d()}),98581:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61068),m={supportInverseAlpha:!1,supportNewBlendModes:!1};function d(){var n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",a="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",c=new Image;return c.onload=function(){var o=new Image;o.onload=function(){var v=u.create2D(o,6),g=v.getContext("2d",{willReadFrequently:!0});if(g.globalCompositeOperation="multiply",g.drawImage(c,0,0),g.drawImage(o,2,0),!g.getImageData(2,0,1,1))return!1;var p=g.getImageData(2,0,1,1).data;u.remove(o),m.supportNewBlendModes=p[0]===255&&p[1]===0&&p[2]===0},o.src=n+"/wCKxvRF"+a},c.src=n+"AP804Oa6"+a,!1}function l(){var n=u.create2D(this,2),a=n.getContext("2d",{willReadFrequently:!0});a.fillStyle="rgba(10, 20, 30, 0.5)",a.fillRect(0,0,1,1);var c=a.getImageData(0,0,1,1);if(c===null)return!1;a.putImageData(c,1,0);var o=a.getImageData(1,0,1,1),v=o.data[0]===c.data[0]&&o.data[1]===c.data[1]&&o.data[2]===c.data[2]&&o.data[3]===c.data[3];return u.remove(this),v}function h(){return typeof importScripts!="function"&&document!==void 0&&(m.supportNewBlendModes=d(),m.supportInverseAlpha=l()),m}r.exports=h()}),90185:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(36580),m=e(1350),d=e(61068),l={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,stableSort:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function h(){var a=new ArrayBuffer(4),c=new Uint8Array(a),o=new Uint32Array(a);return c[0]=161,c[1]=178,c[2]=195,c[3]=212,o[0]===3569595041?!0:o[0]===2712847316?!1:null}function n(){if(typeof importScripts=="function")return l;l.canvas=!!window.CanvasRenderingContext2D;try{l.localStorage=!!localStorage.getItem}catch{l.localStorage=!1}l.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,l.fileSystem=!!window.requestFileSystem;var a=!1,c=function(){if(window.WebGLRenderingContext)try{var o=d.createWebGL(this),v=o.getContext("webgl")||o.getContext("experimental-webgl"),g=d.create2D(this),p=g.getContext("2d",{willReadFrequently:!0}),x=p.createImageData(1,1);return a=x.data instanceof Uint8ClampedArray,d.remove(o),d.remove(g),!!v}catch{return!1}return!1};return l.webGL=c(),l.worker=!!window.Worker,l.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,l.getUserMedia=l.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,m.firefox&&m.firefoxVersion<21&&(l.getUserMedia=!1),!u.iOS&&(m.ie||m.firefox||m.chrome)&&(l.canvasBitBltShift=!0),(m.safari||m.mobileSafari)&&(l.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(l.vibration=!0),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint32Array<"u"&&(l.littleEndian=h()),l.support32bit=typeof ArrayBuffer<"u"&&typeof Uint8ClampedArray<"u"&&typeof Int32Array<"u"&&l.littleEndian!==null&&a,l}r.exports=n()}),33553:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={available:!1,cancel:"",keyboard:!1,request:""};function e(){if(typeof importScripts=="function")return y;var u,m="Fullscreen",d="FullScreen",l=["request"+m,"request"+d,"webkitRequest"+m,"webkitRequest"+d,"msRequest"+m,"msRequest"+d,"mozRequest"+d,"mozRequest"+m];for(u=0;u<l.length;u++)if(document.documentElement[l[u]]){y.available=!0,y.request=l[u];break}var h=["cancel"+d,"exit"+m,"webkitCancel"+d,"webkitExit"+m,"msCancel"+d,"msExit"+m,"mozCancel"+d,"mozExit"+m];if(y.available){for(u=0;u<h.length;u++)if(document[h[u]]){y.cancel=h[u];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(y.keyboard=!0),Object.defineProperty(y,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),y}r.exports=e()}),95872:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(1350),m={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function d(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(m.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(m.mspointer=!0),navigator.getGamepads&&(m.gamepads=!0),"onwheel"in window||u.ie&&"WheelEvent"in window?m.wheelEvent="wheel":"onmousewheel"in window?m.wheelEvent="mousewheel":u.firefox&&"MouseScrollEvent"in window&&(m.wheelEvent="DOMMouseScroll")),m}r.exports=d()}),36580:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function e(){if(typeof importScripts=="function")return y;var u=navigator.userAgent;/Windows/.test(u)?y.windows=!0:/Mac OS/.test(u)&&!/like Mac OS/.test(u)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(y.iOS=!0,y.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),y.iOSVersion=parseInt(RegExp.$1,10)):y.macOS=!0:/Android/.test(u)?y.android=!0:/Linux/.test(u)?y.linux=!0:/iP[ao]d|iPhone/i.test(u)?(y.iOS=!0,navigator.appVersion.match(/OS (\d+)/),y.iOSVersion=parseInt(RegExp.$1,10),y.iPhone=u.toLowerCase().indexOf("iphone")!==-1,y.iPad=u.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(u)||/\bKF[A-Z][A-Z]+/.test(u)||/Silk.*Mobile Safari/.test(u)?y.kindle=!0:/CrOS/.test(u)&&(y.chromeOS=!0),(/Windows Phone/i.test(u)||/IEMobile/i.test(u))&&(y.android=!1,y.iOS=!1,y.macOS=!1,y.windows=!0,y.windowsPhone=!0);var m=/Silk/.test(u);return(y.windows||y.macOS||y.linux&&!m||y.chromeOS)&&(y.desktop=!0),(y.windowsPhone||/Windows NT/i.test(u)&&/Touch/i.test(u))&&(y.desktop=!1),navigator.standalone&&(y.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(y.cordova=!0),window.ejecta!==void 0&&(y.ejecta=!0)),typeof process<"u"&&process.versions&&process.versions.node&&(y.node=!0),y.node&&typeof process.versions=="object"&&(y.nodeWebkit=!!process.versions["node-webkit"],y.electron=!!process.versions.electron),/Crosswalk/.test(u)&&(y.crosswalk=!0),y.pixelRatio=window.devicePixelRatio||1,y}r.exports=e()}),53861:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72632),m={h264:!1,hls:!1,mp4:!1,m4v:!1,ogg:!1,vp9:!1,webm:!1,hasRequestVideoFrame:!1};function d(){if(typeof importScripts=="function")return m;var l=document.createElement("video"),h=!!l.canPlayType,n=/^no$/;try{h&&(l.canPlayType('video/ogg; codecs="theora"').replace(n,"")&&(m.ogg=!0),l.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(n,"")&&(m.h264=!0,m.mp4=!0),l.canPlayType("video/x-m4v").replace(n,"")&&(m.m4v=!0),l.canPlayType('video/webm; codecs="vp8, vorbis"').replace(n,"")&&(m.webm=!0),l.canPlayType('video/webm; codecs="vp9"').replace(n,"")&&(m.vp9=!0),l.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(n,"")&&(m.hls=!0))}catch{}return l.parentNode&&l.parentNode.removeChild(l),m.getVideoURL=function(a){Array.isArray(a)||(a=[a]);for(var c=0;c<a.length;c++){var o=u(a[c],"url",a[c]);if(o.indexOf("blob:")===0)return{url:o,type:""};var v;if(o.indexOf("data:")===0?v=o.split(",")[0].match(/\/(.*?);/):v=o.match(/\.([a-zA-Z0-9]+)($|\?)/),v=u(a[c],"type",v?v[1]:"").toLowerCase(),m[v])return{url:o,type:v}}return null},m}r.exports=d()}),77290:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={os:e(36580),browser:e(1350),features:e(90185),input:e(95872),audio:e(10720),video:e(53861),fullscreen:e(33553),canvasFeatures:e(98581)}}),65246:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=new Float32Array(20),d=new u({initialize:function(){this._matrix=new Float32Array(20),this.alpha=1,this._dirty=!0,this._data=new Float32Array(20),this.reset()},set:function(l){return this._matrix.set(l),this._dirty=!0,this},reset:function(){var l=this._matrix;return l.fill(0),l[0]=1,l[6]=1,l[12]=1,l[18]=1,this.alpha=1,this._dirty=!0,this},getData:function(){var l=this._data;return this._dirty&&(l.set(this._matrix),l[4]/=255,l[9]/=255,l[14]/=255,l[19]/=255,this._dirty=!1),l},brightness:function(l,h){l===void 0&&(l=0),h===void 0&&(h=!1);var n=l;return this.multiply([n,0,0,0,0,0,n,0,0,0,0,0,n,0,0,0,0,0,1,0],h)},saturate:function(l,h){l===void 0&&(l=0),h===void 0&&(h=!1);var n=l*2/3+1,a=(n-1)*-.5;return this.multiply([n,a,a,0,0,a,n,a,0,0,a,a,n,0,0,0,0,0,1,0],h)},desaturate:function(l){return l===void 0&&(l=!1),this.saturate(-1,l)},hue:function(l,h){l===void 0&&(l=0),h===void 0&&(h=!1),l=l/180*Math.PI;var n=Math.cos(l),a=Math.sin(l),c=.213,o=.715,v=.072;return this.multiply([c+n*(1-c)+a*-c,o+n*-o+a*-o,v+n*-v+a*(1-v),0,0,c+n*-c+a*.143,o+n*(1-o)+a*.14,v+n*-v+a*-.283,0,0,c+n*-c+a*-.787,o+n*-o+a*o,v+n*(1-v)+a*v,0,0,0,0,0,1,0],h)},grayscale:function(l,h){return l===void 0&&(l=1),h===void 0&&(h=!1),this.saturate(-l,h)},blackWhite:function(l){return l===void 0&&(l=!1),this.multiply(d.BLACK_WHITE,l)},contrast:function(l,h){l===void 0&&(l=0),h===void 0&&(h=!1);var n=l+1,a=-.5*(n-1);return this.multiply([n,0,0,0,a,0,n,0,0,a,0,0,n,0,a,0,0,0,1,0],h)},negative:function(l){return l===void 0&&(l=!1),this.multiply(d.NEGATIVE,l)},desaturateLuminance:function(l){return l===void 0&&(l=!1),this.multiply(d.DESATURATE_LUMINANCE,l)},sepia:function(l){return l===void 0&&(l=!1),this.multiply(d.SEPIA,l)},night:function(l,h){return l===void 0&&(l=.1),h===void 0&&(h=!1),this.multiply([l*-2,-l,0,0,0,-l,0,l,0,0,0,l,l*2,0,0,0,0,0,1,0],h)},lsd:function(l){return l===void 0&&(l=!1),this.multiply(d.LSD,l)},brown:function(l){return l===void 0&&(l=!1),this.multiply(d.BROWN,l)},vintagePinhole:function(l){return l===void 0&&(l=!1),this.multiply(d.VINTAGE,l)},kodachrome:function(l){return l===void 0&&(l=!1),this.multiply(d.KODACHROME,l)},technicolor:function(l){return l===void 0&&(l=!1),this.multiply(d.TECHNICOLOR,l)},polaroid:function(l){return l===void 0&&(l=!1),this.multiply(d.POLAROID,l)},shiftToBGR:function(l){return l===void 0&&(l=!1),this.multiply(d.SHIFT_BGR,l)},multiply:function(l,h){h===void 0&&(h=!1),h||this.reset();var n=this._matrix,a=m;return a.set(n),n.set([a[0]*l[0]+a[1]*l[5]+a[2]*l[10]+a[3]*l[15],a[0]*l[1]+a[1]*l[6]+a[2]*l[11]+a[3]*l[16],a[0]*l[2]+a[1]*l[7]+a[2]*l[12]+a[3]*l[17],a[0]*l[3]+a[1]*l[8]+a[2]*l[13]+a[3]*l[18],a[0]*l[4]+a[1]*l[9]+a[2]*l[14]+a[3]*l[19]+a[4],a[5]*l[0]+a[6]*l[5]+a[7]*l[10]+a[8]*l[15],a[5]*l[1]+a[6]*l[6]+a[7]*l[11]+a[8]*l[16],a[5]*l[2]+a[6]*l[7]+a[7]*l[12]+a[8]*l[17],a[5]*l[3]+a[6]*l[8]+a[7]*l[13]+a[8]*l[18],a[5]*l[4]+a[6]*l[9]+a[7]*l[14]+a[8]*l[19]+a[9],a[10]*l[0]+a[11]*l[5]+a[12]*l[10]+a[13]*l[15],a[10]*l[1]+a[11]*l[6]+a[12]*l[11]+a[13]*l[16],a[10]*l[2]+a[11]*l[7]+a[12]*l[12]+a[13]*l[17],a[10]*l[3]+a[11]*l[8]+a[12]*l[13]+a[13]*l[18],a[10]*l[4]+a[11]*l[9]+a[12]*l[14]+a[13]*l[19]+a[14],a[15]*l[0]+a[16]*l[5]+a[17]*l[10]+a[18]*l[15],a[15]*l[1]+a[16]*l[6]+a[17]*l[11]+a[18]*l[16],a[15]*l[2]+a[16]*l[7]+a[17]*l[12]+a[18]*l[17],a[15]*l[3]+a[16]*l[8]+a[17]*l[13]+a[18]*l[18],a[15]*l[4]+a[16]*l[9]+a[17]*l[14]+a[18]*l[19]+a[19]]),this._dirty=!0,this}});d.BLACK_WHITE=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],d.NEGATIVE=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],d.DESATURATE_LUMINANCE=[.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],d.SEPIA=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],d.LSD=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],d.BROWN=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],d.VINTAGE=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],d.KODACHROME=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],d.TECHNICOLOR=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],d.POLAROID=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],d.SHIFT_BGR=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],r.exports=d}),39298:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(72283),d=new u({initialize:function(h,n,a){this._rgb=[0,0,0],this.onChangeCallback=m,this.dirty=!1,this.set(h,n,a)},set:function(l,h,n){return l===void 0&&(l=0),h===void 0&&(h=0),n===void 0&&(n=0),this._rgb=[l,h,n],this.onChange(),this},equals:function(l,h,n){var a=this._rgb;return a[0]===l&&a[1]===h&&a[2]===n},onChange:function(){this.dirty=!0;var l=this._rgb;this.onChangeCallback.call(this,l[0],l[1],l[2])},r:{get:function(){return this._rgb[0]},set:function(l){this._rgb[0]=l,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(l){this._rgb[1]=l,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(l){this._rgb[2]=l,this.onChange()}},destroy:function(){this.onChangeCallback=null}});r.exports=d}),84093:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};r.exports=y}),32058:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(97328),m=e(59994),d=e(73174),l=e(28417),h=function(n,a,c,o){return c===void 0&&(c=0),o===void 0&&(o=0),l(n,m(a)+c),d(n,u(a)+o),n};r.exports=h}),85535:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(97328),m=e(40163),d=e(73174),l=e(74465),h=function(n,a,c,o){return c===void 0&&(c=0),o===void 0&&(o=0),l(n,m(a)-c),d(n,u(a)+o),n};r.exports=h}),9605:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(97328),m=e(70271),d=e(73174),l=e(19298),h=function(n,a,c,o){return c===void 0&&(c=0),o===void 0&&(o=0),l(n,m(a)+c),d(n,u(a)+o),n};r.exports=h}),22529:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(21843),m=e(59994),d=e(29568),l=function(h,n,a,c){return a===void 0&&(a=0),c===void 0&&(c=0),u(h,m(n)+a,d(n)+c),h};r.exports=l}),5739:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(29568),m=e(40163),d=e(81711),l=e(74465),h=function(n,a,c,o){return c===void 0&&(c=0),o===void 0&&(o=0),l(n,m(a)-c),d(n,u(a)+o),n};r.exports=h}),40327:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(84093),m=[];m[u.BOTTOM_CENTER]=e(32058),m[u.BOTTOM_LEFT]=e(85535),m[u.BOTTOM_RIGHT]=e(9605),m[u.CENTER]=e(22529),m[u.LEFT_CENTER]=e(5739),m[u.RIGHT_CENTER]=e(27683),m[u.TOP_CENTER]=e(96439),m[u.TOP_LEFT]=e(81447),m[u.TOP_RIGHT]=e(47888),m[u.LEFT_BOTTOM]=m[u.BOTTOM_LEFT],m[u.LEFT_TOP]=m[u.TOP_LEFT],m[u.RIGHT_BOTTOM]=m[u.BOTTOM_RIGHT],m[u.RIGHT_TOP]=m[u.TOP_RIGHT];var d=function(l,h,n,a,c){return m[n](l,h,a,c)};r.exports=d}),27683:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(29568),m=e(70271),d=e(81711),l=e(19298),h=function(n,a,c,o){return c===void 0&&(c=0),o===void 0&&(o=0),l(n,m(a)+c),d(n,u(a)+o),n};r.exports=h}),96439:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(59994),m=e(47196),d=e(28417),l=e(84349),h=function(n,a,c,o){return c===void 0&&(c=0),o===void 0&&(o=0),d(n,u(a)+c),l(n,m(a)-o),n};r.exports=h}),81447:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(40163),m=e(47196),d=e(74465),l=e(84349),h=function(n,a,c,o){return c===void 0&&(c=0),o===void 0&&(o=0),d(n,u(a)-c),l(n,m(a)-o),n};r.exports=h}),47888:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(70271),m=e(47196),d=e(19298),l=e(84349),h=function(n,a,c,o){return c===void 0&&(c=0),o===void 0&&(o=0),d(n,u(a)+c),l(n,m(a)-o),n};r.exports=h}),46997:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={BottomCenter:e(32058),BottomLeft:e(85535),BottomRight:e(9605),Center:e(22529),LeftCenter:e(5739),QuickSet:e(40327),RightCenter:e(27683),TopCenter:e(96439),TopLeft:e(81447),TopRight:e(47888)}}),93545:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(84093),m=e(98611),d={In:e(46997),To:e(86639)};d=m(!1,d,u),r.exports=d}),27118:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(97328),m=e(59994),d=e(28417),l=e(84349),h=function(n,a,c,o){return c===void 0&&(c=0),o===void 0&&(o=0),d(n,m(a)+c),l(n,u(a)+o),n};r.exports=h}),84469:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(97328),m=e(40163),d=e(74465),l=e(84349),h=function(n,a,c,o){return c===void 0&&(c=0),o===void 0&&(o=0),d(n,m(a)-c),l(n,u(a)+o),n};r.exports=h}),51577:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(97328),m=e(70271),d=e(19298),l=e(84349),h=function(n,a,c,o){return c===void 0&&(c=0),o===void 0&&(o=0),d(n,m(a)+c),l(n,u(a)+o),n};r.exports=h}),90271:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(97328),m=e(40163),d=e(73174),l=e(19298),h=function(n,a,c,o){return c===void 0&&(c=0),o===void 0&&(o=0),l(n,m(a)-c),d(n,u(a)+o),n};r.exports=h}),30466:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(29568),m=e(40163),d=e(81711),l=e(19298),h=function(n,a,c,o){return c===void 0&&(c=0),o===void 0&&(o=0),l(n,m(a)-c),d(n,u(a)+o),n};r.exports=h}),50087:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(40163),m=e(47196),d=e(19298),l=e(84349),h=function(n,a,c,o){return c===void 0&&(c=0),o===void 0&&(o=0),d(n,u(a)-c),l(n,m(a)-o),n};r.exports=h}),82590:((r,y,e)=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(84093),m=[];m[u.BOTTOM_CENTER]=e(27118),m[u.BOTTOM_LEFT]=e(84469),m[u.BOTTOM_RIGHT]=e(51577),m[u.LEFT_BOTTOM]=e(90271),m[u.LEFT_CENTER]=e(30466),m[u.LEFT_TOP]=e(50087),m[u.RIGHT_BOTTOM]=e(13555),m[u.RIGHT_CENTER]=e(99049),m[u.RIGHT_TOP]=e(67788),m[u.TOP_CENTER]=e(78170),m[u.TOP_LEFT]=e(54145),m[u.TOP_RIGHT]=e(75548);var d=function(l,h,n,a,c){return m[n](l,h,a,c)};r.exports=d}),13555:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(97328),m=e(70271),d=e(73174),l=e(74465),h=function(n,a,c,o){return c===void 0&&(c=0),o===void 0&&(o=0),l(n,m(a)+c),d(n,u(a)+o),n};r.exports=h}),99049:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(29568),m=e(70271),d=e(81711),l=e(74465),h=function(n,a,c,o){return c===void 0&&(c=0),o===void 0&&(o=0),l(n,m(a)+c),d(n,u(a)+o),n};r.exports=h}),67788:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(70271),m=e(47196),d=e(74465),l=e(84349),h=function(n,a,c,o){return c===void 0&&(c=0),o===void 0&&(o=0),d(n,u(a)+c),l(n,m(a)-o),n};r.exports=h}),78170:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(59994),m=e(47196),d=e(73174),l=e(28417),h=function(n,a,c,o){return c===void 0&&(c=0),o===void 0&&(o=0),l(n,u(a)+c),d(n,m(a)-o),n};r.exports=h}),54145:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(40163),m=e(47196),d=e(73174),l=e(74465),h=function(n,a,c,o){return c===void 0&&(c=0),o===void 0&&(o=0),l(n,u(a)-c),d(n,m(a)-o),n};r.exports=h}),75548:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(70271),m=e(47196),d=e(73174),l=e(19298),h=function(n,a,c,o){return c===void 0&&(c=0),o===void 0&&(o=0),l(n,u(a)+c),d(n,m(a)-o),n};r.exports=h}),86639:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={BottomCenter:e(27118),BottomLeft:e(84469),BottomRight:e(51577),LeftBottom:e(90271),LeftCenter:e(30466),LeftTop:e(50087),QuickSet:e(82590),RightBottom:e(13555),RightCenter:e(99049),RightTop:e(67788),TopCenter:e(78170),TopLeft:e(54145),TopRight:e(75548)}}),21843:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(28417),m=e(81711),d=function(l,h,n){return u(l,h),m(l,n)};r.exports=d}),97328:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return e.y+e.height-e.height*e.originY};r.exports=y}),7126:((r,y,e)=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(97328),m=e(40163),d=e(70271),l=e(47196),h=e(74118),n=function(a,c){c===void 0&&(c=new h);var o=m(a),v=l(a);return c.x=o,c.y=v,c.width=d(a)-o,c.height=u(a)-v,c};r.exports=n}),59994:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return e.x-e.width*e.originX+e.width*.5};r.exports=y}),29568:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return e.y-e.height*e.originY+e.height*.5};r.exports=y}),40163:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return e.x-e.width*e.originX};r.exports=y}),52088:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return e.width*e.originX};r.exports=y}),23379:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return e.height*e.originY};r.exports=y}),70271:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return e.x+e.width-e.width*e.originX};r.exports=y}),47196:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return e.y-e.height*e.originY};r.exports=y}),73174:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return e.y=u-e.height+e.height*e.originY,e};r.exports=y}),28417:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){var m=e.width*e.originX;return e.x=u+m-e.width*.5,e};r.exports=y}),81711:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){var m=e.height*e.originY;return e.y=u+m-e.height*.5,e};r.exports=y}),74465:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return e.x=u+e.width*e.originX,e};r.exports=y}),19298:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return e.x=u-e.width+e.width*e.originX,e};r.exports=y}),84349:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return e.y=u+e.height*e.originY,e};r.exports=y}),15252:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={CenterOn:e(21843),GetBottom:e(97328),GetBounds:e(7126),GetCenterX:e(59994),GetCenterY:e(29568),GetLeft:e(40163),GetOffsetX:e(52088),GetOffsetY:e(23379),GetRight:e(70271),GetTop:e(47196),SetBottom:e(73174),SetCenterX:e(28417),SetCenterY:e(81711),SetLeft:e(74465),SetRight:e(19298),SetTop:e(84349)}}),70616:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={setCrisp:function(e){var u=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return u.forEach(function(m){e.style["image-rendering"]=m}),e.style.msInterpolationMode="nearest-neighbor",e},setBicubic:function(e){return e.style["image-rendering"]="auto",e.style.msInterpolationMode="bicubic",e}};r.exports=y}),61068:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(86459),m=e(8213),d=[],l=!1,h=function(){var n=function(E,M,P,w,R){M===void 0&&(M=1),P===void 0&&(P=1),w===void 0&&(w=u.CANVAS),R===void 0&&(R=!1);var A,O=o(w);return O===null?(O={parent:E,canvas:document.createElement("canvas"),type:w},w===u.CANVAS&&d.push(O),A=O.canvas):(O.parent=E,A=O.canvas),R&&(O.parent=A),A.width=M,A.height=P,l&&w===u.CANVAS&&m.disable(A.getContext("2d",{willReadFrequently:!1})),A},a=function(E,M,P){return n(E,M,P,u.CANVAS)},c=function(E,M,P){return n(E,M,P,u.WEBGL)},o=function(E){if(E===void 0&&(E=u.CANVAS),E===u.WEBGL)return null;for(var M=0;M<d.length;M++){var P=d[M];if(!P.parent&&P.type===E)return P}return null},v=function(E){var M=E instanceof HTMLCanvasElement;d.forEach(function(P){(M&&P.canvas===E||!M&&P.parent===E)&&(P.parent=null,P.canvas.width=1,P.canvas.height=1)})},g=function(){var E=0;return d.forEach(function(M){M.parent&&E++}),E},p=function(){return d.length-g()},x=function(){l=!0},T=function(){l=!1};return{create2D:a,create:n,createWebGL:c,disableSmoothing:x,enableSmoothing:T,first:o,free:p,pool:d,remove:v,total:g}};r.exports=h()}),8213:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y="",e=function(){var u=function(h){for(var n=["i","webkitI","msI","mozI","oI"],a=0;a<n.length;a++){var c=n[a]+"mageSmoothingEnabled";if(c in h)return c}return null},m=function(h){return y===""&&(y=u(h)),y&&(h[y]=!0),h},d=function(h){return y===""&&(y=u(h)),y&&(h[y]=!1),h},l=function(h){return y!==null?h[y]:null};return{disable:d,enable:m,getPrefix:u,isEnabled:l}};r.exports=e()}),59271:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return u===void 0&&(u="none"),e.style.msTouchAction=u,e.style["ms-touch-action"]=u,e.style["touch-action"]=u,e};r.exports=y}),36505:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){u===void 0&&(u="none");var m=["-webkit-","-khtml-","-moz-","-ms-",""];return m.forEach(function(d){e.style[d+"user-select"]=u}),e.style["-webkit-touch-callout"]=u,e.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",e};r.exports=y}),23514:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={CanvasInterpolation:e(70616),CanvasPool:e(61068),Smoothing:e(8213),TouchAction:e(59271),UserSelect:e(36505)}}),27119:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(22946),d=e(5657),l=e(24650),h=e(68033),n=new u({initialize:function(c,o,v,g){c===void 0&&(c=0),o===void 0&&(o=0),v===void 0&&(v=0),g===void 0&&(g=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(c,o,v,g)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(a,c,o,v,g){return v===void 0&&(v=255),g===void 0&&(g=!0),this._locked=!0,this.red=a,this.green=c,this.blue=o,this.alpha=v,this._locked=!1,this.update(g)},setGLTo:function(a,c,o,v){return v===void 0&&(v=1),this._locked=!0,this.redGL=a,this.greenGL=c,this.blueGL=o,this.alphaGL=v,this._locked=!1,this.update(!0)},setFromRGB:function(a){return this._locked=!0,this.red=a.r,this.green=a.g,this.blue=a.b,a.hasOwnProperty("a")&&(this.alpha=a.a),this._locked=!1,this.update(!0)},setFromHSV:function(a,c,o){return l(a,c,o,this)},update:function(a){if(a===void 0&&(a=!1),this._locked)return this;var c=this.r,o=this.g,v=this.b,g=this.a;return this._color=m(c,o,v),this._color32=d(c,o,v,g),this._rgba="rgba("+c+","+o+","+v+","+g/255+")",a&&h(c,o,v,this),this},updateHSV:function(){var a=this.r,c=this.g,o=this.b;return h(a,c,o,this),this},clone:function(){return new n(this.r,this.g,this.b,this.a)},gray:function(a){return this.setTo(a,a,a)},random:function(a,c){a===void 0&&(a=0),c===void 0&&(c=255);var o=Math.floor(a+Math.random()*(c-a)),v=Math.floor(a+Math.random()*(c-a)),g=Math.floor(a+Math.random()*(c-a));return this.setTo(o,v,g)},randomGray:function(a,c){a===void 0&&(a=0),c===void 0&&(c=255);var o=Math.floor(a+Math.random()*(c-a));return this.setTo(o,o,o)},saturate:function(a){return this.s+=a/100,this},desaturate:function(a){return this.s-=a/100,this},lighten:function(a){return this.v+=a/100,this},darken:function(a){return this.v-=a/100,this},brighten:function(a){var c=this.r,o=this.g,v=this.b;return c=Math.max(0,Math.min(255,c-Math.round(255*-(a/100)))),o=Math.max(0,Math.min(255,o-Math.round(255*-(a/100)))),v=Math.max(0,Math.min(255,v-Math.round(255*-(a/100)))),this.setTo(c,o,v)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(a){this.gl[0]=Math.min(Math.abs(a),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(a){this.gl[1]=Math.min(Math.abs(a),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(a){this.gl[2]=Math.min(Math.abs(a),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(a){this.gl[3]=Math.min(Math.abs(a),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(a){a=Math.floor(Math.abs(a)),this.r=Math.min(a,255),this.gl[0]=a/255,this.update(!0)}},green:{get:function(){return this.g},set:function(a){a=Math.floor(Math.abs(a)),this.g=Math.min(a,255),this.gl[1]=a/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(a){a=Math.floor(Math.abs(a)),this.b=Math.min(a,255),this.gl[2]=a/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(a){a=Math.floor(Math.abs(a)),this.a=Math.min(a,255),this.gl[3]=a/255,this.update()}},h:{get:function(){return this._h},set:function(a){this._h=a,l(a,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(a){this._s=a,l(this._h,a,this._v,this)}},v:{get:function(){return this._v},set:function(a){this._v=a,l(this._h,this._s,a,this)}}});r.exports=n}),30245:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(22946),m=function(d){d===void 0&&(d=1024);var l=[],h=255,n,a=255,c=0,o=0;for(n=0;n<=h;n++)l.push({r:a,g:n,b:o,color:u(a,n,o)});for(c=255,n=h;n>=0;n--)l.push({r:n,g:c,b:o,color:u(n,c,o)});for(a=0,n=0;n<=h;n++,c--)l.push({r:a,g:c,b:n,color:u(a,c,n)});for(c=0,o=255,n=0;n<=h;n++,o--,a++)l.push({r:a,g:c,b:o,color:u(a,c,o)});if(d===1024)return l;var v=[],g=0,p=1024/d;for(n=0;n<d;n++)v.push(l[Math.floor(g)]),g+=p;return v};r.exports=m}),86672:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){var u={r:e>>16&255,g:e>>8&255,b:e&255,a:255};return e>16777215&&(u.a=e>>>24),u};r.exports=y}),25409:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){var u=e.toString(16);return u.length===1?"0"+u:u};r.exports=y}),22946:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){return e<<16|u<<8|m};r.exports=y}),5657:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d){return d<<24|e<<16|u<<8|m};r.exports=y}),74777:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(27119),m=e(59998),d=function(l,h,n){var a=n,c=n,o=n;if(h!==0){var v=n<.5?n*(1+h):n+h-n*h,g=2*n-v;a=m(g,v,l+1/3),c=m(g,v,l),o=m(g,v,l-1/3)}var p=new u;return p.setGLTo(a,c,o,1)};r.exports=d}),89263:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(24650),m=function(d,l){d===void 0&&(d=1),l===void 0&&(l=1);for(var h=[],n=0;n<=359;n++)h.push(u(n/359,d,l));return h};r.exports=m}),24650:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(22946);function m(l,h,n,a){var c=(l+h*6)%6,o=Math.min(c,4-c,1);return Math.round(255*(a-a*n*Math.max(0,o)))}var d=function(l,h,n,a){h===void 0&&(h=1),n===void 0&&(n=1);var c=m(5,l,h,n),o=m(3,l,h,n),v=m(1,l,h,n);return a?a.setTo?a.setTo(c,o,v,a.alpha,!0):(a.r=c,a.g=o,a.b=v,a.color=u(c,o,v),a):{r:c,g:o,b:v,color:u(c,o,v)}};r.exports=d}),91487:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(27119),m=function(d){var l=new u;d=d.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(o,v,g,p){return v+v+g+g+p+p});var h=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(d);if(h){var n=parseInt(h[1],16),a=parseInt(h[2],16),c=parseInt(h[3],16);l.setTo(n,a,c)}return l};r.exports=m}),59998:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){return m<0&&(m+=1),m>1&&(m-=1),m<.16666666666666666?e+(u-e)*6*m:m<.5?u:m<.6666666666666666?e+(u-e)*(.6666666666666666-m)*6:e};r.exports=y}),74853:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(27119),m=e(15978),d=function(l){var h=m(l);return new u(h.r,h.g,h.b,h.a)};r.exports=d}),15978:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return e>16777215?{a:e>>>24,r:e>>16&255,g:e>>8&255,b:e&255}:{a:255,r:e>>16&255,g:e>>8&255,b:e&255}};r.exports=y}),53756:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(42798),m=function(h,n,a,c,o,v,g,p){g===void 0&&(g=100),p===void 0&&(p=0);var x=p/g;return{r:u(h,c,x),g:u(n,o,x),b:u(a,v,x)}},d=function(h,n,a,c){return a===void 0&&(a=100),c===void 0&&(c=0),m(h.r,h.g,h.b,n.r,n.g,n.b,a,c)},l=function(h,n,a,c,o,v){return o===void 0&&(o=100),v===void 0&&(v=0),m(h.r,h.g,h.b,n,a,c,o,v)};r.exports={RGBWithRGB:m,ColorWithRGB:l,ColorWithColor:d}}),73904:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(27119),m=function(d){return new u(d.r,d.g,d.b,d.a)};r.exports=m}),26841:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(27119),m=function(d){var l=new u,h=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(d.toLowerCase());if(h){var n=parseInt(h[1],10),a=parseInt(h[2],10),c=parseInt(h[3],10),o=h[4]!==void 0?parseFloat(h[4]):1;l.setTo(n,a,c,o*255)}return l};r.exports=m}),68033:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d){d===void 0&&(d={h:0,s:0,v:0}),e/=255,u/=255,m/=255;var l=Math.min(e,u,m),h=Math.max(e,u,m),n=h-l,a=0,c=h===0?0:n/h,o=h;return h!==l&&(h===e?a=(u-m)/n+(u<m?6:0):h===u?a=(m-e)/n+2:h===m&&(a=(e-u)/n+4),a/=6),d.hasOwnProperty("_h")?(d._h=a,d._s=c,d._v=o):(d.h=a,d.s=c,d.v=o),d};r.exports=y}),4880:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(25409),m=function(d,l,h,n,a){return n===void 0&&(n=255),a===void 0&&(a="#"),a==="#"?"#"+((1<<24)+(d<<16)+(l<<8)+h).toString(16).slice(1,7):"0x"+u(n)+u(d)+u(l)+u(h)};r.exports=m}),37243:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(17489),m=e(27119),d=function(l,h){return l===void 0&&(l=0),h===void 0&&(h=255),new m(u(l,h),u(l,h),u(l,h))};r.exports=d}),93222:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(91487),m=e(74853),d=e(73904),l=e(26841),h=function(n){var a=typeof n;switch(a){case"string":return n.substr(0,3).toLowerCase()==="rgb"?l(n):u(n);case"number":return m(n);case"object":return d(n)}};r.exports=h}),95509:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(27119);u.ColorSpectrum=e(30245),u.ColorToRGBA=e(86672),u.ComponentToHex=e(25409),u.GetColor=e(22946),u.GetColor32=e(5657),u.HexStringToColor=e(91487),u.HSLToColor=e(74777),u.HSVColorWheel=e(89263),u.HSVToRGB=e(24650),u.HueToComponent=e(59998),u.IntegerToColor=e(74853),u.IntegerToRGB=e(15978),u.Interpolate=e(53756),u.ObjectToColor=e(73904),u.RandomRGB=e(37243),u.RGBStringToColor=e(26841),u.RGBToHSV=e(68033),u.RGBToString=e(4880),u.ValueToColor=e(93222),r.exports=u}),24816:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Align:e(93545),BaseShader:e(31053),Bounds:e(15252),Canvas:e(23514),Color:e(95509),ColorMatrix:e(65246),Masks:e(93310),RGB:e(39298)}}),76756:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(61286),d=new u({initialize:function(h,n,a,c,o,v){n||(n=h.sys.make.image({x:a,y:c,key:o,frame:v,add:!1})),this.bitmapMask=n,this.invertAlpha=!1,this.isStencil=!1},setBitmap:function(l){this.bitmapMask=l},preRenderWebGL:function(l,h,n){l.pipelines.BITMAPMASK_PIPELINE.beginMask(this,h,n)},postRenderWebGL:function(l,h,n){l.pipelines.BITMAPMASK_PIPELINE.endMask(this,h,n)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.bitmapMask=null}});m.register("bitmapMask",function(l,h,n,a,c){return new d(this.scene,l,h,n,a,c)}),r.exports=d}),63037:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=new u({initialize:function(l,h){this.geometryMask=h,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(d){return this.geometryMask=d,this},setInvertAlpha:function(d){return d===void 0&&(d=!0),this.invertAlpha=d,this},preRenderWebGL:function(d,l,h){var n=d.gl;d.flush(),d.maskStack.length===0&&(n.enable(n.STENCIL_TEST),n.clear(n.STENCIL_BUFFER_BIT),d.maskCount=0),d.currentCameraMask.mask!==this&&(d.currentMask.mask=this),d.maskStack.push({mask:this,camera:h}),this.applyStencil(d,h,!0),d.maskCount++},applyStencil:function(d,l,h){var n=d.gl,a=this.geometryMask,c=d.maskCount,o=255;n.colorMask(!1,!1,!1,!1),h?(n.stencilFunc(n.EQUAL,c,o),n.stencilOp(n.KEEP,n.KEEP,n.INCR),c++):(n.stencilFunc(n.EQUAL,c+1,o),n.stencilOp(n.KEEP,n.KEEP,n.DECR)),this.level=c,a.renderWebGL(d,a,l),d.flush(),n.colorMask(!0,!0,!0,!0),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),this.invertAlpha?n.stencilFunc(n.NOTEQUAL,c,o):n.stencilFunc(n.EQUAL,c,o)},postRenderWebGL:function(d){var l=d.gl;d.maskStack.pop(),d.maskCount--,d.flush();var h=d.currentMask;if(d.maskStack.length===0)h.mask=null,l.disable(l.STENCIL_TEST);else{var n=d.maskStack[d.maskStack.length-1];n.mask.applyStencil(d,n.camera,!1),d.currentCameraMask.mask!==n.mask?(h.mask=n.mask,h.camera=n.camera):h.mask=null}},preRenderCanvas:function(d,l,h){var n=this.geometryMask;d.currentContext.save(),n.renderCanvas(d,n,h,null,null,!0),d.currentContext.clip()},postRenderCanvas:function(d){d.currentContext.restore()},destroy:function(){this.geometryMask=null}});r.exports=m}),93310:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={BitmapMask:e(76756),GeometryMask:e(63037)}}),31053:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=new u({initialize:function(l,h,n,a){(!h||h==="")&&(h=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!n||n==="")&&(n=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),a===void 0&&(a=null),this.key=l,this.fragmentSrc=h,this.vertexSrc=n,this.uniforms=a}});r.exports=m}),99584:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){var m;if(u)typeof u=="string"?m=document.getElementById(u):typeof u=="object"&&u.nodeType===1&&(m=u);else if(e.parentElement||u===null)return e;return m||(m=document.body),m.appendChild(e),e};r.exports=y}),85178:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(99584),m=function(d){var l=d.config;if(!(!l.parent||!l.domCreateContainer)){var h=document.createElement("div");h.style.cssText=["display: block;","width: "+d.scale.width+"px;","height: "+d.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+l.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),d.domContainer=h,u(h,l.parent)}};r.exports=m}),21546:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(36580),m=function(d){if(document.readyState==="complete"||document.readyState==="interactive"){d();return}var l=function(){document.removeEventListener("deviceready",l,!0),document.removeEventListener("DOMContentLoaded",l,!0),window.removeEventListener("load",l,!0),d()};document.body?u.cordova?document.addEventListener("deviceready",l,!1):(document.addEventListener("DOMContentLoaded",l,!0),window.addEventListener("load",l,!0)):window.setTimeout(l,20)};r.exports=m}),74181:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){if(!e)return window.innerHeight;var u=Math.abs(window.orientation),m={w:0,h:0},d=document.createElement("div");return d.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(d),m.w=u===90?d.offsetHeight:window.innerWidth,m.h=u===90?window.innerWidth:d.offsetHeight,document.documentElement.removeChild(d),d=null,Math.abs(window.orientation)!==90?m.h:m.w};r.exports=y}),9229:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(55301),m=function(d,l){var h=window.screen,n=h?h.orientation||h.mozOrientation||h.msOrientation:!1;if(n&&typeof n.type=="string")return n.type;if(typeof n=="string")return n;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?u.ORIENTATION.PORTRAIT:u.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return u.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return u.ORIENTATION.LANDSCAPE}else return l>d?u.ORIENTATION.PORTRAIT:u.ORIENTATION.LANDSCAPE};r.exports=m}),2893:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){var u;return e!==""&&(typeof e=="string"?u=document.getElementById(e):e&&e.nodeType===1&&(u=e)),u||(u=document.body),u};r.exports=y}),89200:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){var u="";try{if(window.DOMParser){var m=new DOMParser;u=m.parseFromString(e,"text/xml")}else u=new ActiveXObject("Microsoft.XMLDOM"),u.loadXML(e)}catch{u=null}return!u||!u.documentElement||u.getElementsByTagName("parsererror").length?null:u};r.exports=y}),55638:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){e.parentNode&&e.parentNode.removeChild(e)};r.exports=y}),27385:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(72283),d=new u({initialize:function(){this.isRunning=!1,this.callback=m,this.isSetTimeOut=!1,this.timeOutID=null,this.delay=0;var h=this;this.step=function n(a){h.callback(a),h.isRunning&&(h.timeOutID=window.requestAnimationFrame(n))},this.stepTimeout=function n(){h.isRunning&&(h.timeOutID=window.setTimeout(n,h.delay)),h.callback(window.performance.now())}},start:function(l,h,n){this.isRunning||(this.callback=l,this.isSetTimeOut=h,this.delay=n,this.isRunning=!0,this.timeOutID=h?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=m}});r.exports=d}),3590:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u={AddToDOM:e(99584),DOMContentLoaded:e(21546),GetInnerHeight:e(74181),GetScreenOrientation:e(9229),GetTarget:e(2893),ParseXML:e(89200),RemoveFromDOM:e(55638),RequestAnimationFrame:e(27385)};r.exports=u}),78491:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(6659),d=e(91963),l=new u({Extends:m,initialize:function(){m.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});d.register("EventEmitter",l,"events"),r.exports=l}),95146:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={EventEmitter:e(78491)}}),20170:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(47551),d=e(47406),l=new u({Extends:m,initialize:function(n,a){a===void 0&&(a=1),m.call(this,d.BARREL,n),this.amount=a}});r.exports=l}),51182:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(47551),d=e(47406),l=new u({Extends:m,initialize:function(n,a,c,o,v,g,p){c===void 0&&(c=1),o===void 0&&(o=1),v===void 0&&(v=1),g===void 0&&(g=1),p===void 0&&(p=4),m.call(this,d.BLOOM,n),this.steps=p,this.offsetX=c,this.offsetY=o,this.blurStrength=v,this.strength=g,this.glcolor=[1,1,1],a!=null&&(this.color=a)},color:{get:function(){var h=this.glcolor;return(h[0]*255<<16)+(h[1]*255<<8)+(h[2]*255|0)},set:function(h){var n=this.glcolor;n[0]=(h>>16&255)/255,n[1]=(h>>8&255)/255,n[2]=(h&255)/255}}});r.exports=l}),51498:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(47551),d=e(47406),l=new u({Extends:m,initialize:function(n,a,c,o,v,g,p){c===void 0&&(c=2),o===void 0&&(o=2),v===void 0&&(v=1),p===void 0&&(p=4),m.call(this,d.BLUR,n),this.quality=0,this.x=c,this.y=o,this.steps=p,this.strength=v,this.glcolor=[1,1,1],g!=null&&(this.color=g)},color:{get:function(){var h=this.glcolor;return(h[0]*255<<16)+(h[1]*255<<8)+(h[2]*255|0)},set:function(h){var n=this.glcolor;n[0]=(h>>16&255)/255,n[1]=(h>>8&255)/255,n[2]=(h&255)/255}}});r.exports=l}),12042:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(47551),d=e(47406),l=new u({Extends:m,initialize:function(n,a,c,o,v,g,p,x){a===void 0&&(a=.5),c===void 0&&(c=1),o===void 0&&(o=.2),v===void 0&&(v=!1),g===void 0&&(g=1),p===void 0&&(p=1),x===void 0&&(x=1),m.call(this,d.BOKEH,n),this.radius=a,this.amount=c,this.contrast=o,this.isTiltShift=v,this.strength=x,this.blurX=g,this.blurY=p}});r.exports=l}),69900:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(47551),d=e(47406),l=new u({Extends:m,initialize:function(n,a,c,o,v,g){a===void 0&&(a=8),v===void 0&&(v=1),g===void 0&&(g=.005),m.call(this,d.CIRCLE,n),this.scale=v,this.feather=g,this.thickness=a,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4],c!=null&&(this.color=c),o!=null&&(this.backgroundColor=o)},color:{get:function(){var h=this.glcolor;return(h[0]*255<<16)+(h[1]*255<<8)+(h[2]*255|0)},set:function(h){var n=this.glcolor;n[0]=(h>>16&255)/255,n[1]=(h>>8&255)/255,n[2]=(h&255)/255}},backgroundColor:{get:function(){var h=this.glcolor2;return(h[0]*255<<16)+(h[1]*255<<8)+(h[2]*255|0)},set:function(h){var n=this.glcolor2;n[0]=(h>>16&255)/255,n[1]=(h>>8&255)/255,n[2]=(h&255)/255}}});r.exports=l}),48991:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(65246),d=e(47406),l=new u({Extends:m,initialize:function(n){m.call(this),this.type=d.COLOR_MATRIX,this.gameObject=n,this.active=!0},destroy:function(){this.gameObject=null,this._matrix=null,this._data=null}});r.exports=l}),47551:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=new u({initialize:function(l,h){this.type=l,this.gameObject=h,this.active=!0},setActive:function(d){return this.active=d,this},destroy:function(){this.gameObject=null,this.active=!1}});r.exports=m}),47909:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(47551),d=e(47406),l=new u({Extends:m,initialize:function(n,a,c,o){a===void 0&&(a="__WHITE"),c===void 0&&(c=.005),o===void 0&&(o=.005),m.call(this,d.DISPLACEMENT,n),this.x=c,this.y=o,this.glTexture,this.setTexture(a)},setTexture:function(h){var n=this.gameObject.scene.sys.textures.getFrame(h);return n&&(this.glTexture=n.glTexture),this}});r.exports=l}),18919:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(47551),d=e(47406),l=new u({Extends:m,initialize:function(n,a,c,o,v){c===void 0&&(c=4),o===void 0&&(o=0),v===void 0&&(v=!1),m.call(this,d.GLOW,n),this.outerStrength=c,this.innerStrength=o,this.knockout=v,this.glcolor=[1,1,1,1],a!==void 0&&(this.color=a)},color:{get:function(){var h=this.glcolor;return(h[0]*255<<16)+(h[1]*255<<8)+(h[2]*255|0)},set:function(h){var n=this.glcolor;n[0]=(h>>16&255)/255,n[1]=(h>>8&255)/255,n[2]=(h&255)/255}}});r.exports=l}),62494:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(47551),d=e(47406),l=new u({Extends:m,initialize:function(n,a,c,o,v,g,p,x,T){o===void 0&&(o=.2),v===void 0&&(v=0),g===void 0&&(g=0),p===void 0&&(p=0),x===void 0&&(x=1),T===void 0&&(T=0),m.call(this,d.GRADIENT,n),this.alpha=o,this.size=T,this.fromX=v,this.fromY=g,this.toX=p,this.toY=x,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0],a!=null&&(this.color1=a),c!=null&&(this.color2=c)},color1:{get:function(){var h=this.glcolor1;return(h[0]<<16)+(h[1]<<8)+(h[2]|0)},set:function(h){var n=this.glcolor1;n[0]=h>>16&255,n[1]=h>>8&255,n[2]=h&255}},color2:{get:function(){var h=this.glcolor2;return(h[0]<<16)+(h[1]<<8)+(h[2]|0)},set:function(h){var n=this.glcolor2;n[0]=h>>16&255,n[1]=h>>8&255,n[2]=h&255}}});r.exports=l}),68897:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(47551),d=e(47406),l=new u({Extends:m,initialize:function(n,a){a===void 0&&(a=1),m.call(this,d.PIXELATE,n),this.amount=a}});r.exports=l}),58575:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(47551),d=e(47406),l=new u({Extends:m,initialize:function(n,a,c,o,v,g,p,x){a===void 0&&(a=0),c===void 0&&(c=0),o===void 0&&(o=.1),v===void 0&&(v=1),p===void 0&&(p=6),x===void 0&&(x=1),m.call(this,d.SHADOW,n),this.x=a,this.y=c,this.decay=o,this.power=v,this.glcolor=[0,0,0,1],this.samples=p,this.intensity=x,g!==void 0&&(this.color=g)},color:{get:function(){var h=this.glcolor;return(h[0]*255<<16)+(h[1]*255<<8)+(h[2]*255|0)},set:function(h){var n=this.glcolor;n[0]=(h>>16&255)/255,n[1]=(h>>8&255)/255,n[2]=(h&255)/255}}});r.exports=l}),33755:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(47551),d=e(47406),l=new u({Extends:m,initialize:function(n,a,c,o,v){a===void 0&&(a=.5),c===void 0&&(c=.5),o===void 0&&(o=3),v===void 0&&(v=!1),m.call(this,d.SHINE,n),this.speed=a,this.lineWidth=c,this.gradient=o,this.reveal=v}});r.exports=l}),24949:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(47551),d=e(47406),l=new u({Extends:m,initialize:function(n,a,c,o,v){a===void 0&&(a=.5),c===void 0&&(c=.5),o===void 0&&(o=.5),v===void 0&&(v=.5),m.call(this,d.VIGNETTE,n),this.x=a,this.y=c,this.radius=o,this.strength=v}});r.exports=l}),66241:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(47551),d=e(47406),l=new u({Extends:m,initialize:function(n,a,c,o,v){a===void 0&&(a=.1),c===void 0&&(c=0),o===void 0&&(o=0),v===void 0&&(v=!1),m.call(this,d.WIPE,n),this.progress=0,this.wipeWidth=a,this.direction=c,this.axis=o,this.reveal=v}});r.exports=l}),47406:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={GLOW:4,SHADOW:5,PIXELATE:6,VIGNETTE:7,SHINE:8,BLUR:9,GRADIENT:12,BLOOM:13,COLOR_MATRIX:14,CIRCLE:15,BARREL:16,DISPLACEMENT:17,WIPE:18,BOKEH:19};r.exports=y}),96910:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(98611),m=e(47406),d={Barrel:e(20170),Controller:e(47551),Bloom:e(51182),Blur:e(51498),Bokeh:e(12042),Circle:e(69900),ColorMatrix:e(48991),Displacement:e(47909),Glow:e(18919),Gradient:e(62494),Pixelate:e(68897),Shadow:e(58575),Shine:e(33755),Vignette:e(24949),Wipe:e(66241)};d=u(!1,d,m),r.exports=d}),88933:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(95723),m=e(20494),d=function(l,h,n){h.x=m(n,"x",0),h.y=m(n,"y",0),h.depth=m(n,"depth",0),h.flipX=m(n,"flipX",!1),h.flipY=m(n,"flipY",!1);var a=m(n,"scale",null);typeof a=="number"?h.setScale(a):a!==null&&(h.scaleX=m(a,"x",1),h.scaleY=m(a,"y",1));var c=m(n,"scrollFactor",null);typeof c=="number"?h.setScrollFactor(c):c!==null&&(h.scrollFactorX=m(c,"x",1),h.scrollFactorY=m(c,"y",1)),h.rotation=m(n,"rotation",0);var o=m(n,"angle",null);o!==null&&(h.angle=o),h.alpha=m(n,"alpha",1);var v=m(n,"origin",null);if(typeof v=="number")h.setOrigin(v);else if(v!==null){var g=m(v,"x",.5),p=m(v,"y",.5);h.setOrigin(g,p)}h.blendMode=m(n,"blendMode",u.NORMAL),h.visible=m(n,"visible",!0);var x=m(n,"add",!0);return x&&l.sys.displayList.add(h),h.preUpdate&&l.sys.updateList.add(h),h};r.exports=d}),32291:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(20494),m=function(d,l){var h=u(l,"anims",null);if(h===null)return d;if(typeof h=="string")d.anims.play(h);else if(typeof h=="object"){var n=d.anims,a=u(h,"key",void 0);if(a){var c=u(h,"startFrame",void 0),o=u(h,"delay",0),v=u(h,"repeat",0),g=u(h,"repeatDelay",0),p=u(h,"yoyo",!1),x=u(h,"play",!1),T=u(h,"delayedPlay",0),E={key:a,delay:o,repeat:v,repeatDelay:g,yoyo:p,startFrame:c};x?n.play(E):T>0?n.playAfterDelay(E,T):n.load(E)}}return d};r.exports=m}),91713:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(71207),d=e(91963),l=e(56631),h=e(7599),n=e(17922),a=new u({Extends:m,initialize:function(o){m.call(this,o),this.sortChildrenFlag=!1,this.scene=o,this.systems=o.sys,this.events=o.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(h.BOOT,this.boot,this),this.events.on(h.START,this.start,this)},boot:function(){this.events.once(h.DESTROY,this.destroy,this)},addChildCallback:function(c){c.displayList&&c.displayList!==this&&c.removeFromDisplayList(),c.parentContainer&&c.parentContainer.remove(c),c.displayList||(this.queueDepthSort(),c.displayList=this,c.emit(l.ADDED_TO_SCENE,c,this.scene),this.events.emit(h.ADDED_TO_SCENE,c,this.scene))},removeChildCallback:function(c){this.queueDepthSort(),c.displayList=null,c.emit(l.REMOVED_FROM_SCENE,c,this.scene),this.events.emit(h.REMOVED_FROM_SCENE,c,this.scene)},start:function(){this.events.once(h.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(n(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(c,o){return c._depth-o._depth},getChildren:function(){return this.list},shutdown:function(){for(var c=this.list;c.length;)c[0].destroy(!0);this.events.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(h.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});d.register("DisplayList",a,"displayList"),r.exports=a}),89980:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(48129),d=e(81078),l=e(6659),h=e(56631),n=e(7599),a=new u({Extends:l,initialize:function(o,v){l.call(this),this.scene=o,this.displayList=null,this.type=v,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(h.ADDED_TO_SCENE,this.addedToScene,this),this.on(h.REMOVED_FROM_SCENE,this.removedFromScene,this),o.sys.queueDepthSort()},setActive:function(c){return this.active=c,this},setName:function(c){return this.name=c,this},setState:function(c){return this.state=c,this},setDataEnabled:function(){return this.data||(this.data=new d(this)),this},setData:function(c,o){return this.data||(this.data=new d(this)),this.data.set(c,o),this},incData:function(c,o){return this.data||(this.data=new d(this)),this.data.inc(c,o),this},toggleData:function(c){return this.data||(this.data=new d(this)),this.data.toggle(c),this},getData:function(c){return this.data||(this.data=new d(this)),this.data.get(c)},setInteractive:function(c,o,v){return this.scene.sys.input.enable(this,c,o,v),this},disableInteractive:function(){return this.scene.sys.input.disable(this),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return m(this)},willRender:function(c){var o=this.displayList&&this.displayList.active?this.displayList.willRender(c):!0;return!(!o||a.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&c.id)},getIndexList:function(){for(var c=this,o=this.parentContainer,v=[];o&&(v.unshift(o.getIndex(c)),c=o,o.parentContainer);)o=o.parentContainer;return this.displayList?v.unshift(this.displayList.getIndex(c)):v.unshift(this.scene.sys.displayList.getIndex(c)),v},addToDisplayList:function(c){return c===void 0&&(c=this.scene.sys.displayList),this.displayList&&this.displayList!==c&&this.removeFromDisplayList(),c.exists(this)||(this.displayList=c,c.add(this,!0),c.queueDepthSort(),this.emit(h.ADDED_TO_SCENE,this,this.scene),c.events.emit(n.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var c=this.displayList||this.scene.sys.displayList;return c&&c.exists(this)&&(c.remove(this,!0),c.queueDepthSort(),this.displayList=null,this.emit(h.REMOVED_FROM_SCENE,this,this.scene),c.events.emit(n.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(c){!this.scene||this.ignoreDestroy||(c===void 0&&(c=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(h.DESTROY,this,c),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.preFX&&(this.preFX.destroy(),this.preFX=void 0),this.postFX&&(this.postFX.destroy(),this.postFX=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});a.RENDER_MASK=15,r.exports=a}),99325:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(91963),d=e(7599),l=new u({initialize:function(n){this.scene=n,this.systems=n.sys,this.events=n.sys.events,this.displayList,this.updateList,this.events.once(d.BOOT,this.boot,this),this.events.on(d.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(d.DESTROY,this.destroy,this)},start:function(){this.events.once(d.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(d.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(d.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});l.register=function(h,n){l.prototype.hasOwnProperty(h)||(l.prototype[h]=n)},l.remove=function(h){l.prototype.hasOwnProperty(h)&&delete l.prototype[h]},m.register("GameObjectCreator",l,"make"),r.exports=l}),61286:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(91963),d=e(7599),l=new u({initialize:function(n){this.scene=n,this.systems=n.sys,this.events=n.sys.events,this.displayList,this.updateList,this.events.once(d.BOOT,this.boot,this),this.events.on(d.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(d.DESTROY,this.destroy,this)},start:function(){this.events.once(d.SHUTDOWN,this.shutdown,this)},existing:function(h){return(h.renderCanvas||h.renderWebGL)&&this.displayList.add(h),h.preUpdate&&this.updateList.add(h),h},shutdown:function(){this.events.off(d.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(d.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});l.register=function(h,n){l.prototype.hasOwnProperty(h)||(l.prototype[h]=n)},l.remove=function(h){l.prototype.hasOwnProperty(h)&&delete l.prototype[h]},m.register("GameObjectFactory",l,"add"),r.exports=l}),73329:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(69360),m=new u,d=new u,l=new u,h={camera:m,sprite:d,calc:l},n=function(a,c,o){var v=m,g=d,p=l;return g.applyITRS(a.x,a.y,a.rotation,a.scaleX,a.scaleY),v.copyFrom(c.matrix),o?(v.multiplyWithOffset(o,-c.scrollX*a.scrollFactorX,-c.scrollY*a.scrollFactorY),g.e=a.x,g.f=a.y):(g.e-=c.scrollX*a.scrollFactorX,g.f-=c.scrollY*a.scrollFactorY),v.multiply(g,p),h};r.exports=n}),92034:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(74623),d=e(91963),l=e(7599),h=new u({Extends:m,initialize:function(a){m.call(this),this.checkQueue=!0,this.scene=a,this.systems=a.sys,a.sys.events.once(l.BOOT,this.boot,this),a.sys.events.on(l.START,this.start,this)},boot:function(){this.systems.events.once(l.DESTROY,this.destroy,this)},start:function(){var n=this.systems.events;n.on(l.PRE_UPDATE,this.update,this),n.on(l.UPDATE,this.sceneUpdate,this),n.once(l.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(n,a){for(var c=this._active,o=c.length,v=0;v<o;v++){var g=c[v];g.active&&g.preUpdate.call(g,n,a)}},shutdown:function(){for(var n=this._active.length;n--;)this._active[n].destroy(!0);for(n=this._pending.length;n--;)this._pending[n].destroy(!0);for(n=this._destroy.length;n--;)this._destroy[n].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var a=this.systems.events;a.off(l.PRE_UPDATE,this.update,this),a.off(l.UPDATE,this.sceneUpdate,this),a.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(l.START,this.start,this),this.scene=null,this.systems=null}});d.register("UpdateList",h,"updateList"),r.exports=h}),8810:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d,l,h,n,a,c,o,v,g,p,x,T){var E=m.x-u.displayOriginX+l,M=m.y-u.displayOriginY+h,P=E+m.w,w=M+m.h,R=n.getXRound(E,M,a),A=n.getYRound(E,M,a),O=n.getXRound(E,w,a),F=n.getYRound(E,w,a),b=n.getXRound(P,w,a),D=n.getYRound(P,w,a),I=n.getXRound(P,M,a),B=n.getYRound(P,M,a);e.batchQuad(u,R,A,O,F,b,D,I,B,d.u0,d.v0,d.u1,d.v1,c,o,v,g,p,x,T)};r.exports=y}),82173:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d){if(m===void 0&&(m=!1),d===void 0)return d={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},d;var l=e.text,h=l.length,n=e.maxWidth,a=e.wordWrapCharCode,c=Number.MAX_VALUE,o=Number.MAX_VALUE,v=0,g=0,p=e.fontData.chars,x=e.fontData.lineHeight,T=e.letterSpacing,E=e.lineSpacing,M=0,P=0,w=0,R=null,A=e._align,O=0,F=0,b=e.fontSize/e.fontData.size,D=b*e.scaleX,I=b*e.scaleY,B=null,z=0,Y=[],X=Number.MAX_VALUE,H=0,N=0,U=0,L,G=[],V=[],k=null;if(n>0){for(L=0;L<h;L++){if(w=l.charCodeAt(L),w===10){k!==null&&(G.push({word:k.word,i:k.i,x:k.x*D,y:k.y*I,w:k.w*D,h:k.h*I,cr:!0}),k=null),M=0,P+=x+E,B=null;continue}if(R=p[w],!!R){if(B!==null)var W=R.kerning[z];w===a?k!==null&&(G.push({word:k.word,i:k.i,x:k.x*D,y:k.y*I,w:k.w*D,h:k.h*I,cr:!1}),k=null):(k===null&&(k={word:"",i:L,x:M,y:P,w:0,h:x,cr:!1}),k.word=k.word.concat(l[L]),k.w+=R.xOffset+R.xAdvance+(W!==void 0?W:0)),M+=R.xAdvance+T,B=R,z=w}}k!==null&&G.push({word:k.word,i:k.i,x:k.x*D,y:k.y*I,w:k.w*D,h:k.h*I,cr:!1}),M=0,P=0,B=null,z=0;var $,K=0,j=[];for(L=0;L<G.length;L++){var Z=G[L],J=Z.x,Q=Z.x+Z.w;if($){var _=J-($.x+$.w);K=J-(_+$.w),$=null}var q=J-K,et=Q-K;q>n||et>n?(j.push(Z.i-1),Z.cr?(j.push(Z.i+Z.word.length),K=0,$=null):$=Z):Z.cr&&(j.push(Z.i+Z.word.length),K=0,$=null)}var rt=function(Ut,Kt,te){return Ut.substr(0,Kt)+te+Ut.substr(Kt+1)};for(L=j.length-1;L>=0;L--)l=rt(l,j[L],`
`);d.wrappedText=l,h=l.length,G=[],k=null}var ot=0;for(L=0;L<h;L++){if(w=l.charCodeAt(L),w===10){k!==null&&(G.push({word:k.word,i:k.i,x:k.x*D,y:k.y*I,w:k.w*D,h:k.h*I}),k=null),M=0,P+=x+E,B=null,Y[N]=U,U>H&&(H=U),U<X&&(X=U),N++,U=0;continue}if(R=p[w],!!R){if(O=M,F=P,B!==null){var ht=R.kerning[z];O+=ht!==void 0?ht:0}c>O&&(c=O),o>F&&(o=F);var tt=O+R.xAdvance,at=F+x;v<tt&&(v=tt),g<at&&(g=at);var nt=R.xOffset+R.xAdvance+(ht!==void 0?ht:0);w===a?k!==null&&(G.push({word:k.word,i:k.i,x:k.x*D,y:k.y*I,w:k.w*D,h:k.h*I}),k=null):(k===null&&(k={word:"",i:ot,x:M,y:P,w:0,h:x}),k.word=k.word.concat(l[L]),k.w+=nt),V.push({i:ot,idx:L,char:l[L],code:w,x:(R.xOffset+O)*b,y:(R.yOffset+P)*b,w:R.width*b,h:R.height*b,t:P*b,r:tt*b,b:x*b,line:N,glyph:R}),M+=R.xAdvance+T+(ht!==void 0?ht:0),B=R,z=w,U=tt*b,ot++}}if(k!==null&&G.push({word:k.word,i:k.i,x:k.x*D,y:k.y*I,w:k.w*D,h:k.h*I}),Y[N]=U,U>H&&(H=U),U<X&&(X=U),A>0)for(var pt=0;pt<V.length;pt++){var vt=V[pt];if(A===1){var Lt=(H-Y[vt.line])/2;vt.x+=Lt,vt.r+=Lt}else if(A===2){var wt=H-Y[vt.line];vt.x+=wt,vt.r+=wt}}var Tt=d.local,mt=d.global,Rt=d.lines;return Tt.x=c*b,Tt.y=o*b,Tt.width=v*b,Tt.height=g*b,mt.x=e.x-e._displayOriginX+c*D,mt.y=e.y-e._displayOriginY+o*I,mt.width=v*D,mt.height=g*I,Rt.shortest=X,Rt.longest=H,Rt.lengths=Y,u&&(Tt.x=Math.ceil(Tt.x),Tt.y=Math.ceil(Tt.y),Tt.width=Math.ceil(Tt.width),Tt.height=Math.ceil(Tt.height),mt.x=Math.ceil(mt.x),mt.y=Math.ceil(mt.y),mt.width=Math.ceil(mt.width),mt.height=Math.ceil(mt.height),Rt.shortest=Math.ceil(X),Rt.longest=Math.ceil(H)),m&&(e._displayOriginX=e.originX*Tt.width,e._displayOriginY=e.originY*Tt.height,mt.x=e.x-e._displayOriginX*e.scaleX,mt.y=e.y-e._displayOriginY*e.scaleY,u&&(mt.x=Math.ceil(mt.x),mt.y=Math.ceil(mt.y))),d.words=G,d.characters=V,d.lines.height=x,d.scale=b,d.scaleX=e.scaleX,d.scaleY=e.scaleY,d};r.exports=y}),68298:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(31476),m=function(d,l,h,n,a,c,o){var v=d.sys.textures.get(h),g=v.get(n),p=d.sys.cache.xml.get(a);if(g&&p){var x=u(p,g,c,o,v);return d.sys.cache.bitmapFont.add(l,{data:x,texture:h,frame:n,fromAtlas:!0}),!0}else return!1};r.exports=m}),39860:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(10850),m=function(d,l){var h=l.width,n=l.height,a=Math.floor(h/2),c=Math.floor(n/2),o=u(l,"chars","");if(o!==""){var v=u(l,"image",""),g=d.sys.textures.getFrame(v),p=g.cutX,x=g.cutY,T=g.source.width,E=g.source.height,M=u(l,"offset.x",0),P=u(l,"offset.y",0),w=u(l,"spacing.x",0),R=u(l,"spacing.y",0),A=u(l,"lineSpacing",0),O=u(l,"charsPerRow",null);O===null&&(O=T/h,O>o.length&&(O=o.length));for(var F=M,b=P,D={retroFont:!0,font:v,size:h,lineHeight:n+A,chars:{}},I=0,B=0;B<o.length;B++){var z=o.charCodeAt(B),Y=(p+F)/T,X=(x+b)/E,H=(p+F+h)/T,N=(x+b+n)/E;D.chars[z]={x:F,y:b,width:h,height:n,centerX:a,centerY:c,xOffset:0,yOffset:0,xAdvance:h,data:{},kerning:{},u0:Y,v0:X,u1:H,v1:N},I++,I===O?(I=0,F=M,b+=n+R):F+=h+w}var U={data:D,frame:null,texture:v};return U}};r.exports=m}),31476:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function y(u,m){return parseInt(u.getAttribute(m),10)}var e=function(u,m,d,l,h){d===void 0&&(d=0),l===void 0&&(l=0);var n=m.cutX,a=m.cutY,c=m.source.width,o=m.source.height,v=m.sourceIndex,g={},p=u.getElementsByTagName("info")[0],x=u.getElementsByTagName("common")[0];g.font=p.getAttribute("face"),g.size=y(p,"size"),g.lineHeight=y(x,"lineHeight")+l,g.chars={};var T=u.getElementsByTagName("char"),E=m!==void 0&&m.trimmed;if(E)var M=m.height,P=m.width;for(var w=0;w<T.length;w++){var R=T[w],A=y(R,"id"),O=String.fromCharCode(A),F=y(R,"x"),b=y(R,"y"),D=y(R,"width"),I=y(R,"height");E&&(F<P&&(P=F),b<M&&(M=b)),E&&M!==0&&P!==0&&(F-=m.x,b-=m.y);var B=(n+F)/c,z=(a+b)/o,Y=(n+F+D)/c,X=(a+b+I)/o;if(g.chars[A]={x:F,y:b,width:D,height:I,centerX:Math.floor(D/2),centerY:Math.floor(I/2),xOffset:y(R,"xoffset"),yOffset:y(R,"yoffset"),xAdvance:y(R,"xadvance")+d,data:{},kerning:{},u0:B,v0:z,u1:Y,v1:X},h&&D!==0&&I!==0){var H=h.add(O,v,F,b,D,I);H&&H.setUVs(D,I,B,z,Y,X)}}var N=u.getElementsByTagName("kerning");for(w=0;w<N.length;w++){var U=N[w],L=y(U,"first"),G=y(U,"second"),V=y(U,"amount");g.chars[G].kerning[L]=V}return g};r.exports=e}),55873:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(66863),m=e(98611),d={Parse:e(39860)};d=m(!1,d,u),r.exports=d}),66863:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};r.exports=y}),13468:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(44616),m=e(56694),d=e(88899),l=new m({Extends:u,Mixins:[d],initialize:function(n,a,c,o,v,g,p){u.call(this,n,a,c,o,v,g,p),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(h,n){return this.cropWidth=h,this.cropHeight=n,this},setDisplayCallback:function(h){return this.displayCallback=h,this},setScrollX:function(h){return this.scrollX=h,this},setScrollY:function(h){return this.scrollY=h,this}});r.exports=l}),93438:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(49584),m=function(d,l,h,n){var a=l._text,c=a.length,o=d.currentContext;if(!(c===0||!u(d,o,l,h,n))){h.addToRenderList(l);var v=l.fromAtlas?l.frame:l.texture.frames.__BASE,g=l.displayCallback,p=l.callbackData,x=l.fontData.chars,T=l.fontData.lineHeight,E=l._letterSpacing,M=0,P=0,w=0,R=null,A=0,O=0,F=0,b=0,D=0,I=0,B=null,z=0,Y=l.frame.source.image,X=v.cutX,H=v.cutY,N=0,U=0,L=l._fontSize/l.fontData.size,G=l._align,V=0,k=0;l.getTextBounds(!1);var W=l._bounds.lines;G===1?k=(W.longest-W.lengths[0])/2:G===2&&(k=W.longest-W.lengths[0]),o.translate(-l.displayOriginX,-l.displayOriginY);var $=h.roundPixels;l.cropWidth>0&&l.cropHeight>0&&(o.beginPath(),o.rect(0,0,l.cropWidth,l.cropHeight),o.clip());for(var K=0;K<c;K++){if(U=L,N=0,w=a.charCodeAt(K),w===10){V++,G===1?k=(W.longest-W.lengths[V])/2:G===2&&(k=W.longest-W.lengths[V]),M=0,P+=T,B=null;continue}if(R=x[w],!!R){if(A=X+R.x,O=H+R.y,F=R.width,b=R.height,D=R.xOffset+M-l.scrollX,I=R.yOffset+P-l.scrollY,B!==null){var j=R.kerning[z];D+=j!==void 0?j:0}if(g){p.index=K,p.charCode=w,p.x=D,p.y=I,p.scale=U,p.rotation=N,p.data=R.data;var Z=g(p);D=Z.x,I=Z.y,U=Z.scale,N=Z.rotation}D*=U,I*=U,D+=k,M+=R.xAdvance+E+(j!==void 0?j:0),B=R,z=w,!(F===0||b===0||w===32)&&($&&(D=Math.round(D),I=Math.round(I)),o.save(),o.translate(D,I),o.rotate(N),o.scale(U,U),o.drawImage(Y,A,O,F,b,0,0,F,b),o.restore())}}o.restore()}};r.exports=m}),67513:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(13468),m=e(88933),d=e(99325),l=e(20494);d.register("dynamicBitmapText",function(h,n){h===void 0&&(h={});var a=l(h,"font",""),c=l(h,"text",""),o=l(h,"size",!1),v=new u(this.scene,0,0,a,c,o);return n!==void 0&&(h.add=n),m(this.scene,v,h),v})}),94145:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(13468),m=e(61286);m.register("dynamicBitmapText",function(d,l,h,n,a){return this.displayList.add(new u(this.scene,d,l,h,n,a))})}),88899:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),m=u,d=u;m=e(16873),d=e(93438),r.exports={renderWebGL:m,renderCanvas:d}}),16873:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(73329),m=e(69360),d=e(75512),l=new m,h=function(n,a,c,o){var v=a.text,g=v.length;if(g!==0){c.addToRenderList(a);var p=n.pipelines.set(a.pipeline,a),x=u(a,c,o);n.pipelines.preBatch(a);var T=x.sprite,E=x.calc,M=l,P=a.cropWidth>0||a.cropHeight>0;P&&(p.flush(),n.pushScissor(E.tx,E.ty,a.cropWidth*E.scaleX,a.cropHeight*E.scaleY));var w=a.frame,R=w.glTexture,A=a.tintFill,O=d.getTintAppendFloatAlpha(a.tintTopLeft,c.alpha*a._alphaTL),F=d.getTintAppendFloatAlpha(a.tintTopRight,c.alpha*a._alphaTR),b=d.getTintAppendFloatAlpha(a.tintBottomLeft,c.alpha*a._alphaBL),D=d.getTintAppendFloatAlpha(a.tintBottomRight,c.alpha*a._alphaBR),I=p.setGameObject(a),B=0,z=0,Y=0,X=0,H=a.letterSpacing,N,U=0,L=0,G,V=a.scrollX,k=a.scrollY,W=a.fontData,$=W.chars,K=W.lineHeight,j=a.fontSize/W.size,Z=0,J=a._align,Q=0,_=0,q=a.getTextBounds(!1);a.maxWidth>0&&(v=q.wrappedText,g=v.length);var et=a._bounds.lines;J===1?_=(et.longest-et.lengths[0])/2:J===2&&(_=et.longest-et.lengths[0]);for(var rt=c.roundPixels,ot=a.displayCallback,ht=a.callbackData,tt=0;tt<g;tt++){if(Y=v.charCodeAt(tt),Y===10){Q++,J===1?_=(et.longest-et.lengths[Q])/2:J===2&&(_=et.longest-et.lengths[Q]),B=0,z+=K,G=null;continue}if(N=$[Y],!!N){U=N.width,L=N.height;var at=N.xOffset+B-V,nt=N.yOffset+z-k;if(G!==null){var pt=N.kerning[X];at+=pt!==void 0?pt:0}if(B+=N.xAdvance+H,G=N,X=Y,!(U===0||L===0||Y===32)){if(j=a.fontSize/a.fontData.size,Z=0,ot){ht.color=0,ht.tint.topLeft=O,ht.tint.topRight=F,ht.tint.bottomLeft=b,ht.tint.bottomRight=D,ht.index=tt,ht.charCode=Y,ht.x=at,ht.y=nt,ht.scale=j,ht.rotation=Z,ht.data=N.data;var vt=ot(ht);at=vt.x,nt=vt.y,j=vt.scale,Z=vt.rotation,vt.color?(O=vt.color,F=vt.color,b=vt.color,D=vt.color):(O=vt.tint.topLeft,F=vt.tint.topRight,b=vt.tint.bottomLeft,D=vt.tint.bottomRight),O=d.getTintAppendFloatAlpha(O,c.alpha*a._alphaTL),F=d.getTintAppendFloatAlpha(F,c.alpha*a._alphaTR),b=d.getTintAppendFloatAlpha(b,c.alpha*a._alphaBL),D=d.getTintAppendFloatAlpha(D,c.alpha*a._alphaBR)}at*=j,nt*=j,at-=a.displayOriginX,nt-=a.displayOriginY,at+=_,M.applyITRS(at,nt,Z,j,j),E.multiply(M,T);var Lt=N.u0,wt=N.v0,Tt=N.u1,mt=N.v1,Rt=U,Ut=L,Kt=T.e,te=T.f,Ce=Ut*T.c+T.e,ls=Ut*T.d+T.f,us=Rt*T.a+Ut*T.c+T.e,ds=Rt*T.b+Ut*T.d+T.f,fs=Rt*T.a+T.e,cs=Rt*T.b+T.f;rt&&(Kt=Math.round(Kt),te=Math.round(te),Ce=Math.round(Ce),ls=Math.round(ls),us=Math.round(us),ds=Math.round(ds),fs=Math.round(fs),cs=Math.round(cs)),p.batchQuad(a,Kt,te,Ce,ls,us,ds,fs,cs,Lt,wt,Tt,mt,O,F,b,D,A,R,I)}}}P&&(p.flush(),n.popScissor()),n.pipelines.postBatch(a)}};r.exports=h}),44616:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(82897),d=e(64937),l=e(89980),h=e(82173),n=e(68298),a=e(31476),c=e(74118),o=e(84557),v=new u({Extends:l,Mixins:[d.Alpha,d.BlendMode,d.Depth,d.GetBounds,d.Mask,d.Origin,d.Pipeline,d.PostPipeline,d.ScrollFactor,d.Texture,d.Tint,d.Transform,d.Visible,o],initialize:function(p,x,T,E,M,P,w){M===void 0&&(M=""),w===void 0&&(w=0),l.call(this,p,"BitmapText"),this.font=E;var R=this.scene.sys.cache.bitmapFont.get(E);R||console.warn("Invalid BitmapText key: "+E),this.fontData=R.data,this._text="",this._fontSize=P||this.fontData.size,this._letterSpacing=0,this._lineSpacing=0,this._align=w,this._bounds=h(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=R.fromAtlas,this.setTexture(R.texture,R.frame),this.setPosition(x,T),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(),this.setText(M)},setLeftAlign:function(){return this._align=v.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=v.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=v.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(g){return this._fontSize=g,this._dirty=!0,this},setLetterSpacing:function(g){return g===void 0&&(g=0),this._letterSpacing=g,this._dirty=!0,this},setLineSpacing:function(g){return g===void 0&&(g=0),this.lineSpacing=g,this},setText:function(g){return!g&&g!==0&&(g=""),Array.isArray(g)&&(g=g.join(`
`)),g!==this.text&&(this._text=g.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(g,p,x,T){return g===void 0&&(g=0),p===void 0&&(p=0),x===void 0&&(x=0),T===void 0&&(T=.5),this.dropShadowX=g,this.dropShadowY=p,this.dropShadowColor=x,this.dropShadowAlpha=T,this},setCharacterTint:function(g,p,x,T,E,M,P){g===void 0&&(g=0),p===void 0&&(p=1),x===void 0&&(x=!1),T===void 0&&(T=-1),E===void 0&&(E=T,M=T,P=T);var w=this.text.length;p===-1&&(p=w),g<0&&(g=w+g),g=m(g,0,w-1);for(var R=m(g+p,g,w),A=this.charColors,O=g;O<R;O++){var F=A[O];if(T===-1)A[O]=null;else{var b=x?1:0;F?(F.tintEffect=b,F.tintTL=T,F.tintTR=E,F.tintBL=M,F.tintBR=P):A[O]={tintEffect:b,tintTL:T,tintTR:E,tintBL:M,tintBR:P}}}return this},setWordTint:function(g,p,x,T,E,M,P){p===void 0&&(p=1);for(var w=this.getTextBounds(),R=w.words,A=typeof g=="number",O=0,F=0;F<R.length;F++){var b=R[F];if((A&&F===g||!A&&b.word===g)&&(this.setCharacterTint(b.i,b.word.length,x,T,E,M,P),O++,O===p))return this}return this},getTextBounds:function(g){var p=this._bounds;return(this._dirty||g||this.scaleX!==p.scaleX||this.scaleY!==p.scaleY)&&(h(this,g,!0,p),this._dirty=!1),p},getCharacterAt:function(g,p,x){for(var T=this.getLocalPoint(g,p,null,x),E=this.getTextBounds(),M=E.characters,P=new c,w=0;w<M.length;w++){var R=M[w];if(P.setTo(R.x,R.t,R.r-R.x,R.b),P.contains(T.x,T.y))return R}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(g,p,x){if(p===void 0&&(p=this._fontSize),x===void 0&&(x=this._align),g!==this.font){var T=this.scene.sys.cache.bitmapFont.get(g);T&&(this.font=g,this.fontData=T.data,this._fontSize=p,this._align=x,this.fromAtlas=T.fromAtlas===!0,this.setTexture(T.texture,T.frame),h(this,!1,!0,this._bounds))}return this},setMaxWidth:function(g,p){return this._maxWidth=g,this._dirty=!0,p!==void 0&&(this.wordWrapCharCode=p),this},align:{set:function(g){this._align=g,this._dirty=!0},get:function(){return this._align}},text:{set:function(g){this.setText(g)},get:function(){return this._text}},fontSize:{set:function(g){this._fontSize=g,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(g){this._letterSpacing=g,this._dirty=!0},get:function(){return this._letterSpacing}},lineSpacing:{set:function(g){this._lineSpacing=g,this._dirty=!0},get:function(){return this._lineSpacing}},maxWidth:{set:function(g){this._maxWidth=g,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},displayWidth:{get:function(){return this.width}},displayHeight:{get:function(){return this.height}},toJSON:function(){var g=d.ToJSON(this),p={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,lineSpacing:this.lineSpacing,align:this.align};return g.data=p,g},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});v.ALIGN_LEFT=0,v.ALIGN_CENTER=1,v.ALIGN_RIGHT=2,v.ParseFromAtlas=n,v.ParseXMLBitmapFont=a,r.exports=v}),97545:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(49584),m=function(d,l,h,n){var a=l._text,c=a.length,o=d.currentContext;if(!(c===0||!u(d,o,l,h,n))){h.addToRenderList(l);var v=l.fromAtlas?l.frame:l.texture.frames.__BASE,g=l.fontData.chars,p=l.fontData.lineHeight,x=l._letterSpacing,T=l._lineSpacing,E=0,M=0,P=0,w=null,R=0,A=0,O=0,F=0,b=0,D=0,I=null,B=0,z=v.source.image,Y=v.cutX,X=v.cutY,H=l._fontSize/l.fontData.size,N=l._align,U=0,L=0,G=l.getTextBounds(!1);l.maxWidth>0&&(a=G.wrappedText,c=a.length);var V=l._bounds.lines;N===1?L=(V.longest-V.lengths[0])/2:N===2&&(L=V.longest-V.lengths[0]),o.translate(-l.displayOriginX,-l.displayOriginY);for(var k=h.roundPixels,W=0;W<c;W++){if(P=a.charCodeAt(W),P===10){U++,N===1?L=(V.longest-V.lengths[U])/2:N===2&&(L=V.longest-V.lengths[U]),E=0,M+=p+T,I=null;continue}if(w=g[P],!!w){if(R=Y+w.x,A=X+w.y,O=w.width,F=w.height,b=w.xOffset+E,D=w.yOffset+M,I!==null){var $=w.kerning[B];b+=$!==void 0?$:0}b*=H,D*=H,b+=L,E+=w.xAdvance+x+($!==void 0?$:0),I=w,B=P,!(O===0||F===0||P===32)&&(k&&(b=Math.round(b),D=Math.round(D)),o.save(),o.translate(b,D),o.scale(H,H),o.drawImage(z,R,A,O,F,0,0,O,F),o.restore())}}o.restore()}};r.exports=m}),95499:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(44616),m=e(88933),d=e(99325),l=e(20494),h=e(10850);d.register("bitmapText",function(n,a){n===void 0&&(n={});var c=h(n,"font",""),o=l(n,"text",""),v=l(n,"size",!1),g=h(n,"align",0),p=new u(this.scene,0,0,c,o,v,g);return a!==void 0&&(n.add=a),m(this.scene,p,n),p})}),21797:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(44616),m=e(61286);m.register("bitmapText",function(d,l,h,n,a,c){return this.displayList.add(new u(this.scene,d,l,h,n,a,c))})}),84557:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),m=u,d=u;m=e(26372),d=e(97545),r.exports={renderWebGL:m,renderCanvas:d}}),26372:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(8810),m=e(73329),d=e(75512),l=function(h,n,a,c){var o=n._text,v=o.length;if(v!==0){a.addToRenderList(n);var g=h.pipelines.set(n.pipeline,n),p=m(n,a,c).calc;h.pipelines.preBatch(n);var x=a.roundPixels,T=a.alpha,E=n.charColors,M=n.tintFill,P=d.getTintAppendFloatAlpha,w=P(n.tintTopLeft,T*n._alphaTL),R=P(n.tintTopRight,T*n._alphaTR),A=P(n.tintBottomLeft,T*n._alphaBL),O=P(n.tintBottomRight,T*n._alphaBR),F=n.frame.glTexture,b=g.setGameObject(n),D=n.getTextBounds(!1),I,B,z,Y=D.characters,X=n.dropShadowX,H=n.dropShadowY,N=X!==0||H!==0;if(N){var U=n.dropShadowColor,L=n.dropShadowAlpha,G=P(U,T*L*n._alphaTL),V=P(U,T*L*n._alphaTR),k=P(U,T*L*n._alphaBL),W=P(U,T*L*n._alphaBR);for(I=0;I<Y.length;I++)B=Y[I],z=B.glyph,!(B.code===32||z.width===0||z.height===0)&&u(g,n,B,z,X,H,p,x,G,V,k,W,1,F,b)}for(I=0;I<Y.length;I++)if(B=Y[I],z=B.glyph,!(B.code===32||z.width===0||z.height===0))if(E[B.i]){var $=E[B.i],K=$.tintEffect,j=P($.tintTL,T*n._alphaTL),Z=P($.tintTR,T*n._alphaTR),J=P($.tintBL,T*n._alphaBL),Q=P($.tintBR,T*n._alphaBR);u(g,n,B,z,0,0,p,x,j,Z,J,Q,K,F,b)}else u(g,n,B,z,0,0,p,x,w,R,A,O,M,F,b);h.pipelines.postBatch(n)}};r.exports=l}),52816:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(92246),m=e(41664),d=e(56694),l=e(64937),h=e(82047),n=e(89980),a=e(71207),c=new d({Extends:n,Mixins:[l.Alpha,l.BlendMode,l.Depth,l.Mask,l.Pipeline,l.PostPipeline,l.ScrollFactor,l.Size,l.Texture,l.Transform,l.Visible,u],initialize:function(v,g,p,x,T){n.call(this,v,"Blitter"),this.setTexture(x,T),this.setPosition(g,p),this.initPipeline(),this.initPostPipeline(),this.children=new a,this.renderList=[],this.dirty=!1},create:function(o,v,g,p,x){p===void 0&&(p=!0),x===void 0&&(x=this.children.length),g===void 0?g=this.frame:g instanceof h||(g=this.texture.get(g));var T=new m(this,o,v,g,p);return this.children.addAt(T,x,!1),this.dirty=!0,T},createFromCallback:function(o,v,g,p){for(var x=this.createMultiple(v,g,p),T=0;T<x.length;T++){var E=x[T];o.call(this,E,T)}return x},createMultiple:function(o,v,g){v===void 0&&(v=this.frame.name),g===void 0&&(g=!0),Array.isArray(v)||(v=[v]);var p=[],x=this;return v.forEach(function(T){for(var E=0;E<o;E++)p.push(x.create(0,0,T,g))}),p},childCanRender:function(o){return o.visible&&o.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});r.exports=c}),33177:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d){var l=u.getRenderList();if(l.length!==0){var h=e.currentContext,n=m.alpha*u.alpha;if(n!==0){m.addToRenderList(u),h.globalCompositeOperation=e.blendModes[u.blendMode],h.imageSmoothingEnabled=!u.frame.source.scaleMode;var a=u.x-m.scrollX*u.scrollFactorX,c=u.y-m.scrollY*u.scrollFactorY;h.save(),d&&d.copyToContext(h);for(var o=m.roundPixels,v=0;v<l.length;v++){var g=l[v],p=g.flipX||g.flipY,x=g.frame,T=x.canvasData,E=x.x,M=x.y,P=1,w=1,R=g.alpha*n;R!==0&&(h.globalAlpha=R,p?(g.flipX&&(P=-1,E-=T.width),g.flipY&&(w=-1,M-=T.height),T.width>0&&T.height>0&&(h.save(),h.translate(g.x+a,g.y+c),h.scale(P,w),h.drawImage(x.source.image,T.x,T.y,T.width,T.height,E,M,T.width,T.height),h.restore())):(o&&(E=Math.round(E),M=Math.round(M)),T.width>0&&T.height>0&&h.drawImage(x.source.image,T.x,T.y,T.width,T.height,E+g.x+a,M+g.y+c,T.width,T.height)))}h.restore()}}};r.exports=y}),68452:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(52816),m=e(88933),d=e(99325),l=e(20494);d.register("blitter",function(h,n){h===void 0&&(h={});var a=l(h,"key",null),c=l(h,"frame",null),o=new u(this.scene,0,0,a,c);return n!==void 0&&(h.add=n),m(this.scene,o,h),o})}),38906:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(52816),m=e(61286);m.register("blitter",function(d,l,h,n){return this.displayList.add(new u(this.scene,d,l,h,n))})}),92246:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),m=u,d=u;m=e(89165),d=e(33177),r.exports={renderWebGL:m,renderCanvas:d}}),89165:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(69360),m=e(75512),d=new u,l=function(h,n,a,c){var o=n.getRenderList(),v=a.alpha*n.alpha;if(!(o.length===0||v===0)){a.addToRenderList(n);var g=h.pipelines.set(this.pipeline,n),p=a.scrollX*n.scrollFactorX,x=a.scrollY*n.scrollFactorY,T=d.copyFrom(a.matrix);c&&(T.multiplyWithOffset(c,-p,-x),p=0,x=0);var E=n.x-p,M=n.y-x,P=-1,w=!1,R=a.roundPixels;h.pipelines.preBatch(n);for(var A=0;A<o.length;A++){var O=o[A],F=O.frame,b=O.alpha*v;if(b!==0){var D=F.width,I=F.height,B=E+O.x+F.x,z=M+O.y+F.y;O.flipX&&(D*=-1,B+=F.width),O.flipY&&(I*=-1,z+=F.height);var Y=T.setQuad(B,z,B+D,z+I,R),X=m.getTintAppendFloatAlpha(O.tint,b);if(F.sourceIndex!==P){var H=g.setGameObject(n,F);P=F.sourceIndex}g.batchQuad(n,Y[0],Y[1],Y[2],Y[3],Y[4],Y[5],Y[6],Y[7],F.u0,F.v0,F.u1,F.v1,X,X,X,X,w,F.glTexture,H)&&(P=-1)}}h.pipelines.postBatch(n)}};r.exports=l}),41664:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(82047),d=new u({initialize:function(h,n,a,c,o){this.parent=h,this.x=n,this.y=a,this.frame=c,this.data={},this.tint=16777215,this._visible=o,this._alpha=1,this.flipX=!1,this.flipY=!1,this.hasTransformComponent=!0},setFrame:function(l){return l===void 0?this.frame=this.parent.frame:l instanceof m&&l.texture===this.parent.texture?this.frame=l:this.frame=this.parent.texture.get(l),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(l,h,n){return this.x=l,this.y=h,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,n&&this.setFrame(n),this},setPosition:function(l,h){return this.x=l,this.y=h,this},setFlipX:function(l){return this.flipX=l,this},setFlipY:function(l){return this.flipY=l,this},setFlip:function(l,h){return this.flipX=l,this.flipY=h,this},setVisible:function(l){return this.visible=l,this},setAlpha:function(l){return this.alpha=l,this},setTint:function(l){return this.tint=l,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(l){this.parent.dirty|=this._visible!==l,this._visible=l}},alpha:{get:function(){return this._alpha},set:function(l){this.parent.dirty|=this._alpha>0!=l>0,this._alpha=l}}});r.exports=d}),97123:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(82897),m=2,d={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(l,h,n,a){return l===void 0&&(l=1),h===void 0?this.alpha=l:(this._alphaTL=u(l,0,1),this._alphaTR=u(h,0,1),this._alphaBL=u(n,0,1),this._alphaBR=u(a,0,1)),this},alpha:{get:function(){return this._alpha},set:function(l){var h=u(l,0,1);this._alpha=h,this._alphaTL=h,this._alphaTR=h,this._alphaBL=h,this._alphaBR=h,h===0?this.renderFlags&=~m:this.renderFlags|=m}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(l){var h=u(l,0,1);this._alphaTL=h,h!==0&&(this.renderFlags|=m)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(l){var h=u(l,0,1);this._alphaTR=h,h!==0&&(this.renderFlags|=m)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(l){var h=u(l,0,1);this._alphaBL=h,h!==0&&(this.renderFlags|=m)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(l){var h=u(l,0,1);this._alphaBR=h,h!==0&&(this.renderFlags|=m)}}};r.exports=d}),15720:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(82897),m=2,d={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(l){return l===void 0&&(l=1),this.alpha=l,this},alpha:{get:function(){return this._alpha},set:function(l){var h=u(l,0,1);this._alpha=h,h===0?this.renderFlags&=~m:this.renderFlags|=m}}};r.exports=d}),69732:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(95723),m={_blendMode:u.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(d){typeof d=="string"&&(d=u[d]),d|=0,d>=-1&&(this._blendMode=d)}},setBlendMode:function(d){return this.blendMode=d,this}};r.exports=m}),28284:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(e){this.scaleX=e/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(e){this.scaleY=e/this.height}},setSize:function(e,u){return this.width=e,this.height=u,this},setDisplaySize:function(e,u){return this.displayWidth=e,this.displayHeight=u,this}};r.exports=y}),85293:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={texture:null,frame:null,isCropped:!1,setCrop:function(e,u,m,d){if(e===void 0)this.isCropped=!1;else if(this.frame){if(typeof e=="number")this.frame.setCropUVs(this._crop,e,u,m,d,this.flipX,this.flipY);else{var l=e;this.frame.setCropUVs(this._crop,l.x,l.y,l.width,l.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};r.exports=y}),14975:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={_depth:0,depth:{get:function(){return this._depth},set:function(e){this.displayList&&this.displayList.queueDepthSort(),this._depth=e}},setDepth:function(e){return e===void 0&&(e=0),this.depth=e,this}};r.exports=y}),88677:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(96910),d=e(72677),l=new u({initialize:function(n,a){this.gameObject=n,this.isPost=a,this.enabled=!1,this.list=[],this.padding=0},setPadding:function(h){return h===void 0&&(h=0),this.padding=h,this.gameObject},onFXCopy:function(){},onFX:function(){},enable:function(h){if(!this.isPost){var n=this.gameObject.scene.sys.renderer;n&&n.pipelines?(this.gameObject.pipeline=n.pipelines.FX_PIPELINE,h!==void 0&&(this.padding=h),this.enabled=!0):this.enabled=!1}},clear:function(){if(this.isPost)this.gameObject.resetPostPipeline(!0);else{for(var h=this.list,n=0;n<h.length;n++)h[n].destroy();this.list=[]}return this.enabled=!1,this.gameObject},remove:function(h){var n;if(this.isPost){var a=this.gameObject.getPostPipeline(String(h.type));for(Array.isArray(a)||(a=[a]),n=0;n<a.length;n++){var c=a[n];if(c.controller===h){this.gameObject.removePostPipeline(c),h.destroy();break}}}else{var o=this.list;for(n=0;n<o.length;n++)o[n]===h&&(d(o,n),h.destroy())}return this.gameObject},disable:function(h){return h===void 0&&(h=!1),this.isPost||this.gameObject.resetPipeline(),this.enabled=!1,h&&this.clear(),this.gameObject},add:function(h,n){if(this.isPost){var a=String(h.type);this.gameObject.setPostPipeline(a,n);var c=this.gameObject.getPostPipeline(a);if(c)return Array.isArray(c)&&(c=c.pop()),c.controller=h,h}else return this.enabled||this.enable(),this.list.push(h),h},addGlow:function(h,n,a,c,o,v){return this.add(new m.Glow(this.gameObject,h,n,a,c),{quality:o,distance:v})},addShadow:function(h,n,a,c,o,v,g){return this.add(new m.Shadow(this.gameObject,h,n,a,c,o,v,g))},addPixelate:function(h){return this.add(new m.Pixelate(this.gameObject,h))},addVignette:function(h,n,a,c){return this.add(new m.Vignette(this.gameObject,h,n,a,c))},addShine:function(h,n,a,c){return this.add(new m.Shine(this.gameObject,h,n,a,c))},addBlur:function(h,n,a,c,o,v){return this.add(new m.Blur(this.gameObject,h,n,a,c,o,v))},addGradient:function(h,n,a,c,o,v,g,p){return this.add(new m.Gradient(this.gameObject,h,n,a,c,o,v,g,p))},addBloom:function(h,n,a,c,o,v){return this.add(new m.Bloom(this.gameObject,h,n,a,c,o,v))},addColorMatrix:function(){return this.add(new m.ColorMatrix(this.gameObject))},addCircle:function(h,n,a,c,o){return this.add(new m.Circle(this.gameObject,h,n,a,c,o))},addBarrel:function(h){return this.add(new m.Barrel(this.gameObject,h))},addDisplacement:function(h,n,a){return this.add(new m.Displacement(this.gameObject,h,n,a))},addWipe:function(h,n,a){return this.add(new m.Wipe(this.gameObject,h,n,a))},addReveal:function(h,n,a){return this.add(new m.Wipe(this.gameObject,h,n,a,!0))},addBokeh:function(h,n,a){return this.add(new m.Bokeh(this.gameObject,h,n,a))},addTiltShift:function(h,n,a,c,o,v){return this.add(new m.Bokeh(this.gameObject,h,n,a,!0,c,o,v))},destroy:function(){this.clear(),this.gameObject=null}});r.exports=l}),92972:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(e){return this.flipX=e,this},setFlipY:function(e){return this.flipY=e,this},setFlip:function(e,u){return this.flipX=e,this.flipY=u,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};r.exports=y}),80693:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(74118),m=e(2386),d=e(93736),l={prepareBoundsOutput:function(h,n){if(n===void 0&&(n=!1),this.rotation!==0&&m(h,this.x,this.y,this.rotation),n&&this.parentContainer){var a=this.parentContainer.getBoundsTransformMatrix();a.transformPoint(h.x,h.y,h)}return h},getCenter:function(h,n){return h===void 0&&(h=new d),h.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,h.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(h,n)},getTopLeft:function(h,n){return h||(h=new d),h.x=this.x-this.displayWidth*this.originX,h.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(h,n)},getTopCenter:function(h,n){return h||(h=new d),h.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,h.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(h,n)},getTopRight:function(h,n){return h||(h=new d),h.x=this.x-this.displayWidth*this.originX+this.displayWidth,h.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(h,n)},getLeftCenter:function(h,n){return h||(h=new d),h.x=this.x-this.displayWidth*this.originX,h.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(h,n)},getRightCenter:function(h,n){return h||(h=new d),h.x=this.x-this.displayWidth*this.originX+this.displayWidth,h.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(h,n)},getBottomLeft:function(h,n){return h||(h=new d),h.x=this.x-this.displayWidth*this.originX,h.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(h,n)},getBottomCenter:function(h,n){return h||(h=new d),h.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,h.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(h,n)},getBottomRight:function(h,n){return h||(h=new d),h.x=this.x-this.displayWidth*this.originX+this.displayWidth,h.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(h,n)},getBounds:function(h){h===void 0&&(h=new u);var n,a,c,o,v,g,p,x;if(this.parentContainer){var T=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(h),T.transformPoint(h.x,h.y,h),n=h.x,a=h.y,this.getTopRight(h),T.transformPoint(h.x,h.y,h),c=h.x,o=h.y,this.getBottomLeft(h),T.transformPoint(h.x,h.y,h),v=h.x,g=h.y,this.getBottomRight(h),T.transformPoint(h.x,h.y,h),p=h.x,x=h.y}else this.getTopLeft(h),n=h.x,a=h.y,this.getTopRight(h),c=h.x,o=h.y,this.getBottomLeft(h),v=h.x,g=h.y,this.getBottomRight(h),p=h.x,x=h.y;return h.x=Math.min(n,c,v,p),h.y=Math.min(a,o,g,x),h.width=Math.max(n,c,v,p)-h.x,h.height=Math.max(a,o,g,x)-h.y,h}};r.exports=l}),39171:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(76756),m=e(63037),d={mask:null,setMask:function(l){return this.mask=l,this},clearMask:function(l){return l===void 0&&(l=!1),l&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(l,h,n,a,c){return l===void 0&&(this.texture||this.shader||this.geom)&&(l=this),new u(this.scene,l,h,n,a,c)},createGeometryMask:function(l){return l===void 0&&(this.type==="Graphics"||this.geom)&&(l=this),new m(this.scene,l)}};r.exports=d}),28072:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(e){this._displayOriginX=e,this.originX=e/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(e){this._displayOriginY=e,this.originY=e/this.height}},setOrigin:function(e,u){return e===void 0&&(e=.5),u===void 0&&(u=e),this.originX=e,this.originY=u,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(e,u){return e===void 0&&(e=0),u===void 0&&(u=e),this.displayOriginX=e,this.displayOriginY=u,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};r.exports=y}),54211:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(75606),m=e(63130),d=e(10850),l=e(55303),h=e(93736),n={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:l.PLAYING_FORWARD,setPath:function(a,c){c===void 0&&(c=this.pathConfig);var o=this.pathTween;return o&&o.isPlaying()&&o.stop(),this.path=a,c&&this.startFollow(c),this},setRotateToPath:function(a,c){return c===void 0&&(c=0),this.rotateToPath=a,this.pathRotationOffset=c,this},isFollowing:function(){var a=this.pathTween;return a&&a.isPlaying()},startFollow:function(a,c){a===void 0&&(a={}),c===void 0&&(c=0);var o=this.pathTween;o&&o.isPlaying()&&o.stop(),typeof a=="number"&&(a={duration:a}),a.from=d(a,"from",0),a.to=d(a,"to",1);var v=m(a,"positionOnPath",!1);this.rotateToPath=m(a,"rotateToPath",!1),this.pathRotationOffset=d(a,"rotationOffset",0);var g=d(a,"startAt",c);if(g&&(a.onStart=function(x){var T=x.data[0];T.progress=g,T.elapsed=T.duration*g;var E=T.ease(T.progress);T.current=T.start+(T.end-T.start)*E,T.setTargetValue()}),this.pathOffset||(this.pathOffset=new h(this.x,this.y)),this.pathVector||(this.pathVector=new h),this.pathDelta||(this.pathDelta=new h),this.pathDelta.reset(),a.persist=!0,this.pathTween=this.scene.sys.tweens.addCounter(a),this.path.getStartPoint(this.pathOffset),v&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=l.PLAYING_FORWARD,this.rotateToPath){var p=this.path.getPoint(.1);this.rotation=Math.atan2(p.y-this.y,p.x-this.x)+u(this.pathRotationOffset)}return this.pathConfig=a,this},pauseFollow:function(){var a=this.pathTween;return a&&a.isPlaying()&&a.pause(),this},resumeFollow:function(){var a=this.pathTween;return a&&a.isPaused()&&a.resume(),this},stopFollow:function(){var a=this.pathTween;return a&&a.isPlaying()&&a.stop(),this},pathUpdate:function(){var a=this.pathTween;if(a){var c=a.data[0],o=this.pathDelta,v=this.pathVector;if(o.copy(v).negate(),c.state===l.COMPLETE){this.path.getPoint(c.end,v),o.add(v),v.add(this.pathOffset),this.setPosition(v.x,v.y);return}else if(c.state!==l.PLAYING_FORWARD&&c.state!==l.PLAYING_BACKWARD)return;this.path.getPoint(a.getValue(),v),o.add(v),v.add(this.pathOffset);var g=this.x,p=this.y;this.setPosition(v.x,v.y);var x=this.x-g,T=this.y-p;if(x===0&&T===0)return;if(c.state!==this._prevDirection){this._prevDirection=c.state;return}this.rotateToPath&&(this.rotation=Math.atan2(T,x)+u(this.pathRotationOffset))}}};r.exports=n}),58210:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(28699),m={defaultPipeline:null,pipeline:null,pipelineData:null,initPipeline:function(d){this.pipelineData={};var l=this.scene.sys.renderer;if(!l)return!1;var h=l.pipelines;if(h){d===void 0&&(d=h.default);var n=h.get(d);if(n)return this.defaultPipeline=n,this.pipeline=n,!0}return!1},setPipeline:function(d,l,h){var n=this.scene.sys.renderer;if(!n)return this;var a=n.pipelines;if(a){var c=a.get(d);c&&(this.pipeline=c),l&&(this.pipelineData=h?u(l):l)}return this},setPipelineData:function(d,l){var h=this.pipelineData;return l===void 0?delete h[d]:h[d]=l,this},resetPipeline:function(d){return d===void 0&&(d=!1),this.pipeline=this.defaultPipeline,d&&(this.pipelineData={}),this.pipeline!==null},getPipelineName:function(){return this.pipeline.name}};r.exports=m}),44086:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(28699),m=e(88677),d=e(72677),l={hasPostPipeline:!1,postPipelines:null,postPipelineData:null,preFX:null,postFX:null,initPostPipeline:function(h){this.postPipelines=[],this.postPipelineData={},this.postFX=new m(this,!0),h&&(this.preFX=new m(this,!1))},setPostPipeline:function(h,n,a){var c=this.scene.sys.renderer;if(!c)return this;var o=c.pipelines;if(o){Array.isArray(h)||(h=[h]);for(var v=0;v<h.length;v++){var g=o.getPostPipeline(h[v],this,n);g&&this.postPipelines.push(g)}n&&(this.postPipelineData=a?u(n):n)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPostPipelineData:function(h,n){var a=this.postPipelineData;return n===void 0?delete a[h]:a[h]=n,this},getPostPipeline:function(h){for(var n=typeof h=="string",a=this.postPipelines,c=[],o=0;o<a.length;o++){var v=a[o];(n&&v.name===h||!n&&v instanceof h)&&c.push(v)}return c.length===1?c[0]:c},resetPostPipeline:function(h){h===void 0&&(h=!1);for(var n=this.postPipelines,a=0;a<n.length;a++)n[a].destroy();this.postPipelines=[],this.hasPostPipeline=!1,h&&(this.postPipelineData={})},removePostPipeline:function(h){for(var n=typeof h=="string",a=this.postPipelines,c=a.length-1;c>=0;c--){var o=a[c];(n&&o.name===h||!n&&o===h)&&(o.destroy(),d(a,c))}return this.hasPostPipeline=this.postPipelines.length>0,this},clearFX:function(){return this.preFX&&this.preFX.clear(),this.postFX&&this.postFX.clear(),this}};r.exports=l}),45900:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(e,u){return u===void 0&&(u=e),this.scrollFactorX=e,this.scrollFactorY=u,this}};r.exports=y}),31654:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(e){this.scaleX=e/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(e){this.scaleY=e/this.frame.realHeight}},setSizeToFrame:function(e){e||(e=this.frame),this.width=e.realWidth,this.height=e.realHeight;var u=this.input;return u&&!u.customHitArea&&(u.hitArea.width=this.width,u.hitArea.height=this.height),this},setSize:function(e,u){return this.width=e,this.height=u,this},setDisplaySize:function(e,u){return this.displayWidth=e,this.displayHeight=u,this}};r.exports=y}),82081:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(82047),m=8,d={texture:null,frame:null,isCropped:!1,setTexture:function(l,h){return this.texture=this.scene.sys.textures.get(l),this.setFrame(h)},setFrame:function(l,h,n){return h===void 0&&(h=!0),n===void 0&&(n=!0),l instanceof u?(this.texture=this.scene.sys.textures.get(l.texture.key),this.frame=l):this.frame=this.texture.get(l),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~m:this.renderFlags|=m,this._sizeComponent&&h&&this.setSizeToFrame(),this._originComponent&&n&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};r.exports=d}),21850:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(82047),m=8,d={texture:null,frame:null,isCropped:!1,setCrop:function(l,h,n,a){if(l===void 0)this.isCropped=!1;else if(this.frame){if(typeof l=="number")this.frame.setCropUVs(this._crop,l,h,n,a,this.flipX,this.flipY);else{var c=l;this.frame.setCropUVs(this._crop,c.x,c.y,c.width,c.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(l,h){return this.texture=this.scene.sys.textures.get(l),this.setFrame(h)},setFrame:function(l,h,n){return h===void 0&&(h=!0),n===void 0&&(n=!0),l instanceof u?(this.texture=this.scene.sys.textures.get(l.texture.key),this.frame=l):this.frame=this.texture.get(l),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~m:this.renderFlags|=m,this._sizeComponent&&h&&this.setSizeToFrame(),this._originComponent&&n&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};r.exports=d}),58072:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(e,u,m,d){return e===void 0&&(e=16777215),u===void 0&&(u=e,m=e,d=e),this.tintTopLeft=e,this.tintTopRight=u,this.tintBottomLeft=m,this.tintBottomRight=d,this.tintFill=!1,this},setTintFill:function(e,u,m,d){return this.setTint(e,u,m,d),this.tintFill=!0,this},tint:{set:function(e){this.setTint(e,e,e,e)}},isTinted:{get:function(){var e=16777215;return this.tintFill||this.tintTopLeft!==e||this.tintTopRight!==e||this.tintBottomLeft!==e||this.tintBottomRight!==e}}};r.exports=y}),48129:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){var u={name:e.name,type:e.type,x:e.x,y:e.y,depth:e.depth,scale:{x:e.scaleX,y:e.scaleY},origin:{x:e.originX,y:e.originY},flipX:e.flipX,flipY:e.flipY,rotation:e.rotation,alpha:e.alpha,visible:e.visible,blendMode:e.blendMode,textureKey:"",frameKey:"",data:{}};return e.texture&&(u.textureKey=e.texture.key,u.frameKey=e.frame.name),u};r.exports=y}),56584:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(83392),m=e(69360),d=e(64462),l=e(35786),h=e(62138),n=e(93736),a=4,c={hasTransformComponent:!0,_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(o){this._scaleX=o,this._scaleY=o,o===0?this.renderFlags&=~a:this.renderFlags|=a}},scaleX:{get:function(){return this._scaleX},set:function(o){this._scaleX=o,o===0?this.renderFlags&=~a:this._scaleY!==0&&(this.renderFlags|=a)}},scaleY:{get:function(){return this._scaleY},set:function(o){this._scaleY=o,o===0?this.renderFlags&=~a:this._scaleX!==0&&(this.renderFlags|=a)}},angle:{get:function(){return h(this._rotation*u.RAD_TO_DEG)},set:function(o){this.rotation=h(o)*u.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(o){this._rotation=l(o)}},setPosition:function(o,v,g,p){return o===void 0&&(o=0),v===void 0&&(v=o),g===void 0&&(g=0),p===void 0&&(p=0),this.x=o,this.y=v,this.z=g,this.w=p,this},copyPosition:function(o){return o.x!==void 0&&(this.x=o.x),o.y!==void 0&&(this.y=o.y),o.z!==void 0&&(this.z=o.z),o.w!==void 0&&(this.w=o.w),this},setRandomPosition:function(o,v,g,p){return o===void 0&&(o=0),v===void 0&&(v=0),g===void 0&&(g=this.scene.sys.scale.width),p===void 0&&(p=this.scene.sys.scale.height),this.x=o+Math.random()*g,this.y=v+Math.random()*p,this},setRotation:function(o){return o===void 0&&(o=0),this.rotation=o,this},setAngle:function(o){return o===void 0&&(o=0),this.angle=o,this},setScale:function(o,v){return o===void 0&&(o=1),v===void 0&&(v=o),this.scaleX=o,this.scaleY=v,this},setX:function(o){return o===void 0&&(o=0),this.x=o,this},setY:function(o){return o===void 0&&(o=0),this.y=o,this},setZ:function(o){return o===void 0&&(o=0),this.z=o,this},setW:function(o){return o===void 0&&(o=0),this.w=o,this},getLocalTransformMatrix:function(o){return o===void 0&&(o=new m),o.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(o,v){o===void 0&&(o=new m);var g=this.parentContainer;if(!g)return this.getLocalTransformMatrix(o);for(v||(v=new m),o.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);g;)v.applyITRS(g.x,g.y,g._rotation,g._scaleX,g._scaleY),v.multiply(o,o),g=g.parentContainer;return o},getLocalPoint:function(o,v,g,p){g||(g=new n),p||(p=this.scene.sys.cameras.main);var x=p.scrollX,T=p.scrollY,E=o+x*this.scrollFactorX-x,M=v+T*this.scrollFactorY-T;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(E,M,g):d(E,M,this.x,this.y,this.rotation,this.scaleX,this.scaleY,g),this._originComponent&&(g.x+=this._displayOriginX,g.y+=this._displayOriginY),g},getParentRotation:function(){for(var o=0,v=this.parentContainer;v;)o+=v.rotation,v=v.parentContainer;return o}};r.exports=c}),69360:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(83392),d=e(93736),l=new u({initialize:function(n,a,c,o,v,g){n===void 0&&(n=1),a===void 0&&(a=0),c===void 0&&(c=0),o===void 0&&(o=1),v===void 0&&(v=0),g===void 0&&(g=0),this.matrix=new Float32Array([n,a,c,o,v,g,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0},this.quad=new Float32Array(8)},a:{get:function(){return this.matrix[0]},set:function(h){this.matrix[0]=h}},b:{get:function(){return this.matrix[1]},set:function(h){this.matrix[1]=h}},c:{get:function(){return this.matrix[2]},set:function(h){this.matrix[2]=h}},d:{get:function(){return this.matrix[3]},set:function(h){this.matrix[3]=h}},e:{get:function(){return this.matrix[4]},set:function(h){this.matrix[4]=h}},f:{get:function(){return this.matrix[5]},set:function(h){this.matrix[5]=h}},tx:{get:function(){return this.matrix[4]},set:function(h){this.matrix[4]=h}},ty:{get:function(){return this.matrix[5]},set:function(h){this.matrix[5]=h}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var h=this.matrix,n=h[0],a=h[1],c=h[2],o=h[3];return n||a?a>0?Math.acos(n/this.scaleX):-Math.acos(n/this.scaleX):c||o?m.TAU-(o>0?Math.acos(-c/this.scaleY):-Math.acos(c/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var h=this.matrix;return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h[4]=0,h[5]=0,this},translate:function(h,n){var a=this.matrix;return a[4]=a[0]*h+a[2]*n+a[4],a[5]=a[1]*h+a[3]*n+a[5],this},scale:function(h,n){var a=this.matrix;return a[0]*=h,a[1]*=h,a[2]*=n,a[3]*=n,this},rotate:function(h){var n=Math.sin(h),a=Math.cos(h),c=this.matrix,o=c[0],v=c[1],g=c[2],p=c[3];return c[0]=o*a+g*n,c[1]=v*a+p*n,c[2]=o*-n+g*a,c[3]=v*-n+p*a,this},multiply:function(h,n){var a=this.matrix,c=h.matrix,o=a[0],v=a[1],g=a[2],p=a[3],x=a[4],T=a[5],E=c[0],M=c[1],P=c[2],w=c[3],R=c[4],A=c[5],O=n===void 0?a:n.matrix;return O[0]=E*o+M*g,O[1]=E*v+M*p,O[2]=P*o+w*g,O[3]=P*v+w*p,O[4]=R*o+A*g+x,O[5]=R*v+A*p+T,O},multiplyWithOffset:function(h,n,a){var c=this.matrix,o=h.matrix,v=c[0],g=c[1],p=c[2],x=c[3],T=c[4],E=c[5],M=n*v+a*p+T,P=n*g+a*x+E,w=o[0],R=o[1],A=o[2],O=o[3],F=o[4],b=o[5];return c[0]=w*v+R*p,c[1]=w*g+R*x,c[2]=A*v+O*p,c[3]=A*g+O*x,c[4]=F*v+b*p+M,c[5]=F*g+b*x+P,this},transform:function(h,n,a,c,o,v){var g=this.matrix,p=g[0],x=g[1],T=g[2],E=g[3],M=g[4],P=g[5];return g[0]=h*p+n*T,g[1]=h*x+n*E,g[2]=a*p+c*T,g[3]=a*x+c*E,g[4]=o*p+v*T+M,g[5]=o*x+v*E+P,this},transformPoint:function(h,n,a){a===void 0&&(a={x:0,y:0});var c=this.matrix,o=c[0],v=c[1],g=c[2],p=c[3],x=c[4],T=c[5];return a.x=h*o+n*g+x,a.y=h*v+n*p+T,a},invert:function(){var h=this.matrix,n=h[0],a=h[1],c=h[2],o=h[3],v=h[4],g=h[5],p=n*o-a*c;return h[0]=o/p,h[1]=-a/p,h[2]=-c/p,h[3]=n/p,h[4]=(c*g-o*v)/p,h[5]=-(n*g-a*v)/p,this},copyFrom:function(h){var n=this.matrix;return n[0]=h.a,n[1]=h.b,n[2]=h.c,n[3]=h.d,n[4]=h.e,n[5]=h.f,this},copyFromArray:function(h){var n=this.matrix;return n[0]=h[0],n[1]=h[1],n[2]=h[2],n[3]=h[3],n[4]=h[4],n[5]=h[5],this},copyToContext:function(h){var n=this.matrix;return h.transform(n[0],n[1],n[2],n[3],n[4],n[5]),h},setToContext:function(h){var n=this.matrix;return h.setTransform(n[0],n[1],n[2],n[3],n[4],n[5]),h},copyToArray:function(h){var n=this.matrix;return h===void 0?h=[n[0],n[1],n[2],n[3],n[4],n[5]]:(h[0]=n[0],h[1]=n[1],h[2]=n[2],h[3]=n[3],h[4]=n[4],h[5]=n[5]),h},setTransform:function(h,n,a,c,o,v){var g=this.matrix;return g[0]=h,g[1]=n,g[2]=a,g[3]=c,g[4]=o,g[5]=v,this},decomposeMatrix:function(){var h=this.decomposedMatrix,n=this.matrix,a=n[0],c=n[1],o=n[2],v=n[3],g=a*v-c*o;if(h.translateX=n[4],h.translateY=n[5],a||c){var p=Math.sqrt(a*a+c*c);h.rotation=c>0?Math.acos(a/p):-Math.acos(a/p),h.scaleX=p,h.scaleY=g/p}else if(o||v){var x=Math.sqrt(o*o+v*v);h.rotation=Math.PI*.5-(v>0?Math.acos(-o/x):-Math.acos(o/x)),h.scaleX=g/x,h.scaleY=x}else h.rotation=0,h.scaleX=0,h.scaleY=0;return h},applyITRS:function(h,n,a,c,o){var v=this.matrix,g=Math.sin(a),p=Math.cos(a);return v[4]=h,v[5]=n,v[0]=p*c,v[1]=g*c,v[2]=-g*o,v[3]=p*o,this},applyInverse:function(h,n,a){a===void 0&&(a=new d);var c=this.matrix,o=c[0],v=c[1],g=c[2],p=c[3],x=c[4],T=c[5],E=1/(o*p+g*-v);return a.x=p*E*h+-g*E*n+(T*g-x*p)*E,a.y=o*E*n+-v*E*h+(-T*o+x*v)*E,a},setQuad:function(h,n,a,c,o,v){v===void 0&&(v=this.quad);var g=this.matrix,p=g[0],x=g[1],T=g[2],E=g[3],M=g[4],P=g[5];return v[0]=h*p+n*T+M,v[1]=h*x+n*E+P,v[2]=h*p+c*T+M,v[3]=h*x+c*E+P,v[4]=a*p+c*T+M,v[5]=a*x+c*E+P,v[6]=a*p+n*T+M,v[7]=a*x+n*E+P,o&&v.forEach(function(w,R){v[R]=Math.round(w)}),v},getX:function(h,n){return h*this.a+n*this.c+this.e},getY:function(h,n){return h*this.b+n*this.d+this.f},getXRound:function(h,n,a){var c=this.getX(h,n);return a&&(c=Math.round(c)),c},getYRound:function(h,n,a){var c=this.getY(h,n);return a&&(c=Math.round(c)),c},getCSSMatrix:function(){var h=this.matrix;return"matrix("+h[0]+","+h[1]+","+h[2]+","+h[3]+","+h[4]+","+h[5]+")"},destroy:function(){this.matrix=null,this.quad=null,this.decomposedMatrix=null}});r.exports=l}),59694:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=1,e={_visible:!0,visible:{get:function(){return this._visible},set:function(u){u?(this._visible=!0,this.renderFlags|=y):(this._visible=!1,this.renderFlags&=~y)}},setVisible:function(u){return this.visible=u,this}};r.exports=e}),64937:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Alpha:e(97123),AlphaSingle:e(15720),BlendMode:e(69732),ComputedSize:e(28284),Crop:e(85293),Depth:e(14975),Flip:e(92972),FX:e(88677),GetBounds:e(80693),Mask:e(39171),Origin:e(28072),PathFollower:e(54211),Pipeline:e(58210),PostPipeline:e(44086),ScrollFactor:e(45900),Size:e(31654),Texture:e(82081),TextureCrop:e(21850),Tint:e(58072),ToJSON:e(48129),Transform:e(56584),TransformMatrix:e(69360),Visible:e(59694)}}),70339:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(59959),m=e(95723),d=e(56694),l=e(64937),h=e(56631),n=e(89980),a=e(74118),c=e(98524),o=e(58795),v=e(93736),g=new d({Extends:n,Mixins:[l.AlphaSingle,l.BlendMode,l.ComputedSize,l.Depth,l.Mask,l.PostPipeline,l.Transform,l.Visible,c],initialize:function(x,T,E,M){n.call(this,x,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new l.TransformMatrix,this.tempTransformMatrix=new l.TransformMatrix,this._sortKey="",this._sysEvents=x.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPostPipeline(),this.setPosition(T,E),this.setBlendMode(m.SKIP_CHECK),M&&this.add(M)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(p){return p===void 0&&(p=!0),this.exclusive=p,this},getBounds:function(p){if(p===void 0&&(p=new a),p.setTo(this.x,this.y,0,0),this.parentContainer){var x=this.parentContainer.getBoundsTransformMatrix(),T=x.transformPoint(this.x,this.y);p.setTo(T.x,T.y,0,0)}if(this.list.length>0){var E=this.list,M=new a,P=!1;p.setEmpty();for(var w=0;w<E.length;w++){var R=E[w];R.getBounds&&(R.getBounds(M),P?o(M,p,p):(p.setTo(M.x,M.y,M.width,M.height),P=!0))}}return p},addHandler:function(p){p.once(h.DESTROY,this.remove,this),this.exclusive&&(p.parentContainer&&p.parentContainer.remove(p),p.parentContainer=this,p.removeFromDisplayList(),p.addedToScene())},removeHandler:function(p){p.off(h.DESTROY,this.remove,this),this.exclusive&&(p.parentContainer=null,p.removedFromScene(),p.addToDisplayList())},pointToContainer:function(p,x){x===void 0&&(x=new v),this.parentContainer?this.parentContainer.pointToContainer(p,x):(x.x=p.x,x.y=p.y);var T=this.tempTransformMatrix;return T.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),T.invert(),T.transformPoint(p.x,p.y,x),x},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(p){return u.Add(this.list,p,this.maxSize,this.addHandler,this),this},addAt:function(p,x){return u.AddAt(this.list,p,x,this.maxSize,this.addHandler,this),this},getAt:function(p){return this.list[p]},getIndex:function(p){return this.list.indexOf(p)},sort:function(p,x){return p?(x===void 0&&(x=function(T,E){return T[p]-E[p]}),u.StableSort(this.list,x),this):this},getByName:function(p){return u.GetFirst(this.list,"name",p)},getRandom:function(p,x){return u.GetRandom(this.list,p,x)},getFirst:function(p,x,T,E){return u.GetFirst(this.list,p,x,T,E)},getAll:function(p,x,T,E){return u.GetAll(this.list,p,x,T,E)},count:function(p,x,T,E){return u.CountAllMatching(this.list,p,x,T,E)},swap:function(p,x){return u.Swap(this.list,p,x),this},moveTo:function(p,x){return u.MoveTo(this.list,p,x),this},moveAbove:function(p,x){return u.MoveAbove(this.list,p,x),this},moveBelow:function(p,x){return u.MoveBelow(this.list,p,x),this},remove:function(p,x){var T=u.Remove(this.list,p,this.removeHandler,this);if(x&&T){Array.isArray(T)||(T=[T]);for(var E=0;E<T.length;E++)T[E].destroy()}return this},removeAt:function(p,x){var T=u.RemoveAt(this.list,p,this.removeHandler,this);return x&&T&&T.destroy(),this},removeBetween:function(p,x,T){var E=u.RemoveBetween(this.list,p,x,this.removeHandler,this);if(T)for(var M=0;M<E.length;M++)E[M].destroy();return this},removeAll:function(p){var x=this.list;if(p){for(var T=0;T<x.length;T++)x[T]&&x[T].scene&&(x[T].off(h.DESTROY,this.remove,this),x[T].destroy());this.list=[]}else u.RemoveBetween(x,0,x.length,this.removeHandler,this);return this},bringToTop:function(p){return u.BringToTop(this.list,p),this},sendToBack:function(p){return u.SendToBack(this.list,p),this},moveUp:function(p){return u.MoveUp(this.list,p),this},moveDown:function(p){return u.MoveDown(this.list,p),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return u.Shuffle(this.list),this},replace:function(p,x,T){var E=u.Replace(this.list,p,x);return E&&(this.addHandler(x),this.removeHandler(p),T&&p.destroy()),this},exists:function(p){return this.list.indexOf(p)>-1},setAll:function(p,x,T,E){return u.SetAll(this.list,p,x,T,E),this},each:function(p,x){var T=[null],E,M=this.list.slice(),P=M.length;for(E=2;E<arguments.length;E++)T.push(arguments[E]);for(E=0;E<P;E++)T[0]=M[E],p.apply(x,T);return this},iterate:function(p,x){var T=[null],E;for(E=2;E<arguments.length;E++)T.push(arguments[E]);for(E=0;E<this.list.length;E++)T[0]=this.list[E],p.apply(x,T);return this},setScrollFactor:function(p,x,T){return x===void 0&&(x=p),T===void 0&&(T=!1),this.scrollFactorX=p,this.scrollFactorY=x,T&&(u.SetAll(this.list,"scrollFactorX",p),u.SetAll(this.list,"scrollFactorY",x)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});r.exports=g}),13916:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d){m.addToRenderList(u);var l=u.list;if(l.length!==0){var h=u.localTransform;d?(h.loadIdentity(),h.multiply(d),h.translate(u.x,u.y),h.rotate(u.rotation),h.scale(u.scaleX,u.scaleY)):h.applyITRS(u.x,u.y,u.rotation,u.scaleX,u.scaleY);var n=u.blendMode!==-1;n||e.setBlendMode(0);var a=u._alpha,c=u.scrollFactorX,o=u.scrollFactorY;u.mask&&u.mask.preRenderCanvas(e,null,m);for(var v=0;v<l.length;v++){var g=l[v];if(g.willRender(m)){var p=g.alpha,x=g.scrollFactorX,T=g.scrollFactorY;!n&&g.blendMode!==e.currentBlendMode&&e.setBlendMode(g.blendMode),g.setScrollFactor(x*c,T*o),g.setAlpha(p*a),g.renderCanvas(e,g,m,h),g.setAlpha(p),g.setScrollFactor(x,T)}}u.mask&&u.mask.postRenderCanvas(e)}};r.exports=y}),44516:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(88933),m=e(70339),d=e(99325),l=e(20494);d.register("container",function(h,n){h===void 0&&(h={});var a=l(h,"x",0),c=l(h,"y",0),o=l(h,"children",null),v=new m(this.scene,a,c,o);return n!==void 0&&(h.add=n),u(this.scene,v,h),v})}),23400:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(70339),m=e(61286);m.register("container",function(d,l,h){return this.displayList.add(new u(this.scene,d,l,h))})}),98524:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),m=u,d=u;m=e(36934),d=e(13916),r.exports={renderWebGL:m,renderCanvas:d}}),36934:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d){m.addToRenderList(u);var l=u.list,h=l.length;if(h!==0){var n=u.localTransform;d?(n.loadIdentity(),n.multiply(d),n.translate(u.x,u.y),n.rotate(u.rotation),n.scale(u.scaleX,u.scaleY)):n.applyITRS(u.x,u.y,u.rotation,u.scaleX,u.scaleY),e.pipelines.preBatch(u);var a=u.blendMode!==-1;a||e.setBlendMode(0);for(var c=u.alpha,o=u.scrollFactorX,v=u.scrollFactorY,g=0;g<h;g++){var p=l[g];if(p.willRender(m)){var x,T,E,M;if(p.alphaTopLeft!==void 0)x=p.alphaTopLeft,T=p.alphaTopRight,E=p.alphaBottomLeft,M=p.alphaBottomRight;else{var P=p.alpha;x=P,T=P,E=P,M=P}var w=p.scrollFactorX,R=p.scrollFactorY;!a&&p.blendMode!==e.currentBlendMode&&e.setBlendMode(p.blendMode);var A=p.mask;A&&A.preRenderWebGL(e,p,m);var O=p.type;O!==e.currentType&&(e.newType=!0,e.currentType=O),e.nextTypeMatch=g<h-1?l[g+1].type===e.currentType:!1,p.setScrollFactor(w*o,R*v),p.setAlpha(x*c,T*c,E*c,M*c),p.renderWebGL(e,p,m,n,u),p.setAlpha(x,T,E,M),p.setScrollFactor(w,R),A&&A.postRenderWebGL(e,m),e.newType=!1}}e.pipelines.postBatch(u)}};r.exports=y}),2452:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}),38943:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(64937),d=e(11603),l=e(89980),h=e(42911),n=e(55638),a=e(7599),c=e(51729),o=new u({Extends:l,Mixins:[m.AlphaSingle,m.BlendMode,m.Depth,m.Origin,m.ScrollFactor,m.Transform,m.Visible,d],initialize:function(g,p,x,T,E,M){l.call(this,g,"DOMElement"),this.parent=g.sys.game.domContainer,this.cache=g.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new c,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(p,x),typeof T=="string"?T[0]==="#"?this.setElement(T.substr(1),E,M):this.createElement(T,E,M):T&&this.setElement(T,E,M),g.sys.events.on(a.SLEEP,this.handleSceneEvent,this),g.sys.events.on(a.WAKE,this.handleSceneEvent,this),g.sys.events.on(a.PRE_RENDER,this.preRender,this)},handleSceneEvent:function(v){var g=this.node,p=g.style;g&&(p.display=v.settings.visible?"block":"none")},setSkew:function(v,g){return v===void 0&&(v=0),g===void 0&&(g=v),this.skewX=v,this.skewY=g,this},setPerspective:function(v){return this.parent.style.perspective=v+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(v){this.parent.style.perspective=v+"px"}},addListener:function(v){if(this.node){v=v.split(" ");for(var g=0;g<v.length;g++)this.node.addEventListener(v[g],this.handler,!1)}return this},removeListener:function(v){if(this.node){v=v.split(" ");for(var g=0;g<v.length;g++)this.node.removeEventListener(v[g],this.handler)}return this},dispatchNativeEvent:function(v){this.emit(v.type,v)},createElement:function(v,g,p){return this.setElement(document.createElement(v),g,p)},setElement:function(v,g,p){this.removeElement();var x;if(typeof v=="string"?(v[0]==="#"&&(v=v.substr(1)),x=document.getElementById(v)):typeof v=="object"&&v.nodeType===1&&(x=v),!x)return this;if(this.node=x,g&&h(g))for(var T in g)x.style[T]=g[T];else typeof g=="string"&&(x.style=g);return x.style.zIndex="0",x.style.display="inline",x.style.position="absolute",x.phaser=this,this.parent&&this.parent.appendChild(x),p&&(x.innerText=p),this.updateSize()},createFromCache:function(v,g){var p=this.cache.get(v);return p&&this.createFromHTML(p,g),this},createFromHTML:function(v,g){g===void 0&&(g="div"),this.removeElement();var p=document.createElement(g);return this.node=p,p.style.zIndex="0",p.style.display="inline",p.style.position="absolute",p.phaser=this,this.parent&&this.parent.appendChild(p),p.innerHTML=v,this.updateSize()},removeElement:function(){return this.node&&(n(this.node),this.node=null),this},updateSize:function(){var v=this.node,g=v.getBoundingClientRect();return this.width=v.clientWidth,this.height=v.clientHeight,this.displayWidth=g.width||0,this.displayHeight=g.height||0,this},getChildByProperty:function(v,g){if(this.node){for(var p=this.node.querySelectorAll("*"),x=0;x<p.length;x++)if(p[x][v]===g)return p[x]}return null},getChildByID:function(v){return this.getChildByProperty("id",v)},getChildByName:function(v){return this.getChildByProperty("name",v)},setClassName:function(v){return this.node&&(this.node.className=v,this.updateSize()),this},setText:function(v){return this.node&&(this.node.innerText=v,this.updateSize()),this},setHTML:function(v){return this.node&&(this.node.innerHTML=v,this.updateSize()),this},preRender:function(){var v=this.parentContainer,g=this.node;g&&v&&!v.willRender()&&(g.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(a.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(a.WAKE,this.handleSceneEvent,this),this.scene.sys.events.off(a.PRE_RENDER,this.preRender,this)}});r.exports=o}),66070:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(2452),m=e(89980),d=e(69360),l=new d,h=new d,n=new d,a=function(c,o,v,g){if(o.node){var p=o.node.style,x=o.scene.sys.settings;if(!p||!x.visible||m.RENDER_MASK!==o.renderFlags||o.cameraFilter!==0&&o.cameraFilter&v.id||o.parentContainer&&!o.parentContainer.willRender()){p.display="none";return}var T=o.parentContainer,E=v.alpha*o.alpha;T&&(E*=T.alpha);var M=l,P=h,w=n,R=0,A=0,O="0%",F="0%";g?(R=o.width*o.scaleX*o.originX,A=o.height*o.scaleY*o.originY,P.applyITRS(o.x-R,o.y-A,o.rotation,o.scaleX,o.scaleY),M.copyFrom(v.matrix),M.multiplyWithOffset(g,-v.scrollX*o.scrollFactorX,-v.scrollY*o.scrollFactorY),P.e=o.x-R,P.f=o.y-A,M.multiply(P,w)):(R=o.width*o.originX,A=o.height*o.originY,P.applyITRS(o.x-R,o.y-A,o.rotation,o.scaleX,o.scaleY),M.copyFrom(v.matrix),O=100*o.originX+"%",F=100*o.originY+"%",P.e-=v.scrollX*o.scrollFactorX,P.f-=v.scrollY*o.scrollFactorY,M.multiply(P,w)),o.transformOnly||(p.display="block",p.opacity=E,p.zIndex=o._depth,p.pointerEvents=o.pointerEvents,p.mixBlendMode=u[o._blendMode]),p.transform=w.getCSSMatrix()+" skew("+o.skewX+"rad, "+o.skewY+"rad) rotate3d("+o.rotate3d.x+","+o.rotate3d.y+","+o.rotate3d.z+","+o.rotate3d.w+o.rotate3dAngle+")",p.transformOrigin=O+" "+F}};r.exports=a}),66788:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(38943),m=e(61286);m.register("dom",function(d,l,h,n,a){var c=new u(this.scene,d,l,h,n,a);return this.displayList.add(c),c})}),11603:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),m=u,d=u;m=e(66070),d=e(66070),r.exports={renderWebGL:m,renderCanvas:d}}),65492:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="addedtoscene"}),98398:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="destroy"}),40239:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="removedfromscene"}),17286:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="complete"}),31496:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="created"}),89587:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="error"}),59792:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="locked"}),96342:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="loop"}),6017:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="playing"}),49614:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="play"}),24418:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="seeked"}),87318:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="seeking"}),50009:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="stalled"}),61922:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="stop"}),79501:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="textureready"}),4052:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="unlocked"}),54857:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="unsupported"}),56631:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={ADDED_TO_SCENE:e(65492),DESTROY:e(98398),REMOVED_FROM_SCENE:e(40239),VIDEO_COMPLETE:e(17286),VIDEO_CREATED:e(31496),VIDEO_ERROR:e(89587),VIDEO_LOCKED:e(59792),VIDEO_LOOP:e(96342),VIDEO_PLAY:e(49614),VIDEO_PLAYING:e(6017),VIDEO_SEEKED:e(24418),VIDEO_SEEKING:e(87318),VIDEO_STALLED:e(50009),VIDEO_STOP:e(61922),VIDEO_TEXTURE:e(79501),VIDEO_UNLOCKED:e(4052),VIDEO_UNSUPPORTED:e(54857)}}),39419:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(64937),d=e(89980),l=e(79394),h=new u({Extends:d,Mixins:[m.Alpha,m.BlendMode,m.Depth,m.Flip,m.Origin,m.ScrollFactor,m.Size,m.Texture,m.Tint,m.Transform,m.Visible,l],initialize:function(a){d.call(this,a,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});r.exports=h}),96699:(()=>{}),41155:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(39419),m=e(61286);m.register("extern",function(){var d=new u(this.scene);return this.displayList.add(d),d})}),79394:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),m=u,d=u;m=e(81410),d=e(96699),r.exports={renderWebGL:m,renderCanvas:d}}),81410:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(73329),m=function(d,l,h,n){d.pipelines.clear();var a=u(l,h,n).calc;l.render.call(l,d,h,a),d.pipelines.rebind()};r.exports=m}),36266:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}}),33182:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(51052),m=e(56694),d=e(36266),l=e(64937),h=e(95669),n=e(89980),a=e(72632),c=e(10850),o=e(83392),v=e(60898),g=new m({Extends:n,Mixins:[l.AlphaSingle,l.BlendMode,l.Depth,l.Mask,l.Pipeline,l.PostPipeline,l.Transform,l.Visible,l.ScrollFactor,v],initialize:function(x,T){var E=c(T,"x",0),M=c(T,"y",0);n.call(this,x,"Graphics"),this.setPosition(E,M),this.initPipeline(),this.initPostPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(T)},setDefaultStyles:function(p){return c(p,"lineStyle",null)&&(this.defaultStrokeWidth=c(p,"lineStyle.width",1),this.defaultStrokeColor=c(p,"lineStyle.color",16777215),this.defaultStrokeAlpha=c(p,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),c(p,"fillStyle",null)&&(this.defaultFillColor=c(p,"fillStyle.color",16777215),this.defaultFillAlpha=c(p,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(p,x,T){return T===void 0&&(T=1),this.commandBuffer.push(d.LINE_STYLE,p,x,T),this._lineWidth=p,this},fillStyle:function(p,x){return x===void 0&&(x=1),this.commandBuffer.push(d.FILL_STYLE,p,x),this},fillGradientStyle:function(p,x,T,E,M,P,w,R){return M===void 0&&(M=1),P===void 0&&(P=M),w===void 0&&(w=M),R===void 0&&(R=M),this.commandBuffer.push(d.GRADIENT_FILL_STYLE,M,P,w,R,p,x,T,E),this},lineGradientStyle:function(p,x,T,E,M,P){return P===void 0&&(P=1),this.commandBuffer.push(d.GRADIENT_LINE_STYLE,p,P,x,T,E,M),this},beginPath:function(){return this.commandBuffer.push(d.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(d.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(d.FILL_PATH),this},fill:function(){return this.commandBuffer.push(d.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(d.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(d.STROKE_PATH),this},fillCircleShape:function(p){return this.fillCircle(p.x,p.y,p.radius)},strokeCircleShape:function(p){return this.strokeCircle(p.x,p.y,p.radius)},fillCircle:function(p,x,T){return this.beginPath(),this.arc(p,x,T,0,o.PI2),this.fillPath(),this},strokeCircle:function(p,x,T){return this.beginPath(),this.arc(p,x,T,0,o.PI2),this.strokePath(),this},fillRectShape:function(p){return this.fillRect(p.x,p.y,p.width,p.height)},strokeRectShape:function(p){return this.strokeRect(p.x,p.y,p.width,p.height)},fillRect:function(p,x,T,E){return this.commandBuffer.push(d.FILL_RECT,p,x,T,E),this},strokeRect:function(p,x,T,E){var M=this._lineWidth/2,P=p-M,w=p+M;return this.beginPath(),this.moveTo(p,x),this.lineTo(p,x+E),this.strokePath(),this.beginPath(),this.moveTo(p+T,x),this.lineTo(p+T,x+E),this.strokePath(),this.beginPath(),this.moveTo(P,x),this.lineTo(w+T,x),this.strokePath(),this.beginPath(),this.moveTo(P,x+E),this.lineTo(w+T,x+E),this.strokePath(),this},fillRoundedRect:function(p,x,T,E,M){M===void 0&&(M=20);var P=M,w=M,R=M,A=M;typeof M!="number"&&(P=a(M,"tl",20),w=a(M,"tr",20),R=a(M,"bl",20),A=a(M,"br",20));var O=P>=0,F=w>=0,b=R>=0,D=A>=0;return P=Math.abs(P),w=Math.abs(w),R=Math.abs(R),A=Math.abs(A),this.beginPath(),this.moveTo(p+P,x),this.lineTo(p+T-w,x),F?this.arc(p+T-w,x+w,w,-o.TAU,0):this.arc(p+T,x,w,Math.PI,o.TAU,!0),this.lineTo(p+T,x+E-A),D?this.arc(p+T-A,x+E-A,A,0,o.TAU):this.arc(p+T,x+E,A,-o.TAU,Math.PI,!0),this.lineTo(p+R,x+E),b?this.arc(p+R,x+E-R,R,o.TAU,Math.PI):this.arc(p,x+E,R,0,-o.TAU,!0),this.lineTo(p,x+P),O?this.arc(p+P,x+P,P,-Math.PI,-o.TAU):this.arc(p,x,P,o.TAU,0,!0),this.fillPath(),this},strokeRoundedRect:function(p,x,T,E,M){M===void 0&&(M=20);var P=M,w=M,R=M,A=M,O=Math.min(T,E)/2;typeof M!="number"&&(P=a(M,"tl",20),w=a(M,"tr",20),R=a(M,"bl",20),A=a(M,"br",20));var F=P>=0,b=w>=0,D=R>=0,I=A>=0;return P=Math.min(Math.abs(P),O),w=Math.min(Math.abs(w),O),R=Math.min(Math.abs(R),O),A=Math.min(Math.abs(A),O),this.beginPath(),this.moveTo(p+P,x),this.lineTo(p+T-w,x),this.moveTo(p+T-w,x),b?this.arc(p+T-w,x+w,w,-o.TAU,0):this.arc(p+T,x,w,Math.PI,o.TAU,!0),this.lineTo(p+T,x+E-A),this.moveTo(p+T,x+E-A),I?this.arc(p+T-A,x+E-A,A,0,o.TAU):this.arc(p+T,x+E,A,-o.TAU,Math.PI,!0),this.lineTo(p+R,x+E),this.moveTo(p+R,x+E),D?this.arc(p+R,x+E-R,R,o.TAU,Math.PI):this.arc(p,x+E,R,0,-o.TAU,!0),this.lineTo(p,x+P),this.moveTo(p,x+P),F?this.arc(p+P,x+P,P,-Math.PI,-o.TAU):this.arc(p,x,P,o.TAU,0,!0),this.strokePath(),this},fillPointShape:function(p,x){return this.fillPoint(p.x,p.y,x)},fillPoint:function(p,x,T){return!T||T<1?T=1:(p-=T/2,x-=T/2),this.commandBuffer.push(d.FILL_RECT,p,x,T,T),this},fillTriangleShape:function(p){return this.fillTriangle(p.x1,p.y1,p.x2,p.y2,p.x3,p.y3)},strokeTriangleShape:function(p){return this.strokeTriangle(p.x1,p.y1,p.x2,p.y2,p.x3,p.y3)},fillTriangle:function(p,x,T,E,M,P){return this.commandBuffer.push(d.FILL_TRIANGLE,p,x,T,E,M,P),this},strokeTriangle:function(p,x,T,E,M,P){return this.commandBuffer.push(d.STROKE_TRIANGLE,p,x,T,E,M,P),this},strokeLineShape:function(p){return this.lineBetween(p.x1,p.y1,p.x2,p.y2)},lineBetween:function(p,x,T,E){return this.beginPath(),this.moveTo(p,x),this.lineTo(T,E),this.strokePath(),this},lineTo:function(p,x){return this.commandBuffer.push(d.LINE_TO,p,x),this},moveTo:function(p,x){return this.commandBuffer.push(d.MOVE_TO,p,x),this},strokePoints:function(p,x,T,E){x===void 0&&(x=!1),T===void 0&&(T=!1),E===void 0&&(E=p.length),this.beginPath(),this.moveTo(p[0].x,p[0].y);for(var M=1;M<E;M++)this.lineTo(p[M].x,p[M].y);return x&&this.lineTo(p[0].x,p[0].y),T&&this.closePath(),this.strokePath(),this},fillPoints:function(p,x,T,E){x===void 0&&(x=!1),T===void 0&&(T=!1),E===void 0&&(E=p.length),this.beginPath(),this.moveTo(p[0].x,p[0].y);for(var M=1;M<E;M++)this.lineTo(p[M].x,p[M].y);return x&&this.lineTo(p[0].x,p[0].y),T&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(p,x){x===void 0&&(x=32);var T=p.getPoints(x);return this.strokePoints(T,!0)},strokeEllipse:function(p,x,T,E,M){M===void 0&&(M=32);var P=new h(p,x,T,E),w=P.getPoints(M);return this.strokePoints(w,!0)},fillEllipseShape:function(p,x){x===void 0&&(x=32);var T=p.getPoints(x);return this.fillPoints(T,!0)},fillEllipse:function(p,x,T,E,M){M===void 0&&(M=32);var P=new h(p,x,T,E),w=P.getPoints(M);return this.fillPoints(w,!0)},arc:function(p,x,T,E,M,P,w){return P===void 0&&(P=!1),w===void 0&&(w=0),this.commandBuffer.push(d.ARC,p,x,T,E,M,P,w),this},slice:function(p,x,T,E,M,P,w){return P===void 0&&(P=!1),w===void 0&&(w=0),this.commandBuffer.push(d.BEGIN_PATH),this.commandBuffer.push(d.MOVE_TO,p,x),this.commandBuffer.push(d.ARC,p,x,T,E,M,P,w),this.commandBuffer.push(d.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(d.SAVE),this},restore:function(){return this.commandBuffer.push(d.RESTORE),this},translateCanvas:function(p,x){return this.commandBuffer.push(d.TRANSLATE,p,x),this},scaleCanvas:function(p,x){return this.commandBuffer.push(d.SCALE,p,x),this},rotateCanvas:function(p){return this.commandBuffer.push(d.ROTATE,p),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(p,x,T){var E=this.scene.sys,M=E.game.renderer;x===void 0&&(x=E.scale.width),T===void 0&&(T=E.scale.height),g.TargetCamera.setScene(this.scene),g.TargetCamera.setViewport(0,0,x,T),g.TargetCamera.scrollX=this.x,g.TargetCamera.scrollY=this.y;var P,w,R={willReadFrequently:!0};if(typeof p=="string")if(E.textures.exists(p)){P=E.textures.get(p);var A=P.getSourceImage();A instanceof HTMLCanvasElement&&(w=A.getContext("2d",R))}else P=E.textures.createCanvas(p,x,T),w=P.getSourceImage().getContext("2d",R);else p instanceof HTMLCanvasElement&&(w=p.getContext("2d",R));return w&&(this.renderCanvas(M,this,g.TargetCamera,null,w,!1),P&&P.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});g.TargetCamera=new u,r.exports=g}),91543:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(36266),m=e(49584),d=function(l,h,n,a,c,o){var v=h.commandBuffer,g=v.length,p=c||l.currentContext;if(!(g===0||!m(l,p,h,n,a))){n.addToRenderList(h);var x=1,T=1,E=0,M=0,P=1,w=0,R=0,A=0;p.beginPath();for(var O=0;O<g;++O){var F=v[O];switch(F){case u.ARC:p.arc(v[O+1],v[O+2],v[O+3],v[O+4],v[O+5],v[O+6]),O+=7;break;case u.LINE_STYLE:P=v[O+1],E=v[O+2],x=v[O+3],w=(E&16711680)>>>16,R=(E&65280)>>>8,A=E&255,p.strokeStyle="rgba("+w+","+R+","+A+","+x+")",p.lineWidth=P,O+=3;break;case u.FILL_STYLE:M=v[O+1],T=v[O+2],w=(M&16711680)>>>16,R=(M&65280)>>>8,A=M&255,p.fillStyle="rgba("+w+","+R+","+A+","+T+")",O+=2;break;case u.BEGIN_PATH:p.beginPath();break;case u.CLOSE_PATH:p.closePath();break;case u.FILL_PATH:o||p.fill();break;case u.STROKE_PATH:o||p.stroke();break;case u.FILL_RECT:o?p.rect(v[O+1],v[O+2],v[O+3],v[O+4]):p.fillRect(v[O+1],v[O+2],v[O+3],v[O+4]),O+=4;break;case u.FILL_TRIANGLE:p.beginPath(),p.moveTo(v[O+1],v[O+2]),p.lineTo(v[O+3],v[O+4]),p.lineTo(v[O+5],v[O+6]),p.closePath(),o||p.fill(),O+=6;break;case u.STROKE_TRIANGLE:p.beginPath(),p.moveTo(v[O+1],v[O+2]),p.lineTo(v[O+3],v[O+4]),p.lineTo(v[O+5],v[O+6]),p.closePath(),o||p.stroke(),O+=6;break;case u.LINE_TO:p.lineTo(v[O+1],v[O+2]),O+=2;break;case u.MOVE_TO:p.moveTo(v[O+1],v[O+2]),O+=2;break;case u.LINE_FX_TO:p.lineTo(v[O+1],v[O+2]),O+=5;break;case u.MOVE_FX_TO:p.moveTo(v[O+1],v[O+2]),O+=5;break;case u.SAVE:p.save();break;case u.RESTORE:p.restore();break;case u.TRANSLATE:p.translate(v[O+1],v[O+2]),O+=2;break;case u.SCALE:p.scale(v[O+1],v[O+2]),O+=2;break;case u.ROTATE:p.rotate(v[O+1]),O+=1;break;case u.GRADIENT_FILL_STYLE:O+=5;break;case u.GRADIENT_LINE_STYLE:O+=6;break}}p.restore()}};r.exports=d}),41286:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(99325),m=e(33182);u.register("graphics",function(d,l){d===void 0&&(d={}),l!==void 0&&(d.add=l);var h=new m(this.scene,d);return d.add&&this.scene.sys.displayList.add(h),h})}),13122:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(33182),m=e(61286);m.register("graphics",function(d){return this.displayList.add(new u(this.scene,d))})}),60898:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),m=u,d=u;m=e(34429),d=e(91543),d=e(91543),r.exports={renderWebGL:m,renderCanvas:d}}),34429:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(36266),m=e(73329),d=e(69360),l=e(75512),h=function(v,g,p){this.x=v,this.y=g,this.width=p},n=function(v,g,p){this.points=[],this.pointsLength=1,this.points[0]=new h(v,g,p)},a=[],c=new d,o=function(v,g,p,x){if(g.commandBuffer.length!==0){p.addToRenderList(g);var T=v.pipelines.set(g.pipeline,g);v.pipelines.preBatch(g);for(var E=m(g,p,x).calc,M=c.loadIdentity(),P=g.commandBuffer,w=p.alpha*g.alpha,R=1,A=T.fillTint,O=T.strokeTint,F=0,b=0,D=0,I=.01,B=Math.PI*2,z,Y=[],X=0,H=!0,N=null,U=l.getTintAppendFloatAlpha,L=0;L<P.length;L++)switch(z=P[L],z){case u.BEGIN_PATH:{Y.length=0,N=null,H=!0;break}case u.CLOSE_PATH:{H=!1,N&&N.points.length&&N.points.push(N.points[0]);break}case u.FILL_PATH:{for(X=0;X<Y.length;X++)T.batchFillPath(Y[X].points,M,E);break}case u.STROKE_PATH:{for(X=0;X<Y.length;X++)T.batchStrokePath(Y[X].points,R,H,M,E);break}case u.LINE_STYLE:{R=P[++L];var G=P[++L],V=P[++L]*w,k=U(G,V);O.TL=k,O.TR=k,O.BL=k,O.BR=k;break}case u.FILL_STYLE:{var W=P[++L],$=P[++L]*w,K=U(W,$);A.TL=K,A.TR=K,A.BL=K,A.BR=K;break}case u.GRADIENT_FILL_STYLE:{var j=P[++L]*w,Z=P[++L]*w,J=P[++L]*w,Q=P[++L]*w;A.TL=U(P[++L],j),A.TR=U(P[++L],Z),A.BL=U(P[++L],J),A.BR=U(P[++L],Q);break}case u.GRADIENT_LINE_STYLE:{R=P[++L];var _=P[++L]*w;O.TL=U(P[++L],_),O.TR=U(P[++L],_),O.BL=U(P[++L],_),O.BR=U(P[++L],_);break}case u.ARC:{var q=0,et=P[++L],rt=P[++L],ot=P[++L],ht=P[++L],tt=P[++L],at=P[++L],nt=P[++L];for(tt-=ht,at?tt<-B?tt=-B:tt>0&&(tt=-B+tt%B):tt>B?tt=B:tt<0&&(tt=B+tt%B),N===null&&(N=new n(et+Math.cos(ht)*ot,rt+Math.sin(ht)*ot,R),Y.push(N),q+=I);q<1+nt;)D=tt*q+ht,F=et+Math.cos(D)*ot,b=rt+Math.sin(D)*ot,N.points.push(new h(F,b,R)),q+=I;D=tt+ht,F=et+Math.cos(D)*ot,b=rt+Math.sin(D)*ot,N.points.push(new h(F,b,R));break}case u.FILL_RECT:{T.batchFillRect(P[++L],P[++L],P[++L],P[++L],M,E);break}case u.FILL_TRIANGLE:{T.batchFillTriangle(P[++L],P[++L],P[++L],P[++L],P[++L],P[++L],M,E);break}case u.STROKE_TRIANGLE:{T.batchStrokeTriangle(P[++L],P[++L],P[++L],P[++L],P[++L],P[++L],R,M,E);break}case u.LINE_TO:{N!==null?N.points.push(new h(P[++L],P[++L],R)):(N=new n(P[++L],P[++L],R),Y.push(N));break}case u.MOVE_TO:{N=new n(P[++L],P[++L],R),Y.push(N);break}case u.SAVE:{a.push(M.copyToArray());break}case u.RESTORE:{M.copyFromArray(a.pop());break}case u.TRANSLATE:{et=P[++L],rt=P[++L],M.translate(et,rt);break}case u.SCALE:{et=P[++L],rt=P[++L],M.scale(et,rt);break}case u.ROTATE:{M.rotate(P[++L]);break}}v.pipelines.postBatch(g)}};r.exports=o}),59192:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(83979),m=e(56694),d=e(56631),l=e(6659),h=e(71608),n=e(72632),a=e(10850),c=e(19256),o=e(42911),v=e(75757),g=e(58403),p=e(13747),x=new m({Extends:l,initialize:function(E,M,P){l.call(this),P?M&&!Array.isArray(M)&&(M=[M]):Array.isArray(M)?o(M[0])&&(P=M,M=null):o(M)&&(P=M,M=null),this.scene=E,this.children=new g,this.isParent=!0,this.type="Group",this.classType=n(P,"classType",p),this.name=n(P,"name",""),this.active=n(P,"active",!0),this.maxSize=n(P,"maxSize",-1),this.defaultKey=n(P,"defaultKey",null),this.defaultFrame=n(P,"defaultFrame",null),this.runChildUpdate=n(P,"runChildUpdate",!1),this.createCallback=n(P,"createCallback",null),this.removeCallback=n(P,"removeCallback",null),this.createMultipleCallback=n(P,"createMultipleCallback",null),this.internalCreateCallback=n(P,"internalCreateCallback",null),this.internalRemoveCallback=n(P,"internalRemoveCallback",null),M&&this.addMultiple(M),P&&this.createMultiple(P),this.on(d.ADDED_TO_SCENE,this.addedToScene,this),this.on(d.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(T,E,M,P,w,R){if(T===void 0&&(T=0),E===void 0&&(E=0),M===void 0&&(M=this.defaultKey),P===void 0&&(P=this.defaultFrame),w===void 0&&(w=!0),R===void 0&&(R=!0),this.isFull())return null;var A=new this.classType(this.scene,T,E,M,P);return A.addToDisplayList(this.scene.sys.displayList),A.addToUpdateList(),A.visible=w,A.setActive(R),this.add(A),A},createMultiple:function(T){if(this.isFull())return[];Array.isArray(T)||(T=[T]);var E=[];if(T[0].key)for(var M=0;M<T.length;M++){var P=this.createFromConfig(T[M]);E=E.concat(P)}return E},createFromConfig:function(T){if(this.isFull())return[];this.classType=n(T,"classType",this.classType);var E=n(T,"key",void 0),M=n(T,"frame",null),P=n(T,"visible",!0),w=n(T,"active",!0),R=[];if(E===void 0)return R;Array.isArray(E)||(E=[E]),Array.isArray(M)||(M=[M]);var A=n(T,"repeat",0),O=n(T,"randomKey",!1),F=n(T,"randomFrame",!1),b=n(T,"yoyo",!1),D=n(T,"quantity",!1),I=n(T,"frameQuantity",1),B=n(T,"max",0),z=v(E,M,{max:B,qty:D||I,random:O,randomB:F,repeat:A,yoyo:b});T.createCallback&&(this.createCallback=T.createCallback),T.removeCallback&&(this.removeCallback=T.removeCallback);for(var Y=0;Y<z.length;Y++){var X=this.create(0,0,z[Y].a,z[Y].b,P,w);if(!X)break;R.push(X)}if(c(T,"setXY")){var H=a(T,"setXY.x",0),N=a(T,"setXY.y",0),U=a(T,"setXY.stepX",0),L=a(T,"setXY.stepY",0);u.SetXY(R,H,N,U,L)}if(c(T,"setRotation")){var G=a(T,"setRotation.value",0),V=a(T,"setRotation.step",0);u.SetRotation(R,G,V)}if(c(T,"setScale")){var k=a(T,"setScale.x",1),W=a(T,"setScale.y",k),$=a(T,"setScale.stepX",0),K=a(T,"setScale.stepY",0);u.SetScale(R,k,W,$,K)}if(c(T,"setOrigin")){var j=a(T,"setOrigin.x",.5),Z=a(T,"setOrigin.y",j),J=a(T,"setOrigin.stepX",0),Q=a(T,"setOrigin.stepY",0);u.SetOrigin(R,j,Z,J,Q)}if(c(T,"setAlpha")){var _=a(T,"setAlpha.value",1),q=a(T,"setAlpha.step",0);u.SetAlpha(R,_,q)}if(c(T,"setDepth")){var et=a(T,"setDepth.value",0),rt=a(T,"setDepth.step",0);u.SetDepth(R,et,rt)}if(c(T,"setScrollFactor")){var ot=a(T,"setScrollFactor.x",1),ht=a(T,"setScrollFactor.y",ot),tt=a(T,"setScrollFactor.stepX",0),at=a(T,"setScrollFactor.stepY",0);u.SetScrollFactor(R,ot,ht,tt,at)}var nt=n(T,"hitArea",null),pt=n(T,"hitAreaCallback",null);nt&&u.SetHitArea(R,nt,pt);var vt=n(T,"gridAlign",!1);return vt&&u.GridAlign(R,vt),this.createMultipleCallback&&this.createMultipleCallback.call(this,R),R},preUpdate:function(T,E){if(!(!this.runChildUpdate||this.children.size===0))for(var M=this.children.entries.slice(),P=0;P<M.length;P++){var w=M[P];w.active&&w.update(T,E)}},add:function(T,E){return E===void 0&&(E=!1),this.isFull()?this:(this.children.set(T),this.internalCreateCallback&&this.internalCreateCallback.call(this,T),this.createCallback&&this.createCallback.call(this,T),E&&(T.addToDisplayList(this.scene.sys.displayList),T.addToUpdateList()),T.on(d.DESTROY,this.remove,this),this)},addMultiple:function(T,E){if(E===void 0&&(E=!1),Array.isArray(T))for(var M=0;M<T.length;M++)this.add(T[M],E);return this},remove:function(T,E,M){return E===void 0&&(E=!1),M===void 0&&(M=!1),this.children.contains(T)?(this.children.delete(T),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,T),this.removeCallback&&this.removeCallback.call(this,T),T.off(d.DESTROY,this.remove,this),M?T.destroy():E&&(T.removeFromDisplayList(),T.removeFromUpdateList()),this):this},clear:function(T,E){T===void 0&&(T=!1),E===void 0&&(E=!1);for(var M=this.children,P=0;P<M.size;P++){var w=M.entries[P];w.off(d.DESTROY,this.remove,this),E?w.destroy():T&&(w.removeFromDisplayList(),w.removeFromUpdateList())}return this.children.clear(),this},contains:function(T){return this.children.contains(T)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(T,E,M,P){return h(this.children.entries,T,E,M,P)},getFirst:function(T,E,M,P,w,R,A){return this.getHandler(!0,1,T,E,M,P,w,R,A)},getFirstNth:function(T,E,M,P,w,R,A,O){return this.getHandler(!0,T,E,M,P,w,R,A,O)},getLast:function(T,E,M,P,w,R,A){return this.getHandler(!1,1,T,E,M,P,w,R,A)},getLastNth:function(T,E,M,P,w,R,A,O){return this.getHandler(!1,T,E,M,P,w,R,A,O)},getHandler:function(T,E,M,P,w,R,A,O,F){M===void 0&&(M=!1),P===void 0&&(P=!1);var b,D,I=0,B=this.children.entries;if(T)for(D=0;D<B.length;D++)if(b=B[D],b.active===M){if(I++,I===E)break}else b=null;else for(D=B.length-1;D>=0;D--)if(b=B[D],b.active===M){if(I++,I===E)break}else b=null;return b?(typeof w=="number"&&(b.x=w),typeof R=="number"&&(b.y=R),b):P?this.create(w,R,A,O,F):null},get:function(T,E,M,P,w){return this.getFirst(!1,!0,T,E,M,P,w)},getFirstAlive:function(T,E,M,P,w,R){return this.getFirst(!0,T,E,M,P,w,R)},getFirstDead:function(T,E,M,P,w,R){return this.getFirst(!1,T,E,M,P,w,R)},playAnimation:function(T,E){return u.PlayAnimation(this.children.entries,T,E),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(T){T===void 0&&(T=!0);for(var E=0,M=0;M<this.children.size;M++)this.children.entries[M].active===T&&E++;return E},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var T=this.getTotalUsed(),E=this.maxSize===-1?999999999999:this.maxSize;return E-T},setActive:function(T){return this.active=T,this},setName:function(T){return this.name=T,this},propertyValueSet:function(T,E,M,P,w){return u.PropertyValueSet(this.children.entries,T,E,M,P,w),this},propertyValueInc:function(T,E,M,P,w){return u.PropertyValueInc(this.children.entries,T,E,M,P,w),this},setX:function(T,E){return u.SetX(this.children.entries,T,E),this},setY:function(T,E){return u.SetY(this.children.entries,T,E),this},setXY:function(T,E,M,P){return u.SetXY(this.children.entries,T,E,M,P),this},incX:function(T,E){return u.IncX(this.children.entries,T,E),this},incY:function(T,E){return u.IncY(this.children.entries,T,E),this},incXY:function(T,E,M,P){return u.IncXY(this.children.entries,T,E,M,P),this},shiftPosition:function(T,E,M){return u.ShiftPosition(this.children.entries,T,E,M),this},angle:function(T,E){return u.Angle(this.children.entries,T,E),this},rotate:function(T,E){return u.Rotate(this.children.entries,T,E),this},rotateAround:function(T,E){return u.RotateAround(this.children.entries,T,E),this},rotateAroundDistance:function(T,E,M){return u.RotateAroundDistance(this.children.entries,T,E,M),this},setAlpha:function(T,E){return u.SetAlpha(this.children.entries,T,E),this},setTint:function(T,E,M,P){return u.SetTint(this.children.entries,T,E,M,P),this},setOrigin:function(T,E,M,P){return u.SetOrigin(this.children.entries,T,E,M,P),this},scaleX:function(T,E){return u.ScaleX(this.children.entries,T,E),this},scaleY:function(T,E){return u.ScaleY(this.children.entries,T,E),this},scaleXY:function(T,E,M,P){return u.ScaleXY(this.children.entries,T,E,M,P),this},setDepth:function(T,E){return u.SetDepth(this.children.entries,T,E),this},setBlendMode:function(T){return u.SetBlendMode(this.children.entries,T),this},setHitArea:function(T,E){return u.SetHitArea(this.children.entries,T,E),this},shuffle:function(){return u.Shuffle(this.children.entries),this},kill:function(T){this.children.contains(T)&&T.setActive(!1)},killAndHide:function(T){this.children.contains(T)&&(T.setActive(!1),T.setVisible(!1))},setVisible:function(T,E,M){return u.SetVisible(this.children.entries,T,E,M),this},toggleVisible:function(){return u.ToggleVisible(this.children.entries),this},destroy:function(T,E){T===void 0&&(T=!1),E===void 0&&(E=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(d.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(E,T),this.scene=void 0,this.children=void 0)}});r.exports=x}),61295:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(99325),m=e(59192);u.register("group",function(d){return new m(this.scene,null,d)})}),62598:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(59192),m=e(61286);m.register("group",function(d,l){return this.updateList.add(new u(this.scene,d,l))})}),1539:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(64937),d=e(89980),l=e(57322),h=new u({Extends:d,Mixins:[m.Alpha,m.BlendMode,m.Depth,m.Flip,m.GetBounds,m.Mask,m.Origin,m.Pipeline,m.PostPipeline,m.ScrollFactor,m.Size,m.TextureCrop,m.Tint,m.Transform,m.Visible,l],initialize:function(a,c,o,v,g){d.call(this,a,"Image"),this._crop=this.resetCropObject(),this.setTexture(v,g),this.setPosition(c,o),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)}});r.exports=h}),57786:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d){m.addToRenderList(u),e.batchSprite(u,u.frame,m,d)};r.exports=y}),83556:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(88933),m=e(99325),d=e(20494),l=e(1539);m.register("image",function(h,n){h===void 0&&(h={});var a=d(h,"key",null),c=d(h,"frame",null),o=new l(this.scene,0,0,a,c);return n!==void 0&&(h.add=n),u(this.scene,o,h),o})}),20927:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(1539),m=e(61286);m.register("image",function(d,l,h,n){return this.displayList.add(new u(this.scene,d,l,h,n))})}),57322:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),m=u,d=u;m=e(59390),d=e(57786),r.exports={renderWebGL:m,renderCanvas:d}}),59390:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d){m.addToRenderList(u),this.pipeline.batchSprite(u,m,d)};r.exports=y}),48013:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u={Events:e(56631),DisplayList:e(91713),GameObjectCreator:e(99325),GameObjectFactory:e(61286),UpdateList:e(92034),Components:e(64937),GetCalcMatrix:e(73329),BuildGameObject:e(88933),BuildGameObjectAnimation:e(32291),GameObject:e(89980),BitmapText:e(44616),Blitter:e(52816),Bob:e(41664),Container:e(70339),DOMElement:e(38943),DynamicBitmapText:e(13468),Extern:e(39419),Graphics:e(33182),Group:e(59192),Image:e(1539),Layer:e(85305),Particles:e(27684),PathFollower:e(29598),RenderTexture:e(15996),RetroFont:e(55873),Rope:e(79968),Sprite:e(13747),Text:e(76555),GetTextSize:e(32979),MeasureText:e(27030),TextStyle:e(74744),TileSprite:e(35856),Zone:e(71030),Video:e(8630),Shape:e(91461),Arc:e(28593),Curve:e(15220),Ellipse:e(28591),Grid:e(39169),IsoBox:e(4415),IsoTriangle:e(65159),Line:e(579),Polygon:e(91249),Rectangle:e(517),Star:e(77843),Triangle:e(21873),Factories:{Blitter:e(38906),Container:e(23400),DOMElement:e(66788),DynamicBitmapText:e(94145),Extern:e(41155),Graphics:e(13122),Group:e(62598),Image:e(20927),Layer:e(17676),Particles:e(81212),PathFollower:e(19626),RenderTexture:e(29599),Rope:e(31982),Sprite:e(66135),StaticBitmapText:e(21797),Text:e(94627),TileSprite:e(20509),Zone:e(34546),Video:e(215),Arc:e(10369),Curve:e(10147),Ellipse:e(99869),Grid:e(9326),IsoBox:e(88154),IsoTriangle:e(67765),Line:e(85665),Polygon:e(88203),Rectangle:e(94355),Star:e(23962),Triangle:e(79296)},Creators:{Blitter:e(68452),Container:e(44516),DynamicBitmapText:e(67513),Graphics:e(41286),Group:e(61295),Image:e(83556),Layer:e(56378),Particles:e(765),RenderTexture:e(85692),Rope:e(96027),Sprite:e(89219),StaticBitmapText:e(95499),Text:e(75397),TileSprite:e(63950),Zone:e(24067),Video:e(65601)}};u.Shader=e(27902),u.Mesh=e(83321),u.NineSlice=e(44139),u.PointLight=e(13171),u.Plane=e(33412),u.Factories.Shader=e(51979),u.Factories.Mesh=e(8767),u.Factories.NineSlice=e(53778),u.Factories.PointLight=e(91201),u.Factories.Plane=e(58322),u.Creators.Shader=e(13908),u.Creators.Mesh=e(41839),u.Creators.NineSlice=e(40964),u.Creators.PointLight=e(162),u.Creators.Plane=e(10912),u.Light=e(14455),u.LightsManager=e(26193),u.LightsPlugin=e(50296),r.exports=u}),85305:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(95723),m=e(56694),d=e(64937),l=e(48129),h=e(81078),n=e(6659),a=e(56631),c=e(71207),o=e(58010),v=e(7599),g=e(17922),p=new m({Extends:c,Mixins:[d.AlphaSingle,d.BlendMode,d.Depth,d.Mask,d.PostPipeline,d.Visible,n,o],initialize:function(T,E){c.call(this,T),n.call(this),this.scene=T,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=T.sys,this.events=T.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPostPipeline(),this.clearAlpha(),this.setBlendMode(u.SKIP_CHECK),E&&this.add(E),T.sys.queueDepthSort()},setActive:function(x){return this.active=x,this},setName:function(x){return this.name=x,this},setState:function(x){return this.state=x,this},setDataEnabled:function(){return this.data||(this.data=new h(this)),this},setData:function(x,T){return this.data||(this.data=new h(this)),this.data.set(x,T),this},incData:function(x,T){return this.data||(this.data=new h(this)),this.data.inc(x,T),this},toggleData:function(x){return this.data||(this.data=new h(this)),this.data.toggle(x),this},getData:function(x){return this.data||(this.data=new h(this)),this.data.get(x)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return l(this)},willRender:function(x){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&x.id)},getIndexList:function(){for(var x=this,T=this.parentContainer,E=[];T&&(E.unshift(T.getIndex(x)),x=T,T.parentContainer);)T=T.parentContainer;return E.unshift(this.displayList.getIndex(x)),E},addChildCallback:function(x){x.displayList&&x.displayList!==this&&x.removeFromDisplayList(),x.displayList||(this.queueDepthSort(),x.displayList=this,x.emit(a.ADDED_TO_SCENE,x,this.scene),this.events.emit(v.ADDED_TO_SCENE,x,this.scene))},removeChildCallback:function(x){this.queueDepthSort(),x.displayList=null,x.emit(a.REMOVED_FROM_SCENE,x,this.scene),this.events.emit(v.REMOVED_FROM_SCENE,x,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(g(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(x,T){return x._depth-T._depth},getChildren:function(){return this.list},addToDisplayList:function(x){return x===void 0&&(x=this.scene.sys.displayList),this.displayList&&this.displayList!==x&&this.removeFromDisplayList(),x.exists(this)||(this.displayList=x,x.add(this,!0),x.queueDepthSort(),this.emit(a.ADDED_TO_SCENE,this,this.scene),x.events.emit(v.ADDED_TO_SCENE,this,this.scene)),this},removeFromDisplayList:function(){var x=this.displayList||this.scene.sys.displayList;return x.exists(this)&&(x.remove(this,!0),x.queueDepthSort(),this.displayList=null,this.emit(a.REMOVED_FROM_SCENE,this,this.scene),x.events.emit(v.REMOVED_FROM_SCENE,this,this.scene)),this},destroy:function(x){if(!(!this.scene||this.ignoreDestroy)){this.emit(a.DESTROY,this);for(var T=this.list;T.length;)T[0].destroy(x);this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});r.exports=p}),834:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){var d=u.list;if(d.length!==0){u.depthSort();var l=u.blendMode!==-1;l||e.setBlendMode(0);var h=u._alpha;u.mask&&u.mask.preRenderCanvas(e,null,m);for(var n=0;n<d.length;n++){var a=d[n];if(a.willRender(m)){var c=a.alpha;!l&&a.blendMode!==e.currentBlendMode&&e.setBlendMode(a.blendMode),a.setAlpha(c*h),a.renderCanvas(e,a,m),a.setAlpha(c)}}u.mask&&u.mask.postRenderCanvas(e)}};r.exports=y}),56378:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(88933),m=e(85305),d=e(99325),l=e(20494);d.register("layer",function(h,n){h===void 0&&(h={});var a=l(h,"children",null),c=new m(this.scene,a);return n!==void 0&&(h.add=n),u(this.scene,c,h),c})}),17676:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(85305),m=e(61286);m.register("layer",function(d){return this.displayList.add(new u(this.scene,d))})}),58010:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),m=u,d=u;m=e(17576),d=e(834),r.exports={renderWebGL:m,renderCanvas:d}}),17576:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){var d=u.list,l=d.length;if(l!==0){u.depthSort(),e.pipelines.preBatch(u);var h=u.blendMode!==-1;h||e.setBlendMode(0);for(var n=u.alpha,a=0;a<l;a++){var c=d[a];if(c.willRender(m)){var o,v,g,p;if(c.alphaTopLeft!==void 0)o=c.alphaTopLeft,v=c.alphaTopRight,g=c.alphaBottomLeft,p=c.alphaBottomRight;else{var x=c.alpha;o=x,v=x,g=x,p=x}!h&&c.blendMode!==e.currentBlendMode&&e.setBlendMode(c.blendMode);var T=c.mask;T&&T.preRenderWebGL(e,c,m);var E=c.type;E!==e.currentType&&(e.newType=!0,e.currentType=E),e.nextTypeMatch=a<l-1?d[a+1].type===e.currentType:!1,c.setAlpha(o*n,v*n,g*n,p*n),c.renderWebGL(e,c,m),c.setAlpha(o,v,g,p),T&&T.postRenderWebGL(e,m),e.newType=!1}}e.pipelines.postBatch(u)}};r.exports=y}),14455:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(26673),m=e(56694),d=e(64937),l=e(39298),h=e(75512),n=new m({Extends:u,Mixins:[d.Origin,d.ScrollFactor,d.Transform,d.Visible],initialize:function(c,o,v,g,p,x,T){u.call(this,c,o,v),this.color=new l(g,p,x),this.intensity=T,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1),this.setOrigin(),this.setDisplayOrigin(v)},displayWidth:{get:function(){return this.diameter},set:function(a){this.diameter=a}},displayHeight:{get:function(){return this.diameter},set:function(a){this.diameter=a}},width:{get:function(){return this.diameter},set:function(a){this.diameter=a}},height:{get:function(){return this.diameter},set:function(a){this.diameter=a}},willRender:function(a){return!(n.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&a.id)},setColor:function(a){var c=h.getFloatsFromUintRGB(a);return this.color.set(c[0],c[1],c[2]),this},setIntensity:function(a){return this.intensity=a,this},setRadius:function(a){return this.radius=a,this}});n.RENDER_MASK=15,r.exports=n}),26193:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(26535),m=e(56694),d=e(53996),l=e(14455),h=e(13171),n=e(39298),a=e(72677),c=e(17922),o=e(75512),v=new m({initialize:function(){this.lights=[],this.ambientColor=new n(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(g,p,x,T,E,M){return this.systems.displayList.add(new h(this.scene,g,p,x,T,E,M))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(g){for(var p=this.lights,x=g.worldView,T=[],E=0;E<p.length;E++){var M=p[E];M.willRender(g)&&u(M,x)&&T.push({light:M,distance:d(M.x,M.y,x.centerX,x.centerY)})}return T.length>this.maxLights&&(c(T,this.sortByDistance),T=T.slice(0,this.maxLights)),this.visibleLights=T.length,T},sortByDistance:function(g,p){return g.distance>=p.distance},setAmbientColor:function(g){var p=o.getFloatsFromUintRGB(g);return this.ambientColor.set(p[0],p[1],p[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(g,p,x,T,E){g===void 0&&(g=0),p===void 0&&(p=0),x===void 0&&(x=128),T===void 0&&(T=16777215),E===void 0&&(E=1);var M=o.getFloatsFromUintRGB(T),P=new l(g,p,x,M[0],M[1],M[2],E);return this.lights.push(P),P},removeLight:function(g){var p=this.lights.indexOf(g);return p>=0&&a(this.lights,p),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});r.exports=v}),50296:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(26193),d=e(91963),l=e(7599),h=new u({Extends:m,initialize:function(a){this.scene=a,this.systems=a.sys,a.sys.settings.isBooted||a.sys.events.once(l.BOOT,this.boot,this),m.call(this)},boot:function(){var n=this.systems.events;n.on(l.SHUTDOWN,this.shutdown,this),n.on(l.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});d.register("LightsPlugin",h,"lights"),r.exports=h}),83321:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(64937),d=e(75606),l=e(18693),h=e(89980),n=e(53267),a=e(67623),c=e(73329),o=e(16650),v=e(23464),g=e(23701),p=e(17922),x=e(70015),T=e(85769),E=new u({Extends:h,Mixins:[m.AlphaSingle,m.BlendMode,m.Depth,m.Mask,m.Pipeline,m.PostPipeline,m.ScrollFactor,m.Size,m.Texture,m.Transform,m.Visible,v],initialize:function(P,w,R,A,O,F,b,D,I,B,z,Y){w===void 0&&(w=0),R===void 0&&(R=0),A===void 0&&(A="__WHITE"),h.call(this,P,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new x,this.modelScale=new x(1,1,1),this.modelRotation=new x,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new o,this.viewPosition=new x,this.viewMatrix=new o,this.projectionMatrix=new o,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1,this.fov,this.displayOriginX=0,this.displayOriginY=0;var X=P.sys.renderer;this.setPosition(w,R),this.setTexture(A,O),this.setSize(X.width,X.height),this.initPipeline(),this.initPostPipeline(),this.setPerspective(X.width,X.height),F&&this.addVertices(F,b,D,I,B,z,Y)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(M){return this.viewPosition.addScale(x.LEFT,M),this.dirtyCache[10]=1,this},panY:function(M){return this.viewPosition.y+=x.DOWN.y*M,this.dirtyCache[10]=1,this},panZ:function(M){return this.viewPosition.z+=M,this.dirtyCache[10]=1,this},setPerspective:function(M,P,w,R,A){return w===void 0&&(w=45),R===void 0&&(R=.01),A===void 0&&(A=1e3),this.fov=w,this.projectionMatrix.perspective(d(w),M/P,R,A),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(M,P,w,R){return M===void 0&&(M=this.scene.sys.renderer.getAspectRatio()),P===void 0&&(P=1),w===void 0&&(w=-1e3),R===void 0&&(R=1e3),this.fov=0,this.projectionMatrix.ortho(-M,M,-P,P,w,R),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(M){M.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(M,P,w,R,A,O,F,b,D){var I=this.scene.sys.cache.obj.get(M),B;return I&&(B=n(I,this,P,w,R,A,O,F,b,D)),(!B||B.verts.length===0)&&console.warn("Mesh.addVerticesFromObj data empty:",M),this},sortByDepth:function(M,P){return M.depth-P.depth},depthSort:function(){return p(this.faces,this.sortByDepth),this},addVertex:function(M,P,w,R,A,O,F){var b=new T(M,P,w,R,A,O,F);return this.vertices.push(b),b},addFace:function(M,P,w){var R=new l(M,P,w);return this.faces.push(R),this.dirtyCache[9]=-1,R},addVertices:function(M,P,w,R,A,O,F){var b=a(M,P,w,R,A,O,F);return b?(this.faces=this.faces.concat(b.faces),this.vertices=this.vertices.concat(b.vertices)):console.warn("Mesh.addVertices data empty or invalid"),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(M){return this.faces[M]},hasFaceAt:function(M,P,w){w===void 0&&(w=this.scene.sys.cameras.main);for(var R=c(this,w).calc,A=this.faces,O=0;O<A.length;O++){var F=A[O];if(F.contains(M,P,R))return!0}return!1},getFaceAt:function(M,P,w){w===void 0&&(w=this.scene.sys.cameras.main);for(var R=c(this,w).calc,A=this.faces,O=[],F=0;F<A.length;F++){var b=A[F];b.contains(M,P,R)&&O.push(b)}return p(O,this.sortByDepth)},setDebug:function(M,P){return this.debugGraphic=M,!M&&!P?this.debugCallback=null:P?this.debugCallback=P:this.debugCallback=this.renderDebug,this},isDirty:function(){var M=this.modelPosition,P=this.modelRotation,w=this.modelScale,R=this.dirtyCache,A=M.x,O=M.y,F=M.z,b=P.x,D=P.y,I=P.z,B=w.x,z=w.y,Y=w.z,X=this.getFaceCount(),H=R[0],N=R[1],U=R[2],L=R[3],G=R[4],V=R[5],k=R[6],W=R[7],$=R[8],K=R[9];return R[0]=A,R[1]=O,R[2]=F,R[3]=b,R[4]=D,R[5]=I,R[6]=B,R[7]=z,R[8]=Y,R[9]=X,H!==A||N!==O||U!==F||L!==b||G!==D||V!==I||k!==B||W!==z||$!==Y||K!==X},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var M=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!M[10]&&!this.isDirty())){var P=this.width,w=this.height,R=this.viewMatrix,A=this.viewPosition;M[10]&&(R.identity(),R.translate(A),R.invert(),M[10]=0);var O=this.transformMatrix;O.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var F=A.z,b=this.faces,D=0;D<b.length;D++)b[D].transformCoordinatesLocal(O,P,w,F);this.depthSort()}},renderDebug:function(M,P){for(var w=M.debugGraphic,R=0;R<P.length;R++){var A=P[R],O=A.vertex1.tx,F=A.vertex1.ty,b=A.vertex2.tx,D=A.vertex2.ty,I=A.vertex3.tx,B=A.vertex3.ty;w.strokeTriangle(O,F,b,D,I,B)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null},clearTint:function(){return this.setTint()},setInteractive:function(){var M=this.faces,P=function(w,R,A){for(var O=0;O<M.length;O++){var F=M[O];if(F.contains(R,A))return!0}return!1};return this.scene.sys.input.enable(this,P),this},setTint:function(M){M===void 0&&(M=16777215);for(var P=this.vertices,w=0;w<P.length;w++)P[w].color=M;return this},uvScroll:function(M,P){for(var w=this.faces,R=0;R<w.length;R++)w[R].scrollUV(M,P);return this},uvScale:function(M,P){for(var w=this.faces,R=0;R<w.length;R++)w[R].scaleUV(M,P);return this},tint:{set:function(M){this.setTint(M)}},rotateX:{get:function(){return g(this.modelRotation.x)},set:function(M){this.modelRotation.x=d(M)}},rotateY:{get:function(){return g(this.modelRotation.y)},set:function(M){this.modelRotation.y=d(M)}},rotateZ:{get:function(){return g(this.modelRotation.z)},set:function(M){this.modelRotation.z=d(M)}}});r.exports=E}),6317:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(){};r.exports=y}),41839:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(88933),m=e(99325),d=e(20494),l=e(10850),h=e(83321);m.register("mesh",function(n,a){n===void 0&&(n={});var c=d(n,"key",null),o=d(n,"frame",null),v=l(n,"vertices",[]),g=l(n,"uvs",[]),p=l(n,"indicies",[]),x=l(n,"containsZ",!1),T=l(n,"normals",[]),E=l(n,"colors",16777215),M=l(n,"alphas",1),P=new h(this.scene,0,0,c,o,v,g,p,x,T,E,M);return a!==void 0&&(n.add=a),u(this.scene,P,n),P})}),8767:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(83321),m=e(61286);m.register("mesh",function(d,l,h,n,a,c,o,v,g,p,x){return this.displayList.add(new u(this.scene,d,l,h,n,a,c,o,v,g,p,x))})}),23464:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),m=u,d=u;m=e(57410),d=e(6317),r.exports={renderWebGL:m,renderCanvas:d}}),57410:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(73329),m=function(d,l,h,n){var a=l.faces,c=a.length;if(c!==0){h.addToRenderList(l);var o=d.pipelines.set(l.pipeline,l),v=u(l,h,n).calc;d.pipelines.preBatch(l);for(var g=o.setGameObject(l),p=o.vertexViewF32,x=o.vertexViewU32,T=o.vertexCount*o.currentShader.vertexComponentCount-1,E=l.tintFill,M=[],P=l.debugCallback,w=v.a,R=v.b,A=v.c,O=v.d,F=v.e,b=v.f,D=l.viewPosition.z,I=l.hideCCW,B=h.roundPixels,z=h.alpha*l.alpha,Y=0,X=0;X<c;X++){var H=a[X];H.isInView(h,I,D,z,w,R,A,O,F,b,B)&&(o.shouldFlush(3)&&(o.flush(),g=o.setGameObject(l),T=0),T=H.load(p,x,T,g,E),Y++,o.vertexCount+=3,o.currentBatch.count=o.vertexCount-o.currentBatch.start,P&&M.push(H))}l.totalFrame+=Y,P&&P.call(l,l,M),d.pipelines.postBatch(l)}};r.exports=m}),44139:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(64937),d=e(89980),l=e(94456),h=e(85769),n=new u({Extends:d,Mixins:[m.AlphaSingle,m.BlendMode,m.Depth,m.GetBounds,m.Mask,m.Origin,m.Pipeline,m.PostPipeline,m.ScrollFactor,m.Texture,m.Transform,m.Visible,l],initialize:function(c,o,v,g,p,x,T,E,M,P,w){x===void 0&&(x=256),T===void 0&&(T=256),E===void 0&&(E=10),M===void 0&&(M=10),P===void 0&&(P=0),w===void 0&&(w=0),d.call(this,c,"NineSlice"),this._width,this._height,this._originX=.5,this._originY=.5,this._sizeComponent=!0,this.vertices=[],this.leftWidth,this.rightWidth,this.topHeight,this.bottomHeight,this.tint=16777215,this.tintFill=!1,this.is3Slice=P===0&&w===0;for(var R=this.is3Slice?18:54,A=0;A<R;A++)this.vertices.push(new h);this.setPosition(o,v),this.setTexture(g,p),this.setSlices(x,T,E,M,P,w),this.setOrigin(.5,.5),this.initPipeline(),this.initPostPipeline()},setSlices:function(a,c,o,v,g,p){a===void 0&&(a=256),c===void 0&&(c=256),o===void 0&&(o=10),v===void 0&&(v=10),g===void 0&&(g=0),p===void 0&&(p=0);var x=g===0&&p===0;return this.is3Slice!==x?console.warn("Cannot change 9 slice to 3 slice"):(this._width=a,this._height=c,this.leftWidth=o,this.rightWidth=v,this.topHeight=g,this.bottomHeight=p,this.is3Slice&&(c=this.frame.height,this._height=c,this.topHeight=c,this.bottomHeight=0),this.updateVertices(),this.updateUVs()),this},updateUVs:function(){var a=this.leftWidth,c=this.rightWidth,o=this.topHeight,v=this.bottomHeight,g=this.frame.width,p=this.frame.height;this.updateQuadUVs(0,0,0,a/g,o/p),this.updateQuadUVs(6,a/g,0,1-c/g,o/p),this.updateQuadUVs(12,1-c/g,0,1,o/p),this.is3Slice||(this.updateQuadUVs(18,0,o/p,a/g,1-v/p),this.updateQuadUVs(24,a/g,o/p,1-c/g,1-v/p),this.updateQuadUVs(30,1-c/g,o/p,1,1-v/p),this.updateQuadUVs(36,0,1-v/p,a/g,1),this.updateQuadUVs(42,a/g,1-v/p,1-c/g,1),this.updateQuadUVs(48,1-c/g,1-v/p,1,1))},updateVertices:function(){var a=this.leftWidth,c=this.rightWidth,o=this.topHeight,v=this.bottomHeight,g=this.width,p=this.height;this.updateQuad(0,-.5,.5,-.5+a/g,.5-o/p),this.updateQuad(6,-.5+a/g,.5,.5-c/g,.5-o/p),this.updateQuad(12,.5-c/g,.5,.5,.5-o/p),this.is3Slice||(this.updateQuad(18,-.5,.5-o/p,-.5+a/g,-.5+v/p),this.updateQuad(24,-.5+a/g,.5-o/p,.5-c/g,-.5+v/p),this.updateQuad(30,.5-c/g,.5-o/p,.5,-.5+v/p),this.updateQuad(36,-.5,-.5+v/p,-.5+a/g,-.5),this.updateQuad(42,-.5+a/g,-.5+v/p,.5-c/g,-.5),this.updateQuad(48,.5-c/g,-.5+v/p,.5,-.5))},updateQuad:function(a,c,o,v,g){var p=this.width,x=this.height,T=this.originX,E=this.originY,M=this.vertices;M[a+0].resize(c,o,p,x,T,E),M[a+1].resize(c,g,p,x,T,E),M[a+2].resize(v,o,p,x,T,E),M[a+3].resize(c,g,p,x,T,E),M[a+4].resize(v,g,p,x,T,E),M[a+5].resize(v,o,p,x,T,E)},updateQuadUVs:function(a,c,o,v,g){var p=this.vertices,x=this.frame,T=x.u0,E=x.v0,M=x.u1,P=x.v1;if(T!==0||M!==1){var w=M-T;c=T+c*w,v=T+v*w}if(E!==0||P!==1){var R=P-E;o=E+o*R,g=E+g*R}p[a+0].setUVs(c,o),p[a+1].setUVs(c,g),p[a+2].setUVs(v,o),p[a+3].setUVs(c,g),p[a+4].setUVs(v,g),p[a+5].setUVs(v,o)},clearTint:function(){return this.setTint(16777215),this},setTint:function(a){return a===void 0&&(a=16777215),this.tint=a,this.tintFill=!1,this},setTintFill:function(a){return this.setTint(a),this.tintFill=!0,this},isTinted:{get:function(){return this.tint!==16777215}},width:{get:function(){return this._width},set:function(a){this._width=Math.max(a,this.leftWidth+this.rightWidth),this.updateVertices()}},height:{get:function(){return this._height},set:function(a){this.is3Slice||(this._height=Math.max(a,this.topHeight+this.bottomHeight),this.updateVertices())}},displayWidth:{get:function(){return this.scaleX*this.width},set:function(a){this.scaleX=a/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(a){this.scaleY=a/this.height}},setSize:function(a,c){this.width=a,this.height=c;var o=this.input;return o&&!o.customHitArea&&(o.hitArea.width=this.width,o.hitArea.height=this.height),this},setDisplaySize:function(a,c){return this.displayWidth=a,this.displayHeight=c,this},originX:{get:function(){return this._originX},set:function(a){this._originX=a,this.updateVertices()}},originY:{get:function(){return this._originY},set:function(a){this._originY=a,this.updateVertices()}},setOrigin:function(a,c){return a===void 0&&(a=.5),c===void 0&&(c=a),this._originX=a,this._originY=c,this.updateVertices(),this.updateDisplayOrigin()},setSizeToFrame:function(){if(this.is3Slice){var a=this.frame.height;this._height=a,this.topHeight=a,this.bottomHeight=0}return this.updateUVs(),this},preDestroy:function(){this.vertices=[]}});r.exports=n}),40964:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(88933),m=e(99325),d=e(20494),l=e(10850),h=e(44139);m.register("nineslice",function(n,a){n===void 0&&(n={});var c=d(n,"key",null),o=d(n,"frame",null),v=l(n,"width",256),g=l(n,"height",256),p=l(n,"leftWidth",10),x=l(n,"rightWidth",10),T=l(n,"topHeight",0),E=l(n,"bottomHeight",0),M=new h(this.scene,0,0,c,o,v,g,p,x,T,E);return a!==void 0&&(n.add=a),u(this.scene,M,n),M})}),53778:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(44139),m=e(61286);m.register("nineslice",function(d,l,h,n,a,c,o,v,g,p){return this.displayList.add(new u(this.scene,d,l,h,n,a,c,o,v,g,p))})}),94456:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),m=u,d=u;m=e(27420),r.exports={renderWebGL:m,renderCanvas:d}}),27420:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(73329),m=e(75512),d=function(l,h,n,a){var c=h.vertices,o=c.length;if(o!==0){n.addToRenderList(h);var v=l.pipelines.set(h.pipeline,h),g=u(h,n,a,!1).calc;l.pipelines.preBatch(h);var p=v.setGameObject(h),x=v.vertexViewF32,T=v.vertexViewU32,E=v.vertexCount*v.currentShader.vertexComponentCount-1,M=n.roundPixels,P=h.tintFill,w=n.alpha*h.alpha,R=m.getTintAppendFloatAlpha(h.tint,w),A=v.vertexAvailable(),O=-1;A<o&&(O=A);for(var F=0;F<o;F++){var b=c[F];F===O&&(v.flush(),p=v.setGameObject(h),E=0),x[++E]=g.getXRound(b.vx,b.vy,M),x[++E]=g.getYRound(b.vx,b.vy,M),x[++E]=b.u,x[++E]=b.v,x[++E]=p,x[++E]=P,T[++E]=R,v.vertexCount++,v.currentBatch.count=v.vertexCount-v.currentBatch.start}l.pipelines.postBatch(h)}};r.exports=d}),19737:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(93025),d=e(22946),l=e(21902),h=e(4840),n=e(15978),a=new u({Extends:m,initialize:function(o){m.call(this,o,null,!1),this.active=!1,this.easeName="Linear",this.r=[],this.g=[],this.b=[]},getMethod:function(){return this.propertyValue===null?0:9},setMethods:function(){var c=this.propertyValue,o=c,v=this.defaultEmit,g=this.defaultUpdate;if(this.method===9){this.start=c[0],this.ease=l("Linear"),this.interpolation=h("linear"),v=this.easedValueEmit,g=this.easeValueUpdate,o=c[0],this.active=!0;for(var p=0;p<c.length;p++){var x=n(c[p]);this.r.push(x.r),this.g.push(x.g),this.b.push(x.b)}}return this.onEmit=v,this.onUpdate=g,this.current=o,this},setEase:function(c){this.easeName=c,this.ease=l(c)},easedValueEmit:function(){return this.current=this.start,this.start},easeValueUpdate:function(c,o,v){var g=this.ease(v),p=this.interpolation(this.r,g),x=this.interpolation(this.g,g),T=this.interpolation(this.b,g),E=d(p,x,T);return this.current=E,E}});r.exports=a}),93025:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(17489),m=e(82897),d=e(56694),l=e(61616),h=e(21902),n=e(72632),a=e(4840),c=e(88462),o=e(1071),v=new d({initialize:function(p,x,T){T===void 0&&(T=!1),this.propertyKey=p,this.propertyValue=x,this.defaultValue=x,this.steps=0,this.counter=0,this.yoyo=!1,this.direction=0,this.start=0,this.current=0,this.end=0,this.ease=null,this.interpolation=null,this.emitOnly=T,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.active=!0,this.method=0,this._onEmit,this._onUpdate},loadConfig:function(g,p){g===void 0&&(g={}),p&&(this.propertyKey=p),this.propertyValue=n(g,this.propertyKey,this.defaultValue),this.method=this.getMethod(),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return JSON.stringify(this.propertyValue)},onChange:function(g){var p;switch(this.method){case 1:case 3:case 8:p=g;break;case 2:this.propertyValue.indexOf(g)>=0&&(p=g);break;case 4:var x=(this.end-this.start)/this.steps;p=c(g,x),this.counter=p;break;case 5:case 6:case 7:p=m(g,this.start,this.end);break;case 9:p=this.start[0];break}return this.current=p,this},getMethod:function(){var g=this.propertyValue;if(g===null)return 0;var p=typeof g;if(p==="number")return 1;if(Array.isArray(g))return 2;if(p==="function")return 3;if(p==="object"){if(this.hasBoth(g,"start","end"))return this.has(g,"steps")?4:5;if(this.hasBoth(g,"min","max"))return 6;if(this.has(g,"random"))return 7;if(this.hasEither(g,"onEmit","onUpdate"))return 8;if(this.has(g,"interpolation"))return 9}return 0},setMethods:function(){var g=this.propertyValue,p=g,x=this.defaultEmit,T=this.defaultUpdate;switch(this.method){case 1:x=this.staticValueEmit;break;case 2:x=this.randomStaticValueEmit,p=g[0];break;case 3:this._onEmit=g,x=this.proxyEmit;break;case 4:this.start=g.start,this.end=g.end,this.steps=g.steps,this.counter=this.start,this.yoyo=this.has(g,"yoyo")?g.yoyo:!1,this.direction=0,x=this.steppedEmit,p=this.start;break;case 5:this.start=g.start,this.end=g.end;var E=this.has(g,"ease")?g.ease:"Linear";this.ease=h(E,g.easeParams),x=this.has(g,"random")&&g.random?this.randomRangedValueEmit:this.easedValueEmit,T=this.easeValueUpdate,p=this.start;break;case 6:this.start=g.min,this.end=g.max,x=this.has(g,"int")&&g.int?this.randomRangedIntEmit:this.randomRangedValueEmit,p=this.start;break;case 7:var M=g.random;Array.isArray(M)&&(this.start=M[0],this.end=M[1]),x=this.randomRangedIntEmit,p=this.start;break;case 8:this._onEmit=this.has(g,"onEmit")?g.onEmit:this.defaultEmit,this._onUpdate=this.has(g,"onUpdate")?g.onUpdate:this.defaultUpdate,x=this.proxyEmit,T=this.proxyUpdate;break;case 9:this.start=g.values;var P=this.has(g,"ease")?g.ease:"Linear";this.ease=h(P,g.easeParams),this.interpolation=a(g.interpolation),x=this.easedValueEmit,T=this.easeValueUpdate,p=this.start[0];break}return this.onEmit=x,this.onUpdate=T,this.current=p,this},has:function(g,p){return g.hasOwnProperty(p)},hasBoth:function(g,p,x){return g.hasOwnProperty(p)&&g.hasOwnProperty(x)},hasEither:function(g,p,x){return g.hasOwnProperty(p)||g.hasOwnProperty(x)},defaultEmit:function(g,p,x){return x},defaultUpdate:function(g,p,x,T){return T},proxyEmit:function(g,p,x){var T=this._onEmit(g,p,x);return this.current=T,T},proxyUpdate:function(g,p,x,T){var E=this._onUpdate(g,p,x,T);return this.current=E,E},staticValueEmit:function(){return this.current},staticValueUpdate:function(){return this.current},randomStaticValueEmit:function(){var g=Math.floor(Math.random()*this.propertyValue.length);return this.current=this.propertyValue[g],this.current},randomRangedValueEmit:function(g,p){var x=l(this.start,this.end);return g&&g.data[p]&&(g.data[p].min=x,g.data[p].max=this.end),this.current=x,x},randomRangedIntEmit:function(g,p){var x=u(this.start,this.end);return g&&g.data[p]&&(g.data[p].min=x,g.data[p].max=this.end),this.current=x,x},steppedEmit:function(){var g=this.counter,p=g,x=(this.end-this.start)/this.steps;if(this.yoyo){var T;this.direction===0?(p+=x,p>=this.end&&(T=p-this.end,p=this.end-T,this.direction=1)):(p-=x,p<=this.start&&(T=this.start-p,p=this.start+T,this.direction=0)),this.counter=p}else this.counter=o(p+x,this.start,this.end);return this.current=g,g},easedValueEmit:function(g,p){if(g&&g.data[p]){var x=g.data[p];x.min=this.start,x.max=this.end}return this.current=this.start,this.start},easeValueUpdate:function(g,p,x){var T=g.data[p],E,M=this.ease(x);return this.interpolation?E=this.interpolation(this.start,M):E=(T.max-T.min)*M+T.min,this.current=E,E},destroy:function(){this.propertyValue=null,this.defaultValue=null,this.ease=null,this.interpolation=null,this._onEmit=null,this._onUpdate=null}});r.exports=v}),87811:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(72632),d=e(30891),l=new u({Extends:d,initialize:function(n,a,c,o,v){if(typeof n=="object"){var g=n;n=m(g,"x",0),a=m(g,"y",0),c=m(g,"power",0),o=m(g,"epsilon",100),v=m(g,"gravity",50)}else n===void 0&&(n=0),a===void 0&&(a=0),c===void 0&&(c=0),o===void 0&&(o=100),v===void 0&&(v=50);d.call(this,n,a,!0),this._gravity=v,this._power=c*v,this._epsilon=o*o},update:function(h,n){var a=this.x-h.x,c=this.y-h.y,o=a*a+c*c;if(o!==0){var v=Math.sqrt(o);o<this._epsilon&&(o=this._epsilon);var g=this._power*n/(o*v)*100;h.velocityX+=a*g,h.velocityY+=c*g}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(h){this._epsilon=h*h}},power:{get:function(){return this._power/this._gravity},set:function(h){this._power=h*this._gravity}},gravity:{get:function(){return this._gravity},set:function(h){var n=this.power;this._gravity=h,this.power=n}}});r.exports=l}),14909:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(16569),m=e(82897),d=e(56694),l=e(75606),h=e(74118),n=e(2386),a=e(93736),c=new d({initialize:function(v){this.emitter=v,this.texture=null,this.frame=null,this.x=0,this.y=0,this.worldPosition=new a,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.holdCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1},x:{min:0,max:0},y:{min:0,max:0},accelerationX:{min:0,max:0},accelerationY:{min:0,max:0},maxVelocityX:{min:0,max:0},maxVelocityY:{min:0,max:0},moveToX:{min:0,max:0},moveToY:{min:0,max:0},bounce:{min:0,max:0}},this.isCropped=!1,this.scene=v.scene,this.anims=new u(this),this.bounds=new h},emit:function(o,v,g,p,x,T){return this.emitter.emit(o,v,g,p,x,T)},isAlive:function(){return this.lifeCurrent>0},kill:function(){this.lifeCurrent=0},setPosition:function(o,v){o===void 0&&(o=0),v===void 0&&(v=0),this.x=o,this.y=v},fire:function(o,v){var g=this.emitter,p=g.ops,x=g.getAnim();if(x?this.anims.play(x):(this.frame=g.getFrame(),this.texture=this.frame.texture),!this.frame)throw new Error("Particle has no texture frame");if(g.getEmitZone(this),o===void 0?this.x+=p.x.onEmit(this,"x"):p.x.steps>0?this.x+=o+p.x.onEmit(this,"x"):this.x+=o,v===void 0?this.y+=p.y.onEmit(this,"y"):p.y.steps>0?this.y+=v+p.y.onEmit(this,"y"):this.y+=v,this.life=p.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0,this.delayCurrent=p.delay.onEmit(this,"delay"),this.holdCurrent=p.hold.onEmit(this,"hold"),this.scaleX=p.scaleX.onEmit(this,"scaleX"),this.scaleY=p.scaleY.active?p.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=p.rotate.onEmit(this,"rotate"),this.rotation=l(this.angle),g.worldMatrix.transformPoint(this.x,this.y,this.worldPosition),this.delayCurrent===0&&g.getDeathZone(this))return this.lifeCurrent=0,!1;var T=p.speedX.onEmit(this,"speedX"),E=p.speedY.active?p.speedY.onEmit(this,"speedY"):T;if(g.radial){var M=l(p.angle.onEmit(this,"angle"));this.velocityX=Math.cos(M)*Math.abs(T),this.velocityY=Math.sin(M)*Math.abs(E)}else if(g.moveTo){var P=p.moveToX.onEmit(this,"moveToX"),w=p.moveToY.onEmit(this,"moveToY"),R=this.life/1e3;this.velocityX=(P-this.x)/R,this.velocityY=(w-this.y)/R}else this.velocityX=T,this.velocityY=E;return g.acceleration&&(this.accelerationX=p.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=p.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=p.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=p.maxVelocityY.onEmit(this,"maxVelocityY"),this.bounce=p.bounce.onEmit(this,"bounce"),this.alpha=p.alpha.onEmit(this,"alpha"),p.color.active?this.tint=p.color.onEmit(this,"tint"):this.tint=p.tint.onEmit(this,"tint"),!0},update:function(o,v,g){if(this.lifeCurrent<=0)return this.holdCurrent>0?(this.holdCurrent-=o,this.holdCurrent<=0):!0;if(this.delayCurrent>0)return this.delayCurrent-=o,!1;this.anims.update(0,o);var p=this.emitter,x=p.ops,T=1-this.lifeCurrent/this.life;if(this.lifeT=T,this.x=x.x.onUpdate(this,"x",T,this.x),this.y=x.y.onUpdate(this,"y",T,this.y),p.moveTo){var E=x.moveToX.onUpdate(this,"moveToX",T,p.moveToX),M=x.moveToY.onUpdate(this,"moveToY",T,p.moveToY),P=this.lifeCurrent/1e3;this.velocityX=(E-this.x)/P,this.velocityY=(M-this.y)/P}return this.computeVelocity(p,o,v,g,T),this.scaleX=x.scaleX.onUpdate(this,"scaleX",T,this.scaleX),this.scaleY=this.scaleX,x.scaleY.active&&(this.scaleY=x.scaleY.onUpdate(this,"scaleY",T,this.scaleY)),this.angle=x.rotate.onUpdate(this,"rotate",T,this.angle),this.rotation=l(this.angle),p.getDeathZone(this)?(this.lifeCurrent=0,!0):(this.alpha=x.alpha.onUpdate(this,"alpha",T,this.alpha),x.color.active?this.tint=x.color.onUpdate(this,"color",T,this.tint):this.tint=x.tint.onUpdate(this,"tint",T,this.tint),this.lifeCurrent-=o,this.lifeCurrent<=0&&this.holdCurrent<=0)},computeVelocity:function(o,v,g,p,x){var T=o.ops,E=this.velocityX,M=this.velocityY,P=T.accelerationX.onUpdate(this,"accelerationX",x,this.accelerationX),w=T.accelerationY.onUpdate(this,"accelerationY",x,this.accelerationY),R=T.maxVelocityX.onUpdate(this,"maxVelocityX",x,this.maxVelocityX),A=T.maxVelocityY.onUpdate(this,"maxVelocityY",x,this.maxVelocityY);this.bounce=T.bounce.onUpdate(this,"bounce",x,this.bounce),E+=o.gravityX*g+P*g,M+=o.gravityY*g+w*g,E=m(E,-R,R),M=m(M,-A,A),this.velocityX=E,this.velocityY=M,this.x+=E*g,this.y+=M*g,o.worldMatrix.transformPoint(this.x,this.y,this.worldPosition);for(var O=0;O<p.length;O++){var F=p[O];F.active&&F.update(this,v,g,x)}},setSizeToFrame:function(){},getBounds:function(o){o===void 0&&(o=this.emitter.getWorldTransformMatrix());var v=Math.abs(o.scaleX)*this.scaleX,g=Math.abs(o.scaleY)*this.scaleY,p=this.x,x=this.y,T=this.rotation,E=this.frame.width*v/2,M=this.frame.height*g/2,P=this.bounds,w=new a(p-E,x-M),R=new a(p+E,x-M),A=new a(p-E,x+M),O=new a(p+E,x+M);return T!==0&&(n(w,p,x,T),n(R,p,x,T),n(A,p,x,T),n(O,p,x,T)),o.transformPoint(w.x,w.y,w),o.transformPoint(R.x,R.y,R),o.transformPoint(A.x,A.y,A),o.transformPoint(O.x,O.y,O),P.x=Math.min(w.x,R.x,A.x,O.x),P.y=Math.min(w.y,R.y,A.y,O.y),P.width=Math.max(w.x,R.x,A.x,O.x)-P.x,P.height=Math.max(w.y,R.y,A.y,O.y)-P.y,P},destroy:function(){this.anims.destroy(),this.anims=null,this.emitter=null,this.texture=null,this.frame=null,this.scene=null}});r.exports=c}),73106:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(30891),d=e(74118),l=new u({Extends:m,initialize:function(n,a,c,o,v,g,p,x){v===void 0&&(v=!0),g===void 0&&(g=!0),p===void 0&&(p=!0),x===void 0&&(x=!0),m.call(this,n,a,!0),this.bounds=new d(n,a,c,o),this.collideLeft=v,this.collideRight=g,this.collideTop=p,this.collideBottom=x},update:function(h){var n=this.bounds,a=-h.bounce,c=h.worldPosition;c.x<n.x&&this.collideLeft?(h.x+=n.x-c.x,h.velocityX*=a):c.x>n.right&&this.collideRight&&(h.x-=c.x-n.right,h.velocityX*=a),c.y<n.y&&this.collideTop?(h.y+=n.y-c.y,h.velocityY*=a):c.y>n.bottom&&this.collideBottom&&(h.y-=c.y-n.bottom,h.velocityY*=a)}});r.exports=l}),9216:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(64937),d=e(48129),l=e(29538),h=e(69361),n=e(54213),a=e(19737),c=e(93025),o=e(40629),v=e(89980),g=e(72632),p=e(72861),x=e(87811),T=e(53523),E=e(19256),M=e(7782),P=e(71207),w=e(14655),R=e(14909),A=e(68433),O=e(74118),F=e(90205),b=e(66458),D=e(69116),I=e(17922),B=e(69360),z=e(93736),Y=e(1071),X=e(73106),H=["active","advance","blendMode","colorEase","deathCallback","deathCallbackScope","duration","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxAliveParticles","maxParticles","name","emitting","particleBringToTop","particleClass","radial","sortCallback","sortOrderAsc","sortProperty","stopAfter","tintFill","timeScale","trackVisible","visible"],N=["accelerationX","accelerationY","alpha","angle","bounce","color","delay","hold","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],U=new u({Extends:v,Mixins:[m.AlphaSingle,m.BlendMode,m.Depth,m.Mask,m.Pipeline,m.PostPipeline,m.ScrollFactor,m.Texture,m.Transform,m.Visible,D],initialize:function(G,V,k,W,$){v.call(this,G,"ParticleEmitter"),this.particleClass=R,this.ops={accelerationX:new c("accelerationX",0),accelerationY:new c("accelerationY",0),alpha:new c("alpha",1),angle:new c("angle",{min:0,max:360},!0),bounce:new c("bounce",0),color:new a("color"),delay:new c("delay",0,!0),hold:new c("hold",0,!0),lifespan:new c("lifespan",1e3,!0),maxVelocityX:new c("maxVelocityX",1e4),maxVelocityY:new c("maxVelocityY",1e4),moveToX:new c("moveToX",0),moveToY:new c("moveToY",0),quantity:new c("quantity",1,!0),rotate:new c("rotate",0),scaleX:new c("scaleX",1),scaleY:new c("scaleY",1),speedX:new c("speedX",0,!0),speedY:new c("speedY",0,!0),tint:new c("tint",16777215),x:new c("x",0),y:new c("y",0)},this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.moveTo=!1,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.maxAliveParticles=0,this.stopAfter=0,this.duration=0,this.frequency=0,this.emitting=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZones=[],this.deathZones=[],this.viewBounds=null,this.follow=null,this.followOffset=new z,this.trackVisible=!1,this.frames=[],this.randomFrame=!0,this.frameQuantity=1,this.anims=[],this.randomAnim=!0,this.animQuantity=1,this.dead=[],this.alive=[],this.counters=new Float32Array(10),this.skipping=!1,this.worldMatrix=new B,this.sortProperty="",this.sortOrderAsc=!0,this.sortCallback=this.depthSortCallback,this.processors=new P(this),this.tintFill=!1,this.initPipeline(),this.initPostPipeline(),this.setPosition(V,k),this.setTexture(W),$&&this.setConfig($)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setConfig:function(L){if(!L)return this;var G=0,V="",k=this.ops;for(G=0;G<N.length;G++)V=N[G],k[V].loadConfig(L);for(G=0;G<H.length;G++)V=H[G],E(L,V)&&(this[V]=g(L,V));if(this.acceleration=this.accelerationX!==0||this.accelerationY!==0,this.moveTo=this.moveToX!==0&&this.moveToY!==0,E(L,"speed")&&(k.speedX.loadConfig(L,"speed"),k.speedY.active=!1),(T(L,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),E(L,"scale")&&(k.scaleX.loadConfig(L,"scale"),k.scaleY.active=!1),E(L,"callbackScope")){var W=g(L,"callbackScope",null);this.emitCallbackScope=W,this.deathCallbackScope=W}if(E(L,"emitZone")&&this.addEmitZone(L.emitZone),E(L,"deathZone")&&this.addDeathZone(L.deathZone),E(L,"bounds")){var $=this.addParticleBounds(L.bounds);$.collideLeft=g(L,"collideLeft",!0),$.collideRight=g(L,"collideRight",!0),$.collideTop=g(L,"collideTop",!0),$.collideBottom=g(L,"collideBottom",!0)}return E(L,"followOffset")&&this.followOffset.setFromObject(g(L,"followOffset",0)),E(L,"texture")&&this.setTexture(L.texture),E(L,"frame")?this.setEmitterFrame(L.frame):E(L,"anim")&&this.setAnim(L.anim),E(L,"reserve")&&this.reserve(L.reserve),E(L,"advance")&&this.fastForward(L.advance),this.resetCounters(this.frequency,this.emitting),this.emitting&&this.emit(o.START,this),this},toJSON:function(){var L=d(this),G=0,V="";for(G=0;G<H.length;G++)V=H[G],L[V]=this[V];var k=this.ops;for(G=0;G<N.length;G++)V=N[G],k[V]&&(L[V]=k[V].toJSON());return k.speedY.active||(delete L.speedX,L.speed=k.speedX.toJSON()),this.scaleX===this.scaleY&&(delete L.scaleX,delete L.scaleY,L.scale=k.scaleX.toJSON()),L},resetCounters:function(L,G){var V=this.counters;V.fill(0),V[0]=L,G&&(V[5]=1)},startFollow:function(L,G,V,k){return G===void 0&&(G=0),V===void 0&&(V=0),k===void 0&&(k=!1),this.follow=L,this.followOffset.set(G,V),this.trackVisible=k,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){var L=this.frames,G=L.length,V;return G===1?V=L[0]:this.randomFrame?V=p(L):(V=L[this.currentFrame],this.frameCounter++,this.frameCounter===this.frameQuantity&&(this.frameCounter=0,this.currentFrame++,this.currentFrame===G&&(this.currentFrame=0))),this.texture.get(V)},setEmitterFrame:function(L,G,V){G===void 0&&(G=!0),V===void 0&&(V=1),this.randomFrame=G,this.frameQuantity=V,this.currentFrame=0;var k=typeof L;if(this.frames.length=0,Array.isArray(L))this.frames=this.frames.concat(L);else if(k==="string"||k==="number")this.frames.push(L);else if(k==="object"){var W=L;L=g(W,"frames",null),L&&(this.frames=this.frames.concat(L));var $=g(W,"cycle",!1);this.randomFrame=!$,this.frameQuantity=g(W,"quantity",V)}return this.frames.length===1&&(this.frameQuantity=1,this.randomFrame=!1),this},getAnim:function(){var L=this.anims,G=L.length;if(G===0)return null;if(G===1)return L[0];if(this.randomAnim)return p(L);var V=L[this.currentAnim];return this.animCounter++,this.animCounter>=this.animQuantity&&(this.animCounter=0,this.currentAnim=Y(this.currentAnim+1,0,G-1)),V},setAnim:function(L,G,V){G===void 0&&(G=!0),V===void 0&&(V=1),this.randomAnim=G,this.animQuantity=V,this.currentAnim=0;var k=typeof L;if(this.anims.length=0,Array.isArray(L))this.anims=this.anims.concat(L);else if(k==="string")this.anims.push(L);else if(k==="object"){var W=L;L=g(W,"anims",null),L&&(this.anims=this.anims.concat(L));var $=g(W,"cycle",!1);this.randomAnim=!$,this.animQuantity=g(W,"quantity",V)}return this.anims.length===1&&(this.animQuantity=1,this.randomAnim=!1),this},setRadial:function(L){return L===void 0&&(L=!0),this.radial=L,this},addParticleBounds:function(L,G,V,k,W,$,K,j){if(typeof L=="object"){var Z=L;L=Z.x,G=Z.y,V=E(Z,"w")?Z.w:Z.width,k=E(Z,"h")?Z.h:Z.height}return this.addParticleProcessor(new X(L,G,V,k,W,$,K,j))},setParticleSpeed:function(L,G){return G===void 0&&(G=L),this.ops.speedX.onChange(L),L===G?this.ops.speedY.active=!1:this.ops.speedY.onChange(G),this.radial=!0,this},setParticleScale:function(L,G){return L===void 0&&(L=1),G===void 0&&(G=L),this.ops.scaleX.onChange(L),this.ops.scaleY.onChange(G),this},setParticleGravity:function(L,G){return this.gravityX=L,this.gravityY=G,this},setParticleAlpha:function(L){return this.ops.alpha.onChange(L),this},setParticleTint:function(L){return this.ops.tint.onChange(L),this},setEmitterAngle:function(L){return this.ops.angle.onChange(L),this},setParticleLifespan:function(L){return this.ops.lifespan.onChange(L),this},setQuantity:function(L){return this.quantity=L,this},setFrequency:function(L,G){return this.frequency=L,this.flowCounter=L>0?L:0,G&&(this.quantity=G),this},addDeathZone:function(L){Array.isArray(L)||(L=[L]);for(var G,V=this.deathZones,k=0;k<L.length;k++)if(G=L[k],G instanceof h)V.push(G);else if(typeof G.contains=="function")G=new h(G,!0),V.push(G);else{var W=g(G,"type","onEnter"),$=g(G,"source",null);if($&&typeof $.contains=="function"){var K=W==="onEnter";G=new h($,K),V.push(G)}}return G},removeDeathZone:function(L){return b(this.deathZones,L),this},addEmitZone:function(L){Array.isArray(L)||(L=[L]);for(var G,V=this.emitZones,k=[],W=0;W<L.length;W++){if(G=L[W],G instanceof A||G instanceof n)V.push(G);else{var $=g(G,"type","random"),K=g(G,"source",null);if($==="random")G=new A(K);else if($==="edge"){var j=g(G,"quantity",1),Z=g(G,"stepRate",0),J=g(G,"yoyo",!1),Q=g(G,"seamless",!0),_=g(G,"total",-1);G=new n(K,j,Z,J,Q,_)}G&&V.push(G)}k.push(G)}return k},removeEmitZone:function(L){return b(this.emitZones,L),this.zoneIndex=0,this},getEmitZone:function(L){var G=this.emitZones,V=G.length;if(V!==0){var k=G[this.zoneIndex];k.getPoint(L),k.total>-1&&(this.zoneTotal++,this.zoneTotal===k.total&&(this.zoneTotal=0,this.zoneIndex++,this.zoneIndex===V&&(this.zoneIndex=0)))}},getDeathZone:function(L){for(var G=this.deathZones,V=0;V<G.length;V++){var k=G[V];if(k.willKill(L))return this.emit(o.DEATH_ZONE,this,L,k),!0}return!1},setEmitZone:function(L){var G;return isFinite(L)?G=L:G=this.emitZones.indexOf(L),G>=0&&(this.zoneIndex=G),this},addParticleProcessor:function(L){return this.processors.exists(L)||(L.emitter&&L.emitter.removeParticleProcessor(L),this.processors.add(L),L.emitter=this),L},removeParticleProcessor:function(L){return this.processors.exists(L)&&(this.processors.remove(L,!0),L.emitter=null),L},getProcessors:function(){return this.processors.getAll("active",!0)},createGravityWell:function(L){return this.addParticleProcessor(new x(L))},reserve:function(L){var G=this.dead;if(this.maxParticles>0){var V=this.getParticleCount();V+L>this.maxParticles&&(L=this.maxParticles-(V+L))}for(var k=0;k<L;k++)G.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()>=this.maxParticles?!0:this.maxAliveParticles>0&&this.getAliveParticleCount()>=this.maxAliveParticles},onParticleEmit:function(L,G){return L===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof L=="function"&&(this.emitCallback=L,G&&(this.emitCallbackScope=G)),this},onParticleDeath:function(L,G){return L===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof L=="function"&&(this.deathCallback=L,G&&(this.deathCallbackScope=G)),this},killAll:function(){for(var L=this.dead,G=this.alive;G.length>0;)L.push(G.pop());return this},forEachAlive:function(L,G){for(var V=this.alive,k=V.length,W=0;W<k;W++)L.call(G,V[W],this);return this},forEachDead:function(L,G){for(var V=this.dead,k=V.length,W=0;W<k;W++)L.call(G,V[W],this);return this},start:function(L,G){return L===void 0&&(L=0),this.emitting||(L>0&&this.fastForward(L),this.emitting=!0,this.resetCounters(this.frequency,!0),G!==void 0&&(this.duration=Math.abs(G)),this.emit(o.START,this)),this},stop:function(L){return L===void 0&&(L=!1),this.emitting&&(this.emitting=!1,L&&this.killAll(),this.emit(o.STOP,this)),this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},setSortProperty:function(L,G){return L===void 0&&(L=""),G===void 0&&(G=this.true),this.sortProperty=L,this.sortOrderAsc=G,this.sortCallback=this.depthSortCallback,this},setSortCallback:function(L){return this.sortProperty!==""?L=this.depthSortCallback:L=null,this.sortCallback=L,this},depthSort:function(){return I(this.alive,this.sortCallback.bind(this)),this},depthSortCallback:function(L,G){var V=this.sortProperty;return this.sortOrderAsc?L[V]-G[V]:G[V]-L[V]},flow:function(L,G,V){return G===void 0&&(G=1),this.emitting=!1,this.frequency=L,this.quantity=G,V!==void 0&&(this.stopAfter=V),this.start()},explode:function(L,G,V){this.frequency=-1,this.resetCounters(-1,!0);var k=this.emitParticle(L,G,V);return this.emit(o.EXPLODE,this,k),k},emitParticleAt:function(L,G,V){return this.emitParticle(V,L,G)},emitParticle:function(L,G,V){if(!this.atLimit()){L===void 0&&(L=this.ops.quantity.onEmit());for(var k=this.dead,W=this.stopAfter,$=this.follow?this.follow.x+this.followOffset.x:G,K=this.follow?this.follow.y+this.followOffset.y:V,j=0;j<L;j++){var Z=k.pop();if(Z||(Z=new this.particleClass(this)),Z.fire($,K)?(this.particleBringToTop?this.alive.push(Z):this.alive.unshift(Z),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,Z,this)):this.dead.push(Z),W>0&&(this.stopCounter++,this.stopCounter>=W)||this.atLimit())break}return Z}},fastForward:function(L,G){G===void 0&&(G=1e3/60);var V=0;for(this.skipping=!0;V<Math.abs(L);)this.preUpdate(0,G),V+=G;return this.skipping=!1,this},preUpdate:function(L,G){G*=this.timeScale;var V=G/1e3;this.trackVisible&&(this.visible=this.follow.visible),this.getWorldTransformMatrix(this.worldMatrix);var k=this.getProcessors(),W=this.alive,$=this.dead,K=0,j=[],Z=W.length;for(K=0;K<Z;K++){var J=W[K];J.update(G,V,k)&&j.push({index:K,particle:J})}if(Z=j.length,Z>0){var Q=this.deathCallback,_=this.deathCallbackScope;for(K=Z-1;K>=0;K--){var q=j[K];W.splice(q.index,1),$.push(q.particle),Q&&Q.call(_,q.particle),q.particle.setPosition()}}if(!this.emitting&&!this.skipping){this.completeFlag===1&&W.length===0&&(this.completeFlag=0,this.emit(o.COMPLETE,this));return}if(this.frequency===0)this.emitParticle();else if(this.frequency>0)for(this.flowCounter-=G;this.flowCounter<=0;)this.emitParticle(),this.flowCounter+=this.frequency;this.skipping||(this.duration>0&&(this.elapsed+=G,this.elapsed>=this.duration&&this.stop()),this.stopAfter>0&&this.stopCounter>=this.stopAfter&&this.stop())},overlap:function(L){for(var G=this.getWorldTransformMatrix(),V=this.alive,k=V.length,W=[],$=0;$<k;$++){var K=V[$];F(L,K.getBounds(G))&&W.push(K)}return W},getBounds:function(L,G,V,k){L===void 0&&(L=0),G===void 0&&(G=0),V===void 0&&(V=1e3/60),k===void 0&&(k=new O);var W=this.getWorldTransformMatrix(),$,K,j=this.alive,Z=!1;if(k.setTo(0,0,0,0),G>0){var J=0;for(this.skipping=!0;J<Math.abs(G);){for(this.preUpdate(0,V),$=0;$<j.length;$++)K=j[$].getBounds(W),Z?w(k,K):(Z=!0,l(K,k));J+=V}this.skipping=!1}else for($=0;$<j.length;$++)K=j[$].getBounds(W),Z?w(k,K):(Z=!0,l(K,k));return L>0&&M(k,L,L),k},createEmitter:function(){throw new Error("createEmitter removed. See ParticleEmitter docs for info")},particleX:{get:function(){return this.ops.x.current},set:function(L){this.ops.x.onChange(L)}},particleY:{get:function(){return this.ops.y.current},set:function(L){this.ops.y.onChange(L)}},accelerationX:{get:function(){return this.ops.accelerationX.current},set:function(L){this.ops.accelerationX.onChange(L)}},accelerationY:{get:function(){return this.ops.accelerationY.current},set:function(L){this.ops.accelerationY.onChange(L)}},maxVelocityX:{get:function(){return this.ops.maxVelocityX.current},set:function(L){this.ops.maxVelocityX.onChange(L)}},maxVelocityY:{get:function(){return this.ops.maxVelocityY.current},set:function(L){this.ops.maxVelocityY.onChange(L)}},speed:{get:function(){return this.ops.speedX.current},set:function(L){this.ops.speedX.onChange(L),this.ops.speedY.onChange(L)}},speedX:{get:function(){return this.ops.speedX.current},set:function(L){this.ops.speedX.onChange(L)}},speedY:{get:function(){return this.ops.speedY.current},set:function(L){this.ops.speedY.onChange(L)}},moveToX:{get:function(){return this.ops.moveToX.current},set:function(L){this.ops.moveToX.onChange(L)}},moveToY:{get:function(){return this.ops.moveToY.current},set:function(L){this.ops.moveToY.onChange(L)}},bounce:{get:function(){return this.ops.bounce.current},set:function(L){this.ops.bounce.onChange(L)}},particleScaleX:{get:function(){return this.ops.scaleX.current},set:function(L){this.ops.scaleX.onChange(L)}},particleScaleY:{get:function(){return this.ops.scaleY.current},set:function(L){this.ops.scaleY.onChange(L)}},particleColor:{get:function(){return this.ops.color.current},set:function(L){this.ops.color.onChange(L)}},colorEase:{get:function(){return this.ops.color.easeName},set:function(L){this.ops.color.setEase(L)}},particleTint:{get:function(){return this.ops.tint.current},set:function(L){this.ops.tint.onChange(L)}},particleAlpha:{get:function(){return this.ops.alpha.current},set:function(L){this.ops.alpha.onChange(L)}},lifespan:{get:function(){return this.ops.lifespan.current},set:function(L){this.ops.lifespan.onChange(L)}},particleAngle:{get:function(){return this.ops.angle.current},set:function(L){this.ops.angle.onChange(L)}},particleRotate:{get:function(){return this.ops.rotate.current},set:function(L){this.ops.rotate.onChange(L)}},quantity:{get:function(){return this.ops.quantity.current},set:function(L){this.ops.quantity.onChange(L)}},delay:{get:function(){return this.ops.delay.current},set:function(L){this.ops.delay.onChange(L)}},hold:{get:function(){return this.ops.hold.current},set:function(L){this.ops.hold.onChange(L)}},flowCounter:{get:function(){return this.counters[0]},set:function(L){this.counters[0]=L}},frameCounter:{get:function(){return this.counters[1]},set:function(L){this.counters[1]=L}},animCounter:{get:function(){return this.counters[2]},set:function(L){this.counters[2]=L}},elapsed:{get:function(){return this.counters[3]},set:function(L){this.counters[3]=L}},stopCounter:{get:function(){return this.counters[4]},set:function(L){this.counters[4]=L}},completeFlag:{get:function(){return this.counters[5]},set:function(L){this.counters[5]=L}},zoneIndex:{get:function(){return this.counters[6]},set:function(L){this.counters[6]=L}},zoneTotal:{get:function(){return this.counters[7]},set:function(L){this.counters[7]=L}},currentFrame:{get:function(){return this.counters[8]},set:function(L){this.counters[8]=L}},currentAnim:{get:function(){return this.counters[9]},set:function(L){this.counters[9]=L}},preDestroy:function(){this.texture=null,this.frames=null,this.anims=null,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.emitZones=null,this.deathZones=null,this.bounds=null,this.follow=null,this.counters=null;var L,G=this.ops;for(L=0;L<N.length;L++){var V=N[L];G[V].destroy()}for(L=0;L<this.alive.length;L++)this.alive[L].destroy();for(L=0;L<this.dead.length;L++)this.dead[L].destroy();this.ops=null,this.alive=[],this.dead=[],this.worldMatrix.destroy()}});r.exports=U}),10456:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(90205),m=e(69360),d=new m,l=new m,h=new m,n=new m,a=function(c,o,v,g){var p=d,x=l,T=h,E=n;g?(E.loadIdentity(),E.multiply(g),E.translate(o.x,o.y),E.rotate(o.rotation),E.scale(o.scaleX,o.scaleY)):E.applyITRS(o.x,o.y,o.rotation,o.scaleX,o.scaleY);var M=c.currentContext,P=v.roundPixels,w=v.alpha,R=o.alpha,A=o.alive,O=A.length,F=o.viewBounds;if(!(!o.visible||O===0||F&&!u(F,v.worldView))){o.sortCallback&&o.depthSort(),v.addToRenderList(o);var b=o.scrollFactorX,D=o.scrollFactorY;M.save(),M.globalCompositeOperation=c.blendModes[o.blendMode];for(var I=0;I<O;I++){var B=A[I],z=B.alpha*R*w;if(!(z<=0||B.scaleX===0||B.scaleY===0)){T.applyITRS(B.x,B.y,B.rotation,B.scaleX,B.scaleY),p.copyFrom(v.matrix),p.multiplyWithOffset(E,-v.scrollX*b,-v.scrollY*D),T.e=B.x,T.f=B.y,p.multiply(T,x);var Y=B.frame,X=Y.canvasData;if(X.width>0&&X.height>0){var H=-Y.halfWidth,N=-Y.halfHeight;M.globalAlpha=z,M.save(),x.setToContext(M),P&&(H=Math.round(H),N=Math.round(N)),M.imageSmoothingEnabled=!Y.source.scaleMode,M.drawImage(Y.source.image,X.x,X.y,X.width,X.height,H,N,X.width,X.height),M.restore()}}}M.restore()}};r.exports=a}),765:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(88933),m=e(99325),d=e(20494),l=e(72632),h=e(9216);m.register("particles",function(n,a){n===void 0&&(n={});var c=d(n,"key",null),o=l(n,"config",null),v=new h(this.scene,0,0,c);return a!==void 0&&(n.add=a),u(this.scene,v,n),o&&v.setConfig(o),v})}),81212:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61286),m=e(9216);u.register("particles",function(d,l,h,n){return d!==void 0&&typeof d=="string"&&console.warn("ParticleEmitterManager was removed in Phaser 3.60. See documentation for details"),this.displayList.add(new m(this.scene,d,l,h,n))})}),69116:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),m=u,d=u;m=e(10275),d=e(10456),r.exports={renderWebGL:m,renderCanvas:d}}),10275:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(90205),m=e(69360),d=e(75512),l=new m,h=new m,n=new m,a=new m,c=function(o,v,g,p){var x=o.pipelines.set(v.pipeline),T=l,E=h,M=n,P=a;p?(P.loadIdentity(),P.multiply(p),P.translate(v.x,v.y),P.rotate(v.rotation),P.scale(v.scaleX,v.scaleY)):P.applyITRS(v.x,v.y,v.rotation,v.scaleX,v.scaleY);var w=g.roundPixels,R=d.getTintAppendFloatAlpha,A=g.alpha,O=v.alpha,F=v.frame.glTexture;o.pipelines.preBatch(v);var b=v.alive,D=b.length,I=v.viewBounds;if(!(D===0||I&&!u(I,g.worldView))){v.sortCallback&&v.depthSort();var B=x.setGameObject(v,v.frame);g.addToRenderList(v),T.copyFrom(g.matrix),T.multiplyWithOffset(P,-g.scrollX*v.scrollFactorX,-g.scrollY*v.scrollFactorY),o.setBlendMode(v.blendMode),v.mask&&(v.mask.preRenderWebGL(o,v,g),o.pipelines.set(v.pipeline));for(var z=v.tintFill,Y=0;Y<D;Y++){var X=b[Y],H=X.alpha*O*A;if(!(H<=0||X.scaleX===0||X.scaleY===0)){M.applyITRS(X.x,X.y,X.rotation,X.scaleX,X.scaleY),M.e=X.x,M.f=X.y,T.multiply(M,E);var N=X.frame,U=-N.halfWidth,L=-N.halfHeight,G=E.setQuad(U,L,U+N.width,L+N.height,w),V=R(X.tint,H);x.shouldFlush(6)&&(x.flush(),B=x.setGameObject(v,v.frame)),x.batchQuad(v,G[0],G[1],G[2],G[3],G[4],G[5],G[6],G[7],N.u0,N.v0,N.u1,N.v1,V,V,V,V,z,F,B)}}v.mask&&v.mask.postRenderWebGL(o,g),o.pipelines.postBatch(v)}};r.exports=c}),30891:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=new u({initialize:function(l,h,n){l===void 0&&(l=0),h===void 0&&(h=0),n===void 0&&(n=!0),this.emitter,this.x=l,this.y=h,this.active=n},update:function(){},destroy:function(){this.emitter=null}});r.exports=m}),76100:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="complete"}),26677:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="deathzone"}),62736:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="explode"}),56490:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="start"}),85715:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="stop"}),40629:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={COMPLETE:e(76100),DEATH_ZONE:e(26677),EXPLODE:e(62736),START:e(56490),STOP:e(85715)}}),27684:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={EmitterColorOp:e(19737),EmitterOp:e(93025),Events:e(40629),GravityWell:e(87811),Particle:e(14909),ParticleBounds:e(73106),ParticleEmitter:e(9216),ParticleProcessor:e(30891),Zones:e(25962)}}),69361:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=new u({initialize:function(l,h){this.source=l,this.killOnEnter=h},willKill:function(d){var l=d.worldPosition,h=this.source.contains(l.x,l.y);return h&&this.killOnEnter||!h&&!this.killOnEnter}});r.exports=m}),54213:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=new u({initialize:function(l,h,n,a,c,o){a===void 0&&(a=!1),c===void 0&&(c=!0),o===void 0&&(o=-1),this.source=l,this.points=[],this.quantity=h,this.stepRate=n,this.yoyo=a,this.counter=-1,this.seamless=c,this._length=0,this._direction=0,this.total=o,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var d=this.points[0],l=this.points[this.points.length-1];d.x===l.x&&d.y===l.y&&this.points.pop()}var h=this._length;return this._length=this.points.length,this._length<h&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(d){return this.source=d,this.updateSource()},getPoint:function(d){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var l=this.points[this.counter];l&&(d.x=l.x,d.y=l.y)}});r.exports=m}),68433:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(93736),d=new u({initialize:function(h){this.source=h,this._tempVec=new m,this.total=-1},getPoint:function(l){var h=this._tempVec;this.source.getRandomPoint(h),l.x=h.x,l.y=h.y}});r.exports=d}),25962:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={DeathZone:e(69361),EdgeZone:e(54213),RandomZone:e(68433)}}),29598:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(64937),d=e(13747),l=new u({Extends:d,Mixins:[m.PathFollower],initialize:function(n,a,c,o,v,g){d.call(this,n,c,o,v,g),this.path=a},preUpdate:function(h,n){this.anims.update(h,n),this.pathUpdate(h)}});r.exports=l}),19626:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61286),m=e(29598);u.register("follower",function(d,l,h,n,a){var c=new m(this.scene,d,l,h,n,a);return this.displayList.add(c),this.updateList.add(c),c})}),33412:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(16569),m=e(56694),d=e(99425),l=e(15978),h=e(83321),n=e(76583),a=new m({Extends:h,initialize:function(o,v,g,p,x,T,E,M){p||(p="__DEFAULT"),h.call(this,o,v,g,p,x),this.type="Plane",this.anims=new u(this),this.gridWidth,this.gridHeight,this.isTiled,this._checkerboard=null,this.hideCCW=!1,this.setGridSize(T,E,M),this.setSizeToFrame(!1),this.setViewHeight()},setGridSize:function(c,o,v){c===void 0&&(c=8),o===void 0&&(o=8),v===void 0&&(v=!1);var g=!1;return v&&(g=!0),this.gridWidth=c,this.gridHeight=o,this.isTiled=v,this.clear(),d({mesh:this,widthSegments:c,heightSegments:o,isOrtho:!1,tile:v,flipY:g}),this},setSizeToFrame:function(c){c===void 0&&(c=!0);var o=this.frame;if(this.setPerspective(this.width/o.width,this.height/o.height),this._checkerboard&&this._checkerboard!==this.texture&&this.removeCheckerboard(),!c)return this;var v=this.gridWidth,g=this.gridHeight,p=this.vertices,x=o.u0,T=o.u1,E=o.v0,M=o.v1,P,w,R=0;if(this.isTiled)for(E=o.v1,M=o.v0,w=0;w<g;w++)for(P=0;P<v;P++)p[R++].setUVs(x,M),p[R++].setUVs(x,E),p[R++].setUVs(T,M),p[R++].setUVs(x,E),p[R++].setUVs(T,E),p[R++].setUVs(T,M);else{var A=v+1,O=g+1,F=T-x,b=M-E,D=[];for(w=0;w<O;w++)for(P=0;P<A;P++){var I=x+F*(P/v),B=E+b*(w/g);D.push(I,B)}for(w=0;w<g;w++)for(P=0;P<v;P++){var z=(P+A*w)*2,Y=(P+A*(w+1))*2,X=(P+1+A*(w+1))*2,H=(P+1+A*w)*2;p[R++].setUVs(D[z],D[z+1]),p[R++].setUVs(D[Y],D[Y+1]),p[R++].setUVs(D[H],D[H+1]),p[R++].setUVs(D[Y],D[Y+1]),p[R++].setUVs(D[X],D[X+1]),p[R++].setUVs(D[H],D[H+1])}}return this},setViewHeight:function(c){c===void 0&&(c=this.frame.height);var o=this.fov*(Math.PI/180);this.viewPosition.z=this.height/c/Math.tan(o/2),this.dirtyCache[10]=1},createCheckerboard:function(c,o,v,g,p){c===void 0&&(c=16777215),o===void 0&&(o=255),v===void 0&&(v=255),g===void 0&&(g=255),p===void 0&&(p=128);var x=this.scene.sys.renderer.gl,T=x.createTexture();x.activeTexture(x.TEXTURE0),x.bindTexture(x.TEXTURE_2D,T),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,x.NEAREST),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,x.NEAREST);for(var E=l(c),M=l(o),P=[],w=0;w<16;w++)for(var R=0;R<16;R++)w<8&&R<8||w>7&&R>7?P.push(E.r,E.g,E.b,v):P.push(M.r,M.g,M.b,g);x.texImage2D(x.TEXTURE_2D,0,x.RGBA,16,16,0,x.RGBA,x.UNSIGNED_BYTE,new Uint8Array(P)),T.isAlphaPremultiplied=!0,T.isRenderTexture=!1,T.width=16,T.height=16;var A=this.scene.sys.textures.addGLTexture(n(),T,16,16);return this.removeCheckerboard(),this._checkerboard=A,x.bindTexture(x.TEXTURE_2D,null),this.setTexture(A),this.setSizeToFrame(),this.setViewHeight(p),this},removeCheckerboard:function(){this._checkerboard&&(this._checkerboard.destroy(),this._checkerboard=null)},play:function(c,o){return this.anims.play(c,o)},playReverse:function(c,o){return this.anims.playReverse(c,o)},playAfterDelay:function(c,o){return this.anims.playAfterDelay(c,o)},playAfterRepeat:function(c,o){return this.anims.playAfterRepeat(c,o)},stop:function(){return this.anims.stop()},stopAfterDelay:function(c){return this.anims.stopAfterDelay(c)},stopAfterRepeat:function(c){return this.anims.stopAfterRepeat(c)},stopOnFrame:function(c){return this.anims.stopOnFrame(c)},preUpdate:function(c,o){h.prototype.preUpdate.call(this,c,o),this.anims.update(c,o)},preDestroy:function(){this.clear(),this.removeCheckerboard(),this.anims.destroy(),this.anims=void 0,this.debugCallback=null,this.debugGraphic=null}});r.exports=a}),10912:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(88933),m=e(32291),d=e(99325),l=e(20494),h=e(10850),n=e(33412);d.register("plane",function(a,c){a===void 0&&(a={});var o=l(a,"key",null),v=l(a,"frame",null),g=h(a,"width",8),p=h(a,"height",8),x=h(a,"tile",!1),T=new n(this.scene,0,0,o,v,g,p,x);c!==void 0&&(a.add=c);var E=h(a,"checkerboard",null);if(E){var M=h(E,"color1",16777215),P=h(E,"color2",255),w=h(E,"alpha1",255),R=h(E,"alpha2",255),A=h(E,"height",128);T.createCheckerboard(M,P,w,R,A)}return u(this.scene,T,a),m(T,a),T})}),58322:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(33412),m=e(61286);m.register("plane",function(d,l,h,n,a,c,o){return this.displayList.add(new u(this.scene,d,l,h,n,a,c,o))})}),13171:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(64937),d=e(89980),l=e(74853),h=e(65641),n=e(71606),a=new u({Extends:d,Mixins:[m.AlphaSingle,m.BlendMode,m.Depth,m.Mask,m.Pipeline,m.PostPipeline,m.ScrollFactor,m.Transform,m.Visible,n],initialize:function(o,v,g,p,x,T,E){p===void 0&&(p=16777215),x===void 0&&(x=128),T===void 0&&(T=1),E===void 0&&(E=.1),d.call(this,o,"PointLight"),this.initPipeline(h.POINTLIGHT_PIPELINE),this.initPostPipeline(),this.setPosition(v,g),this.color=l(p),this.intensity=T,this.attenuation=E,this.width=x*2,this.height=x*2,this._radius=x},radius:{get:function(){return this._radius},set:function(c){this._radius=c,this.width=c*2,this.height=c*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});r.exports=a}),162:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(88933),m=e(99325),d=e(20494),l=e(13171);m.register("pointlight",function(h,n){h===void 0&&(h={});var a=d(h,"color",16777215),c=d(h,"radius",128),o=d(h,"intensity",1),v=d(h,"attenuation",.1),g=new l(this.scene,0,0,a,c,o,v);return n!==void 0&&(h.add=n),u(this.scene,g,h),g})}),91201:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61286),m=e(13171);u.register("pointlight",function(d,l,h,n,a,c){return this.displayList.add(new m(this.scene,d,l,h,n,a,c))})}),71606:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),m=u,d=u;m=e(80590),r.exports={renderWebGL:m,renderCanvas:d}}),80590:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(73329),m=function(d,l,h,n){h.addToRenderList(l);var a=d.pipelines.set(l.pipeline),c=u(l,h,n).calc,o=l.width,v=l.height,g=-l._radius,p=-l._radius,x=g+o,T=p+v,E=c.getX(0,0),M=c.getY(0,0),P=c.getX(g,p),w=c.getY(g,p),R=c.getX(g,T),A=c.getY(g,T),O=c.getX(x,T),F=c.getY(x,T),b=c.getX(x,p),D=c.getY(x,p);d.pipelines.preBatch(l),a.batchPointLight(l,h,P,w,R,A,O,F,b,D,E,M),d.pipelines.postBatch(l)};r.exports=m}),15996:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(845),d=e(1539),l=new u({Extends:d,initialize:function(n,a,c,o,v){a===void 0&&(a=0),c===void 0&&(c=0),o===void 0&&(o=32),v===void 0&&(v=32);var g=new m(n.sys.textures,"",o,v);d.call(this,n,a,c,g),this.type="RenderTexture",this.camera=this.texture.camera,this._saved=!1},setSize:function(h,n){this.width=h,this.height=n,this.texture.setSize(h,n),this.updateDisplayOrigin();var a=this.input;return a&&!a.customHitArea&&(a.hitArea.width=h,a.hitArea.height=n),this},resize:function(h,n){return this.setSize(h,n),this},saveTexture:function(h){var n=this.texture;return n.key=h,n.manager.addDynamicTexture(n)&&(this._saved=!0),n},fill:function(h,n,a,c,o,v){return this.texture.fill(h,n,a,c,o,v),this},clear:function(){return this.texture.clear(),this},stamp:function(h,n,a,c,o){return this.texture.stamp(h,n,a,c,o),this},erase:function(h,n,a){return this.texture.erase(h,n,a),this},draw:function(h,n,a,c,o){return this.texture.draw(h,n,a,c,o),this},drawFrame:function(h,n,a,c,o,v){return this.texture.drawFrame(h,n,a,c,o,v),this},repeat:function(h,n,a,c,o,v,g,p,x){return this.texture.repeat(h,n,a,c,o,v,g,p,x),this},beginDraw:function(){return this.texture.beginDraw(),this},batchDraw:function(h,n,a,c,o){return this.texture.batchDraw(h,n,a,c,o),this},batchDrawFrame:function(h,n,a,c,o,v){return this.texture.batchDrawFrame(h,n,a,c,o,v),this},endDraw:function(h){return this.texture.endDraw(h),this},snapshotArea:function(h,n,a,c,o,v,g){return this.texture.snapshotArea(h,n,a,c,o,v,g),this},snapshot:function(h,n,a){return this.snapshotArea(0,0,this.width,this.height,h,n,a)},snapshotPixel:function(h,n,a){return this.snapshotArea(h,n,1,1,a,"pixel")},preDestroy:function(){this._saved||this.texture.destroy()}});r.exports=l}),85692:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(88933),m=e(99325),d=e(20494),l=e(15996);m.register("renderTexture",function(h,n){h===void 0&&(h={});var a=d(h,"x",0),c=d(h,"y",0),o=d(h,"width",32),v=d(h,"height",32),g=new l(this.scene,a,c,o,v);return n!==void 0&&(h.add=n),u(this.scene,g,h),g})}),29599:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61286),m=e(15996);u.register("renderTexture",function(d,l,h,n){return this.displayList.add(new m(this.scene,d,l,h,n))})}),79968:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(16569),m=e(56694),d=e(64937),l=e(89980),h=e(65641),n=e(58912),a=e(93736),c=new m({Extends:l,Mixins:[d.AlphaSingle,d.BlendMode,d.Depth,d.Flip,d.Mask,d.Pipeline,d.PostPipeline,d.Size,d.Texture,d.Transform,d.Visible,d.ScrollFactor,n],initialize:function(v,g,p,x,T,E,M,P,w){x===void 0&&(x="__DEFAULT"),E===void 0&&(E=2),M===void 0&&(M=!0),l.call(this,v,"Rope"),this.anims=new u(this),this.points=E,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=x==="__DEFAULT",this.dirty=!1,this.horizontal=M,this._flipX=!1,this._flipY=!1,this._perp=new a,this.debugCallback=null,this.debugGraphic=null,this.setTexture(x,T),this.setPosition(g,p),this.setSizeToFrame(),this.initPipeline(h.ROPE_PIPELINE),Array.isArray(E)&&this.resizeArrays(E.length),this.setPoints(E,P,w),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(o,v){var g=this.anims.currentFrame;this.anims.update(o,v),this.anims.currentFrame!==g&&(this.updateUVs(),this.updateVertices())},play:function(o,v,g){return this.anims.play(o,v,g),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(o,v,g){return o===void 0&&(o=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(o,v,g))},setVertical:function(o,v,g){return o===void 0&&(o=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(o,v,g)):this},setTintFill:function(o){return o===void 0&&(o=!1),this.tintFill=o,this},setAlphas:function(o,v){var g=this.points.length;if(g<1)return this;var p=this.alphas;o===void 0?o=[1]:!Array.isArray(o)&&v===void 0&&(o=[o]);var x,T=0;if(v!==void 0)for(x=0;x<g;x++)T=x*2,p[T]=o,p[T+1]=v;else if(o.length===g)for(x=0;x<g;x++)T=x*2,p[T]=o[x],p[T+1]=o[x];else{var E=o[0];for(x=0;x<g;x++)T=x*2,o.length>T&&(E=o[T]),p[T]=E,o.length>T+1&&(E=o[T+1]),p[T+1]=E}return this},setColors:function(o){var v=this.points.length;if(v<1)return this;var g=this.colors;o===void 0?o=[16777215]:Array.isArray(o)||(o=[o]);var p,x=0;if(o.length===v)for(p=0;p<v;p++)x=p*2,g[x]=o[p],g[x+1]=o[p];else{var T=o[0];for(p=0;p<v;p++)x=p*2,o.length>x&&(T=o[x]),g[x]=T,o.length>x+1&&(T=o[x+1]),g[x+1]=T}return this},setPoints:function(o,v,g){if(o===void 0&&(o=2),typeof o=="number"){var p=o;p<2&&(p=2),o=[];var x,T,E;if(this.horizontal)for(E=-this.frame.halfWidth,T=this.frame.width/(p-1),x=0;x<p;x++)o.push({x:E+x*T,y:0});else for(E=-this.frame.halfHeight,T=this.frame.height/(p-1),x=0;x<p;x++)o.push({x:0,y:E+x*T})}var M=o.length,P=this.points.length;return M<1?(console.warn("Rope: Not enough points given"),this):(M===1&&(o.unshift({x:0,y:0}),M++),P!==M&&this.resizeArrays(M),this.dirty=!0,this.points=o,this.updateUVs(),v!=null&&this.setColors(v),g!=null&&this.setAlphas(g),this)},updateUVs:function(){for(var o=this.uv,v=this.points.length,g=this.frame.u0,p=this.frame.v0,x=this.frame.u1,T=this.frame.v1,E=(x-g)/(v-1),M=(T-p)/(v-1),P=0;P<v;P++){var w=P*4,R,A,O,F;this.horizontal?(this._flipX?(R=x-P*E,O=x-P*E):(R=g+P*E,O=g+P*E),this._flipY?(A=T,F=p):(A=p,F=T)):(this._flipX?(R=g,O=x):(R=x,O=g),this._flipY?(A=T-P*M,F=T-P*M):(A=p+P*M,F=p+P*M)),o[w+0]=R,o[w+1]=A,o[w+2]=O,o[w+3]=F}return this},resizeArrays:function(o){var v=this.colors,g=this.alphas;this.vertices=new Float32Array(o*4),this.uv=new Float32Array(o*4),v=new Uint32Array(o*2),g=new Float32Array(o*2);for(var p=0;p<o*2;p++)v[p]=16777215,g[p]=1;return this.colors=v,this.alphas=g,this.dirty=!0,this},updateVertices:function(){var o=this._perp,v=this.points,g=this.vertices,p=v.length;if(this.dirty=!1,!(p<1)){for(var x,T=v[0],E=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,M=0;M<p;M++){var P=v[M],w=M*4;M<p-1?x=v[M+1]:x=P,o.x=x.y-T.y,o.y=-(x.x-T.x);var R=o.length();o.x/=R,o.y/=R,o.x*=E,o.y*=E,g[w]=P.x+o.x,g[w+1]=P.y+o.y,g[w+2]=P.x-o.x,g[w+3]=P.y-o.y,T=P}return this}},setDebug:function(o,v){return this.debugGraphic=o,!o&&!v?this.debugCallback=null:v?this.debugCallback=v:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(o,v,g){var p=o.debugGraphic,x=g[0],T=g[1],E=g[2],M=g[3];p.lineBetween(x,T,E,M);for(var P=4;P<v;P+=4){var w=g[P+0],R=g[P+1],A=g[P+2],O=g[P+3];p.lineBetween(x,T,w,R),p.lineBetween(E,M,A,O),p.lineBetween(E,M,w,R),p.lineBetween(w,R,A,O),x=w,T=R,E=A,M=O}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(o){return this._flipX=o,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(o){return this._flipY=o,this.updateUVs()}}});r.exports=c}),44598:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(){};r.exports=y}),96027:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(88933),m=e(99325),d=e(20494),l=e(10850),h=e(79968);m.register("rope",function(n,a){n===void 0&&(n={});var c=d(n,"key",null),o=d(n,"frame",null),v=d(n,"horizontal",!0),g=l(n,"points",void 0),p=l(n,"colors",void 0),x=l(n,"alphas",void 0),T=new h(this.scene,0,0,c,o,g,v,p,x);return a!==void 0&&(n.add=a),u(this.scene,T,n),T})}),31982:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79968),m=e(61286);m.register("rope",function(d,l,h,n,a,c,o,v){return this.displayList.add(new u(this.scene,d,l,h,n,a,c,o,v))})}),58912:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),m=u,d=u;m=e(49489),d=e(44598),r.exports={renderWebGL:m,renderCanvas:d}}),49489:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(73329),m=e(75512),d=function(l,h,n,a){n.addToRenderList(h);var c=l.pipelines.set(h.pipeline,h),o=u(h,n,a).calc,v=h.vertices,g=h.uv,p=h.colors,x=h.alphas,T=h.alpha,E=m.getTintAppendFloatAlpha,M=n.roundPixels,P=v.length,w=Math.floor(P*.5);c.flush(),l.pipelines.preBatch(h);var R=c.setGameObject(h),A=c.vertexViewF32,O=c.vertexViewU32,F=c.vertexCount*c.currentShader.vertexComponentCount-1,b=0,D=h.tintFill;h.dirty&&h.updateVertices();for(var I=h.debugCallback,B=[],z=0;z<P;z+=2){var Y=v[z+0],X=v[z+1],H=Y*o.a+X*o.c+o.e,N=Y*o.b+X*o.d+o.f;M&&(H=Math.round(H),N=Math.round(N)),A[++F]=H,A[++F]=N,A[++F]=g[z+0],A[++F]=g[z+1],A[++F]=R,A[++F]=D,O[++F]=E(p[b],n.alpha*(x[b]*T)),b++,I&&(B[z+0]=H,B[z+1]=N)}I&&I.call(h,h,P,B),c.vertexCount+=w,c.currentBatch.count=c.vertexCount-c.currentBatch.start,l.pipelines.postBatch(h)};r.exports=d}),27902:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(64937),d=e(89980),l=e(72632),h=e(98611),n=e(22440),a=e(24252),c=e(69360),o=new u({Extends:d,Mixins:[m.ComputedSize,m.Depth,m.GetBounds,m.Mask,m.Origin,m.ScrollFactor,m.Transform,m.Visible,a],initialize:function(g,p,x,T,E,M,P,w){x===void 0&&(x=0),T===void 0&&(T=0),E===void 0&&(E=128),M===void 0&&(M=128),d.call(this,g,"Shader"),this.blendMode=-1,this.shader;var R=g.sys.renderer;this.renderer=R,this.gl=R.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=R.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new c,this._tempMatrix2=new c,this._tempMatrix3=new c,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=R.width,this._rendererHeight=R.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(x,T),this.setSize(E,M),this.setOrigin(.5,.5),this.setShader(p,P,w)},willRender:function(v){return this.renderToTexture?!0:!(d.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&v.id)},setRenderToTexture:function(v,g){if(g===void 0&&(g=!1),!this.renderToTexture){var p=this.width,x=this.height,T=this.renderer;this.glTexture=T.createTextureFromSource(null,p,x,0),this.glTexture.flipY=g,this.framebuffer=T.createFramebuffer(p,x,this.glTexture,!1),this._rendererWidth=p,this._rendererHeight=x,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),v&&(this.texture=this.scene.sys.textures.addGLTexture(v,this.glTexture,p,x))}return this.shader&&(T.pipelines.clear(),this.load(),this.flush(),T.pipelines.rebind()),this},setShader:function(v,g,p){if(g===void 0&&(g=[]),typeof v=="string"){var x=this.scene.sys.cache.shader;if(!x.has(v))return console.warn("Shader missing: "+v),this;this.shader=x.get(v)}else this.shader=v;var T=this.gl,E=this.renderer;this.program&&T.deleteProgram(this.program);var M=E.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);T.uniformMatrix4fv(T.getUniformLocation(M,"uViewMatrix"),!1,this.viewMatrix),T.uniformMatrix4fv(T.getUniformLocation(M,"uProjectionMatrix"),!1,this.projectionMatrix),T.uniform2f(T.getUniformLocation(M,"uResolution"),this.width,this.height),this.program=M;var P=new Date,w={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[P.getFullYear(),P.getMonth(),P.getDate(),P.getHours()*60*60+P.getMinutes()*60+P.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=h(!0,{},this.shader.uniforms,w):this.uniforms=w;for(var R=0;R<4;R++)g[R]&&this.setSampler2D("iChannel"+R,g[R],R,p);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(v){return this.pointer=v,this},projOrtho:function(v,g,p,x){var T=-1e3,E=1e3,M=1/(v-g),P=1/(p-x),w=1/(T-E),R=this.projectionMatrix;R[0]=-2*M,R[5]=-2*P,R[10]=2*w,R[12]=(v+g)*M,R[13]=(x+p)*P,R[14]=(E+T)*w;var A=this.program,O=this.gl,F=this.renderer;F.setProgram(A),O.uniformMatrix4fv(O.getUniformLocation(A,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=g,this._rendererHeight=p},initUniforms:function(){var v=this.gl,g=this.renderer.glFuncMap,p=this.program;this._textureCount=0;for(var x in this.uniforms){var T=this.uniforms[x],E=T.type,M=g[E];T.uniformLocation=v.getUniformLocation(p,x),E!=="sampler2D"&&(T.glMatrix=M.matrix,T.glValueLength=M.length,T.glFunc=M.func)}},setSampler2DBuffer:function(v,g,p,x,T,E){T===void 0&&(T=0),E===void 0&&(E={});var M=this.uniforms[v];return M.value=g,E.width=p,E.height=x,M.textureData=E,this._textureCount=T,this.initSampler2D(M),this},setSampler2D:function(v,g,p,x){p===void 0&&(p=0);var T=this.scene.sys.textures;if(T.exists(g)){var E=T.getFrame(g);if(E.glTexture&&E.glTexture.isRenderTexture)return this.setSampler2DBuffer(v,E.glTexture,E.width,E.height,p,x);var M=this.uniforms[v],P=E.source;M.textureKey=g,M.source=P.image,M.value=E.glTexture,P.isGLTexture&&(x||(x={}),x.width=P.width,x.height=P.height),x&&(M.textureData=x),this._textureCount=p,this.initSampler2D(M)}return this},setUniform:function(v,g){return n(this.uniforms,v,g),this},getUniform:function(v){return l(this.uniforms,v,null)},setChannel0:function(v,g){return this.setSampler2D("iChannel0",v,0,g)},setChannel1:function(v,g){return this.setSampler2D("iChannel1",v,1,g)},setChannel2:function(v,g){return this.setSampler2D("iChannel2",v,2,g)},setChannel3:function(v,g){return this.setSampler2D("iChannel3",v,3,g)},initSampler2D:function(v){if(v.value){var g=this.gl;g.activeTexture(g.TEXTURE0+this._textureCount),g.bindTexture(g.TEXTURE_2D,v.value);var p=v.textureData;if(p&&!v.value.isRenderTexture){var x=g[l(p,"magFilter","linear").toUpperCase()],T=g[l(p,"minFilter","linear").toUpperCase()],E=g[l(p,"wrapS","repeat").toUpperCase()],M=g[l(p,"wrapT","repeat").toUpperCase()],P=g[l(p,"format","rgba").toUpperCase()];if(p.repeat&&(E=g.REPEAT,M=g.REPEAT),g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,!!p.flipY),p.width){var w=l(p,"width",512),R=l(p,"height",2),A=l(p,"border",0);g.texImage2D(g.TEXTURE_2D,0,P,w,R,A,P,g.UNSIGNED_BYTE,null)}else g.texImage2D(g.TEXTURE_2D,0,P,g.RGBA,g.UNSIGNED_BYTE,v.source);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,x),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,T),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,E),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,M)}this.renderer.setProgram(this.program),g.uniform1i(v.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function(){var v=this.gl,g=this.uniforms,p,x,T,E,M,P=0;for(var w in g)p=g[w],T=p.glFunc,x=p.glValueLength,E=p.uniformLocation,M=p.value,M!==null&&(x===1?p.glMatrix?T.call(v,E,p.transpose,M):T.call(v,E,M):x===2?T.call(v,E,M.x,M.y):x===3?T.call(v,E,M.x,M.y,M.z):x===4?T.call(v,E,M.x,M.y,M.z,M.w):p.type==="sampler2D"&&(v.activeTexture(v.TEXTURE0+P),v.bindTexture(v.TEXTURE_2D,M),v.uniform1i(E,P),P++))},load:function(v){var g=this.gl,p=this.width,x=this.height,T=this.renderer,E=this.program,M=this.viewMatrix;if(!this.renderToTexture){var P=-this._displayOriginX,w=-this._displayOriginY;M[0]=v[0],M[1]=v[1],M[4]=v[2],M[5]=v[3],M[8]=v[4],M[9]=v[5],M[12]=M[0]*P+M[4]*w,M[13]=M[1]*P+M[5]*w}g.useProgram(E),g.uniformMatrix4fv(g.getUniformLocation(E,"uViewMatrix"),!1,M),g.uniform2f(g.getUniformLocation(E,"uResolution"),this.width,this.height);var R=this.uniforms,A=R.resolution;A.value.x=p,A.value.y=x,R.time.value=T.game.loop.getDuration();var O=this.pointer;if(O){var F=R.mouse,b=O.x/p,D=1-O.y/x;F.value.x=b.toFixed(2),F.value.y=D.toFixed(2)}this.syncUniforms()},flush:function(){var v=this.width,g=this.height,p=this.program,x=this.gl,T=this.vertexBuffer,E=this.renderer,M=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(E.setFramebuffer(this.framebuffer),x.clearColor(0,0,0,0),x.clear(x.COLOR_BUFFER_BIT)),x.bindBuffer(x.ARRAY_BUFFER,T);var P=x.getAttribLocation(p,"inPosition");P!==-1&&(x.enableVertexAttribArray(P),x.vertexAttribPointer(P,2,x.FLOAT,!1,M,0));var w=this.vertexViewF32;w[3]=g,w[4]=v,w[5]=g,w[8]=v,w[9]=g,w[10]=v;var R=6;x.bufferSubData(x.ARRAY_BUFFER,0,this.bytes.subarray(0,R*M)),x.drawArrays(x.TRIANGLES,0,R),this.renderToTexture&&E.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var v=this.gl;v.deleteProgram(this.program),v.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});r.exports=o}),10612:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(){};r.exports=y}),13908:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(88933),m=e(99325),d=e(20494),l=e(27902);m.register("shader",function(h,n){h===void 0&&(h={});var a=d(h,"key",null),c=d(h,"x",0),o=d(h,"y",0),v=d(h,"width",128),g=d(h,"height",128),p=new l(this.scene,a,c,o,v,g);return n!==void 0&&(h.add=n),u(this.scene,p,h),p})}),51979:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(27902),m=e(61286);m.register("shader",function(d,l,h,n,a,c,o){return this.displayList.add(new u(this.scene,d,l,h,n,a,c,o))})}),24252:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),m=u,d=u;m=e(19782),d=e(10612),r.exports={renderWebGL:m,renderCanvas:d}}),19782:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(73329),m=function(d,l,h,n){if(l.shader){if(h.addToRenderList(l),d.pipelines.clear(),l.renderToTexture)l.load(),l.flush();else{var a=u(l,h,n).calc;(d.width!==l._rendererWidth||d.height!==l._rendererHeight)&&l.projOrtho(0,d.width,d.height,0),l.load(a.matrix),l.flush()}d.pipelines.rebind()}};r.exports=m}),19543:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(75512),m=function(d,l,h,n,a,c){for(var o=u.getTintAppendFloatAlpha(h.fillColor,h.fillAlpha*n),v=h.pathData,g=h.pathIndexes,p=0;p<g.length;p+=3){var x=g[p]*2,T=g[p+1]*2,E=g[p+2]*2,M=v[x+0]-a,P=v[x+1]-c,w=v[T+0]-a,R=v[T+1]-c,A=v[E+0]-a,O=v[E+1]-c,F=l.getX(M,P),b=l.getY(M,P),D=l.getX(w,R),I=l.getY(w,R),B=l.getX(A,O),z=l.getY(A,O);d.batchTri(h,F,b,D,I,B,z,0,0,1,1,o,o,o,2)}};r.exports=m}),15608:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d){var l=m||u.fillColor,h=d||u.fillAlpha,n=(l&16711680)>>>16,a=(l&65280)>>>8,c=l&255;e.fillStyle="rgba("+n+","+a+","+c+","+h+")"};r.exports=y}),17876:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d){var l=m||u.strokeColor,h=d||u.strokeAlpha,n=(l&16711680)>>>16,a=(l&65280)>>>8,c=l&255;e.strokeStyle="rgba("+n+","+a+","+c+","+h+")",e.lineWidth=u.lineWidth};r.exports=y}),91461:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(64937),d=e(89980),l=e(88829),h=new u({Extends:d,Mixins:[m.AlphaSingle,m.BlendMode,m.Depth,m.GetBounds,m.Mask,m.Origin,m.Pipeline,m.PostPipeline,m.ScrollFactor,m.Transform,m.Visible],initialize:function(a,c,o){c===void 0&&(c="Shape"),d.call(this,a,c),this.geom=o,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new l,this.width=0,this.height=0,this.initPipeline(),this.initPostPipeline()},setFillStyle:function(n,a){return a===void 0&&(a=1),n===void 0?this.isFilled=!1:(this.fillColor=n,this.fillAlpha=a,this.isFilled=!0),this},setStrokeStyle:function(n,a,c){return c===void 0&&(c=1),n===void 0?this.isStroked=!1:(this.lineWidth=n,this.strokeColor=a,this.strokeAlpha=c,this.isStroked=!0),this},setClosePath:function(n){return this.closePath=n,this},setSize:function(n,a){return this.width=n,this.height=a,this},setDisplaySize:function(n,a){return this.displayWidth=n,this.displayHeight=a,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(n){this.scaleX=n/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(n){this.scaleY=n/this.height}}});r.exports=h}),50262:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(75512),m=function(d,l,h,n,a){var c=d.strokeTint,o=u.getTintAppendFloatAlpha(l.strokeColor,l.strokeAlpha*h);c.TL=o,c.TR=o,c.BL=o,c.BR=o;var v=l.pathData,g=v.length-1,p=l.lineWidth,x=p/2,T=v[0]-n,E=v[1]-a;l.closePath||(g-=2);for(var M=2;M<g;M+=2){var P=v[M]-n,w=v[M+1]-a;d.batchLine(T,E,P,w,x,x,p,M-2,l.closePath?M===g-1:!1),T=P,E=w}};r.exports=m}),28593:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(2213),m=e(56694),d=e(75606),l=e(11117),h=e(26673),n=e(83392),a=e(91461),c=new m({Extends:a,Mixins:[u],initialize:function(v,g,p,x,T,E,M,P,w){g===void 0&&(g=0),p===void 0&&(p=0),x===void 0&&(x=128),T===void 0&&(T=0),E===void 0&&(E=360),M===void 0&&(M=!1),a.call(this,v,"Arc",new h(0,0,x)),this._startAngle=T,this._endAngle=E,this._anticlockwise=M,this._iterations=.01,this.setPosition(g,p);var R=this.geom.radius*2;this.setSize(R,R),P!==void 0&&this.setFillStyle(P,w),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(o){this._iterations=o,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(o){this.geom.radius=o;var v=o*2;this.setSize(v,v),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(o){this._startAngle=o,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(o){this._endAngle=o,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(o){this._anticlockwise=o,this.updateData()}},setRadius:function(o){return this.radius=o,this},setIterations:function(o){return o===void 0&&(o=.01),this.iterations=o,this},setStartAngle:function(o,v){return this._startAngle=o,v!==void 0&&(this._anticlockwise=v),this.updateData()},setEndAngle:function(o,v){return this._endAngle=o,v!==void 0&&(this._anticlockwise=v),this.updateData()},updateData:function(){var o=this._iterations,v=o,g=this.geom.radius,p=d(this._startAngle),x=d(this._endAngle),T=this._anticlockwise,E=g,M=g;x-=p,T?x<-n.PI2?x=-n.PI2:x>0&&(x=-n.PI2+x%n.PI2):x>n.PI2?x=n.PI2:x<0&&(x=n.PI2+x%n.PI2);for(var P=[E+Math.cos(p)*g,M+Math.sin(p)*g],w;v<1;)w=x*v+p,P.push(E+Math.cos(w)*g,M+Math.sin(w)*g),v+=o;return w=x+p,P.push(E+Math.cos(w)*g,M+Math.sin(w)*g),P.push(E+Math.cos(p)*g,M+Math.sin(p)*g),this.pathIndexes=l(P),this.pathData=P,this}});r.exports=c}),23560:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(75606),m=e(15608),d=e(17876),l=e(49584),h=function(n,a,c,o){c.addToRenderList(a);var v=n.currentContext;if(l(n,v,a,c,o)){var g=a.radius;v.beginPath(),v.arc(g-a.originX*(g*2),g-a.originY*(g*2),g,u(a._startAngle),u(a._endAngle),a.anticlockwise),a.closePath&&v.closePath(),a.isFilled&&(m(v,a),v.fill()),a.isStroked&&(d(v,a),v.stroke()),v.restore()}};r.exports=h}),10369:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(28593),m=e(61286);m.register("arc",function(d,l,h,n,a,c,o,v){return this.displayList.add(new u(this.scene,d,l,h,n,a,c,o,v))}),m.register("circle",function(d,l,h,n,a){return this.displayList.add(new u(this.scene,d,l,h,0,360,!1,n,a))})}),2213:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),m=u,d=u;m=e(58356),d=e(23560),r.exports={renderWebGL:m,renderCanvas:d}}),58356:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(73329),m=e(19543),d=e(50262),l=function(h,n,a,c){a.addToRenderList(n);var o=h.pipelines.set(n.pipeline),v=u(n,a,c),g=o.calcMatrix.copyFrom(v.calc),p=n._displayOriginX,x=n._displayOriginY,T=a.alpha*n.alpha;h.pipelines.preBatch(n),n.isFilled&&m(o,g,n,T,p,x),n.isStroked&&d(o,n,T,p,x),h.pipelines.postBatch(n)};r.exports=l}),15220:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(87203),d=e(11117),l=e(74118),h=e(91461),n=new u({Extends:h,Mixins:[m],initialize:function(c,o,v,g,p,x){o===void 0&&(o=0),v===void 0&&(v=0),h.call(this,c,"Curve",g),this._smoothness=32,this._curveBounds=new l,this.closePath=!1,this.setPosition(o,v),p!==void 0&&this.setFillStyle(p,x),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(a){this._smoothness=a,this.updateData()}},setSmoothness:function(a){return this._smoothness=a,this.updateData()},updateData:function(){var a=this._curveBounds,c=this._smoothness;this.geom.getBounds(a,c),this.setSize(a.width,a.height),this.updateDisplayOrigin();for(var o=[],v=this.geom.getPoints(c),g=0;g<v.length;g++)o.push(v[g].x,v[g].y);return o.push(v[0].x,v[0].y),this.pathIndexes=d(o),this.pathData=o,this}});r.exports=n}),4024:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(15608),m=e(17876),d=e(49584),l=function(h,n,a,c){a.addToRenderList(n);var o=h.currentContext;if(d(h,o,n,a,c)){var v=n._displayOriginX+n._curveBounds.x,g=n._displayOriginY+n._curveBounds.y,p=n.pathData,x=p.length-1,T=p[0]-v,E=p[1]-g;o.beginPath(),o.moveTo(T,E),n.closePath||(x-=2);for(var M=2;M<x;M+=2){var P=p[M]-v,w=p[M+1]-g;o.lineTo(P,w)}n.closePath&&o.closePath(),n.isFilled&&(u(o,n),o.fill()),n.isStroked&&(m(o,n),o.stroke()),o.restore()}};r.exports=l}),10147:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61286),m=e(15220);u.register("curve",function(d,l,h,n,a){return this.displayList.add(new m(this.scene,d,l,h,n,a))})}),87203:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),m=u,d=u;m=e(82958),d=e(4024),r.exports={renderWebGL:m,renderCanvas:d}}),82958:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(19543),m=e(73329),d=e(50262),l=function(h,n,a,c){a.addToRenderList(n);var o=h.pipelines.set(n.pipeline),v=m(n,a,c),g=o.calcMatrix.copyFrom(v.calc),p=n._displayOriginX+n._curveBounds.x,x=n._displayOriginY+n._curveBounds.y,T=a.alpha*n.alpha;h.pipelines.preBatch(n),n.isFilled&&u(o,g,n,T,p,x),n.isStroked&&d(o,n,T,p,x),h.pipelines.postBatch(n)};r.exports=l}),28591:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(11117),d=e(84171),l=e(95669),h=e(91461),n=new u({Extends:h,Mixins:[d],initialize:function(c,o,v,g,p,x,T){o===void 0&&(o=0),v===void 0&&(v=0),g===void 0&&(g=128),p===void 0&&(p=128),h.call(this,c,"Ellipse",new l(g/2,p/2,g,p)),this._smoothness=64,this.setPosition(o,v),this.width=g,this.height=p,x!==void 0&&this.setFillStyle(x,T),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(a){this._smoothness=a,this.updateData()}},setSize:function(a,c){return this.width=a,this.height=c,this.geom.setPosition(a/2,c/2),this.geom.setSize(a,c),this.updateData()},setSmoothness:function(a){return this._smoothness=a,this.updateData()},updateData:function(){for(var a=[],c=this.geom.getPoints(this._smoothness),o=0;o<c.length;o++)a.push(c[o].x,c[o].y);return a.push(c[0].x,c[0].y),this.pathIndexes=m(a),this.pathData=a,this}});r.exports=n}),55881:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(15608),m=e(17876),d=e(49584),l=function(h,n,a,c){a.addToRenderList(n);var o=h.currentContext;if(d(h,o,n,a,c)){var v=n._displayOriginX,g=n._displayOriginY,p=n.pathData,x=p.length-1,T=p[0]-v,E=p[1]-g;o.beginPath(),o.moveTo(T,E),n.closePath||(x-=2);for(var M=2;M<x;M+=2){var P=p[M]-v,w=p[M+1]-g;o.lineTo(P,w)}o.closePath(),n.isFilled&&(u(o,n),o.fill()),n.isStroked&&(m(o,n),o.stroke()),o.restore()}};r.exports=l}),99869:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(28591),m=e(61286);m.register("ellipse",function(d,l,h,n,a,c){return this.displayList.add(new u(this.scene,d,l,h,n,a,c))})}),84171:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),m=u,d=u;m=e(17554),d=e(55881),r.exports={renderWebGL:m,renderCanvas:d}}),17554:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(19543),m=e(73329),d=e(50262),l=function(h,n,a,c){a.addToRenderList(n);var o=h.pipelines.set(n.pipeline),v=m(n,a,c),g=o.calcMatrix.copyFrom(v.calc),p=n._displayOriginX,x=n._displayOriginY,T=a.alpha*n.alpha;h.pipelines.preBatch(n),n.isFilled&&u(o,g,n,T,p,x),n.isStroked&&d(o,n,T,p,x),h.pipelines.postBatch(n)};r.exports=l}),39169:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(91461),d=e(88059),l=new u({Extends:m,Mixins:[d],initialize:function(n,a,c,o,v,g,p,x,T,E,M){a===void 0&&(a=0),c===void 0&&(c=0),o===void 0&&(o=128),v===void 0&&(v=128),g===void 0&&(g=32),p===void 0&&(p=32),m.call(this,n,"Grid",null),this.cellWidth=g,this.cellHeight=p,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(a,c),this.setSize(o,v),this.setFillStyle(x,T),E!==void 0&&this.setOutlineStyle(E,M),this.updateDisplayOrigin()},setFillStyle:function(h,n){return n===void 0&&(n=1),h===void 0?this.showCells=!1:(this.fillColor=h,this.fillAlpha=n,this.showCells=!0),this},setAltFillStyle:function(h,n){return n===void 0&&(n=1),h===void 0?this.showAltCells=!1:(this.altFillColor=h,this.altFillAlpha=n,this.showAltCells=!0),this},setOutlineStyle:function(h,n){return n===void 0&&(n=1),h===void 0?this.showOutline=!1:(this.outlineFillColor=h,this.outlineFillAlpha=n,this.showOutline=!0),this}});r.exports=l}),95525:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(15608),m=e(17876),d=e(49584),l=function(h,n,a,c){a.addToRenderList(n);var o=h.currentContext;if(d(h,o,n,a,c)){var v=-n._displayOriginX,g=-n._displayOriginY,p=a.alpha*n.alpha,x=n.width,T=n.height,E=n.cellWidth,M=n.cellHeight,P=Math.ceil(x/E),w=Math.ceil(T/M),R=E,A=M,O=E-(P*E-x),F=M-(w*M-T),b=n.showCells,D=n.showAltCells,I=n.showOutline,B=0,z=0,Y=0,X=0,H=0;if(I&&(R--,A--,O===E&&O--,F===M&&F--),b&&n.fillAlpha>0)for(u(o,n),z=0;z<w;z++)for(D&&(Y=z%2),B=0;B<P;B++){if(D&&Y){Y=0;continue}Y++,X=B<P-1?R:O,H=z<w-1?A:F,o.fillRect(v+B*E,g+z*M,X,H)}if(D&&n.altFillAlpha>0)for(u(o,n,n.altFillColor,n.altFillAlpha*p),z=0;z<w;z++)for(D&&(Y=z%2),B=0;B<P;B++){if(D&&!Y){Y=1;continue}Y=0,X=B<P-1?R:O,H=z<w-1?A:F,o.fillRect(v+B*E,g+z*M,X,H)}if(I&&n.outlineFillAlpha>0){for(m(o,n,n.outlineFillColor,n.outlineFillAlpha*p),B=1;B<P;B++){var N=B*E;o.beginPath(),o.moveTo(N+v,g),o.lineTo(N+v,T+g),o.stroke()}for(z=1;z<w;z++){var U=z*M;o.beginPath(),o.moveTo(v,U+g),o.lineTo(v+x,U+g),o.stroke()}}o.restore()}};r.exports=l}),9326:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61286),m=e(39169);u.register("grid",function(d,l,h,n,a,c,o,v,g,p){return this.displayList.add(new m(this.scene,d,l,h,n,a,c,o,v,g,p))})}),88059:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),m=u,d=u;m=e(50639),d=e(95525),r.exports={renderWebGL:m,renderCanvas:d}}),50639:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(73329),m=e(75512),d=function(l,h,n,a){n.addToRenderList(h);var c=l.pipelines.set(h.pipeline),o=u(h,n,a),v=c.calcMatrix.copyFrom(o.calc);v.translate(-h._displayOriginX,-h._displayOriginY);var g=n.alpha*h.alpha,p=h.width,x=h.height,T=h.cellWidth,E=h.cellHeight,M=Math.ceil(p/T),P=Math.ceil(x/E),w=T,R=E,A=T-(M*T-p),O=E-(P*E-x),F,b,D=h.showCells,I=h.showAltCells,B=h.showOutline,z=0,Y=0,X=0,H=0,N=0;if(B&&(w--,R--,A===T&&A--,O===E&&O--),l.pipelines.preBatch(h),D&&h.fillAlpha>0)for(F=c.fillTint,b=m.getTintAppendFloatAlpha(h.fillColor,h.fillAlpha*g),F.TL=b,F.TR=b,F.BL=b,F.BR=b,Y=0;Y<P;Y++)for(I&&(X=Y%2),z=0;z<M;z++){if(I&&X){X=0;continue}X++,H=z<M-1?w:A,N=Y<P-1?R:O,c.batchFillRect(z*T,Y*E,H,N)}if(I&&h.altFillAlpha>0)for(F=c.fillTint,b=m.getTintAppendFloatAlpha(h.altFillColor,h.altFillAlpha*g),F.TL=b,F.TR=b,F.BL=b,F.BR=b,Y=0;Y<P;Y++)for(I&&(X=Y%2),z=0;z<M;z++){if(I&&!X){X=1;continue}X=0,H=z<M-1?w:A,N=Y<P-1?R:O,c.batchFillRect(z*T,Y*E,H,N)}if(B&&h.outlineFillAlpha>0){var U=c.strokeTint,L=m.getTintAppendFloatAlpha(h.outlineFillColor,h.outlineFillAlpha*g);for(U.TL=L,U.TR=L,U.BL=L,U.BR=L,z=1;z<M;z++){var G=z*T;c.batchLine(G,0,G,x,1,1,1,0,!1)}for(Y=1;Y<P;Y++){var V=Y*E;c.batchLine(0,V,p,V,1,1,1,0,!1)}}l.pipelines.postBatch(h)};r.exports=d}),4415:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72296),m=e(56694),d=e(91461),l=new m({Extends:d,Mixins:[u],initialize:function(n,a,c,o,v,g,p,x){a===void 0&&(a=0),c===void 0&&(c=0),o===void 0&&(o=48),v===void 0&&(v=32),g===void 0&&(g=15658734),p===void 0&&(p=10066329),x===void 0&&(x=13421772),d.call(this,n,"IsoBox",null),this.projection=4,this.fillTop=g,this.fillLeft=p,this.fillRight=x,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(a,c),this.setSize(o,v),this.updateDisplayOrigin()},setProjection:function(h){return this.projection=h,this},setFaces:function(h,n,a){return h===void 0&&(h=!0),n===void 0&&(n=!0),a===void 0&&(a=!0),this.showTop=h,this.showLeft=n,this.showRight=a,this},setFillStyle:function(h,n,a){return this.fillTop=h,this.fillLeft=n,this.fillRight=a,this.isFilled=!0,this}});r.exports=l}),32884:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(15608),m=e(49584),d=function(l,h,n,a){n.addToRenderList(h);var c=l.currentContext;if(m(l,c,h,n,a)&&h.isFilled){var o=h.width,v=h.height,g=o/2,p=o/h.projection;h.showTop&&(u(c,h,h.fillTop),c.beginPath(),c.moveTo(-g,-v),c.lineTo(0,-p-v),c.lineTo(g,-v),c.lineTo(g,-1),c.lineTo(0,p-1),c.lineTo(-g,-1),c.lineTo(-g,-v),c.fill()),h.showLeft&&(u(c,h,h.fillLeft),c.beginPath(),c.moveTo(-g,0),c.lineTo(0,p),c.lineTo(0,p-v),c.lineTo(-g,-v),c.lineTo(-g,0),c.fill()),h.showRight&&(u(c,h,h.fillRight),c.beginPath(),c.moveTo(g,0),c.lineTo(0,p),c.lineTo(0,p-v),c.lineTo(g,-v),c.lineTo(g,0),c.fill()),c.restore()}};r.exports=d}),88154:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61286),m=e(4415);u.register("isobox",function(d,l,h,n,a,c,o){return this.displayList.add(new m(this.scene,d,l,h,n,a,c,o))})}),72296:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),m=u,d=u;m=e(33101),d=e(32884),r.exports={renderWebGL:m,renderCanvas:d}}),33101:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(73329),m=e(75512),d=function(l,h,n,a){n.addToRenderList(h);var c=l.pipelines.set(h.pipeline),o=u(h,n,a),v=c.calcMatrix.copyFrom(o.calc),g=h.width,p=h.height,x=g/2,T=g/h.projection,E=n.alpha*h.alpha;if(h.isFilled){var M,P,w,R,A,O,F,b,D;l.pipelines.preBatch(h),h.showTop&&(M=m.getTintAppendFloatAlpha(h.fillTop,E),P=v.getX(-x,-p),w=v.getY(-x,-p),R=v.getX(0,-T-p),A=v.getY(0,-T-p),O=v.getX(x,-p),F=v.getY(x,-p),b=v.getX(0,T-p),D=v.getY(0,T-p),c.batchQuad(h,P,w,R,A,O,F,b,D,0,0,1,1,M,M,M,M,2)),h.showLeft&&(M=m.getTintAppendFloatAlpha(h.fillLeft,E),P=v.getX(-x,0),w=v.getY(-x,0),R=v.getX(0,T),A=v.getY(0,T),O=v.getX(0,T-p),F=v.getY(0,T-p),b=v.getX(-x,-p),D=v.getY(-x,-p),c.batchQuad(h,P,w,R,A,O,F,b,D,0,0,1,1,M,M,M,M,2)),h.showRight&&(M=m.getTintAppendFloatAlpha(h.fillRight,E),P=v.getX(x,0),w=v.getY(x,0),R=v.getX(0,T),A=v.getY(0,T),O=v.getX(0,T-p),F=v.getY(0,T-p),b=v.getX(x,-p),D=v.getY(x,-p),c.batchQuad(h,P,w,R,A,O,F,b,D,0,0,1,1,M,M,M,M,2)),l.pipelines.postBatch(h)}};r.exports=d}),65159:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(93387),d=e(91461),l=new u({Extends:d,Mixins:[m],initialize:function(n,a,c,o,v,g,p,x,T){a===void 0&&(a=0),c===void 0&&(c=0),o===void 0&&(o=48),v===void 0&&(v=32),g===void 0&&(g=!1),p===void 0&&(p=15658734),x===void 0&&(x=10066329),T===void 0&&(T=13421772),d.call(this,n,"IsoTriangle",null),this.projection=4,this.fillTop=p,this.fillLeft=x,this.fillRight=T,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=g,this.isFilled=!0,this.setPosition(a,c),this.setSize(o,v),this.updateDisplayOrigin()},setProjection:function(h){return this.projection=h,this},setReversed:function(h){return this.isReversed=h,this},setFaces:function(h,n,a){return h===void 0&&(h=!0),n===void 0&&(n=!0),a===void 0&&(a=!0),this.showTop=h,this.showLeft=n,this.showRight=a,this},setFillStyle:function(h,n,a){return this.fillTop=h,this.fillLeft=n,this.fillRight=a,this.isFilled=!0,this}});r.exports=l}),9923:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(15608),m=e(49584),d=function(l,h,n,a){n.addToRenderList(h);var c=l.currentContext;if(m(l,c,h,n,a)&&h.isFilled){var o=h.width,v=h.height,g=o/2,p=o/h.projection,x=h.isReversed;h.showTop&&x&&(u(c,h,h.fillTop),c.beginPath(),c.moveTo(-g,-v),c.lineTo(0,-p-v),c.lineTo(g,-v),c.lineTo(0,p-v),c.fill()),h.showLeft&&(u(c,h,h.fillLeft),c.beginPath(),x?(c.moveTo(-g,-v),c.lineTo(0,p),c.lineTo(0,p-v)):(c.moveTo(-g,0),c.lineTo(0,p),c.lineTo(0,p-v)),c.fill()),h.showRight&&(u(c,h,h.fillRight),c.beginPath(),x?(c.moveTo(g,-v),c.lineTo(0,p),c.lineTo(0,p-v)):(c.moveTo(g,0),c.lineTo(0,p),c.lineTo(0,p-v)),c.fill()),c.restore()}};r.exports=d}),67765:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61286),m=e(65159);u.register("isotriangle",function(d,l,h,n,a,c,o,v){return this.displayList.add(new m(this.scene,d,l,h,n,a,c,o,v))})}),93387:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),m=u,d=u;m=e(54946),d=e(9923),r.exports={renderWebGL:m,renderCanvas:d}}),54946:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(73329),m=e(75512),d=function(l,h,n,a){n.addToRenderList(h);var c=l.pipelines.set(h.pipeline),o=u(h,n,a),v=c.calcMatrix.copyFrom(o.calc),g=h.width,p=h.height,x=g/2,T=g/h.projection,E=h.isReversed,M=n.alpha*h.alpha;if(h.isFilled){l.pipelines.preBatch(h);var P,w,R,A,O,F,b;if(h.showTop&&E){P=m.getTintAppendFloatAlpha(h.fillTop,M),w=v.getX(-x,-p),R=v.getY(-x,-p),A=v.getX(0,-T-p),O=v.getY(0,-T-p),F=v.getX(x,-p),b=v.getY(x,-p);var D=v.getX(0,T-p),I=v.getY(0,T-p);c.batchQuad(h,w,R,A,O,F,b,D,I,0,0,1,1,P,P,P,P,2)}h.showLeft&&(P=m.getTintAppendFloatAlpha(h.fillLeft,M),E?(w=v.getX(-x,-p),R=v.getY(-x,-p),A=v.getX(0,T),O=v.getY(0,T),F=v.getX(0,T-p),b=v.getY(0,T-p)):(w=v.getX(-x,0),R=v.getY(-x,0),A=v.getX(0,T),O=v.getY(0,T),F=v.getX(0,T-p),b=v.getY(0,T-p)),c.batchTri(h,w,R,A,O,F,b,0,0,1,1,P,P,P,2)),h.showRight&&(P=m.getTintAppendFloatAlpha(h.fillRight,M),E?(w=v.getX(x,-p),R=v.getY(x,-p),A=v.getX(0,T),O=v.getY(0,T),F=v.getX(0,T-p),b=v.getY(0,T-p)):(w=v.getX(x,0),R=v.getY(x,0),A=v.getX(0,T),O=v.getY(0,T),F=v.getX(0,T-p),b=v.getY(0,T-p)),c.batchTri(h,w,R,A,O,F,b,0,0,1,1,P,P,P,2)),l.pipelines.postBatch(h)}};r.exports=d}),579:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(91461),d=e(88829),l=e(52660),h=new u({Extends:m,Mixins:[l],initialize:function(a,c,o,v,g,p,x,T,E){c===void 0&&(c=0),o===void 0&&(o=0),v===void 0&&(v=0),g===void 0&&(g=0),p===void 0&&(p=128),x===void 0&&(x=0),m.call(this,a,"Line",new d(v,g,p,x));var M=Math.max(1,this.geom.right-this.geom.left),P=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(c,o),this.setSize(M,P),T!==void 0&&this.setStrokeStyle(1,T,E),this.updateDisplayOrigin()},setLineWidth:function(n,a){return a===void 0&&(a=n),this._startWidth=n,this._endWidth=a,this.lineWidth=n,this},setTo:function(n,a,c,o){return this.geom.setTo(n,a,c,o),this}});r.exports=h}),52044:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(17876),m=e(49584),d=function(l,h,n,a){n.addToRenderList(h);var c=l.currentContext;if(m(l,c,h,n,a)){var o=h._displayOriginX,v=h._displayOriginY;h.isStroked&&(u(c,h),c.beginPath(),c.moveTo(h.geom.x1-o,h.geom.y1-v),c.lineTo(h.geom.x2-o,h.geom.y2-v),c.stroke()),c.restore()}};r.exports=d}),85665:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61286),m=e(579);u.register("line",function(d,l,h,n,a,c,o,v){return this.displayList.add(new m(this.scene,d,l,h,n,a,c,o,v))})}),52660:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),m=u,d=u;m=e(46952),d=e(52044),r.exports={renderWebGL:m,renderCanvas:d}}),46952:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(73329),m=e(75512),d=function(l,h,n,a){n.addToRenderList(h);var c=l.pipelines.set(h.pipeline),o=u(h,n,a);c.calcMatrix.copyFrom(o.calc);var v=h._displayOriginX,g=h._displayOriginY,p=n.alpha*h.alpha;if(l.pipelines.preBatch(h),h.isStroked){var x=c.strokeTint,T=m.getTintAppendFloatAlpha(h.strokeColor,h.strokeAlpha*p);x.TL=T,x.TR=T,x.BL=T,x.BR=T;var E=h._startWidth,M=h._endWidth;c.batchLine(h.geom.x1-v,h.geom.y1-g,h.geom.x2-v,h.geom.y2-g,E,M,1,0,!1,o.sprite,o.camera)}l.pipelines.postBatch(h)};r.exports=d}),91249:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(70573),m=e(56694),d=e(11117),l=e(14045),h=e(8580),n=e(91461),a=e(18974),c=new m({Extends:n,Mixins:[u],initialize:function(v,g,p,x,T,E){g===void 0&&(g=0),p===void 0&&(p=0),n.call(this,v,"Polygon",new h(x));var M=l(this.geom);this.setPosition(g,p),this.setSize(M.width,M.height),T!==void 0&&this.setFillStyle(T,E),this.updateDisplayOrigin(),this.updateData()},smooth:function(o){o===void 0&&(o=1);for(var v=0;v<o;v++)a(this.geom);return this.updateData()},setTo:function(o){this.geom.setTo(o);var v=l(this.geom);return this.setSize(v.width,v.height),this.updateDisplayOrigin(),this.updateData()},updateData:function(){for(var o=[],v=this.geom.points,g=0;g<v.length;g++)o.push(v[g].x,v[g].y);return o.push(v[0].x,v[0].y),this.pathIndexes=d(o),this.pathData=o,this}});r.exports=c}),40834:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(15608),m=e(17876),d=e(49584),l=function(h,n,a,c){a.addToRenderList(n);var o=h.currentContext;if(d(h,o,n,a,c)){var v=n._displayOriginX,g=n._displayOriginY,p=n.pathData,x=p.length-1,T=p[0]-v,E=p[1]-g;o.beginPath(),o.moveTo(T,E),n.closePath||(x-=2);for(var M=2;M<x;M+=2){var P=p[M]-v,w=p[M+1]-g;o.lineTo(P,w)}n.closePath&&o.closePath(),n.isFilled&&(u(o,n),o.fill()),n.isStroked&&(m(o,n),o.stroke()),o.restore()}};r.exports=l}),88203:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61286),m=e(91249);u.register("polygon",function(d,l,h,n,a){return this.displayList.add(new m(this.scene,d,l,h,n,a))})}),70573:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),m=u,d=u;m=e(72841),d=e(40834),r.exports={renderWebGL:m,renderCanvas:d}}),72841:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(19543),m=e(73329),d=e(50262),l=function(h,n,a,c){a.addToRenderList(n);var o=h.pipelines.set(n.pipeline),v=m(n,a,c),g=o.calcMatrix.copyFrom(v.calc),p=n._displayOriginX,x=n._displayOriginY,T=a.alpha*n.alpha;h.pipelines.preBatch(n),n.isFilled&&u(o,g,n,T,p,x),n.isStroked&&d(o,n,T,p,x),h.pipelines.postBatch(n)};r.exports=l}),517:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(74118),d=e(91461),l=e(37673),h=new u({Extends:d,Mixins:[l],initialize:function(a,c,o,v,g,p,x){c===void 0&&(c=0),o===void 0&&(o=0),v===void 0&&(v=128),g===void 0&&(g=128),d.call(this,a,"Rectangle",new m(0,0,v,g)),this.setPosition(c,o),this.setSize(v,g),p!==void 0&&this.setFillStyle(p,x),this.updateDisplayOrigin(),this.updateData()},setSize:function(n,a){this.width=n,this.height=a,this.geom.setSize(n,a),this.updateData(),this.updateDisplayOrigin();var c=this.input;return c&&!c.customHitArea&&(c.hitArea.width=n,c.hitArea.height=a),this},updateData:function(){var n=[],a=this.geom,c=this._tempLine;return a.getLineA(c),n.push(c.x1,c.y1,c.x2,c.y2),a.getLineB(c),n.push(c.x2,c.y2),a.getLineC(c),n.push(c.x2,c.y2),a.getLineD(c),n.push(c.x2,c.y2),this.pathData=n,this}});r.exports=h}),4091:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(15608),m=e(17876),d=e(49584),l=function(h,n,a,c){a.addToRenderList(n);var o=h.currentContext;if(d(h,o,n,a,c)){var v=n._displayOriginX,g=n._displayOriginY;n.isFilled&&(u(o,n),o.fillRect(-v,-g,n.width,n.height)),n.isStroked&&(m(o,n),o.beginPath(),o.rect(-v,-g,n.width,n.height),o.stroke()),o.restore()}};r.exports=l}),94355:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61286),m=e(517);u.register("rectangle",function(d,l,h,n,a,c){return this.displayList.add(new m(this.scene,d,l,h,n,a,c))})}),37673:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),m=u,d=u;m=e(43532),d=e(4091),r.exports={renderWebGL:m,renderCanvas:d}}),43532:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(73329),m=e(50262),d=e(75512),l=function(h,n,a,c){a.addToRenderList(n);var o=h.pipelines.set(n.pipeline),v=u(n,a,c);o.calcMatrix.copyFrom(v.calc);var g=n._displayOriginX,p=n._displayOriginY,x=a.alpha*n.alpha;if(h.pipelines.preBatch(n),n.isFilled){var T=o.fillTint,E=d.getTintAppendFloatAlpha(n.fillColor,n.fillAlpha*x);T.TL=E,T.TR=E,T.BL=E,T.BR=E,o.batchFillRect(-g,-p,n.width,n.height)}n.isStroked&&m(o,n,x,g,p),h.pipelines.postBatch(n)};r.exports=l}),77843:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(87956),m=e(56694),d=e(11117),l=e(91461),h=new m({Extends:l,Mixins:[u],initialize:function(a,c,o,v,g,p,x,T){c===void 0&&(c=0),o===void 0&&(o=0),v===void 0&&(v=5),g===void 0&&(g=32),p===void 0&&(p=64),l.call(this,a,"Star",null),this._points=v,this._innerRadius=g,this._outerRadius=p,this.setPosition(c,o),this.setSize(p*2,p*2),x!==void 0&&this.setFillStyle(x,T),this.updateDisplayOrigin(),this.updateData()},setPoints:function(n){return this._points=n,this.updateData()},setInnerRadius:function(n){return this._innerRadius=n,this.updateData()},setOuterRadius:function(n){return this._outerRadius=n,this.updateData()},points:{get:function(){return this._points},set:function(n){this._points=n,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(n){this._innerRadius=n,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(n){this._outerRadius=n,this.updateData()}},updateData:function(){var n=[],a=this._points,c=this._innerRadius,o=this._outerRadius,v=Math.PI/2*3,g=Math.PI/a,p=o,x=o;n.push(p,x+-o);for(var T=0;T<a;T++)n.push(p+Math.cos(v)*o,x+Math.sin(v)*o),v+=g,n.push(p+Math.cos(v)*c,x+Math.sin(v)*c),v+=g;return n.push(p,x+-o),this.pathIndexes=d(n),this.pathData=n,this}});r.exports=h}),11401:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(15608),m=e(17876),d=e(49584),l=function(h,n,a,c){a.addToRenderList(n);var o=h.currentContext;if(d(h,o,n,a,c)){var v=n._displayOriginX,g=n._displayOriginY,p=n.pathData,x=p.length-1,T=p[0]-v,E=p[1]-g;o.beginPath(),o.moveTo(T,E),n.closePath||(x-=2);for(var M=2;M<x;M+=2){var P=p[M]-v,w=p[M+1]-g;o.lineTo(P,w)}o.closePath(),n.isFilled&&(u(o,n),o.fill()),n.isStroked&&(m(o,n),o.stroke()),o.restore()}};r.exports=l}),23962:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(77843),m=e(61286);m.register("star",function(d,l,h,n,a,c,o){return this.displayList.add(new u(this.scene,d,l,h,n,a,c,o))})}),87956:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),m=u,d=u;m=e(12037),d=e(11401),r.exports={renderWebGL:m,renderCanvas:d}}),12037:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(19543),m=e(73329),d=e(50262),l=function(h,n,a,c){a.addToRenderList(n);var o=h.pipelines.set(n.pipeline),v=m(n,a,c),g=o.calcMatrix.copyFrom(v.calc),p=n._displayOriginX,x=n._displayOriginY,T=a.alpha*n.alpha;h.pipelines.preBatch(n),n.isFilled&&u(o,g,n,T,p,x),n.isStroked&&d(o,n,T,p,x),h.pipelines.postBatch(n)};r.exports=l}),21873:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(91461),d=e(66349),l=e(70498),h=new u({Extends:m,Mixins:[l],initialize:function(a,c,o,v,g,p,x,T,E,M,P){c===void 0&&(c=0),o===void 0&&(o=0),v===void 0&&(v=0),g===void 0&&(g=128),p===void 0&&(p=64),x===void 0&&(x=0),T===void 0&&(T=128),E===void 0&&(E=128),m.call(this,a,"Triangle",new d(v,g,p,x,T,E));var w=this.geom.right-this.geom.left,R=this.geom.bottom-this.geom.top;this.setPosition(c,o),this.setSize(w,R),M!==void 0&&this.setFillStyle(M,P),this.updateDisplayOrigin(),this.updateData()},setTo:function(n,a,c,o,v,g){return this.geom.setTo(n,a,c,o,v,g),this.updateData()},updateData:function(){var n=[],a=this.geom,c=this._tempLine;return a.getLineA(c),n.push(c.x1,c.y1,c.x2,c.y2),a.getLineB(c),n.push(c.x2,c.y2),a.getLineC(c),n.push(c.x2,c.y2),this.pathData=n,this}});r.exports=h}),60213:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(15608),m=e(17876),d=e(49584),l=function(h,n,a,c){a.addToRenderList(n);var o=h.currentContext;if(d(h,o,n,a,c)){var v=n._displayOriginX,g=n._displayOriginY,p=n.geom.x1-v,x=n.geom.y1-g,T=n.geom.x2-v,E=n.geom.y2-g,M=n.geom.x3-v,P=n.geom.y3-g;o.beginPath(),o.moveTo(p,x),o.lineTo(T,E),o.lineTo(M,P),o.closePath(),n.isFilled&&(u(o,n),o.fill()),n.isStroked&&(m(o,n),o.stroke()),o.restore()}};r.exports=l}),79296:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61286),m=e(21873);u.register("triangle",function(d,l,h,n,a,c,o,v,g,p){return this.displayList.add(new m(this.scene,d,l,h,n,a,c,o,v,g,p))})}),70498:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),m=u,d=u;m=e(72291),d=e(60213),r.exports={renderWebGL:m,renderCanvas:d}}),72291:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(73329),m=e(50262),d=e(75512),l=function(h,n,a,c){a.addToRenderList(n);var o=h.pipelines.set(n.pipeline),v=u(n,a,c);o.calcMatrix.copyFrom(v.calc);var g=n._displayOriginX,p=n._displayOriginY,x=a.alpha*n.alpha;if(h.pipelines.preBatch(n),n.isFilled){var T=o.fillTint,E=d.getTintAppendFloatAlpha(n.fillColor,n.fillAlpha*x);T.TL=E,T.TR=E,T.BL=E,T.BR=E;var M=n.geom.x1-g,P=n.geom.y1-p,w=n.geom.x2-g,R=n.geom.y2-p,A=n.geom.x3-g,O=n.geom.y3-p;o.batchFillTriangle(M,P,w,R,A,O,v.sprite,v.camera)}n.isStroked&&m(o,n,x,g,p),h.pipelines.postBatch(n)};r.exports=l}),13747:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(16569),m=e(56694),d=e(64937),l=e(89980),h=e(20791),n=new m({Extends:l,Mixins:[d.Alpha,d.BlendMode,d.Depth,d.Flip,d.GetBounds,d.Mask,d.Origin,d.Pipeline,d.PostPipeline,d.ScrollFactor,d.Size,d.TextureCrop,d.Tint,d.Transform,d.Visible,h],initialize:function(c,o,v,g,p){l.call(this,c,"Sprite"),this._crop=this.resetCropObject(),this.anims=new u(this),this.setTexture(g,p),this.setPosition(o,v),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(a,c){this.anims.update(a,c)},play:function(a,c){return this.anims.play(a,c)},playReverse:function(a,c){return this.anims.playReverse(a,c)},playAfterDelay:function(a,c){return this.anims.playAfterDelay(a,c)},playAfterRepeat:function(a,c){return this.anims.playAfterRepeat(a,c)},chain:function(a){return this.anims.chain(a)},stop:function(){return this.anims.stop()},stopAfterDelay:function(a){return this.anims.stopAfterDelay(a)},stopAfterRepeat:function(a){return this.anims.stopAfterRepeat(a)},stopOnFrame:function(a){return this.anims.stopOnFrame(a)},toJSON:function(){return d.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});r.exports=n}),27573:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d){m.addToRenderList(u),e.batchSprite(u,u.frame,m,d)};r.exports=y}),89219:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(88933),m=e(32291),d=e(99325),l=e(20494),h=e(13747);d.register("sprite",function(n,a){n===void 0&&(n={});var c=l(n,"key",null),o=l(n,"frame",null),v=new h(this.scene,0,0,c,o);return a!==void 0&&(n.add=a),u(this.scene,v,n),m(v,n),v})}),66135:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61286),m=e(13747);u.register("sprite",function(d,l,h,n){return this.displayList.add(new m(this.scene,d,l,h,n))})}),20791:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),m=u,d=u;m=e(21034),d=e(27573),r.exports={renderWebGL:m,renderCanvas:d}}),21034:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d){m.addToRenderList(u),u.pipeline.batchSprite(u,m,d)};r.exports=y}),32979:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){var d=e.canvas,l=e.context,h=e.style,n=[],a=0,c=m.length;h.maxLines>0&&h.maxLines<m.length&&(c=h.maxLines),h.syncFont(d,l);for(var o=0;o<c;o++){var v=h.strokeThickness;v+=l.measureText(m[o]).width,h.wordWrap&&(v-=l.measureText(" ").width),n[o]=Math.ceil(v),a=Math.max(a,n[o])}var g=u.fontSize+h.strokeThickness,p=g*c,x=e.lineSpacing;return c>1&&(p+=x*(c-1)),{width:a,height:p,lines:c,lineWidths:n,lineSpacing:x,lineHeight:g}};r.exports=y}),27030:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61068),m=function(d){var l=u.create(this),h=l.getContext("2d",{willReadFrequently:!0});d.syncFont(l,h);var n=h.measureText(d.testString);if("actualBoundingBoxAscent"in n){var a=n.actualBoundingBoxAscent,c=n.actualBoundingBoxDescent;return u.remove(l),{ascent:a,descent:c,fontSize:a+c}}var o=Math.ceil(n.width*d.baselineX),v=o,g=2*v;v=v*d.baselineY|0,l.width=o,l.height=g,h.fillStyle="#f00",h.fillRect(0,0,o,g),h.font=d._font,h.textBaseline="alphabetic",h.fillStyle="#000",h.fillText(d.testString,0,v);var p={ascent:0,descent:0,fontSize:0},x=h.getImageData(0,0,o,g);if(!x)return p.ascent=v,p.descent=v+6,p.fontSize=p.ascent+p.descent,u.remove(l),p;var T=x.data,E=T.length,M=o*4,P,w,R=0,A=!1;for(P=0;P<v;P++){for(w=0;w<M;w+=4)if(T[R+w]!==255){A=!0;break}if(!A)R+=M;else break}for(p.ascent=v-P,R=E-M,A=!1,P=g;P>v;P--){for(w=0;w<M;w+=4)if(T[R+w]!==255){A=!0;break}if(!A)R-=M;else break}return p.descent=P-v,p.fontSize=p.ascent+p.descent,u.remove(l),p};r.exports=m}),76555:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(99584),m=e(61068),d=e(56694),l=e(64937),h=e(89980),n=e(32979),a=e(10850),c=e(55638),o=e(80032),v=e(74744),g=new d({Extends:h,Mixins:[l.Alpha,l.BlendMode,l.ComputedSize,l.Crop,l.Depth,l.Flip,l.GetBounds,l.Mask,l.Origin,l.Pipeline,l.PostPipeline,l.ScrollFactor,l.Tint,l.Transform,l.Visible,o],initialize:function(x,T,E,M,P){T===void 0&&(T=0),E===void 0&&(E=0),h.call(this,x,"Text"),this.renderer=x.sys.renderer,this.setPosition(T,E),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(!0),this.canvas=m.create(this),this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.style=new v(this,P),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=x.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(M),P&&P.padding&&this.setPadding(P.padding),P&&P.lineSpacing&&this.setLineSpacing(P.lineSpacing)},initRTL:function(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",u(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(p){var x=this.style;if(x.wordWrapCallback){var T=x.wordWrapCallback.call(x.wordWrapCallbackScope,p,this);return Array.isArray(T)&&(T=T.join(`
`)),T}else return x.wordWrapWidth?x.wordWrapUseAdvanced?this.advancedWordWrap(p,this.context,this.style.wordWrapWidth):this.basicWordWrap(p,this.context,this.style.wordWrapWidth):p},advancedWordWrap:function(p,x,T){for(var E="",M=p.replace(/ +/gi," ").split(this.splitRegExp),P=M.length,w=0;w<P;w++){var R=M[w],A="";R=R.replace(/^ *|\s*$/gi,"");var O=x.measureText(R).width;if(O<T){E+=R+`
`;continue}for(var F=T,b=R.split(" "),D=0;D<b.length;D++){var I=b[D],B=I+" ",z=x.measureText(B).width;if(z>F){if(D===0){for(var Y=B;Y.length&&(Y=Y.slice(0,-1),z=x.measureText(Y).width,!(z<=F)););if(!Y.length)throw new Error("wordWrapWidth < a single character");var X=I.substr(Y.length);b[D]=X,A+=Y}var H=b[D].length?D:D+1,N=b.slice(H).join(" ").replace(/[ \n]*$/gi,"");M.splice(w+1,0,N),P=M.length;break}else A+=B,F-=z}E+=A.replace(/[ \n]*$/gi,"")+`
`}return E=E.replace(/[\s|\n]*$/gi,""),E},basicWordWrap:function(p,x,T){for(var E="",M=p.split(this.splitRegExp),P=M.length-1,w=x.measureText(" ").width,R=0;R<=P;R++){for(var A=T,O=M[R].split(" "),F=O.length-1,b=0;b<=F;b++){var D=O[b],I=x.measureText(D).width,B=I;b<F&&(B+=w),B>A&&b>0&&(E+=`
`,A=T),E+=D,b<F?(E+=" ",A-=B):A-=I}R<P&&(E+=`
`)}return E},getWrappedText:function(p){p===void 0&&(p=this._text),this.style.syncFont(this.canvas,this.context);var x=this.runWordWrap(p);return x.split(this.splitRegExp)},setText:function(p){return!p&&p!==0&&(p=""),Array.isArray(p)&&(p=p.join(`
`)),p!==this._text&&(this._text=p.toString(),this.updateText()),this},appendText:function(p,x){x===void 0&&(x=!0),!p&&p!==0&&(p=""),Array.isArray(p)&&(p=p.join(`
`)),p=p.toString();var T=this._text.concat(x?`
`+p:p);return T!==this._text&&(this._text=T,this.updateText()),this},setStyle:function(p){return this.style.setStyle(p)},setFont:function(p){return this.style.setFont(p)},setFontFamily:function(p){return this.style.setFontFamily(p)},setFontSize:function(p){return this.style.setFontSize(p)},setFontStyle:function(p){return this.style.setFontStyle(p)},setFixedSize:function(p,x){return this.style.setFixedSize(p,x)},setBackgroundColor:function(p){return this.style.setBackgroundColor(p)},setFill:function(p){return this.style.setFill(p)},setColor:function(p){return this.style.setColor(p)},setStroke:function(p,x){return this.style.setStroke(p,x)},setShadow:function(p,x,T,E,M,P){return this.style.setShadow(p,x,T,E,M,P)},setShadowOffset:function(p,x){return this.style.setShadowOffset(p,x)},setShadowColor:function(p){return this.style.setShadowColor(p)},setShadowBlur:function(p){return this.style.setShadowBlur(p)},setShadowStroke:function(p){return this.style.setShadowStroke(p)},setShadowFill:function(p){return this.style.setShadowFill(p)},setWordWrapWidth:function(p,x){return this.style.setWordWrapWidth(p,x)},setWordWrapCallback:function(p,x){return this.style.setWordWrapCallback(p,x)},setAlign:function(p){return this.style.setAlign(p)},setResolution:function(p){return this.style.setResolution(p)},setLineSpacing:function(p){return this.lineSpacing=p,this.updateText()},setPadding:function(p,x,T,E){if(typeof p=="object"){var M=p,P=a(M,"x",null);P!==null?(p=P,T=P):(p=a(M,"left",0),T=a(M,"right",p));var w=a(M,"y",null);w!==null?(x=w,E=w):(x=a(M,"top",0),E=a(M,"bottom",x))}else p===void 0&&(p=0),x===void 0&&(x=p),T===void 0&&(T=p),E===void 0&&(E=x);return this.padding.left=p,this.padding.top=x,this.padding.right=T,this.padding.bottom=E,this.updateText()},setMaxLines:function(p){return this.style.setMaxLines(p)},updateText:function(){var p=this.canvas,x=this.context,T=this.style,E=T.resolution,M=T.metrics;T.syncFont(p,x);var P=this._text;(T.wordWrapWidth||T.wordWrapCallback)&&(P=this.runWordWrap(this._text));var w=P.split(this.splitRegExp),R=n(this,M,w),A=this.padding,O;T.fixedWidth===0?(this.width=R.width+A.left+A.right,O=R.width):(this.width=T.fixedWidth,O=this.width-A.left-A.right,O<R.width&&(O=R.width)),T.fixedHeight===0?this.height=R.height+A.top+A.bottom:this.height=T.fixedHeight;var F=this.width,b=this.height;this.updateDisplayOrigin(),F*=E,b*=E,F=Math.max(F,1),b=Math.max(b,1),p.width!==F||p.height!==b?(p.width=F,p.height=b,this.frame.setSize(F,b),T.syncFont(p,x),T.rtl&&(x.direction="rtl")):x.clearRect(0,0,F,b),x.save(),x.scale(E,E),T.backgroundColor&&(x.fillStyle=T.backgroundColor,x.fillRect(0,0,F,b)),T.syncStyle(p,x),x.translate(A.left,A.top);for(var D,I,B=0;B<R.lines;B++){if(D=T.strokeThickness/2,I=T.strokeThickness/2+B*R.lineHeight+M.ascent,B>0&&(I+=R.lineSpacing*B),T.rtl)D=F-D-A.left-A.right;else if(T.align==="right")D+=O-R.lineWidths[B];else if(T.align==="center")D+=(O-R.lineWidths[B])/2;else if(T.align==="justify"){var z=.85;if(R.lineWidths[B]/R.width>=z){var Y=R.width-R.lineWidths[B],X=x.measureText(" ").width,H=w[B].trim(),N=H.split(" ");Y+=(w[B].length-H.length)*X;for(var U=Math.floor(Y/X),L=0;U>0;)N[L]+=" ",L=(L+1)%(N.length-1||1),--U;w[B]=N.join(" ")}}this.autoRound&&(D=Math.round(D),I=Math.round(I)),T.strokeThickness&&(T.syncShadow(x,T.shadowStroke),x.strokeText(w[B],D,I)),T.color&&(T.syncShadow(x,T.shadowFill),x.fillText(w[B],D,I))}x.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(p,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var G=this.input;return G&&!G.customHitArea&&(G.hitArea.width=this.width,G.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(p){this.setText(p)}},toJSON:function(){var p=l.ToJSON(this),x={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return p.data=x,p},preDestroy:function(){this.style.rtl&&c(this.canvas),m.remove(this.canvas),this.texture.destroy()}});r.exports=g}),71649:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d){u.width===0||u.height===0||(m.addToRenderList(u),e.batchSprite(u,u.frame,m,d))};r.exports=y}),75397:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(88933),m=e(99325),d=e(20494),l=e(76555);m.register("text",function(h,n){h===void 0&&(h={});var a=d(h,"text",""),c=d(h,"style",null),o=d(h,"padding",null);o!==null&&(c.padding=o);var v=new l(this.scene,0,0,a,c);return n!==void 0&&(h.add=n),u(this.scene,v,h),v.autoRound=d(h,"autoRound",!0),v.resolution=d(h,"resolution",1),v})}),94627:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(76555),m=e(61286);m.register("text",function(d,l,h,n){return this.displayList.add(new u(this.scene,d,l,h,n))})}),80032:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),m=u,d=u;m=e(76128),d=e(71649),r.exports={renderWebGL:m,renderCanvas:d}}),74744:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(20494),d=e(10850),l=e(27030),h={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|MÃ‰qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},n=new u({initialize:function(c,o){this.parent=c,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(o,!1,!0)},setStyle:function(a,c,o){c===void 0&&(c=!0),o===void 0&&(o=!1),a&&a.hasOwnProperty("fontSize")&&typeof a.fontSize=="number"&&(a.fontSize=a.fontSize.toString()+"px");for(var v in h){var g=o?h[v][1]:this[v];v==="wordWrapCallback"||v==="wordWrapCallbackScope"?this[v]=d(a,h[v][0],g):this[v]=m(a,h[v][0],g)}var p=d(a,"font",null);p!==null&&this.setFont(p,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var x=d(a,"fill",null);x!==null&&(this.color=x);var T=d(a,"metrics",!1);return T?this.metrics={ascent:d(T,"ascent",0),descent:d(T,"descent",0),fontSize:d(T,"fontSize",0)}:(c||!this.metrics)&&(this.metrics=l(this)),c?this.parent.updateText():this.parent},syncFont:function(a,c){c.font=this._font},syncStyle:function(a,c){c.textBaseline="alphabetic",c.fillStyle=this.color,c.strokeStyle=this.stroke,c.lineWidth=this.strokeThickness,c.lineCap="round",c.lineJoin="round"},syncShadow:function(a,c){c?(a.shadowOffsetX=this.shadowOffsetX,a.shadowOffsetY=this.shadowOffsetY,a.shadowColor=this.shadowColor,a.shadowBlur=this.shadowBlur):(a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowColor=0,a.shadowBlur=0)},update:function(a){return a&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=l(this)),this.parent.updateText()},setFont:function(a,c){c===void 0&&(c=!0);var o=a,v="",g="";if(typeof a!="string")o=d(a,"fontFamily","Courier"),v=d(a,"fontSize","16px"),g=d(a,"fontStyle","");else{var p=a.split(" "),x=0;g=p.length>2?p[x++]:"",v=p[x++]||"16px",o=p[x++]||"Courier"}return(o!==this.fontFamily||v!==this.fontSize||g!==this.fontStyle)&&(this.fontFamily=o,this.fontSize=v,this.fontStyle=g,c&&this.update(!0)),this.parent},setFontFamily:function(a){return this.fontFamily!==a&&(this.fontFamily=a,this.update(!0)),this.parent},setFontStyle:function(a){return this.fontStyle!==a&&(this.fontStyle=a,this.update(!0)),this.parent},setFontSize:function(a){return typeof a=="number"&&(a=a.toString()+"px"),this.fontSize!==a&&(this.fontSize=a,this.update(!0)),this.parent},setTestString:function(a){return this.testString=a,this.update(!0)},setFixedSize:function(a,c){return this.fixedWidth=a,this.fixedHeight=c,a&&(this.parent.width=a),c&&(this.parent.height=c),this.update(!1)},setBackgroundColor:function(a){return this.backgroundColor=a,this.update(!1)},setFill:function(a){return this.color=a,this.update(!1)},setColor:function(a){return this.color=a,this.update(!1)},setResolution:function(a){return this.resolution=a,this.update(!1)},setStroke:function(a,c){return c===void 0&&(c=this.strokeThickness),a===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==a||this.strokeThickness!==c)&&(this.stroke=a,this.strokeThickness=c,this.update(!0)),this.parent},setShadow:function(a,c,o,v,g,p){return a===void 0&&(a=0),c===void 0&&(c=0),o===void 0&&(o="#000"),v===void 0&&(v=0),g===void 0&&(g=!1),p===void 0&&(p=!0),this.shadowOffsetX=a,this.shadowOffsetY=c,this.shadowColor=o,this.shadowBlur=v,this.shadowStroke=g,this.shadowFill=p,this.update(!1)},setShadowOffset:function(a,c){return a===void 0&&(a=0),c===void 0&&(c=a),this.shadowOffsetX=a,this.shadowOffsetY=c,this.update(!1)},setShadowColor:function(a){return a===void 0&&(a="#000"),this.shadowColor=a,this.update(!1)},setShadowBlur:function(a){return a===void 0&&(a=0),this.shadowBlur=a,this.update(!1)},setShadowStroke:function(a){return this.shadowStroke=a,this.update(!1)},setShadowFill:function(a){return this.shadowFill=a,this.update(!1)},setWordWrapWidth:function(a,c){return c===void 0&&(c=!1),this.wordWrapWidth=a,this.wordWrapUseAdvanced=c,this.update(!1)},setWordWrapCallback:function(a,c){return c===void 0&&(c=null),this.wordWrapCallback=a,this.wordWrapCallbackScope=c,this.update(!1)},setAlign:function(a){return a===void 0&&(a="left"),this.align=a,this.update(!1)},setMaxLines:function(a){return a===void 0&&(a=0),this.maxLines=a,this.update(!1)},getTextMetrics:function(){var a=this.metrics;return{ascent:a.ascent,descent:a.descent,fontSize:a.fontSize}},toJSON:function(){var a={};for(var c in h)a[c]=this[c];return a.metrics=this.getTextMetrics(),a},destroy:function(){this.parent=void 0}});r.exports=n}),76128:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(75512),m=function(d,l,h,n){if(!(l.width===0||l.height===0)){h.addToRenderList(l);var a=l.frame,c=a.width,o=a.height,v=u.getTintAppendFloatAlpha,g=d.pipelines.set(l.pipeline,l),p=g.setTexture2D(a.glTexture,l);g.batchTexture(l,a.glTexture,c,o,l.x,l.y,c/l.style.resolution,o/l.style.resolution,l.scaleX,l.scaleY,l.rotation,l.flipX,l.flipY,l.scrollFactorX,l.scrollFactorY,l.displayOriginX,l.displayOriginY,0,0,c,o,v(l.tintTopLeft,h.alpha*l._alphaTL),v(l.tintTopRight,h.alpha*l._alphaTR),v(l.tintBottomLeft,h.alpha*l._alphaBL),v(l.tintBottomRight,h.alpha*l._alphaBR),l.tintFill,0,0,h,n,!1,p)}};r.exports=m}),35856:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61068),m=e(56694),d=e(64937),l=e(89980),h=e(3504),n=e(8213),a=e(9271),c=e(93736),o=8,v=new m({Extends:l,Mixins:[d.Alpha,d.BlendMode,d.ComputedSize,d.Crop,d.Depth,d.Flip,d.GetBounds,d.Mask,d.Origin,d.Pipeline,d.PostPipeline,d.ScrollFactor,d.Tint,d.Transform,d.Visible,a],initialize:function(p,x,T,E,M,P,w){var R=p.sys.renderer;l.call(this,p,"TileSprite");var A=p.sys.textures.get(P),O=A.get(w);O.source.compressionAlgorithm&&(console.warn("TileSprite cannot use compressed texture"),A=p.sys.textures.get("__MISSING"),O=A.get()),A.type==="DynamicTexture"&&(console.warn("TileSprite cannot use Dynamic Texture"),A=p.sys.textures.get("__MISSING"),O=A.get()),!E||!M?(E=O.width,M=O.height):(E=Math.floor(E),M=Math.floor(M)),this._tilePosition=new c,this._tileScale=new c(1,1),this.dirty=!1,this.renderer=R,this.canvas=u.create(this,E,M),this.context=this.canvas.getContext("2d",{willReadFrequently:!1}),this.displayTexture=A,this.displayFrame=O,this._crop=this.resetCropObject(),this.texture=p.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=h(O.width),this.potHeight=h(O.height),this.fillCanvas=u.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d",{willReadFrequently:!1}),this.fillPattern=null,this.setPosition(x,T),this.setSize(E,M),this.setFrame(w),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},setTexture:function(g,p){return this.displayTexture=this.scene.sys.textures.get(g),this.setFrame(p)},setFrame:function(g){var p=this.displayTexture.get(g);return this.potWidth=h(p.width),this.potHeight=h(p.height),this.canvas.width=0,!p.cutWidth||!p.cutHeight?this.renderFlags&=~o:this.renderFlags|=o,this.displayFrame=p,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(g,p){return g!==void 0&&(this.tilePositionX=g),p!==void 0&&(this.tilePositionY=p),this},setTileScale:function(g,p){return g===void 0&&(g=this.tileScaleX),p===void 0&&(p=g),this.tileScaleX=g,this.tileScaleY=p,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var g=this.displayFrame;if(g.source.isRenderTexture||g.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var p=this.fillContext,x=this.fillCanvas,T=this.potWidth,E=this.potHeight;(!this.renderer||!this.renderer.gl)&&(T=g.cutWidth,E=g.cutHeight),p.clearRect(0,0,T,E),x.width=T,x.height=E,p.drawImage(g.source.image,g.cutX,g.cutY,g.cutWidth,g.cutHeight,0,0,T,E),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(x,this.fillPattern):this.fillPattern=p.createPattern(x,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var g=this.canvas;if((g.width!==this.width||g.height!==this.height)&&(g.width=this.width,g.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var p=this.context;this.scene.sys.game.config.antialias||n.disable(p);var x=this._tileScale.x,T=this._tileScale.y,E=this._tilePosition.x,M=this._tilePosition.y;p.clearRect(0,0,this.width,this.height),p.save(),p.scale(x,T),p.translate(-E,-M),p.fillStyle=this.fillPattern,p.fillRect(E,M,this.width/x,this.height/T),p.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),u.remove(this.canvas),u.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(g){this._tilePosition.x=g,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(g){this._tilePosition.y=g,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(g){this._tileScale.x=g,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(g){this._tileScale.y=g,this.dirty=!0}}});r.exports=v}),93305:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d){u.updateCanvas(),m.addToRenderList(u),e.batchSprite(u,u.frame,m,d)};r.exports=y}),63950:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(88933),m=e(99325),d=e(20494),l=e(35856);m.register("tileSprite",function(h,n){h===void 0&&(h={});var a=d(h,"x",0),c=d(h,"y",0),o=d(h,"width",512),v=d(h,"height",512),g=d(h,"key",""),p=d(h,"frame",""),x=new l(this.scene,a,c,o,v,g,p);return n!==void 0&&(h.add=n),u(this.scene,x,h),x})}),20509:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(35856),m=e(61286);m.register("tileSprite",function(d,l,h,n,a,c){return this.displayList.add(new u(this.scene,d,l,h,n,a,c))})}),9271:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),m=u,d=u;m=e(74287),d=e(93305),r.exports={renderWebGL:m,renderCanvas:d}}),74287:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(75512),m=function(d,l,h,n){l.updateCanvas();var a=l.width,c=l.height;if(!(a===0||c===0)){h.addToRenderList(l);var o=u.getTintAppendFloatAlpha,v=d.pipelines.set(l.pipeline,l),g=v.setTexture2D(l.fillPattern,l);v.batchTexture(l,l.fillPattern,l.displayFrame.width*l.tileScaleX,l.displayFrame.height*l.tileScaleY,l.x,l.y,a,c,l.scaleX,l.scaleY,l.rotation,l.flipX,l.flipY,l.scrollFactorX,l.scrollFactorY,l.originX*a,l.originY*c,0,0,a,c,o(l.tintTopLeft,h.alpha*l._alphaTL),o(l.tintTopRight,h.alpha*l._alphaTR),o(l.tintBottomLeft,h.alpha*l._alphaBL),o(l.tintBottomRight,h.alpha*l._alphaBR),l.tintFill,l.tilePositionX%l.displayFrame.width/l.displayFrame.width,l.tilePositionY%l.displayFrame.height/l.displayFrame.height,h,n,!1,g)}};r.exports=m}),8630:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(82897),m=e(56694),d=e(64937),l=e(56631),h=e(97081),n=e(89980),a=e(83392),c=e(76038),o=e(76583),v=e(77974),g=new m({Extends:n,Mixins:[d.Alpha,d.BlendMode,d.Depth,d.Flip,d.GetBounds,d.Mask,d.Origin,d.Pipeline,d.PostPipeline,d.ScrollFactor,d.Size,d.TextureCrop,d.Tint,d.Transform,d.Visible,v],initialize:function(x,T,E,M){n.call(this,x,"Video"),this.video,this.videoTexture,this.videoTextureSource,this.snapshotTexture,this.flipY=!1,this._key=o(),this.touchLocked=!1,this.playWhenUnlocked=!1,this.frameReady=!1,this.isStalled=!1,this.failedPlayAttempts=0,this.metadata,this.retry=0,this.retryInterval=500,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={ended:this.completeHandler.bind(this),legacy:this.legacyPlayHandler.bind(this),playing:this.playingHandler.bind(this),seeked:this.seekedHandler.bind(this),seeking:this.seekingHandler.bind(this),stalled:this.stalledHandler.bind(this),suspend:this.stalledHandler.bind(this),waiting:this.stalledHandler.bind(this)},this._loadCallbackHandler=this.loadErrorHandler.bind(this),this._crop=this.resetCropObject(),this.markers={},this._markerIn=0,this._markerOut=0,this._playingMarker=!1,this._lastUpdate=0,this.cacheKey="",this.isSeeking=!1,this._playCalled=!1,this._rfvCallbackId=0;var P=x.sys.game;this._device=P.device.video,this.setPosition(T,E),this.setSize(256,256),this.initPipeline(),this.initPostPipeline(!0),P.events.on(h.PAUSE,this.globalPause,this),P.events.on(h.RESUME,this.globalResume,this);var w=x.sys.sound;w&&w.on(c.GLOBAL_MUTE,this.globalMute,this),M&&this.load(M)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},load:function(p){var x=this.scene.sys.cache.video.get(p);return x?(this.cacheKey=p,this.loadHandler(x.url,x.noAudio,x.crossOrigin)):console.warn("No video in cache for key: "+p),this},changeSource:function(p,x,T,E,M){x===void 0&&(x=!0),T===void 0&&(T=!1),this.cacheKey!==p&&(this.load(p),x&&this.play(T,E,M))},getVideoKey:function(){return this.cacheKey},loadURL:function(p,x,T){x===void 0&&(x=!1);var E=this._device.getVideoURL(p);return E?(this.cacheKey="",this.loadHandler(E.url,x,T)):console.warn("No supported video format found for "+p),this},loadMediaStream:function(p,x,T){return this.loadHandler(null,x,T,p)},loadHandler:function(p,x,T,E){x||(x=!1);var M=this.video;if(M?(this.removeLoadEventHandlers(),this.stop()):(M=document.createElement("video"),M.controls=!1,M.setAttribute("playsinline","playsinline"),M.setAttribute("preload","auto"),M.setAttribute("disablePictureInPicture","true")),x?(M.muted=!0,M.defaultMuted=!0,M.setAttribute("autoplay","autoplay")):(M.muted=!1,M.defaultMuted=!1,M.removeAttribute("autoplay")),T?M.setAttribute("crossorigin",T):M.removeAttribute("crossorigin"),E)if("srcObject"in M)try{M.srcObject=E}catch(P){if(P.name!=="TypeError")throw P;M.src=URL.createObjectURL(E)}else M.src=URL.createObjectURL(E);else M.src=p;return this.addLoadEventHandlers(),this.retry=0,this.video=M,this._playCalled=!1,M.load(),this},requestVideoFrame:function(p,x){var T=this.video;if(T){var E=x.width,M=x.height,P=this.videoTexture,w=this.videoTextureSource,R=!P||w.source!==T;R?(this._codePaused=T.paused,this._codeMuted=T.muted,P?(w.source=T,w.width=E,w.height=M,P.get().setSize(E,M)):(P=this.scene.sys.textures.create(this._key,T,E,M),P.add("__BASE",0,0,0,E,M),this.setTexture(P),this.videoTexture=P,this.videoTextureSource=P.source[0],this.videoTextureSource.setFlipY(this.flipY),this.emit(l.VIDEO_TEXTURE,this,P)),this.setSizeToFrame(),this.updateDisplayOrigin()):w.update(),this.isStalled=!1,this.metadata=x;var A=x.mediaTime;R&&(this._lastUpdate=A,this.emit(l.VIDEO_CREATED,this,E,M),this.frameReady||(this.frameReady=!0,this.emit(l.VIDEO_PLAY,this))),this._playingMarker?A>=this._markerOut&&(T.loop?(T.currentTime=this._markerIn,this.emit(l.VIDEO_LOOP,this)):(this.stop(!1),this.emit(l.VIDEO_COMPLETE,this))):A<this._lastUpdate&&this.emit(l.VIDEO_LOOP,this),this._lastUpdate=A,this._rfvCallbackId=this.video.requestVideoFrameCallback(this.requestVideoFrame.bind(this))}},play:function(p,x,T){x===void 0&&(x=-1),T===void 0&&(T=a.MAX_SAFE_INTEGER);var E=this.video;return!E||this.isPlaying()?(E||console.warn("Video not loaded"),this):(p===void 0&&(p=E.loop),E.loop=p,this._markerIn=x,this._markerOut=T,this._playingMarker=x>-1&&T>x&&T<a.MAX_SAFE_INTEGER,this._playCalled||(this._rfvCallbackId=E.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this._playCalled=!0,this.createPlayPromise()),this)},addLoadEventHandlers:function(){var p=this.video;p&&(p.addEventListener("error",this._loadCallbackHandler),p.addEventListener("abort",this._loadCallbackHandler))},removeLoadEventHandlers:function(){var p=this.video;p&&(p.removeEventListener("error",this._loadCallbackHandler),p.removeEventListener("abort",this._loadCallbackHandler))},addEventHandlers:function(){var p=this.video;if(p){var x=this._callbacks;for(var T in x)p.addEventListener(T,x[T])}},removeEventHandlers:function(){var p=this.video;if(p){var x=this._callbacks;for(var T in x)p.removeEventListener(T,x[T])}},createPlayPromise:function(p){p===void 0&&(p=!0);var x=this.video,T=x.play();if(T!==void 0){var E=this.playSuccess.bind(this),M=this.playError.bind(this);if(!p){var P=this;M=function(){P.failedPlayAttempts++}}T.then(E).catch(M)}else x.addEventListener("playing",this._callbacks.legacy),p||this.failedPlayAttempts++},addMarker:function(p,x,T){return!isNaN(x)&&x>=0&&!isNaN(T)&&T>x&&(this.markers[p]=[x,T]),this},playMarker:function(p,x){var T=this.markers[p];return T&&this.play(x,T[0],T[1]),this},removeMarker:function(p){return delete this.markers[p],this},snapshot:function(p,x){return p===void 0&&(p=this.width),x===void 0&&(x=this.height),this.snapshotArea(0,0,this.width,this.height,p,x)},snapshotArea:function(p,x,T,E,M,P){p===void 0&&(p=0),x===void 0&&(x=0),T===void 0&&(T=this.width),E===void 0&&(E=this.height),M===void 0&&(M=T),P===void 0&&(P=E);var w=this.video,R=this.snapshotTexture;return R?(R.setSize(M,P),w&&R.context.drawImage(w,p,x,T,E,0,0,M,P)):(R=this.scene.sys.textures.createCanvas(o(),M,P),this.snapshotTexture=R,w&&R.context.drawImage(w,p,x,T,E,0,0,M,P)),R.update()},saveSnapshotTexture:function(p){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,p):this.snapshotTexture=this.scene.sys.textures.createCanvas(p,this.width,this.height),this.snapshotTexture},playSuccess:function(){if(this._playCalled){this.addEventHandlers(),this._codePaused=!1,this.touchLocked&&(this.touchLocked=!1,this.emit(l.VIDEO_UNLOCKED,this));var p=this.scene.sys.sound;p&&p.mute&&this.setMute(!0),this._markerIn>-1&&(this.video.currentTime=this._markerIn)}},playError:function(p){var x=p.name;x==="NotAllowedError"?(this.touchLocked=!0,this.playWhenUnlocked=!0,this.failedPlayAttempts=1,this.emit(l.VIDEO_LOCKED,this)):x==="NotSupportedError"?(this.stop(!1),this.emit(l.VIDEO_UNSUPPORTED,this,p)):(this.stop(!1),this.emit(l.VIDEO_ERROR,this,p))},legacyPlayHandler:function(){var p=this.video;p&&(this.playSuccess(),p.removeEventListener("playing",this._callbacks.legacy))},playingHandler:function(){this.isStalled=!1,this.emit(l.VIDEO_PLAYING,this)},loadErrorHandler:function(p){this.stop(!1),this.emit(l.VIDEO_ERROR,this,p)},stalledHandler:function(p){this.isStalled=!0,this.emit(l.VIDEO_STALLED,this,p)},completeHandler:function(){this._playCalled=!1,this.emit(l.VIDEO_COMPLETE,this)},preUpdate:function(p,x){var T=this.video;!T||!this._playCalled||this.touchLocked&&this.playWhenUnlocked&&(this.retry+=x,this.retry>=this.retryInterval&&(this.createPlayPromise(!1),this.retry=0))},seekTo:function(p){var x=this.video;if(x){var T=x.duration;if(T!==1/0&&!isNaN(T)){var E=T*p;this.setCurrentTime(E)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(p){var x=this.video;if(x){if(typeof p=="string"){var T=p[0],E=parseFloat(p.substr(1));T==="+"?p=x.currentTime+E:T==="-"&&(p=x.currentTime-E)}x.currentTime=p}return this},seekingHandler:function(){this.isSeeking=!0,this.emit(l.VIDEO_SEEKING,this)},seekedHandler:function(){this.isSeeking=!1,this.emit(l.VIDEO_SEEKED,this)},getProgress:function(){var p=this.video;if(p){var x=p.duration;if(x!==1/0&&!isNaN(x))return p.currentTime/x}return-1},getDuration:function(){return this.video?this.video.duration:0},setMute:function(p){p===void 0&&(p=!0),this._codeMuted=p;var x=this.video;return x&&(x.muted=this._systemMuted?!0:p),this},isMuted:function(){return this._codeMuted},globalMute:function(p,x){this._systemMuted=x;var T=this.video;T&&(T.muted=this._codeMuted?!0:x)},globalPause:function(){this._systemPaused=!0,this.video&&!this.video.ended&&(this.removeEventHandlers(),this.video.pause())},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&!this.video.ended&&this.createPlayPromise()},setPaused:function(p){p===void 0&&(p=!0);var x=this.video;return this._codePaused=p,x&&!x.ended&&(p?x.paused||(this.removeEventHandlers(),x.pause()):p||(this._playCalled?x.paused&&!this._systemPaused&&this.createPlayPromise():this.play())),this},pause:function(){return this.setPaused(!0)},resume:function(){return this.setPaused(!1)},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(p){return p===void 0&&(p=1),this.video&&(this.video.volume=u(p,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(p){return this.video&&(this.video.playbackRate=p),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(p){return p===void 0&&(p=!0),this.video&&(this.video.loop=p),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this._playCalled&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(p,x){return x===void 0&&(x=!1),this.videoTexture&&(this.scene.sys.textures.renameTexture(this._key,p),this.videoTextureSource.setFlipY(x)),this._key=p,this.flipY=x,!!this.videoTexture},stop:function(p){p===void 0&&(p=!0);var x=this.video;return x&&(this.removeEventHandlers(),x.cancelVideoFrameCallback(this._rfvCallbackId),x.pause()),this.retry=0,this._playCalled=!1,p&&this.emit(l.VIDEO_STOP,this),this},removeVideoElement:function(){var p=this.video;if(p){for(p.parentNode&&p.parentNode.removeChild(p);p.hasChildNodes();)p.removeChild(p.firstChild);p.removeAttribute("autoplay"),p.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(!1),this.removeLoadEventHandlers(),this.removeVideoElement();var p=this.scene.sys.game.events;p.off(h.PAUSE,this.globalPause,this),p.off(h.RESUME,this.globalResume,this);var x=this.scene.sys.sound;x&&x.off(c.GLOBAL_MUTE,this.globalMute,this)}});r.exports=g}),56933:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d){u.videoTexture&&(m.addToRenderList(u),e.batchSprite(u,u.frame,m,d))};r.exports=y}),65601:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(88933),m=e(99325),d=e(20494),l=e(8630);m.register("video",function(h,n){h===void 0&&(h={});var a=d(h,"key",null),c=new l(this.scene,0,0,a);return n!==void 0&&(h.add=n),u(this.scene,c,h),c})}),215:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(8630),m=e(61286);m.register("video",function(d,l,h){return this.displayList.add(new u(this.scene,d,l,h))})}),77974:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),m=u,d=u;m=e(83572),d=e(56933),r.exports={renderWebGL:m,renderCanvas:d}}),83572:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d){u.videoTexture&&(m.addToRenderList(u),u.pipeline.batchSprite(u,m,d))};r.exports=y}),71030:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(95723),m=e(26673),d=e(65650),l=e(56694),h=e(64937),n=e(89980),a=e(74118),c=e(94287),o=new l({Extends:n,Mixins:[h.Depth,h.GetBounds,h.Origin,h.Transform,h.ScrollFactor,h.Visible],initialize:function(g,p,x,T,E){T===void 0&&(T=1),E===void 0&&(E=T),n.call(this,g,"Zone"),this.setPosition(p,x),this.width=T,this.height=E,this.blendMode=u.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(v){this.scaleX=v/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(v){this.scaleY=v/this.height}},setSize:function(v,g,p){p===void 0&&(p=!0),this.width=v,this.height=g,this.updateDisplayOrigin();var x=this.input;return p&&x&&!x.customHitArea&&(x.hitArea.width=v,x.hitArea.height=g),this},setDisplaySize:function(v,g){return this.displayWidth=v,this.displayHeight=g,this},setCircleDropZone:function(v){return this.setDropZone(new m(0,0,v),d)},setRectangleDropZone:function(v,g){return this.setDropZone(new a(0,0,v,g),c)},setDropZone:function(v,g){return this.input||this.setInteractive(v,g,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(v,g,p){p.addToRenderList(g)},renderWebGL:function(v,g,p){p.addToRenderList(g)}});r.exports=o}),24067:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(99325),m=e(20494),d=e(71030);u.register("zone",function(l){var h=m(l,"x",0),n=m(l,"y",0),a=m(l,"width",1),c=m(l,"height",a);return new d(this.scene,h,n,a,c)})}),34546:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(71030),m=e(61286);m.register("zone",function(d,l,h,n){return this.displayList.add(new u(this.scene,d,l,h,n))})}),95847:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return e.radius>0?Math.PI*e.radius*e.radius:0};r.exports=y}),26673:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(65650),d=e(94026),l=e(62941),h=e(52394),n=e(30977),a=new u({initialize:function(o,v,g){o===void 0&&(o=0),v===void 0&&(v=0),g===void 0&&(g=0),this.type=h.CIRCLE,this.x=o,this.y=v,this._radius=g,this._diameter=g*2},contains:function(c,o){return m(this,c,o)},getPoint:function(c,o){return d(this,c,o)},getPoints:function(c,o,v){return l(this,c,o,v)},getRandomPoint:function(c){return n(this,c)},setTo:function(c,o,v){return this.x=c,this.y=o,this._radius=v,this._diameter=v*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(c,o){return o===void 0&&(o=c),this.x=c,this.y=o,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(c){this._radius=c,this._diameter=c*2}},diameter:{get:function(){return this._diameter},set:function(c){this._diameter=c,this._radius=c*.5}},left:{get:function(){return this.x-this._radius},set:function(c){this.x=c+this._radius}},right:{get:function(){return this.x+this._radius},set:function(c){this.x=c-this._radius}},top:{get:function(){return this.y-this._radius},set:function(c){this.y=c+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(c){this.y=c-this._radius}}});r.exports=a}),37964:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return 2*(Math.PI*e.radius)};r.exports=y}),72233:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),m=function(d,l,h){return h===void 0&&(h=new u),h.x=d.x+d.radius*Math.cos(l),h.y=d.y+d.radius*Math.sin(l),h};r.exports=m}),61761:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(26673),m=function(d){return new u(d.x,d.y,d.radius)};r.exports=m}),65650:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){if(e.radius>0&&u>=e.left&&u<=e.right&&m>=e.top&&m<=e.bottom){var d=(e.x-u)*(e.x-u),l=(e.y-m)*(e.y-m);return d+l<=e.radius*e.radius}else return!1};r.exports=y}),39187:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(65650),m=function(d,l){return u(d,l.x,l.y)};r.exports=m}),58672:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(65650),m=function(d,l){return u(d,l.x,l.y)&&u(d,l.right,l.y)&&u(d,l.x,l.bottom)&&u(d,l.right,l.bottom)};r.exports=m}),42997:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return u.setTo(e.x,e.y,e.radius)};r.exports=y}),94894:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return e.x===u.x&&e.y===u.y&&e.radius===u.radius};r.exports=y}),48027:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(74118),m=function(d,l){return l===void 0&&(l=new u),l.x=d.left,l.y=d.top,l.width=d.diameter,l.height=d.diameter,l};r.exports=m}),94026:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72233),m=e(91806),d=e(83392),l=e(79967),h=function(n,a,c){c===void 0&&(c=new l);var o=m(a,0,d.PI2);return u(n,o,c)};r.exports=h}),62941:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(37964),m=e(72233),d=e(91806),l=e(83392),h=function(n,a,c,o){o===void 0&&(o=[]),!a&&c>0&&(a=u(n)/c);for(var v=0;v<a;v++){var g=d(v/a,0,l.PI2);o.push(m(n,g))}return o};r.exports=h}),34585:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){return e.x+=u,e.y+=m,e};r.exports=y}),88665:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return e.x+=u.x,e.y+=u.y,e};r.exports=y}),30977:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),m=function(d,l){l===void 0&&(l=new u);var h=2*Math.PI*Math.random(),n=Math.random()+Math.random(),a=n>1?2-n:n,c=a*Math.cos(h),o=a*Math.sin(h);return l.x=d.x+c*d.radius,l.y=d.y+o*d.radius,l};r.exports=m}),6112:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(26673);u.Area=e(95847),u.Circumference=e(37964),u.CircumferencePoint=e(72233),u.Clone=e(61761),u.Contains=e(65650),u.ContainsPoint=e(39187),u.ContainsRect=e(58672),u.CopyFrom=e(42997),u.Equals=e(94894),u.GetBounds=e(48027),u.GetPoint=e(94026),u.GetPoints=e(62941),u.Offset=e(34585),u.OffsetPoint=e(88665),u.Random=e(30977),r.exports=u}),52394:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};r.exports=y}),58605:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return e.isEmpty()?0:e.getMajorRadius()*e.getMinorRadius()*Math.PI};r.exports=y}),39507:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){var u=e.width/2,m=e.height/2,d=Math.pow(u-m,2)/Math.pow(u+m,2);return Math.PI*(u+m)*(1+3*d/(10+Math.sqrt(4-3*d)))};r.exports=y}),86998:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),m=function(d,l,h){h===void 0&&(h=new u);var n=d.width/2,a=d.height/2;return h.x=d.x+n*Math.cos(l),h.y=d.y+a*Math.sin(l),h};r.exports=m}),81773:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(95669),m=function(d){return new u(d.x,d.y,d.width,d.height)};r.exports=m}),72313:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){if(e.width<=0||e.height<=0)return!1;var d=(u-e.x)/e.width,l=(m-e.y)/e.height;return d*=d,l*=l,d+l<.25};r.exports=y}),34368:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72313),m=function(d,l){return u(d,l.x,l.y)};r.exports=m}),71431:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72313),m=function(d,l){return u(d,l.x,l.y)&&u(d,l.right,l.y)&&u(d,l.x,l.bottom)&&u(d,l.right,l.bottom)};r.exports=m}),75459:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return u.setTo(e.x,e.y,e.width,e.height)};r.exports=y}),95669:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(72313),d=e(95340),l=e(54978),h=e(52394),n=e(72006),a=new u({initialize:function(o,v,g,p){o===void 0&&(o=0),v===void 0&&(v=0),g===void 0&&(g=0),p===void 0&&(p=0),this.type=h.ELLIPSE,this.x=o,this.y=v,this.width=g,this.height=p},contains:function(c,o){return m(this,c,o)},getPoint:function(c,o){return d(this,c,o)},getPoints:function(c,o,v){return l(this,c,o,v)},getRandomPoint:function(c){return n(this,c)},setTo:function(c,o,v,g){return this.x=c,this.y=o,this.width=v,this.height=g,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(c,o){return o===void 0&&(o=c),this.x=c,this.y=o,this},setSize:function(c,o){return o===void 0&&(o=c),this.width=c,this.height=o,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(c){this.x=c+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(c){this.x=c-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(c){this.y=c+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(c){this.y=c-this.height/2}}});r.exports=a}),98068:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return e.x===u.x&&e.y===u.y&&e.width===u.width&&e.height===u.height};r.exports=y}),72897:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(74118),m=function(d,l){return l===void 0&&(l=new u),l.x=d.left,l.y=d.top,l.width=d.width,l.height=d.height,l};r.exports=m}),95340:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(86998),m=e(91806),d=e(83392),l=e(79967),h=function(n,a,c){c===void 0&&(c=new l);var o=m(a,0,d.PI2);return u(n,o,c)};r.exports=h}),54978:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(39507),m=e(86998),d=e(91806),l=e(83392),h=function(n,a,c,o){o===void 0&&(o=[]),!a&&c>0&&(a=u(n)/c);for(var v=0;v<a;v++){var g=d(v/a,0,l.PI2);o.push(m(n,g))}return o};r.exports=h}),77951:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){return e.x+=u,e.y+=m,e};r.exports=y}),36233:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return e.x+=u.x,e.y+=u.y,e};r.exports=y}),72006:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),m=function(d,l){l===void 0&&(l=new u);var h=Math.random()*Math.PI*2,n=Math.sqrt(Math.random());return l.x=d.x+n*Math.cos(h)*d.width/2,l.y=d.y+n*Math.sin(h)*d.height/2,l};r.exports=m}),40652:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(95669);u.Area=e(58605),u.Circumference=e(39507),u.CircumferencePoint=e(86998),u.Clone=e(81773),u.Contains=e(72313),u.ContainsPoint=e(34368),u.ContainsRect=e(71431),u.CopyFrom=e(75459),u.Equals=e(98068),u.GetBounds=e(72897),u.GetPoint=e(95340),u.GetPoints=e(54978),u.Offset=e(77951),u.OffsetPoint=e(36233),u.Random=e(72006),r.exports=u}),84068:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(52394),m=e(98611),d={Circle:e(6112),Ellipse:e(40652),Intersects:e(7563),Line:e(28482),Mesh:e(14293),Point:e(63472),Polygon:e(44359),Rectangle:e(66658),Triangle:e(87619)};d=m(!1,d,u),r.exports=d}),22184:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(53996),m=function(d,l){return u(d.x,d.y,l.x,l.y)<=d.radius+l.radius};r.exports=m}),26535:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){var m=u.width/2,d=u.height/2,l=Math.abs(e.x-u.x-m),h=Math.abs(e.y-u.y-d),n=m+e.radius,a=d+e.radius;if(l>n||h>a)return!1;if(l<=m||h<=d)return!0;var c=l-m,o=h-d,v=c*c,g=o*o,p=e.radius*e.radius;return v+g<=p};r.exports=y}),71145:((r,y,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),m=e(22184),d=function(l,h,n){if(n===void 0&&(n=[]),m(l,h)){var a=l.x,c=l.y,o=l.radius,v=h.x,g=h.y,p=h.radius,x,T,E,M,P;if(c===g)P=(p*p-o*o-v*v+a*a)/(2*(a-v)),x=1,T=-2*g,E=v*v+P*P-2*v*P+g*g-p*p,M=T*T-4*x*E,M===0?n.push(new u(P,-T/(2*x))):M>0&&(n.push(new u(P,(-T+Math.sqrt(M))/(2*x))),n.push(new u(P,(-T-Math.sqrt(M))/(2*x))));else{var w=(a-v)/(c-g),R=(p*p-o*o-v*v+a*a-g*g+c*c)/(2*(c-g));x=w*w+1,T=2*c*w-2*R*w-2*a,E=a*a+c*c+R*R-o*o-2*c*R,M=T*T-4*x*E,M===0?(P=-T/(2*x),n.push(new u(P,R-P*w))):M>0&&(P=(-T+Math.sqrt(M))/(2*x),n.push(new u(P,R-P*w)),P=(-T-Math.sqrt(M))/(2*x),n.push(new u(P,R-P*w)))}}return n};r.exports=d}),62508:((r,y,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(26111),m=e(26535),d=function(l,h,n){if(n===void 0&&(n=[]),m(l,h)){var a=h.getLineA(),c=h.getLineB(),o=h.getLineC(),v=h.getLineD();u(a,l,n),u(c,l,n),u(o,l,n),u(v,l,n)}return n};r.exports=d}),26111:((r,y,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),m=e(61472),d=function(l,h,n){if(n===void 0&&(n=[]),m(l,h)){var a=l.x1,c=l.y1,o=l.x2,v=l.y2,g=h.x,p=h.y,x=h.radius,T=o-a,E=v-c,M=a-g,P=c-p,w=T*T+E*E,R=2*(T*M+E*P),A=M*M+P*P-x*x,O=R*R-4*w*A,F,b;if(O===0){var D=-R/(2*w);F=a+D*T,b=c+D*E,D>=0&&D<=1&&n.push(new u(F,b))}else if(O>0){var I=(-R-Math.sqrt(O))/(2*w);F=a+I*T,b=c+I*E,I>=0&&I<=1&&n.push(new u(F,b));var B=(-R+Math.sqrt(O))/(2*w);F=a+B*T,b=c+B*E,B>=0&&B<=1&&n.push(new u(F,b))}}return n};r.exports=d}),96537:((r,y,e)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(70015),m=function(d,l,h,n){h===void 0&&(h=!1);var a=d.x1,c=d.y1,o=d.x2,v=d.y2,g=l.x1,p=l.y1,x=l.x2,T=l.y2,E=o-a,M=v-c,P=x-g,w=T-p,R=E*w-M*P;if(R===0)return null;var A,O,F;if(h){if(A=(E*(p-c)+M*(a-g))/(P*M-w*E),O=(g+P*A-a)/E,O<0||A<0||A>1)return null;F=O}else{if(A=((g-a)*w-(p-c)*P)/R,O=((c-p)*E-(a-g)*M)/R,A<0||A>1||O<0||O>1)return null;F=A}return n===void 0&&(n=new u),n.set(a+E*F,c+M*F,F)};r.exports=m}),17647:((r,y,e)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(96537),m=e(88829),d=e(70015),l=new m,h=new d,n=function(a,c,o,v){o===void 0&&(o=!1),v===void 0&&(v=new d);var g=!1;v.set(),h.set();for(var p=c[0],x=1;x<c.length;x++){var T=c[x];l.setTo(p.x,p.y,T.x,T.y),p=T,u(a,l,o,h)&&(!g||h.z<v.z)&&(v.copy(h),g=!0)}return g?v:null};r.exports=n}),68439:((r,y,e)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(70015),m=e(51729),d=e(17647),l=new u,h=function(n,a,c,o){o===void 0&&(o=new m),Array.isArray(a)||(a=[a]);var v=!1;o.set(),l.set();for(var g=0;g<a.length;g++)d(n,a[g].points,c,l)&&(!v||l.z<o.z)&&(o.set(l.x,l.y,l.z,g),v=!0);return v?o:null};r.exports=h}),9569:((r,y,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),m=e(25227),d=e(47910),l=function(h,n,a){if(a===void 0&&(a=[]),d(h,n))for(var c=n.getLineA(),o=n.getLineB(),v=n.getLineC(),g=n.getLineD(),p=[new u,new u,new u,new u],x=[m(c,h,p[0]),m(o,h,p[1]),m(v,h,p[2]),m(g,h,p[3])],T=0;T<4;T++)x[T]&&a.push(p[T]);return a};r.exports=l}),7449:((r,y,e)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(51729),m=e(68439),d=e(88829),l=new d;function h(c,o,v,g,p){var x=Math.cos(c),T=Math.sin(c);l.setTo(o,v,o+x,v+T);var E=m(l,g,!0);E&&p.push(new u(E.x,E.y,c,E.w))}function n(c,o){return c.z-o.z}var a=function(c,o,v){Array.isArray(v)||(v=[v]);for(var g=[],p=[],x=0;x<v.length;x++)for(var T=v[x].points,E=0;E<T.length;E++){var M=Math.atan2(T[E].y-o,T[E].x-c);p.indexOf(M)===-1&&(h(M,c,o,v,g),h(M-1e-5,c,o,v,g),h(M+1e-5,c,o,v,g),p.push(M))}return g.sort(n)};r.exports=a}),82931:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(74118),m=e(90205),d=function(l,h,n){return n===void 0&&(n=new u),m(l,h)&&(n.x=Math.max(l.x,h.x),n.y=Math.max(l.y,h.y),n.width=Math.min(l.right,h.right)-n.x,n.height=Math.min(l.bottom,h.bottom)-n.y),n};r.exports=d}),1946:((r,y,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(9569),m=e(90205),d=function(l,h,n){if(n===void 0&&(n=[]),m(l,h)){var a=l.getLineA(),c=l.getLineB(),o=l.getLineC(),v=l.getLineD();u(a,h,n),u(c,h,n),u(o,h,n),u(v,h,n)}return n};r.exports=d}),34211:((r,y,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(20370),m=e(9569),d=function(l,h,n){if(n===void 0&&(n=[]),u(l,h)){var a=h.getLineA(),c=h.getLineB(),o=h.getLineC();m(a,l,n),m(c,l,n),m(o,l,n)}return n};r.exports=d}),80511:((r,y,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(26111),m=e(48411),d=function(l,h,n){if(n===void 0&&(n=[]),m(l,h)){var a=l.getLineA(),c=l.getLineB(),o=l.getLineC();u(a,h,n),u(c,h,n),u(o,h,n)}return n};r.exports=d}),31343:((r,y,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),m=e(86117),d=e(25227),l=function(h,n,a){if(a===void 0&&(a=[]),m(h,n))for(var c=h.getLineA(),o=h.getLineB(),v=h.getLineC(),g=[new u,new u,new u],p=[d(c,n,g[0]),d(o,n,g[1]),d(v,n,g[2])],x=0;x<3;x++)p[x]&&a.push(g[x]);return a};r.exports=l}),70534:((r,y,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(23589),m=e(31343),d=function(l,h,n){if(n===void 0&&(n=[]),u(l,h)){var a=h.getLineA(),c=h.getLineB(),o=h.getLineC();m(l,a,n),m(l,c,n),m(l,o,n)}return n};r.exports=d}),61472:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(65650),m=e(79967),d=new m,l=function(h,n,a){if(a===void 0&&(a=d),u(n,h.x1,h.y1))return a.x=h.x1,a.y=h.y1,!0;if(u(n,h.x2,h.y2))return a.x=h.x2,a.y=h.y2,!0;var c=h.x2-h.x1,o=h.y2-h.y1,v=n.x-h.x1,g=n.y-h.y1,p=c*c+o*o,x=c,T=o;if(p>0){var E=(v*c+g*o)/p;x*=E,T*=E}a.x=h.x1+x,a.y=h.y1+T;var M=x*x+T*T;return M<=p&&x*c+T*o>=0&&u(n,a.x,a.y)};r.exports=l}),25227:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){var d=e.x1,l=e.y1,h=e.x2,n=e.y2,a=u.x1,c=u.y1,o=u.x2,v=u.y2;if(d===h&&l===n||a===o&&c===v)return!1;var g=(v-c)*(h-d)-(o-a)*(n-l);if(g===0)return!1;var p=((o-a)*(l-c)-(v-c)*(d-a))/g,x=((h-d)*(l-c)-(n-l)*(d-a))/g;return p<0||p>1||x<0||x>1?!1:(m&&(m.x=d+p*(h-d),m.y=l+p*(n-l)),!0)};r.exports=y}),47910:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){var m=e.x1,d=e.y1,l=e.x2,h=e.y2,n=u.x,a=u.y,c=u.right,o=u.bottom,v=0;if(m>=n&&m<=c&&d>=a&&d<=o||l>=n&&l<=c&&h>=a&&h<=o)return!0;if(m<n&&l>=n){if(v=d+(h-d)*(n-m)/(l-m),v>a&&v<=o)return!0}else if(m>c&&l<=c&&(v=d+(h-d)*(c-m)/(l-m),v>=a&&v<=o))return!0;if(d<a&&h>=a){if(v=m+(l-m)*(a-d)/(h-d),v>=n&&v<=c)return!0}else if(d>o&&h<=o&&(v=m+(l-m)*(o-d)/(h-d),v>=n&&v<=c))return!0;return!1};r.exports=y}),34426:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){m===void 0&&(m=1);var d=u.x1,l=u.y1,h=u.x2,n=u.y2,a=e.x,c=e.y,o=(h-d)*(h-d)+(n-l)*(n-l);if(o===0)return!1;var v=((a-d)*(h-d)+(c-l)*(n-l))/o;if(v<0)return Math.sqrt((d-a)*(d-a)+(l-c)*(l-c))<=m;if(v>=0&&v<=1){var g=((l-c)*(h-d)-(d-a)*(n-l))/o;return Math.abs(g)*Math.sqrt(o)<=m}else return Math.sqrt((h-a)*(h-a)+(n-c)*(n-c))<=m};r.exports=y}),81414:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(34426),m=function(d,l){if(!u(d,l))return!1;var h=Math.min(l.x1,l.x2),n=Math.max(l.x1,l.x2),a=Math.min(l.y1,l.y2),c=Math.max(l.y1,l.y2);return d.x>=h&&d.x<=n&&d.y>=a&&d.y<=c};r.exports=m}),90205:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return e.width<=0||e.height<=0||u.width<=0||u.height<=0?!1:!(e.right<u.x||e.bottom<u.y||e.x>u.right||e.y>u.bottom)};r.exports=y}),20370:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(25227),m=e(94287),d=e(86875),l=e(87279),h=function(n,a){if(a.left>n.right||a.right<n.left||a.top>n.bottom||a.bottom<n.top)return!1;var c=a.getLineA(),o=a.getLineB(),v=a.getLineC();if(m(n,c.x1,c.y1)||m(n,c.x2,c.y2)||m(n,o.x1,o.y1)||m(n,o.x2,o.y2)||m(n,v.x1,v.y1)||m(n,v.x2,v.y2))return!0;var g=n.getLineA(),p=n.getLineB(),x=n.getLineC(),T=n.getLineD();if(u(c,g)||u(c,p)||u(c,x)||u(c,T)||u(o,g)||u(o,p)||u(o,x)||u(o,T)||u(v,g)||u(v,p)||u(v,x)||u(v,T))return!0;var E=l(n),M=d(a,E,!0);return M.length>0};r.exports=h}),8786:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d,l,h){return h===void 0&&(h=0),!(u>e.right+h||m<e.left-h||d>e.bottom+h||l<e.top-h)};r.exports=y}),48411:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61472),m=e(60689),d=function(l,h){return l.left>h.right||l.right<h.left||l.top>h.bottom||l.bottom<h.top?!1:!!(m(l,h.x,h.y)||u(l.getLineA(),h)||u(l.getLineB(),h)||u(l.getLineC(),h))};r.exports=d}),86117:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(25227),m=function(d,l){return!!(d.contains(l.x1,l.y1)||d.contains(l.x2,l.y2)||u(d.getLineA(),l)||u(d.getLineB(),l)||u(d.getLineC(),l))};r.exports=m}),23589:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(86875),m=e(18680),d=e(25227),l=function(h,n){if(h.left>n.right||h.right<n.left||h.top>n.bottom||h.bottom<n.top)return!1;var a=h.getLineA(),c=h.getLineB(),o=h.getLineC(),v=n.getLineA(),g=n.getLineB(),p=n.getLineC();if(d(a,v)||d(a,g)||d(a,p)||d(c,v)||d(c,g)||d(c,p)||d(o,v)||d(o,g)||d(o,p))return!0;var x=m(h),T=u(n,x,!0);return T.length>0||(x=m(n),T=u(h,x,!0),T.length>0)};r.exports=l}),7563:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={CircleToCircle:e(22184),CircleToRectangle:e(26535),GetCircleToCircle:e(71145),GetCircleToRectangle:e(62508),GetLineToCircle:e(26111),GetLineToLine:e(96537),GetLineToPoints:e(17647),GetLineToPolygon:e(68439),GetLineToRectangle:e(9569),GetRaysFromPointToPolygon:e(7449),GetRectangleIntersection:e(82931),GetRectangleToRectangle:e(1946),GetRectangleToTriangle:e(34211),GetTriangleToCircle:e(80511),GetTriangleToLine:e(31343),GetTriangleToTriangle:e(70534),LineToCircle:e(61472),LineToLine:e(25227),LineToRectangle:e(47910),PointToLine:e(34426),PointToLineSegment:e(81414),RectangleToRectangle:e(90205),RectangleToTriangle:e(20370),RectangleToValues:e(8786),TriangleToCircle:e(48411),TriangleToLine:e(86117),TriangleToTriangle:e(23589)}}),50599:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return Math.atan2(e.y2-e.y1,e.x2-e.x1)};r.exports=y}),58813:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){u===void 0&&(u=1),m===void 0&&(m=[]);var d=Math.round(e.x1),l=Math.round(e.y1),h=Math.round(e.x2),n=Math.round(e.y2),a=Math.abs(h-d),c=Math.abs(n-l),o=d<h?1:-1,v=l<n?1:-1,g=a-c;m.push({x:d,y:l});for(var p=1;!(d===h&&l===n);){var x=g<<1;x>-c&&(g-=c,d+=o),x<a&&(g+=a,l+=v),p%u===0&&m.push({x:d,y:l}),p++}return m};r.exports=y}),88513:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){var d=u-(e.x1+e.x2)/2,l=m-(e.y1+e.y2)/2;return e.x1+=d,e.y1+=l,e.x2+=d,e.y2+=l,e};r.exports=y}),26718:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(88829),m=function(d){return new u(d.x1,d.y1,d.x2,d.y2)};r.exports=m}),88930:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return u.setTo(e.x1,e.y1,e.x2,e.y2)};r.exports=y}),90656:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return e.x1===u.x1&&e.y1===u.y1&&e.x2===u.x2&&e.y2===u.y2};r.exports=y}),30897:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(16028),m=function(d,l,h){h===void 0&&(h=l);var n=u(d),a=d.x2-d.x1,c=d.y2-d.y1;return l&&(d.x1=d.x1-a/n*l,d.y1=d.y1-c/n*l),h&&(d.x2=d.x2+a/n*h,d.y2=d.y2+c/n*h),d};r.exports=m}),30684:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(92951),m=e(21902),d=e(79967),l=function(h,n,a,c,o){c===void 0&&(c=0),o===void 0&&(o=[]);var v=[],g=h.x1,p=h.y1,x=h.x2-g,T=h.y2-p,E=m(n,o),M,P,w=a-1;for(M=0;M<w;M++)P=E(M/w),v.push(new d(g+x*P,p+T*P));if(P=E(1),v.push(new d(g+x*P,p+T*P)),c>0){var R=v[0],A=[R];for(M=1;M<v.length-1;M++){var O=v[M];u(R,O)>=c&&(A.push(O),R=O)}var F=v[v.length-1];return u(R,F)<c&&A.pop(),A.push(F),A}else return v};r.exports=l}),20487:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),m=function(d,l){return l===void 0&&(l=new u),l.x=(d.x1+d.x2)/2,l.y=(d.y1+d.y2)/2,l};r.exports=m}),11222:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),m=function(d,l,h){h===void 0&&(h=new u);var n=d.x1,a=d.y1,c=d.x2,o=d.y2,v=(c-n)*(c-n)+(o-a)*(o-a);if(v===0)return h;var g=((l.x-n)*(c-n)+(l.y-a)*(o-a))/v;return h.x=n+g*(c-n),h.y=a+g*(o-a),h};r.exports=m}),7377:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(83392),m=e(50599),d=e(79967),l=function(h,n){n===void 0&&(n=new d);var a=m(h)-u.TAU;return n.x=Math.cos(a),n.y=Math.sin(a),n};r.exports=l}),66464:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),m=function(d,l,h){return h===void 0&&(h=new u),h.x=d.x1+(d.x2-d.x1)*l,h.y=d.y1+(d.y2-d.y1)*l,h};r.exports=m}),8570:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(16028),m=e(79967),d=function(l,h,n,a){a===void 0&&(a=[]),!h&&n>0&&(h=u(l)/n);for(var c=l.x1,o=l.y1,v=l.x2,g=l.y2,p=0;p<h;p++){var x=p/h,T=c+(v-c)*x,E=o+(g-o)*x;a.push(new m(T,E))}return a};r.exports=d}),65269:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){var m=e.x1,d=e.y1,l=e.x2,h=e.y2,n=(l-m)*(l-m)+(h-d)*(h-d);if(n===0)return!1;var a=((d-u.y)*(l-m)-(m-u.x)*(h-d))/n;return Math.abs(a)*Math.sqrt(n)};r.exports=y}),82996:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return Math.abs(e.y1-e.y2)};r.exports=y}),16028:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return Math.sqrt((e.x2-e.x1)*(e.x2-e.x1)+(e.y2-e.y1)*(e.y2-e.y1))};r.exports=y}),88829:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(66464),d=e(8570),l=e(52394),h=e(74077),n=e(93736),a=new u({initialize:function(o,v,g,p){o===void 0&&(o=0),v===void 0&&(v=0),g===void 0&&(g=0),p===void 0&&(p=0),this.type=l.LINE,this.x1=o,this.y1=v,this.x2=g,this.y2=p},getPoint:function(c,o){return m(this,c,o)},getPoints:function(c,o,v){return d(this,c,o,v)},getRandomPoint:function(c){return h(this,c)},setTo:function(c,o,v,g){return c===void 0&&(c=0),o===void 0&&(o=0),v===void 0&&(v=0),g===void 0&&(g=0),this.x1=c,this.y1=o,this.x2=v,this.y2=g,this},getPointA:function(c){return c===void 0&&(c=new n),c.set(this.x1,this.y1),c},getPointB:function(c){return c===void 0&&(c=new n),c.set(this.x2,this.y2),c},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(c){this.x1<=this.x2?this.x1=c:this.x2=c}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(c){this.x1>this.x2?this.x1=c:this.x2=c}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(c){this.y1<=this.y2?this.y1=c:this.y2=c}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(c){this.y1>this.y2?this.y1=c:this.y2=c}}});r.exports=a}),73273:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(83392),m=e(1071),d=e(50599),l=function(h){var n=d(h)-u.TAU;return m(n,-Math.PI,Math.PI)};r.exports=l}),96936:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(83392),m=e(50599),d=function(l){return Math.cos(m(l)-u.TAU)};r.exports=d}),43581:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(83392),m=e(50599),d=function(l){return Math.sin(m(l)-u.TAU)};r.exports=d}),13990:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){return e.x1+=u,e.y1+=m,e.x2+=u,e.y2+=m,e};r.exports=y}),1298:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return-((e.x2-e.x1)/(e.y2-e.y1))};r.exports=y}),74077:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),m=function(d,l){l===void 0&&(l=new u);var h=Math.random();return l.x=d.x1+h*(d.x2-d.x1),l.y=d.y1+h*(d.y2-d.y1),l};r.exports=m}),30473:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(50599),m=e(73273),d=function(l,h){return 2*m(h)-Math.PI-u(l)};r.exports=d}),25968:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(1809),m=function(d,l){var h=(d.x1+d.x2)/2,n=(d.y1+d.y2)/2;return u(d,h,n,l)};r.exports=m}),24296:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(1809),m=function(d,l,h){return u(d,l.x,l.y,h)};r.exports=m}),1809:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d){var l=Math.cos(d),h=Math.sin(d),n=e.x1-u,a=e.y1-m;return e.x1=n*l-a*h+u,e.y1=n*h+a*l+m,n=e.x2-u,a=e.y2-m,e.x2=n*l-a*h+u,e.y2=n*h+a*l+m,e};r.exports=y}),88171:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d,l){return e.x1=u,e.y1=m,e.x2=u+Math.cos(d)*l,e.y2=m+Math.sin(d)*l,e};r.exports=y}),82797:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return(e.y2-e.y1)/(e.x2-e.x1)};r.exports=y}),41067:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return Math.abs(e.x1-e.x2)};r.exports=y}),28482:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(88829);u.Angle=e(50599),u.BresenhamPoints=e(58813),u.CenterOn=e(88513),u.Clone=e(26718),u.CopyFrom=e(88930),u.Equals=e(90656),u.Extend=e(30897),u.GetEasedPoints=e(30684),u.GetMidPoint=e(20487),u.GetNearestPoint=e(11222),u.GetNormal=e(7377),u.GetPoint=e(66464),u.GetPoints=e(8570),u.GetShortestDistance=e(65269),u.Height=e(82996),u.Length=e(16028),u.NormalAngle=e(73273),u.NormalX=e(96936),u.NormalY=e(43581),u.Offset=e(13990),u.PerpSlope=e(1298),u.Random=e(74077),u.ReflectAngle=e(30473),u.Rotate=e(25968),u.RotateAroundPoint=e(24296),u.RotateAroundXY=e(1809),u.SetToAngle=e(88171),u.Slope=e(82797),u.Width=e(41067),r.exports=u}),18693:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(74118),d=e(93736);function l(n,a,c,o){var v=n-c,g=a-o,p=v*v+g*g;return Math.sqrt(p)}var h=new u({initialize:function(a,c,o){this.vertex1=a,this.vertex2=c,this.vertex3=o,this.bounds=new m,this._inCenter=new d},getInCenter:function(n){n===void 0&&(n=!0);var a=this.vertex1,c=this.vertex2,o=this.vertex3,v,g,p,x,T,E;n?(v=a.x,g=a.y,p=c.x,x=c.y,T=o.x,E=o.y):(v=a.vx,g=a.vy,p=c.vx,x=c.vy,T=o.vx,E=o.vy);var M=l(T,E,p,x),P=l(v,g,T,E),w=l(p,x,v,g),R=M+P+w;return this._inCenter.set((v*M+p*P+T*w)/R,(g*M+x*P+E*w)/R)},contains:function(n,a,c){var o=this.vertex1,v=this.vertex2,g=this.vertex3,p=o.vx,x=o.vy,T=v.vx,E=v.vy,M=g.vx,P=g.vy;if(c){var w=c.a,R=c.b,A=c.c,O=c.d,F=c.e,b=c.f;p=o.vx*w+o.vy*A+F,x=o.vx*R+o.vy*O+b,T=v.vx*w+v.vy*A+F,E=v.vx*R+v.vy*O+b,M=g.vx*w+g.vy*A+F,P=g.vx*R+g.vy*O+b}var D=M-p,I=P-x,B=T-p,z=E-x,Y=n-p,X=a-x,H=D*D+I*I,N=D*B+I*z,U=D*Y+I*X,L=B*B+z*z,G=B*Y+z*X,V=H*L-N*N,k=V===0?0:1/V,W=(L*U-N*G)*k,$=(H*G-N*U)*k;return W>=0&&$>=0&&W+$<1},isCounterClockwise:function(n){var a=this.vertex1,c=this.vertex2,o=this.vertex3,v=(c.vx-a.vx)*(o.vy-a.vy)-(c.vy-a.vy)*(o.vx-a.vx);return n<=0?v>=0:v<0},load:function(n,a,c,o,v){return c=this.vertex1.load(n,a,c,o,v),c=this.vertex2.load(n,a,c,o,v),c=this.vertex3.load(n,a,c,o,v),c},transformCoordinatesLocal:function(n,a,c,o){return this.vertex1.transformCoordinatesLocal(n,a,c,o),this.vertex2.transformCoordinatesLocal(n,a,c,o),this.vertex3.transformCoordinatesLocal(n,a,c,o),this},updateBounds:function(){var n=this.vertex1,a=this.vertex2,c=this.vertex3,o=this.bounds;return o.x=Math.min(n.vx,a.vx,c.vx),o.y=Math.min(n.vy,a.vy,c.vy),o.width=Math.max(n.vx,a.vx,c.vx)-o.x,o.height=Math.max(n.vy,a.vy,c.vy)-o.y,this},isInView:function(n,a,c,o,v,g,p,x,T,E,M){this.update(o,v,g,p,x,T,E,M);var P=this.vertex1,w=this.vertex2,R=this.vertex3;if(P.ta<=0&&w.ta<=0&&R.ta<=0||a&&!this.isCounterClockwise(c))return!1;var A=this.bounds;A.x=Math.min(P.tx,w.tx,R.tx),A.y=Math.min(P.ty,w.ty,R.ty),A.width=Math.max(P.tx,w.tx,R.tx)-A.x,A.height=Math.max(P.ty,w.ty,R.ty)-A.y;var O=n.x+n.width,F=n.y+n.height;return A.width<=0||A.height<=0||n.width<=0||n.height<=0?!1:!(A.right<n.x||A.bottom<n.y||A.x>O||A.y>F)},scrollUV:function(n,a){return this.vertex1.scrollUV(n,a),this.vertex2.scrollUV(n,a),this.vertex3.scrollUV(n,a),this},scaleUV:function(n,a){return this.vertex1.scaleUV(n,a),this.vertex2.scaleUV(n,a),this.vertex3.scaleUV(n,a),this},setColor:function(n){return this.vertex1.color=n,this.vertex2.color=n,this.vertex3.color=n,this},update:function(n,a,c,o,v,g,p,x){return this.vertex1.update(a,c,o,v,g,p,x,n),this.vertex2.update(a,c,o,v,g,p,x,n),this.vertex3.update(a,c,o,v,g,p,x,n),this},translate:function(n,a){a===void 0&&(a=0);var c=this.vertex1,o=this.vertex2,v=this.vertex3;return c.x+=n,c.y+=a,o.x+=n,o.y+=a,v.x+=n,v.y+=a,this},x:{get:function(){return this.getInCenter().x},set:function(n){var a=this.getInCenter();this.translate(n-a.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(n){var a=this.getInCenter();this.translate(0,n-a.y)}},alpha:{get:function(){var n=this.vertex1,a=this.vertex2,c=this.vertex3;return(n.alpha+a.alpha+c.alpha)/3},set:function(n){this.vertex1.alpha=n,this.vertex2.alpha=n,this.vertex3.alpha=n}},depth:{get:function(){var n=this.vertex1,a=this.vertex2,c=this.vertex3;return(n.vz+a.vz+c.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});r.exports=h}),99425:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(18693),m=e(72632),d=e(16650),l=e(70015),h=e(85769),n=new l,a=new l,c=new d,o=function(v){var g=m(v,"mesh"),p=m(v,"texture",null),x=m(v,"frame"),T=m(v,"width",1),E=m(v,"height",T),M=m(v,"widthSegments",1),P=m(v,"heightSegments",M),w=m(v,"x",0),R=m(v,"y",0),A=m(v,"z",0),O=m(v,"rotateX",0),F=m(v,"rotateY",0),b=m(v,"rotateZ",0),D=m(v,"zIsUp",!0),I=m(v,"isOrtho",g?g.dirtyCache[11]:!1),B=m(v,"colors",[16777215]),z=m(v,"alphas",[1]),Y=m(v,"tile",!1),X=m(v,"flipY",!1),H=m(v,"width",null),N={faces:[],verts:[]};n.set(w,R,A),a.set(O,F,b),c.fromRotationXYTranslation(a,n,D);var U;if(!p&&g)p=g.texture,x||(U=g.frame);else if(g&&typeof p=="string")p=g.scene.sys.textures.get(p);else if(!p)return N;U||(U=p.get(x)),!H&&I&&p&&g&&(T=U.width/g.height,E=U.height/g.height);var L=T/2,G=E/2,V=Math.floor(M),k=Math.floor(P),W=V+1,$=k+1,K=T/V,j=E/k,Z=[],J=[],Q,_,q=0,et=1,rt=0,ot=1;U&&(q=U.u0,et=U.u1,X?(rt=U.v1,ot=U.v0):(rt=U.v0,ot=U.v1));var ht=et-q,tt=ot-rt;for(_=0;_<$;_++){var at=_*j-G;for(Q=0;Q<W;Q++){var nt=Q*K-L;J.push(nt,-at);var pt=q+ht*(Q/V),vt=rt+tt*(_/k);Z.push(pt,vt)}}Array.isArray(B)||(B=[B]),Array.isArray(z)||(z=[z]);var Lt=0,wt=0;for(_=0;_<k;_++)for(Q=0;Q<V;Q++){var Tt=(Q+W*_)*2,mt=(Q+W*(_+1))*2,Rt=(Q+1+W*(_+1))*2,Ut=(Q+1+W*_)*2,Kt=B[wt],te=z[Lt],Ce=new h(J[Tt],J[Tt+1],0,Z[Tt],Z[Tt+1],Kt,te).transformMat4(c),ls=new h(J[mt],J[mt+1],0,Z[mt],Z[mt+1],Kt,te).transformMat4(c),us=new h(J[Ut],J[Ut+1],0,Z[Ut],Z[Ut+1],Kt,te).transformMat4(c),ds=new h(J[mt],J[mt+1],0,Z[mt],Z[mt+1],Kt,te).transformMat4(c),fs=new h(J[Rt],J[Rt+1],0,Z[Rt],Z[Rt+1],Kt,te).transformMat4(c),cs=new h(J[Ut],J[Ut+1],0,Z[Ut],Z[Ut+1],Kt,te).transformMat4(c);Y&&(Ce.setUVs(q,ot),ls.setUVs(q,rt),us.setUVs(et,ot),ds.setUVs(q,rt),fs.setUVs(et,rt),cs.setUVs(et,ot)),wt++,wt===B.length&&(wt=0),Lt++,Lt===z.length&&(Lt=0),N.verts.push(Ce,ls,us,ds,fs,cs),N.faces.push(new u(Ce,ls,us),new u(ds,fs,cs))}return g&&(g.faces=g.faces.concat(N.faces),g.vertices=g.vertices.concat(N.verts)),N};r.exports=o}),53267:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(18693),m=e(16650),d=e(70015),l=e(85769),h=new d,n=new d,a=new m,c=function(o,v,g,p,x,T,E,M,P,w){g===void 0&&(g=1),p===void 0&&(p=0),x===void 0&&(x=0),T===void 0&&(T=0),E===void 0&&(E=0),M===void 0&&(M=0),P===void 0&&(P=0),w===void 0&&(w=!0);var R={faces:[],verts:[]},A=o.materials;h.set(p,x,T),n.set(E,M,P),a.fromRotationXYTranslation(n,h,w);for(var O=0;O<o.models.length;O++)for(var F=o.models[O],b=F.vertices,D=F.textureCoords,I=F.faces,B=0;B<I.length;B++){var z=I[B],Y=z.vertices[0],X=z.vertices[1],H=z.vertices[2],N=b[Y.vertexIndex],U=b[X.vertexIndex],L=b[H.vertexIndex],G=Y.textureCoordsIndex,V=X.textureCoordsIndex,k=H.textureCoordsIndex,W=G===-1?{u:0,v:1}:D[G],$=V===-1?{u:0,v:0}:D[V],K=k===-1?{u:1,v:1}:D[k],j=16777215;z.material!==""&&A[z.material]&&(j=A[z.material]);var Z=new l(N.x*g,N.y*g,N.z*g,W.u,W.v,j).transformMat4(a),J=new l(U.x*g,U.y*g,U.z*g,$.u,$.v,j).transformMat4(a),Q=new l(L.x*g,L.y*g,L.z*g,K.u,K.v,j).transformMat4(a);R.verts.push(Z,J,Q),R.faces.push(new u(Z,J,Q))}return v&&(v.faces=v.faces.concat(R.faces),v.vertices=v.vertices.concat(R.verts)),R};r.exports=c}),67623:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(18693),m=e(85769),d=function(l,h,n,a,c,o,v,g){if(a===void 0&&(a=!1),o===void 0&&(o=16777215),v===void 0&&(v=1),g===void 0&&(g=!1),l.length!==h.length&&!a){console.warn("GenerateVerts: vertices and uvs count not equal");return}var p={faces:[],vertices:[]},x,T,E,M,P,w,R,A,O,F,b,D=a?3:2,I=Array.isArray(o),B=Array.isArray(v);if(Array.isArray(n)&&n.length>0)for(x=0;x<n.length;x++){var z=n[x],Y=n[x]*2,X=n[x]*D;T=l[X],E=l[X+1],M=a?l[X+2]:0,P=h[Y],w=h[Y+1],g&&(w=1-w),R=I?o[z]:o,A=B?v[z]:v,O=0,F=0,b=0,c&&(O=c[X],F=c[X+1],b=a?c[X+2]:0),p.vertices.push(new m(T,E,M,P,w,R,A,O,F,b))}else{var H=0,N=0;for(x=0;x<l.length;x+=D)T=l[x],E=l[x+1],M=a?l[x+2]:0,P=h[H],w=h[H+1],R=I?o[N]:o,A=B?v[N]:v,O=0,F=0,b=0,c&&(O=c[x],F=c[x+1],b=a?c[x+2]:0),p.vertices.push(new m(T,E,M,P,w,R,A,O,F,b)),H+=2,N++}for(x=0;x<p.vertices.length;x+=3){var U=p.vertices[x],L=p.vertices[x+1],G=p.vertices[x+2];p.faces.push(new u(U,L,G))}return p};r.exports=d}),27291:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=!0,e="untitled",u="",m="";function d(T){var E=T.indexOf("#");return E>-1?T.substring(0,E):T}function l(T){return T.models.length===0&&T.models.push({faces:[],name:e,textureCoords:[],vertexNormals:[],vertices:[]}),u="",T.models[T.models.length-1]}function h(T,E){var M=T.length>=2?T[1]:e;E.models.push({faces:[],name:M,textureCoords:[],vertexNormals:[],vertices:[]}),u=""}function n(T){T.length===2&&(u=T[1])}function a(T,E){var M=T.length,P=M>=2?parseFloat(T[1]):0,w=M>=3?parseFloat(T[2]):0,R=M>=4?parseFloat(T[3]):0;l(E).vertices.push({x:P,y:w,z:R})}function c(T,E){var M=T.length,P=M>=2?parseFloat(T[1]):0,w=M>=3?parseFloat(T[2]):0,R=M>=4?parseFloat(T[3]):0;isNaN(P)&&(P=0),isNaN(w)&&(w=0),isNaN(R)&&(R=0),y&&(w=1-w),l(E).textureCoords.push({u:P,v:w,w:R})}function o(T,E){var M=T.length,P=M>=2?parseFloat(T[1]):0,w=M>=3?parseFloat(T[2]):0,R=M>=4?parseFloat(T[3]):0;l(E).vertexNormals.push({x:P,y:w,z:R})}function v(T,E){var M=T.length-1;if(!(M<3)){for(var P={group:u,material:m,vertices:[]},w=0;w<M;w++){var R=T[w+1],A=R.split("/"),O=A.length;if(!(O<1||O>3)){var F=0,b=0,D=0;F=parseInt(A[0],10),O>1&&A[1]!==""&&(b=parseInt(A[1],10)),O>2&&(D=parseInt(A[2],10)),F!==0&&(F<0&&(F=l(E).vertices.length+1+F),b-=1,F-=1,D-=1,P.vertices.push({textureCoordsIndex:b,vertexIndex:F,vertexNormalIndex:D}))}}l(E).faces.push(P)}}function g(T,E){T.length>=2&&E.materialLibraries.push(T[1])}function p(T){T.length>=2&&(m=T[1])}var x=function(T,E){E===void 0&&(E=!0),y=E;var M={materials:{},materialLibraries:[],models:[]};u="",m="";for(var P=T.split(`
`),w=0;w<P.length;w++){var R=d(P[w]),A=R.replace(/\s\s+/g," ").trim().split(" ");switch(A[0].toLowerCase()){case"o":h(A,M);break;case"g":n(A);break;case"v":a(A,M);break;case"vt":c(A,M);break;case"vn":o(A,M);break;case"f":v(A,M);break;case"mtllib":g(A,M);break;case"usemtl":p(A);break}}return M};r.exports=x}),76799:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(22946),m=function(d){for(var l={},h=d.split(`
`),n="",a=0;a<h.length;a++){var c=h[a].trim();if(!(c.indexOf("#")===0||c==="")){var o=c.replace(/\s\s+/g," ").trim().split(" ");switch(o[0].toLowerCase()){case"newmtl":{n=o[1];break}case"kd":{var v=Math.floor(o[1]*255),g=o.length>=2?Math.floor(o[2]*255):v,p=o.length>=3?Math.floor(o[3]*255):v;l[n]=u(v,g,p);break}}}}return l};r.exports=m}),15313:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d){var l,h;if(m===void 0&&d===void 0){var n=e.getInCenter();l=n.x,h=n.y}var a=Math.cos(u),c=Math.sin(u),o=e.vertex1,v=e.vertex2,g=e.vertex3,p=o.x-l,x=o.y-h;o.set(p*a-x*c+l,p*c+x*a+h),p=v.x-l,x=v.y-h,v.set(p*a-x*c+l,p*c+x*a+h),p=g.x-l,x=g.y-h,g.set(p*a-x*c+l,p*c+x*a+h)};r.exports=y}),85769:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(75512),d=e(70015),l=new u({Extends:d,initialize:function(n,a,c,o,v,g,p,x,T,E){g===void 0&&(g=16777215),p===void 0&&(p=1),x===void 0&&(x=0),T===void 0&&(T=0),E===void 0&&(E=0),d.call(this,n,a,c),this.vx=0,this.vy=0,this.vz=0,this.nx=x,this.ny=T,this.nz=E,this.u=o,this.v=v,this.color=g,this.alpha=p,this.tx=0,this.ty=0,this.ta=0,this.tu=o,this.tv=v},setUVs:function(h,n){return this.u=h,this.v=n,this.tu=h,this.tv=n,this},scrollUV:function(h,n){return this.tu+=h,this.tv+=n,this},scaleUV:function(h,n){return this.tu=this.u*h,this.tv=this.v*n,this},transformCoordinatesLocal:function(h,n,a,c){var o=this.x,v=this.y,g=this.z,p=h.val,x=o*p[0]+v*p[4]+g*p[8]+p[12],T=o*p[1]+v*p[5]+g*p[9]+p[13],E=o*p[2]+v*p[6]+g*p[10]+p[14],M=o*p[3]+v*p[7]+g*p[11]+p[15];this.vx=x/M*n,this.vy=-(T/M)*a,c<=0?this.vz=E/M:this.vz=-(E/M)},resize:function(h,n,a,c,o,v){return this.x=h,this.y=n,this.vx=this.x*a,this.vy=-this.y*c,this.vz=0,o<.5?this.vx+=a*(.5-o):o>.5&&(this.vx-=a*(o-.5)),v<.5?this.vy+=c*(.5-v):v>.5&&(this.vy-=c*(v-.5)),this},update:function(h,n,a,c,o,v,g,p){var x=this.vx*h+this.vy*a+o,T=this.vx*n+this.vy*c+v;return g&&(x=Math.round(x),T=Math.round(T)),this.tx=x,this.ty=T,this.ta=this.alpha*p,this},load:function(h,n,a,c,o){return h[++a]=this.tx,h[++a]=this.ty,h[++a]=this.tu,h[++a]=this.tv,h[++a]=c,h[++a]=o,n[++a]=m.getTintAppendFloatAlpha(this.color,this.ta),a}});r.exports=l}),14293:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u={Face:e(18693),GenerateGridVerts:e(99425),GenerateObjVerts:e(53267),GenerateVerts:e(67623),ParseObj:e(27291),ParseObjMaterial:e(76799),RotateFace:e(15313),Vertex:e(85769)};r.exports=u}),77601:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return e.setTo(Math.ceil(e.x),Math.ceil(e.y))};r.exports=y}),38933:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),m=function(d){return new u(d.x,d.y)};r.exports=m}),47103:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return u.setTo(e.x,e.y)};r.exports=y}),13625:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return e.x===u.x&&e.y===u.y};r.exports=y}),12536:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return e.setTo(Math.floor(e.x),Math.floor(e.y))};r.exports=y}),54205:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),m=function(d,l){if(l===void 0&&(l=new u),!Array.isArray(d))throw new Error("GetCentroid points argument must be an array");var h=d.length;if(h<1)throw new Error("GetCentroid points array must not be empty");if(h===1)l.x=d[0].x,l.y=d[0].y;else{for(var n=0;n<h;n++)l.x+=d[n].x,l.y+=d[n].y;l.x/=h,l.y/=h}return l};r.exports=m}),50083:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)};r.exports=y}),82712:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return e.x*e.x+e.y*e.y};r.exports=y}),20052:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(74118),m=function(d,l){l===void 0&&(l=new u);for(var h=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,c=Number.POSITIVE_INFINITY,o=0;o<d.length;o++){var v=d[o];v.x>h&&(h=v.x),v.x<n&&(n=v.x),v.y>a&&(a=v.y),v.y<c&&(c=v.y)}return l.x=n,l.y=c,l.width=h-n,l.height=a-c,l};r.exports=m}),77154:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),m=function(d,l,h,n){return h===void 0&&(h=0),n===void 0&&(n=new u),n.x=d.x+(l.x-d.x)*h,n.y=d.y+(l.y-d.y)*h,n};r.exports=m}),42397:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return e.setTo(e.y,e.x)};r.exports=y}),59464:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),m=function(d,l){return l===void 0&&(l=new u),l.setTo(-d.x,-d.y)};r.exports=m}),79967:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(52394),d=new u({initialize:function(h,n){h===void 0&&(h=0),n===void 0&&(n=h),this.type=m.POINT,this.x=h,this.y=n},setTo:function(l,h){return l===void 0&&(l=0),h===void 0&&(h=l),this.x=l,this.y=h,this}});r.exports=d}),53581:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),m=e(82712),d=function(l,h,n){n===void 0&&(n=new u);var a=l.x*h.x+l.y*h.y,c=a/m(h);return c!==0&&(n.x=c*h.x,n.y=c*h.y),n};r.exports=d}),50817:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),m=function(d,l,h){h===void 0&&(h=new u);var n=d.x*l.x+d.y*l.y;return n!==0&&(h.x=n*l.x,h.y=n*l.y),h};r.exports=m}),40525:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(50083),m=function(d,l){if(d.x!==0||d.y!==0){var h=u(d);d.x/=h,d.y/=h}return d.x*=l,d.y*=l,d};r.exports=m}),63472:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967);u.Ceil=e(77601),u.Clone=e(38933),u.CopyFrom=e(47103),u.Equals=e(13625),u.Floor=e(12536),u.GetCentroid=e(54205),u.GetMagnitude=e(50083),u.GetMagnitudeSq=e(82712),u.GetRectangleFromPoints=e(20052),u.Interpolate=e(77154),u.Invert=e(42397),u.Negative=e(59464),u.Project=e(53581),u.ProjectUnit=e(50817),u.SetMagnitude=e(40525),r.exports=u}),19631:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(8580),m=function(d){return new u(d.points)};r.exports=m}),45604:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){for(var d=!1,l=-1,h=e.points.length-1;++l<e.points.length;h=l){var n=e.points[l].x,a=e.points[l].y,c=e.points[h].x,o=e.points[h].y;(a<=m&&m<o||o<=m&&m<a)&&u<(c-n)*(m-a)/(o-a)+n&&(d=!d)}return d};r.exports=y}),87289:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(45604),m=function(d,l){return u(d,l.x,l.y)};r.exports=m}),11117:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function y(N,U,L){L=L||2;var G=U&&U.length,V=G?U[0]*L:N.length,k=e(N,0,V,L,!0),W=[];if(!k||k.next===k.prev)return W;var $,K,j,Z,J,Q,_;if(G&&(k=a(N,U,k,L)),N.length>80*L){$=j=N[0],K=Z=N[1];for(var q=L;q<V;q+=L)J=N[q],Q=N[q+1],J<$&&($=J),Q<K&&(K=Q),J>j&&(j=J),Q>Z&&(Z=Q);_=Math.max(j-$,Z-K),_=_!==0?32767/_:0}return m(k,W,L,$,K,_,0),W}function e(N,U,L,G,V){var k,W;if(V===H(N,U,L,G)>0)for(k=U;k<L;k+=G)W=z(k,N[k],N[k+1],W);else for(k=L-G;k>=U;k-=G)W=z(k,N[k],N[k+1],W);return W&&R(W,W.next)&&(Y(W),W=W.next),W}function u(N,U){if(!N)return N;U||(U=N);var L=N,G;do if(G=!1,!L.steiner&&(R(L,L.next)||w(L.prev,L,L.next)===0)){if(Y(L),L=U=L.prev,L===L.next)break;G=!0}else L=L.next;while(G||L!==U);return U}function m(N,U,L,G,V,k,W){if(N){!W&&k&&p(N,G,V,k);for(var $=N,K,j;N.prev!==N.next;){if(K=N.prev,j=N.next,k?l(N,G,V,k):d(N)){U.push(K.i/L|0),U.push(N.i/L|0),U.push(j.i/L|0),Y(N),N=j.next,$=j.next;continue}if(N=j,N===$){W?W===1?(N=h(u(N),U,L),m(N,U,L,G,V,k,2)):W===2&&n(N,U,L,G,V,k):m(u(N),U,L,G,V,k,1);break}}}}function d(N){var U=N.prev,L=N,G=N.next;if(w(U,L,G)>=0)return!1;for(var V=U.x,k=L.x,W=G.x,$=U.y,K=L.y,j=G.y,Z=V<k?V<W?V:W:k<W?k:W,J=$<K?$<j?$:j:K<j?K:j,Q=V>k?V>W?V:W:k>W?k:W,_=$>K?$>j?$:j:K>j?K:j,q=G.next;q!==U;){if(q.x>=Z&&q.x<=Q&&q.y>=J&&q.y<=_&&M(V,$,k,K,W,j,q.x,q.y)&&w(q.prev,q,q.next)>=0)return!1;q=q.next}return!0}function l(N,U,L,G){var V=N.prev,k=N,W=N.next;if(w(V,k,W)>=0)return!1;for(var $=V.x,K=k.x,j=W.x,Z=V.y,J=k.y,Q=W.y,_=$<K?$<j?$:j:K<j?K:j,q=Z<J?Z<Q?Z:Q:J<Q?J:Q,et=$>K?$>j?$:j:K>j?K:j,rt=Z>J?Z>Q?Z:Q:J>Q?J:Q,ot=T(_,q,U,L,G),ht=T(et,rt,U,L,G),tt=N.prevZ,at=N.nextZ;tt&&tt.z>=ot&&at&&at.z<=ht;){if(tt.x>=_&&tt.x<=et&&tt.y>=q&&tt.y<=rt&&tt!==V&&tt!==W&&M($,Z,K,J,j,Q,tt.x,tt.y)&&w(tt.prev,tt,tt.next)>=0||(tt=tt.prevZ,at.x>=_&&at.x<=et&&at.y>=q&&at.y<=rt&&at!==V&&at!==W&&M($,Z,K,J,j,Q,at.x,at.y)&&w(at.prev,at,at.next)>=0))return!1;at=at.nextZ}for(;tt&&tt.z>=ot;){if(tt.x>=_&&tt.x<=et&&tt.y>=q&&tt.y<=rt&&tt!==V&&tt!==W&&M($,Z,K,J,j,Q,tt.x,tt.y)&&w(tt.prev,tt,tt.next)>=0)return!1;tt=tt.prevZ}for(;at&&at.z<=ht;){if(at.x>=_&&at.x<=et&&at.y>=q&&at.y<=rt&&at!==V&&at!==W&&M($,Z,K,J,j,Q,at.x,at.y)&&w(at.prev,at,at.next)>=0)return!1;at=at.nextZ}return!0}function h(N,U,L){var G=N;do{var V=G.prev,k=G.next.next;!R(V,k)&&A(V,G,G.next,k)&&D(V,k)&&D(k,V)&&(U.push(V.i/L|0),U.push(G.i/L|0),U.push(k.i/L|0),Y(G),Y(G.next),G=N=k),G=G.next}while(G!==N);return u(G)}function n(N,U,L,G,V,k){var W=N;do{for(var $=W.next.next;$!==W.prev;){if(W.i!==$.i&&P(W,$)){var K=B(W,$);W=u(W,W.next),K=u(K,K.next),m(W,U,L,G,V,k,0),m(K,U,L,G,V,k,0);return}$=$.next}W=W.next}while(W!==N)}function a(N,U,L,G){var V=[],k,W,$,K,j;for(k=0,W=U.length;k<W;k++)$=U[k]*G,K=k<W-1?U[k+1]*G:N.length,j=e(N,$,K,G,!1),j===j.next&&(j.steiner=!0),V.push(E(j));for(V.sort(c),k=0;k<V.length;k++)L=o(V[k],L);return L}function c(N,U){return N.x-U.x}function o(N,U){var L=v(N,U);if(!L)return U;var G=B(L,N);return u(G,G.next),u(L,L.next)}function v(N,U){var L=U,G=N.x,V=N.y,k=-1/0,W;do{if(V<=L.y&&V>=L.next.y&&L.next.y!==L.y){var $=L.x+(V-L.y)*(L.next.x-L.x)/(L.next.y-L.y);if($<=G&&$>k&&(k=$,W=L.x<L.next.x?L:L.next,$===G))return W}L=L.next}while(L!==U);if(!W)return null;var K=W,j=W.x,Z=W.y,J=1/0,Q;L=W;do G>=L.x&&L.x>=j&&G!==L.x&&M(V<Z?G:k,V,j,Z,V<Z?k:G,V,L.x,L.y)&&(Q=Math.abs(V-L.y)/(G-L.x),D(L,N)&&(Q<J||Q===J&&(L.x>W.x||L.x===W.x&&g(W,L)))&&(W=L,J=Q)),L=L.next;while(L!==K);return W}function g(N,U){return w(N.prev,N,U.prev)<0&&w(U.next,N,N.next)<0}function p(N,U,L,G){var V=N;do V.z===0&&(V.z=T(V.x,V.y,U,L,G)),V.prevZ=V.prev,V.nextZ=V.next,V=V.next;while(V!==N);V.prevZ.nextZ=null,V.prevZ=null,x(V)}function x(N){var U,L,G,V,k,W,$,K,j=1;do{for(L=N,N=null,k=null,W=0;L;){for(W++,G=L,$=0,U=0;U<j&&($++,G=G.nextZ,!!G);U++);for(K=j;$>0||K>0&&G;)$!==0&&(K===0||!G||L.z<=G.z)?(V=L,L=L.nextZ,$--):(V=G,G=G.nextZ,K--),k?k.nextZ=V:N=V,V.prevZ=k,k=V;L=G}k.nextZ=null,j*=2}while(W>1);return N}function T(N,U,L,G,V){return N=(N-L)*V|0,U=(U-G)*V|0,N=(N|N<<8)&16711935,N=(N|N<<4)&252645135,N=(N|N<<2)&858993459,N=(N|N<<1)&1431655765,U=(U|U<<8)&16711935,U=(U|U<<4)&252645135,U=(U|U<<2)&858993459,U=(U|U<<1)&1431655765,N|U<<1}function E(N){var U=N,L=N;do(U.x<L.x||U.x===L.x&&U.y<L.y)&&(L=U),U=U.next;while(U!==N);return L}function M(N,U,L,G,V,k,W,$){return(V-W)*(U-$)>=(N-W)*(k-$)&&(N-W)*(G-$)>=(L-W)*(U-$)&&(L-W)*(k-$)>=(V-W)*(G-$)}function P(N,U){return N.next.i!==U.i&&N.prev.i!==U.i&&!b(N,U)&&(D(N,U)&&D(U,N)&&I(N,U)&&(w(N.prev,N,U.prev)||w(N,U.prev,U))||R(N,U)&&w(N.prev,N,N.next)>0&&w(U.prev,U,U.next)>0)}function w(N,U,L){return(U.y-N.y)*(L.x-U.x)-(U.x-N.x)*(L.y-U.y)}function R(N,U){return N.x===U.x&&N.y===U.y}function A(N,U,L,G){var V=F(w(N,U,L)),k=F(w(N,U,G)),W=F(w(L,G,N)),$=F(w(L,G,U));return!!(V!==k&&W!==$||V===0&&O(N,L,U)||k===0&&O(N,G,U)||W===0&&O(L,N,G)||$===0&&O(L,U,G))}function O(N,U,L){return U.x<=Math.max(N.x,L.x)&&U.x>=Math.min(N.x,L.x)&&U.y<=Math.max(N.y,L.y)&&U.y>=Math.min(N.y,L.y)}function F(N){return N>0?1:N<0?-1:0}function b(N,U){var L=N;do{if(L.i!==N.i&&L.next.i!==N.i&&L.i!==U.i&&L.next.i!==U.i&&A(L,L.next,N,U))return!0;L=L.next}while(L!==N);return!1}function D(N,U){return w(N.prev,N,N.next)<0?w(N,U,N.next)>=0&&w(N,N.prev,U)>=0:w(N,U,N.prev)<0||w(N,N.next,U)<0}function I(N,U){var L=N,G=!1,V=(N.x+U.x)/2,k=(N.y+U.y)/2;do L.y>k!=L.next.y>k&&L.next.y!==L.y&&V<(L.next.x-L.x)*(k-L.y)/(L.next.y-L.y)+L.x&&(G=!G),L=L.next;while(L!==N);return G}function B(N,U){var L=new X(N.i,N.x,N.y),G=new X(U.i,U.x,U.y),V=N.next,k=U.prev;return N.next=U,U.prev=N,L.next=V,V.prev=L,G.next=L,L.prev=G,k.next=G,G.prev=k,G}function z(N,U,L,G){var V=new X(N,U,L);return G?(V.next=G.next,V.prev=G,G.next.prev=V,G.next=V):(V.prev=V,V.next=V),V}function Y(N){N.next.prev=N.prev,N.prev.next=N.next,N.prevZ&&(N.prevZ.nextZ=N.nextZ),N.nextZ&&(N.nextZ.prevZ=N.prevZ)}function X(N,U,L){this.i=N,this.x=U,this.y=L,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}y.deviation=function(N,U,L,G){var V=U&&U.length,k=V?U[0]*L:N.length,W=Math.abs(H(N,0,k,L));if(V)for(var $=0,K=U.length;$<K;$++){var j=U[$]*L,Z=$<K-1?U[$+1]*L:N.length;W-=Math.abs(H(N,j,Z,L))}var J=0;for($=0;$<G.length;$+=3){var Q=G[$]*L,_=G[$+1]*L,q=G[$+2]*L;J+=Math.abs((N[Q]-N[q])*(N[_+1]-N[Q+1])-(N[Q]-N[_])*(N[q+1]-N[Q+1]))}return W===0&&J===0?0:Math.abs((J-W)/W)};function H(N,U,L,G){for(var V=0,k=U,W=L-G;k<L;k+=G)V+=(N[W]-N[k])*(N[k+1]+N[W+1]),W=k;return V}y.flatten=function(N){for(var U=N[0][0].length,L={vertices:[],holes:[],dimensions:U},G=0,V=0;V<N.length;V++){for(var k=0;k<N[V].length;k++)for(var W=0;W<U;W++)L.vertices.push(N[V][k][W]);V>0&&(G+=N[V-1].length,L.holes.push(G))}return L},r.exports=y}),14045:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(74118),m=function(d,l){l===void 0&&(l=new u);for(var h=1/0,n=1/0,a=-h,c=-n,o,v=0;v<d.points.length;v++)o=d.points[v],h=Math.min(h,o.x),n=Math.min(n,o.y),a=Math.max(a,o.x),c=Math.max(c,o.y);return l.x=h,l.y=n,l.width=a-h,l.height=c-n,l};r.exports=m}),98286:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){u===void 0&&(u=[]);for(var m=0;m<e.points.length;m++)u.push(e.points[m].x),u.push(e.points[m].y);return u};r.exports=y}),89294:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(16028),m=e(88829),d=e(5159),l=function(h,n,a,c){c===void 0&&(c=[]);var o=h.points,v=d(h);!n&&a>0&&(n=v/a);for(var g=0;g<n;g++)for(var p=v*(g/n),x=0,T=0;T<o.length;T++){var E=o[T],M=o[(T+1)%o.length],P=new m(E.x,E.y,M.x,M.y),w=u(P);if(p<x||p>x+w){x+=w;continue}var R=P.getPoint((p-x)/w);c.push(R);break}return c};r.exports=l}),5159:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(16028),m=e(88829),d=function(l){for(var h=l.points,n=0,a=0;a<h.length;a++){var c=h[a],o=h[(a+1)%h.length],v=new m(c.x,c.y,o.x,o.y);n+=u(v)}return n};r.exports=d}),8580:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(45604),d=e(89294),l=e(52394),h=new u({initialize:function(a){this.type=l.POLYGON,this.area=0,this.points=[],a&&this.setTo(a)},contains:function(n,a){return m(this,n,a)},setTo:function(n){if(this.area=0,this.points=[],typeof n=="string"&&(n=n.split(" ")),!Array.isArray(n))return this;for(var a,c=Number.MAX_VALUE,o=0;o<n.length;o++)a={x:0,y:0},typeof n[o]=="number"||typeof n[o]=="string"?(a.x=parseFloat(n[o]),a.y=parseFloat(n[o+1]),o++):Array.isArray(n[o])?(a.x=n[o][0],a.y=n[o][1]):(a.x=n[o].x,a.y=n[o].y),this.points.push(a),a.y<c&&(c=a.y);return this.calculateArea(c),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var n=0,a,c,o=0;o<this.points.length-1;o++)a=this.points[o],c=this.points[o+1],n+=(c.x-a.x)*(a.y+c.y);return a=this.points[0],c=this.points[this.points.length-1],n+=(a.x-c.x)*(c.y+a.y),this.area=-n*.5,this.area},getPoints:function(n,a,c){return d(this,n,a,c)}});r.exports=h}),32244:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return e.points.reverse(),e};r.exports=y}),95874:(r=>{function y(h,n){var a=h.x-n.x,c=h.y-n.y;return a*a+c*c}function e(h,n,a){var c=n.x,o=n.y,v=a.x-c,g=a.y-o;if(v!==0||g!==0){var p=((h.x-c)*v+(h.y-o)*g)/(v*v+g*g);p>1?(c=a.x,o=a.y):p>0&&(c+=v*p,o+=g*p)}return v=h.x-c,g=h.y-o,v*v+g*g}function u(h,n){for(var a=h[0],c=[a],o,v=1,g=h.length;v<g;v++)o=h[v],y(o,a)>n&&(c.push(o),a=o);return a!==o&&c.push(o),c}function m(h,n,a,c,o){for(var v=c,g,p=n+1;p<a;p++){var x=e(h[p],h[n],h[a]);x>v&&(g=p,v=x)}v>c&&(g-n>1&&m(h,n,g,c,o),o.push(h[g]),a-g>1&&m(h,g,a,c,o))}function d(h,n){var a=h.length-1,c=[h[0]];return m(h,0,a,n,c),c.push(h[a]),c}var l=function(h,n,a){n===void 0&&(n=1),a===void 0&&(a=!1);var c=h.points;if(c.length>2){var o=n*n;a||(c=u(c,o)),h.setTo(d(c,o))}return h};r.exports=l}),18974:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Igor Ognichenko <ognichenko.igor@gmail.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(u,m){return u[0]=m[0],u[1]=m[1],u},e=function(u){var m,d=[],l=u.points;for(m=0;m<l.length;m++)d.push([l[m].x,l[m].y]);var h=[];for(d.length>0&&h.push(y([0,0],d[0])),m=0;m<d.length-1;m++){var n=d[m],a=d[m+1],c=n[0],o=n[1],v=a[0],g=a[1];h.push([.85*c+.15*v,.85*o+.15*g]),h.push([.15*c+.85*v,.15*o+.85*g])}return d.length>1&&h.push(y([0,0],d[d.length-1])),u.setTo(h)};r.exports=e}),23490:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){for(var d=e.points,l=0;l<d.length;l++)d[l].x+=u,d[l].y+=m;return e};r.exports=y}),44359:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(8580);u.Clone=e(19631),u.Contains=e(45604),u.ContainsPoint=e(87289),u.Earcut=e(11117),u.GetAABB=e(14045),u.GetNumberArray=e(98286),u.GetPoints=e(89294),u.Perimeter=e(5159),u.Reverse=e(32244),u.Simplify=e(95874),u.Smooth=e(18974),u.Translate=e(23490),r.exports=u}),1653:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return e.width*e.height};r.exports=y}),33943:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e};r.exports=y}),58662:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e.width=Math.ceil(e.width),e.height=Math.ceil(e.height),e};r.exports=y}),79993:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){return e.x=u-e.width/2,e.y=m-e.height/2,e};r.exports=y}),81572:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(74118),m=function(d){return new u(d.x,d.y,d.width,d.height)};r.exports=m}),94287:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){return e.width<=0||e.height<=0?!1:e.x<=u&&e.x+e.width>=u&&e.y<=m&&e.y+e.height>=m};r.exports=y}),28687:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(94287),m=function(d,l){return u(d,l.x,l.y)};r.exports=m}),73222:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return u.width*u.height>e.width*e.height?!1:u.x>e.x&&u.x<e.right&&u.right>e.x&&u.right<e.right&&u.y>e.y&&u.y<e.bottom&&u.bottom>e.y&&u.bottom<e.bottom};r.exports=y}),29538:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return u.setTo(e.x,e.y,e.width,e.height)};r.exports=y}),87279:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return u===void 0&&(u=[]),u.push({x:e.x,y:e.y}),u.push({x:e.right,y:e.y}),u.push({x:e.right,y:e.bottom}),u.push({x:e.x,y:e.bottom}),u};r.exports=y}),19989:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return e.x===u.x&&e.y===u.y&&e.width===u.width&&e.height===u.height};r.exports=y}),92628:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(6700),m=function(d,l){var h=u(d);return h<u(l)?d.setSize(l.height*h,l.height):d.setSize(l.width,l.width/h),d.setPosition(l.centerX-d.width/2,l.centerY-d.height/2)};r.exports=m}),85028:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(6700),m=function(d,l){var h=u(d);return h>u(l)?d.setSize(l.height*h,l.height):d.setSize(l.width,l.width/h),d.setPosition(l.centerX-d.width/2,l.centerY-d.height/2)};r.exports=m}),71356:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e};r.exports=y}),21687:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e.width=Math.floor(e.width),e.height=Math.floor(e.height),e};r.exports=y}),80222:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(74118),m=e(83392),d=function(l,h){if(h===void 0&&(h=new u),l.length===0)return h;for(var n=Number.MAX_VALUE,a=Number.MAX_VALUE,c=m.MIN_SAFE_INTEGER,o=m.MIN_SAFE_INTEGER,v,g,p,x=0;x<l.length;x++)v=l[x],Array.isArray(v)?(g=v[0],p=v[1]):(g=v.x,p=v.y),n=Math.min(n,g),a=Math.min(a,p),c=Math.max(c,g),o=Math.max(o,p);return h.x=n,h.y=a,h.width=c-n,h.height=o-a,h};r.exports=d}),75785:((r,y,e)=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(74118),m=function(d,l,h,n,a){return a===void 0&&(a=new u),a.setTo(Math.min(d,h),Math.min(l,n),Math.abs(d-h),Math.abs(l-n))};r.exports=m}),6700:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return e.height===0?NaN:e.width/e.height};r.exports=y}),35242:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),m=function(d,l){return l===void 0&&(l=new u),l.x=d.centerX,l.y=d.centerY,l};r.exports=m}),47698:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(85876),m=e(79967),d=function(l,h,n){if(n===void 0&&(n=new m),h<=0||h>=1)return n.x=l.x,n.y=l.y,n;var a=u(l)*h;return h>.5?(a-=l.width+l.height,a<=l.width?(n.x=l.right-a,n.y=l.bottom):(n.x=l.x,n.y=l.bottom-(a-l.width))):a<=l.width?(n.x=l.x+a,n.y=l.y):(n.x=l.right,n.y=l.y+(a-l.width)),n};r.exports=d}),54932:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(47698),m=e(85876),d=function(l,h,n,a){a===void 0&&(a=[]),!h&&n>0&&(h=m(l)/n);for(var c=0;c<h;c++){var o=c/h;a.push(u(l,o))}return a};r.exports=d}),31591:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),m=function(d,l){return l===void 0&&(l=new u),l.x=d.width,l.y=d.height,l};r.exports=m}),7782:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79993),m=function(d,l,h){var n=d.centerX,a=d.centerY;return d.setSize(d.width+l*2,d.height+h*2),u(d,n,a)};r.exports=m}),66217:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(74118),m=e(90205),d=function(l,h,n){return n===void 0&&(n=new u),m(l,h)?(n.x=Math.max(l.x,h.x),n.y=Math.max(l.y,h.y),n.width=Math.min(l.right,h.right)-n.x,n.height=Math.min(l.bottom,h.bottom)-n.y):n.setEmpty(),n};r.exports=d}),40053:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(85876),m=e(79967),d=function(l,h,n,a){if(a===void 0&&(a=[]),!h&&!n)return a;h?n=Math.round(u(l)/h):h=u(l)/n;for(var c=l.x,o=l.y,v=0,g=0;g<n;g++)switch(a.push(new m(c,o)),v){case 0:c+=h,c>=l.right&&(v=1,o+=c-l.right,c=l.right);break;case 1:o+=h,o>=l.bottom&&(v=2,c-=o-l.bottom,o=l.bottom);break;case 2:c-=h,c<=l.left&&(v=3,o-=l.left-c,c=l.left);break;case 3:o-=h,o<=l.top&&(v=0,o=l.top);break}return a};r.exports=d}),86673:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){for(var m=e.x,d=e.right,l=e.y,h=e.bottom,n=0;n<u.length;n++)m=Math.min(m,u[n].x),d=Math.max(d,u[n].x),l=Math.min(l,u[n].y),h=Math.max(h,u[n].y);return e.x=m,e.y=l,e.width=d-m,e.height=h-l,e};r.exports=y}),14655:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){var m=Math.min(e.x,u.x),d=Math.max(e.right,u.right);e.x=m,e.width=d-m;var l=Math.min(e.y,u.y),h=Math.max(e.bottom,u.bottom);return e.y=l,e.height=h-l,e};r.exports=y}),44755:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){var d=Math.min(e.x,u),l=Math.max(e.right,u);e.x=d,e.width=l-d;var h=Math.min(e.y,m),n=Math.max(e.bottom,m);return e.y=h,e.height=n-h,e};r.exports=y}),74466:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){return e.x+=u,e.y+=m,e};r.exports=y}),55946:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return e.x+=u.x,e.y+=u.y,e};r.exports=y}),97474:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return e.x<u.right&&e.right>u.x&&e.y<u.bottom&&e.bottom>u.y};r.exports=y}),85876:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return 2*(e.width+e.height)};r.exports=y}),20243:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),m=e(75606),d=function(l,h,n){n===void 0&&(n=new u),h=m(h);var a=Math.sin(h),c=Math.cos(h),o=c>0?l.width/2:l.width/-2,v=a>0?l.height/2:l.height/-2;return Math.abs(o*a)<Math.abs(v*c)?v=o*a/c:o=v*c/a,n.x=o+l.centerX,n.y=v+l.centerY,n};r.exports=d}),30001:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),m=function(d,l){return l===void 0&&(l=new u),l.x=d.x+Math.random()*d.width,l.y=d.y+Math.random()*d.height,l};r.exports=m}),97691:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(17489),m=e(73222),d=e(79967),l=function(h,n,a){if(a===void 0&&(a=new d),m(h,n))switch(u(0,3)){case 0:a.x=h.x+Math.random()*(n.right-h.x),a.y=h.y+Math.random()*(n.top-h.y);break;case 1:a.x=n.x+Math.random()*(h.right-n.x),a.y=n.bottom+Math.random()*(h.bottom-n.bottom);break;case 2:a.x=h.x+Math.random()*(n.x-h.x),a.y=n.y+Math.random()*(h.bottom-n.y);break;case 3:a.x=n.right+Math.random()*(h.right-n.right),a.y=h.y+Math.random()*(n.bottom-h.y);break}return a};r.exports=l}),74118:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(94287),d=e(47698),l=e(54932),h=e(52394),n=e(88829),a=e(30001),c=new u({initialize:function(v,g,p,x){v===void 0&&(v=0),g===void 0&&(g=0),p===void 0&&(p=0),x===void 0&&(x=0),this.type=h.RECTANGLE,this.x=v,this.y=g,this.width=p,this.height=x},contains:function(o,v){return m(this,o,v)},getPoint:function(o,v){return d(this,o,v)},getPoints:function(o,v,g){return l(this,o,v,g)},getRandomPoint:function(o){return a(this,o)},setTo:function(o,v,g,p){return this.x=o,this.y=v,this.width=g,this.height=p,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(o,v){return v===void 0&&(v=o),this.x=o,this.y=v,this},setSize:function(o,v){return v===void 0&&(v=o),this.width=o,this.height=v,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(o){return o===void 0&&(o=new n),o.setTo(this.x,this.y,this.right,this.y),o},getLineB:function(o){return o===void 0&&(o=new n),o.setTo(this.right,this.y,this.right,this.bottom),o},getLineC:function(o){return o===void 0&&(o=new n),o.setTo(this.right,this.bottom,this.x,this.bottom),o},getLineD:function(o){return o===void 0&&(o=new n),o.setTo(this.x,this.bottom,this.x,this.y),o},left:{get:function(){return this.x},set:function(o){o>=this.right?this.width=0:this.width=this.right-o,this.x=o}},right:{get:function(){return this.x+this.width},set:function(o){o<=this.x?this.width=0:this.width=o-this.x}},top:{get:function(){return this.y},set:function(o){o>=this.bottom?this.height=0:this.height=this.bottom-o,this.y=o}},bottom:{get:function(){return this.y+this.height},set:function(o){o<=this.y?this.height=0:this.height=o-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(o){this.x=o-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(o){this.y=o-this.height/2}}});r.exports=c}),51828:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return e.width===u.width&&e.height===u.height};r.exports=y}),5691:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){return m===void 0&&(m=u),e.width*=u,e.height*=m,e};r.exports=y}),58795:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(74118),m=function(d,l,h){h===void 0&&(h=new u);var n=Math.min(d.x,l.x),a=Math.min(d.y,l.y),c=Math.max(d.right,l.right)-n,o=Math.max(d.bottom,l.bottom)-a;return h.setTo(n,a,c,o)};r.exports=m}),66658:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(74118);u.Area=e(1653),u.Ceil=e(33943),u.CeilAll=e(58662),u.CenterOn=e(79993),u.Clone=e(81572),u.Contains=e(94287),u.ContainsPoint=e(28687),u.ContainsRect=e(73222),u.CopyFrom=e(29538),u.Decompose=e(87279),u.Equals=e(19989),u.FitInside=e(92628),u.FitOutside=e(85028),u.Floor=e(71356),u.FloorAll=e(21687),u.FromPoints=e(80222),u.FromXY=e(75785),u.GetAspectRatio=e(6700),u.GetCenter=e(35242),u.GetPoint=e(47698),u.GetPoints=e(54932),u.GetSize=e(31591),u.Inflate=e(7782),u.Intersection=e(66217),u.MarchingAnts=e(40053),u.MergePoints=e(86673),u.MergeRect=e(14655),u.MergeXY=e(44755),u.Offset=e(74466),u.OffsetPoint=e(55946),u.Overlaps=e(97474),u.Perimeter=e(85876),u.PerimeterPoint=e(20243),u.Random=e(30001),u.RandomOutside=e(97691),u.SameDimensions=e(51828),u.Scale=e(5691),u.Union=e(58795),r.exports=u}),19108:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){var u=e.x1,m=e.y1,d=e.x2,l=e.y2,h=e.x3,n=e.y3;return Math.abs(((h-u)*(l-m)-(d-u)*(n-m))/2)};r.exports=y}),41199:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(66349),m=function(d,l,h){var n=h*(Math.sqrt(3)/2),a=d,c=l,o=d+h/2,v=l+n,g=d-h/2,p=l+n;return new u(a,c,o,v,g,p)};r.exports=m}),88730:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(11117),m=e(66349),d=function(l,h,n,a,c){h===void 0&&(h=null),n===void 0&&(n=1),a===void 0&&(a=1),c===void 0&&(c=[]);for(var o=u(l,h),v,g,p,x,T,E,M,P,w,R=0;R<o.length;R+=3)v=o[R],g=o[R+1],p=o[R+2],x=l[v*2]*n,T=l[v*2+1]*a,E=l[g*2]*n,M=l[g*2+1]*a,P=l[p*2]*n,w=l[p*2+1]*a,c.push(new m(x,T,E,M,P,w));return c};r.exports=d}),3635:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(66349),m=function(d,l,h,n){n===void 0&&(n=h);var a=d,c=l,o=d,v=l-n,g=d+h,p=l;return new u(a,c,o,v,g,p)};r.exports=m}),1882:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56595),m=e(9640),d=function(l,h,n,a){a===void 0&&(a=u);var c=a(l),o=h-c.x,v=n-c.y;return m(l,o,v)};r.exports=d}),56595:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),m=function(d,l){return l===void 0&&(l=new u),l.x=(d.x1+d.x2+d.x3)/3,l.y=(d.y1+d.y2+d.y3)/3,l};r.exports=m}),91835:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(93736);function m(l,h,n,a){return l*a-h*n}var d=function(l,h){h===void 0&&(h=new u);var n=l.x3,a=l.y3,c=l.x1-n,o=l.y1-a,v=l.x2-n,g=l.y2-a,p=2*m(c,o,v,g),x=m(o,c*c+o*o,g,v*v+g*g),T=m(c,c*c+o*o,v,v*v+g*g);return h.x=n-x/p,h.y=a+T/p,h};r.exports=d}),97073:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(26673),m=function(d,l){l===void 0&&(l=new u);var h=d.x1,n=d.y1,a=d.x2,c=d.y2,o=d.x3,v=d.y3,g=a-h,p=c-n,x=o-h,T=v-n,E=g*(h+a)+p*(n+c),M=x*(h+o)+T*(n+v),P=2*(g*(v-c)-p*(o-a)),w,R;if(Math.abs(P)<1e-6){var A=Math.min(h,a,o),O=Math.min(n,c,v);w=(Math.max(h,a,o)-A)*.5,R=(Math.max(n,c,v)-O)*.5,l.x=A+w,l.y=O+R,l.radius=Math.sqrt(w*w+R*R)}else l.x=(T*E-p*M)/P,l.y=(g*M-x*E)/P,w=l.x-h,R=l.y-n,l.radius=Math.sqrt(w*w+R*R);return l};r.exports=m}),75974:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(66349),m=function(d){return new u(d.x1,d.y1,d.x2,d.y2,d.x3,d.y3)};r.exports=m}),60689:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){var d=e.x3-e.x1,l=e.y3-e.y1,h=e.x2-e.x1,n=e.y2-e.y1,a=u-e.x1,c=m-e.y1,o=d*d+l*l,v=d*h+l*n,g=d*a+l*c,p=h*h+n*n,x=h*a+n*c,T=o*p-v*v,E=T===0?0:1/T,M=(p*g-v*x)*E,P=(o*x-v*g)*E;return M>=0&&P>=0&&M+P<1};r.exports=y}),86875:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d){m===void 0&&(m=!1),d===void 0&&(d=[]);for(var l=e.x3-e.x1,h=e.y3-e.y1,n=e.x2-e.x1,a=e.y2-e.y1,c=l*l+h*h,o=l*n+h*a,v=n*n+a*a,g=c*v-o*o,p=g===0?0:1/g,x,T,E,M,P,w,R=e.x1,A=e.y1,O=0;O<u.length&&(E=u[O].x-R,M=u[O].y-A,P=l*E+h*M,w=n*E+a*M,x=(v*P-o*w)*p,T=(c*w-o*P)*p,!(x>=0&&T>=0&&x+T<1&&(d.push({x:u[O].x,y:u[O].y}),m)));O++);return d};r.exports=y}),51532:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(60689),m=function(d,l){return u(d,l.x,l.y)};r.exports=m}),42538:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return u.setTo(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)};r.exports=y}),18680:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return u===void 0&&(u=[]),u.push({x:e.x1,y:e.y1}),u.push({x:e.x2,y:e.y2}),u.push({x:e.x3,y:e.y3}),u};r.exports=y}),29977:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return e.x1===u.x1&&e.y1===u.y1&&e.x2===u.x2&&e.y2===u.y2&&e.x3===u.x3&&e.y3===u.y3};r.exports=y}),56088:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),m=e(16028),d=function(l,h,n){n===void 0&&(n=new u);var a=l.getLineA(),c=l.getLineB(),o=l.getLineC();if(h<=0||h>=1)return n.x=a.x1,n.y=a.y1,n;var v=m(a),g=m(c),p=m(o),x=v+g+p,T=x*h,E=0;return T<v?(E=T/v,n.x=a.x1+(a.x2-a.x1)*E,n.y=a.y1+(a.y2-a.y1)*E):T>v+g?(T-=v+g,E=T/p,n.x=o.x1+(o.x2-o.x1)*E,n.y=o.y1+(o.y2-o.y1)*E):(T-=v,E=T/g,n.x=c.x1+(c.x2-c.x1)*E,n.y=c.y1+(c.y2-c.y1)*E),n};r.exports=d}),24402:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(16028),m=e(79967),d=function(l,h,n,a){a===void 0&&(a=[]);var c=l.getLineA(),o=l.getLineB(),v=l.getLineC(),g=u(c),p=u(o),x=u(v),T=g+p+x;!h&&n>0&&(h=T/n);for(var E=0;E<h;E++){var M=T*(E/h),P=0,w=new m;M<g?(P=M/g,w.x=c.x1+(c.x2-c.x1)*P,w.y=c.y1+(c.y2-c.y1)*P):M>g+p?(M-=g+p,P=M/x,w.x=v.x1+(v.x2-v.x1)*P,w.y=v.y1+(v.y2-v.y1)*P):(M-=g,P=M/p,w.x=o.x1+(o.x2-o.x1)*P,w.y=o.y1+(o.y2-o.y1)*P),a.push(w)}return a};r.exports=d}),83648:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967);function m(l,h,n,a){var c=l-n,o=h-a,v=c*c+o*o;return Math.sqrt(v)}var d=function(l,h){h===void 0&&(h=new u);var n=l.x1,a=l.y1,c=l.x2,o=l.y2,v=l.x3,g=l.y3,p=m(v,g,c,o),x=m(n,a,v,g),T=m(c,o,n,a),E=p+x+T;return h.x=(n*p+c*x+v*T)/E,h.y=(a*p+o*x+g*T)/E,h};r.exports=d}),9640:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){return e.x1+=u,e.y1+=m,e.x2+=u,e.y2+=m,e.x3+=u,e.y3+=m,e};r.exports=y}),95290:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(16028),m=function(d){var l=d.getLineA(),h=d.getLineB(),n=d.getLineC();return u(l)+u(h)+u(n)};r.exports=m}),99761:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(79967),m=function(d,l){l===void 0&&(l=new u);var h=d.x2-d.x1,n=d.y2-d.y1,a=d.x3-d.x1,c=d.y3-d.y1,o=Math.random(),v=Math.random();return o+v>=1&&(o=1-o,v=1-v),l.x=d.x1+(h*o+a*v),l.y=d.y1+(n*o+c*v),l};r.exports=m}),21934:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(19211),m=e(83648),d=function(l,h){var n=m(l);return u(l,n.x,n.y,h)};r.exports=d}),68454:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(19211),m=function(d,l,h){return u(d,l.x,l.y,h)};r.exports=m}),19211:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d){var l=Math.cos(d),h=Math.sin(d),n=e.x1-u,a=e.y1-m;return e.x1=n*l-a*h+u,e.y1=n*h+a*l+m,n=e.x2-u,a=e.y2-m,e.x2=n*l-a*h+u,e.y2=n*h+a*l+m,n=e.x3-u,a=e.y3-m,e.x3=n*l-a*h+u,e.y3=n*h+a*l+m,e};r.exports=y}),66349:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(60689),d=e(56088),l=e(24402),h=e(52394),n=e(88829),a=e(99761),c=new u({initialize:function(v,g,p,x,T,E){v===void 0&&(v=0),g===void 0&&(g=0),p===void 0&&(p=0),x===void 0&&(x=0),T===void 0&&(T=0),E===void 0&&(E=0),this.type=h.TRIANGLE,this.x1=v,this.y1=g,this.x2=p,this.y2=x,this.x3=T,this.y3=E},contains:function(o,v){return m(this,o,v)},getPoint:function(o,v){return d(this,o,v)},getPoints:function(o,v,g){return l(this,o,v,g)},getRandomPoint:function(o){return a(this,o)},setTo:function(o,v,g,p,x,T){return o===void 0&&(o=0),v===void 0&&(v=0),g===void 0&&(g=0),p===void 0&&(p=0),x===void 0&&(x=0),T===void 0&&(T=0),this.x1=o,this.y1=v,this.x2=g,this.y2=p,this.x3=x,this.y3=T,this},getLineA:function(o){return o===void 0&&(o=new n),o.setTo(this.x1,this.y1,this.x2,this.y2),o},getLineB:function(o){return o===void 0&&(o=new n),o.setTo(this.x2,this.y2,this.x3,this.y3),o},getLineC:function(o){return o===void 0&&(o=new n),o.setTo(this.x3,this.y3,this.x1,this.y1),o},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(o){var v=0;this.x1<=this.x2&&this.x1<=this.x3?v=this.x1-o:this.x2<=this.x1&&this.x2<=this.x3?v=this.x2-o:v=this.x3-o,this.x1-=v,this.x2-=v,this.x3-=v}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(o){var v=0;this.x1>=this.x2&&this.x1>=this.x3?v=this.x1-o:this.x2>=this.x1&&this.x2>=this.x3?v=this.x2-o:v=this.x3-o,this.x1-=v,this.x2-=v,this.x3-=v}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(o){var v=0;this.y1<=this.y2&&this.y1<=this.y3?v=this.y1-o:this.y2<=this.y1&&this.y2<=this.y3?v=this.y2-o:v=this.y3-o,this.y1-=v,this.y2-=v,this.y3-=v}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(o){var v=0;this.y1>=this.y2&&this.y1>=this.y3?v=this.y1-o:this.y2>=this.y1&&this.y2>=this.y3?v=this.y2-o:v=this.y3-o,this.y1-=v,this.y2-=v,this.y3-=v}}});r.exports=c}),87619:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(66349);u.Area=e(19108),u.BuildEquilateral=e(41199),u.BuildFromPolygon=e(88730),u.BuildRight=e(3635),u.CenterOn=e(1882),u.Centroid=e(56595),u.CircumCenter=e(91835),u.CircumCircle=e(97073),u.Clone=e(75974),u.Contains=e(60689),u.ContainsArray=e(86875),u.ContainsPoint=e(51532),u.CopyFrom=e(42538),u.Decompose=e(18680),u.Equals=e(29977),u.GetPoint=e(56088),u.GetPoints=e(24402),u.InCenter=e(83648),u.Perimeter=e(95290),u.Offset=e(9640),u.Random=e(99761),u.Rotate=e(21934),u.RotateAroundPoint=e(68454),u.RotateAroundXY=e(19211),r.exports=u}),27395:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){return{gameObject:e,enabled:!0,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:u,hitAreaCallback:m,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}};r.exports=y}),18104:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return function(m,d,l,h){var n=e.getPixelAlpha(d,l,h.texture.key,h.frame.name);return n&&n>=u}};r.exports=y}),69898:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(72687),d=e(6659),l=e(33963),h=e(97081),n=e(71064),a=e(7905),c=e(40398),o=e(37579),v=e(69360),g=e(64462),p=new u({initialize:function(T,E){this.game=T,this.scaleManager,this.canvas,this.config=E,this.enabled=!0,this.events=new d,this.isOver=!0,this.defaultCursor="",this.keyboard=E.inputKeyboard?new n(this):null,this.mouse=E.inputMouse?new a(this):null,this.touch=E.inputTouch?new o(this):null,this.pointers=[],this.pointersTotal=E.inputActivePointers,E.inputTouch&&this.pointersTotal===1&&(this.pointersTotal=2);for(var M=0;M<=this.pointersTotal;M++){var P=new c(this,M);P.smoothFactor=E.inputSmoothFactor,this.pointers.push(P)}this.mousePointer=E.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new v,this._tempMatrix2=new v,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],T.events.once(h.BOOT,this.boot,this)},boot:function(){var x=this.game,T=x.events;this.canvas=x.canvas,this.scaleManager=x.scale,this.events.emit(l.MANAGER_BOOT),T.on(h.PRE_RENDER,this.preRender,this),T.once(h.DESTROY,this.destroy,this)},setCanvasOver:function(x){this.isOver=!0,this.events.emit(l.GAME_OVER,x)},setCanvasOut:function(x){this.isOver=!1,this.events.emit(l.GAME_OUT,x)},preRender:function(){var x=this.game.loop.now,T=this.game.loop.delta,E=this.game.scene.getScenes(!0,!0);this.time=x,this.events.emit(l.MANAGER_UPDATE);for(var M=0;M<E.length;M++){var P=E[M];if(P.sys.input&&P.sys.input.updatePoll(x,T)&&this.globalTopOnly)return}},setDefaultCursor:function(x){this.defaultCursor=x,this.canvas.style.cursor!==x&&(this.canvas.style.cursor=x)},setCursor:function(x){x.cursor&&(this.canvas.style.cursor=x.cursor)},resetCursor:function(x){x.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(x){x===void 0&&(x=1);var T=[];this.pointersTotal+x>10&&(x=10-this.pointersTotal);for(var E=0;E<x;E++){var M=this.pointers.length,P=new c(this,M);P.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(P),this.pointersTotal++,T.push(P)}return T},updateInputPlugins:function(x,T){var E=this.game.scene.getScenes(!1,!0);this._tempSkip=!1;for(var M=0;M<E.length;M++){var P=E[M];if(P.sys.input){var w=P.sys.input.update(x,T);if(w&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(x){for(var T=this.pointers,E=[],M=0;M<x.changedTouches.length;M++)for(var P=x.changedTouches[M],w=1;w<this.pointersTotal;w++){var R=T[w];if(!R.active){R.touchstart(P,x),this.activePointer=R,E.push(R);break}}this.updateInputPlugins(m.TOUCH_START,E)},onTouchMove:function(x){for(var T=this.pointers,E=[],M=0;M<x.changedTouches.length;M++)for(var P=x.changedTouches[M],w=1;w<this.pointersTotal;w++){var R=T[w];if(R.active&&R.identifier===P.identifier){var A=document.elementFromPoint(P.pageX,P.pageY),O=A===this.canvas;!this.isOver&&O?this.setCanvasOver(x):this.isOver&&!O&&this.setCanvasOut(x),this.isOver&&(R.touchmove(P,x),this.activePointer=R,E.push(R));break}}this.updateInputPlugins(m.TOUCH_MOVE,E)},onTouchEnd:function(x){for(var T=this.pointers,E=[],M=0;M<x.changedTouches.length;M++)for(var P=x.changedTouches[M],w=1;w<this.pointersTotal;w++){var R=T[w];if(R.active&&R.identifier===P.identifier){R.touchend(P,x),E.push(R);break}}this.updateInputPlugins(m.TOUCH_END,E)},onTouchCancel:function(x){for(var T=this.pointers,E=[],M=0;M<x.changedTouches.length;M++)for(var P=x.changedTouches[M],w=1;w<this.pointersTotal;w++){var R=T[w];if(R.active&&R.identifier===P.identifier){R.touchcancel(P,x),E.push(R);break}}this.updateInputPlugins(m.TOUCH_CANCEL,E)},onMouseDown:function(x){var T=this.mousePointer;T.down(x),T.updateMotion(),this.activePointer=T,this.updateInputPlugins(m.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(x){var T=this.mousePointer;T.move(x),T.updateMotion(),this.activePointer=T,this.updateInputPlugins(m.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(x){var T=this.mousePointer;T.up(x),T.updateMotion(),this.activePointer=T,this.updateInputPlugins(m.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(x){var T=this.mousePointer;T.wheel(x),this.activePointer=T,this.updateInputPlugins(m.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(x){var T=this.mouse.locked;this.mousePointer.locked=T,this.events.emit(l.POINTERLOCK_CHANGE,x,T)},inputCandidate:function(x,T){var E=x.input;if(!E||!E.enabled||!x.willRender(T))return!1;var M=!0,P=x.parentContainer;if(P)do{if(!P.willRender(T)){M=!1;break}P=P.parentContainer}while(P);return M},hitTest:function(x,T,E,M){M===void 0&&(M=this._tempHitTest);var P=this._tempPoint,w=E.scrollX,R=E.scrollY;M.length=0;var A=x.x,O=x.y;E.getWorldPoint(A,O,P),x.worldX=P.x,x.worldY=P.y;for(var F={x:0,y:0},b=this._tempMatrix,D=this._tempMatrix2,I=0;I<T.length;I++){var B=T[I];if(this.inputCandidate(B,E)){var z=P.x+w*B.scrollFactorX-w,Y=P.y+R*B.scrollFactorY-R;B.parentContainer?(B.getWorldTransformMatrix(b,D),b.applyInverse(z,Y,F)):g(z,Y,B.x,B.y,B.rotation,B.scaleX,B.scaleY,F),this.pointWithinHitArea(B,F.x,F.y)&&M.push(B)}}return M},pointWithinHitArea:function(x,T,E){T+=x.displayOriginX,E+=x.displayOriginY;var M=x.input;return M&&M.hitAreaCallback(M.hitArea,T,E,x)?(M.localX=T,M.localY=E,!0):!1},pointWithinInteractiveObject:function(x,T,E){return x.hitArea?(T+=x.gameObject.displayOriginX,E+=x.gameObject.displayOriginY,x.localX=T,x.localY=E,x.hitAreaCallback(x.hitArea,T,E,x)):!1},transformPointer:function(x,T,E,M){var P=x.position,w=x.prevPosition;w.x=P.x,w.y=P.y;var R=this.scaleManager.transformX(T),A=this.scaleManager.transformY(E),O=x.smoothFactor;!M||O===0?(P.x=R,P.y=A):(P.x=R*O+w.x*(1-O),P.y=A*O+w.y*(1-O))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(h.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var x=0;x<this.pointers.length;x++)this.pointers[x].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});r.exports=p}),12499:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(26673),m=e(65650),d=e(56694),l=e(72687),h=e(27395),n=e(18104),a=e(53996),c=e(95669),o=e(72313),v=e(33963),g=e(6659),p=e(72632),x=e(52394),T=e(63399),E=e(42911),M=e(91963),P=e(74118),w=e(94287),R=e(7599),A=e(66349),O=e(60689),F=new d({Extends:g,initialize:function(D){g.call(this),this.scene=D,this.systems=D.sys,this.settings=D.sys.settings,this.manager=D.sys.game.input,this.pluginEvents=new g,this.enabled=!0,this.displayList,this.cameras,T.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var I={cancelled:!1};this._eventContainer={stopPropagation:function(){I.cancelled=!0}},this._eventData=I,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,D.sys.events.once(R.BOOT,this.boot,this),D.sys.events.on(R.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(R.DESTROY,this.destroy,this),this.pluginEvents.emit(v.BOOT)},start:function(){var b=this.systems.events;b.on(R.TRANSITION_START,this.transitionIn,this),b.on(R.TRANSITION_OUT,this.transitionOut,this),b.on(R.TRANSITION_COMPLETE,this.transitionComplete,this),b.on(R.PRE_UPDATE,this.preUpdate,this),b.once(R.SHUTDOWN,this.shutdown,this),this.manager.events.on(v.GAME_OUT,this.onGameOut,this),this.manager.events.on(v.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(v.START)},onGameOver:function(b){this.isActive()&&this.emit(v.GAME_OVER,b.timeStamp,b)},onGameOut:function(b){this.isActive()&&this.emit(v.GAME_OUT,b.timeStamp,b)},preUpdate:function(){this.pluginEvents.emit(v.PRE_UPDATE);var b=this._pendingRemoval,D=this._pendingInsertion,I=b.length,B=D.length;if(!(I===0&&B===0)){for(var z=this._list,Y=0;Y<I;Y++){var X=b[Y],H=z.indexOf(X);H>-1&&(z.splice(H,1),this.clear(X,!0))}this._pendingRemoval.length=0,this._list=z.concat(D.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.canInput()},updatePoll:function(b,D){if(!this.isActive())return!1;if(this.pluginEvents.emit(v.UPDATE,b,D),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var I,B=this.manager,z=B.pointers,Y=B.pointersTotal;for(I=0;I<Y;I++)z[I].updateMotion();if(this._list.length===0)return!1;var X=this.pollRate;if(X===-1)return!1;if(X>0)if(this._pollTimer-=D,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var H=!1;for(I=0;I<Y;I++){var N=0,U=z[I];this._tempZones=[],this._temp=this.hitTestPointer(U),this.sortGameObjects(this._temp,U),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),N+=this.processOverOutEvents(U),this.getDragState(U)===2&&this.processDragThresholdEvent(U,b),N>0&&(H=!0)}return H},update:function(b,D){if(!this.isActive())return!1;for(var I=D.length,B=!1,z=0;z<I;z++){var Y=0,X=D[z];switch(this._tempZones=[],this._temp=this.hitTestPointer(X),this.sortGameObjects(this._temp,X),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),b){case l.MOUSE_DOWN:Y+=this.processDragDownEvent(X),Y+=this.processDownEvents(X),Y+=this.processOverOutEvents(X);break;case l.MOUSE_UP:Y+=this.processDragUpEvent(X),Y+=this.processUpEvents(X),Y+=this.processOverOutEvents(X);break;case l.TOUCH_START:Y+=this.processDragDownEvent(X),Y+=this.processDownEvents(X),Y+=this.processOverEvents(X);break;case l.TOUCH_END:case l.TOUCH_CANCEL:Y+=this.processDragUpEvent(X),Y+=this.processUpEvents(X),Y+=this.processOutEvents(X);break;case l.MOUSE_MOVE:case l.TOUCH_MOVE:Y+=this.processDragMoveEvent(X),Y+=this.processMoveEvents(X),Y+=this.processOverOutEvents(X);break;case l.MOUSE_WHEEL:Y+=this.processWheelEvent(X);break}Y>0&&(B=!0)}return this._updatedThisFrame=!0,B},clear:function(b,D){D===void 0&&(D=!1),this.disable(b);var I=b.input;I&&(this.removeDebug(b),I.gameObject=void 0,I.target=void 0,I.hitArea=void 0,I.hitAreaCallback=void 0,I.callbackContext=void 0,b.input=null),D||this.queueForRemoval(b);var B=this._draggable.indexOf(b);return B>-1&&this._draggable.splice(B,1),b},disable:function(b){var D=b.input;D&&(D.enabled=!1,D.dragState=0);var I=this._temp,B=this._drag,z=this._over,Y=this.manager,X=I.indexOf(b);X>-1&&I.splice(X,1);for(var H=0;H<Y.pointersTotal;H++)X=B[H].indexOf(b),X>-1&&B[H].splice(X,1),X=z[H].indexOf(b),X>-1&&(z[H].splice(X,1),Y.resetCursor(D));return this},enable:function(b,D,I,B){return B===void 0&&(B=!1),b.input?b.input.enabled=!0:this.setHitArea(b,D,I),b.input&&B&&!b.input.dropZone&&(b.input.dropZone=B),this},hitTestPointer:function(b){for(var D=this.cameras.getCamerasBelowPointer(b),I=0;I<D.length;I++){for(var B=D[I],z=this.manager.hitTest(b,this._list,B),Y=0;Y<z.length;Y++){var X=z[Y];X.input.dropZone&&this._tempZones.push(X)}if(z.length>0)return b.camera=B,z}return b.camera=D[0],[]},processDownEvents:function(b){var D=0,I=this._temp,B=this._eventData,z=this._eventContainer;B.cancelled=!1;for(var Y=!1,X=0;X<I.length;X++){var H=I[X];if(!(!H.input||!H.input.enabled)){if(D++,H.emit(v.GAMEOBJECT_POINTER_DOWN,b,H.input.localX,H.input.localY,z),B.cancelled||!H.input||!H.input.enabled){Y=!0;break}if(this.emit(v.GAMEOBJECT_DOWN,b,H,z),B.cancelled||!H.input){Y=!0;break}}}return!Y&&this.manager&&(b.downElement===this.manager.game.canvas?this.emit(v.POINTER_DOWN,b,I):this.emit(v.POINTER_DOWN_OUTSIDE,b)),D},getDragState:function(b){return this._dragState[b.id]},setDragState:function(b,D){this._dragState[b.id]=D},processDragThresholdEvent:function(b,D){var I=!1,B=this.dragTimeThreshold,z=this.dragDistanceThreshold;if((z>0&&a(b.x,b.y,b.downX,b.downY)>=z||B>0&&D>=b.downTime+B)&&(I=!0),I)return this.setDragState(b,3),this.processDragStartList(b)},processDragStartList:function(b){if(this.getDragState(b)!==3)return 0;for(var D=this._drag[b.id],I=0;I<D.length;I++){var B=D[I],z=B.input;z.dragState=2,z.dragStartX=B.x,z.dragStartY=B.y,z.dragStartXGlobal=b.worldX,z.dragStartYGlobal=b.worldY,z.dragX=z.dragStartXGlobal-z.dragStartX,z.dragY=z.dragStartYGlobal-z.dragStartY,B.emit(v.GAMEOBJECT_DRAG_START,b,z.dragX,z.dragY),this.emit(v.DRAG_START,b,B)}return this.setDragState(b,4),D.length},processDragDownEvent:function(b){var D=this._temp;if(this._draggable.length===0||D.length===0||!b.primaryDown||this.getDragState(b)!==0)return 0;this.setDragState(b,1);for(var I=[],B=0;B<D.length;B++){var z=D[B];z.input.draggable&&z.input.dragState===0&&I.push(z)}return I.length===0?(this.setDragState(b,0),0):(I.length>1&&(this.sortGameObjects(I,b),this.topOnly&&I.splice(1)),this._drag[b.id]=I,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(b,3),this.processDragStartList(b)):(this.setDragState(b,2),0))},processDragMoveEvent:function(b){if(this.getDragState(b)===2&&this.processDragThresholdEvent(b,this.manager.game.loop.now),this.getDragState(b)!==4)return 0;for(var D=this._tempZones,I=this._drag[b.id],B=0;B<I.length;B++){var z=I[B],Y=z.input,X=Y.target;if(X){var H=D.indexOf(X);H===0?(z.emit(v.GAMEOBJECT_DRAG_OVER,b,X),this.emit(v.DRAG_OVER,b,z,X)):H>0?(z.emit(v.GAMEOBJECT_DRAG_LEAVE,b,X),this.emit(v.DRAG_LEAVE,b,z,X),Y.target=D[0],X=Y.target,z.emit(v.GAMEOBJECT_DRAG_ENTER,b,X),this.emit(v.DRAG_ENTER,b,z,X)):(z.emit(v.GAMEOBJECT_DRAG_LEAVE,b,X),this.emit(v.DRAG_LEAVE,b,z,X),D[0]?(Y.target=D[0],X=Y.target,z.emit(v.GAMEOBJECT_DRAG_ENTER,b,X),this.emit(v.DRAG_ENTER,b,z,X)):Y.target=null)}else!X&&D[0]&&(Y.target=D[0],X=Y.target,z.emit(v.GAMEOBJECT_DRAG_ENTER,b,X),this.emit(v.DRAG_ENTER,b,z,X));var N,U;if(!z.parentContainer)N=b.worldX-Y.dragX,U=b.worldY-Y.dragY;else{var L=b.worldX-Y.dragStartXGlobal,G=b.worldY-Y.dragStartYGlobal,V=z.getParentRotation(),k=L*Math.cos(V)+G*Math.sin(V),W=G*Math.cos(V)-L*Math.sin(V);k*=1/z.parentContainer.scaleX,W*=1/z.parentContainer.scaleY,N=k+Y.dragStartX,U=W+Y.dragStartY}z.emit(v.GAMEOBJECT_DRAG,b,N,U),this.emit(v.DRAG,b,z,N,U)}return I.length},processDragUpEvent:function(b){for(var D=this._drag[b.id],I=0;I<D.length;I++){var B=D[I],z=B.input;if(z&&z.dragState===2){z.dragState=0,z.dragX=z.localX-B.displayOriginX,z.dragY=z.localY-B.displayOriginY;var Y=!1,X=z.target;X&&(B.emit(v.GAMEOBJECT_DROP,b,X),this.emit(v.DROP,b,B,X),z.target=null,Y=!0),B.input&&B.input.enabled&&(B.emit(v.GAMEOBJECT_DRAG_END,b,z.dragX,z.dragY,Y),this.emit(v.DRAG_END,b,B,Y))}}return this.setDragState(b,0),D.splice(0),0},processMoveEvents:function(b){var D=0,I=this._temp,B=this._eventData,z=this._eventContainer;B.cancelled=!1;for(var Y=!1,X=0;X<I.length;X++){var H=I[X];if(!(!H.input||!H.input.enabled)){if(D++,H.emit(v.GAMEOBJECT_POINTER_MOVE,b,H.input.localX,H.input.localY,z),B.cancelled||!H.input||!H.input.enabled){Y=!0;break}if(this.emit(v.GAMEOBJECT_MOVE,b,H,z),B.cancelled||!H.input||!H.input.enabled){Y=!0;break}if(this.topOnly)break}}return Y||this.emit(v.POINTER_MOVE,b,I),D},processWheelEvent:function(b){var D=0,I=this._temp,B=this._eventData,z=this._eventContainer;B.cancelled=!1;for(var Y=!1,X=b.deltaX,H=b.deltaY,N=b.deltaZ,U=0;U<I.length;U++){var L=I[U];if(!(!L.input||!L.input.enabled)){if(D++,L.emit(v.GAMEOBJECT_POINTER_WHEEL,b,X,H,N,z),B.cancelled||!L.input||!L.input.enabled){Y=!0;break}if(this.emit(v.GAMEOBJECT_WHEEL,b,L,X,H,N,z),B.cancelled||!L.input||!L.input.enabled){Y=!0;break}}}return Y||this.emit(v.POINTER_WHEEL,b,I,X,H,N),D},processOverEvents:function(b){var D=this._temp,I=0,B=D.length,z=[];if(B>0){var Y=this.manager,X=this._eventData,H=this._eventContainer;X.cancelled=!1;for(var N=!1,U=0;U<B;U++){var L=D[U];if(!(!L.input||!L.input.enabled)){if(z.push(L),Y.setCursor(L.input),L.emit(v.GAMEOBJECT_POINTER_OVER,b,L.input.localX,L.input.localY,H),I++,X.cancelled||!L.input||!L.input.enabled){N=!0;break}if(this.emit(v.GAMEOBJECT_OVER,b,L,H),X.cancelled||!L.input||!L.input.enabled){N=!0;break}}}N||this.emit(v.POINTER_OVER,b,z)}return this._over[b.id]=z,I},processOutEvents:function(b){var D=this._over[b.id],I=0,B=D.length;if(B>0){var z=this.manager,Y=this._eventData,X=this._eventContainer;Y.cancelled=!1;var H=!1;this.sortGameObjects(D,b);for(var N=0;N<B;N++){var U=D[N];if(U=D[N],!(!U.input||!U.input.enabled)){if(z.resetCursor(U.input),U.emit(v.GAMEOBJECT_POINTER_OUT,b,X),I++,Y.cancelled||!U.input||!U.input.enabled){H=!0;break}if(this.emit(v.GAMEOBJECT_OUT,b,U,X),Y.cancelled||!U.input||!U.input.enabled){H=!0;break}H||this.emit(v.POINTER_OUT,b,D)}}this._over[b.id]=[]}return I},processOverOutEvents:function(b){var D=this._temp,I,B,z=[],Y=[],X=[],H=this._over[b.id],N=this._drag[b.id],U=this.manager;for(I=0;I<H.length;I++)B=H[I],D.indexOf(B)===-1&&N.indexOf(B)===-1?z.push(B):X.push(B);for(I=0;I<D.length;I++)B=D[I],H.indexOf(B)===-1&&Y.push(B);var L=z.length,G=0,V=this._eventData,k=this._eventContainer;V.cancelled=!1;var W=!1;if(L>0){for(this.sortGameObjects(z,b),I=0;I<L;I++)if(B=z[I],!(!B.input||!B.input.enabled)){if(U.resetCursor(B.input),B.emit(v.GAMEOBJECT_POINTER_OUT,b,k),G++,V.cancelled||!B.input||!B.input.enabled){W=!0;break}if(this.emit(v.GAMEOBJECT_OUT,b,B,k),V.cancelled||!B.input||!B.input.enabled){W=!0;break}}W||this.emit(v.POINTER_OUT,b,z)}if(L=Y.length,V.cancelled=!1,W=!1,L>0){for(this.sortGameObjects(Y,b),I=0;I<L;I++)if(B=Y[I],!(!B.input||!B.input.enabled)){if(U.setCursor(B.input),B.emit(v.GAMEOBJECT_POINTER_OVER,b,B.input.localX,B.input.localY,k),G++,V.cancelled||!B.input||!B.input.enabled){W=!0;break}if(this.emit(v.GAMEOBJECT_OVER,b,B,k),V.cancelled||!B.input||!B.input.enabled){W=!0;break}}W||this.emit(v.POINTER_OVER,b,Y)}return H=X.concat(Y),this._over[b.id]=this.sortGameObjects(H,b),G},processUpEvents:function(b){var D=this._temp,I=this._eventData,B=this._eventContainer;I.cancelled=!1;for(var z=!1,Y=0;Y<D.length;Y++){var X=D[Y];if(!(!X.input||!X.input.enabled)){if(X.emit(v.GAMEOBJECT_POINTER_UP,b,X.input.localX,X.input.localY,B),I.cancelled||!X.input||!X.input.enabled){z=!0;break}if(this.emit(v.GAMEOBJECT_UP,b,X,B),I.cancelled||!X.input||!X.input.enabled){z=!0;break}}}return!z&&this.manager&&(b.upElement===this.manager.game.canvas?this.emit(v.POINTER_UP,b,D):this.emit(v.POINTER_UP_OUTSIDE,b)),D.length},queueForInsertion:function(b){return this._pendingInsertion.indexOf(b)===-1&&this._list.indexOf(b)===-1&&this._pendingInsertion.push(b),this},queueForRemoval:function(b){return this._pendingRemoval.push(b),this},setDraggable:function(b,D){D===void 0&&(D=!0),Array.isArray(b)||(b=[b]);for(var I=0;I<b.length;I++){var B=b[I];B.input.draggable=D;var z=this._draggable.indexOf(B);D&&z===-1?this._draggable.push(B):!D&&z>-1&&this._draggable.splice(z,1)}return this},makePixelPerfect:function(b){b===void 0&&(b=1);var D=this.systems.textures;return n(D,b)},setHitArea:function(b,D,I){if(D===void 0)return this.setHitAreaFromTexture(b);Array.isArray(b)||(b=[b]);var B=!1,z=!1,Y=!1,X=!1,H=!1,N=!0;if(E(D)){var U=D;D=p(U,"hitArea",null),I=p(U,"hitAreaCallback",null),B=p(U,"draggable",!1),z=p(U,"dropZone",!1),Y=p(U,"cursor",!1),X=p(U,"useHandCursor",!1),H=p(U,"pixelPerfect",!1);var L=p(U,"alphaTolerance",1);H&&(D={},I=this.makePixelPerfect(L)),(!D||!I)&&(this.setHitAreaFromTexture(b),N=!1)}else typeof D=="function"&&!I&&(I=D,D={});for(var G=0;G<b.length;G++){var V=b[G];if(H&&V.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var k=V.input?V.input:h(V,D,I);k.customHitArea=N,k.dropZone=z,k.cursor=X?"pointer":Y,V.input=k,B&&this.setDraggable(V),this.queueForInsertion(V)}return this},setHitAreaCircle:function(b,D,I,B,z){z===void 0&&(z=m);var Y=new u(D,I,B);return this.setHitArea(b,Y,z)},setHitAreaEllipse:function(b,D,I,B,z,Y){Y===void 0&&(Y=o);var X=new c(D,I,B,z);return this.setHitArea(b,X,Y)},setHitAreaFromTexture:function(b,D){D===void 0&&(D=w),Array.isArray(b)||(b=[b]);for(var I=0;I<b.length;I++){var B=b[I],z=B.frame,Y=0,X=0;if(B.width?(Y=B.width,X=B.height):z&&(Y=z.realWidth,X=z.realHeight),B.type==="Container"&&(Y===0||X===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}Y!==0&&X!==0&&(B.input=h(B,new P(0,0,Y,X),D),this.queueForInsertion(B))}return this},setHitAreaRectangle:function(b,D,I,B,z,Y){Y===void 0&&(Y=w);var X=new P(D,I,B,z);return this.setHitArea(b,X,Y)},setHitAreaTriangle:function(b,D,I,B,z,Y,X,H){H===void 0&&(H=O);var N=new A(D,I,B,z,Y,X);return this.setHitArea(b,N,H)},enableDebug:function(b,D){D===void 0&&(D=65280);var I=b.input;if(!I||!I.hitArea)return this;var B=I.hitArea,z=B.type,Y=I.hitAreaDebug,X=this.systems.add,H=this.systems.updateList;Y&&(H.remove(Y),Y.destroy(),Y=null);var N=0,U=0;switch(z){case x.CIRCLE:Y=X.arc(0,0,B.radius),N=B.x-B.radius,U=B.y-B.radius;break;case x.ELLIPSE:Y=X.ellipse(0,0,B.width,B.height),N=B.x-B.width/2,U=B.y-B.height/2;break;case x.LINE:Y=X.line(0,0,B.x1,B.y1,B.x2,B.y2);break;case x.POLYGON:Y=X.polygon(0,0,B.points);break;case x.RECTANGLE:Y=X.rectangle(0,0,B.width,B.height),N=B.x,U=B.y;break;case x.TRIANGLE:Y=X.triangle(0,0,B.x1,B.y1,B.x2,B.y2,B.x3,B.y3);break}return Y&&(Y.isFilled=!1,Y.strokeColor=D,Y.preUpdate=function(){Y.setStrokeStyle(1/b.scale,Y.strokeColor),Y.setDisplayOrigin(b.displayOriginX,b.displayOriginY);var L=b.x,G=b.y,V=b.rotation,k=b.scaleX,W=b.scaleY;if(b.parentContainer){var $=b.getWorldTransformMatrix();L=$.tx,G=$.ty,V=$.rotation,k=$.scaleX,W=$.scaleY}Y.setRotation(V),Y.setScale(k,W),Y.setPosition(L+N*k,G+U*W),Y.setScrollFactor(b.scrollFactorX,b.scrollFactorY),Y.setDepth(b.depth)},H.add(Y),I.hitAreaDebug=Y),this},removeDebug:function(b){var D=b.input;if(D&&D.hitAreaDebug){var I=D.hitAreaDebug;this.systems.updateList.remove(I),I.destroy(),D.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(b){return this.pollRate=b,this._pollTimer=0,this},setGlobalTopOnly:function(b){return this.manager.globalTopOnly=b,this},setTopOnly:function(b){return this.topOnly=b,this},sortGameObjects:function(b,D){if(b.length<2||!D.camera)return b;var I=D.camera.renderList;return b.sort(function(B,z){var Y=Math.max(I.indexOf(B),0),X=Math.max(I.indexOf(z),0);return X-Y})},sortDropZones:function(b){return b.length<2?b:(this.scene.sys.depthSort(),b.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(b,D){if(!b.parentContainer&&!D.parentContainer)return this.displayList.getIndex(D)-this.displayList.getIndex(b);if(b.parentContainer===D.parentContainer)return D.parentContainer.getIndex(D)-b.parentContainer.getIndex(b);if(b.parentContainer===D)return-1;if(D.parentContainer===b)return 1;for(var I=b.getIndexList(),B=D.getIndexList(),z=Math.min(I.length,B.length),Y=0;Y<z;Y++){var X=I[Y],H=B[Y];if(X!==H)return H-X}return B.length-I.length},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(b){return this.manager.addPointer(b)},setDefaultCursor:function(b){return this.manager.setDefaultCursor(b),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(v.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var b=0;b<10;b++)this._drag[b]=[],this._over[b]=[];this.removeAllListeners();var D=this.manager;D.canvas.style.cursor=D.defaultCursor;var I=this.systems.events;I.off(R.TRANSITION_START,this.transitionIn,this),I.off(R.TRANSITION_OUT,this.transitionOut,this),I.off(R.TRANSITION_COMPLETE,this.transitionComplete,this),I.off(R.PRE_UPDATE,this.preUpdate,this),D.events.off(v.GAME_OUT,this.onGameOut,this),D.events.off(v.GAME_OVER,this.onGameOver,this),I.off(R.SHUTDOWN,this.shutdown,this)},resetPointers:function(){for(var b=this.manager.pointers,D=0;D<b.length;D++)b[D].reset()},destroy:function(){this.shutdown(),this.pluginEvents.emit(v.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(R.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});M.register("InputPlugin",F,"input"),r.exports=F}),63399:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(10850),m={},d={};d.register=function(l,h,n,a,c){m[l]={plugin:h,mapping:n,settingsKey:a,configKey:c}},d.getPlugin=function(l){return m[l]},d.install=function(l){var h=l.scene.sys,n=h.settings.input,a=h.game.config;for(var c in m){var o=m[c].plugin,v=m[c].mapping,g=m[c].settingsKey,p=m[c].configKey;u(n,g,a[p])&&(l[v]=new o(l))}},d.remove=function(l){m.hasOwnProperty(l)&&delete m[l]},r.exports=d}),40398:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(90447),m=e(56694),d=e(53996),l=e(88456),h=e(44521),n=e(93736),a=e(36580),c=new m({initialize:function(v,g){this.manager=v,this.id=g,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new n,this.prevPosition=new n,this.midPoint=new n(-1,-1),this.velocity=new n,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=g===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(o){var v=o.getWorldPoint(this.x,this.y);return this.worldX=v.x,this.worldY=v.y,this},positionToCamera:function(o,v){return o.getWorldPoint(this.x,this.y,v)},updateMotion:function(){var o=this.position.x,v=this.position.y,g=this.midPoint.x,p=this.midPoint.y;if(!(o===g&&v===p)){var x=h(this.motionFactor,g,o),T=h(this.motionFactor,p,v);l(x,o,.1)&&(x=o),l(T,v,.1)&&(T=v),this.midPoint.set(x,T);var E=o-x,M=v-T;this.velocity.set(E,M),this.angle=u(x,T,o,v),this.distance=Math.sqrt(E*E+M*M)}},up:function(o){"buttons"in o&&(this.buttons=o.buttons),this.event=o,this.button=o.button,this.upElement=o.target,this.manager.transformPointer(this,o.pageX,o.pageY,!1),o.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=o.timeStamp,this.wasTouch=!1)},down:function(o){"buttons"in o&&(this.buttons=o.buttons),this.event=o,this.button=o.button,this.downElement=o.target,this.manager.transformPointer(this,o.pageX,o.pageY,!1),o.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),a.macOS&&o.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=o.timeStamp),this.wasTouch=!1},move:function(o){"buttons"in o&&(this.buttons=o.buttons),this.event=o,this.manager.transformPointer(this,o.pageX,o.pageY,!0),this.locked&&(this.movementX=o.movementX||o.mozMovementX||o.webkitMovementX||0,this.movementY=o.movementY||o.mozMovementY||o.webkitMovementY||0),this.moveTime=o.timeStamp,this.wasTouch=!1},wheel:function(o){"buttons"in o&&(this.buttons=o.buttons),this.event=o,this.manager.transformPointer(this,o.pageX,o.pageY,!1),this.deltaX=o.deltaX,this.deltaY=o.deltaY,this.deltaZ=o.deltaZ,this.wasTouch=!1},touchstart:function(o,v){o.pointerId&&(this.pointerId=o.pointerId),this.identifier=o.identifier,this.target=o.target,this.active=!0,this.buttons=1,this.event=v,this.downElement=o.target,this.manager.transformPointer(this,o.pageX,o.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=v.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(o,v){this.event=v,this.manager.transformPointer(this,o.pageX,o.pageY,!0),this.moveTime=v.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(o,v){this.buttons=0,this.event=v,this.upElement=o.target,this.manager.transformPointer(this,o.pageX,o.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=v.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(o,v){this.buttons=0,this.event=v,this.upElement=o.target,this.manager.transformPointer(this,o.pageX,o.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=v.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.button===0&&!this.isDown},rightButtonReleased:function(){return this.button===2&&!this.isDown},middleButtonReleased:function(){return this.button===1&&!this.isDown},backButtonReleased:function(){return this.button===3&&!this.isDown},forwardButtonReleased:function(){return this.button===4&&!this.isDown},getDistance:function(){return this.isDown?d(this.downX,this.downY,this.x,this.y):d(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?u(this.downX,this.downY,this.x,this.y):u(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(o,v){o===void 0&&(o=10),v===void 0&&(v=[]);for(var g=this.prevPosition.x,p=this.prevPosition.y,x=this.position.x,T=this.position.y,E=0;E<o;E++){var M=1/o*E;v[E]={x:h(M,g,x),y:h(M,p,T)}}return v},reset:function(){this.event=null,this.downElement=null,this.upElement=null,this.button=0,this.buttons=0,this.position.set(0,0),this.prevPosition.set(0,0),this.midPoint.set(-1,-1),this.velocity.set(0,0),this.angle=0,this.distance=0,this.worldX=0,this.worldY=0,this.downX=0,this.downY=0,this.upX=0,this.upY=0,this.moveTime=0,this.upTime=0,this.downTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.deltaX=0,this.deltaY=0,this.deltaZ=0,this.active=this.id===0},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(o){this.position.x=o}},y:{get:function(){return this.position.y},set:function(o){this.position.y=o}},time:{get:function(){return this.event?this.event.timeStamp:0}}});r.exports=c}),72687:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};r.exports=y}),14874:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="boot"}),54168:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="destroy"}),526:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="dragend"}),81623:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="dragenter"}),94472:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="drag"}),9304:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="dragleave"}),34265:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="dragover"}),50151:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="dragstart"}),98134:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="drop"}),56773:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="gameobjectdown"}),45824:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="dragend"}),39578:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="dragenter"}),72072:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="drag"}),82569:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="dragleave"}),70833:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="dragover"}),81442:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="dragstart"}),32936:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="drop"}),99658:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="gameobjectmove"}),60515:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="gameobjectout"}),55254:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="gameobjectover"}),34782:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pointerdown"}),41769:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pointermove"}),65588:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pointerout"}),61640:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pointerover"}),49342:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pointerup"}),82662:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="wheel"}),13058:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="gameobjectup"}),52426:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="gameobjectwheel"}),78072:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="gameout"}),1545:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="gameover"}),67137:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="boot"}),27678:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="process"}),22257:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="update"}),90379:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pointerlockchange"}),88909:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pointerdown"}),36548:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pointerdownoutside"}),18483:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pointermove"}),22355:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pointerout"}),7997:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pointerover"}),66318:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pointerup"}),94812:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pointerupoutside"}),37310:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="wheel"}),24196:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="preupdate"}),27053:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="shutdown"}),29413:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="start"}),25165:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="update"}),33963:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={BOOT:e(14874),DESTROY:e(54168),DRAG_END:e(526),DRAG_ENTER:e(81623),DRAG:e(94472),DRAG_LEAVE:e(9304),DRAG_OVER:e(34265),DRAG_START:e(50151),DROP:e(98134),GAME_OUT:e(78072),GAME_OVER:e(1545),GAMEOBJECT_DOWN:e(56773),GAMEOBJECT_DRAG_END:e(45824),GAMEOBJECT_DRAG_ENTER:e(39578),GAMEOBJECT_DRAG:e(72072),GAMEOBJECT_DRAG_LEAVE:e(82569),GAMEOBJECT_DRAG_OVER:e(70833),GAMEOBJECT_DRAG_START:e(81442),GAMEOBJECT_DROP:e(32936),GAMEOBJECT_MOVE:e(99658),GAMEOBJECT_OUT:e(60515),GAMEOBJECT_OVER:e(55254),GAMEOBJECT_POINTER_DOWN:e(34782),GAMEOBJECT_POINTER_MOVE:e(41769),GAMEOBJECT_POINTER_OUT:e(65588),GAMEOBJECT_POINTER_OVER:e(61640),GAMEOBJECT_POINTER_UP:e(49342),GAMEOBJECT_POINTER_WHEEL:e(82662),GAMEOBJECT_UP:e(13058),GAMEOBJECT_WHEEL:e(52426),MANAGER_BOOT:e(67137),MANAGER_PROCESS:e(27678),MANAGER_UPDATE:e(22257),POINTER_DOWN:e(88909),POINTER_DOWN_OUTSIDE:e(36548),POINTER_MOVE:e(18483),POINTER_OUT:e(22355),POINTER_OVER:e(7997),POINTER_UP:e(66318),POINTER_UP_OUTSIDE:e(94812),POINTER_WHEEL:e(37310),POINTERLOCK_CHANGE:e(90379),PRE_UPDATE:e(24196),SHUTDOWN:e(27053),START:e(29413),UPDATE:e(25165)}}),70848:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=new u({initialize:function(l,h){this.pad=l,this.events=l.events,this.index=h,this.value=0,this.threshold=.1},update:function(d){this.value=d},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});r.exports=m}),21274:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(43200),d=new u({initialize:function(h,n){this.pad=h,this.events=h.manager,this.index=n,this.value=0,this.threshold=1,this.pressed=!1},update:function(l){this.value=l;var h=this.pad,n=this.index;l>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(m.BUTTON_DOWN,h,this,l),this.pad.emit(m.GAMEPAD_BUTTON_DOWN,n,l,this)):this.pressed&&(this.pressed=!1,this.events.emit(m.BUTTON_UP,h,this,l),this.pad.emit(m.GAMEPAD_BUTTON_UP,n,l,this))},destroy:function(){this.pad=null,this.events=null}});r.exports=d}),75956:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(70848),m=e(21274),d=e(56694),l=e(6659),h=e(93736),n=new d({Extends:l,initialize:function(c,o){l.call(this),this.manager=c,this.pad=o,this.id=o.id,this.index=o.index;for(var v=[],g=0;g<o.buttons.length;g++)v.push(new m(this,g));this.buttons=v;var p=[];for(g=0;g<o.axes.length;g++)p.push(new u(this,g));this.axes=p,this.vibration=o.vibrationActuator;var x={value:0,pressed:!1};this._LCLeft=v[14]?v[14]:x,this._LCRight=v[15]?v[15]:x,this._LCTop=v[12]?v[12]:x,this._LCBottom=v[13]?v[13]:x,this._RCLeft=v[2]?v[2]:x,this._RCRight=v[1]?v[1]:x,this._RCTop=v[3]?v[3]:x,this._RCBottom=v[0]?v[0]:x,this._FBLeftTop=v[4]?v[4]:x,this._FBLeftBottom=v[6]?v[6]:x,this._FBRightTop=v[5]?v[5]:x,this._FBRightBottom=v[7]?v[7]:x;var T={value:0};this._HAxisLeft=p[0]?p[0]:T,this._VAxisLeft=p[1]?p[1]:T,this._HAxisRight=p[2]?p[2]:T,this._VAxisRight=p[3]?p[3]:T,this.leftStick=new h,this.rightStick=new h,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(a){return this.axes[a].getValue()},setAxisThreshold:function(a){for(var c=0;c<this.axes.length;c++)this.axes[c].threshold=a},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(a){return this.buttons[a].value},isButtonDown:function(a){return this.buttons[a].pressed},update:function(a){if(!(a.timestamp<this._created)){var c,o=this.buttons,v=a.buttons,g=o.length;for(c=0;c<g;c++)o[c].update(v[c].value);var p=this.axes,x=a.axes;for(g=p.length,c=0;c<g;c++)p[c].update(x[c]);g>=2&&(this.leftStick.set(p[0].getValue(),p[1].getValue()),g>=4&&this.rightStick.set(p[2].getValue(),p[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var a;for(a=0;a<this.buttons.length;a++)this.buttons[a].destroy();for(a=0;a<this.axes.length;a++)this.axes[a].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});r.exports=n}),1379:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(6659),d=e(43200),l=e(75956),h=e(10850),n=e(63399),a=e(33963),c=new u({Extends:m,initialize:function(v){m.call(this),this.scene=v.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=v,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,v.pluginEvents.once(a.BOOT,this.boot,this),v.pluginEvents.on(a.START,this.start,this)},boot:function(){var o=this.scene.sys.game,v=this.settings.input,g=o.config;this.enabled=h(v,"gamepad",g.inputGamepad)&&o.device.input.gamepads,this.target=h(v,"gamepad.target",g.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(a.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(a.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var o=this,v=this.target,g=function(p){p.defaultPrevented||!o.isActive()||(o.refreshPads(),o.queue.push(p))};this.onGamepadHandler=g,v.addEventListener("gamepadconnected",g,!1),v.addEventListener("gamepaddisconnected",g,!1),this.sceneInputPlugin.pluginEvents.on(a.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(a.UPDATE,this.update);for(var o=0;o<this.gamepads.length;o++)this.gamepads[o].removeAllListeners()},disconnectAll:function(){for(var o=0;o<this.gamepads.length;o++)this.gamepads[o].pad.connected=!1},refreshPads:function(){var o=navigator.getGamepads();if(!o)this.disconnectAll();else for(var v=this.gamepads,g=0;g<o.length;g++){var p=o[g];if(p){var x=p.id,T=p.index,E=v[T];if(E)E.id!==x?(E.destroy(),v[T]=new l(this,p)):E.update(p);else{var M=new l(this,p);v[T]=M,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=M):this._pad3=M:this._pad2=M:this._pad1=M}}}},getAll:function(){for(var o=[],v=this.gamepads,g=0;g<v.length;g++)v[g]&&o.push(v[g]);return o},getPad:function(o){for(var v=this.gamepads,g=0;g<v.length;g++)if(v[g]&&v[g].index===o)return v[g]},update:function(){if(this.enabled){this.refreshPads();var o=this.queue.length;if(o!==0)for(var v=this.queue.splice(0,o),g=0;g<o;g++){var p=v[g],x=this.getPad(p.gamepad.index);p.type==="gamepadconnected"?this.emit(d.CONNECTED,x,p):p.type==="gamepaddisconnected"&&this.emit(d.DISCONNECTED,x,p)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var o=0;o<this.gamepads.length;o++)this.gamepads[o]&&this.gamepads[o].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});n.register("GamepadPlugin",c,"gamepad","gamepad","inputGamepad"),r.exports=c}),33171:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}}),74982:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}}),43247:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}}),4898:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={DUALSHOCK_4:e(74982),SNES_USB:e(33171),XBOX_360:e(43247)}}),17344:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="down"}),36635:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="up"}),85724:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="connected"}),55832:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="disconnected"}),772:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="down"}),33608:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="up"}),43200:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={BUTTON_DOWN:e(17344),BUTTON_UP:e(36635),CONNECTED:e(85724),DISCONNECTED:e(55832),GAMEPAD_BUTTON_DOWN:e(772),GAMEPAD_BUTTON_UP:e(33608)}}),92636:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Axis:e(70848),Button:e(21274),Events:e(43200),Gamepad:e(75956),GamepadPlugin:e(1379),Configs:e(4898)}}),20873:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72687),m=e(98611),d={CreatePixelPerfectHandler:e(18104),CreateInteractiveObject:e(27395),Events:e(33963),Gamepad:e(92636),InputManager:e(69898),InputPlugin:e(12499),InputPluginCache:e(63399),Keyboard:e(28388),Mouse:e(11343),Pointer:e(40398),Touch:e(77423)};d=m(!1,d,u),r.exports=d}),71064:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(66458),m=e(56694),d=e(97081),l=e(33963),h=e(11873),n=e(72283),a=new m({initialize:function(o){this.manager=o,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=n,this.onKeyUp=n,o.events.once(l.MANAGER_BOOT,this.boot,this)},boot:function(){var c=this.manager.config;this.enabled=c.inputKeyboard,this.target=c.inputKeyboardEventTarget,this.addCapture(c.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(d.POST_STEP,this.postUpdate,this)},startListeners:function(){var c=this;this.onKeyDown=function(v){if(!(v.defaultPrevented||!c.enabled||!c.manager)){c.queue.push(v),c.manager.events.emit(l.MANAGER_PROCESS);var g=v.altKey||v.ctrlKey||v.shiftKey||v.metaKey;c.preventDefault&&!g&&c.captures.indexOf(v.keyCode)>-1&&v.preventDefault()}},this.onKeyUp=function(v){if(!(v.defaultPrevented||!c.enabled||!c.manager)){c.queue.push(v),c.manager.events.emit(l.MANAGER_PROCESS);var g=v.altKey||v.ctrlKey||v.shiftKey||v.metaKey;c.preventDefault&&!g&&c.captures.indexOf(v.keyCode)>-1&&v.preventDefault()}};var o=this.target;o&&(o.addEventListener("keydown",this.onKeyDown,!1),o.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var c=this.target;c.removeEventListener("keydown",this.onKeyDown,!1),c.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(c){typeof c=="string"&&(c=c.split(",")),Array.isArray(c)||(c=[c]);for(var o=this.captures,v=0;v<c.length;v++){var g=c[v];typeof g=="string"&&(g=h[g.trim().toUpperCase()]),o.indexOf(g)===-1&&o.push(g)}this.preventDefault=o.length>0},removeCapture:function(c){typeof c=="string"&&(c=c.split(",")),Array.isArray(c)||(c=[c]);for(var o=this.captures,v=0;v<c.length;v++){var g=c[v];typeof g=="string"&&(g=h[g.toUpperCase()]),u(o,g)}this.preventDefault=o.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(d.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});r.exports=a}),89666:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(6659),d=e(94030),l=e(97081),h=e(10850),n=e(33963),a=e(63399),c=e(50165),o=e(11873),v=e(95625),g=e(48044),p=e(7599),x=e(84314),T=new u({Extends:m,initialize:function(M){m.call(this),this.game=M.systems.game,this.scene=M.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=M,this.manager=M.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,M.pluginEvents.once(n.BOOT,this.boot,this),M.pluginEvents.on(n.START,this.start,this)},boot:function(){var E=this.settings.input;this.enabled=h(E,"keyboard",!0);var M=h(E,"keyboard.capture",null);M&&this.addCaptures(M),this.sceneInputPlugin.pluginEvents.once(n.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(n.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(n.SHUTDOWN,this.shutdown,this),this.game.events.on(l.BLUR,this.resetKeys,this),this.scene.sys.events.on(p.PAUSE,this.resetKeys,this),this.scene.sys.events.on(p.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.canInput()},addCapture:function(E){return this.manager.addCapture(E),this},removeCapture:function(E){return this.manager.removeCapture(E),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:o.UP,down:o.DOWN,left:o.LEFT,right:o.RIGHT,space:o.SPACE,shift:o.SHIFT})},addKeys:function(E,M,P){M===void 0&&(M=!0),P===void 0&&(P=!1);var w={};if(typeof E=="string"){E=E.split(",");for(var R=0;R<E.length;R++){var A=E[R].trim();A&&(w[A]=this.addKey(A,M,P))}}else for(var O in E)w[O]=this.addKey(E[O],M,P);return w},addKey:function(E,M,P){M===void 0&&(M=!0),P===void 0&&(P=!1);var w=this.keys;if(E instanceof c){var R=w.indexOf(E);return R>-1?w[R]=E:w[E.keyCode]=E,M&&this.addCapture(E.keyCode),E.setEmitOnRepeat(P),E}return typeof E=="string"&&(E=o[E.toUpperCase()]),w[E]||(w[E]=new c(this,E),M&&this.addCapture(E),w[E].setEmitOnRepeat(P)),w[E]},removeKey:function(E,M,P){M===void 0&&(M=!1),P===void 0&&(P=!1);var w=this.keys,R;if(E instanceof c){var A=w.indexOf(E);A>-1&&(R=this.keys[A],this.keys[A]=void 0)}else typeof E=="string"&&(E=o[E.toUpperCase()]);return w[E]&&(R=w[E],w[E]=void 0),R&&(R.plugin=null,P&&this.removeCapture(R.keyCode),M&&R.destroy()),this},removeAllKeys:function(E,M){E===void 0&&(E=!1),M===void 0&&(M=!1);for(var P=this.keys,w=0;w<P.length;w++){var R=P[w];R&&(P[w]=void 0,M&&this.removeCapture(R.keyCode),E&&R.destroy())}return this},createCombo:function(E,M){return new v(this,E,M)},checkDown:function(E,M){if(M===void 0&&(M=0),this.enabled&&E.isDown){var P=x(this.time-E.timeDown,M);if(P>E._tick)return E._tick=P,!0}return!1},update:function(){var E=this.manager.queue,M=E.length;if(!(!this.isActive()||M===0))for(var P=this.keys,w=0;w<M;w++){var R=E[w],A=R.keyCode,O=P[A],F=!1;R.cancelled===void 0&&(R.cancelled=0,R.stopImmediatePropagation=function(){R.cancelled=1},R.stopPropagation=function(){R.cancelled=-1}),R.cancelled!==-1&&(A===this.prevCode&&R.timeStamp===this.prevTime&&R.type===this.prevType||(this.prevCode=A,this.prevTime=R.timeStamp,this.prevType=R.type,R.type==="keydown"?(O&&(F=O.isDown,O.onDown(R)),!R.cancelled&&(!O||!F)&&(g[A]&&this.emit(d.KEY_DOWN+g[A],R),R.cancelled||this.emit(d.ANY_KEY_DOWN,R))):(O&&O.onUp(R),R.cancelled||(g[A]&&this.emit(d.KEY_UP+g[A],R),R.cancelled||this.emit(d.ANY_KEY_UP,R))),R.cancelled===1&&(R.cancelled=0)))}},resetKeys:function(){for(var E=this.keys,M=0;M<E.length;M++)E[M]&&E[M].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(n.MANAGER_PROCESS,this.update,this),this.game.events.off(l.BLUR,this.resetKeys),this.scene.sys.events.off(p.PAUSE,this.resetKeys,this),this.scene.sys.events.off(p.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var E=this.keys,M=0;M<E.length;M++)E[M]&&E[M].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});a.register("KeyboardPlugin",T,"keyboard","keyboard","inputKeyboard"),r.exports=T}),60258:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return u.timeLastMatched=e.timeStamp,u.index++,u.index===u.size?!0:(u.current=u.keyCodes[u.index],!1)};r.exports=y}),95625:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(94030),d=e(72632),l=e(2544),h=e(88754),n=new u({initialize:function(c,o,v){if(v===void 0&&(v={}),o.length<2)return!1;this.manager=c,this.enabled=!0,this.keyCodes=[];for(var g=0;g<o.length;g++){var p=o[g];typeof p=="string"?this.keyCodes.push(p.toUpperCase().charCodeAt(0)):typeof p=="number"?this.keyCodes.push(p):p.hasOwnProperty("keyCode")&&this.keyCodes.push(p.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=d(v,"resetOnWrongKey",!0),this.maxKeyDelay=d(v,"maxKeyDelay",0),this.resetOnMatch=d(v,"resetOnMatch",!1),this.deleteOnMatch=d(v,"deleteOnMatch",!1);var x=this,T=function(E){if(!(x.matched||!x.enabled)){var M=l(E,x);M&&(x.manager.emit(m.COMBO_MATCH,x,E),x.resetOnMatch?h(x):x.deleteOnMatch&&x.destroy())}};this.onKeyDown=T,this.manager.on(m.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(m.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});r.exports=n}),2544:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(60258),m=function(d,l){if(l.matched)return!0;var h=!1,n=!1;if(d.keyCode===l.current)if(l.index>0&&l.maxKeyDelay>0){var a=l.timeLastMatched+l.maxKeyDelay;d.timeStamp<=a&&(n=!0,h=u(d,l))}else n=!0,h=u(d,l);return!n&&l.resetOnWrongKey&&(l.index=0,l.current=l.keyCodes[0]),h&&(l.timeLastMatched=d.timeStamp,l.matched=!0,l.timeMatched=d.timeStamp),h};r.exports=m}),88754:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return e.current=e.keyCodes[0],e.index=0,e.timeLastMatched=0,e.matched=!1,e.timeMatched=0,e};r.exports=y}),5044:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="keydown"}),40813:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="keyup"}),89319:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="keycombomatch"}),43267:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="down"}),78595:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="keydown-"}),30056:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="keyup-"}),81939:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="up"}),94030:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={ANY_KEY_DOWN:e(5044),ANY_KEY_UP:e(40813),COMBO_MATCH:e(89319),DOWN:e(43267),KEY_DOWN:e(78595),KEY_UP:e(30056),UP:e(81939)}}),28388:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Events:e(94030),KeyboardManager:e(71064),KeyboardPlugin:e(89666),Key:e(50165),KeyCodes:e(11873),KeyCombo:e(95625),AdvanceKeyCombo:e(60258),ProcessKeyCombo:e(2544),ResetKeyCombo:e(88754),JustDown:e(42460),JustUp:e(53162),DownDuration:e(64964),UpDuration:e(70331)}}),64964:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){u===void 0&&(u=50);var m=e.plugin.game.loop.time-e.timeDown;return e.isDown&&m<u};r.exports=y}),42460:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return e._justDown?(e._justDown=!1,!0):!1};r.exports=y}),53162:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return e._justUp?(e._justUp=!1,!0):!1};r.exports=y}),50165:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(6659),d=e(94030),l=new u({Extends:m,initialize:function(n,a){m.call(this),this.plugin=n,this.keyCode=a,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(h){return this.emitOnRepeat=h,this},onDown:function(h){this.originalEvent=h,this.enabled&&(this.altKey=h.altKey,this.ctrlKey=h.ctrlKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.location=h.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(d.DOWN,this,h):(this.isDown=!0,this.isUp=!1,this.timeDown=h.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(d.DOWN,this,h)))},onUp:function(h){this.originalEvent=h,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=h.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(d.UP,this,h))},reset:function(){return this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});r.exports=l}),11873:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};r.exports=y}),48044:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(11873),m={};for(var d in u)m[u[d]]=d;r.exports=m}),70331:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){u===void 0&&(u=50);var m=e.plugin.game.loop.time-e.timeUp;return e.isUp&&m<u};r.exports=y}),7905:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(90185),d=e(33963),l=e(72283),h=new u({initialize:function(a){this.manager=a,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=l,this.onMouseDown=l,this.onMouseUp=l,this.onMouseDownWindow=l,this.onMouseUpWindow=l,this.onMouseOver=l,this.onMouseOut=l,this.onMouseWheel=l,this.pointerLockChange=l,this.isTop=!0,a.events.once(d.MANAGER_BOOT,this.boot,this)},boot:function(){var n=this.manager.config;this.enabled=n.inputMouse,this.target=n.inputMouseEventTarget,this.passive=n.inputMousePassive,this.preventDefaultDown=n.inputMousePreventDefaultDown,this.preventDefaultUp=n.inputMousePreventDefaultUp,this.preventDefaultMove=n.inputMousePreventDefaultMove,this.preventDefaultWheel=n.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,n.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(n){return n.preventDefault(),!1}),this},requestPointerLock:function(){if(m.pointerLock){var n=this.target;n.requestPointerLock=n.requestPointerLock||n.mozRequestPointerLock||n.webkitRequestPointerLock,n.requestPointerLock()}},releasePointerLock:function(){m.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var n=this.target;if(n){var a=this,c=this.manager,o=c.canvas,v=window&&window.focus&&c.game.config.autoFocus;this.onMouseMove=function(p){!p.defaultPrevented&&a.enabled&&c&&c.enabled&&(c.onMouseMove(p),a.preventDefaultMove&&p.preventDefault())},this.onMouseDown=function(p){v&&window.focus(),!p.defaultPrevented&&a.enabled&&c&&c.enabled&&(c.onMouseDown(p),a.preventDefaultDown&&p.target===o&&p.preventDefault())},this.onMouseDownWindow=function(p){!p.defaultPrevented&&a.enabled&&c&&c.enabled&&p.target!==o&&c.onMouseDown(p)},this.onMouseUp=function(p){!p.defaultPrevented&&a.enabled&&c&&c.enabled&&(c.onMouseUp(p),a.preventDefaultUp&&p.target===o&&p.preventDefault())},this.onMouseUpWindow=function(p){!p.defaultPrevented&&a.enabled&&c&&c.enabled&&p.target!==o&&c.onMouseUp(p)},this.onMouseOver=function(p){!p.defaultPrevented&&a.enabled&&c&&c.enabled&&c.setCanvasOver(p)},this.onMouseOut=function(p){!p.defaultPrevented&&a.enabled&&c&&c.enabled&&c.setCanvasOut(p)},this.onMouseWheel=function(p){!p.defaultPrevented&&a.enabled&&c&&c.enabled&&c.onMouseWheel(p),a.preventDefaultWheel&&p.target===o&&p.preventDefault()};var g={passive:!0};if(n.addEventListener("mousemove",this.onMouseMove),n.addEventListener("mousedown",this.onMouseDown),n.addEventListener("mouseup",this.onMouseUp),n.addEventListener("mouseover",this.onMouseOver,g),n.addEventListener("mouseout",this.onMouseOut,g),this.preventDefaultWheel?n.addEventListener("wheel",this.onMouseWheel,{passive:!1}):n.addEventListener("wheel",this.onMouseWheel,g),window&&c.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,g),window.top.addEventListener("mouseup",this.onMouseUpWindow,g)}catch{window.addEventListener("mousedown",this.onMouseDownWindow,g),window.addEventListener("mouseup",this.onMouseUpWindow,g),this.isTop=!1}m.pointerLock&&(this.pointerLockChange=function(p){var x=a.target;a.locked=document.pointerLockElement===x||document.mozPointerLockElement===x||document.webkitPointerLockElement===x,c.onPointerLockChange(p)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var n=this.target;n.removeEventListener("mousemove",this.onMouseMove),n.removeEventListener("mousedown",this.onMouseDown),n.removeEventListener("mouseup",this.onMouseUp),n.removeEventListener("mouseover",this.onMouseOver),n.removeEventListener("mouseout",this.onMouseOut),window&&(n=this.isTop?window.top:window,n.removeEventListener("mousedown",this.onMouseDownWindow),n.removeEventListener("mouseup",this.onMouseUpWindow)),m.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});r.exports=h}),11343:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={MouseManager:e(7905)}}),37579:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(33963),d=e(72283),l=new u({initialize:function(n){this.manager=n,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=d,this.onTouchStartWindow=d,this.onTouchMove=d,this.onTouchEnd=d,this.onTouchEndWindow=d,this.onTouchCancel=d,this.onTouchCancelWindow=d,this.isTop=!0,n.events.once(m.MANAGER_BOOT,this.boot,this)},boot:function(){var h=this.manager.config;this.enabled=h.inputTouch,this.target=h.inputTouchEventTarget,this.capture=h.inputTouchCapture,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,h.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(h){return h.preventDefault(),!1}),this},startListeners:function(){var h=this.target;if(h){var n=this,a=this.manager,c=a.canvas,o=window&&window.focus&&a.game.config.autoFocus;this.onTouchMove=function(x){!x.defaultPrevented&&n.enabled&&a&&a.enabled&&(a.onTouchMove(x),n.capture&&x.cancelable&&x.preventDefault())},this.onTouchStart=function(x){o&&window.focus(),!x.defaultPrevented&&n.enabled&&a&&a.enabled&&(a.onTouchStart(x),n.capture&&x.cancelable&&x.target===c&&x.preventDefault())},this.onTouchStartWindow=function(x){!x.defaultPrevented&&n.enabled&&a&&a.enabled&&x.target!==c&&a.onTouchStart(x)},this.onTouchEnd=function(x){!x.defaultPrevented&&n.enabled&&a&&a.enabled&&(a.onTouchEnd(x),n.capture&&x.cancelable&&x.target===c&&x.preventDefault())},this.onTouchEndWindow=function(x){!x.defaultPrevented&&n.enabled&&a&&a.enabled&&x.target!==c&&a.onTouchEnd(x)},this.onTouchCancel=function(x){!x.defaultPrevented&&n.enabled&&a&&a.enabled&&(a.onTouchCancel(x),n.capture&&x.preventDefault())},this.onTouchCancelWindow=function(x){!x.defaultPrevented&&n.enabled&&a&&a.enabled&&a.onTouchCancel(x)};var v=this.capture,g={passive:!0},p={passive:!1};if(h.addEventListener("touchstart",this.onTouchStart,v?p:g),h.addEventListener("touchmove",this.onTouchMove,v?p:g),h.addEventListener("touchend",this.onTouchEnd,v?p:g),h.addEventListener("touchcancel",this.onTouchCancel,v?p:g),window&&a.game.config.inputWindowEvents)try{window.top.addEventListener("touchstart",this.onTouchStartWindow,p),window.top.addEventListener("touchend",this.onTouchEndWindow,p),window.top.addEventListener("touchcancel",this.onTouchCancelWindow,p)}catch{window.addEventListener("touchstart",this.onTouchStartWindow,p),window.addEventListener("touchend",this.onTouchEndWindow,p),window.addEventListener("touchcancel",this.onTouchCancelWindow,p),this.isTop=!1}this.enabled=!0}},stopListeners:function(){var h=this.target;h.removeEventListener("touchstart",this.onTouchStart),h.removeEventListener("touchmove",this.onTouchMove),h.removeEventListener("touchend",this.onTouchEnd),h.removeEventListener("touchcancel",this.onTouchCancel),window&&(h=this.isTop?window.top:window,h.removeEventListener("touchstart",this.onTouchStartWindow),h.removeEventListener("touchend",this.onTouchEndWindow),h.removeEventListener("touchcancel",this.onTouchCancelWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});r.exports=l}),77423:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={TouchManager:e(37579)}}),98035:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(12117),d=e(683),l=e(72632),h=e(30750),n=e(43531),a=e(88490),c=e(33868),o=new u({initialize:function(g,p){if(this.loader=g,this.cache=l(p,"cache",!1),this.type=l(p,"type",!1),!this.type)throw new Error("Invalid File type: "+this.type);this.key=l(p,"key",!1);var x=this.key;if(g.prefix&&g.prefix!==""&&(this.key=g.prefix+x),!this.key)throw new Error("Invalid File key: "+this.key);var T=l(p,"url");T===void 0?T=g.path+x+"."+l(p,"extension",""):typeof T=="string"&&!T.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)&&(T=g.path+T),this.url=T,this.src="",this.xhrSettings=c(l(p,"responseType",void 0)),l(p,"xhrSettings",!1)&&(this.xhrSettings=n(this.xhrSettings,l(p,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?m.FILE_POPULATED:m.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=l(p,"config",{}),this.multiFile,this.linkFile},setLink:function(v){this.linkFile=v,v.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===m.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=m.FILE_LOADING,this.src=h(this,this.loader.baseURL),this.src.indexOf("data:")===0?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=a(this,this.loader.xhr))},onLoad:function(v,g){var p=v.responseURL&&this.loader.localSchemes.some(function(E){return v.responseURL.indexOf(E)===0}),x=p&&g.target.status===0,T=!(g.target&&g.target.status!==200)||x;v.readyState===4&&v.status>=400&&v.status<=599&&(T=!1),this.state=m.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,T)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(v){v.lengthComputable&&(this.bytesLoaded=v.loaded,this.bytesTotal=v.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(d.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=m.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=m.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){console.error('Failed to process file: %s "%s"',this.type,this.key),this.state=m.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.data&&this.cache.add(this.key,this.data)},pendingDestroy:function(v){if(this.state!==m.FILE_PENDING_DESTROY){v===void 0&&(v=this.data);var g=this.key,p=this.type;this.loader.emit(d.FILE_COMPLETE,g,p,v),this.loader.emit(d.FILE_KEY_COMPLETE+p+"-"+g,g,p,v),this.loader.flagForRemoval(this),this.state=m.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});o.createObjectURL=function(v,g,p){if(typeof URL=="function")v.src=URL.createObjectURL(g);else{var x=new FileReader;x.onload=function(){v.removeAttribute("crossOrigin"),v.src="data:"+(g.type||p)+";base64,"+x.result.split(",")[1]},x.onerror=v.onerror,x.readAsDataURL(g)}},o.revokeObjectURL=function(v){typeof URL=="function"&&URL.revokeObjectURL(v.src)},r.exports=o}),76846:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={},e={install:function(u){for(var m in y)u[m]=y[m]},register:function(u,m){y[u]=m},destroy:function(){y={}}};r.exports=e}),30750:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return e.url?e.url.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)?e.url:u+e.url:!1};r.exports=y}),67285:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(12117),d=e(58403),l=e(6659),h=e(683),n=e(76846),a=e(72632),c=e(10850),o=e(91963),v=e(7599),g=e(33868),p=new u({Extends:l,initialize:function(T){l.call(this);var E=T.sys.game.config,M=T.sys.settings.loader;this.scene=T,this.systems=T.sys,this.cacheManager=T.sys.cache,this.textureManager=T.sys.textures,this.sceneManager=T.sys.game.scene,n.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(a(M,"baseURL",E.loaderBaseURL)),this.setPath(a(M,"path",E.loaderPath)),this.setPrefix(a(M,"prefix",E.loaderPrefix)),this.maxParallelDownloads=a(M,"maxParallelDownloads",E.loaderMaxParallelDownloads),this.xhr=g(a(M,"responseType",E.loaderResponseType),a(M,"async",E.loaderAsync),a(M,"user",E.loaderUser),a(M,"password",E.loaderPassword),a(M,"timeout",E.loaderTimeout),a(M,"withCredentials",E.loaderWithCredentials)),this.crossOrigin=a(M,"crossOrigin",E.loaderCrossOrigin),this.imageLoadType=a(M,"imageLoadType",E.loaderImageLoadType),this.localSchemes=a(M,"localScheme",E.loaderLocalScheme),this.totalToLoad=0,this.progress=0,this.list=new d,this.inflight=new d,this.queue=new d,this._deleteQueue=new d,this.totalFailed=0,this.totalComplete=0,this.state=m.LOADER_IDLE,this.multiKeyIndex=0,T.sys.events.once(v.BOOT,this.boot,this),T.sys.events.on(v.START,this.pluginStart,this)},boot:function(){this.systems.events.once(v.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(v.SHUTDOWN,this.shutdown,this)},setBaseURL:function(x){return x===void 0&&(x=""),x!==""&&x.substr(-1)!=="/"&&(x=x.concat("/")),this.baseURL=x,this},setPath:function(x){return x===void 0&&(x=""),x!==""&&x.substr(-1)!=="/"&&(x=x.concat("/")),this.path=x,this},setPrefix:function(x){return x===void 0&&(x=""),this.prefix=x,this},setCORS:function(x){return this.crossOrigin=x,this},addFile:function(x){Array.isArray(x)||(x=[x]);for(var T=0;T<x.length;T++){var E=x[T];this.keyExists(E)||(this.list.set(E),this.emit(h.ADD,E.key,E.type,this,E),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(x){var T=x.hasCacheConflict();return T||this.list.iterate(function(E){if(E.type===x.type&&E.key===x.key)return T=!0,!1}),!T&&this.isLoading()&&(this.inflight.iterate(function(E){if(E.type===x.type&&E.key===x.key)return T=!0,!1}),this.queue.iterate(function(E){if(E.type===x.type&&E.key===x.key)return T=!0,!1})),T},addPack:function(x,T){if(typeof T=="string"){var E=c(x,T);E&&(x={packKey:E})}var M=0,P=this.baseURL,w=this.path,R=this.prefix;for(var A in x)if(Object.prototype.hasOwnProperty.call(x,A)){var O=x[A],F=a(O,"baseURL",P),b=a(O,"path",w),D=a(O,"prefix",R),I=a(O,"files",null),B=a(O,"defaultType","void");if(Array.isArray(I)){this.setBaseURL(F),this.setPath(b),this.setPrefix(D);for(var z=0;z<I.length;z++){var Y=I[z],X=Y.hasOwnProperty("type")?Y.type:B;this[X]&&(this[X](Y),M++)}}}return this.setBaseURL(P),this.setPath(w),this.setPrefix(R),M>0},isLoading:function(){return this.state===m.LOADER_LOADING||this.state===m.LOADER_PROCESSING},isReady:function(){return this.state===m.LOADER_IDLE||this.state===m.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(h.START,this),this.list.size===0?this.loadComplete():(this.state=m.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(v.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(h.PROGRESS,this.progress)},update:function(){this.state===m.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(x){if((x.state===m.FILE_POPULATED||x.state===m.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(x),this.list.delete(x),x.crossOrigin||(x.crossOrigin=this.crossOrigin),x.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(x,T){this.inflight&&(this.inflight.delete(x),this.updateProgress(),T?(this.totalComplete++,this.queue.set(x),this.emit(h.FILE_LOAD,x),x.onProcess()):(this.totalFailed++,this._deleteQueue.set(x),this.emit(h.FILE_LOAD_ERROR,x),this.fileProcessComplete(x)))},fileProcessComplete:function(x){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(x.state===m.FILE_ERRORED?x.multiFile&&x.multiFile.onFileFailed(x):x.state===m.FILE_COMPLETE&&(x.multiFile?x.multiFile.isReadyToProcess()&&(x.multiFile.addToCache(),x.multiFile.pendingDestroy()):(x.addToCache(),x.pendingDestroy())),this.queue.delete(x),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(h.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=m.LOADER_COMPLETE,this.systems.events.off(v.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(h.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(x){this._deleteQueue.set(x)},saveJSON:function(x,T){return this.save(JSON.stringify(x),T)},save:function(x,T,E){T===void 0&&(T="file.json"),E===void 0&&(E="application/json");var M=new Blob([x],{type:E}),P=URL.createObjectURL(M),w=document.createElement("a");return w.download=T,w.textContent="Download "+T,w.href=P,w.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var x=this.systems.game.config,T=this.systems.settings.loader;this.setBaseURL(a(T,"baseURL",x.loaderBaseURL)),this.setPath(a(T,"path",x.loaderPath)),this.setPrefix(a(T,"prefix",x.loaderPrefix)),this.state=m.LOADER_IDLE},shutdown:function(){this.reset(),this.state=m.LOADER_SHUTDOWN,this.systems.events.off(v.UPDATE,this.update,this),this.systems.events.off(v.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=m.LOADER_DESTROYED,this.systems.events.off(v.UPDATE,this.update,this),this.systems.events.off(v.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});o.register("Loader",p,"load"),r.exports=p}),43531:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(98611),m=e(33868),d=function(l,h){var n=l===void 0?m():u({},l);if(h)for(var a in h)h[a]!==void 0&&(n[a]=h[a]);return n};r.exports=d}),45176:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(12117),d=e(683),l=new u({initialize:function(n,a,c,o){var v=[];o.forEach(function(p){p&&v.push(p)}),this.loader=n,this.type=a,this.key=c,this.multiKeyIndex=n.multiKeyIndex++,this.files=v,this.state=m.FILE_PENDING,this.complete=!1,this.pending=v.length,this.failed=0,this.config={},this.baseURL=n.baseURL,this.path=n.path,this.prefix=n.prefix;for(var g=0;g<v.length;g++)v[g].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(h){return this.files.push(h),h.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(h){var n=this.files.indexOf(h);n!==-1&&this.pending--},onFileFailed:function(h){var n=this.files.indexOf(h);n!==-1&&(this.failed++,console.error('File failed: %s "%s" (via %s "%s")',this.type,this.key,h.type,h.key))},pendingDestroy:function(){if(this.state!==m.FILE_PENDING_DESTROY){var h=this.key,n=this.type;this.loader.emit(d.FILE_COMPLETE,h,n),this.loader.emit(d.FILE_KEY_COMPLETE+n+"-"+h,h,n),this.loader.flagForRemoval(this);for(var a=0;a<this.files.length;a++)this.files[a].pendingDestroy();this.state=m.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.files=null,this.config=null}});r.exports=l}),88490:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(43531),m=function(d,l){var h=u(l,d.xhrSettings),n=new XMLHttpRequest;if(n.open("GET",d.src,h.async,h.user,h.password),n.responseType=d.xhrSettings.responseType,n.timeout=h.timeout,h.headers)for(var a in h.headers)n.setRequestHeader(a,h.headers[a]);return h.header&&h.headerValue&&n.setRequestHeader(h.header,h.headerValue),h.requestedWith&&n.setRequestHeader("X-Requested-With",h.requestedWith),h.overrideMimeType&&n.overrideMimeType(h.overrideMimeType),h.withCredentials&&(n.withCredentials=!0),n.onload=d.onLoad.bind(d,n),n.onerror=d.onError.bind(d,n),n.onprogress=d.onProgress.bind(d),n.send(),n};r.exports=m}),33868:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d,l,h){return e===void 0&&(e=""),u===void 0&&(u=!0),m===void 0&&(m=""),d===void 0&&(d=""),l===void 0&&(l=0),h===void 0&&(h=!1),{responseType:e,async:u,user:m,password:d,timeout:l,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:h}};r.exports=y}),12117:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19,FILE_PENDING_DESTROY:20};r.exports=y}),7398:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="addfile"}),52187:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="complete"}),36627:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="filecomplete"}),81925:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="filecomplete-"}),29774:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="loaderror"}),20943:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="load"}),74693:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="fileprogress"}),71176:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="postprocess"}),88984:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="progress"}),72753:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="start"}),683:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={ADD:e(7398),COMPLETE:e(52187),FILE_COMPLETE:e(36627),FILE_KEY_COMPLETE:e(81925),FILE_LOAD_ERROR:e(29774),FILE_LOAD:e(20943),FILE_PROGRESS:e(74693),POST_PROCESS:e(71176),PROGRESS:e(88984),START:e(72753)}}),46468:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(76846),d=e(70806),l=e(683),h=new u({Extends:d,initialize:function(a,c,o,v,g){d.call(this,a,c,o,v,g),this.type="animationJSON"},onProcess:function(){this.loader.once(l.POST_PROCESS,this.onLoadComplete,this),d.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});m.register("animation",function(n,a,c,o){if(Array.isArray(n))for(var v=0;v<n.length;v++)this.addFile(new h(this,n[v]));else this.addFile(new h(this,n,a,o,c));return this}),r.exports=h}),31648:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(76846),d=e(72632),l=e(42927),h=e(42911),n=e(70806),a=e(45176),c=new u({Extends:a,initialize:function(v,g,p,x,T,E){var M,P;if(h(g)){var w=g;g=d(w,"key"),M=new l(v,{key:g,url:d(w,"textureURL"),extension:d(w,"textureExtension","png"),normalMap:d(w,"normalMap"),xhrSettings:d(w,"textureXhrSettings")}),P=new n(v,{key:g,url:d(w,"atlasURL"),extension:d(w,"atlasExtension","json"),xhrSettings:d(w,"atlasXhrSettings")})}else M=new l(v,g,p,T),P=new n(v,g,x,E);M.linkFile?a.call(this,v,"atlasjson",g,[M,P,M.linkFile]):a.call(this,v,"atlasjson",g,[M,P])},addToCache:function(){if(this.isReadyToProcess()){var o=this.files[0],v=this.files[1],g=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(o.key,o.data,v.data,g),v.addToCache(),this.complete=!0}}});m.register("aseprite",function(o,v,g,p,x){var T;if(Array.isArray(o))for(var E=0;E<o.length;E++)T=new c(this,o[E]),this.addFile(T.files);else T=new c(this,o,v,g,p,x),this.addFile(T.files);return this}),r.exports=c}),73152:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(76846),d=e(72632),l=e(42927),h=e(42911),n=e(70806),a=e(45176),c=new u({Extends:a,initialize:function(v,g,p,x,T,E){var M,P;if(h(g)){var w=g;g=d(w,"key"),M=new l(v,{key:g,url:d(w,"textureURL"),extension:d(w,"textureExtension","png"),normalMap:d(w,"normalMap"),xhrSettings:d(w,"textureXhrSettings")}),P=new n(v,{key:g,url:d(w,"atlasURL"),extension:d(w,"atlasExtension","json"),xhrSettings:d(w,"atlasXhrSettings")})}else M=new l(v,g,p,T),P=new n(v,g,x,E);M.linkFile?a.call(this,v,"atlasjson",g,[M,P,M.linkFile]):a.call(this,v,"atlasjson",g,[M,P])},addToCache:function(){if(this.isReadyToProcess()){var o=this.files[0],v=this.files[1],g=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(o.key,o.data,v.data,g),this.complete=!0}}});m.register("atlas",function(o,v,g,p,x){var T;if(Array.isArray(o))for(var E=0;E<o.length;E++)T=new c(this,o[E]),this.addFile(T.files);else T=new c(this,o,v,g,p,x),this.addFile(T.files);return this}),r.exports=c}),24616:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(76846),d=e(72632),l=e(42927),h=e(42911),n=e(45176),a=e(15297),c=new u({Extends:n,initialize:function(v,g,p,x,T,E){var M,P;if(h(g)){var w=g;g=d(w,"key"),M=new l(v,{key:g,url:d(w,"textureURL"),extension:d(w,"textureExtension","png"),normalMap:d(w,"normalMap"),xhrSettings:d(w,"textureXhrSettings")}),P=new a(v,{key:g,url:d(w,"atlasURL"),extension:d(w,"atlasExtension","xml"),xhrSettings:d(w,"atlasXhrSettings")})}else M=new l(v,g,p,T),P=new a(v,g,x,E);M.linkFile?n.call(this,v,"atlasxml",g,[M,P,M.linkFile]):n.call(this,v,"atlasxml",g,[M,P])},addToCache:function(){if(this.isReadyToProcess()){var o=this.files[0],v=this.files[1],g=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(o.key,o.data,v.data,g),this.complete=!0}}});m.register("atlasXML",function(o,v,g,p,x){var T;if(Array.isArray(o))for(var E=0;E<o.length;E++)T=new c(this,o[E]),this.addFile(T.files);else T=new c(this,o,v,g,p,x),this.addFile(T.files);return this}),r.exports=c}),67448:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(12117),d=e(98035),l=e(76846),h=e(72632),n=e(30929),a=e(42911),c=new u({Extends:d,initialize:function(v,g,p,x,T){if(a(g)){var E=g;g=h(E,"key"),x=h(E,"xhrSettings"),T=h(E,"context",T)}var M={type:"audio",cache:v.cacheManager.audio,extension:p.type,responseType:"arraybuffer",key:g,url:p.url,xhrSettings:x,config:{context:T}};d.call(this,v,M)},onProcess:function(){this.state=m.FILE_PROCESSING;var o=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(v){o.data=v,o.onProcessComplete()},function(v){console.error("Error decoding audio: "+o.key+" - ",v?v.message:null),o.onProcessError()}),this.config.context=null}});c.create=function(o,v,g,p,x){var T=o.systems.game,E=T.config.audio,M=T.device.audio;a(v)&&(g=h(v,"url",[]),p=h(v,"config",{}));var P=c.getAudioURL(T,g);return P?M.webAudio&&!E.disableWebAudio?new c(o,v,P,x,T.sound.context):new n(o,v,P,p):(console.warn('No audio URLs for "%s" matched this device',v),null)},c.getAudioURL=function(o,v){Array.isArray(v)||(v=[v]);for(var g=0;g<v.length;g++){var p=h(v[g],"url",v[g]);if(p.indexOf("blob:")===0||p.indexOf("data:")===0)return{url:p,type:""};var x=p.match(/\.([a-zA-Z0-9]+)($|\?)/);if(x=h(v[g],"type",x?x[1]:"").toLowerCase(),o.device.audio[x])return{url:p,type:x}}return null},l.register("audio",function(o,v,g,p){var x=this.systems.game,T=x.config.audio,E=x.device.audio;if(T.noAudio||!E.webAudio&&!E.audioData)return this;var M;if(Array.isArray(o))for(var P=0;P<o.length;P++)M=c.create(this,o[P]),M&&this.addFile(M);else M=c.create(this,o,v,g,p),M&&this.addFile(M);return this}),r.exports=c}),66109:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(67448),m=e(56694),d=e(76846),l=e(72632),h=e(42911),n=e(70806),a=e(45176),c=new m({Extends:a,initialize:function(v,g,p,x,T,E,M){if(h(g)){var P=g;g=l(P,"key"),p=l(P,"jsonURL"),x=l(P,"audioURL"),T=l(P,"audioConfig"),E=l(P,"audioXhrSettings"),M=l(P,"jsonXhrSettings")}var w;if(!x)w=new n(v,g,p,M),a.call(this,v,"audiosprite",g,[w]),this.config.resourceLoad=!0,this.config.audioConfig=T,this.config.audioXhrSettings=E;else{var R=u.create(v,g,x,T,E);R&&(w=new n(v,g,p,M),a.call(this,v,"audiosprite",g,[R,w]),this.config.resourceLoad=!1)}},onFileComplete:function(o){var v=this.files.indexOf(o);if(v!==-1&&(this.pending--,this.config.resourceLoad&&o.type==="json"&&o.data.hasOwnProperty("resources"))){var g=o.data.resources,p=l(this.config,"audioConfig"),x=l(this.config,"audioXhrSettings"),T=u.create(this.loader,o.key,g,p,x);T&&(this.addToMultiFile(T),this.loader.addFile(T))}},addToCache:function(){if(this.isReadyToProcess()){var o=this.files[0],v=this.files[1];o.addToCache(),v.addToCache(),this.complete=!0}}});d.register("audioSprite",function(o,v,g,p,x,T){var E=this.systems.game,M=E.config.audio,P=E.device.audio;if(M&&M.noAudio||!P.webAudio&&!P.audioData)return this;var w;if(Array.isArray(o))for(var R=0;R<o.length;R++)w=new c(this,o[R]),w.files&&this.addFile(w.files);else w=new c(this,o,v,g,p,x,T),w.files&&this.addFile(w.files);return this})}),40612:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(12117),d=e(98035),l=e(76846),h=e(72632),n=e(42911),a=new u({Extends:d,initialize:function(o,v,g,p,x){var T="bin";if(n(v)){var E=v;v=h(E,"key"),g=h(E,"url"),p=h(E,"xhrSettings"),T=h(E,"extension",T),x=h(E,"dataType",x)}var M={type:"binary",cache:o.cacheManager.binary,extension:T,responseType:"arraybuffer",key:v,url:g,xhrSettings:p,config:{dataType:x}};d.call(this,o,M)},onProcess:function(){this.state=m.FILE_PROCESSING;var c=this.config.dataType;this.data=c?new c(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});l.register("binary",function(c,o,v,g){if(Array.isArray(c))for(var p=0;p<c.length;p++)this.addFile(new a(this,c[p]));else this.addFile(new a(this,c,o,g,v));return this}),r.exports=a}),54565:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(76846),d=e(72632),l=e(42927),h=e(42911),n=e(45176),a=e(31476),c=e(15297),o=new u({Extends:n,initialize:function(g,p,x,T,E,M){var P,w;if(h(p)){var R=p;p=d(R,"key"),P=new l(g,{key:p,url:d(R,"textureURL"),extension:d(R,"textureExtension","png"),normalMap:d(R,"normalMap"),xhrSettings:d(R,"textureXhrSettings")}),w=new c(g,{key:p,url:d(R,"fontDataURL"),extension:d(R,"fontDataExtension","xml"),xhrSettings:d(R,"fontDataXhrSettings")})}else P=new l(g,p,x,E),w=new c(g,p,T,M);P.linkFile?n.call(this,g,"bitmapfont",p,[P,w,P.linkFile]):n.call(this,g,"bitmapfont",p,[P,w])},addToCache:function(){if(this.isReadyToProcess()){var v=this.files[0],g=this.files[1];v.addToCache();var p=v.cache.get(v.key),x=a(g.data,v.cache.getFrame(v.key),0,0,p);this.loader.cacheManager.bitmapFont.add(v.key,{data:x,texture:v.key,frame:null}),this.complete=!0}}});m.register("bitmapFont",function(v,g,p,x,T){var E;if(Array.isArray(v))for(var M=0;M<v.length;M++)E=new o(this,v[M]),this.addFile(E.files);else E=new o(this,v,g,p,x,T),this.addFile(E.files);return this}),r.exports=o}),99898:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(12117),d=e(98035),l=e(76846),h=e(72632),n=e(42911),a=new u({Extends:d,initialize:function(o,v,g,p){var x="css";if(n(v)){var T=v;v=h(T,"key"),g=h(T,"url"),p=h(T,"xhrSettings"),x=h(T,"extension",x)}var E={type:"script",cache:!1,extension:x,responseType:"text",key:v,url:g,xhrSettings:p};d.call(this,o,E)},onProcess:function(){this.state=m.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});l.register("css",function(c,o,v){if(Array.isArray(c))for(var g=0;g<c.length;g++)this.addFile(new a(this,c[g]));else this.addFile(new a(this,c,o,v));return this}),r.exports=a}),47375:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(73152),m=e(40612),d=e(56694),l=e(76846),h=e(72632),n=e(42927),a=e(42911),c=e(70806),o=e(67409),v=e(30657),g=e(80802),p=e(45176),x=e(24904),T=new d({Extends:p,initialize:function(M,P,w,R){if(w.multiAtlasURL){var A=new c(M,{key:P,url:w.multiAtlasURL,xhrSettings:R,config:w});p.call(this,M,"texture",P,[A])}else{var O=w.textureURL.substr(w.textureURL.length-3);w.type||(w.type=O.toLowerCase()==="ktx"?"KTX":"PVR");var F=new m(M,{key:P,url:w.textureURL,extension:O,xhrSettings:R,config:w});if(w.atlasURL){var b=new c(M,{key:P,url:w.atlasURL,xhrSettings:R,config:w});p.call(this,M,"texture",P,[F,b])}else p.call(this,M,"texture",P,[F])}this.config=w},onFileComplete:function(E){var M=this.files.indexOf(E);if(M!==-1){if(this.pending--,!this.config.multiAtlasURL)return;if(E.type==="json"&&E.data.hasOwnProperty("textures")){var P=E.data.textures,w=this.config,R=this.loader,A=R.baseURL,O=R.path,F=R.prefix,b=h(w,"multiBaseURL",this.baseURL),D=h(w,"multiPath",this.path),I=h(w,"prefix",this.prefix),B=h(w,"textureXhrSettings");b&&R.setBaseURL(b),D&&R.setPath(D),I&&R.setPrefix(I);for(var z=0;z<P.length;z++){var Y=P[z].image,X="CMA"+this.multiKeyIndex+"_"+Y,H=new m(R,X,Y,B);if(this.addToMultiFile(H),R.addFile(H),P[z].normalMap){var N=new m(R,X,P[z].normalMap,B);N.type="normalMap",H.setLink(N),this.addToMultiFile(N),R.addFile(N)}}R.setBaseURL(A),R.setPath(O),R.setPrefix(F)}}},addToCache:function(){if(this.isReadyToProcess()){var E=this.config;if(E.multiAtlasURL)this.addMultiToCache();else{var M=this.loader.systems.renderer,P=this.loader.textureManager,w,R=this.files[0],A=this.files[1];if(E.type==="PVR"?w=x(R.data):E.type==="KTX"&&(w=o(R.data)),w&&M.supportsCompressedTexture(E.format,w.internalFormat)){w.format=M.getCompressedTextureName(E.format,w.internalFormat);var O=A&&A.data?A.data:null;P.addCompressedTexture(R.key,w,O)}}this.complete=!0}},addMultiToCache:function(){for(var E=this.config,M=this.files[0],P=[],w=[],R=[],A=this.loader.systems.renderer,O=this.loader.textureManager,F,b=1;b<this.files.length;b++){var D=this.files[b];if(D.type!=="normalMap")for(var I=D.key.indexOf("_"),B=D.key.substr(I+1),z=D.data,Y=0;Y<M.data.textures.length;Y++){var X=M.data.textures[Y];if(X.image===B){E.type==="PVR"?F=x(z):E.type==="KTX"&&(F=o(z)),F&&A.supportsCompressedTexture(E.format,F.internalFormat)&&(F.format=A.getCompressedTextureName(E.format,F.internalFormat),w.push(F),P.push(X),D.linkFile&&R.push(D.linkFile.data));break}}}R.length===0&&(R=void 0),O.addAtlasJSONArray(this.key,w,P,R),this.complete=!0}});l.register("texture",function(E,M,P){var w=this.systems.renderer,R=function(O,F,b,D){var I={format:null,type:null,textureURL:void 0,atlasURL:void 0,multiAtlasURL:void 0,multiPath:void 0,multiBaseURL:void 0};if(a(F)){var B=F;F=h(B,"key"),b=h(B,"url"),D=h(B,"xhrSettings")}var z=!1;for(var Y in b)if(w.supportsCompressedTexture(Y)){var X=b[Y];typeof X=="string"?I.textureURL=X:I=v(X,I),I.format=Y.toUpperCase(),z=!0;break}if(!z)console.warn("No supported compressed texture format or IMG fallback",F);else if(I.format==="IMG"){var H,N;I.multiAtlasURL?(N=new g(O,F,I.multiAtlasURL,I.multiPath,I.multiBaseURL,D),H=N.files):I.atlasURL?(N=new u(O,F,I.textureURL,I.atlasURL,D),H=N.files):H=new n(O,F,I.textureURL,D),O.addFile(H)}else{var U=new T(O,F,I,D);O.addFile(U.files)}};if(Array.isArray(E))for(var A=0;A<E.length;A++)R(this,E[A]);else R(this,E,M,P);return this}),r.exports=T}),46568:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(12117),d=e(98035),l=e(76846),h=e(72632),n=e(42911),a=e(31053),c=new u({Extends:d,initialize:function(v,g,p,x,T){var E="glsl";if(n(g)){var M=g;g=h(M,"key"),p=h(M,"url"),x=h(M,"shaderType","fragment"),T=h(M,"xhrSettings"),E=h(M,"extension",E)}else x===void 0&&(x="fragment");var P={type:"glsl",cache:v.cacheManager.shader,extension:E,responseType:"text",key:g,url:p,config:{shaderType:x},xhrSettings:T};d.call(this,v,P)},onProcess:function(){this.state=m.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var o=this.data.split(`
`),v=this.extractBlock(o,0);if(v)for(;v;){var g=this.getShaderName(v.header),p=this.getShaderType(v.header),x=this.getShaderUniforms(v.header),T=v.shader;if(this.cache.has(g)){var E=this.cache.get(g);p==="fragment"?E.fragmentSrc=T:E.vertexSrc=T,E.uniforms||(E.uniforms=x)}else p==="fragment"?this.cache.add(g,new a(g,T,"",x)):this.cache.add(g,new a(g,"",T,x));v=this.extractBlock(o,v.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new a(this.key,this.data)):this.cache.add(this.key,new a(this.key,"",this.data))},getShaderName:function(o){for(var v=0;v<o.length;v++){var g=o[v].trim();if(g.substring(0,5)==="name:")return g.substring(5).trim()}return this.key},getShaderType:function(o){for(var v=0;v<o.length;v++){var g=o[v].trim();if(g.substring(0,5)==="type:")return g.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(o){for(var v={},g=0;g<o.length;g++){var p=o[g].trim();if(p.substring(0,8)==="uniform."){var x=p.indexOf(":");if(x){var T=p.substring(8,x);try{v[T]=JSON.parse(p.substring(x+1))}catch{console.warn("Invalid uniform JSON: "+T)}}}}return v},extractBlock:function(o,v){for(var g=-1,p=-1,x=-1,T=!1,E=!1,M=[],P=[],w=v;w<o.length;w++){var R=o[w].trim();if(R==="---")if(g===-1)g=w,T=!0;else if(T)p=w,T=!1,E=!0;else{E=!1;break}else T?M.push(R):E&&(P.push(R),x=w)}return!T&&p!==-1?{header:M,shader:P.join(`
`),offset:x}:null}});l.register("glsl",function(o,v,g,p){if(Array.isArray(o))for(var x=0;x<o.length;x++)this.addFile(new c(this,o[x]));else this.addFile(new c(this,o,v,g,p));return this}),r.exports=c}),30929:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(683),d=e(98035),l=e(72632),h=e(30750),n=e(42911),a=new u({Extends:d,initialize:function(o,v,g,p){if(n(v)){var x=v;v=l(x,"key"),p=l(x,"config",p)}var T={type:"audio",cache:o.cacheManager.audio,extension:g.type,key:v,url:g.url,config:p};d.call(this,o,T),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var c=0;c<this.data.length;c++){var o=this.data[c];o.oncanplaythrough=null,o.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(c){var o=c.target;o.oncanplaythrough=null,o.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(m.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var c=this.config&&this.config.instances||1;this.filesTotal=c,this.filesLoaded=0,this.percentComplete=0;for(var o=0;o<c;o++){var v=new Audio;v.dataset||(v.dataset={}),v.dataset.name=this.key+("0"+o).slice(-2),v.dataset.used="false",this.locked?v.dataset.locked="true":(v.dataset.locked="false",v.preload="auto",v.oncanplaythrough=this.onProgress.bind(this),v.onerror=this.onError.bind(this)),this.data.push(v)}for(o=0;o<this.data.length;o++)v=this.data[o],v.src=h(this,this.loader.baseURL),this.locked||v.load();this.locked&&setTimeout(this.onLoad.bind(this))}});r.exports=a}),77459:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(12117),d=e(98035),l=e(76846),h=e(72632),n=e(42911),a=new u({Extends:d,initialize:function(o,v,g,p){var x="html";if(n(v)){var T=v;v=h(T,"key"),g=h(T,"url"),p=h(T,"xhrSettings"),x=h(T,"extension",x)}var E={type:"text",cache:o.cacheManager.html,extension:x,responseType:"text",key:v,url:g,xhrSettings:p};d.call(this,o,E)},onProcess:function(){this.state=m.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});l.register("html",function(c,o,v){if(Array.isArray(c))for(var g=0;g<c.length;g++)this.addFile(new a(this,c[g]));else this.addFile(new a(this,c,o,v));return this}),r.exports=a}),9755:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(12117),d=e(98035),l=e(76846),h=e(72632),n=e(42911),a=new u({Extends:d,initialize:function(o,v,g,p,x,T){p===void 0&&(p=512),x===void 0&&(x=512);var E="html";if(n(v)){var M=v;v=h(M,"key"),g=h(M,"url"),T=h(M,"xhrSettings"),E=h(M,"extension",E),p=h(M,"width",p),x=h(M,"height",x)}var P={type:"html",cache:o.textureManager,extension:E,responseType:"text",key:v,url:g,xhrSettings:T,config:{width:p,height:x}};d.call(this,o,P)},onProcess:function(){this.state=m.FILE_PROCESSING;var c=this.config.width,o=this.config.height,v=[];v.push('<svg width="'+c+'px" height="'+o+'px" viewBox="0 0 '+c+" "+o+'" xmlns="http://www.w3.org/2000/svg">'),v.push('<foreignObject width="100%" height="100%">'),v.push('<body xmlns="http://www.w3.org/1999/xhtml">'),v.push(this.xhrLoader.responseText),v.push("</body>"),v.push("</foreignObject>"),v.push("</svg>");var g=[v.join(`
`)],p=this;try{var x=new window.Blob(g,{type:"image/svg+xml;charset=utf-8"})}catch{p.state=m.FILE_ERRORED,p.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){d.revokeObjectURL(p.data),p.onProcessComplete()},this.data.onerror=function(){d.revokeObjectURL(p.data),p.onProcessError()},d.createObjectURL(this.data,x,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});l.register("htmlTexture",function(c,o,v,g,p){if(Array.isArray(c))for(var x=0;x<c.length;x++)this.addFile(new a(this,c[x]));else this.addFile(new a(this,c,o,v,g,p));return this}),r.exports=a}),42927:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(12117),d=e(98035),l=e(76846),h=e(72632),n=e(42911),a=e(30750),c=new u({Extends:d,initialize:function o(v,g,p,x,T){var E="png",M;if(n(g)){var P=g;g=h(P,"key"),p=h(P,"url"),M=h(P,"normalMap"),x=h(P,"xhrSettings"),E=h(P,"extension",E),T=h(P,"frameConfig")}Array.isArray(p)&&(M=p[1],p=p[0]);var w={type:"image",cache:v.textureManager,extension:E,responseType:"blob",key:g,url:p,xhrSettings:x,config:T};if(d.call(this,v,w),M){var R=new o(v,this.key,M,x,T);R.type="normalMap",this.setLink(R),v.addFile(R)}this.useImageElementLoad=v.imageLoadType==="HTMLImageElement",this.useImageElementLoad&&(this.load=this.loadImage,this.onProcess=this.onProcessImage)},onProcess:function(){this.state=m.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var o=this;this.data.onload=function(){d.revokeObjectURL(o.data),o.onProcessComplete()},this.data.onerror=function(){d.revokeObjectURL(o.data),o.onProcessError()},d.createObjectURL(this.data,this.xhrLoader.response,"image/png")},onProcessImage:function(){var o=this.state;this.state=m.FILE_PROCESSING,o===m.FILE_LOADED?this.onProcessComplete():this.onProcessError()},loadImage:function(){if(this.state=m.FILE_LOADING,this.src=a(this,this.loader.baseURL),this.src.indexOf("data:")===0)console.warn("Local data URIs are not supported: "+this.key);else{this.data=new Image,this.data.crossOrigin=this.crossOrigin;var o=this;this.data.onload=function(){o.state=m.FILE_LOADED,o.loader.nextFile(o,!0)},this.data.onerror=function(){o.loader.nextFile(o,!1)},this.data.src=this.src}},addToCache:function(){var o=this.linkFile;o?o.state>=m.FILE_COMPLETE&&(this.type==="normalMap"?this.cache.addImage(this.key,o.data,this.data):this.cache.addImage(this.key,this.data,o.data)):this.cache.addImage(this.key,this.data)}});l.register("image",function(o,v,g){if(Array.isArray(o))for(var p=0;p<o.length;p++)this.addFile(new c(this,o[p]));else this.addFile(new c(this,o,v,g));return this}),r.exports=c}),70806:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(12117),d=e(98035),l=e(76846),h=e(72632),n=e(10850),a=e(42911),c=new u({Extends:d,initialize:function(v,g,p,x,T){var E="json";if(a(g)){var M=g;g=h(M,"key"),p=h(M,"url"),x=h(M,"xhrSettings"),E=h(M,"extension",E),T=h(M,"dataKey",T)}var P={type:"json",cache:v.cacheManager.json,extension:E,responseType:"text",key:g,url:p,xhrSettings:x,config:T};d.call(this,v,P),a(p)&&(T?this.data=n(p,T):this.data=p,this.state=m.FILE_POPULATED)},onProcess:function(){if(this.state!==m.FILE_POPULATED){this.state=m.FILE_PROCESSING;try{var o=JSON.parse(this.xhrLoader.responseText)}catch(g){throw this.onProcessError(),g}var v=this.config;typeof v=="string"?this.data=n(o,v,o):this.data=o}this.onProcessComplete()}});l.register("json",function(o,v,g,p){if(Array.isArray(o))for(var x=0;x<o.length;x++)this.addFile(new c(this,o[x]));else this.addFile(new c(this,o,v,p,g));return this}),r.exports=c}),80802:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(76846),d=e(72632),l=e(42927),h=e(42911),n=e(70806),a=e(45176),c=new u({Extends:a,initialize:function(v,g,p,x,T,E,M){if(h(g)){var P=g;g=d(P,"key"),d(P,"url",!1)?p=d(P,"url"):p=d(P,"atlasURL"),E=d(P,"xhrSettings"),x=d(P,"path"),T=d(P,"baseURL"),M=d(P,"textureXhrSettings")}var w=new n(v,g,p,E);a.call(this,v,"multiatlas",g,[w]),this.config.path=x,this.config.baseURL=T,this.config.textureXhrSettings=M},onFileComplete:function(o){var v=this.files.indexOf(o);if(v!==-1&&(this.pending--,o.type==="json"&&o.data.hasOwnProperty("textures"))){var g=o.data.textures,p=this.config,x=this.loader,T=x.baseURL,E=x.path,M=x.prefix,P=d(p,"baseURL",this.baseURL),w=d(p,"path",this.path),R=d(p,"prefix",this.prefix),A=d(p,"textureXhrSettings");x.setBaseURL(P),x.setPath(w),x.setPrefix(R);for(var O=0;O<g.length;O++){var F=g[O].image,b="MA"+this.multiKeyIndex+"_"+F,D=new l(x,b,F,A);if(this.addToMultiFile(D),x.addFile(D),g[O].normalMap){var I=new l(x,b,g[O].normalMap,A);I.type="normalMap",D.setLink(I),this.addToMultiFile(I),x.addFile(I)}}x.setBaseURL(T),x.setPath(E),x.setPrefix(M)}},addToCache:function(){if(this.isReadyToProcess()){for(var o=this.files[0],v=[],g=[],p=[],x=1;x<this.files.length;x++){var T=this.files[x];if(T.type!=="normalMap")for(var E=T.key.indexOf("_"),M=T.key.substr(E+1),P=T.data,w=0;w<o.data.textures.length;w++){var R=o.data.textures[w];if(R.image===M){g.push(P),v.push(R),T.linkFile&&p.push(T.linkFile.data);break}}}p.length===0&&(p=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,g,v,p),this.complete=!0}}});m.register("multiatlas",function(o,v,g,p,x){var T;if(Array.isArray(o))for(var E=0;E<o.length;E++)T=new c(this,o[E]),this.addFile(T.files);else T=new c(this,o,v,g,p,x),this.addFile(T.files);return this}),r.exports=c}),39034:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(76846),d=e(72632),l=e(42911),h=e(45176),n=e(55188),a=new u({Extends:h,initialize:function(o,v,g,p){var x="js",T=[];if(l(v)){var E=v;v=d(E,"key"),g=d(E,"url"),p=d(E,"xhrSettings"),x=d(E,"extension",x)}Array.isArray(g)||(g=[g]);for(var M=0;M<g.length;M++){var P=new n(o,{key:v+"_"+M.toString(),url:g[M],extension:x,xhrSettings:p});P.onProcess=function(){this.onProcessComplete()},T.push(P)}h.call(this,o,"scripts",v,T)},addToCache:function(){if(this.isReadyToProcess()){for(var c=0;c<this.files.length;c++){var o=this.files[c];o.data=document.createElement("script"),o.data.language="javascript",o.data.type="text/javascript",o.data.defer=!1,o.data.text=o.xhrLoader.responseText,document.head.appendChild(o.data)}this.complete=!0}}});m.register("scripts",function(c,o,v){var g;if(Array.isArray(c))for(var p=0;p<c.length;p++)g=new a(this,c[p]),this.addFile(g.files);else g=new a(this,c,o,v),this.addFile(g.files);return this}),r.exports=a}),85527:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(76846),d=e(72632),l=e(42911),h=e(45176),n=e(27291),a=e(76799),c=e(86897),o=new u({Extends:h,initialize:function(g,p,x,T,E,M){var P,w,R=g.cacheManager.obj;if(l(p)){var A=p;p=d(A,"key"),P=new c(g,{key:p,type:"obj",cache:R,url:d(A,"url"),extension:d(A,"extension","obj"),xhrSettings:d(A,"xhrSettings"),config:{flipUV:d(A,"flipUV",E)}}),T=d(A,"matURL"),T&&(w=new c(g,{key:p,type:"mat",cache:R,url:T,extension:d(A,"matExtension","mat"),xhrSettings:d(A,"xhrSettings")}))}else P=new c(g,{key:p,url:x,type:"obj",cache:R,extension:"obj",xhrSettings:M,config:{flipUV:E}}),T&&(w=new c(g,{key:p,url:T,type:"mat",cache:R,extension:"mat",xhrSettings:M}));h.call(this,g,"obj",p,[P,w])},addToCache:function(){if(this.isReadyToProcess()){var v=this.files[0],g=this.files[1],p=n(v.data,v.config.flipUV);g&&(p.materials=a(g.data)),v.cache.add(v.key,p),this.complete=!0}}});m.register("obj",function(v,g,p,x,T){var E;if(Array.isArray(v))for(var M=0;M<v.length;M++)E=new o(this,v[M]),this.addFile(E.files);else E=new o(this,v,g,p,x,T),this.addFile(E.files);return this}),r.exports=o}),3616:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(12117),d=e(76846),l=e(70806),h=new u({Extends:l,initialize:function(a,c,o,v,g){l.call(this,a,c,o,v,g),this.type="packfile"},onProcess:function(){if(this.state!==m.FILE_POPULATED&&(this.state=m.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.data.hasOwnProperty("files")&&this.config){var n={};n[this.config]=this.data,this.data=n}this.loader.addPack(this.data,this.config),this.onProcessComplete()}});d.register("pack",function(n,a,c,o){if(Array.isArray(n))for(var v=0;v<n.length;v++)this.addFile(new h(this,n[v]));else this.addFile(new h(this,n,a,o,c));return this}),r.exports=h}),12217:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(12117),d=e(98035),l=e(76846),h=e(72632),n=e(42911),a=new u({Extends:d,initialize:function(o,v,g,p,x,T){var E="js";if(n(v)){var M=v;v=h(M,"key"),g=h(M,"url"),T=h(M,"xhrSettings"),E=h(M,"extension",E),p=h(M,"start"),x=h(M,"mapping")}var P={type:"plugin",cache:!1,extension:E,responseType:"text",key:v,url:g,xhrSettings:T,config:{start:p,mapping:x}};d.call(this,o,P),typeof g=="function"&&(this.data=g,this.state=m.FILE_POPULATED)},onProcess:function(){var c=this.loader.systems.plugins,o=this.config,v=h(o,"start",!1),g=h(o,"mapping",null);if(this.state===m.FILE_POPULATED)c.install(this.key,this.data,v,g);else{this.state=m.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var p=c.install(this.key,window[this.key],v,g);(v||g)&&(this.loader.systems[g]=p,this.loader.scene[g]=p)}this.onProcessComplete()}});l.register("plugin",function(c,o,v,g,p){if(Array.isArray(c))for(var x=0;x<c.length;x++)this.addFile(new a(this,c[x]));else this.addFile(new a(this,c,o,v,g,p));return this}),r.exports=a}),4474:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(12117),d=e(98035),l=e(76846),h=e(72632),n=e(42911),a=new u({Extends:d,initialize:function(o,v,g,p,x){var T="svg";if(n(v)){var E=v;v=h(E,"key"),g=h(E,"url"),p=h(E,"svgConfig",{}),x=h(E,"xhrSettings"),T=h(E,"extension",T)}var M={type:"svg",cache:o.textureManager,extension:T,responseType:"text",key:v,url:g,xhrSettings:x,config:{width:h(p,"width"),height:h(p,"height"),scale:h(p,"scale")}};d.call(this,o,M)},onProcess:function(){this.state=m.FILE_PROCESSING;var c=this.xhrLoader.responseText,o=[c],v=this.config.width,g=this.config.height,p=this.config.scale;t:if(v&&g||p){var x=null,T=new DOMParser;x=T.parseFromString(c,"text/xml");var E=x.getElementsByTagName("svg")[0],M=E.hasAttribute("viewBox"),P=parseFloat(E.getAttribute("width")),w=parseFloat(E.getAttribute("height"));if(!M&&P&&w)E.setAttribute("viewBox","0  0 "+P+" "+w);else if(M&&!P&&!w){var R=E.getAttribute("viewBox").split(/\s+|,/);P=R[2],w=R[3]}if(p)if(P&&w)v=P*p,g=w*p;else break t;E.setAttribute("width",v.toString()+"px"),E.setAttribute("height",g.toString()+"px"),o=[new XMLSerializer().serializeToString(E)]}try{var A=new window.Blob(o,{type:"image/svg+xml;charset=utf-8"})}catch{this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var O=this,F=!1;this.data.onload=function(){F||d.revokeObjectURL(O.data),O.onProcessComplete()},this.data.onerror=function(){F?O.onProcessError():(F=!0,d.revokeObjectURL(O.data),O.data.src="data:image/svg+xml,"+encodeURIComponent(o.join("")))},d.createObjectURL(this.data,A,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});l.register("svg",function(c,o,v,g){if(Array.isArray(c))for(var p=0;p<c.length;p++)this.addFile(new a(this,c[p]));else this.addFile(new a(this,c,o,v,g));return this}),r.exports=a}),95171:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(12117),d=e(98035),l=e(76846),h=e(72632),n=e(42911),a=new u({Extends:d,initialize:function(o,v,g,p){var x="js";if(n(v)){var T=v;v=h(T,"key"),g=h(T,"url"),p=h(T,"xhrSettings"),x=h(T,"extension",x)}var E={type:"text",extension:x,responseType:"text",key:v,url:g,xhrSettings:p};d.call(this,o,E)},onProcess:function(){this.state=m.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var c=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),o=eval;this.loader.sceneManager.add(this.key,o(c)),this.complete=!0}});l.register("sceneFile",function(c,o,v){if(Array.isArray(c))for(var g=0;g<c.length;g++)this.addFile(new a(this,c[g]));else this.addFile(new a(this,c,o,v));return this}),r.exports=a}),82458:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(12117),d=e(98035),l=e(76846),h=e(72632),n=e(42911),a=new u({Extends:d,initialize:function(o,v,g,p,x,T){var E="js";if(n(v)){var M=v;v=h(M,"key"),g=h(M,"url"),T=h(M,"xhrSettings"),E=h(M,"extension",E),p=h(M,"systemKey"),x=h(M,"sceneKey")}var P={type:"scenePlugin",cache:!1,extension:E,responseType:"text",key:v,url:g,xhrSettings:T,config:{systemKey:p,sceneKey:x}};d.call(this,o,P),typeof g=="function"&&(this.data=g,this.state=m.FILE_POPULATED)},onProcess:function(){var c=this.loader.systems.plugins,o=this.config,v=this.key,g=h(o,"systemKey",v),p=h(o,"sceneKey",v);this.state===m.FILE_POPULATED?c.installScenePlugin(g,this.data,p,this.loader.scene,!0):(this.state=m.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),c.installScenePlugin(g,window[this.key],p,this.loader.scene,!0)),this.onProcessComplete()}});l.register("scenePlugin",function(c,o,v,g,p){if(Array.isArray(c))for(var x=0;x<c.length;x++)this.addFile(new a(this,c[x]));else this.addFile(new a(this,c,o,v,g,p));return this}),r.exports=a}),55188:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(12117),d=e(98035),l=e(76846),h=e(72632),n=e(42911),a=new u({Extends:d,initialize:function(o,v,g,p,x){var T="js";if(n(v)){var E=v;v=h(E,"key"),g=h(E,"url"),p=h(E,"type","script"),x=h(E,"xhrSettings"),T=h(E,"extension",T)}else p===void 0&&(p="script");var M={type:p,cache:!1,extension:T,responseType:"text",key:v,url:g,xhrSettings:x};d.call(this,o,M)},onProcess:function(){this.state=m.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});l.register("script",function(c,o,v,g){if(Array.isArray(c))for(var p=0;p<c.length;p++)this.addFile(new a(this,c[p]));else this.addFile(new a(this,c,o,v,g));return this}),r.exports=a}),33536:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(12117),d=e(76846),l=e(42927),h=new u({Extends:l,initialize:function(a,c,o,v,g){l.call(this,a,c,o,g,v),this.type="spritesheet"},addToCache:function(){var n=this.linkFile;n?n.state>=m.FILE_COMPLETE&&(this.type==="normalMap"?this.cache.addSpriteSheet(this.key,n.data,this.config,this.data):this.cache.addSpriteSheet(this.key,this.data,this.config,n.data)):this.cache.addSpriteSheet(this.key,this.data,this.config)}});d.register("spritesheet",function(n,a,c,o){if(Array.isArray(n))for(var v=0;v<n.length;v++)this.addFile(new h(this,n[v]));else this.addFile(new h(this,n,a,c,o));return this}),r.exports=h}),86897:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(12117),d=e(98035),l=e(76846),h=e(72632),n=e(42911),a=new u({Extends:d,initialize:function(o,v,g,p){var x="text",T="txt",E=o.cacheManager.text;if(n(v)){var M=v;v=h(M,"key"),g=h(M,"url"),p=h(M,"xhrSettings"),T=h(M,"extension",T),x=h(M,"type",x),E=h(M,"cache",E)}var P={type:x,cache:E,extension:T,responseType:"text",key:v,url:g,xhrSettings:p};d.call(this,o,P)},onProcess:function(){this.state=m.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});l.register("text",function(c,o,v){if(Array.isArray(c))for(var g=0;g<c.length;g++)this.addFile(new a(this,c[g]));else this.addFile(new a(this,c,o,v));return this}),r.exports=a}),58673:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(12117),d=e(98035),l=e(76846),h=e(72632),n=e(42911),a=e(93560),c=new u({Extends:d,initialize:function(v,g,p,x){var T="csv";if(n(g)){var E=g;g=h(E,"key"),p=h(E,"url"),x=h(E,"xhrSettings"),T=h(E,"extension",T)}var M={type:"tilemapCSV",cache:v.cacheManager.tilemap,extension:T,responseType:"text",key:g,url:p,xhrSettings:x};d.call(this,v,M),this.tilemapFormat=a.CSV},onProcess:function(){this.state=m.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var o={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,o)}});l.register("tilemapCSV",function(o,v,g){if(Array.isArray(o))for(var p=0;p<o.length;p++)this.addFile(new c(this,o[p]));else this.addFile(new c(this,o,v,g));return this}),r.exports=c}),98896:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(76846),d=e(70806),l=e(93560),h=new u({Extends:d,initialize:function(a,c,o,v){d.call(this,a,c,o,v),this.type="tilemapJSON",this.cache=a.cacheManager.tilemap},addToCache:function(){var n={format:l.WELTMEISTER,data:this.data};this.cache.add(this.key,n)}});m.register("tilemapImpact",function(n,a,c){if(Array.isArray(n))for(var o=0;o<n.length;o++)this.addFile(new h(this,n[o]));else this.addFile(new h(this,n,a,c));return this}),r.exports=h}),50563:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(76846),d=e(70806),l=e(93560),h=new u({Extends:d,initialize:function(a,c,o,v){d.call(this,a,c,o,v),this.type="tilemapJSON",this.cache=a.cacheManager.tilemap},addToCache:function(){var n={format:l.TILED_JSON,data:this.data};this.cache.add(this.key,n)}});m.register("tilemapTiledJSON",function(n,a,c){if(Array.isArray(n))for(var o=0;o<n.length;o++)this.addFile(new h(this,n[o]));else this.addFile(new h(this,n,a,c));return this}),r.exports=h}),82857:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(76846),d=e(72632),l=e(42927),h=e(42911),n=e(45176),a=e(86897),c=new u({Extends:n,initialize:function(v,g,p,x,T,E){var M,P;if(h(g)){var w=g;g=d(w,"key"),M=new l(v,{key:g,url:d(w,"textureURL"),extension:d(w,"textureExtension","png"),normalMap:d(w,"normalMap"),xhrSettings:d(w,"textureXhrSettings")}),P=new a(v,{key:g,url:d(w,"atlasURL"),extension:d(w,"atlasExtension","txt"),xhrSettings:d(w,"atlasXhrSettings")})}else M=new l(v,g,p,T),P=new a(v,g,x,E);M.linkFile?n.call(this,v,"unityatlas",g,[M,P,M.linkFile]):n.call(this,v,"unityatlas",g,[M,P])},addToCache:function(){if(this.isReadyToProcess()){var o=this.files[0],v=this.files[1],g=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(o.key,o.data,v.data,g),this.complete=!0}}});m.register("unityAtlas",function(o,v,g,p,x){var T;if(Array.isArray(o))for(var E=0;E<o.length;E++)T=new c(this,o[E]),this.addFile(T.files);else T=new c(this,o,v,g,p,x),this.addFile(T.files);return this}),r.exports=c}),22833:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(12117),d=e(98035),l=e(76846),h=e(30750),n=e(72632),a=e(42911),c=new u({Extends:d,initialize:function(v,g,p,x){if(x===void 0&&(x=!1),a(g)){var T=g;g=n(T,"key"),p=n(T,"url",[]),x=n(T,"noAudio",!1)}var E=v.systems.game.device.video.getVideoURL(p);E||console.warn("VideoFile: No supported format for "+g);var M={type:"video",cache:v.cacheManager.video,extension:E.type,key:g,url:E.url,config:{noAudio:x}};d.call(this,v,M)},onProcess:function(){this.data={url:this.src,noAudio:this.config.noAudio,crossOrigin:this.crossOrigin},this.onProcessComplete()},load:function(){this.src=h(this,this.loader.baseURL),this.state=m.FILE_LOADED,this.loader.nextFile(this,!0)}});l.register("video",function(o,v,g){if(Array.isArray(o))for(var p=0;p<o.length;p++)this.addFile(new c(this,o[p]));else this.addFile(new c(this,o,v,g));return this}),r.exports=c}),15297:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(12117),d=e(98035),l=e(76846),h=e(72632),n=e(42911),a=e(89200),c=new u({Extends:d,initialize:function(v,g,p,x){var T="xml";if(n(g)){var E=g;g=h(E,"key"),p=h(E,"url"),x=h(E,"xhrSettings"),T=h(E,"extension",T)}var M={type:"xml",cache:v.cacheManager.xml,extension:T,responseType:"text",key:g,url:p,xhrSettings:x};d.call(this,v,M)},onProcess:function(){this.state=m.FILE_PROCESSING,this.data=a(this.xhrLoader.responseText),this.data?this.onProcessComplete():this.onProcessError()}});l.register("xml",function(o,v,g){if(Array.isArray(o))for(var p=0;p<o.length;p++)this.addFile(new c(this,o[p]));else this.addFile(new c(this,o,v,g));return this}),r.exports=c}),34034:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={AnimationJSONFile:e(46468),AsepriteFile:e(31648),AtlasJSONFile:e(73152),AtlasXMLFile:e(24616),AudioFile:e(67448),AudioSpriteFile:e(66109),BinaryFile:e(40612),BitmapFontFile:e(54565),CompressedTextureFile:e(47375),CSSFile:e(99898),GLSLFile:e(46568),HTML5AudioFile:e(30929),HTMLFile:e(77459),HTMLTextureFile:e(9755),ImageFile:e(42927),JSONFile:e(70806),MultiAtlasFile:e(80802),MultiScriptFile:e(39034),OBJFile:e(85527),PackFile:e(3616),PluginFile:e(12217),SceneFile:e(95171),ScenePluginFile:e(82458),ScriptFile:e(55188),SpriteSheetFile:e(33536),SVGFile:e(4474),TextFile:e(86897),TilemapCSVFile:e(58673),TilemapImpactFile:e(98896),TilemapJSONFile:e(50563),UnityAtlasFile:e(82857),VideoFile:e(22833),XMLFile:e(15297)}}),95695:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(12117),m=e(98611),d={Events:e(683),FileTypes:e(34034),File:e(98035),FileTypesManager:e(76846),GetURL:e(30750),LoaderPlugin:e(67285),MergeXHRSettings:e(43531),MultiFile:e(45176),XHRLoader:e(88490),XHRSettings:e(33868)};d=m(!1,d,u),r.exports=d}),26042:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){for(var u=0,m=0;m<e.length;m++)u+=+e[m];return u/e.length};r.exports=y}),22824:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(8034),m=function(d,l){return u(d)/u(l)/u(d-l)};r.exports=m}),17489:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return Math.floor(Math.random()*(u-e+1)+e)};r.exports=y}),14976:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d,l){var h=(d-u)*.5,n=(l-m)*.5,a=e*e,c=e*a;return(2*m-2*d+h+n)*c+(-3*m+3*d-2*h-n)*a+h*e+m};r.exports=y}),89129:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){u===void 0&&(u=0),m===void 0&&(m=10);var d=Math.pow(m,-u);return Math.ceil(e*d)/d};r.exports=y}),82897:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){return Math.max(u,Math.min(m,e))};r.exports=y}),75606:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(83392),m=function(d){return d*u.DEG_TO_RAD};r.exports=m}),767:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return Math.abs(e-u)};r.exports=y}),9849:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(82897),m=e(56694),d=e(16650),l=e(72283),h=new d,n=new m({initialize:function a(c,o,v,g){c===void 0&&(c=0),o===void 0&&(o=0),v===void 0&&(v=0),g===void 0&&(g=a.DefaultOrder),this._x=c,this._y=o,this._z=v,this._order=g,this.onChangeCallback=l},x:{get:function(){return this._x},set:function(a){this._x=a,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(a){this._y=a,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(a){this._z=a,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(a){this._order=a,this.onChangeCallback(this)}},set:function(a,c,o,v){return v===void 0&&(v=this._order),this._x=a,this._y=c,this._z=o,this._order=v,this.onChangeCallback(this),this},copy:function(a){return this.set(a.x,a.y,a.z,a.order)},setFromQuaternion:function(a,c,o){return c===void 0&&(c=this._order),o===void 0&&(o=!1),h.fromQuat(a),this.setFromRotationMatrix(h,c,o)},setFromRotationMatrix:function(a,c,o){c===void 0&&(c=this._order),o===void 0&&(o=!1);var v=a.val,g=v[0],p=v[4],x=v[8],T=v[1],E=v[5],M=v[9],P=v[2],w=v[6],R=v[10],A=0,O=0,F=0,b=.99999;switch(c){case"XYZ":{O=Math.asin(u(x,-1,1)),Math.abs(x)<b?(A=Math.atan2(-M,R),F=Math.atan2(-p,g)):A=Math.atan2(w,E);break}case"YXZ":{A=Math.asin(-u(M,-1,1)),Math.abs(M)<b?(O=Math.atan2(x,R),F=Math.atan2(T,E)):O=Math.atan2(-P,g);break}case"ZXY":{A=Math.asin(u(w,-1,1)),Math.abs(w)<b?(O=Math.atan2(-P,R),F=Math.atan2(-p,E)):F=Math.atan2(T,g);break}case"ZYX":{O=Math.asin(-u(P,-1,1)),Math.abs(P)<b?(A=Math.atan2(w,R),F=Math.atan2(T,g)):F=Math.atan2(-p,E);break}case"YZX":{F=Math.asin(u(T,-1,1)),Math.abs(T)<b?(A=Math.atan2(-M,E),O=Math.atan2(-P,g)):O=Math.atan2(x,R);break}case"XZY":{F=Math.asin(-u(p,-1,1)),Math.abs(p)<b?(A=Math.atan2(w,E),O=Math.atan2(x,g)):A=Math.atan2(-M,R);break}}return this._x=A,this._y=O,this._z=F,this._order=c,o&&this.onChangeCallback(this),this}});n.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],n.DefaultOrder="XYZ",r.exports=n}),8034:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){if(e===0)return 1;for(var u=e;--e;)u*=e;return u};r.exports=y}),61616:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return Math.random()*(u-e)+e};r.exports=y}),60679:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){u===void 0&&(u=0),m===void 0&&(m=10);var d=Math.pow(m,-u);return Math.floor(e*d)/d};r.exports=y}),91806:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(82897),m=function(d,l,h){return d=u(d,0,1),(h-l)*d+l};r.exports=m}),79366:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return e/u/1e3};r.exports=y}),43776:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return e==parseFloat(e)?!(e%2):void 0};r.exports=y}),58442:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return e===parseFloat(e)?!(e%2):void 0};r.exports=y}),42798:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){return(u-e)*m+e};r.exports=y}),61072:(r=>{/**
 * @author       Greg McLean <GregDevProjects>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){return m===void 0&&(m=0),e.clone().lerp(u,m)};r.exports=y}),5341:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=new u({initialize:function(l){this.val=new Float32Array(9),l?this.copy(l):this.identity()},clone:function(){return new m(this)},set:function(d){return this.copy(d)},copy:function(d){var l=this.val,h=d.val;return l[0]=h[0],l[1]=h[1],l[2]=h[2],l[3]=h[3],l[4]=h[4],l[5]=h[5],l[6]=h[6],l[7]=h[7],l[8]=h[8],this},fromMat4:function(d){var l=d.val,h=this.val;return h[0]=l[0],h[1]=l[1],h[2]=l[2],h[3]=l[4],h[4]=l[5],h[5]=l[6],h[6]=l[8],h[7]=l[9],h[8]=l[10],this},fromArray:function(d){var l=this.val;return l[0]=d[0],l[1]=d[1],l[2]=d[2],l[3]=d[3],l[4]=d[4],l[5]=d[5],l[6]=d[6],l[7]=d[7],l[8]=d[8],this},identity:function(){var d=this.val;return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=1,d[5]=0,d[6]=0,d[7]=0,d[8]=1,this},transpose:function(){var d=this.val,l=d[1],h=d[2],n=d[5];return d[1]=d[3],d[2]=d[6],d[3]=l,d[5]=d[7],d[6]=h,d[7]=n,this},invert:function(){var d=this.val,l=d[0],h=d[1],n=d[2],a=d[3],c=d[4],o=d[5],v=d[6],g=d[7],p=d[8],x=p*c-o*g,T=-p*a+o*v,E=g*a-c*v,M=l*x+h*T+n*E;return M?(M=1/M,d[0]=x*M,d[1]=(-p*h+n*g)*M,d[2]=(o*h-n*c)*M,d[3]=T*M,d[4]=(p*l-n*v)*M,d[5]=(-o*l+n*a)*M,d[6]=E*M,d[7]=(-g*l+h*v)*M,d[8]=(c*l-h*a)*M,this):null},adjoint:function(){var d=this.val,l=d[0],h=d[1],n=d[2],a=d[3],c=d[4],o=d[5],v=d[6],g=d[7],p=d[8];return d[0]=c*p-o*g,d[1]=n*g-h*p,d[2]=h*o-n*c,d[3]=o*v-a*p,d[4]=l*p-n*v,d[5]=n*a-l*o,d[6]=a*g-c*v,d[7]=h*v-l*g,d[8]=l*c-h*a,this},determinant:function(){var d=this.val,l=d[0],h=d[1],n=d[2],a=d[3],c=d[4],o=d[5],v=d[6],g=d[7],p=d[8];return l*(p*c-o*g)+h*(-p*a+o*v)+n*(g*a-c*v)},multiply:function(d){var l=this.val,h=l[0],n=l[1],a=l[2],c=l[3],o=l[4],v=l[5],g=l[6],p=l[7],x=l[8],T=d.val,E=T[0],M=T[1],P=T[2],w=T[3],R=T[4],A=T[5],O=T[6],F=T[7],b=T[8];return l[0]=E*h+M*c+P*g,l[1]=E*n+M*o+P*p,l[2]=E*a+M*v+P*x,l[3]=w*h+R*c+A*g,l[4]=w*n+R*o+A*p,l[5]=w*a+R*v+A*x,l[6]=O*h+F*c+b*g,l[7]=O*n+F*o+b*p,l[8]=O*a+F*v+b*x,this},translate:function(d){var l=this.val,h=d.x,n=d.y;return l[6]=h*l[0]+n*l[3]+l[6],l[7]=h*l[1]+n*l[4]+l[7],l[8]=h*l[2]+n*l[5]+l[8],this},rotate:function(d){var l=this.val,h=l[0],n=l[1],a=l[2],c=l[3],o=l[4],v=l[5],g=Math.sin(d),p=Math.cos(d);return l[0]=p*h+g*c,l[1]=p*n+g*o,l[2]=p*a+g*v,l[3]=p*c-g*h,l[4]=p*o-g*n,l[5]=p*v-g*a,this},scale:function(d){var l=this.val,h=d.x,n=d.y;return l[0]=h*l[0],l[1]=h*l[1],l[2]=h*l[2],l[3]=n*l[3],l[4]=n*l[4],l[5]=n*l[5],this},fromQuat:function(d){var l=d.x,h=d.y,n=d.z,a=d.w,c=l+l,o=h+h,v=n+n,g=l*c,p=l*o,x=l*v,T=h*o,E=h*v,M=n*v,P=a*c,w=a*o,R=a*v,A=this.val;return A[0]=1-(T+M),A[3]=p+R,A[6]=x-w,A[1]=p-R,A[4]=1-(g+M),A[7]=E+P,A[2]=x+w,A[5]=E-P,A[8]=1-(g+T),this},normalFromMat4:function(d){var l=d.val,h=this.val,n=l[0],a=l[1],c=l[2],o=l[3],v=l[4],g=l[5],p=l[6],x=l[7],T=l[8],E=l[9],M=l[10],P=l[11],w=l[12],R=l[13],A=l[14],O=l[15],F=n*g-a*v,b=n*p-c*v,D=n*x-o*v,I=a*p-c*g,B=a*x-o*g,z=c*x-o*p,Y=T*R-E*w,X=T*A-M*w,H=T*O-P*w,N=E*A-M*R,U=E*O-P*R,L=M*O-P*A,G=F*L-b*U+D*N+I*H-B*X+z*Y;return G?(G=1/G,h[0]=(g*L-p*U+x*N)*G,h[1]=(p*H-v*L-x*X)*G,h[2]=(v*U-g*H+x*Y)*G,h[3]=(c*U-a*L-o*N)*G,h[4]=(n*L-c*H+o*X)*G,h[5]=(a*H-n*U-o*Y)*G,h[6]=(R*z-A*B+O*I)*G,h[7]=(A*D-w*z-O*b)*G,h[8]=(w*B-R*D+O*F)*G,this):null}});r.exports=m}),16650:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(70015),d=1e-6,l=new u({initialize:function(g){this.val=new Float32Array(16),g?this.copy(g):this.identity()},clone:function(){return new l(this)},set:function(v){return this.copy(v)},setValues:function(v,g,p,x,T,E,M,P,w,R,A,O,F,b,D,I){var B=this.val;return B[0]=v,B[1]=g,B[2]=p,B[3]=x,B[4]=T,B[5]=E,B[6]=M,B[7]=P,B[8]=w,B[9]=R,B[10]=A,B[11]=O,B[12]=F,B[13]=b,B[14]=D,B[15]=I,this},copy:function(v){var g=v.val;return this.setValues(g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],g[8],g[9],g[10],g[11],g[12],g[13],g[14],g[15])},fromArray:function(v){return this.setValues(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],v[8],v[9],v[10],v[11],v[12],v[13],v[14],v[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(v,g,p){var x=h.fromQuat(p),T=x.val,E=g.x,M=g.y,P=g.z;return this.setValues(T[0]*E,T[1]*E,T[2]*E,0,T[4]*M,T[5]*M,T[6]*M,0,T[8]*P,T[9]*P,T[10]*P,0,v.x,v.y,v.z,1)},xyz:function(v,g,p){this.identity();var x=this.val;return x[12]=v,x[13]=g,x[14]=p,this},scaling:function(v,g,p){this.zero();var x=this.val;return x[0]=v,x[5]=g,x[10]=p,x[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var v=this.val,g=v[1],p=v[2],x=v[3],T=v[6],E=v[7],M=v[11];return v[1]=v[4],v[2]=v[8],v[3]=v[12],v[4]=g,v[6]=v[9],v[7]=v[13],v[8]=p,v[9]=T,v[11]=v[14],v[12]=x,v[13]=E,v[14]=M,this},getInverse:function(v){return this.copy(v),this.invert()},invert:function(){var v=this.val,g=v[0],p=v[1],x=v[2],T=v[3],E=v[4],M=v[5],P=v[6],w=v[7],R=v[8],A=v[9],O=v[10],F=v[11],b=v[12],D=v[13],I=v[14],B=v[15],z=g*M-p*E,Y=g*P-x*E,X=g*w-T*E,H=p*P-x*M,N=p*w-T*M,U=x*w-T*P,L=R*D-A*b,G=R*I-O*b,V=R*B-F*b,k=A*I-O*D,W=A*B-F*D,$=O*B-F*I,K=z*$-Y*W+X*k+H*V-N*G+U*L;return K?(K=1/K,this.setValues((M*$-P*W+w*k)*K,(x*W-p*$-T*k)*K,(D*U-I*N+B*H)*K,(O*N-A*U-F*H)*K,(P*V-E*$-w*G)*K,(g*$-x*V+T*G)*K,(I*X-b*U-B*Y)*K,(R*U-O*X+F*Y)*K,(E*W-M*V+w*L)*K,(p*V-g*W-T*L)*K,(b*N-D*X+B*z)*K,(A*X-R*N-F*z)*K,(M*G-E*k-P*L)*K,(g*k-p*G+x*L)*K,(D*Y-b*H-I*z)*K,(R*H-A*Y+O*z)*K)):this},adjoint:function(){var v=this.val,g=v[0],p=v[1],x=v[2],T=v[3],E=v[4],M=v[5],P=v[6],w=v[7],R=v[8],A=v[9],O=v[10],F=v[11],b=v[12],D=v[13],I=v[14],B=v[15];return this.setValues(M*(O*B-F*I)-A*(P*B-w*I)+D*(P*F-w*O),-(p*(O*B-F*I)-A*(x*B-T*I)+D*(x*F-T*O)),p*(P*B-w*I)-M*(x*B-T*I)+D*(x*w-T*P),-(p*(P*F-w*O)-M*(x*F-T*O)+A*(x*w-T*P)),-(E*(O*B-F*I)-R*(P*B-w*I)+b*(P*F-w*O)),g*(O*B-F*I)-R*(x*B-T*I)+b*(x*F-T*O),-(g*(P*B-w*I)-E*(x*B-T*I)+b*(x*w-T*P)),g*(P*F-w*O)-E*(x*F-T*O)+R*(x*w-T*P),E*(A*B-F*D)-R*(M*B-w*D)+b*(M*F-w*A),-(g*(A*B-F*D)-R*(p*B-T*D)+b*(p*F-T*A)),g*(M*B-w*D)-E*(p*B-T*D)+b*(p*w-T*M),-(g*(M*F-w*A)-E*(p*F-T*A)+R*(p*w-T*M)),-(E*(A*I-O*D)-R*(M*I-P*D)+b*(M*O-P*A)),g*(A*I-O*D)-R*(p*I-x*D)+b*(p*O-x*A),-(g*(M*I-P*D)-E*(p*I-x*D)+b*(p*P-x*M)),g*(M*O-P*A)-E*(p*O-x*A)+R*(p*P-x*M))},determinant:function(){var v=this.val,g=v[0],p=v[1],x=v[2],T=v[3],E=v[4],M=v[5],P=v[6],w=v[7],R=v[8],A=v[9],O=v[10],F=v[11],b=v[12],D=v[13],I=v[14],B=v[15],z=g*M-p*E,Y=g*P-x*E,X=g*w-T*E,H=p*P-x*M,N=p*w-T*M,U=x*w-T*P,L=R*D-A*b,G=R*I-O*b,V=R*B-F*b,k=A*I-O*D,W=A*B-F*D,$=O*B-F*I;return z*$-Y*W+X*k+H*V-N*G+U*L},multiply:function(v){var g=this.val,p=g[0],x=g[1],T=g[2],E=g[3],M=g[4],P=g[5],w=g[6],R=g[7],A=g[8],O=g[9],F=g[10],b=g[11],D=g[12],I=g[13],B=g[14],z=g[15],Y=v.val,X=Y[0],H=Y[1],N=Y[2],U=Y[3];return g[0]=X*p+H*M+N*A+U*D,g[1]=X*x+H*P+N*O+U*I,g[2]=X*T+H*w+N*F+U*B,g[3]=X*E+H*R+N*b+U*z,X=Y[4],H=Y[5],N=Y[6],U=Y[7],g[4]=X*p+H*M+N*A+U*D,g[5]=X*x+H*P+N*O+U*I,g[6]=X*T+H*w+N*F+U*B,g[7]=X*E+H*R+N*b+U*z,X=Y[8],H=Y[9],N=Y[10],U=Y[11],g[8]=X*p+H*M+N*A+U*D,g[9]=X*x+H*P+N*O+U*I,g[10]=X*T+H*w+N*F+U*B,g[11]=X*E+H*R+N*b+U*z,X=Y[12],H=Y[13],N=Y[14],U=Y[15],g[12]=X*p+H*M+N*A+U*D,g[13]=X*x+H*P+N*O+U*I,g[14]=X*T+H*w+N*F+U*B,g[15]=X*E+H*R+N*b+U*z,this},multiplyLocal:function(v){var g=this.val,p=v.val;return this.setValues(g[0]*p[0]+g[1]*p[4]+g[2]*p[8]+g[3]*p[12],g[0]*p[1]+g[1]*p[5]+g[2]*p[9]+g[3]*p[13],g[0]*p[2]+g[1]*p[6]+g[2]*p[10]+g[3]*p[14],g[0]*p[3]+g[1]*p[7]+g[2]*p[11]+g[3]*p[15],g[4]*p[0]+g[5]*p[4]+g[6]*p[8]+g[7]*p[12],g[4]*p[1]+g[5]*p[5]+g[6]*p[9]+g[7]*p[13],g[4]*p[2]+g[5]*p[6]+g[6]*p[10]+g[7]*p[14],g[4]*p[3]+g[5]*p[7]+g[6]*p[11]+g[7]*p[15],g[8]*p[0]+g[9]*p[4]+g[10]*p[8]+g[11]*p[12],g[8]*p[1]+g[9]*p[5]+g[10]*p[9]+g[11]*p[13],g[8]*p[2]+g[9]*p[6]+g[10]*p[10]+g[11]*p[14],g[8]*p[3]+g[9]*p[7]+g[10]*p[11]+g[11]*p[15],g[12]*p[0]+g[13]*p[4]+g[14]*p[8]+g[15]*p[12],g[12]*p[1]+g[13]*p[5]+g[14]*p[9]+g[15]*p[13],g[12]*p[2]+g[13]*p[6]+g[14]*p[10]+g[15]*p[14],g[12]*p[3]+g[13]*p[7]+g[14]*p[11]+g[15]*p[15])},premultiply:function(v){return this.multiplyMatrices(v,this)},multiplyMatrices:function(v,g){var p=v.val,x=g.val,T=p[0],E=p[4],M=p[8],P=p[12],w=p[1],R=p[5],A=p[9],O=p[13],F=p[2],b=p[6],D=p[10],I=p[14],B=p[3],z=p[7],Y=p[11],X=p[15],H=x[0],N=x[4],U=x[8],L=x[12],G=x[1],V=x[5],k=x[9],W=x[13],$=x[2],K=x[6],j=x[10],Z=x[14],J=x[3],Q=x[7],_=x[11],q=x[15];return this.setValues(T*H+E*G+M*$+P*J,w*H+R*G+A*$+O*J,F*H+b*G+D*$+I*J,B*H+z*G+Y*$+X*J,T*N+E*V+M*K+P*Q,w*N+R*V+A*K+O*Q,F*N+b*V+D*K+I*Q,B*N+z*V+Y*K+X*Q,T*U+E*k+M*j+P*_,w*U+R*k+A*j+O*_,F*U+b*k+D*j+I*_,B*U+z*k+Y*j+X*_,T*L+E*W+M*Z+P*q,w*L+R*W+A*Z+O*q,F*L+b*W+D*Z+I*q,B*L+z*W+Y*Z+X*q)},translate:function(v){return this.translateXYZ(v.x,v.y,v.z)},translateXYZ:function(v,g,p){var x=this.val;return x[12]=x[0]*v+x[4]*g+x[8]*p+x[12],x[13]=x[1]*v+x[5]*g+x[9]*p+x[13],x[14]=x[2]*v+x[6]*g+x[10]*p+x[14],x[15]=x[3]*v+x[7]*g+x[11]*p+x[15],this},scale:function(v){return this.scaleXYZ(v.x,v.y,v.z)},scaleXYZ:function(v,g,p){var x=this.val;return x[0]=x[0]*v,x[1]=x[1]*v,x[2]=x[2]*v,x[3]=x[3]*v,x[4]=x[4]*g,x[5]=x[5]*g,x[6]=x[6]*g,x[7]=x[7]*g,x[8]=x[8]*p,x[9]=x[9]*p,x[10]=x[10]*p,x[11]=x[11]*p,this},makeRotationAxis:function(v,g){var p=Math.cos(g),x=Math.sin(g),T=1-p,E=v.x,M=v.y,P=v.z,w=T*E,R=T*M;return this.setValues(w*E+p,w*M-x*P,w*P+x*M,0,w*M+x*P,R*M+p,R*P-x*E,0,w*P-x*M,R*P+x*E,T*P*P+p,0,0,0,0,1)},rotate:function(v,g){var p=this.val,x=g.x,T=g.y,E=g.z,M=Math.sqrt(x*x+T*T+E*E);if(Math.abs(M)<d)return this;M=1/M,x*=M,T*=M,E*=M;var P=Math.sin(v),w=Math.cos(v),R=1-w,A=p[0],O=p[1],F=p[2],b=p[3],D=p[4],I=p[5],B=p[6],z=p[7],Y=p[8],X=p[9],H=p[10],N=p[11],U=p[12],L=p[13],G=p[14],V=p[15],k=x*x*R+w,W=T*x*R+E*P,$=E*x*R-T*P,K=x*T*R-E*P,j=T*T*R+w,Z=E*T*R+x*P,J=x*E*R+T*P,Q=T*E*R-x*P,_=E*E*R+w;return this.setValues(A*k+D*W+Y*$,O*k+I*W+X*$,F*k+B*W+H*$,b*k+z*W+N*$,A*K+D*j+Y*Z,O*K+I*j+X*Z,F*K+B*j+H*Z,b*K+z*j+N*Z,A*J+D*Q+Y*_,O*J+I*Q+X*_,F*J+B*Q+H*_,b*J+z*Q+N*_,U,L,G,V)},rotateX:function(v){var g=this.val,p=Math.sin(v),x=Math.cos(v),T=g[4],E=g[5],M=g[6],P=g[7],w=g[8],R=g[9],A=g[10],O=g[11];return g[4]=T*x+w*p,g[5]=E*x+R*p,g[6]=M*x+A*p,g[7]=P*x+O*p,g[8]=w*x-T*p,g[9]=R*x-E*p,g[10]=A*x-M*p,g[11]=O*x-P*p,this},rotateY:function(v){var g=this.val,p=Math.sin(v),x=Math.cos(v),T=g[0],E=g[1],M=g[2],P=g[3],w=g[8],R=g[9],A=g[10],O=g[11];return g[0]=T*x-w*p,g[1]=E*x-R*p,g[2]=M*x-A*p,g[3]=P*x-O*p,g[8]=T*p+w*x,g[9]=E*p+R*x,g[10]=M*p+A*x,g[11]=P*p+O*x,this},rotateZ:function(v){var g=this.val,p=Math.sin(v),x=Math.cos(v),T=g[0],E=g[1],M=g[2],P=g[3],w=g[4],R=g[5],A=g[6],O=g[7];return g[0]=T*x+w*p,g[1]=E*x+R*p,g[2]=M*x+A*p,g[3]=P*x+O*p,g[4]=w*x-T*p,g[5]=R*x-E*p,g[6]=A*x-M*p,g[7]=O*x-P*p,this},fromRotationTranslation:function(v,g){var p=v.x,x=v.y,T=v.z,E=v.w,M=p+p,P=x+x,w=T+T,R=p*M,A=p*P,O=p*w,F=x*P,b=x*w,D=T*w,I=E*M,B=E*P,z=E*w;return this.setValues(1-(F+D),A+z,O-B,0,A-z,1-(R+D),b+I,0,O+B,b-I,1-(R+F),0,g.x,g.y,g.z,1)},fromQuat:function(v){var g=v.x,p=v.y,x=v.z,T=v.w,E=g+g,M=p+p,P=x+x,w=g*E,R=g*M,A=g*P,O=p*M,F=p*P,b=x*P,D=T*E,I=T*M,B=T*P;return this.setValues(1-(O+b),R+B,A-I,0,R-B,1-(w+b),F+D,0,A+I,F-D,1-(w+O),0,0,0,0,1)},frustum:function(v,g,p,x,T,E){var M=1/(g-v),P=1/(x-p),w=1/(T-E);return this.setValues(T*2*M,0,0,0,0,T*2*P,0,0,(g+v)*M,(x+p)*P,(E+T)*w,-1,0,0,E*T*2*w,0)},perspective:function(v,g,p,x){var T=1/Math.tan(v/2),E=1/(p-x);return this.setValues(T/g,0,0,0,0,T,0,0,0,0,(x+p)*E,-1,0,0,2*x*p*E,0)},perspectiveLH:function(v,g,p,x){return this.setValues(2*p/v,0,0,0,0,2*p/g,0,0,0,0,-x/(p-x),1,0,0,p*x/(p-x),0)},ortho:function(v,g,p,x,T,E){var M=v-g,P=p-x,w=T-E;return M=M===0?M:1/M,P=P===0?P:1/P,w=w===0?w:1/w,this.setValues(-2*M,0,0,0,0,-2*P,0,0,0,0,2*w,0,(v+g)*M,(x+p)*P,(E+T)*w,1)},lookAtRH:function(v,g,p){var x=this.val;return o.subVectors(v,g),o.getLengthSquared()===0&&(o.z=1),o.normalize(),a.crossVectors(p,o),a.getLengthSquared()===0&&(Math.abs(p.z)===1?o.x+=1e-4:o.z+=1e-4,o.normalize(),a.crossVectors(p,o)),a.normalize(),c.crossVectors(o,a),x[0]=a.x,x[1]=a.y,x[2]=a.z,x[4]=c.x,x[5]=c.y,x[6]=c.z,x[8]=o.x,x[9]=o.y,x[10]=o.z,this},lookAt:function(v,g,p){var x=v.x,T=v.y,E=v.z,M=p.x,P=p.y,w=p.z,R=g.x,A=g.y,O=g.z;if(Math.abs(x-R)<d&&Math.abs(T-A)<d&&Math.abs(E-O)<d)return this.identity();var F=x-R,b=T-A,D=E-O,I=1/Math.sqrt(F*F+b*b+D*D);F*=I,b*=I,D*=I;var B=P*D-w*b,z=w*F-M*D,Y=M*b-P*F;I=Math.sqrt(B*B+z*z+Y*Y),I?(I=1/I,B*=I,z*=I,Y*=I):(B=0,z=0,Y=0);var X=b*Y-D*z,H=D*B-F*Y,N=F*z-b*B;return I=Math.sqrt(X*X+H*H+N*N),I?(I=1/I,X*=I,H*=I,N*=I):(X=0,H=0,N=0),this.setValues(B,X,F,0,z,H,b,0,Y,N,D,0,-(B*x+z*T+Y*E),-(X*x+H*T+N*E),-(F*x+b*T+D*E),1)},yawPitchRoll:function(v,g,p){this.zero(),h.zero(),n.zero();var x=this.val,T=h.val,E=n.val,M=Math.sin(p),P=Math.cos(p);return x[10]=1,x[15]=1,x[0]=P,x[1]=M,x[4]=-M,x[5]=P,M=Math.sin(g),P=Math.cos(g),T[0]=1,T[15]=1,T[5]=P,T[10]=P,T[9]=-M,T[6]=M,M=Math.sin(v),P=Math.cos(v),E[5]=1,E[15]=1,E[0]=P,E[2]=-M,E[8]=M,E[10]=P,this.multiplyLocal(h),this.multiplyLocal(n),this},setWorldMatrix:function(v,g,p,x,T){return this.yawPitchRoll(v.y,v.x,v.z),h.scaling(p.x,p.y,p.z),n.xyz(g.x,g.y,g.z),this.multiplyLocal(h),this.multiplyLocal(n),x&&this.multiplyLocal(x),T&&this.multiplyLocal(T),this},multiplyToMat4:function(v,g){var p=this.val,x=v.val,T=p[0],E=p[1],M=p[2],P=p[3],w=p[4],R=p[5],A=p[6],O=p[7],F=p[8],b=p[9],D=p[10],I=p[11],B=p[12],z=p[13],Y=p[14],X=p[15],H=x[0],N=x[1],U=x[2],L=x[3],G=x[4],V=x[5],k=x[6],W=x[7],$=x[8],K=x[9],j=x[10],Z=x[11],J=x[12],Q=x[13],_=x[14],q=x[15];return g.setValues(H*T+N*w+U*F+L*B,N*E+N*R+U*b+L*z,U*M+N*A+U*D+L*Y,L*P+N*O+U*I+L*X,G*T+V*w+k*F+W*B,G*E+V*R+k*b+W*z,G*M+V*A+k*D+W*Y,G*P+V*O+k*I+W*X,$*T+K*w+j*F+Z*B,$*E+K*R+j*b+Z*z,$*M+K*A+j*D+Z*Y,$*P+K*O+j*I+Z*X,J*T+Q*w+_*F+q*B,J*E+Q*R+_*b+q*z,J*M+Q*A+_*D+q*Y,J*P+Q*O+_*I+q*X)},fromRotationXYTranslation:function(v,g,p){var x=g.x,T=g.y,E=g.z,M=Math.sin(v.x),P=Math.cos(v.x),w=Math.sin(v.y),R=Math.cos(v.y),A=x,O=T,F=E,b=-M,D=0-b*w,I=0-P*w,B=b*R,z=P*R;return p||(A=R*x+w*E,O=D*x+P*T+B*E,F=I*x+M*T+z*E),this.setValues(R,D,I,0,0,P,M,0,w,B,z,0,A,O,F,1)},getMaxScaleOnAxis:function(){var v=this.val,g=v[0]*v[0]+v[1]*v[1]+v[2]*v[2],p=v[4]*v[4]+v[5]*v[5]+v[6]*v[6],x=v[8]*v[8]+v[9]*v[9]+v[10]*v[10];return Math.sqrt(Math.max(g,p,x))}}),h=new l,n=new l,a=new m,c=new m,o=new m;r.exports=l}),69635:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){return Math.min(e+u,m)};r.exports=y}),37394:(r=>{/**
 * @author       Vladislav Forsh <vlad@robowhale.com>
 * @copyright    2021 RoboWhale
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){var u=e.length;if(u===0)return 0;e.sort(function(d,l){return d-l});var m=Math.floor(u/2);return u%2===0?(e[m]+e[m-1])/2:e[m]};r.exports=y}),17259:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){return Math.max(e-u,m)};r.exports=y}),61820:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d){m===void 0&&(m=u+1);var l=(e-u)/(m-u);return l>1?d!==void 0?(l=(d-e)/(d-m),l<0&&(l=0)):l=1:l<0&&(l=0),l};r.exports=y}),75003:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(5341),d=e(72283),l=e(70015),h=1e-6,n=new Int8Array([1,2,0]),a=new Float32Array([0,0,0]),c=new l(1,0,0),o=new l(0,1,0),v=new l,g=new m,p=new u({initialize:function(T,E,M,P){this.onChangeCallback=d,this.set(T,E,M,P)},x:{get:function(){return this._x},set:function(x){this._x=x,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(x){this._y=x,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(x){this._z=x,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(x){this._w=x,this.onChangeCallback(this)}},copy:function(x){return this.set(x)},set:function(x,T,E,M,P){return P===void 0&&(P=!0),typeof x=="object"?(this._x=x.x||0,this._y=x.y||0,this._z=x.z||0,this._w=x.w||0):(this._x=x||0,this._y=T||0,this._z=E||0,this._w=M||0),P&&this.onChangeCallback(this),this},add:function(x){return this._x+=x.x,this._y+=x.y,this._z+=x.z,this._w+=x.w,this.onChangeCallback(this),this},subtract:function(x){return this._x-=x.x,this._y-=x.y,this._z-=x.z,this._w-=x.w,this.onChangeCallback(this),this},scale:function(x){return this._x*=x,this._y*=x,this._z*=x,this._w*=x,this.onChangeCallback(this),this},length:function(){var x=this.x,T=this.y,E=this.z,M=this.w;return Math.sqrt(x*x+T*T+E*E+M*M)},lengthSq:function(){var x=this.x,T=this.y,E=this.z,M=this.w;return x*x+T*T+E*E+M*M},normalize:function(){var x=this.x,T=this.y,E=this.z,M=this.w,P=x*x+T*T+E*E+M*M;return P>0&&(P=1/Math.sqrt(P),this._x=x*P,this._y=T*P,this._z=E*P,this._w=M*P),this.onChangeCallback(this),this},dot:function(x){return this.x*x.x+this.y*x.y+this.z*x.z+this.w*x.w},lerp:function(x,T){T===void 0&&(T=0);var E=this.x,M=this.y,P=this.z,w=this.w;return this.set(E+T*(x.x-E),M+T*(x.y-M),P+T*(x.z-P),w+T*(x.w-w))},rotationTo:function(x,T){var E=x.x*T.x+x.y*T.y+x.z*T.z;return E<-.999999?(v.copy(c).cross(x).length()<h&&v.copy(o).cross(x),v.normalize(),this.setAxisAngle(v,Math.PI)):E>.999999?this.set(0,0,0,1):(v.copy(x).cross(T),this._x=v.x,this._y=v.y,this._z=v.z,this._w=1+E,this.normalize())},setAxes:function(x,T,E){var M=g.val;return M[0]=T.x,M[3]=T.y,M[6]=T.z,M[1]=E.x,M[4]=E.y,M[7]=E.z,M[2]=-x.x,M[5]=-x.y,M[8]=-x.z,this.fromMat3(g).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(x,T){T=T*.5;var E=Math.sin(T);return this.set(E*x.x,E*x.y,E*x.z,Math.cos(T))},multiply:function(x){var T=this.x,E=this.y,M=this.z,P=this.w,w=x.x,R=x.y,A=x.z,O=x.w;return this.set(T*O+P*w+E*A-M*R,E*O+P*R+M*w-T*A,M*O+P*A+T*R-E*w,P*O-T*w-E*R-M*A)},slerp:function(x,T){var E=this.x,M=this.y,P=this.z,w=this.w,R=x.x,A=x.y,O=x.z,F=x.w,b=E*R+M*A+P*O+w*F;b<0&&(b=-b,R=-R,A=-A,O=-O,F=-F);var D=1-T,I=T;if(1-b>h){var B=Math.acos(b),z=Math.sin(B);D=Math.sin((1-T)*B)/z,I=Math.sin(T*B)/z}return this.set(D*E+I*R,D*M+I*A,D*P+I*O,D*w+I*F)},invert:function(){var x=this.x,T=this.y,E=this.z,M=this.w,P=x*x+T*T+E*E+M*M,w=P?1/P:0;return this.set(-x*w,-T*w,-E*w,M*w)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(x){x*=.5;var T=this.x,E=this.y,M=this.z,P=this.w,w=Math.sin(x),R=Math.cos(x);return this.set(T*R+P*w,E*R+M*w,M*R-E*w,P*R-T*w)},rotateY:function(x){x*=.5;var T=this.x,E=this.y,M=this.z,P=this.w,w=Math.sin(x),R=Math.cos(x);return this.set(T*R-M*w,E*R+P*w,M*R+T*w,P*R-E*w)},rotateZ:function(x){x*=.5;var T=this.x,E=this.y,M=this.z,P=this.w,w=Math.sin(x),R=Math.cos(x);return this.set(T*R+E*w,E*R-T*w,M*R+P*w,P*R-M*w)},calculateW:function(){var x=this.x,T=this.y,E=this.z;return this.w=-Math.sqrt(1-x*x-T*T-E*E),this},setFromEuler:function(x,T){var E=x.x/2,M=x.y/2,P=x.z/2,w=Math.cos(E),R=Math.cos(M),A=Math.cos(P),O=Math.sin(E),F=Math.sin(M),b=Math.sin(P);switch(x.order){case"XYZ":{this.set(O*R*A+w*F*b,w*F*A-O*R*b,w*R*b+O*F*A,w*R*A-O*F*b,T);break}case"YXZ":{this.set(O*R*A+w*F*b,w*F*A-O*R*b,w*R*b-O*F*A,w*R*A+O*F*b,T);break}case"ZXY":{this.set(O*R*A-w*F*b,w*F*A+O*R*b,w*R*b+O*F*A,w*R*A-O*F*b,T);break}case"ZYX":{this.set(O*R*A-w*F*b,w*F*A+O*R*b,w*R*b-O*F*A,w*R*A+O*F*b,T);break}case"YZX":{this.set(O*R*A+w*F*b,w*F*A+O*R*b,w*R*b-O*F*A,w*R*A-O*F*b,T);break}case"XZY":{this.set(O*R*A-w*F*b,w*F*A-O*R*b,w*R*b+O*F*A,w*R*A+O*F*b,T);break}}return this},setFromRotationMatrix:function(x){var T=x.val,E=T[0],M=T[4],P=T[8],w=T[1],R=T[5],A=T[9],O=T[2],F=T[6],b=T[10],D=E+R+b,I;return D>0?(I=.5/Math.sqrt(D+1),this.set((F-A)*I,(P-O)*I,(w-M)*I,.25/I)):E>R&&E>b?(I=2*Math.sqrt(1+E-R-b),this.set(.25*I,(M+w)/I,(P+O)/I,(F-A)/I)):R>b?(I=2*Math.sqrt(1+R-E-b),this.set((M+w)/I,.25*I,(A+F)/I,(P-O)/I)):(I=2*Math.sqrt(1+b-E-R),this.set((P+O)/I,(A+F)/I,.25*I,(w-M)/I)),this},fromMat3:function(x){var T=x.val,E=T[0]+T[4]+T[8],M;if(E>0)M=Math.sqrt(E+1),this.w=.5*M,M=.5/M,this._x=(T[7]-T[5])*M,this._y=(T[2]-T[6])*M,this._z=(T[3]-T[1])*M;else{var P=0;T[4]>T[0]&&(P=1),T[8]>T[P*3+P]&&(P=2);var w=n[P],R=n[w];M=Math.sqrt(T[P*3+P]-T[w*3+w]-T[R*3+R]+1),a[P]=.5*M,M=.5/M,a[w]=(T[w*3+P]+T[P*3+w])*M,a[R]=(T[R*3+P]+T[P*3+R])*M,this._x=a[0],this._y=a[1],this._z=a[2],this._w=(T[R*3+w]-T[w*3+R])*M}return this.onChangeCallback(this),this}});r.exports=p}),23701:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(83392),m=function(d){return d*u.RAD_TO_DEG};r.exports=m}),16906:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){u===void 0&&(u=1);var m=Math.random()*2*Math.PI;return e.x=Math.cos(m)*u,e.y=Math.sin(m)*u,e};r.exports=y}),52417:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){u===void 0&&(u=1);var m=Math.random()*2*Math.PI,d=Math.random()*2-1,l=Math.sqrt(1-d*d)*u;return e.x=Math.cos(m)*l,e.y=Math.sin(m)*l,e.z=d*u,e};r.exports=y}),17915:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return u===void 0&&(u=1),e.x=(Math.random()*2-1)*u,e.y=(Math.random()*2-1)*u,e.z=(Math.random()*2-1)*u,e.w=(Math.random()*2-1)*u,e};r.exports=y}),52257:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){var m=e.x,d=e.y;return e.x=m*Math.cos(u)-d*Math.sin(u),e.y=m*Math.sin(u)+d*Math.cos(u),e};r.exports=y}),2386:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d){var l=Math.cos(d),h=Math.sin(d),n=e.x-u,a=e.y-m;return e.x=n*l-a*h+u,e.y=n*h+a*l+m,e};r.exports=y}),72395:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d,l){var h=d+Math.atan2(e.y-m,e.x-u);return e.x=u+l*Math.cos(h),e.y=m+l*Math.sin(h),e};r.exports=y}),41061:(r=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d,l){return e.x=u+l*Math.cos(d),e.y=m+l*Math.sin(d),e};r.exports=y}),93709:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(70015),m=e(16650),d=e(75003),l=new m,h=new d,n=new u,a=function(c,o,v){return h.setAxisAngle(o,v),l.fromRotationTranslation(h,n.set(0,0,0)),c.transformMat4(l)};r.exports=a}),67233:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return e>0?Math.ceil(e):Math.floor(e)};r.exports=y}),64333:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){u===void 0&&(u=0),m===void 0&&(m=10);var d=Math.pow(m,-u);return Math.round(e*d)/d};r.exports=y}),59533:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d){u===void 0&&(u=1),m===void 0&&(m=1),d===void 0&&(d=1),d*=Math.PI/e;for(var l=[],h=[],n=0;n<e;n++)m-=u*d,u+=m*d,l[n]=m,h[n]=u;return{sin:h,cos:l,length:e}};r.exports=y}),5514:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){return e<=u?0:e>=m?1:(e=(e-u)/(m-u),e*e*(3-2*e))};r.exports=y}),87736:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){return e=Math.max(0,Math.min(1,(e-u)/(m-u))),e*e*e*(e*(e*6-15)+10)};r.exports=y}),55805:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(93736),m=function(d,l,h,n){n===void 0&&(n=new u);var a=0,c=0,o=l*h;return d>0&&d<=o&&(d>l-1?(c=Math.floor(d/l),a=d-c*l):a=d),n.set(a,c)};r.exports=m}),64462:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(93736),m=function(d,l,h,n,a,c,o,v){v===void 0&&(v=new u);var g=Math.sin(a),p=Math.cos(a),x=p*c,T=g*c,E=-g*o,M=p*o,P=1/(x*M+E*-T);return v.x=M*P*d+-E*P*l+(n*E-h*M)*P,v.y=x*P*l+-T*P*d+(-n*x+h*T)*P,v};r.exports=m}),93736:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(88456),d=new u({initialize:function(h,n){this.x=0,this.y=0,typeof h=="object"?(this.x=h.x||0,this.y=h.y||0):(n===void 0&&(n=h),this.x=h||0,this.y=n||0)},clone:function(){return new d(this.x,this.y)},copy:function(l){return this.x=l.x||0,this.y=l.y||0,this},setFromObject:function(l){return this.x=l.x||0,this.y=l.y||0,this},set:function(l,h){return h===void 0&&(h=l),this.x=l,this.y=h,this},setTo:function(l,h){return this.set(l,h)},setToPolar:function(l,h){return h==null&&(h=1),this.x=Math.cos(l)*h,this.y=Math.sin(l)*h,this},equals:function(l){return this.x===l.x&&this.y===l.y},fuzzyEquals:function(l,h){return m(this.x,l.x,h)&&m(this.y,l.y,h)},angle:function(){var l=Math.atan2(this.y,this.x);return l<0&&(l+=2*Math.PI),l},setAngle:function(l){return this.setToPolar(l,this.length())},add:function(l){return this.x+=l.x,this.y+=l.y,this},subtract:function(l){return this.x-=l.x,this.y-=l.y,this},multiply:function(l){return this.x*=l.x,this.y*=l.y,this},scale:function(l){return isFinite(l)?(this.x*=l,this.y*=l):(this.x=0,this.y=0),this},divide:function(l){return this.x/=l.x,this.y/=l.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(l){var h=l.x-this.x,n=l.y-this.y;return Math.sqrt(h*h+n*n)},distanceSq:function(l){var h=l.x-this.x,n=l.y-this.y;return h*h+n*n},length:function(){var l=this.x,h=this.y;return Math.sqrt(l*l+h*h)},setLength:function(l){return this.normalize().scale(l)},lengthSq:function(){var l=this.x,h=this.y;return l*l+h*h},normalize:function(){var l=this.x,h=this.y,n=l*l+h*h;return n>0&&(n=1/Math.sqrt(n),this.x=l*n,this.y=h*n),this},normalizeRightHand:function(){var l=this.x;return this.x=this.y*-1,this.y=l,this},normalizeLeftHand:function(){var l=this.x;return this.x=this.y,this.y=l*-1,this},dot:function(l){return this.x*l.x+this.y*l.y},cross:function(l){return this.x*l.y-this.y*l.x},lerp:function(l,h){h===void 0&&(h=0);var n=this.x,a=this.y;return this.x=n+h*(l.x-n),this.y=a+h*(l.y-a),this},transformMat3:function(l){var h=this.x,n=this.y,a=l.val;return this.x=a[0]*h+a[3]*n+a[6],this.y=a[1]*h+a[4]*n+a[7],this},transformMat4:function(l){var h=this.x,n=this.y,a=l.val;return this.x=a[0]*h+a[4]*n+a[12],this.y=a[1]*h+a[5]*n+a[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(l){var h=this.length();return h&&h>l&&this.scale(l/h),this},reflect:function(l){return l=l.clone().normalize(),this.subtract(l.scale(2*this.dot(l)))},mirror:function(l){return this.reflect(l).negate()},rotate:function(l){var h=Math.cos(l),n=Math.sin(l);return this.set(h*this.x-n*this.y,n*this.x+h*this.y)},project:function(l){var h=this.dot(l)/l.dot(l);return this.copy(l).scale(h)}});d.ZERO=new d,d.RIGHT=new d(1,0),d.LEFT=new d(-1,0),d.UP=new d(0,-1),d.DOWN=new d(0,1),d.ONE=new d(1,1),r.exports=d}),70015:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=new u({initialize:function(l,h,n){this.x=0,this.y=0,this.z=0,typeof l=="object"?(this.x=l.x||0,this.y=l.y||0,this.z=l.z||0):(this.x=l||0,this.y=h||0,this.z=n||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(d){return this.x=Math.min(this.x,d.x),this.y=Math.min(this.y,d.y),this.z=Math.min(this.z,d.z),this},max:function(d){return this.x=Math.max(this.x,d.x),this.y=Math.max(this.y,d.y),this.z=Math.max(this.z,d.z),this},clone:function(){return new m(this.x,this.y,this.z)},addVectors:function(d,l){return this.x=d.x+l.x,this.y=d.y+l.y,this.z=d.z+l.z,this},crossVectors:function(d,l){var h=d.x,n=d.y,a=d.z,c=l.x,o=l.y,v=l.z;return this.x=n*v-a*o,this.y=a*c-h*v,this.z=h*o-n*c,this},equals:function(d){return this.x===d.x&&this.y===d.y&&this.z===d.z},copy:function(d){return this.x=d.x,this.y=d.y,this.z=d.z||0,this},set:function(d,l,h){return typeof d=="object"?(this.x=d.x||0,this.y=d.y||0,this.z=d.z||0):(this.x=d||0,this.y=l||0,this.z=h||0),this},setFromMatrixPosition:function(d){return this.fromArray(d.val,12)},setFromMatrixColumn:function(d,l){return this.fromArray(d.val,l*4)},fromArray:function(d,l){return l===void 0&&(l=0),this.x=d[l],this.y=d[l+1],this.z=d[l+2],this},add:function(d){return this.x+=d.x,this.y+=d.y,this.z+=d.z||0,this},addScalar:function(d){return this.x+=d,this.y+=d,this.z+=d,this},addScale:function(d,l){return this.x+=d.x*l,this.y+=d.y*l,this.z+=d.z*l||0,this},subtract:function(d){return this.x-=d.x,this.y-=d.y,this.z-=d.z||0,this},multiply:function(d){return this.x*=d.x,this.y*=d.y,this.z*=d.z||1,this},scale:function(d){return isFinite(d)?(this.x*=d,this.y*=d,this.z*=d):(this.x=0,this.y=0,this.z=0),this},divide:function(d){return this.x/=d.x,this.y/=d.y,this.z/=d.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(d){var l=d.x-this.x,h=d.y-this.y,n=d.z-this.z||0;return Math.sqrt(l*l+h*h+n*n)},distanceSq:function(d){var l=d.x-this.x,h=d.y-this.y,n=d.z-this.z||0;return l*l+h*h+n*n},length:function(){var d=this.x,l=this.y,h=this.z;return Math.sqrt(d*d+l*l+h*h)},lengthSq:function(){var d=this.x,l=this.y,h=this.z;return d*d+l*l+h*h},normalize:function(){var d=this.x,l=this.y,h=this.z,n=d*d+l*l+h*h;return n>0&&(n=1/Math.sqrt(n),this.x=d*n,this.y=l*n,this.z=h*n),this},dot:function(d){return this.x*d.x+this.y*d.y+this.z*d.z},cross:function(d){var l=this.x,h=this.y,n=this.z,a=d.x,c=d.y,o=d.z;return this.x=h*o-n*c,this.y=n*a-l*o,this.z=l*c-h*a,this},lerp:function(d,l){l===void 0&&(l=0);var h=this.x,n=this.y,a=this.z;return this.x=h+l*(d.x-h),this.y=n+l*(d.y-n),this.z=a+l*(d.z-a),this},applyMatrix3:function(d){var l=this.x,h=this.y,n=this.z,a=d.val;return this.x=a[0]*l+a[3]*h+a[6]*n,this.y=a[1]*l+a[4]*h+a[7]*n,this.z=a[2]*l+a[5]*h+a[8]*n,this},applyMatrix4:function(d){var l=this.x,h=this.y,n=this.z,a=d.val,c=1/(a[3]*l+a[7]*h+a[11]*n+a[15]);return this.x=(a[0]*l+a[4]*h+a[8]*n+a[12])*c,this.y=(a[1]*l+a[5]*h+a[9]*n+a[13])*c,this.z=(a[2]*l+a[6]*h+a[10]*n+a[14])*c,this},transformMat3:function(d){var l=this.x,h=this.y,n=this.z,a=d.val;return this.x=l*a[0]+h*a[3]+n*a[6],this.y=l*a[1]+h*a[4]+n*a[7],this.z=l*a[2]+h*a[5]+n*a[8],this},transformMat4:function(d){var l=this.x,h=this.y,n=this.z,a=d.val;return this.x=a[0]*l+a[4]*h+a[8]*n+a[12],this.y=a[1]*l+a[5]*h+a[9]*n+a[13],this.z=a[2]*l+a[6]*h+a[10]*n+a[14],this},transformCoordinates:function(d){var l=this.x,h=this.y,n=this.z,a=d.val,c=l*a[0]+h*a[4]+n*a[8]+a[12],o=l*a[1]+h*a[5]+n*a[9]+a[13],v=l*a[2]+h*a[6]+n*a[10]+a[14],g=l*a[3]+h*a[7]+n*a[11]+a[15];return this.x=c/g,this.y=o/g,this.z=v/g,this},transformQuat:function(d){var l=this.x,h=this.y,n=this.z,a=d.x,c=d.y,o=d.z,v=d.w,g=v*l+c*n-o*h,p=v*h+o*l-a*n,x=v*n+a*h-c*l,T=-a*l-c*h-o*n;return this.x=g*v+T*-a+p*-o-x*-c,this.y=p*v+T*-c+x*-a-g*-o,this.z=x*v+T*-o+g*-c-p*-a,this},project:function(d){var l=this.x,h=this.y,n=this.z,a=d.val,c=a[0],o=a[1],v=a[2],g=a[3],p=a[4],x=a[5],T=a[6],E=a[7],M=a[8],P=a[9],w=a[10],R=a[11],A=a[12],O=a[13],F=a[14],b=a[15],D=1/(l*g+h*E+n*R+b);return this.x=(l*c+h*p+n*M+A)*D,this.y=(l*o+h*x+n*P+O)*D,this.z=(l*v+h*T+n*w+F)*D,this},projectViewMatrix:function(d,l){return this.applyMatrix4(d).applyMatrix4(l)},unprojectViewMatrix:function(d,l){return this.applyMatrix4(d).applyMatrix4(l)},unproject:function(d,l){var h=d.x,n=d.y,a=d.z,c=d.w,o=this.x-h,v=c-this.y-1-n,g=this.z;return this.x=2*o/a-1,this.y=2*v/c-1,this.z=2*g-1,this.project(l)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});m.ZERO=new m,m.RIGHT=new m(1,0,0),m.LEFT=new m(-1,0,0),m.UP=new m(0,-1,0),m.DOWN=new m(0,1,0),m.FORWARD=new m(0,0,1),m.BACK=new m(0,0,-1),m.ONE=new m(1,1,1),r.exports=m}),51729:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=new u({initialize:function(l,h,n,a){this.x=0,this.y=0,this.z=0,this.w=0,typeof l=="object"?(this.x=l.x||0,this.y=l.y||0,this.z=l.z||0,this.w=l.w||0):(this.x=l||0,this.y=h||0,this.z=n||0,this.w=a||0)},clone:function(){return new m(this.x,this.y,this.z,this.w)},copy:function(d){return this.x=d.x,this.y=d.y,this.z=d.z||0,this.w=d.w||0,this},equals:function(d){return this.x===d.x&&this.y===d.y&&this.z===d.z&&this.w===d.w},set:function(d,l,h,n){return typeof d=="object"?(this.x=d.x||0,this.y=d.y||0,this.z=d.z||0,this.w=d.w||0):(this.x=d||0,this.y=l||0,this.z=h||0,this.w=n||0),this},add:function(d){return this.x+=d.x,this.y+=d.y,this.z+=d.z||0,this.w+=d.w||0,this},subtract:function(d){return this.x-=d.x,this.y-=d.y,this.z-=d.z||0,this.w-=d.w||0,this},scale:function(d){return this.x*=d,this.y*=d,this.z*=d,this.w*=d,this},length:function(){var d=this.x,l=this.y,h=this.z,n=this.w;return Math.sqrt(d*d+l*l+h*h+n*n)},lengthSq:function(){var d=this.x,l=this.y,h=this.z,n=this.w;return d*d+l*l+h*h+n*n},normalize:function(){var d=this.x,l=this.y,h=this.z,n=this.w,a=d*d+l*l+h*h+n*n;return a>0&&(a=1/Math.sqrt(a),this.x=d*a,this.y=l*a,this.z=h*a,this.w=n*a),this},dot:function(d){return this.x*d.x+this.y*d.y+this.z*d.z+this.w*d.w},lerp:function(d,l){l===void 0&&(l=0);var h=this.x,n=this.y,a=this.z,c=this.w;return this.x=h+l*(d.x-h),this.y=n+l*(d.y-n),this.z=a+l*(d.z-a),this.w=c+l*(d.w-c),this},multiply:function(d){return this.x*=d.x,this.y*=d.y,this.z*=d.z||1,this.w*=d.w||1,this},divide:function(d){return this.x/=d.x,this.y/=d.y,this.z/=d.z||1,this.w/=d.w||1,this},distance:function(d){var l=d.x-this.x,h=d.y-this.y,n=d.z-this.z||0,a=d.w-this.w||0;return Math.sqrt(l*l+h*h+n*n+a*a)},distanceSq:function(d){var l=d.x-this.x,h=d.y-this.y,n=d.z-this.z||0,a=d.w-this.w||0;return l*l+h*h+n*n+a*a},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(d){var l=this.x,h=this.y,n=this.z,a=this.w,c=d.val;return this.x=c[0]*l+c[4]*h+c[8]*n+c[12]*a,this.y=c[1]*l+c[5]*h+c[9]*n+c[13]*a,this.z=c[2]*l+c[6]*h+c[10]*n+c[14]*a,this.w=c[3]*l+c[7]*h+c[11]*n+c[15]*a,this},transformQuat:function(d){var l=this.x,h=this.y,n=this.z,a=d.x,c=d.y,o=d.z,v=d.w,g=v*l+c*n-o*h,p=v*h+o*l-a*n,x=v*n+a*h-c*l,T=-a*l-c*h-o*n;return this.x=g*v+T*-a+p*-o-x*-c,this.y=p*v+T*-c+x*-a-g*-o,this.z=x*v+T*-o+g*-c-p*-a,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});m.prototype.sub=m.prototype.subtract,m.prototype.mul=m.prototype.multiply,m.prototype.div=m.prototype.divide,m.prototype.dist=m.prototype.distance,m.prototype.distSq=m.prototype.distanceSq,m.prototype.len=m.prototype.length,m.prototype.lenSq=m.prototype.lengthSq,r.exports=m}),9557:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){return Math.abs(e-u)<=m};r.exports=y}),1071:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){if(e>=u&&e<=m)return e;var d=m-u;return u+((e-u)%d+d)%d};r.exports=y}),90447:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d){return Math.atan2(d-u,m-e)};r.exports=y}),94240:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return Math.atan2(u.y-e.y,u.x-e.x)};r.exports=y}),84066:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return Math.atan2(u.x-e.x,u.y-e.y)};r.exports=y}),9678:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d){return Math.atan2(m-e,d-u)};r.exports=y}),76861:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(83392),m=function(d){return d>Math.PI&&(d-=u.PI2),Math.abs(((d+u.TAU)%u.PI2-u.PI2)%u.PI2)};r.exports=m}),37570:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return e=e%(2*Math.PI),e>=0?e:e+2*Math.PI};r.exports=y}),87597:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61616),m=function(){return u(-Math.PI,Math.PI)};r.exports=m}),74493:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61616),m=function(){return u(-180,180)};r.exports=m}),19049:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(37570),m=function(d){return u(d+Math.PI)};r.exports=m}),90612:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(83392),m=function(d,l,h){return h===void 0&&(h=.05),d===l||(Math.abs(l-d)<=h||Math.abs(l-d)>=u.PI2-h?d=l:(Math.abs(l-d)>Math.PI&&(l<d?l+=u.PI2:l-=u.PI2),l>d?d+=h:l<d&&(d-=h))),d};r.exports=m}),93954:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){var m=u-e;if(m===0)return 0;var d=Math.floor((m- -180)/360);return m-d*360};r.exports=y}),35786:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(1071),m=function(d){return u(d,-Math.PI,Math.PI)};r.exports=m}),62138:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(1071),m=function(d){return u(d,-180,180)};r.exports=m}),22153:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Between:e(90447),BetweenPoints:e(94240),BetweenPointsY:e(84066),BetweenY:e(9678),CounterClockwise:e(76861),Normalize:e(37570),Random:e(87597),RandomDegrees:e(74493),Reverse:e(19049),RotateTo:e(90612),ShortestBetween:e(93954),Wrap:e(35786),WrapDegrees:e(62138)}}),83392:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};r.exports=y}),53996:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d){var l=e-m,h=u-d;return Math.sqrt(l*l+h*h)};r.exports=y}),92951:(r=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){var m=e.x-u.x,d=e.y-u.y;return Math.sqrt(m*m+d*d)};r.exports=y}),12161:(r=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){var m=e.x-u.x,d=e.y-u.y;return m*m+d*d};r.exports=y}),38057:(r=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d){return Math.max(Math.abs(e-m),Math.abs(u-d))};r.exports=y}),33297:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d,l){return l===void 0&&(l=2),Math.sqrt(Math.pow(m-e,l)+Math.pow(d-u,l))};r.exports=y}),90366:(r=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d){return Math.abs(e-m)+Math.abs(u-d)};r.exports=y}),35032:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d){var l=e-m,h=u-d;return l*l+h*h};r.exports=y}),10130:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Between:e(53996),BetweenPoints:e(92951),BetweenPointsSquared:e(12161),Chebyshev:e(38057),Power:e(33297),Snake:e(90366),Squared:e(35032)}}),35060:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(25265),m=e(57428),d=e(73214),l=e(71778),h=e(36468),n=e(88258),a=e(52910),c=e(67799),o=e(74083),v=e(92284),g=e(28035),p=e(8754);r.exports={Power0:a,Power1:c.Out,Power2:l.Out,Power3:o.Out,Power4:v.Out,Linear:a,Quad:c.Out,Cubic:l.Out,Quart:o.Out,Quint:v.Out,Sine:g.Out,Expo:n.Out,Circ:d.Out,Elastic:h.Out,Back:u.Out,Bounce:m.Out,Stepped:p,"Quad.easeIn":c.In,"Cubic.easeIn":l.In,"Quart.easeIn":o.In,"Quint.easeIn":v.In,"Sine.easeIn":g.In,"Expo.easeIn":n.In,"Circ.easeIn":d.In,"Elastic.easeIn":h.In,"Back.easeIn":u.In,"Bounce.easeIn":m.In,"Quad.easeOut":c.Out,"Cubic.easeOut":l.Out,"Quart.easeOut":o.Out,"Quint.easeOut":v.Out,"Sine.easeOut":g.Out,"Expo.easeOut":n.Out,"Circ.easeOut":d.Out,"Elastic.easeOut":h.Out,"Back.easeOut":u.Out,"Bounce.easeOut":m.Out,"Quad.easeInOut":c.InOut,"Cubic.easeInOut":l.InOut,"Quart.easeInOut":o.InOut,"Quint.easeInOut":v.InOut,"Sine.easeInOut":g.InOut,"Expo.easeInOut":n.InOut,"Circ.easeInOut":d.InOut,"Elastic.easeInOut":h.InOut,"Back.easeInOut":u.InOut,"Bounce.easeInOut":m.InOut}}),25860:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return u===void 0&&(u=1.70158),e*e*((u+1)*e-u)};r.exports=y}),45264:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){u===void 0&&(u=1.70158);var m=u*1.525;return(e*=2)<1?.5*(e*e*((m+1)*e-m)):.5*((e-=2)*e*((m+1)*e+m)+2)};r.exports=y}),36699:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return u===void 0&&(u=1.70158),--e*e*((u+1)*e+u)+1};r.exports=y}),25265:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={In:e(25860),Out:e(36699),InOut:e(45264)}}),62191:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return e=1-e,e<.36363636363636365?1-7.5625*e*e:e<.7272727272727273?1-(7.5625*(e-=.5454545454545454)*e+.75):e<.9090909090909091?1-(7.5625*(e-=.8181818181818182)*e+.9375):1-(7.5625*(e-=.9545454545454546)*e+.984375)};r.exports=y}),24799:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){var u=!1;return e<.5?(e=1-e*2,u=!0):e=e*2-1,e<.36363636363636365?e=7.5625*e*e:e<.7272727272727273?e=7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?e=7.5625*(e-=.8181818181818182)*e+.9375:e=7.5625*(e-=.9545454545454546)*e+.984375,u?(1-e)*.5:e*.5+.5};r.exports=y}),60819:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return e<.36363636363636365?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375};r.exports=y}),57428:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={In:e(62191),Out:e(60819),InOut:e(24799)}}),86855:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return 1-Math.sqrt(1-e*e)};r.exports=y}),7280:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)};r.exports=y}),18058:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return Math.sqrt(1- --e*e)};r.exports=y}),73214:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={In:e(86855),Out:e(18058),InOut:e(7280)}}),91532:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return e*e*e};r.exports=y}),63180:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)};r.exports=y}),16518:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return--e*e*e+1};r.exports=y}),71778:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={In:e(91532),Out:e(16518),InOut:e(63180)}}),24729:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){if(u===void 0&&(u=.1),m===void 0&&(m=.1),e===0)return 0;if(e===1)return 1;var d=m/4;return u<1?u=1:d=m*Math.asin(1/u)/(2*Math.PI),-(u*Math.pow(2,10*(e-=1))*Math.sin((e-d)*(2*Math.PI)/m))};r.exports=y}),50325:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){if(u===void 0&&(u=.1),m===void 0&&(m=.1),e===0)return 0;if(e===1)return 1;var d=m/4;return u<1?u=1:d=m*Math.asin(1/u)/(2*Math.PI),(e*=2)<1?-.5*(u*Math.pow(2,10*(e-=1))*Math.sin((e-d)*(2*Math.PI)/m)):u*Math.pow(2,-10*(e-=1))*Math.sin((e-d)*(2*Math.PI)/m)*.5+1};r.exports=y}),84074:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){if(u===void 0&&(u=.1),m===void 0&&(m=.1),e===0)return 0;if(e===1)return 1;var d=m/4;return u<1?u=1:d=m*Math.asin(1/u)/(2*Math.PI),u*Math.pow(2,-10*e)*Math.sin((e-d)*(2*Math.PI)/m)+1};r.exports=y}),36468:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={In:e(24729),Out:e(84074),InOut:e(50325)}}),95638:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return Math.pow(2,10*(e-1))-.001};r.exports=y}),10357:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))};r.exports=y}),14894:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return 1-Math.pow(2,-10*e)};r.exports=y}),88258:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={In:e(95638),Out:e(14894),InOut:e(10357)}}),33063:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Back:e(25265),Bounce:e(57428),Circular:e(73214),Cubic:e(71778),Elastic:e(36468),Expo:e(88258),Linear:e(52910),Quadratic:e(67799),Quartic:e(74083),Quintic:e(92284),Sine:e(28035),Stepped:e(8754)}}),43927:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return e};r.exports=y}),52910:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports=e(43927)}),77471:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return e*e};r.exports=y}),83863:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)};r.exports=y}),44383:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return e*(2-e)};r.exports=y}),67799:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={In:e(77471),Out:e(44383),InOut:e(83863)}}),48311:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return e*e*e*e};r.exports=y}),55248:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)};r.exports=y}),23135:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return 1- --e*e*e*e};r.exports=y}),74083:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={In:e(48311),Out:e(23135),InOut:e(55248)}}),7313:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return e*e*e*e*e};r.exports=y}),98759:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)};r.exports=y}),26670:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return--e*e*e*e*e+1};r.exports=y}),92284:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={In:e(7313),Out:e(26670),InOut:e(98759)}}),52929:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return e===0?0:e===1?1:1-Math.cos(e*Math.PI/2)};r.exports=y}),66333:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return e===0?0:e===1?1:.5*(1-Math.cos(Math.PI*e))};r.exports=y}),37255:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return e===0?0:e===1?1:Math.sin(e*Math.PI/2)};r.exports=y}),28035:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={In:e(52929),Out:e(37255),InOut:e(66333)}}),52770:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return u===void 0&&(u=1),e<=0?0:e>=1?1:((u*e|0)+1)*(1/u)};r.exports=y}),8754:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports=e(52770)}),17247:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return u===void 0&&(u=1e-4),Math.ceil(e-u)};r.exports=y}),88456:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){return m===void 0&&(m=1e-4),Math.abs(e-u)<m};r.exports=y}),61824:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return u===void 0&&(u=1e-4),Math.floor(e+u)};r.exports=y}),41935:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){return m===void 0&&(m=1e-4),e>u-m};r.exports=y}),54726:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){return m===void 0&&(m=1e-4),e<u+m};r.exports=y}),52778:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Ceil:e(17247),Equal:e(88456),Floor:e(61824),GreaterThan:e(41935),LessThan:e(54726)}}),5923:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(83392),m=e(98611),d={Angle:e(22153),Distance:e(10130),Easing:e(33063),Fuzzy:e(52778),Interpolation:e(48528),Pow2:e(73773),Snap:e(23679),RandomDataGenerator:e(81429),Average:e(26042),Bernstein:e(22824),Between:e(17489),CatmullRom:e(14976),CeilTo:e(89129),Clamp:e(82897),DegToRad:e(75606),Difference:e(767),Euler:e(9849),Factorial:e(8034),FloatBetween:e(61616),FloorTo:e(60679),FromPercent:e(91806),GetSpeed:e(79366),IsEven:e(43776),IsEvenStrict:e(58442),Linear:e(42798),LinearXY:e(61072),MaxAdd:e(69635),Median:e(37394),MinSub:e(17259),Percent:e(61820),RadToDeg:e(23701),RandomXY:e(16906),RandomXYZ:e(52417),RandomXYZW:e(17915),Rotate:e(52257),RotateAround:e(2386),RotateAroundDistance:e(72395),RotateTo:e(41061),RoundAwayFromZero:e(67233),RoundTo:e(64333),SinCosTableGenerator:e(59533),SmootherStep:e(87736),SmoothStep:e(5514),ToXY:e(55805),TransformXY:e(64462),Within:e(9557),Wrap:e(1071),Vector2:e(93736),Vector3:e(70015),Vector4:e(51729),Matrix3:e(5341),Matrix4:e(16650),Quaternion:e(75003),RotateVec3:e(93709)};d=m(!1,d,u),r.exports=d}),63210:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(22824),m=function(d,l){for(var h=0,n=d.length-1,a=0;a<=n;a++)h+=Math.pow(1-l,n-a)*Math.pow(l,a)*d[a]*u(n,a);return h};r.exports=m}),88332:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(14976),m=function(d,l){var h=d.length-1,n=h*l,a=Math.floor(n);return d[0]===d[h]?(l<0&&(a=Math.floor(n=h*(1+l))),u(n-a,d[(a-1+h)%h],d[a],d[(a+1)%h],d[(a+2)%h])):l<0?d[0]-(u(-n,d[0],d[0],d[1],d[1])-d[0]):l>1?d[h]-(u(n-h,d[h],d[h],d[h-1],d[h-1])-d[h]):u(n-a,d[a?a-1:0],d[a],d[h<a+1?h:a+1],d[h<a+2?h:a+2])};r.exports=m}),34631:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function y(l,h){var n=1-l;return n*n*n*h}function e(l,h){var n=1-l;return 3*n*n*l*h}function u(l,h){return 3*(1-l)*l*l*h}function m(l,h){return l*l*l*h}var d=function(l,h,n,a,c){return y(l,h)+e(l,n)+u(l,a)+m(l,c)};r.exports=d}),47614:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(42798),m=function(d,l){var h=d.length-1,n=h*l,a=Math.floor(n);return l<0?u(d[0],d[1],n):l>1?u(d[h],d[h-1],h-n):u(d[a],d[a+1>h?h:a+1],n-a)};r.exports=m}),16252:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function y(d,l){var h=1-d;return h*h*l}function e(d,l){return 2*(1-d)*d*l}function u(d,l){return d*d*l}var m=function(d,l,h,n){return y(d,l)+e(d,h)+u(d,n)};r.exports=m}),44521:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(5514),m=function(d,l,h){return l+(h-l)*u(d,0,1)};r.exports=m}),45507:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(87736),m=function(d,l,h){return l+(h-l)*u(d,0,1)};r.exports=m}),48528:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Bezier:e(63210),CatmullRom:e(88332),CubicBezier:e(34631),Linear:e(47614),QuadraticBezier:e(16252),SmoothStep:e(44521),SmootherStep:e(45507)}}),3504:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){var u=Math.log(e)/.6931471805599453;return 1<<Math.ceil(u)};r.exports=y}),28621:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return e>0&&(e&e-1)===0&&u>0&&(u&u-1)===0};r.exports=y}),2018:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return e>0&&(e&e-1)===0};r.exports=y}),73773:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={GetNext:e(3504),IsSize:e(28621),IsValue:e(2018)}}),81429:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=new u({initialize:function(l){l===void 0&&(l=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],l&&this.init(l)},rnd:function(){var d=2091639*this.s0+this.c*23283064365386963e-26;return this.c=d|0,this.s0=this.s1,this.s1=this.s2,this.s2=d-this.c,this.s2},hash:function(d){var l,h=this.n;d=d.toString();for(var n=0;n<d.length;n++)h+=d.charCodeAt(n),l=.02519603282416938*h,h=l>>>0,l-=h,l*=h,h=l>>>0,l-=h,h+=l*4294967296;return this.n=h,(h>>>0)*23283064365386963e-26},init:function(d){typeof d=="string"?this.state(d):this.sow(d)},sow:function(d){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!d)for(var l=0;l<d.length&&d[l]!=null;l++){var h=d[l];this.s0-=this.hash(h),this.s0+=~~(this.s0<0),this.s1-=this.hash(h),this.s1+=~~(this.s1<0),this.s2-=this.hash(h),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(d,l){return Math.floor(this.realInRange(0,l-d+1)+d)},between:function(d,l){return Math.floor(this.realInRange(0,l-d+1)+d)},realInRange:function(d,l){return this.frac()*(l-d)+d},normal:function(){return 1-2*this.frac()},uuid:function(){var d="",l="";for(l=d="";d++<36;l+=~d%5|d*3&4?(d^15?8^this.frac()*(d^20?16:4):4).toString(16):"-");return l},pick:function(d){return d[this.integerInRange(0,d.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(d){return d[~~(Math.pow(this.frac(),2)*(d.length-1)+.5)]},timestamp:function(d,l){return this.realInRange(d||9466848e5,l||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(d){return typeof d=="string"&&d.match(/^!rnd/)&&(d=d.split(","),this.c=parseFloat(d[1]),this.s0=parseFloat(d[2]),this.s1=parseFloat(d[3]),this.s2=parseFloat(d[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(d){for(var l=d.length-1,h=l;h>0;h--){var n=Math.floor(this.frac()*(h+1)),a=d[n];d[n]=d[h],d[h]=a}return d}});r.exports=m}),82127:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d){return m===void 0&&(m=0),u===0?e:(e-=m,e=u*Math.ceil(e/u),d?(m+e)/u:m+e)};r.exports=y}),84314:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d){return m===void 0&&(m=0),u===0?e:(e-=m,e=u*Math.floor(e/u),d?(m+e)/u:m+e)};r.exports=y}),88462:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d){return m===void 0&&(m=0),u===0?e:(e-=m,e=u*Math.round(e/u),d?(m+e)/u:m+e)};r.exports=y}),23679:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Ceil:e(82127),Floor:e(84314),To:e(88462)}}),92491:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e(75205);var u=e(86459),m=e(98611),d={Actions:e(83979),Animations:e(13517),BlendModes:e(95723),Cache:e(45820),Cameras:e(44143),Core:e(80293),Class:e(56694),Create:e(84106),Curves:e(73962),Data:e(1999),Display:e(24816),DOM:e(3590),Events:e(95146),FX:e(96910),Game:e(15213),GameObjects:e(48013),Geom:e(84068),Input:e(20873),Loader:e(95695),Math:e(5923),Physics:e(53954),Plugins:e(45615),Renderer:e(42069),Scale:e(86754),ScaleModes:e(27394),Scene:e(87157),Scenes:e(20436),Structs:e(20010),Textures:e(87499),Tilemaps:e(52678),Time:e(97121),Tweens:e(75193),Utils:e(22178)};d.Sound=e(56751),d=m(!1,d,u),r.exports=d,e.g.Phaser=d}),62832:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(7864),d=e(1539),l=new u({Extends:d,Mixins:[m.Acceleration,m.Angular,m.Bounce,m.Debug,m.Drag,m.Enable,m.Friction,m.Gravity,m.Immovable,m.Mass,m.Pushable,m.Size,m.Velocity],initialize:function(n,a,c,o,v){d.call(this,n,a,c,o,v),this.body=null}});r.exports=l}),66150:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(75606),d=e(53996),l=e(35032),h=e(99523),n=e(72632),a=e(30657),c=e(2732),o=e(15147),v=e(91963),g=e(7599),p=e(93736),x=e(85233),T=new u({initialize:function(M){this.scene=M,this.systems=M.sys,this.config=this.getConfig(),this.world,this.add,M.sys.events.once(g.BOOT,this.boot,this),M.sys.events.on(g.START,this.start,this)},boot:function(){this.world=new x(this.scene,this.config),this.add=new h(this.world),this.systems.events.once(g.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new x(this.scene,this.config),this.add=new h(this.world));var E=this.systems.events;n(this.config,"customUpdate",!1)||E.on(g.UPDATE,this.world.update,this.world),E.on(g.POST_UPDATE,this.world.postUpdate,this.world),E.once(g.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(g.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(g.UPDATE,this.world.update,this.world)},getConfig:function(){var E=this.systems.game.config.physics,M=this.systems.settings.physics,P=a(n(M,"arcade",{}),n(E,"arcade",{}));return P},overlap:function(E,M,P,w,R){return P===void 0&&(P=null),w===void 0&&(w=null),R===void 0&&(R=P),this.world.collideObjects(E,M,P,w,R,!0)},collide:function(E,M,P,w,R){return P===void 0&&(P=null),w===void 0&&(w=null),R===void 0&&(R=P),this.world.collideObjects(E,M,P,w,R,!1)},collideTiles:function(E,M,P,w,R){return this.world.collideTiles(E,M,P,w,R)},overlapTiles:function(E,M,P,w,R){return this.world.overlapTiles(E,M,P,w,R)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(E,M,P,w,R,A){w===void 0&&(w=60);var O=Math.atan2(P-E.y,M-E.x);return E.body.acceleration.setToPolar(O,w),R!==void 0&&A!==void 0&&E.body.maxVelocity.set(R,A),O},accelerateToObject:function(E,M,P,w,R){return this.accelerateTo(E,M.x,M.y,P,w,R)},closest:function(E,M){M||(M=this.world.bodies.entries);for(var P=Number.MAX_VALUE,w=null,R=E.x,A=E.y,O=M.length,F=0;F<O;F++){var b=M[F],D=b.body||b;if(!(E===b||E===D||E===D.gameObject||E===D.center)){var I=l(R,A,D.center.x,D.center.y);I<P&&(w=b,P=I)}}return w},furthest:function(E,M){M||(M=this.world.bodies.entries);for(var P=-1,w=null,R=E.x,A=E.y,O=M.length,F=0;F<O;F++){var b=M[F],D=b.body||b;if(!(E===b||E===D||E===D.gameObject||E===D.center)){var I=l(R,A,D.center.x,D.center.y);I>P&&(w=b,P=I)}}return w},moveTo:function(E,M,P,w,R){w===void 0&&(w=60),R===void 0&&(R=0);var A=Math.atan2(P-E.y,M-E.x);return R>0&&(w=d(E.x,E.y,M,P)/(R/1e3)),E.body.velocity.setToPolar(A,w),A},moveToObject:function(E,M,P,w){return this.moveTo(E,M.x,M.y,P,w)},velocityFromAngle:function(E,M,P){return M===void 0&&(M=60),P===void 0&&(P=new p),P.setToPolar(m(E),M)},velocityFromRotation:function(E,M,P){return M===void 0&&(M=60),P===void 0&&(P=new p),P.setToPolar(E,M)},overlapRect:function(E,M,P,w,R,A){return o(this.world,E,M,P,w,R,A)},overlapCirc:function(E,M,P,w,R){return c(this.world,E,M,P,w,R)},shutdown:function(){if(this.world){var E=this.systems.events;E.off(g.UPDATE,this.world.update,this.world),E.off(g.POST_UPDATE,this.world.postUpdate,this.world),E.off(g.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null}},destroy:function(){this.shutdown(),this.scene.sys.events.off(g.START,this.start,this),this.scene=null,this.systems=null}});v.register("ArcadePhysics",T,"arcadePhysics"),r.exports=T}),25084:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(7864),d=e(13747),l=new u({Extends:d,Mixins:[m.Acceleration,m.Angular,m.Bounce,m.Debug,m.Drag,m.Enable,m.Friction,m.Gravity,m.Immovable,m.Mass,m.Pushable,m.Size,m.Velocity],initialize:function(n,a,c,o,v){d.call(this,n,a,c,o,v),this.body=null}});r.exports=l}),97602:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(47401),d=e(27037),l=e(23701),h=e(74118),n=e(94287),a=e(93736),c=new u({initialize:function(v,g){var p=64,x=64,T={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},E=g!==void 0;E&&g.displayWidth&&(p=g.displayWidth,x=g.displayHeight),E||(g=T),this.world=v,this.gameObject=E?g:void 0,this.isBody=!0,this.transform={x:g.x,y:g.y,rotation:g.angle,scaleX:g.scaleX,scaleY:g.scaleY,displayOriginX:g.displayOriginX,displayOriginY:g.displayOriginY},this.debugShowBody=v.defaults.debugShowBody,this.debugShowVelocity=v.defaults.debugShowVelocity,this.debugBodyColor=v.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new a,this.position=new a(g.x-g.scaleX*g.displayOriginX,g.y-g.scaleY*g.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=g.angle,this.preRotation=g.angle,this.width=p,this.height=x,this.sourceWidth=p,this.sourceHeight=x,g.frame&&(this.sourceWidth=g.frame.realWidth,this.sourceHeight=g.frame.realHeight),this.halfWidth=Math.abs(p/2),this.halfHeight=Math.abs(x/2),this.center=new a(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new a,this.newVelocity=new a,this.deltaMax=new a,this.acceleration=new a,this.allowDrag=!0,this.drag=new a,this.allowGravity=!0,this.gravity=new a,this.bounce=new a,this.worldBounce=null,this.customBoundsRectangle=v.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new a(1e4,1e4),this.maxSpeed=-1,this.friction=new a(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=m.FACING_NONE,this.immovable=!1,this.pushable=!0,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.syncBounds=!1,this.physicsType=m.DYNAMIC_BODY,this._sx=g.scaleX,this._sy=g.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new h},updateBounds:function(){var o=this.gameObject,v=this.transform;if(o.parentContainer){var g=o.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);v.x=g.tx,v.y=g.ty,v.rotation=l(g.rotation),v.scaleX=g.scaleX,v.scaleY=g.scaleY,v.displayOriginX=o.displayOriginX,v.displayOriginY=o.displayOriginY}else v.x=o.x,v.y=o.y,v.rotation=o.angle,v.scaleX=o.scaleX,v.scaleY=o.scaleY,v.displayOriginX=o.displayOriginX,v.displayOriginY=o.displayOriginY;var p=!1;if(this.syncBounds){var x=o.getBounds(this._bounds);this.width=x.width,this.height=x.height,p=!0}else{var T=Math.abs(v.scaleX),E=Math.abs(v.scaleY);(this._sx!==T||this._sy!==E)&&(this.width=this.sourceWidth*T,this.height=this.sourceHeight*E,this._sx=T,this._sy=E,p=!0)}p&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var o=this.transform;this.position.x=o.x+o.scaleX*(this.offset.x-o.displayOriginX),this.position.y=o.y+o.scaleY*(this.offset.y-o.displayOriginY),this.updateCenter()},resetFlags:function(o){o===void 0&&(o=!1);var v=this.wasTouching,g=this.touching,p=this.blocked;o?(v.none=!0,v.up=!1,v.down=!1,v.left=!1,v.right=!1):(v.none=g.none,v.up=g.up,v.down=g.down,v.left=g.left,v.right=g.right),g.none=!0,g.up=!1,g.down=!1,g.left=!1,g.right=!1,p.none=!0,p.up=!1,p.down=!1,p.left=!1,p.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(o,v){o&&this.resetFlags(),this.gameObject&&this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves&&(this.prev.x=this.position.x,this.prev.y=this.position.y,this.prevFrame.x=this.position.x,this.prevFrame.y=this.position.y),o&&this.update(v)},update:function(o){if(this.prev.x=this.position.x,this.prev.y=this.position.y,this.moves){this.world.updateMotion(this,o);var v=this.velocity.x,g=this.velocity.y;this.newVelocity.set(v*o,g*o),this.position.add(this.newVelocity),this.updateCenter(),this.angle=Math.atan2(g,v),this.speed=Math.sqrt(v*v+g*g),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(d.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)}this._dx=this.position.x-this.prev.x,this._dy=this.position.y-this.prev.y},postUpdate:function(){var o=this.position.x-this.prevFrame.x,v=this.position.y-this.prevFrame.y,g=this.gameObject;if(this.moves){var p=this.deltaMax.x,x=this.deltaMax.y;p!==0&&o!==0&&(o<0&&o<-p?o=-p:o>0&&o>p&&(o=p)),x!==0&&v!==0&&(v<0&&v<-x?v=-x:v>0&&v>x&&(v=x)),g&&(g.x+=o,g.y+=v)}o<0?this.facing=m.FACING_LEFT:o>0&&(this.facing=m.FACING_RIGHT),v<0?this.facing=m.FACING_UP:v>0&&(this.facing=m.FACING_DOWN),this.allowRotation&&g&&(g.angle+=this.deltaZ()),this._tx=o,this._ty=v},setBoundsRectangle:function(o){return this.customBoundsRectangle=o||this.world.bounds,this},checkWorldBounds:function(){var o=this.position,v=this.customBoundsRectangle,g=this.world.checkCollision,p=this.worldBounce?-this.worldBounce.x:-this.bounce.x,x=this.worldBounce?-this.worldBounce.y:-this.bounce.y,T=!1;return o.x<v.x&&g.left?(o.x=v.x,this.velocity.x*=p,this.blocked.left=!0,T=!0):this.right>v.right&&g.right&&(o.x=v.right-this.width,this.velocity.x*=p,this.blocked.right=!0,T=!0),o.y<v.y&&g.up?(o.y=v.y,this.velocity.y*=x,this.blocked.up=!0,T=!0):this.bottom>v.bottom&&g.down&&(o.y=v.bottom-this.height,this.velocity.y*=x,this.blocked.down=!0,T=!0),T&&(this.blocked.none=!1,this.updateCenter()),T},setOffset:function(o,v){return v===void 0&&(v=o),this.offset.set(o,v),this},setGameObject:function(o,v){return v===void 0&&(v=!0),this.world.remove(this),this.gameObject&&this.gameObject.body&&(this.gameObject.body=null),this.gameObject=o,o.body&&(o.body=this),this.setSize(),this.world.add(this),this.enable=v,this},setSize:function(o,v,g){g===void 0&&(g=!0);var p=this.gameObject;if(p&&(!o&&p.frame&&(o=p.frame.realWidth),!v&&p.frame&&(v=p.frame.realHeight)),this.sourceWidth=o,this.sourceHeight=v,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),g&&p&&p.getCenter){var x=(p.width-o)/2,T=(p.height-v)/2;this.offset.set(x,T)}return this.isCircle=!1,this.radius=0,this},setCircle:function(o,v,g){return v===void 0&&(v=this.offset.x),g===void 0&&(g=this.offset.y),o>0?(this.isCircle=!0,this.radius=o,this.sourceWidth=o*2,this.sourceHeight=o*2,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(v,g),this.updateCenter()):this.isCircle=!1,this},reset:function(o,v){this.stop();var g=this.gameObject;g&&(g.setPosition(o,v),this.rotation=g.angle,this.preRotation=g.angle);var p=this.position;g&&g.getTopLeft?g.getTopLeft(p):p.set(o,v),this.prev.copy(p),this.prevFrame.copy(p),g&&this.updateBounds(),this.updateCenter(),this.collideWorldBounds&&this.checkWorldBounds(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(o){return o.x=this.x,o.y=this.y,o.right=this.right,o.bottom=this.bottom,o},hitTest:function(o,v){if(!this.isCircle)return n(this,o,v);if(this.radius>0&&o>=this.left&&o<=this.right&&v>=this.top&&v<=this.bottom){var g=(this.center.x-o)*(this.center.x-o),p=(this.center.y-v)*(this.center.y-v);return g+p<=this.radius*this.radius}return!1},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(o){var v=this.position,g=v.x+this.halfWidth,p=v.y+this.halfHeight;this.debugShowBody&&(o.lineStyle(o.defaultStrokeWidth,this.debugBodyColor),this.isCircle?o.strokeCircle(g,p,this.width/2):(this.checkCollision.up&&o.lineBetween(v.x,v.y,v.x+this.width,v.y),this.checkCollision.right&&o.lineBetween(v.x+this.width,v.y,v.x+this.width,v.y+this.height),this.checkCollision.down&&o.lineBetween(v.x,v.y+this.height,v.x+this.width,v.y+this.height),this.checkCollision.left&&o.lineBetween(v.x,v.y,v.x,v.y+this.height))),this.debugShowVelocity&&(o.lineStyle(o.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),o.lineBetween(g,p,g+this.velocity.x/2,p+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function(o,v,g,p){o===void 0&&(o=!0),this.collideWorldBounds=o;var x=v!==void 0,T=g!==void 0;return(x||T)&&(this.worldBounce||(this.worldBounce=new a),x&&(this.worldBounce.x=v),T&&(this.worldBounce.y=g)),p!==void 0&&(this.onWorldBounds=p),this},setVelocity:function(o,v){return this.velocity.set(o,v),o=this.velocity.x,v=this.velocity.y,this.speed=Math.sqrt(o*o+v*v),this},setVelocityX:function(o){return this.setVelocity(o,this.velocity.y)},setVelocityY:function(o){return this.setVelocity(this.velocity.x,o)},setMaxVelocity:function(o,v){return this.maxVelocity.set(o,v),this},setMaxVelocityX:function(o){return this.maxVelocity.x=o,this},setMaxVelocityY:function(o){return this.maxVelocity.y=o,this},setMaxSpeed:function(o){return this.maxSpeed=o,this},setBounce:function(o,v){return this.bounce.set(o,v),this},setBounceX:function(o){return this.bounce.x=o,this},setBounceY:function(o){return this.bounce.y=o,this},setAcceleration:function(o,v){return this.acceleration.set(o,v),this},setAccelerationX:function(o){return this.acceleration.x=o,this},setAccelerationY:function(o){return this.acceleration.y=o,this},setAllowDrag:function(o){return o===void 0&&(o=!0),this.allowDrag=o,this},setAllowGravity:function(o){return o===void 0&&(o=!0),this.allowGravity=o,this},setAllowRotation:function(o){return o===void 0&&(o=!0),this.allowRotation=o,this},setDrag:function(o,v){return this.drag.set(o,v),this},setDamping:function(o){return this.useDamping=o,this},setDragX:function(o){return this.drag.x=o,this},setDragY:function(o){return this.drag.y=o,this},setGravity:function(o,v){return this.gravity.set(o,v),this},setGravityX:function(o){return this.gravity.x=o,this},setGravityY:function(o){return this.gravity.y=o,this},setFriction:function(o,v){return this.friction.set(o,v),this},setFrictionX:function(o){return this.friction.x=o,this},setFrictionY:function(o){return this.friction.y=o,this},setAngularVelocity:function(o){return this.angularVelocity=o,this},setAngularAcceleration:function(o){return this.angularAcceleration=o,this},setAngularDrag:function(o){return this.angularDrag=o,this},setMass:function(o){return this.mass=o,this},setImmovable:function(o){return o===void 0&&(o=!0),this.immovable=o,this},setEnable:function(o){return o===void 0&&(o=!0),this.enable=o,this},processX:function(o,v,g,p){this.x+=o,this.updateCenter(),v!==null&&(this.velocity.x=v);var x=this.blocked;g&&(x.left=!0,x.none=!1),p&&(x.right=!0,x.none=!1)},processY:function(o,v,g,p){this.y+=o,this.updateCenter(),v!==null&&(this.velocity.y=v);var x=this.blocked;g&&(x.up=!0,x.none=!1),p&&(x.down=!0,x.none=!1)},x:{get:function(){return this.position.x},set:function(o){this.position.x=o}},y:{get:function(){return this.position.y},set:function(o){this.position.y=o}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});r.exports=c}),3909:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=new u({initialize:function(l,h,n,a,c,o,v){this.world=l,this.name="",this.active=!0,this.overlapOnly=h,this.object1=n,this.object2=a,this.collideCallback=c,this.processCallback=o,this.callbackContext=v},setName:function(d){return this.name=d,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});r.exports=m}),99523:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(62832),m=e(25084),d=e(97602),l=e(56694),h=e(47401),n=e(10481),a=e(66634),c=e(46346),o=new l({initialize:function(g){this.world=g,this.scene=g.scene,this.sys=g.scene.sys},collider:function(v,g,p,x,T){return this.world.addCollider(v,g,p,x,T)},overlap:function(v,g,p,x,T){return this.world.addOverlap(v,g,p,x,T)},existing:function(v,g){var p=g?h.STATIC_BODY:h.DYNAMIC_BODY;return this.world.enableBody(v,p),v},staticImage:function(v,g,p,x){var T=new u(this.scene,v,g,p,x);return this.sys.displayList.add(T),this.world.enableBody(T,h.STATIC_BODY),T},image:function(v,g,p,x){var T=new u(this.scene,v,g,p,x);return this.sys.displayList.add(T),this.world.enableBody(T,h.DYNAMIC_BODY),T},staticSprite:function(v,g,p,x){var T=new m(this.scene,v,g,p,x);return this.sys.displayList.add(T),this.sys.updateList.add(T),this.world.enableBody(T,h.STATIC_BODY),T},sprite:function(v,g,p,x){var T=new m(this.scene,v,g,p,x);return this.sys.displayList.add(T),this.sys.updateList.add(T),this.world.enableBody(T,h.DYNAMIC_BODY),T},staticGroup:function(v,g){return this.sys.updateList.add(new c(this.world,this.world.scene,v,g))},group:function(v,g){return this.sys.updateList.add(new n(this.world,this.world.scene,v,g))},body:function(v,g,p,x){var T=new d(this.world);return T.position.set(v,g),p&&x&&T.setSize(p,x),this.world.add(T,h.DYNAMIC_BODY),T},staticBody:function(v,g,p,x){var T=new a(this.world);return T.position.set(v,g),p&&x&&T.setSize(p,x),this.world.add(T,h.STATIC_BODY),T},destroy:function(){this.world=null,this.scene=null,this.sys=null}});r.exports=o}),75671:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(47401),m=function(d,l,h,n){var a=0,c=d.deltaAbsX()+l.deltaAbsX()+n;return d._dx===0&&l._dx===0?(d.embedded=!0,l.embedded=!0):d._dx>l._dx?(a=d.right-l.x,a>c&&!h||d.checkCollision.right===!1||l.checkCollision.left===!1?a=0:(d.touching.none=!1,d.touching.right=!0,l.touching.none=!1,l.touching.left=!0,l.physicsType===u.STATIC_BODY&&!h&&(d.blocked.none=!1,d.blocked.right=!0),d.physicsType===u.STATIC_BODY&&!h&&(l.blocked.none=!1,l.blocked.left=!0))):d._dx<l._dx&&(a=d.x-l.width-l.x,-a>c&&!h||d.checkCollision.left===!1||l.checkCollision.right===!1?a=0:(d.touching.none=!1,d.touching.left=!0,l.touching.none=!1,l.touching.right=!0,l.physicsType===u.STATIC_BODY&&!h&&(d.blocked.none=!1,d.blocked.left=!0),d.physicsType===u.STATIC_BODY&&!h&&(l.blocked.none=!1,l.blocked.right=!0))),d.overlapX=a,l.overlapX=a,a};r.exports=m}),66185:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(47401),m=function(d,l,h,n){var a=0,c=d.deltaAbsY()+l.deltaAbsY()+n;return d._dy===0&&l._dy===0?(d.embedded=!0,l.embedded=!0):d._dy>l._dy?(a=d.bottom-l.y,a>c&&!h||d.checkCollision.down===!1||l.checkCollision.up===!1?a=0:(d.touching.none=!1,d.touching.down=!0,l.touching.none=!1,l.touching.up=!0,l.physicsType===u.STATIC_BODY&&!h&&(d.blocked.none=!1,d.blocked.down=!0),d.physicsType===u.STATIC_BODY&&!h&&(l.blocked.none=!1,l.blocked.up=!0))):d._dy<l._dy&&(a=d.y-l.bottom,-a>c&&!h||d.checkCollision.up===!1||l.checkCollision.down===!1?a=0:(d.touching.none=!1,d.touching.up=!0,l.touching.none=!1,l.touching.down=!0,l.physicsType===u.STATIC_BODY&&!h&&(d.blocked.none=!1,d.blocked.up=!0),d.physicsType===u.STATIC_BODY&&!h&&(l.blocked.none=!1,l.blocked.down=!0))),d.overlapY=a,l.overlapY=a,a};r.exports=m}),10481:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(25084),m=e(56694),d=e(47401),l=e(72632),h=e(59192),n=e(42911),a=new m({Extends:h,initialize:function(o,v,g,p){if(!g&&!p)p={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else if(n(g))p=g,g=null,p.internalCreateCallback=this.createCallbackHandler,p.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(g)&&n(g[0])){p=g[0];var x=this;g.forEach(function(T){T.internalCreateCallback=x.createCallbackHandler,T.internalRemoveCallback=x.removeCallbackHandler}),g=null}else p={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=o,p.classType=l(p,"classType",u),this.physicsType=d.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:l(p,"collideWorldBounds",!1),setBoundsRectangle:l(p,"customBoundsRectangle",null),setAccelerationX:l(p,"accelerationX",0),setAccelerationY:l(p,"accelerationY",0),setAllowDrag:l(p,"allowDrag",!0),setAllowGravity:l(p,"allowGravity",!0),setAllowRotation:l(p,"allowRotation",!0),setDamping:l(p,"useDamping",!1),setBounceX:l(p,"bounceX",0),setBounceY:l(p,"bounceY",0),setDragX:l(p,"dragX",0),setDragY:l(p,"dragY",0),setEnable:l(p,"enable",!0),setGravityX:l(p,"gravityX",0),setGravityY:l(p,"gravityY",0),setFrictionX:l(p,"frictionX",0),setFrictionY:l(p,"frictionY",0),setMaxSpeed:l(p,"maxSpeed",-1),setMaxVelocityX:l(p,"maxVelocityX",1e4),setMaxVelocityY:l(p,"maxVelocityY",1e4),setVelocityX:l(p,"velocityX",0),setVelocityY:l(p,"velocityY",0),setAngularVelocity:l(p,"angularVelocity",0),setAngularAcceleration:l(p,"angularAcceleration",0),setAngularDrag:l(p,"angularDrag",0),setMass:l(p,"mass",1),setImmovable:l(p,"immovable",!1)},h.call(this,v,g,p),this.type="PhysicsGroup"},createCallbackHandler:function(c){c.body||this.world.enableBody(c,d.DYNAMIC_BODY);var o=c.body;for(var v in this.defaults)o[v](this.defaults[v])},removeCallbackHandler:function(c){c.body&&this.world.disableBody(c)},setVelocity:function(c,o,v){v===void 0&&(v=0);for(var g=this.getChildren(),p=0;p<g.length;p++)g[p].body.velocity.set(c+p*v,o+p*v);return this},setVelocityX:function(c,o){o===void 0&&(o=0);for(var v=this.getChildren(),g=0;g<v.length;g++)v[g].body.velocity.x=c+g*o;return this},setVelocityY:function(c,o){o===void 0&&(o=0);for(var v=this.getChildren(),g=0;g<v.length;g++)v[g].body.velocity.y=c+g*o;return this}});r.exports=a}),22916:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y,e,u,m,d,l,h,n,a,c,o,v,g,p,x,T,E,M=function(F,b,D){y=F,e=b;var I=y.velocity.x,B=e.velocity.x;return u=y.pushable,a=y._dx<0,c=y._dx>0,o=y._dx===0,x=Math.abs(y.right-e.x)<=Math.abs(e.right-y.x),h=B-I*y.bounce.x,m=e.pushable,v=e._dx<0,g=e._dx>0,p=e._dx===0,T=!x,n=I-B*e.bounce.x,E=Math.abs(D),P()},P=function(){return c&&x&&e.blocked.right?(y.processX(-E,h,!1,!0),1):a&&T&&e.blocked.left?(y.processX(E,h,!0),1):g&&T&&y.blocked.right?(e.processX(-E,n,!1,!0),2):v&&x&&y.blocked.left?(e.processX(E,n,!0),2):0},w=function(){var F=y.velocity.x,b=e.velocity.x,D=Math.sqrt(b*b*e.mass/y.mass)*(b>0?1:-1),I=Math.sqrt(F*F*y.mass/e.mass)*(F>0?1:-1),B=(D+I)*.5;return D-=B,I-=B,d=B+D*y.bounce.x,l=B+I*e.bounce.x,a&&T?R(0):v&&x?R(1):c&&x?R(2):g&&T?R(3):!1},R=function(F){if(u&&m)E*=.5,F===0||F===3?(y.processX(E,d),e.processX(-E,l)):(y.processX(-E,d),e.processX(E,l));else if(u&&!m)F===0||F===3?y.processX(E,h,!0):y.processX(-E,h,!1,!0);else if(!u&&m)F===0||F===3?e.processX(-E,n,!1,!0):e.processX(E,n,!0);else{var b=E*.5;F===0?p?(y.processX(E,0,!0),e.processX(0,null,!1,!0)):g?(y.processX(b,0,!0),e.processX(-b,0,!1,!0)):(y.processX(b,e.velocity.x,!0),e.processX(-b,null,!1,!0)):F===1?o?(y.processX(0,null,!1,!0),e.processX(E,0,!0)):c?(y.processX(-b,0,!1,!0),e.processX(b,0,!0)):(y.processX(-b,null,!1,!0),e.processX(b,y.velocity.x,!0)):F===2?p?(y.processX(-E,0,!1,!0),e.processX(0,null,!0)):v?(y.processX(-b,0,!1,!0),e.processX(b,0,!0)):(y.processX(-b,e.velocity.x,!1,!0),e.processX(b,null,!0)):F===3&&(o?(y.processX(0,null,!0),e.processX(-E,0,!1,!0)):a?(y.processX(b,0,!0),e.processX(-b,0,!1,!0)):(y.processX(b,e.velocity.y,!0),e.processX(-b,null,!1,!0)))}return!0},A=function(F){F===1?e.velocity.x=0:x?e.processX(E,n,!0):e.processX(-E,n,!1,!0),y.moves&&(e.y+=(y.y-y.prev.y)*y.friction.y,e._dy=e.y-e.prev.y)},O=function(F){F===2?y.velocity.x=0:T?y.processX(E,h,!0):y.processX(-E,h,!1,!0),e.moves&&(y.y+=(e.y-e.prev.y)*e.friction.y,y._dy=y.y-y.prev.y)};r.exports={BlockCheck:P,Check:w,Set:M,Run:R,RunImmovableBody1:A,RunImmovableBody2:O}}),67050:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y,e,u,m,d,l,h,n,a,c,o,v,g,p,x,T,E,M=function(F,b,D){y=F,e=b;var I=y.velocity.y,B=e.velocity.y;return u=y.pushable,a=y._dy<0,c=y._dy>0,o=y._dy===0,x=Math.abs(y.bottom-e.y)<=Math.abs(e.bottom-y.y),h=B-I*y.bounce.y,m=e.pushable,v=e._dy<0,g=e._dy>0,p=e._dy===0,T=!x,n=I-B*e.bounce.y,E=Math.abs(D),P()},P=function(){return c&&x&&e.blocked.down?(y.processY(-E,h,!1,!0),1):a&&T&&e.blocked.up?(y.processY(E,h,!0),1):g&&T&&y.blocked.down?(e.processY(-E,n,!1,!0),2):v&&x&&y.blocked.up?(e.processY(E,n,!0),2):0},w=function(){var F=y.velocity.y,b=e.velocity.y,D=Math.sqrt(b*b*e.mass/y.mass)*(b>0?1:-1),I=Math.sqrt(F*F*y.mass/e.mass)*(F>0?1:-1),B=(D+I)*.5;return D-=B,I-=B,d=B+D*y.bounce.y,l=B+I*e.bounce.y,a&&T?R(0):v&&x?R(1):c&&x?R(2):g&&T?R(3):!1},R=function(F){if(u&&m)E*=.5,F===0||F===3?(y.processY(E,d),e.processY(-E,l)):(y.processY(-E,d),e.processY(E,l));else if(u&&!m)F===0||F===3?y.processY(E,h,!0):y.processY(-E,h,!1,!0);else if(!u&&m)F===0||F===3?e.processY(-E,n,!1,!0):e.processY(E,n,!0);else{var b=E*.5;F===0?p?(y.processY(E,0,!0),e.processY(0,null,!1,!0)):g?(y.processY(b,0,!0),e.processY(-b,0,!1,!0)):(y.processY(b,e.velocity.y,!0),e.processY(-b,null,!1,!0)):F===1?o?(y.processY(0,null,!1,!0),e.processY(E,0,!0)):c?(y.processY(-b,0,!1,!0),e.processY(b,0,!0)):(y.processY(-b,null,!1,!0),e.processY(b,y.velocity.y,!0)):F===2?p?(y.processY(-E,0,!1,!0),e.processY(0,null,!0)):v?(y.processY(-b,0,!1,!0),e.processY(b,0,!0)):(y.processY(-b,e.velocity.y,!1,!0),e.processY(b,null,!0)):F===3&&(o?(y.processY(0,null,!0),e.processY(-E,0,!1,!0)):a?(y.processY(b,0,!0),e.processY(-b,0,!1,!0)):(y.processY(b,e.velocity.y,!0),e.processY(-b,null,!1,!0)))}return!0},A=function(F){F===1?e.velocity.y=0:x?e.processY(E,n,!0):e.processY(-E,n,!1,!0),y.moves&&(e.x+=(y.x-y.prev.x)*y.friction.x,e._dx=e.x-e.prev.x)},O=function(F){F===2?y.velocity.y=0:T?y.processY(E,h,!0):y.processY(-E,h,!1,!0),e.moves&&(y.x+=(e.x-e.prev.x)*e.friction.x,y._dx=y.x-y.prev.x)};r.exports={BlockCheck:P,Check:w,Set:M,Run:R,RunImmovableBody1:A,RunImmovableBody2:O}}),61777:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(75671),m=e(22916),d=function(l,h,n,a,c){c===void 0&&(c=u(l,h,n,a));var o=l.immovable,v=h.immovable;if(n||c===0||o&&v||l.customSeparateX||h.customSeparateX)return c!==0||l.embedded&&h.embedded;var g=m.Set(l,h,c);return!o&&!v?g>0?!0:m.Check():(o?m.RunImmovableBody1(g):v&&m.RunImmovableBody2(g),!0)};r.exports=d}),25299:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(66185),m=e(67050),d=function(l,h,n,a,c){c===void 0&&(c=u(l,h,n,a));var o=l.immovable,v=h.immovable;if(n||c===0||o&&v||l.customSeparateY||h.customSeparateY)return c!==0||l.embedded&&h.embedded;var g=m.Set(l,h,c);return!o&&!v?g>0?!0:m.Check():(o?m.RunImmovableBody1(g):v&&m.RunImmovableBody2(g),!0)};r.exports=d}),66634:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(65650),m=e(56694),d=e(47401),l=e(94287),h=e(93736),n=new m({initialize:function(c,o){var v=64,g=64,p={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},x=o!==void 0;x&&o.displayWidth&&(v=o.displayWidth,g=o.displayHeight),x||(o=p),this.world=c,this.gameObject=x?o:void 0,this.isBody=!0,this.debugShowBody=c.defaults.debugShowStaticBody,this.debugBodyColor=c.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new h,this.position=new h(o.x-v*o.originX,o.y-g*o.originY),this.width=v,this.height=g,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new h(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=h.ZERO,this.allowGravity=!1,this.gravity=h.ZERO,this.bounce=h.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=d.STATIC_BODY,this._dx=0,this._dy=0},setGameObject:function(a,c){return a&&a!==this.gameObject&&(this.gameObject.body=null,a.body=this,this.gameObject=a),c&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var a=this.gameObject;return a.getTopLeft(this.position),this.width=a.displayWidth,this.height=a.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(a,c){return c===void 0&&(c=a),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(a,c),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(a,c,o){o===void 0&&(o=!0);var v=this.gameObject;if(!a&&v.frame&&(a=v.frame.realWidth),!c&&v.frame&&(c=v.frame.realHeight),this.world.staticTree.remove(this),this.width=a,this.height=c,this.halfWidth=Math.floor(a/2),this.halfHeight=Math.floor(c/2),o&&v.getCenter){var g=v.displayWidth/2,p=v.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(g-this.halfWidth,p-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(a,c,o){return c===void 0&&(c=this.offset.x),o===void 0&&(o=this.offset.y),a>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=a,this.width=a*2,this.height=a*2,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(c,o),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(a,c){var o=this.gameObject;a===void 0&&(a=o.x),c===void 0&&(c=o.y),this.world.staticTree.remove(this),o.setPosition(a,c),o.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(a){return a.x=this.x,a.y=this.y,a.right=this.right,a.bottom=this.bottom,a},hitTest:function(a,c){return this.isCircle?u(this,a,c):l(this,a,c)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(a){var c=this.position,o=c.x+this.halfWidth,v=c.y+this.halfHeight;this.debugShowBody&&(a.lineStyle(a.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?a.strokeCircle(o,v,this.width/2):a.strokeRect(c.x,c.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(a){return a<=0&&(a=.1),this.mass=a,this},x:{get:function(){return this.position.x},set:function(a){this.world.staticTree.remove(this),this.position.x=a,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(a){this.world.staticTree.remove(this),this.position.y=a,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});r.exports=n}),46346:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(25084),m=e(56694),d=e(47401),l=e(72632),h=e(59192),n=e(42911),a=new m({Extends:h,initialize:function(o,v,g,p){!g&&!p?p={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:u}:n(g)?(p=g,g=null,p.internalCreateCallback=this.createCallbackHandler,p.internalRemoveCallback=this.removeCallbackHandler,p.createMultipleCallback=this.createMultipleCallbackHandler,p.classType=l(p,"classType",u)):Array.isArray(g)&&n(g[0])?(p=g,g=null,p.forEach(function(x){x.internalCreateCallback=this.createCallbackHandler,x.internalRemoveCallback=this.removeCallbackHandler,x.createMultipleCallback=this.createMultipleCallbackHandler,x.classType=l(x,"classType",u)})):p={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=o,this.physicsType=d.STATIC_BODY,h.call(this,v,g,p),this.type="StaticPhysicsGroup"},createCallbackHandler:function(c){c.body||this.world.enableBody(c,d.STATIC_BODY)},removeCallbackHandler:function(c){c.body&&this.world.disableBody(c)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var c=this.children.entries,o=0;o<c.length;o++)c[o].body.reset();return this}});r.exports=a}),85233:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(94240),m=e(97602),d=e(82897),l=e(56694),h=e(3909),n=e(47401),a=e(53996),c=e(92951),o=e(6659),v=e(27037),g=e(88456),p=e(41935),x=e(54726),T=e(75671),E=e(66185),M=e(44662),P=e(10850),w=e(83392),R=e(74623),A=e(25163),O=e(74118),F=e(68687),b=e(27354),D=e(61777),I=e(25299),B=e(58403),z=e(66634),Y=e(28808),X=e(69360),H=e(93736),N=e(1071),U=new l({Extends:o,initialize:function(G,V){o.call(this),this.scene=G,this.bodies=new B,this.staticBodies=new B,this.pendingDestroy=new B,this.colliders=new R,this.gravity=new H(P(V,"gravity.x",0),P(V,"gravity.y",0)),this.bounds=new O(P(V,"x",0),P(V,"y",0),P(V,"width",G.sys.scale.width),P(V,"height",G.sys.scale.height)),this.checkCollision={up:P(V,"checkCollision.up",!0),down:P(V,"checkCollision.down",!0),left:P(V,"checkCollision.left",!0),right:P(V,"checkCollision.right",!0)},this.fps=P(V,"fps",60),this.fixedStep=P(V,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=P(V,"timeScale",1),this.OVERLAP_BIAS=P(V,"overlapBias",4),this.TILE_BIAS=P(V,"tileBias",16),this.forceX=P(V,"forceX",!1),this.isPaused=P(V,"isPaused",!1),this._total=0,this.drawDebug=P(V,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:P(V,"debugShowBody",!0),debugShowStaticBody:P(V,"debugShowStaticBody",!0),debugShowVelocity:P(V,"debugShowVelocity",!0),bodyDebugColor:P(V,"debugBodyColor",16711935),staticBodyDebugColor:P(V,"debugStaticBodyColor",255),velocityDebugColor:P(V,"debugVelocityColor",65280)},this.maxEntries=P(V,"maxEntries",16),this.useTree=P(V,"useTree",!0),this.tree=new F(this.maxEntries),this.staticTree=new F(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new X,this._tempMatrix2=new X,this.tileFilterOptions={isColliding:!0,isNotEmpty:!0,hasInterestingFace:!0},this.drawDebug&&this.createDebugGraphic()},enable:function(L,G){G===void 0&&(G=n.DYNAMIC_BODY),Array.isArray(L)||(L=[L]);for(var V=0;V<L.length;V++){var k=L[V];if(k.isParent)for(var W=k.getChildren(),$=0;$<W.length;$++){var K=W[$];K.isParent?this.enable(K,G):this.enableBody(K,G)}else this.enableBody(k,G)}},enableBody:function(L,G){return G===void 0&&(G=n.DYNAMIC_BODY),L.hasTransformComponent&&(L.body||(G===n.DYNAMIC_BODY?L.body=new m(this,L):G===n.STATIC_BODY&&(L.body=new z(this,L))),this.add(L.body)),L},add:function(L){return L.physicsType===n.DYNAMIC_BODY?this.bodies.set(L):L.physicsType===n.STATIC_BODY&&(this.staticBodies.set(L),this.staticTree.insert(L)),L.enable=!0,L},disable:function(L){Array.isArray(L)||(L=[L]);for(var G=0;G<L.length;G++){var V=L[G];if(V.isParent)for(var k=V.getChildren(),W=0;W<k.length;W++){var $=k[W];$.isParent?this.disable($):this.disableBody($.body)}else this.disableBody(V.body)}},disableBody:function(L){this.remove(L),L.enable=!1},remove:function(L){L.physicsType===n.DYNAMIC_BODY?(this.tree.remove(L),this.bodies.delete(L)):L.physicsType===n.STATIC_BODY&&(this.staticBodies.delete(L),this.staticTree.remove(L))},createDebugGraphic:function(){var L=this.scene.sys.add.graphics({x:0,y:0});return L.setDepth(Number.MAX_VALUE),this.debugGraphic=L,this.drawDebug=!0,L},setBounds:function(L,G,V,k,W,$,K,j){return this.bounds.setTo(L,G,V,k),W!==void 0&&this.setBoundsCollision(W,$,K,j),this},setBoundsCollision:function(L,G,V,k){return L===void 0&&(L=!0),G===void 0&&(G=!0),V===void 0&&(V=!0),k===void 0&&(k=!0),this.checkCollision.left=L,this.checkCollision.right=G,this.checkCollision.up=V,this.checkCollision.down=k,this},pause:function(){return this.isPaused=!0,this.emit(v.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(v.RESUME),this},addCollider:function(L,G,V,k,W){V===void 0&&(V=null),k===void 0&&(k=null),W===void 0&&(W=V);var $=new h(this,!1,L,G,V,k,W);return this.colliders.add($),$},addOverlap:function(L,G,V,k,W){V===void 0&&(V=null),k===void 0&&(k=null),W===void 0&&(W=V);var $=new h(this,!0,L,G,V,k,W);return this.colliders.add($),$},removeCollider:function(L){return this.colliders.remove(L),this},setFPS:function(L){return this.fps=L,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(L,G){if(!(this.isPaused||this.bodies.size===0)){var V,k=this._frameTime,W=this._frameTimeMS*this.timeScale;this._elapsed+=G;var $,K=this.bodies.entries,j=this._elapsed>=W;for(this.fixedStep||(k=G*.001,j=!0,this._elapsed=0),V=0;V<K.length;V++)$=K[V],$.enable&&$.preUpdate(j,k);if(j){this._elapsed-=W,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(K));var Z=this.colliders.update();for(V=0;V<Z.length;V++){var J=Z[V];J.active&&J.update()}this.emit(v.WORLD_STEP,k)}for(;this._elapsed>=W;)this._elapsed-=W,this.step(k)}},step:function(L){var G,V,k=this.bodies.entries,W=k.length;for(G=0;G<W;G++)V=k[G],V.enable&&V.update(L);this.useTree&&(this.tree.clear(),this.tree.load(k));var $=this.colliders.update();for(G=0;G<$.length;G++){var K=$[G];K.active&&K.update()}this.emit(v.WORLD_STEP,L),this.stepsLastFrame++},postUpdate:function(){var L,G,V=this.bodies.entries,k=V.length,W=this.bodies,$=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,L=0;L<k;L++)G=V[L],G.enable&&G.postUpdate();if(this.drawDebug){var K=this.debugGraphic;for(K.clear(),L=0;L<k;L++)G=V[L],G.willDrawDebug()&&G.drawDebug(K);for(V=$.entries,k=V.length,L=0;L<k;L++)G=V[L],G.willDrawDebug()&&G.drawDebug(K)}var j=this.pendingDestroy;if(j.size>0){var Z=this.tree,J=this.staticTree;for(V=j.entries,k=V.length,L=0;L<k;L++)G=V[L],G.physicsType===n.DYNAMIC_BODY?(Z.remove(G),W.delete(G)):G.physicsType===n.STATIC_BODY&&(J.remove(G),$.delete(G)),G.world=void 0,G.gameObject=void 0;j.clear()}},updateMotion:function(L,G){L.allowRotation&&this.computeAngularVelocity(L,G),this.computeVelocity(L,G)},computeAngularVelocity:function(L,G){var V=L.angularVelocity,k=L.angularAcceleration,W=L.angularDrag,$=L.maxAngular;k?V+=k*G:L.allowDrag&&W&&(W*=G,p(V-W,0,.1)?V-=W:x(V+W,0,.1)?V+=W:V=0),V=d(V,-$,$);var K=V-L.angularVelocity;L.angularVelocity+=K,L.rotation+=L.angularVelocity*G},computeVelocity:function(L,G){var V=L.velocity.x,k=L.acceleration.x,W=L.drag.x,$=L.maxVelocity.x,K=L.velocity.y,j=L.acceleration.y,Z=L.drag.y,J=L.maxVelocity.y,Q=L.speed,_=L.maxSpeed,q=L.allowDrag,et=L.useDamping;L.allowGravity&&(V+=(this.gravity.x+L.gravity.x)*G,K+=(this.gravity.y+L.gravity.y)*G),k?V+=k*G:q&&W&&(et?(W=Math.pow(W,G),V*=W,Q=Math.sqrt(V*V+K*K),g(Q,0,.001)&&(V=0)):(W*=G,p(V-W,0,.01)?V-=W:x(V+W,0,.01)?V+=W:V=0)),j?K+=j*G:q&&Z&&(et?(Z=Math.pow(Z,G),K*=Z,Q=Math.sqrt(V*V+K*K),g(Q,0,.001)&&(K=0)):(Z*=G,p(K-Z,0,.01)?K-=Z:x(K+Z,0,.01)?K+=Z:K=0)),V=d(V,-$,$),K=d(K,-J,J),L.velocity.set(V,K),_>-1&&L.velocity.length()>_&&(L.velocity.normalize().scale(_),Q=_),L.speed=Q},separate:function(L,G,V,k,W){var $,K,j=!1,Z=!0;if(!L.enable||!G.enable||L.checkCollision.none||G.checkCollision.none||!this.intersects(L,G)||V&&V.call(k,L.gameObject,G.gameObject)===!1)return j;if(L.isCircle||G.isCircle){var J=this.separateCircle(L,G,W);J.result?(j=!0,Z=!1):($=J.x,K=J.y,Z=!0)}if(Z){var Q=!1,_=!1,q=this.OVERLAP_BIAS;W?(Q=D(L,G,W,q,$),_=I(L,G,W,q,K)):this.forceX||Math.abs(this.gravity.y+L.gravity.y)<Math.abs(this.gravity.x+L.gravity.x)?(Q=D(L,G,W,q,$),this.intersects(L,G)&&(_=I(L,G,W,q,K))):(_=I(L,G,W,q,K),this.intersects(L,G)&&(Q=D(L,G,W,q,$))),j=Q||_}return j&&(W?(L.onOverlap||G.onOverlap)&&this.emit(v.OVERLAP,L.gameObject,G.gameObject,L,G):(L.onCollide||G.onCollide)&&this.emit(v.COLLIDE,L.gameObject,G.gameObject,L,G)),j},separateCircle:function(L,G,V){T(L,G,!1,0),E(L,G,!1,0);var k=L.isCircle,W=G.isCircle,$=L.center,K=G.center,j=L.immovable,Z=G.immovable,J=L.velocity,Q=G.velocity,_=0,q=!0;if(k!==W){q=!1;var et=$.x,rt=$.y,ot=L.halfWidth,ht=G.position.x,tt=G.position.y,at=G.right,nt=G.bottom;W&&(et=K.x,rt=K.y,ot=G.halfWidth,ht=L.position.x,tt=L.position.y,at=L.right,nt=L.bottom),rt<tt?et<ht?_=a(et,rt,ht,tt)-ot:et>at&&(_=a(et,rt,at,tt)-ot):rt>nt&&(et<ht?_=a(et,rt,ht,nt)-ot:et>at&&(_=a(et,rt,at,nt)-ot)),_*=-1}else _=L.halfWidth+G.halfWidth-c($,K);L.overlapR=_,G.overlapR=_;var pt=u($,K),vt=(_+w.EPSILON)*Math.cos(pt),Lt=(_+w.EPSILON)*Math.sin(pt),wt={overlap:_,result:!1,x:vt,y:Lt};if(V&&(!q||q&&_!==0))return wt.result=!0,wt;if(!q&&_===0||j&&Z||L.customSeparateX||G.customSeparateX)return wt.x=void 0,wt.y=void 0,wt;var Tt=!L.pushable&&!G.pushable;if(q){var mt=$.x-K.x,Rt=$.y-K.y,Ut=Math.sqrt(Math.pow(mt,2)+Math.pow(Rt,2)),Kt=(K.x-$.x)/Ut||0,te=(K.y-$.y)/Ut||0,Ce=2*(J.x*Kt+J.y*te-Q.x*Kt-Q.y*te)/(L.mass+G.mass);(j||Z)&&(Ce*=2),j||(J.x=J.x-Ce/L.mass*Kt,J.y=J.y-Ce/L.mass*te,J.multiply(L.bounce)),Z||(Q.x=Q.x+Ce/G.mass*Kt,Q.y=Q.y+Ce/G.mass*te,Q.multiply(G.bounce)),!j&&!Z&&(vt*=.5,Lt*=.5),j||(L.x-=vt,L.y-=Lt,L.updateCenter()),Z||(G.x+=vt,G.y+=Lt,G.updateCenter()),wt.result=!0}else!j||L.pushable||Tt?(L.x-=vt,L.y-=Lt,L.updateCenter()):(!Z||G.pushable||Tt)&&(G.x+=vt,G.y+=Lt,G.updateCenter()),wt.x=void 0,wt.y=void 0;return wt},intersects:function(L,G){return L===G?!1:!L.isCircle&&!G.isCircle?!(L.right<=G.left||L.bottom<=G.top||L.left>=G.right||L.top>=G.bottom):L.isCircle?G.isCircle?c(L.center,G.center)<=L.halfWidth+G.halfWidth:this.circleBodyIntersects(L,G):this.circleBodyIntersects(G,L)},circleBodyIntersects:function(L,G){var V=d(L.center.x,G.left,G.right),k=d(L.center.y,G.top,G.bottom),W=(L.center.x-V)*(L.center.x-V),$=(L.center.y-k)*(L.center.y-k);return W+$<=L.halfWidth*L.halfWidth},overlap:function(L,G,V,k,W){return V===void 0&&(V=null),k===void 0&&(k=null),W===void 0&&(W=V),this.collideObjects(L,G,V,k,W,!0)},collide:function(L,G,V,k,W){return V===void 0&&(V=null),k===void 0&&(k=null),W===void 0&&(W=V),this.collideObjects(L,G,V,k,W,!1)},collideObjects:function(L,G,V,k,W,$){var K,j;L.isParent&&(L.physicsType===void 0||G===void 0||L===G)&&(L=L.children.entries),G&&G.isParent&&G.physicsType===void 0&&(G=G.children.entries);var Z=Array.isArray(L),J=Array.isArray(G);if(this._total=0,!Z&&!J)this.collideHandler(L,G,V,k,W,$);else if(!Z&&J)for(K=0;K<G.length;K++)this.collideHandler(L,G[K],V,k,W,$);else if(Z&&!J)if(G)for(K=0;K<L.length;K++)this.collideHandler(L[K],G,V,k,W,$);else for(K=0;K<L.length;K++){var Q=L[K];for(j=K+1;j<L.length;j++)K!==j&&this.collideHandler(Q,L[j],V,k,W,$)}else for(K=0;K<L.length;K++)for(j=0;j<G.length;j++)this.collideHandler(L[K],G[j],V,k,W,$);return this._total>0},collideHandler:function(L,G,V,k,W,$){if(G===void 0&&L.isParent)return this.collideGroupVsGroup(L,L,V,k,W,$);if(!L||!G)return!1;if(L.body||L.isBody){if(G.body||G.isBody)return this.collideSpriteVsSprite(L,G,V,k,W,$);if(G.isParent)return this.collideSpriteVsGroup(L,G,V,k,W,$);if(G.isTilemap)return this.collideSpriteVsTilemapLayer(L,G,V,k,W,$)}else if(L.isParent){if(G.body||G.isBody)return this.collideSpriteVsGroup(G,L,V,k,W,$);if(G.isParent)return this.collideGroupVsGroup(L,G,V,k,W,$);if(G.isTilemap)return this.collideGroupVsTilemapLayer(L,G,V,k,W,$)}else if(L.isTilemap){if(G.body||G.isBody)return this.collideSpriteVsTilemapLayer(G,L,V,k,W,$);if(G.isParent)return this.collideGroupVsTilemapLayer(G,L,V,k,W,$)}},collideSpriteVsSprite:function(L,G,V,k,W,$){var K=L.isBody?L:L.body,j=G.isBody?G:G.body;return!K||!j?!1:(this.separate(K,j,k,W,$)&&(V&&V.call(W,L,G),this._total++),!0)},collideSpriteVsGroup:function(L,G,V,k,W,$){var K=L.isBody?L:L.body;if(!(G.length===0||!K||!K.enable||K.checkCollision.none)){var j,Z,J;if(this.useTree||G.physicsType===n.STATIC_BODY){var Q=this.treeMinMax;Q.minX=K.left,Q.minY=K.top,Q.maxX=K.right,Q.maxY=K.bottom;var _=G.physicsType===n.DYNAMIC_BODY?this.tree.search(Q):this.staticTree.search(Q);for(Z=_.length,j=0;j<Z;j++)J=_[j],!(K===J||!J.enable||J.checkCollision.none||!G.contains(J.gameObject))&&this.separate(K,J,k,W,$)&&(V&&V.call(W,K.gameObject,J.gameObject),this._total++)}else{var q=G.getChildren(),et=G.children.entries.indexOf(L);for(Z=q.length,j=0;j<Z;j++)J=q[j].body,!(!J||j===et||!J.enable)&&this.separate(K,J,k,W,$)&&(V&&V.call(W,K.gameObject,J.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(L,G,V,k,W,$){var K=L.getChildren();if(K.length===0)return!1;for(var j=!1,Z=0;Z<K.length;Z++)(K[Z].body||K[Z].isBody)&&this.collideSpriteVsTilemapLayer(K[Z],G,V,k,W,$)&&(j=!0);return j},collideTiles:function(L,G,V,k,W){return G.length===0||L.body&&!L.body.enable||L.isBody&&!L.enable?!1:this.collideSpriteVsTilesHandler(L,G,V,k,W,!1,!1)},overlapTiles:function(L,G,V,k,W){return G.length===0||L.body&&!L.body.enable||L.isBody&&!L.enable?!1:this.collideSpriteVsTilesHandler(L,G,V,k,W,!0,!1)},collideSpriteVsTilemapLayer:function(L,G,V,k,W,$){var K=L.isBody?L:L.body;if(!K.enable||K.checkCollision.none)return!1;var j=K.x,Z=K.y,J=K.width,Q=K.height,_=G.layer;if(_.tileWidth>_.baseTileWidth){var q=(_.tileWidth-_.baseTileWidth)*G.scaleX;j-=q,J+=q}if(_.tileHeight>_.baseTileHeight){var et=(_.tileHeight-_.baseTileHeight)*G.scaleY;Q+=et}var rt=$?null:this.tileFilterOptions,ot=M(j,Z,J,Q,rt,G.scene.cameras.main,G.layer);return ot.length===0?!1:this.collideSpriteVsTilesHandler(L,ot,V,k,W,$,!0)},collideSpriteVsTilesHandler:function(L,G,V,k,W,$,K){for(var j=L.isBody?L:L.body,Z,J={left:0,right:0,top:0,bottom:0},Q,_=!1,q=0;q<G.length;q++){Z=G[q],Q=Z.tilemapLayer;var et=Q.tileToWorldXY(Z.x,Z.y);J.left=et.x,J.top=et.y,Z.baseHeight!==Z.height&&(J.top-=(Z.height-Z.baseHeight)*Q.scaleY),J.right=J.left+Z.width*Q.scaleX,J.bottom=J.top+Z.height*Q.scaleY,Y(J,j)&&(!k||k.call(W,L,Z))&&A(Z,L)&&($||b(q,j,Z,J,Q,this.TILE_BIAS,K))&&(this._total++,_=!0,V&&V.call(W,L,Z),$&&j.onOverlap?this.emit(v.TILE_OVERLAP,L,Z,j):j.onCollide&&this.emit(v.TILE_COLLIDE,L,Z,j))}return _},collideGroupVsGroup:function(L,G,V,k,W,$){if(!(L.length===0||G.length===0))for(var K=L.getChildren(),j=0;j<K.length;j++)this.collideSpriteVsGroup(K[j],G,V,k,W,$)},wrap:function(L,G){L.body?this.wrapObject(L,G):L.getChildren?this.wrapArray(L.getChildren(),G):Array.isArray(L)?this.wrapArray(L,G):this.wrapObject(L,G)},wrapArray:function(L,G){for(var V=0;V<L.length;V++)this.wrapObject(L[V],G)},wrapObject:function(L,G){G===void 0&&(G=0),L.x=N(L.x,this.bounds.left-G,this.bounds.right+G),L.y=N(L.y,this.bounds.top-G,this.bounds.bottom+G)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null,this.debugGraphic&&(this.debugGraphic.destroy(),this.debugGraphic=null)}});r.exports=U}),5321:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={setAcceleration:function(e,u){return this.body.acceleration.set(e,u),this},setAccelerationX:function(e){return this.body.acceleration.x=e,this},setAccelerationY:function(e){return this.body.acceleration.y=e,this}};r.exports=y}),29257:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={setAngularVelocity:function(e){return this.body.angularVelocity=e,this},setAngularAcceleration:function(e){return this.body.angularAcceleration=e,this},setAngularDrag:function(e){return this.body.angularDrag=e,this}};r.exports=y}),62122:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={setBounce:function(e,u){return this.body.bounce.set(e,u),this},setBounceX:function(e){return this.body.bounce.x=e,this},setBounceY:function(e){return this.body.bounce.y=e,this},setCollideWorldBounds:function(e,u,m,d){return this.body.setCollideWorldBounds(e,u,m,d),this}};r.exports=y}),99803:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={setDebug:function(e,u,m){return this.debugShowBody=e,this.debugShowVelocity=u,this.debugBodyColor=m,this},setDebugBodyColor:function(e){return this.body.debugBodyColor=e,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(e){this.body.debugShowBody=e}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(e){this.body.debugShowVelocity=e}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(e){this.body.debugBodyColor=e}}};r.exports=y}),87145:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={setDrag:function(e,u){return this.body.drag.set(e,u),this},setDragX:function(e){return this.body.drag.x=e,this},setDragY:function(e){return this.body.drag.y=e,this},setDamping:function(e){return this.body.useDamping=e,this}};r.exports=y}),96174:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={enableBody:function(e,u,m,d,l){return e&&this.body.reset(u,m),d&&(this.body.gameObject.active=!0),l&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(e,u){return e===void 0&&(e=!1),u===void 0&&(u=!1),this.body.stop(),this.body.enable=!1,e&&(this.body.gameObject.active=!1),u&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};r.exports=y}),51702:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={setFriction:function(e,u){return this.body.friction.set(e,u),this},setFrictionX:function(e){return this.body.friction.x=e,this},setFrictionY:function(e){return this.body.friction.y=e,this}};r.exports=y}),25578:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={setGravity:function(e,u){return this.body.gravity.set(e,u),this},setGravityX:function(e){return this.body.gravity.x=e,this},setGravityY:function(e){return this.body.gravity.y=e,this}};r.exports=y}),72029:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={setImmovable:function(e){return e===void 0&&(e=!0),this.body.immovable=e,this}};r.exports=y}),34566:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={setMass:function(e){return this.body.mass=e,this}};r.exports=y}),2732:((r,y,e)=>{var u=e(15147),m=e(26673),d=e(22184),l=e(26535),h=function(n,a,c,o,v,g){var p=u(n,a-o,c-o,2*o,2*o,v,g);if(p.length===0)return p;for(var x=new m(a,c,o),T=new m,E=[],M=0;M<p.length;M++){var P=p[M];P.isCircle?(T.setTo(P.center.x,P.center.y,P.halfWidth),d(x,T)&&E.push(P)):l(x,P)&&E.push(P)}return E};r.exports=h}),15147:(r=>{var y=function(e,u,m,d,l,h,n){h===void 0&&(h=!0),n===void 0&&(n=!1);var a=[],c=[],o=e.treeMinMax;if(o.minX=u,o.minY=m,o.maxX=u+d,o.maxY=m+l,n&&(c=e.staticTree.search(o)),h&&e.useTree)a=e.tree.search(o);else if(h){var v=e.bodies,g={position:{x:u,y:m},left:u,top:m,right:u+d,bottom:m+l,isCircle:!1},p=e.intersects;v.iterate(function(x){p(x,g)&&a.push(x)})}return c.concat(a)};r.exports=y}),57527:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={setPushable:function(e){return e===void 0&&(e=!0),this.body.pushable=e,this}};r.exports=y}),77687:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={setOffset:function(e,u){return this.body.setOffset(e,u),this},setSize:function(e,u,m){return this.body.setSize(e,u,m),this},setBodySize:function(e,u,m){return this.body.setSize(e,u,m),this},setCircle:function(e,u,m){return this.body.setCircle(e,u,m),this}};r.exports=y}),66536:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={setVelocity:function(e,u){return this.body.setVelocity(e,u),this},setVelocityX:function(e){return this.body.setVelocityX(e),this},setVelocityY:function(e){return this.body.setVelocityY(e),this},setMaxVelocity:function(e,u){return this.body.maxVelocity.set(e,u),this}};r.exports=y}),7864:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Acceleration:e(5321),Angular:e(29257),Bounce:e(62122),Debug:e(99803),Drag:e(87145),Enable:e(96174),Friction:e(51702),Gravity:e(25578),Immovable:e(72029),Mass:e(34566),OverlapCirc:e(2732),OverlapRect:e(15147),Pushable:e(57527),Size:e(77687),Velocity:e(66536)}}),47401:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};r.exports=y}),22346:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="collide"}),95092:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="overlap"}),15775:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pause"}),74142:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="resume"}),22825:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="tilecollide"}),10851:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="tileoverlap"}),7543:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="worldbounds"}),1487:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="worldstep"}),27037:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={COLLIDE:e(22346),OVERLAP:e(95092),PAUSE:e(15775),RESUME:e(74142),TILE_COLLIDE:e(22825),TILE_OVERLAP:e(10851),WORLD_BOUNDS:e(7543),WORLD_STEP:e(1487)}}),39977:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(47401),m=e(98611),d={ArcadePhysics:e(66150),Body:e(97602),Collider:e(3909),Components:e(7864),Events:e(27037),Factory:e(99523),GetOverlapX:e(75671),GetOverlapY:e(66185),SeparateX:e(61777),SeparateY:e(25299),Group:e(10481),Image:e(62832),Sprite:e(25084),StaticBody:e(66634),StaticGroup:e(46346),Tilemap:e(8413),World:e(85233)};d=m(!1,d,u),r.exports=d}),25163:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return e.collisionCallback?!e.collisionCallback.call(e.collisionCallbackContext,u,e):e.layer.callbacks[e.index]?!e.layer.callbacks[e.index].callback.call(e.layer.callbacks[e.index].callbackContext,u,e):!0};r.exports=y}),98209:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){u<0?(e.blocked.none=!1,e.blocked.left=!0):u>0&&(e.blocked.none=!1,e.blocked.right=!0),e.position.x-=u,e.updateCenter(),e.bounce.x===0?e.velocity.x=0:e.velocity.x=-e.velocity.x*e.bounce.x};r.exports=y}),72792:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){u<0?(e.blocked.none=!1,e.blocked.up=!0):u>0&&(e.blocked.none=!1,e.blocked.down=!0),e.position.y-=u,e.updateCenter(),e.bounce.y===0?e.velocity.y=0:e.velocity.y=-e.velocity.y*e.bounce.y};r.exports=y}),27354:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(14405),m=e(52926),d=e(28808),l=function(h,n,a,c,o,v,g){var p=c.left,x=c.top,T=c.right,E=c.bottom,M=a.faceLeft||a.faceRight,P=a.faceTop||a.faceBottom;if(g||(M=!0,P=!0),!M&&!P)return!1;var w=0,R=0,A=0,O=1;if(n.deltaAbsX()>n.deltaAbsY()?A=-1:n.deltaAbsX()<n.deltaAbsY()&&(O=-1),n.deltaX()!==0&&n.deltaY()!==0&&M&&P&&(A=Math.min(Math.abs(n.position.x-T),Math.abs(n.right-p)),O=Math.min(Math.abs(n.position.y-E),Math.abs(n.bottom-x))),A<O){if(M&&(w=u(n,a,p,T,v,g),w!==0&&!d(c,n)))return!0;P&&(R=m(n,a,x,E,v,g))}else{if(P&&(R=m(n,a,x,E,v,g),R!==0&&!d(c,n)))return!0;M&&(w=u(n,a,p,T,v,g))}return w!==0||R!==0};r.exports=l}),14405:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(98209),m=function(d,l,h,n,a,c){var o=0,v=l.faceLeft,g=l.faceRight,p=l.collideLeft,x=l.collideRight;return c||(v=!0,g=!0,p=!0,x=!0),d.deltaX()<0&&x&&d.checkCollision.left?g&&d.x<n&&(o=d.x-n,o<-a&&(o=0)):d.deltaX()>0&&p&&d.checkCollision.right&&v&&d.right>h&&(o=d.right-h,o>a&&(o=0)),o!==0&&(d.customSeparateX?d.overlapX=o:u(d,o)),o};r.exports=m}),52926:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72792),m=function(d,l,h,n,a,c){var o=0,v=l.faceTop,g=l.faceBottom,p=l.collideUp,x=l.collideDown;return c||(v=!0,g=!0,p=!0,x=!0),d.deltaY()<0&&x&&d.checkCollision.up?g&&d.y<n&&(o=d.y-n,o<-a&&(o=0)):d.deltaY()>0&&p&&d.checkCollision.down&&v&&d.bottom>h&&(o=d.bottom-h,o>a&&(o=0)),o!==0&&(d.customSeparateY?d.overlapY=o:u(d,o)),o};r.exports=m}),28808:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return!(u.right<=e.left||u.bottom<=e.top||u.position.x>=e.right||u.position.y>=e.bottom)};r.exports=y}),8413:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u={ProcessTileCallbacks:e(25163),ProcessTileSeparationX:e(98209),ProcessTileSeparationY:e(72792),SeparateTile:e(27354),TileCheckX:e(14405),TileCheckY:e(52926),TileIntersectsBody:e(28808)};r.exports=u}),53954:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Arcade:e(39977),Matter:e(45949)}}),63568:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(93736),d=new u({initialize:function(){this.boundsCenter=new m,this.centerDiff=new m},parseBody:function(l){if(l=l.hasOwnProperty("body")?l.body:l,!l.hasOwnProperty("bounds")||!l.hasOwnProperty("centerOfMass"))return!1;var h=this.boundsCenter,n=this.centerDiff,a=l.bounds.max.x-l.bounds.min.x,c=l.bounds.max.y-l.bounds.min.y,o=a*l.centerOfMass.x,v=c*l.centerOfMass.y;return h.set(a/2,c/2),n.set(o-h.x,v-h.y),!0},getTopLeft:function(l,h,n){if(h===void 0&&(h=0),n===void 0&&(n=0),this.parseBody(l)){var a=this.boundsCenter,c=this.centerDiff;return new m(h+a.x+c.x,n+a.y+c.y)}return!1},getTopCenter:function(l,h,n){if(h===void 0&&(h=0),n===void 0&&(n=0),this.parseBody(l)){var a=this.boundsCenter,c=this.centerDiff;return new m(h+c.x,n+a.y+c.y)}return!1},getTopRight:function(l,h,n){if(h===void 0&&(h=0),n===void 0&&(n=0),this.parseBody(l)){var a=this.boundsCenter,c=this.centerDiff;return new m(h-(a.x-c.x),n+a.y+c.y)}return!1},getLeftCenter:function(l,h,n){if(h===void 0&&(h=0),n===void 0&&(n=0),this.parseBody(l)){var a=this.boundsCenter,c=this.centerDiff;return new m(h+a.x+c.x,n+c.y)}return!1},getCenter:function(l,h,n){if(h===void 0&&(h=0),n===void 0&&(n=0),this.parseBody(l)){var a=this.centerDiff;return new m(h+a.x,n+a.y)}return!1},getRightCenter:function(l,h,n){if(h===void 0&&(h=0),n===void 0&&(n=0),this.parseBody(l)){var a=this.boundsCenter,c=this.centerDiff;return new m(h-(a.x-c.x),n+c.y)}return!1},getBottomLeft:function(l,h,n){if(h===void 0&&(h=0),n===void 0&&(n=0),this.parseBody(l)){var a=this.boundsCenter,c=this.centerDiff;return new m(h+a.x+c.x,n-(a.y-c.y))}return!1},getBottomCenter:function(l,h,n){if(h===void 0&&(h=0),n===void 0&&(n=0),this.parseBody(l)){var a=this.boundsCenter,c=this.centerDiff;return new m(h+c.x,n-(a.y-c.y))}return!1},getBottomRight:function(l,h,n){if(h===void 0&&(h=0),n===void 0&&(n=0),this.parseBody(l)){var a=this.boundsCenter,c=this.centerDiff;return new m(h-(a.x-c.x),n-(a.y-c.y))}return!1}});r.exports=d}),18171:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(16929);u.Body=e(84125),u.Composite=e(11299),u.World=e(72005),u.Collision=e(63454),u.Detector=e(13657),u.Pairs=e(91327),u.Pair=e(70584),u.Query=e(13390),u.Resolver=e(44272),u.Constraint=e(52838),u.Common=e(68758),u.Engine=e(45775),u.Events=e(39073),u.Sleeping=e(22806),u.Plugin=e(84474),u.Bodies=e(68516),u.Composites=e(56643),u.Axes=e(50658),u.Bounds=e(84091),u.Svg=e(92765),u.Vector=e(10438),u.Vertices=e(39745),u.World.add=u.Composite.add,u.World.remove=u.Composite.remove,u.World.addComposite=u.Composite.addComposite,u.World.addBody=u.Composite.addBody,u.World.addConstraint=u.Composite.addConstraint,u.World.clear=u.Composite.clear,r.exports=u}),72653:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(68516),m=e(56694),d=e(56643),l=e(52838),h=e(92765),n=e(3860),a=e(7030),c=e(73658),o=e(84720),v=e(10998),g=e(72829),p=e(88596),x=e(39745),T=new m({initialize:function(M){this.world=M,this.scene=M.scene,this.sys=M.scene.sys},rectangle:function(E,M,P,w,R){var A=u.rectangle(E,M,P,w,R);return this.world.add(A),A},trapezoid:function(E,M,P,w,R,A){var O=u.trapezoid(E,M,P,w,R,A);return this.world.add(O),O},circle:function(E,M,P,w,R){var A=u.circle(E,M,P,w,R);return this.world.add(A),A},polygon:function(E,M,P,w,R){var A=u.polygon(E,M,P,w,R);return this.world.add(A),A},fromVertices:function(E,M,P,w,R,A,O){typeof P=="string"&&(P=x.fromPath(P));var F=u.fromVertices(E,M,P,w,R,A,O);return this.world.add(F),F},fromPhysicsEditor:function(E,M,P,w,R){R===void 0&&(R=!0);var A=v.parseBody(E,M,P,w);return R&&!this.world.has(A)&&this.world.add(A),A},fromSVG:function(E,M,P,w,R,A){w===void 0&&(w=1),R===void 0&&(R={}),A===void 0&&(A=!0);for(var O=P.getElementsByTagName("path"),F=[],b=0;b<O.length;b++){var D=h.pathToVertices(O[b],30);w!==1&&x.scale(D,w,w),F.push(D)}var I=u.fromVertices(E,M,F,R);return A&&this.world.add(I),I},fromJSON:function(E,M,P,w,R){w===void 0&&(w={}),R===void 0&&(R=!0);var A=g.parseBody(E,M,P,w);return A&&R&&this.world.add(A),A},imageStack:function(E,M,P,w,R,A,O,F,b){O===void 0&&(O=0),F===void 0&&(F=0),b===void 0&&(b={});var D=this.world,I=this.sys.displayList;b.addToWorld=!1;var B=d.stack(P,w,R,A,O,F,function(z,Y){var X=new a(D,z,Y,E,M,b);return I.add(X),X.body});return D.add(B),B},stack:function(E,M,P,w,R,A,O){var F=d.stack(E,M,P,w,R,A,O);return this.world.add(F),F},pyramid:function(E,M,P,w,R,A,O){var F=d.pyramid(E,M,P,w,R,A,O);return this.world.add(F),F},chain:function(E,M,P,w,R,A){return d.chain(E,M,P,w,R,A)},mesh:function(E,M,P,w,R){return d.mesh(E,M,P,w,R)},newtonsCradle:function(E,M,P,w,R){var A=d.newtonsCradle(E,M,P,w,R);return this.world.add(A),A},car:function(E,M,P,w,R){var A=d.car(E,M,P,w,R);return this.world.add(A),A},softBody:function(E,M,P,w,R,A,O,F,b,D){var I=d.softBody(E,M,P,w,R,A,O,F,b,D);return this.world.add(I),I},joint:function(E,M,P,w,R){return this.constraint(E,M,P,w,R)},spring:function(E,M,P,w,R){return this.constraint(E,M,P,w,R)},constraint:function(E,M,P,w,R){w===void 0&&(w=1),R===void 0&&(R={}),R.bodyA=E.type==="body"?E:E.body,R.bodyB=M.type==="body"?M:M.body,isNaN(P)||(R.length=P),R.stiffness=w;var A=l.create(R);return this.world.add(A),A},worldConstraint:function(E,M,P,w){P===void 0&&(P=1),w===void 0&&(w={}),w.bodyB=E.type==="body"?E:E.body,isNaN(M)||(w.length=M),w.stiffness=P;var R=l.create(w);return this.world.add(R),R},mouseSpring:function(E){return this.pointerConstraint(E)},pointerConstraint:function(E){E===void 0&&(E={}),E.hasOwnProperty("render")||(E.render={visible:!1});var M=new p(this.scene,this.world,E);return this.world.add(M.constraint),M},image:function(E,M,P,w,R){var A=new a(this.world,E,M,P,w,R);return this.sys.displayList.add(A),A},tileBody:function(E,M){return new o(this.world,E,M)},sprite:function(E,M,P,w,R){var A=new c(this.world,E,M,P,w,R);return this.sys.displayList.add(A),this.sys.updateList.add(A),A},gameObject:function(E,M,P){return n(this.world,E,M,P)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});r.exports=T}),3860:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(74527),m=e(72632),d=e(93736);function l(n){return!!n.get&&typeof n.get=="function"||!!n.set&&typeof n.set=="function"}var h=function(n,a,c,o){c===void 0&&(c={}),o===void 0&&(o=!0);var v=a.x,g=a.y;a.body={temp:!0,position:{x:v,y:g}};var p=[u.Bounce,u.Collision,u.Force,u.Friction,u.Gravity,u.Mass,u.Sensor,u.SetBody,u.Sleep,u.Static,u.Transform,u.Velocity];if(p.forEach(function(T){for(var E in T)l(T[E])?Object.defineProperty(a,E,{get:T[E].get,set:T[E].set}):Object.defineProperty(a,E,{value:T[E]})}),a.world=n,a._tempVec2=new d(v,g),c.hasOwnProperty("type")&&c.type==="body")a.setExistingBody(c,o);else{var x=m(c,"shape",null);x||(x="rectangle"),c.addToWorld=o,a.setBody(x,c)}return a};r.exports=h}),7030:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(74527),d=e(89980),l=e(72632),h=e(1539),n=e(58210),a=e(93736),c=new u({Extends:h,Mixins:[m.Bounce,m.Collision,m.Force,m.Friction,m.Gravity,m.Mass,m.Sensor,m.SetBody,m.Sleep,m.Static,m.Transform,m.Velocity,n],initialize:function(v,g,p,x,T,E){d.call(this,v.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(x,T),this.setSizeToFrame(),this.setOrigin(),this.world=v,this._tempVec2=new a(g,p);var M=l(E,"shape",null);M?this.setBody(M,E):this.setRectangle(this.width,this.height,E),this.setPosition(g,p),this.initPipeline(),this.initPostPipeline(!0)}});r.exports=c}),50583:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(84093),m=e(50658),d=e(68516),l=e(84125),h=e(63568),n=e(84091),a=e(56694),c=e(63454),o=e(68758),v=e(11299),g=e(56643),p=e(52838),x=e(13657),T=e(53996),E=e(72653),M=e(72632),P=e(10850),w=e(1675),R=e(80391),A=e(16929),O=e(44097),F=e(30657),b=e(70584),D=e(91327),I=e(84474),B=e(91963),z=e(13390),Y=e(44272),X=e(7599),H=e(92765),N=e(10438),U=e(39745),L=e(31468);o.setDecomp(e(81084));var G=new a({initialize:function(k){this.scene=k,this.systems=k.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=l,this.composite=v,this.collision=c,this.detector=x,this.pair=b,this.pairs=D,this.query=z,this.resolver=Y,this.constraint=p,this.bodies=d,this.composites=g,this.axes=m,this.bounds=n,this.svg=H,this.vector=N,this.vertices=U,this.verts=U,this._tempVec2=N.create(),P(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),P(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),P(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),Y._restingThresh=P(this.config,"restingThresh",4),Y._restingThreshTangent=P(this.config,"restingThreshTangent",6),Y._positionDampen=P(this.config,"positionDampen",.9),Y._positionWarming=P(this.config,"positionWarming",.8),Y._frictionNormalMultiplier=P(this.config,"frictionNormalMultiplier",5),k.sys.events.once(X.BOOT,this.boot,this),k.sys.events.on(X.START,this.start,this)},boot:function(){this.world=new L(this.scene,this.config),this.add=new E(this.world),this.bodyBounds=new h,this.systems.events.once(X.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new L(this.scene,this.config),this.add=new E(this.world));var V=this.systems.events;V.on(X.UPDATE,this.world.update,this.world),V.on(X.POST_UPDATE,this.world.postUpdate,this.world),V.once(X.SHUTDOWN,this.shutdown,this)},getConfig:function(){var V=this.systems.game.config.physics,k=this.systems.settings.physics,W=F(M(k,"matter",{}),M(V,"matter",{}));return W},enableAttractorPlugin:function(){return I.register(w),I.use(A,w),this},enableWrapPlugin:function(){return I.register(O),I.use(A,O),this},enableCollisionEventsPlugin:function(){return I.register(R),I.use(A,R),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(V,k){this.world.step(V,k)},containsPoint:function(V,k,W){V=this.getMatterBodies(V);var $=N.create(k,W),K=z.point(V,$);return K.length>0},intersectPoint:function(V,k,W){W=this.getMatterBodies(W);var $=N.create(V,k),K=[],j=z.point(W,$);return j.forEach(function(Z){K.indexOf(Z)===-1&&K.push(Z)}),K},intersectRect:function(V,k,W,$,K,j){K===void 0&&(K=!1),j=this.getMatterBodies(j);var Z={min:{x:V,y:k},max:{x:V+W,y:k+$}},J=[],Q=z.region(j,Z,K);return Q.forEach(function(_){J.indexOf(_)===-1&&J.push(_)}),J},intersectRay:function(V,k,W,$,K,j){K===void 0&&(K=1),j=this.getMatterBodies(j);for(var Z=[],J=z.ray(j,N.create(V,k),N.create(W,$),K),Q=0;Q<J.length;Q++)Z.push(J[Q].body);return Z},intersectBody:function(V,k){k=this.getMatterBodies(k);for(var W=[],$=z.collides(V,k),K=0;K<$.length;K++){var j=$[K];j.bodyA===V?W.push(j.bodyB):W.push(j.bodyA)}return W},overlap:function(V,k,W,$,K){W===void 0&&(W=null),$===void 0&&($=null),K===void 0&&(K=W),Array.isArray(V)||(V=[V]),V=this.getMatterBodies(V),k=this.getMatterBodies(k);for(var j=!1,Z=0;Z<V.length;Z++)for(var J=V[Z],Q=z.collides(J,k),_=0;_<Q.length;_++){var q=Q[_],et=q.bodyA.id===J.id?q.bodyB:q.bodyA;if(!$||$.call(K,J,et,q)){if(j=!0,W)W.call(K,J,et,q);else if(!$)return!0}}return j},setCollisionCategory:function(V,k){return V=this.getMatterBodies(V),V.forEach(function(W){W.collisionFilter.category=k}),this},setCollisionGroup:function(V,k){return V=this.getMatterBodies(V),V.forEach(function(W){W.collisionFilter.group=k}),this},setCollidesWith:function(V,k){V=this.getMatterBodies(V);var W=0;if(!Array.isArray(k))W=k;else for(var $=0;$<k.length;$++)W|=k[$];return V.forEach(function(K){K.collisionFilter.mask=W}),this},getMatterBodies:function(V){if(!V)return this.world.getAllBodies();Array.isArray(V)||(V=[V]);for(var k=[],W=0;W<V.length;W++){var $=V[W].hasOwnProperty("body")?V[W].body:V[W];k.push($)}return k},setVelocity:function(V,k,W){V=this.getMatterBodies(V);var $=this._tempVec2;return $.x=k,$.y=W,V.forEach(function(K){l.setVelocity(K,$)}),this},setVelocityX:function(V,k){V=this.getMatterBodies(V);var W=this._tempVec2;return W.x=k,V.forEach(function($){W.y=$.velocity.y,l.setVelocity($,W)}),this},setVelocityY:function(V,k){V=this.getMatterBodies(V);var W=this._tempVec2;return W.y=k,V.forEach(function($){W.x=$.velocity.x,l.setVelocity($,W)}),this},setAngularVelocity:function(V,k){return V=this.getMatterBodies(V),V.forEach(function(W){l.setAngularVelocity(W,k)}),this},applyForce:function(V,k){V=this.getMatterBodies(V);var W=this._tempVec2;return V.forEach(function($){W.x=$.position.x,W.y=$.position.y,l.applyForce($,W,k)}),this},applyForceFromPosition:function(V,k,W,$){V=this.getMatterBodies(V);var K=this._tempVec2;return V.forEach(function(j){$===void 0&&($=j.angle),K.x=W*Math.cos($),K.y=W*Math.sin($),l.applyForce(j,k,K)}),this},applyForceFromAngle:function(V,k,W){V=this.getMatterBodies(V);var $=this._tempVec2;return V.forEach(function(K){W===void 0&&(W=K.angle),$.x=k*Math.cos(W),$.y=k*Math.sin(W),l.applyForce(K,{x:K.position.x,y:K.position.y},$)}),this},getConstraintLength:function(V){var k=V.pointA.x,W=V.pointA.y,$=V.pointB.x,K=V.pointB.y;return V.bodyA&&(k+=V.bodyA.position.x,W+=V.bodyA.position.y),V.bodyB&&($+=V.bodyB.position.x,K+=V.bodyB.position.y),T(k,W,$,K)},alignBody:function(V,k,W,$){V=V.hasOwnProperty("body")?V.body:V;var K;switch($){case u.TOP_LEFT:case u.LEFT_TOP:K=this.bodyBounds.getTopLeft(V,k,W);break;case u.TOP_CENTER:K=this.bodyBounds.getTopCenter(V,k,W);break;case u.TOP_RIGHT:case u.RIGHT_TOP:K=this.bodyBounds.getTopRight(V,k,W);break;case u.LEFT_CENTER:K=this.bodyBounds.getLeftCenter(V,k,W);break;case u.CENTER:K=this.bodyBounds.getCenter(V,k,W);break;case u.RIGHT_CENTER:K=this.bodyBounds.getRightCenter(V,k,W);break;case u.LEFT_BOTTOM:case u.BOTTOM_LEFT:K=this.bodyBounds.getBottomLeft(V,k,W);break;case u.BOTTOM_CENTER:K=this.bodyBounds.getBottomCenter(V,k,W);break;case u.BOTTOM_RIGHT:case u.RIGHT_BOTTOM:K=this.bodyBounds.getBottomRight(V,k,W);break}return K&&l.setPosition(V,K),this},shutdown:function(){var V=this.systems.events;this.world&&(V.off(X.UPDATE,this.world.update,this.world),V.off(X.POST_UPDATE,this.world.postUpdate,this.world)),V.off(X.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(X.START,this.start,this),this.scene=null,this.systems=null}});B.register("MatterPhysics",G,"matterPhysics"),r.exports=G}),73658:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(16569),m=e(56694),d=e(74527),l=e(89980),h=e(72632),n=e(58210),a=e(13747),c=e(93736),o=new m({Extends:a,Mixins:[d.Bounce,d.Collision,d.Force,d.Friction,d.Gravity,d.Mass,d.Sensor,d.SetBody,d.Sleep,d.Static,d.Transform,d.Velocity,n],initialize:function(g,p,x,T,E,M){l.call(this,g.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new u(this),this.setTexture(T,E),this.setSizeToFrame(),this.setOrigin(),this.world=g,this._tempVec2=new c(p,x);var P=h(M,"shape",null);P?this.setBody(P,M):this.setRectangle(this.width,this.height,M),this.setPosition(p,x),this.initPipeline(),this.initPostPipeline(!0)}});r.exports=o}),84720:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(68516),m=e(84125),d=e(56694),l=e(74527),h=e(28699),n=e(6659),a=e(72632),c=e(19256),o=e(39745),v=new d({Extends:n,Mixins:[l.Bounce,l.Collision,l.Friction,l.Gravity,l.Mass,l.Sensor,l.Sleep,l.Static],initialize:function(p,x,T){n.call(this),this.tile=x,this.world=p,x.physics.matterBody&&x.physics.matterBody.destroy(),x.physics.matterBody=this;var E=a(T,"body",null),M=a(T,"addToWorld",!0);if(E)this.setBody(E,M);else{var P=x.getCollisionGroup(),w=a(P,"objects",[]);w.length>0?this.setFromTileCollision(T):this.setFromTileRectangle(T)}if(x.flipX||x.flipY){var R={x:x.getCenterX(),y:x.getCenterY()},A=x.flipX?-1:1,O=x.flipY?-1:1;m.scale(E,A,O,R)}},setFromTileRectangle:function(g){g===void 0&&(g={}),c(g,"isStatic")||(g.isStatic=!0),c(g,"addToWorld")||(g.addToWorld=!0);var p=this.tile.getBounds(),x=p.x+p.width/2,T=p.y+p.height/2,E=u.rectangle(x,T,p.width,p.height,g);return this.setBody(E,g.addToWorld),this},setFromTileCollision:function(g){g===void 0&&(g={}),c(g,"isStatic")||(g.isStatic=!0),c(g,"addToWorld")||(g.addToWorld=!0);for(var p=this.tile.tilemapLayer.scaleX,x=this.tile.tilemapLayer.scaleY,T=this.tile.getLeft(),E=this.tile.getTop(),M=this.tile.getCollisionGroup(),P=a(M,"objects",[]),w=[],R=0;R<P.length;R++){var A=P[R],O=T+A.x*p,F=E+A.y*x,b=A.width*p,D=A.height*x,I=null;if(A.rectangle)I=u.rectangle(O+b/2,F+D/2,b,D,g);else if(A.ellipse)I=u.circle(O+b/2,F+D/2,b/2,g);else if(A.polygon||A.polyline){var B=A.polygon?A.polygon:A.polyline,z=B.map(function(N){return{x:N.x*p,y:N.y*x}}),Y=o.create(z),X=o.centre(Y);O+=X.x,F+=X.y,I=u.fromVertices(O,F,Y,g)}I&&w.push(I)}if(w.length===1)this.setBody(w[0],g.addToWorld);else if(w.length>1){var H=h(g);H.parts=w,this.setBody(m.create(H),H.addToWorld)}return this},setBody:function(g,p){return p===void 0&&(p=!0),this.body&&this.removeBody(),this.body=g,this.body.gameObject=this,p&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});r.exports=v}),10998:((r,y,e)=>{/**
 * @author       Joachim Grill <joachim@codeandweb.com>
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 CodeAndWeb GmbH
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(68516),m=e(84125),d=e(68758),l=e(72632),h=e(39745),n={parseBody:function(a,c,o,v){v===void 0&&(v={});for(var g=l(o,"fixtures",[]),p=[],x=0;x<g.length;x++)for(var T=this.parseFixture(g[x]),E=0;E<T.length;E++)p.push(T[E]);var M=d.clone(o,!0);d.extend(M,v,!0),delete M.fixtures,delete M.type;var P=m.create(M);return m.setParts(P,p),m.setPosition(P,{x:a,y:c}),P},parseFixture:function(a){var c=d.extend({},!1,a);delete c.circle,delete c.vertices;var o;if(a.circle){var v=l(a.circle,"x"),g=l(a.circle,"y"),p=l(a.circle,"radius");o=[u.circle(v,g,p,c)]}else a.vertices&&(o=this.parseVertices(a.vertices,c));return o},parseVertices:function(a,c){c===void 0&&(c={});for(var o=[],v=0;v<a.length;v++)h.clockwiseSort(a[v]),o.push(m.create(d.extend({position:h.centre(a[v]),vertices:a[v]},c)));return u.flagCoincidentParts(o)}};r.exports=n}),72829:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(68516),m=e(84125),d={parseBody:function(l,h,n,a){a===void 0&&(a={});var c,o=n.vertices;if(o.length===1)a.vertices=o[0],c=m.create(a),u.flagCoincidentParts(c.parts);else{for(var v=[],g=0;g<o.length;g++){var p=m.create({vertices:o[g]});v.push(p)}u.flagCoincidentParts(v),a.parts=v,c=m.create(a)}return c.label=n.label,m.setPosition(c,{x:l,y:h}),c}};r.exports=d}),88596:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(84091),m=e(56694),d=e(11299),l=e(52838),h=e(13657),n=e(35416),a=e(33963),c=e(30657),o=e(22806),v=e(93736),g=e(39745),p=new m({initialize:function(T,E,M){M===void 0&&(M={});var P={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=T,this.world=E,this.camera=null,this.pointer=null,this.active=!0,this.position=new v,this.body=null,this.part=null,this.constraint=l.create(c(M,P)),this.world.on(n.BEFORE_UPDATE,this.update,this),T.sys.input.on(a.POINTER_DOWN,this.onDown,this),T.sys.input.on(a.POINTER_UP,this.onUp,this)},onDown:function(x){this.pointer||(this.pointer=x,this.camera=x.camera)},onUp:function(x){x===this.pointer&&(this.pointer=null)},getBody:function(x){var T=this.position,E=this.constraint;this.camera.getWorldPoint(x.x,x.y,T);for(var M=d.allBodies(this.world.localWorld),P=0;P<M.length;P++){var w=M[P];if(!w.ignorePointer&&u.contains(w.bounds,T)&&h.canCollide(w.collisionFilter,E.collisionFilter)&&this.hitTestBody(w,T))return this.world.emit(n.DRAG_START,w,this.part,this),!0}return!1},hitTestBody:function(x,T){for(var E=this.constraint,M=x.parts.length,P=M>1?1:0,w=P;w<M;w++){var R=x.parts[w];if(g.contains(R.vertices,T))return E.pointA=T,E.pointB={x:T.x-x.position.x,y:T.y-x.position.y},E.bodyB=x,E.angleB=x.angle,o.set(x,!1),this.part=R,this.body=x,!0}return!1},update:function(){var x=this.pointer,T=this.body;if(!this.active||!x){T&&this.stopDrag();return}if(!x.isDown&&T){this.stopDrag();return}else if(x.isDown){if(!T&&!this.getBody(x))return;T=this.body;var E=this.position,M=this.constraint;this.camera.getWorldPoint(x.x,x.y,E),M.pointA.x=E.x,M.pointA.y=E.y,o.set(T,!1),this.world.emit(n.DRAG,T,this)}},stopDrag:function(){var x=this.body,T=this.constraint;T.bodyB=null,T.pointB=null,this.pointer=null,this.body=null,this.part=null,x&&this.world.emit(n.DRAG_END,x,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(n.BEFORE_UPDATE,this.update),this.scene.sys.input.off(a.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(a.POINTER_UP,this.onUp,this)}});r.exports=p}),31468:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(68516),m=e(84125),d=e(56694),l=e(68758),h=e(11299),n=e(45775),a=e(6659),c=e(35416),o=e(72632),v=e(10850),g=e(84125),p=e(39073),x=e(84720),T=e(72005),E=e(10438),M=new d({Extends:a,initialize:function(w,R){a.call(this),this.scene=w,this.engine=n.create(R),this.localWorld=this.engine.world;var A=v(R,"gravity",null);A?this.setGravity(A.x,A.y,A.scale):A===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=v(R,"enabled",!0),this.getDelta=v(R,"getDelta",this.update60Hz);var O=o(R,"runner",{}),F=o(O,"fps",!1),b=o(O,"fps",60),D=o(O,"delta",1e3/b),I=o(O,"deltaMin",1e3/b),B=o(O,"deltaMax",1e3/(b*.5));F||(b=1e3/D),this.runner={fps:b,deltaSampleSize:o(O,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:o(O,"isFixed",!1),delta:D,deltaMin:I,deltaMax:B},this.autoUpdate=v(R,"autoUpdate",!0);var z=v(R,"debug",!1);if(this.drawDebug=typeof z=="object"?!0:z,this.debugGraphic,this.debugConfig={showAxes:o(z,"showAxes",!1),showAngleIndicator:o(z,"showAngleIndicator",!1),angleColor:o(z,"angleColor",15208787),showBroadphase:o(z,"showBroadphase",!1),broadphaseColor:o(z,"broadphaseColor",16757760),showBounds:o(z,"showBounds",!1),boundsColor:o(z,"boundsColor",16777215),showVelocity:o(z,"showVelocity",!1),velocityColor:o(z,"velocityColor",44783),showCollisions:o(z,"showCollisions",!1),collisionColor:o(z,"collisionColor",16094476),showSeparations:o(z,"showSeparations",!1),separationColor:o(z,"separationColor",16753920),showBody:o(z,"showBody",!0),showStaticBody:o(z,"showStaticBody",!0),showInternalEdges:o(z,"showInternalEdges",!1),renderFill:o(z,"renderFill",!1),renderLine:o(z,"renderLine",!0),fillColor:o(z,"fillColor",1075465),fillOpacity:o(z,"fillOpacity",1),lineColor:o(z,"lineColor",2678297),lineOpacity:o(z,"lineOpacity",1),lineThickness:o(z,"lineThickness",1),staticFillColor:o(z,"staticFillColor",857979),staticLineColor:o(z,"staticLineColor",1255396),showSleeping:o(z,"showSleeping",!1),staticBodySleepOpacity:o(z,"staticBodySleepOpacity",.7),sleepFillColor:o(z,"sleepFillColor",4605510),sleepLineColor:o(z,"sleepLineColor",10066585),showSensors:o(z,"showSensors",!0),sensorFillColor:o(z,"sensorFillColor",857979),sensorLineColor:o(z,"sensorLineColor",1255396),showPositions:o(z,"showPositions",!0),positionSize:o(z,"positionSize",4),positionColor:o(z,"positionColor",14697178),showJoint:o(z,"showJoint",!0),jointColor:o(z,"jointColor",14737474),jointLineOpacity:o(z,"jointLineOpacity",1),jointLineThickness:o(z,"jointLineThickness",2),pinSize:o(z,"pinSize",4),pinColor:o(z,"pinColor",4382944),springColor:o(z,"springColor",14697184),anchorColor:o(z,"anchorColor",15724527),anchorSize:o(z,"anchorSize",4),showConvexHulls:o(z,"showConvexHulls",!1),hullColor:o(z,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),o(R,"setBounds",!1)){var Y=R.setBounds;if(typeof Y=="boolean")this.setBounds();else{var X=o(Y,"x",0),H=o(Y,"y",0),N=o(Y,"width",w.sys.scale.width),U=o(Y,"height",w.sys.scale.height),L=o(Y,"thickness",64),G=o(Y,"left",!0),V=o(Y,"right",!0),k=o(Y,"top",!0),W=o(Y,"bottom",!0);this.setBounds(X,H,N,U,L,G,V,k,W)}}},setCompositeRenderStyle:function(P){var w=P.bodies,R=P.constraints,A=P.composites,O,F,b;for(O=0;O<w.length;O++)F=w[O],b=F.render,this.setBodyRenderStyle(F,b.lineColor,b.lineOpacity,b.lineThickness,b.fillColor,b.fillOpacity);for(O=0;O<R.length;O++)F=R[O],b=F.render,this.setConstraintRenderStyle(F,b.lineColor,b.lineOpacity,b.lineThickness,b.pinSize,b.anchorColor,b.anchorSize);for(O=0;O<A.length;O++)F=A[O],this.setCompositeRenderStyle(F);return this},setBodyRenderStyle:function(P,w,R,A,O,F){var b=P.render,D=this.debugConfig;return b?(w==null&&(w=P.isStatic?D.staticLineColor:D.lineColor),R==null&&(R=D.lineOpacity),A==null&&(A=D.lineThickness),O==null&&(O=P.isStatic?D.staticFillColor:D.fillColor),F==null&&(F=D.fillOpacity),w!==!1&&(b.lineColor=w),R!==!1&&(b.lineOpacity=R),A!==!1&&(b.lineThickness=A),O!==!1&&(b.fillColor=O),F!==!1&&(b.fillOpacity=F),this):this},setConstraintRenderStyle:function(P,w,R,A,O,F,b){var D=P.render,I=this.debugConfig;if(!D)return this;if(w==null){var B=D.type;B==="line"?w=I.jointColor:B==="pin"?w=I.pinColor:B==="spring"&&(w=I.springColor)}return R==null&&(R=I.jointLineOpacity),A==null&&(A=I.jointLineThickness),O==null&&(O=I.pinSize),F==null&&(F=I.anchorColor),b==null&&(b=I.anchorSize),w!==!1&&(D.lineColor=w),R!==!1&&(D.lineOpacity=R),A!==!1&&(D.lineThickness=A),O!==!1&&(D.pinSize=O),F!==!1&&(D.anchorColor=F),b!==!1&&(D.anchorSize=b),this},setEventsProxy:function(){var P=this,w=this.engine,R=this.localWorld;this.drawDebug&&(p.on(R,"compositeModified",function(A){P.setCompositeRenderStyle(A)}),p.on(R,"beforeAdd",function(A){for(var O=[].concat(A.object),F=0;F<O.length;F++){var b=O[F],D=b.render;b.type==="body"?P.setBodyRenderStyle(b,D.lineColor,D.lineOpacity,D.lineThickness,D.fillColor,D.fillOpacity):b.type==="composite"?P.setCompositeRenderStyle(b):b.type==="constraint"&&P.setConstraintRenderStyle(b,D.lineColor,D.lineOpacity,D.lineThickness,D.pinSize,D.anchorColor,D.anchorSize)}})),p.on(R,"beforeAdd",function(A){P.emit(c.BEFORE_ADD,A)}),p.on(R,"afterAdd",function(A){P.emit(c.AFTER_ADD,A)}),p.on(R,"beforeRemove",function(A){P.emit(c.BEFORE_REMOVE,A)}),p.on(R,"afterRemove",function(A){P.emit(c.AFTER_REMOVE,A)}),p.on(w,"beforeUpdate",function(A){P.emit(c.BEFORE_UPDATE,A)}),p.on(w,"afterUpdate",function(A){P.emit(c.AFTER_UPDATE,A)}),p.on(w,"collisionStart",function(A){var O=A.pairs,F,b;O.length>0&&(F=O[0].bodyA,b=O[0].bodyB),P.emit(c.COLLISION_START,A,F,b)}),p.on(w,"collisionActive",function(A){var O=A.pairs,F,b;O.length>0&&(F=O[0].bodyA,b=O[0].bodyB),P.emit(c.COLLISION_ACTIVE,A,F,b)}),p.on(w,"collisionEnd",function(A){var O=A.pairs,F,b;O.length>0&&(F=O[0].bodyA,b=O[0].bodyB),P.emit(c.COLLISION_END,A,F,b)})},setBounds:function(P,w,R,A,O,F,b,D,I){return P===void 0&&(P=0),w===void 0&&(w=0),R===void 0&&(R=this.scene.sys.scale.width),A===void 0&&(A=this.scene.sys.scale.height),O===void 0&&(O=64),F===void 0&&(F=!0),b===void 0&&(b=!0),D===void 0&&(D=!0),I===void 0&&(I=!0),this.updateWall(F,"left",P-O,w-O,O,A+O*2),this.updateWall(b,"right",P+R,w-O,O,A+O*2),this.updateWall(D,"top",P,w-O,R,O),this.updateWall(I,"bottom",P,w+A,R,O),this},updateWall:function(P,w,R,A,O,F){var b=this.walls[w];P?(b&&T.remove(this.localWorld,b),R+=O/2,A+=F/2,this.walls[w]=this.create(R,A,O,F,{isStatic:!0,friction:0,frictionStatic:0})):(b&&T.remove(this.localWorld,b),this.walls[w]=null)},createDebugGraphic:function(){var P=this.scene.sys.add.graphics({x:0,y:0});return P.setDepth(Number.MAX_VALUE),this.debugGraphic=P,this.drawDebug=!0,P},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(P,w,R){return P===void 0&&(P=0),w===void 0&&(w=1),R===void 0&&(R=.001),this.localWorld.gravity.x=P,this.localWorld.gravity.y=w,this.localWorld.gravity.scale=R,this},create:function(P,w,R,A,O){var F=u.rectangle(P,w,R,A,O);return T.add(this.localWorld,F),F},add:function(P){return T.add(this.localWorld,P),this},remove:function(P,w){Array.isArray(P)||(P=[P]);for(var R=0;R<P.length;R++){var A=P[R],O=A.body?A.body:A;h.remove(this.localWorld,O,w)}return this},removeConstraint:function(P,w){return h.remove(this.localWorld,P,w),this},convertTilemapLayer:function(P,w){var R=P.layer,A=P.getTilesWithin(0,0,R.width,R.height,{isColliding:!0});return this.convertTiles(A,w),this},convertTiles:function(P,w){if(P.length===0)return this;for(var R=0;R<P.length;R++)new x(this,P[R],w);return this},nextGroup:function(P){return g.nextGroup(P)},nextCategory:function(){return g.nextCategory()},pause:function(){return this.enabled=!1,this.emit(c.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(c.RESUME),this},update:function(P,w){if(!(!this.enabled||!this.autoUpdate)){var R=this.engine,A=this.runner,O=R.timing;A.isFixed?w=this.getDelta(P,w):(w=P-A.timePrev||A.delta,A.timePrev=P,A.deltaHistory.push(w),A.deltaHistory=A.deltaHistory.slice(-A.deltaSampleSize),w=Math.min.apply(null,A.deltaHistory),w=w<A.deltaMin?A.deltaMin:w,w=w>A.deltaMax?A.deltaMax:w,A.delta=w),A.timeScalePrev=O.timeScale,A.frameCounter+=1,P-A.counterTimestamp>=1e3&&(A.fps=A.frameCounter*((P-A.counterTimestamp)/1e3),A.counterTimestamp=P,A.frameCounter=0),n.update(R,w)}},step:function(P){n.update(this.engine,P)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(P){var w=P.hasOwnProperty("body")?P.body:P;return h.get(this.localWorld,w.id,w.type)!==null},getAllBodies:function(){return h.allBodies(this.localWorld)},getAllConstraints:function(){return h.allConstraints(this.localWorld)},getAllComposites:function(){return h.allComposites(this.localWorld)},postUpdate:function(){if(this.drawDebug){var P=this.debugConfig,w=this.engine,R=this.debugGraphic,A=h.allBodies(this.localWorld);this.debugGraphic.clear(),P.showBroadphase&&w.broadphase.controller&&this.renderGrid(w.broadphase,R,P.broadphaseColor,.5),P.showBounds&&this.renderBodyBounds(A,R,P.boundsColor,.5),(P.showBody||P.showStaticBody)&&this.renderBodies(A),P.showJoint&&this.renderJoints(),(P.showAxes||P.showAngleIndicator)&&this.renderBodyAxes(A,R,P.showAxes,P.angleColor,.5),P.showVelocity&&this.renderBodyVelocity(A,R,P.velocityColor,1,2),P.showSeparations&&this.renderSeparations(w.pairs.list,R,P.separationColor),P.showCollisions&&this.renderCollisions(w.pairs.list,R,P.collisionColor)}},renderGrid:function(P,w,R,A){w.lineStyle(1,R,A);for(var O=l.keys(P.buckets),F=0;F<O.length;F++){var b=O[F];if(!(P.buckets[b].length<2)){var D=b.split(/C|R/);w.strokeRect(parseInt(D[1],10)*P.bucketWidth,parseInt(D[2],10)*P.bucketHeight,P.bucketWidth,P.bucketHeight)}}return this},renderSeparations:function(P,w,R){w.lineStyle(1,R,1);for(var A=0;A<P.length;A++){var O=P[A];if(O.isActive){var F=O.collision,b=F.bodyA,D=F.bodyB,I=b.position,B=D.position,z=F.penetration,Y=!b.isStatic&&!D.isStatic?4:1;D.isStatic&&(Y=0),w.lineBetween(B.x,B.y,B.x-z.x*Y,B.y-z.y*Y),Y=!b.isStatic&&!D.isStatic?4:1,b.isStatic&&(Y=0),w.lineBetween(I.x,I.y,I.x-z.x*Y,I.y-z.y*Y)}}return this},renderCollisions:function(P,w,R){w.lineStyle(1,R,.5),w.fillStyle(R,1);var A,O;for(A=0;A<P.length;A++)if(O=P[A],!!O.isActive)for(var F=0;F<O.activeContacts.length;F++){var b=O.activeContacts[F],D=b.vertex;w.fillRect(D.x-2,D.y-2,5,5)}for(A=0;A<P.length;A++)if(O=P[A],!!O.isActive){var I=O.collision,B=O.activeContacts;if(B.length>0){var z=B[0].vertex.x,Y=B[0].vertex.y;B.length===2&&(z=(B[0].vertex.x+B[1].vertex.x)/2,Y=(B[0].vertex.y+B[1].vertex.y)/2),I.bodyB===I.supports[0].body||I.bodyA.isStatic?w.lineBetween(z-I.normal.x*8,Y-I.normal.y*8,z,Y):w.lineBetween(z+I.normal.x*8,Y+I.normal.y*8,z,Y)}}return this},renderBodyBounds:function(P,w,R,A){w.lineStyle(1,R,A);for(var O=0;O<P.length;O++){var F=P[O];if(F.render.visible){var b=F.bounds;if(b)w.strokeRect(b.min.x,b.min.y,b.max.x-b.min.x,b.max.y-b.min.y);else for(var D=F.parts,I=D.length>1?1:0;I<D.length;I++){var B=D[I];w.strokeRect(B.bounds.min.x,B.bounds.min.y,B.bounds.max.x-B.bounds.min.x,B.bounds.max.y-B.bounds.min.y)}}}return this},renderBodyAxes:function(P,w,R,A,O){w.lineStyle(1,A,O);for(var F=0;F<P.length;F++){var b=P[F],D=b.parts;if(b.render.visible){var I,B,z;if(R)for(B=D.length>1?1:0;B<D.length;B++)for(I=D[B],z=0;z<I.axes.length;z++){var Y=I.axes[z];w.lineBetween(I.position.x,I.position.y,I.position.x+Y.x*20,I.position.y+Y.y*20)}else for(B=D.length>1?1:0;B<D.length;B++)for(I=D[B],z=0;z<I.axes.length;z++)w.lineBetween(I.position.x,I.position.y,(I.vertices[0].x+I.vertices[I.vertices.length-1].x)/2,(I.vertices[0].y+I.vertices[I.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(P,w,R,A,O){w.lineStyle(O,R,A);for(var F=0;F<P.length;F++){var b=P[F];b.render.visible&&w.lineBetween(b.position.x,b.position.y,b.position.x+(b.position.x-b.positionPrev.x)*2,b.position.y+(b.position.y-b.positionPrev.y)*2)}return this},renderBodies:function(P){for(var w=this.debugGraphic,R=this.debugConfig,A=R.showBody,O=R.showStaticBody,F=R.showSleeping,b=R.showInternalEdges,D=R.showConvexHulls,I=R.renderFill,B=R.renderLine,z=R.staticBodySleepOpacity,Y=R.sleepFillColor,X=R.sleepLineColor,H=R.hullColor,N=0;N<P.length;N++){var U=P[N];if(U.render.visible&&!(!O&&U.isStatic||!A&&!U.isStatic)){var L=U.render.lineColor,G=U.render.lineOpacity,V=U.render.lineThickness,k=U.render.fillColor,W=U.render.fillOpacity;F&&U.isSleeping&&(U.isStatic?(G*=z,W*=z):(L=X,k=Y)),I||(k=null),B||(L=null),this.renderBody(U,w,b,L,G,V,k,W);var $=U.parts.length;D&&$>1&&this.renderConvexHull(U,w,H,V)}}},renderBody:function(P,w,R,A,O,F,b,D){A===void 0&&(A=null),O===void 0&&(O=null),F===void 0&&(F=1),b===void 0&&(b=null),D===void 0&&(D=null);for(var I=this.debugConfig,B=I.sensorFillColor,z=I.sensorLineColor,Y=P.parts,X=Y.length,H=X>1?1:0;H<X;H++){var N=Y[H],U=N.render,L=U.opacity;if(!(!U.visible||L===0||N.isSensor&&!I.showSensors)){var G=N.circleRadius;if(w.beginPath(),N.isSensor?(b!==null&&w.fillStyle(B,D*L),A!==null&&w.lineStyle(F,z,O*L)):(b!==null&&w.fillStyle(b,D*L),A!==null&&w.lineStyle(F,A,O*L)),G)w.arc(N.position.x,N.position.y,G,0,2*Math.PI);else{var V=N.vertices,k=V.length;w.moveTo(V[0].x,V[0].y);for(var W=1;W<k;W++){var $=V[W];if(!V[W-1].isInternal||R?w.lineTo($.x,$.y):w.moveTo($.x,$.y),W<k&&$.isInternal&&!R){var K=(W+1)%k;w.moveTo(V[K].x,V[K].y)}}w.closePath()}b!==null&&w.fillPath(),A!==null&&w.strokePath()}}if(I.showPositions&&!P.isStatic){var j=P.position.x,Z=P.position.y,J=Math.ceil(I.positionSize/2);w.fillStyle(I.positionColor,1),w.fillRect(j-J,Z-J,I.positionSize,I.positionSize)}return this},renderConvexHull:function(P,w,R,A){A===void 0&&(A=1);var O=P.parts,F=O.length;if(F>1){var b=P.vertices;w.lineStyle(A,R),w.beginPath(),w.moveTo(b[0].x,b[0].y);for(var D=1;D<b.length;D++)w.lineTo(b[D].x,b[D].y);w.lineTo(b[0].x,b[0].y),w.strokePath()}return this},renderJoints:function(){for(var P=this.debugGraphic,w=h.allConstraints(this.localWorld),R=0;R<w.length;R++){var A=w[R].render,O=A.lineColor,F=A.lineOpacity,b=A.lineThickness,D=A.pinSize,I=A.anchorColor,B=A.anchorSize;this.renderConstraint(w[R],P,O,F,b,D,I,B)}},renderConstraint:function(P,w,R,A,O,F,b,D){var I=P.render;if(!I.visible||!P.pointA||!P.pointB)return this;w.lineStyle(O,R,A);var B=P.bodyA,z=P.bodyB,Y,X;if(B?Y=E.add(B.position,P.pointA):Y=P.pointA,I.type==="pin")w.strokeCircle(Y.x,Y.y,F);else{if(z?X=E.add(z.position,P.pointB):X=P.pointB,w.beginPath(),w.moveTo(Y.x,Y.y),I.type==="spring")for(var H=E.sub(X,Y),N=E.perp(E.normalise(H)),U=Math.ceil(l.clamp(P.length/5,12,20)),L,G=1;G<U;G+=1)L=G%2===0?1:-1,w.lineTo(Y.x+H.x*(G/U)+N.x*L*4,Y.y+H.y*(G/U)+N.y*L*4);w.lineTo(X.x,X.y)}return w.strokePath(),I.anchors&&D>0&&(w.fillStyle(b),w.fillCircle(Y.x,Y.y,D),w.fillCircle(X.x,X.y,D)),this},resetCollisionIDs:function(){return m._nextCollidingGroupId=1,m._nextNonCollidingGroupId=-1,m._nextCategory=1,this},shutdown:function(){p.off(this.engine),this.removeAllListeners(),T.clear(this.localWorld,!1),n.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});r.exports=M}),95349:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={setBounce:function(e){return this.body.restitution=e,this}};r.exports=y}),70679:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={setCollisionCategory:function(e){return this.body.collisionFilter.category=e,this},setCollisionGroup:function(e){return this.body.collisionFilter.group=e,this},setCollidesWith:function(e){var u=0;if(!Array.isArray(e))u=e;else for(var m=0;m<e.length;m++)u|=e[m];return this.body.collisionFilter.mask=u,this},setOnCollide:function(e){return this.body.onCollideCallback=e,this},setOnCollideEnd:function(e){return this.body.onCollideEndCallback=e,this},setOnCollideActive:function(e){return this.body.onCollideActiveCallback=e,this},setOnCollideWith:function(e,u){Array.isArray(e)||(e=[e]);for(var m=0;m<e.length;m++){var d=e[m].hasOwnProperty("body")?e[m].body:e[m];this.body.setOnCollideWith(d,u)}return this}};r.exports=y}),77178:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(84125),m={applyForce:function(d){return this._tempVec2.set(this.body.position.x,this.body.position.y),u.applyForce(this.body,this._tempVec2,d),this},applyForceFrom:function(d,l){return u.applyForce(this.body,d,l),this},thrust:function(d){var l=this.body.angle;return this._tempVec2.set(d*Math.cos(l),d*Math.sin(l)),u.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(d){var l=this.body.angle-Math.PI/2;return this._tempVec2.set(d*Math.cos(l),d*Math.sin(l)),u.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(d){var l=this.body.angle+Math.PI/2;return this._tempVec2.set(d*Math.cos(l),d*Math.sin(l)),u.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(d){var l=this.body.angle-Math.PI;return this._tempVec2.set(d*Math.cos(l),d*Math.sin(l)),u.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};r.exports=m}),74015:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={setFriction:function(e,u,m){return this.body.friction=e,u!==void 0&&(this.body.frictionAir=u),m!==void 0&&(this.body.frictionStatic=m),this},setFrictionAir:function(e){return this.body.frictionAir=e,this},setFrictionStatic:function(e){return this.body.frictionStatic=e,this}};r.exports=y}),11535:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={setIgnoreGravity:function(e){return this.body.ignoreGravity=e,this}};r.exports=y}),74497:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(84125),m=e(93736),d={setMass:function(l){return u.setMass(this.body,l),this},setDensity:function(l){return u.setDensity(this.body,l),this},centerOfMass:{get:function(){return new m(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};r.exports=d}),75529:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={setSensor:function(e){return this.body.isSensor=e,this},isSensor:function(){return this.body.isSensor}};r.exports=y}),64024:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(68516),m=e(84125),d=e(88456),l=e(72632),h=e(10998),n=e(72829),a=e(39745),c={setRectangle:function(o,v,g){return this.setBody({type:"rectangle",width:o,height:v},g)},setCircle:function(o,v){return this.setBody({type:"circle",radius:o},v)},setPolygon:function(o,v,g){return this.setBody({type:"polygon",sides:v,radius:o},g)},setTrapezoid:function(o,v,g,p){return this.setBody({type:"trapezoid",width:o,height:v,slope:g},p)},setExistingBody:function(o,v){v===void 0&&(v=!0),this.body&&this.world.remove(this.body,!0),this.body=o;for(var g=0;g<o.parts.length;g++)o.parts[g].gameObject=this;var p=this;if(o.destroy=function(){p.world.remove(p.body,!0),p.body.gameObject=null},v&&(this.world.has(o)&&this.world.remove(o,!0),this.world.add(o)),this._originComponent){var x=o.render.sprite.xOffset,T=o.render.sprite.yOffset,E=o.centerOfMass.x,M=o.centerOfMass.y;if(d(E,.5)&&d(M,.5))this.setOrigin(x+.5,T+.5);else{var P=o.centerOffset.x,w=o.centerOffset.y;this.setOrigin(x+P/this.displayWidth,T+w/this.displayHeight)}}return this},setBody:function(o,v){if(!o)return this;var g;typeof o=="string"&&(o={type:o});var p=l(o,"type","rectangle"),x=l(o,"x",this._tempVec2.x),T=l(o,"y",this._tempVec2.y),E=l(o,"width",this.width),M=l(o,"height",this.height);switch(p){case"rectangle":g=u.rectangle(x,T,E,M,v);break;case"circle":var P=l(o,"radius",Math.max(E,M)/2),w=l(o,"maxSides",25);g=u.circle(x,T,P,v,w);break;case"trapezoid":var R=l(o,"slope",.5);g=u.trapezoid(x,T,E,M,R,v);break;case"polygon":var A=l(o,"sides",5),O=l(o,"radius",Math.max(E,M)/2);g=u.polygon(x,T,A,O,v);break;case"fromVertices":case"fromVerts":var F=l(o,"verts",null);if(F)if(typeof F=="string"&&(F=a.fromPath(F)),this.body&&!this.body.hasOwnProperty("temp"))m.setVertices(this.body,F),g=this.body;else{var b=l(o,"flagInternal",!1),D=l(o,"removeCollinear",.01),I=l(o,"minimumArea",10);g=u.fromVertices(x,T,F,v,b,D,I)}break;case"fromPhysicsEditor":g=h.parseBody(x,T,o,v);break;case"fromPhysicsTracer":g=n.parseBody(x,T,o,v);break}return g&&this.setExistingBody(g,o.addToWorld),this}};r.exports=c}),25106:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(35416),m=e(22806),d=e(39073),l={setToSleep:function(){return m.set(this.body,!0),this},setAwake:function(){return m.set(this.body,!1),this},setSleepThreshold:function(h){return h===void 0&&(h=60),this.body.sleepThreshold=h,this},setSleepEvents:function(h,n){return this.setSleepStartEvent(h),this.setSleepEndEvent(n),this},setSleepStartEvent:function(h){if(h){var n=this.world;d.on(this.body,"sleepStart",function(a){n.emit(u.SLEEP_START,a,this)})}else d.off(this.body,"sleepStart");return this},setSleepEndEvent:function(h){if(h){var n=this.world;d.on(this.body,"sleepEnd",function(a){n.emit(u.SLEEP_END,a,this)})}else d.off(this.body,"sleepEnd");return this}};r.exports=l}),82884:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(84125),m={setStatic:function(d){return u.setStatic(this.body,d),this},isStatic:function(){return this.body.isStatic}};r.exports=m}),4753:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(84125),m=e(83392),d=e(35786),l=e(62138),h=4,n={x:{get:function(){return this.body.position.x},set:function(a){this._tempVec2.set(a,this.y),u.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(a){this._tempVec2.set(this.x,a),u.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(a){var c=1/this._scaleX,o=1/this._scaleY;this._scaleX=a,this._scaleX===0?this.renderFlags&=~h:this.renderFlags|=h,u.scale(this.body,c,o),u.scale(this.body,a,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(a){var c=1/this._scaleX,o=1/this._scaleY;this._scaleY=a,this._scaleY===0?this.renderFlags&=~h:this.renderFlags|=h,u.scale(this.body,c,o),u.scale(this.body,this._scaleX,a)}},angle:{get:function(){return l(this.body.angle*m.RAD_TO_DEG)},set:function(a){this.rotation=l(a)*m.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(a){this._rotation=d(a),u.setAngle(this.body,this._rotation)}},setPosition:function(a,c){return a===void 0&&(a=0),c===void 0&&(c=a),this._tempVec2.set(a,c),u.setPosition(this.body,this._tempVec2),this},setRotation:function(a){return a===void 0&&(a=0),this._rotation=d(a),u.setAngle(this.body,a),this},setFixedRotation:function(){return u.setInertia(this.body,1/0),this},setAngle:function(a){return a===void 0&&(a=0),this.angle=a,u.setAngle(this.body,this.rotation),this},setScale:function(a,c,o){a===void 0&&(a=1),c===void 0&&(c=a);var v=1/this._scaleX,g=1/this._scaleY;return this._scaleX=a,this._scaleY=c,u.scale(this.body,v,g,o),u.scale(this.body,a,c,o),this}};r.exports=n}),37268:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(84125),m={setVelocityX:function(d){return this._tempVec2.set(d,this.body.velocity.y),u.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(d){return this._tempVec2.set(this.body.velocity.x,d),u.setVelocity(this.body,this._tempVec2),this},setVelocity:function(d,l){return this._tempVec2.set(d,l),u.setVelocity(this.body,this._tempVec2),this},getVelocity:function(){return u.getVelocity(this.body)},setAngularVelocity:function(d){return u.setAngularVelocity(this.body,d),this},getAngularVelocity:function(){return u.getAngularVelocity(this.body)},setAngularSpeed:function(d){return u.setAngularSpeed(this.body,d),this},getAngularSpeed:function(){return u.getAngularSpeed(this.body)}};r.exports=m}),74527:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Bounce:e(95349),Collision:e(70679),Force:e(77178),Friction:e(74015),Gravity:e(11535),Mass:e(74497),Sensor:e(75529),SetBody:e(64024),Sleep:e(25106),Static:e(82884),Transform:e(4753),Velocity:e(37268)}}),63201:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="afteradd"}),30474:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="afterremove"}),44822:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="afterupdate"}),88820:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="beforeadd"}),94849:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="beforeremove"}),6391:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="beforeupdate"}),96738:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="collisionactive"}),7916:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="collisionend"}),59529:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="collisionstart"}),10219:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="dragend"}),183:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="drag"}),39143:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="dragstart"}),16483:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pause"}),35806:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="resume"}),22106:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="sleepend"}),5803:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="sleepstart"}),35416:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={AFTER_ADD:e(63201),AFTER_REMOVE:e(30474),AFTER_UPDATE:e(44822),BEFORE_ADD:e(88820),BEFORE_REMOVE:e(94849),BEFORE_UPDATE:e(6391),COLLISION_ACTIVE:e(96738),COLLISION_END:e(7916),COLLISION_START:e(59529),DRAG_END:e(10219),DRAG:e(183),DRAG_START:e(39143),PAUSE:e(16483),RESUME:e(35806),SLEEP_END:e(22106),SLEEP_START:e(5803)}}),45949:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={BodyBounds:e(63568),Components:e(74527),Events:e(35416),Factory:e(72653),MatterGameObject:e(3860),Image:e(7030),Matter:e(18171),MatterPhysics:e(50583),PolyDecomp:e(81084),Sprite:e(73658),TileBody:e(84720),PhysicsEditorParser:e(10998),PhysicsJSONParser:e(72829),PointerConstraint:e(88596),World:e(31468)}}),84125:((r,y,e)=>{var u={};r.exports=u;var m=e(39745),d=e(10438),l=e(22806),h=e(68758),n=e(84091),a=e(50658);(function(){u._timeCorrection=!0,u._inertiaScale=4,u._nextCollidingGroupId=1,u._nextNonCollidingGroupId=-1,u._nextCategory=1,u._baseDelta=16.666666666666668,u.create=function(o){var v={id:h.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,deltaTime:16.666666666666668,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!o.hasOwnProperty("position")&&o.hasOwnProperty("vertices")?o.position=m.centre(o.vertices):o.hasOwnProperty("vertices")||(v.vertices=m.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var g=h.extend(v,o);return c(g,o),g.setOnCollideWith=function(p,x){return x?this.onCollideWith[p.id]=x:delete this.onCollideWith[p.id],this},g},u.nextGroup=function(o){return o?u._nextNonCollidingGroupId--:u._nextCollidingGroupId++},u.nextCategory=function(){return u._nextCategory=u._nextCategory<<1,u._nextCategory};var c=function(o,v){if(v=v||{},u.set(o,{bounds:o.bounds||n.create(o.vertices),positionPrev:o.positionPrev||d.clone(o.position),anglePrev:o.anglePrev||o.angle,vertices:o.vertices,parts:o.parts||[o],isStatic:o.isStatic,isSleeping:o.isSleeping,parent:o.parent||o}),m.rotate(o.vertices,o.angle,o.position),a.rotate(o.axes,o.angle),n.update(o.bounds,o.vertices,o.velocity),u.set(o,{axes:v.axes||o.axes,area:v.area||o.area,mass:v.mass||o.mass,inertia:v.inertia||o.inertia}),o.parts.length===1){var g=o.bounds,p=o.centerOfMass,x=o.centerOffset,T=g.max.x-g.min.x,E=g.max.y-g.min.y;p.x=-(g.min.x-o.position.x)/T,p.y=-(g.min.y-o.position.y)/E,x.x=T*p.x,x.y=E*p.y}};u.set=function(o,v,g){var p;typeof v=="string"&&(p=v,v={},v[p]=g);for(p in v)if(Object.prototype.hasOwnProperty.call(v,p))switch(g=v[p],p){case"isStatic":u.setStatic(o,g);break;case"isSleeping":l.set(o,g);break;case"mass":u.setMass(o,g);break;case"density":u.setDensity(o,g);break;case"inertia":u.setInertia(o,g);break;case"vertices":u.setVertices(o,g);break;case"position":u.setPosition(o,g);break;case"angle":u.setAngle(o,g);break;case"velocity":u.setVelocity(o,g);break;case"angularVelocity":u.setAngularVelocity(o,g);break;case"speed":u.setSpeed(o,g);break;case"angularSpeed":u.setAngularSpeed(o,g);break;case"parts":u.setParts(o,g);break;case"centre":u.setCentre(o,g);break;default:o[p]=g}},u.setStatic=function(o,v){for(var g=0;g<o.parts.length;g++){var p=o.parts[g];v?(p.isStatic||(p._original={restitution:p.restitution,friction:p.friction,mass:p.mass,inertia:p.inertia,density:p.density,inverseMass:p.inverseMass,inverseInertia:p.inverseInertia}),p.restitution=0,p.friction=1,p.mass=p.inertia=p.density=1/0,p.inverseMass=p.inverseInertia=0,p.positionPrev.x=p.position.x,p.positionPrev.y=p.position.y,p.anglePrev=p.angle,p.angularVelocity=0,p.speed=0,p.angularSpeed=0,p.motion=0):p._original&&(p.restitution=p._original.restitution,p.friction=p._original.friction,p.mass=p._original.mass,p.inertia=p._original.inertia,p.density=p._original.density,p.inverseMass=p._original.inverseMass,p.inverseInertia=p._original.inverseInertia,p._original=null),p.isStatic=v}},u.setMass=function(o,v){var g=o.inertia/(o.mass/6);o.inertia=g*(v/6),o.inverseInertia=1/o.inertia,o.mass=v,o.inverseMass=1/o.mass,o.density=o.mass/o.area},u.setDensity=function(o,v){u.setMass(o,v*o.area),o.density=v},u.setInertia=function(o,v){o.inertia=v,o.inverseInertia=1/o.inertia},u.setVertices=function(o,v){v[0].body===o?o.vertices=v:o.vertices=m.create(v,o),o.axes=a.fromVertices(o.vertices),o.area=m.area(o.vertices),u.setMass(o,o.density*o.area);var g=m.centre(o.vertices);m.translate(o.vertices,g,-1),u.setInertia(o,u._inertiaScale*m.inertia(o.vertices,o.mass)),m.translate(o.vertices,o.position),n.update(o.bounds,o.vertices,o.velocity)},u.setParts=function(o,v,g){var p;for(v=v.slice(0),o.parts.length=0,o.parts.push(o),o.parent=o,p=0;p<v.length;p++){var x=v[p];x!==o&&(x.parent=o,o.parts.push(x))}if(o.parts.length!==1){if(g=typeof g<"u"?g:!0,g){var T=[];for(p=0;p<v.length;p++)T=T.concat(v[p].vertices);m.clockwiseSort(T);var E=m.hull(T),M=m.centre(E);u.setVertices(o,E),m.translate(o.vertices,M)}var P=u._totalProperties(o),w=P.centre.x,R=P.centre.y,A=o.bounds,O=o.centerOfMass,F=o.centerOffset;n.update(A,o.vertices,o.velocity),O.x=-(A.min.x-w)/(A.max.x-A.min.x),O.y=-(A.min.y-R)/(A.max.y-A.min.y),F.x=w,F.y=R,o.area=P.area,o.parent=o,o.position.x=w,o.position.y=R,o.positionPrev.x=w,o.positionPrev.y=R,u.setMass(o,P.mass),u.setInertia(o,P.inertia),u.setPosition(o,P.centre)}},u.setCentre=function(o,v,g){g?(o.positionPrev.x+=v.x,o.positionPrev.y+=v.y,o.position.x+=v.x,o.position.y+=v.y):(o.positionPrev.x=v.x-(o.position.x-o.positionPrev.x),o.positionPrev.y=v.y-(o.position.y-o.positionPrev.y),o.position.x=v.x,o.position.y=v.y)},u.setPosition=function(o,v,g){var p=d.sub(v,o.position);g?(o.positionPrev.x=o.position.x,o.positionPrev.y=o.position.y,o.velocity.x=p.x,o.velocity.y=p.y,o.speed=d.magnitude(p)):(o.positionPrev.x+=p.x,o.positionPrev.y+=p.y);for(var x=0;x<o.parts.length;x++){var T=o.parts[x];T.position.x+=p.x,T.position.y+=p.y,m.translate(T.vertices,p),n.update(T.bounds,T.vertices,o.velocity)}},u.setAngle=function(o,v,g){var p=v-o.angle;g?(o.anglePrev=o.angle,o.angularVelocity=p,o.angularSpeed=Math.abs(p)):o.anglePrev+=p;for(var x=0;x<o.parts.length;x++){var T=o.parts[x];T.angle+=p,m.rotate(T.vertices,p,o.position),a.rotate(T.axes,p),n.update(T.bounds,T.vertices,o.velocity),x>0&&d.rotateAbout(T.position,p,o.position,T.position)}},u.setVelocity=function(o,v){var g=o.deltaTime/u._baseDelta;o.positionPrev.x=o.position.x-v.x*g,o.positionPrev.y=o.position.y-v.y*g,o.velocity.x=(o.position.x-o.positionPrev.x)/g,o.velocity.y=(o.position.y-o.positionPrev.y)/g,o.speed=d.magnitude(o.velocity)},u.getVelocity=function(o){var v=u._baseDelta/o.deltaTime;return{x:(o.position.x-o.positionPrev.x)*v,y:(o.position.y-o.positionPrev.y)*v}},u.getSpeed=function(o){return d.magnitude(u.getVelocity(o))},u.setSpeed=function(o,v){u.setVelocity(o,d.mult(d.normalise(u.getVelocity(o)),v))},u.setAngularVelocity=function(o,v){var g=o.deltaTime/u._baseDelta;o.anglePrev=o.angle-v*g,o.angularVelocity=(o.angle-o.anglePrev)/g,o.angularSpeed=Math.abs(o.angularVelocity)},u.getAngularVelocity=function(o){return(o.angle-o.anglePrev)*u._baseDelta/o.deltaTime},u.getAngularSpeed=function(o){return Math.abs(u.getAngularVelocity(o))},u.setAngularSpeed=function(o,v){u.setAngularVelocity(o,h.sign(u.getAngularVelocity(o))*v)},u.translate=function(o,v,g){u.setPosition(o,d.add(o.position,v),g)},u.rotate=function(o,v,g,p){if(!g)u.setAngle(o,o.angle+v,p);else{var x=Math.cos(v),T=Math.sin(v),E=o.position.x-g.x,M=o.position.y-g.y;u.setPosition(o,{x:g.x+(E*x-M*T),y:g.y+(E*T+M*x)},p),u.setAngle(o,o.angle+v,p)}},u.scale=function(o,v,g,p){var x=0,T=0;p=p||o.position;for(var E=0;E<o.parts.length;E++){var M=o.parts[E];M.scale.x=v,M.scale.y=g,m.scale(M.vertices,v,g,p),M.axes=a.fromVertices(M.vertices),M.area=m.area(M.vertices),u.setMass(M,o.density*M.area),m.translate(M.vertices,{x:-M.position.x,y:-M.position.y}),u.setInertia(M,u._inertiaScale*m.inertia(M.vertices,M.mass)),m.translate(M.vertices,{x:M.position.x,y:M.position.y}),E>0&&(x+=M.area,T+=M.inertia),M.position.x=p.x+(M.position.x-p.x)*v,M.position.y=p.y+(M.position.y-p.y)*g,n.update(M.bounds,M.vertices,o.velocity)}o.parts.length>1&&(o.area=x,o.isStatic||(u.setMass(o,o.density*x),u.setInertia(o,T))),o.circleRadius&&(v===g?o.circleRadius*=v:o.circleRadius=null)},u.update=function(o,v){v=(typeof v<"u"?v:16.666666666666668)*o.timeScale;var g=v*v,p=u._timeCorrection?v/(o.deltaTime||v):1,x=1-o.frictionAir*(v/h._baseDelta),T=(o.position.x-o.positionPrev.x)*p,E=(o.position.y-o.positionPrev.y)*p;o.velocity.x=T*x+o.force.x/o.mass*g,o.velocity.y=E*x+o.force.y/o.mass*g,o.positionPrev.x=o.position.x,o.positionPrev.y=o.position.y,o.position.x+=o.velocity.x,o.position.y+=o.velocity.y,o.deltaTime=v,o.angularVelocity=(o.angle-o.anglePrev)*x*p+o.torque/o.inertia*g,o.anglePrev=o.angle,o.angle+=o.angularVelocity,o.speed=d.magnitude(o.velocity),o.angularSpeed=Math.abs(o.angularVelocity);for(var M=0;M<o.parts.length;M++){var P=o.parts[M];m.translate(P.vertices,o.velocity),M>0&&(P.position.x+=o.velocity.x,P.position.y+=o.velocity.y),o.angularVelocity!==0&&(m.rotate(P.vertices,o.angularVelocity,o.position),a.rotate(P.axes,o.angularVelocity),M>0&&d.rotateAbout(P.position,o.angularVelocity,o.position,P.position)),n.update(P.bounds,P.vertices,o.velocity)}},u.updateVelocities=function(o){var v=u._baseDelta/o.deltaTime,g=o.velocity;g.x=(o.position.x-o.positionPrev.x)*v,g.y=(o.position.y-o.positionPrev.y)*v,o.speed=Math.sqrt(g.x*g.x+g.y*g.y),o.angularVelocity=(o.angle-o.anglePrev)*v,o.angularSpeed=Math.abs(o.angularVelocity)},u.applyForce=function(o,v,g){var p={x:v.x-o.position.x,y:v.y-o.position.y};o.force.x+=g.x,o.force.y+=g.y,o.torque+=p.x*g.y-p.y*g.x},u._totalProperties=function(o){for(var v={mass:0,area:0,inertia:0,centre:{x:0,y:0}},g=o.parts.length===1?0:1;g<o.parts.length;g++){var p=o.parts[g],x=p.mass!==1/0?p.mass:1;v.mass+=x,v.area+=p.area,v.inertia+=p.inertia,v.centre=d.add(v.centre,d.mult(p.position,x))}return v.centre=d.div(v.centre,v.mass),v}})()}),11299:((r,y,e)=>{var u={};r.exports=u;var m=e(39073),d=e(68758),l=e(84091),h=e(84125);(function(){u.create=function(n){return d.extend({id:d.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},n)},u.setModified=function(n,a,c,o){if(m.trigger(n,"compositeModified",n),n.isModified=a,a&&n.cache&&(n.cache.allBodies=null,n.cache.allConstraints=null,n.cache.allComposites=null),c&&n.parent&&u.setModified(n.parent,a,c,o),o)for(var v=0;v<n.composites.length;v++){var g=n.composites[v];u.setModified(g,a,c,o)}},u.add=function(n,a){var c=[].concat(a);m.trigger(n,"beforeAdd",{object:a});for(var o=0;o<c.length;o++){var v=c[o];switch(v.type){case"body":if(v.parent!==v){d.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}u.addBody(n,v);break;case"constraint":u.addConstraint(n,v);break;case"composite":u.addComposite(n,v);break;case"mouseConstraint":u.addConstraint(n,v.constraint);break}}return m.trigger(n,"afterAdd",{object:a}),n},u.remove=function(n,a,c){var o=[].concat(a);m.trigger(n,"beforeRemove",{object:a});for(var v=0;v<o.length;v++){var g=o[v];switch(g.type){case"body":u.removeBody(n,g,c);break;case"constraint":u.removeConstraint(n,g,c);break;case"composite":u.removeComposite(n,g,c);break;case"mouseConstraint":u.removeConstraint(n,g.constraint);break}}return m.trigger(n,"afterRemove",{object:a}),n},u.addComposite=function(n,a){return n.composites.push(a),a.parent=n,u.setModified(n,!0,!0,!1),n},u.removeComposite=function(n,a,c){var o=d.indexOf(n.composites,a);if(o!==-1&&u.removeCompositeAt(n,o),c)for(var v=0;v<n.composites.length;v++)u.removeComposite(n.composites[v],a,!0);return n},u.removeCompositeAt=function(n,a){return n.composites.splice(a,1),u.setModified(n,!0,!0,!1),n},u.addBody=function(n,a){return n.bodies.push(a),u.setModified(n,!0,!0,!1),n},u.removeBody=function(n,a,c){var o=d.indexOf(n.bodies,a);if(o!==-1&&u.removeBodyAt(n,o),c)for(var v=0;v<n.composites.length;v++)u.removeBody(n.composites[v],a,!0);return n},u.removeBodyAt=function(n,a){return n.bodies.splice(a,1),u.setModified(n,!0,!0,!1),n},u.addConstraint=function(n,a){return n.constraints.push(a),u.setModified(n,!0,!0,!1),n},u.removeConstraint=function(n,a,c){var o=d.indexOf(n.constraints,a);if(o!==-1&&u.removeConstraintAt(n,o),c)for(var v=0;v<n.composites.length;v++)u.removeConstraint(n.composites[v],a,!0);return n},u.removeConstraintAt=function(n,a){return n.constraints.splice(a,1),u.setModified(n,!0,!0,!1),n},u.clear=function(n,a,c){if(c)for(var o=0;o<n.composites.length;o++)u.clear(n.composites[o],a,!0);return a?n.bodies=n.bodies.filter(function(v){return v.isStatic}):n.bodies.length=0,n.constraints.length=0,n.composites.length=0,u.setModified(n,!0,!0,!1),n},u.allBodies=function(n){if(n.cache&&n.cache.allBodies)return n.cache.allBodies;for(var a=[].concat(n.bodies),c=0;c<n.composites.length;c++)a=a.concat(u.allBodies(n.composites[c]));return n.cache&&(n.cache.allBodies=a),a},u.allConstraints=function(n){if(n.cache&&n.cache.allConstraints)return n.cache.allConstraints;for(var a=[].concat(n.constraints),c=0;c<n.composites.length;c++)a=a.concat(u.allConstraints(n.composites[c]));return n.cache&&(n.cache.allConstraints=a),a},u.allComposites=function(n){if(n.cache&&n.cache.allComposites)return n.cache.allComposites;for(var a=[].concat(n.composites),c=0;c<n.composites.length;c++)a=a.concat(u.allComposites(n.composites[c]));return n.cache&&(n.cache.allComposites=a),a},u.get=function(n,a,c){var o,v;switch(c){case"body":o=u.allBodies(n);break;case"constraint":o=u.allConstraints(n);break;case"composite":o=u.allComposites(n).concat(n);break}return o?(v=o.filter(function(g){return g.id.toString()===a.toString()}),v.length===0?null:v[0]):null},u.move=function(n,a,c){return u.remove(n,a),u.add(c,a),n},u.rebase=function(n){for(var a=u.allBodies(n).concat(u.allConstraints(n)).concat(u.allComposites(n)),c=0;c<a.length;c++)a[c].id=d.nextId();return n},u.translate=function(n,a,c){for(var o=c?u.allBodies(n):n.bodies,v=0;v<o.length;v++)h.translate(o[v],a);return n},u.rotate=function(n,a,c,o){for(var v=Math.cos(a),g=Math.sin(a),p=o?u.allBodies(n):n.bodies,x=0;x<p.length;x++){var T=p[x],E=T.position.x-c.x,M=T.position.y-c.y;h.setPosition(T,{x:c.x+(E*v-M*g),y:c.y+(E*g+M*v)}),h.rotate(T,a)}return n},u.scale=function(n,a,c,o,v){for(var g=v?u.allBodies(n):n.bodies,p=0;p<g.length;p++){var x=g[p],T=x.position.x-o.x,E=x.position.y-o.y;h.setPosition(x,{x:o.x+T*a,y:o.y+E*c}),h.scale(x,a,c)}return n},u.bounds=function(n){for(var a=u.allBodies(n),c=[],o=0;o<a.length;o+=1){var v=a[o];c.push(v.bounds.min,v.bounds.max)}return l.create(c)}})()}),72005:((r,y,e)=>{var u={};r.exports=u;var m=e(11299);(function(){u.create=m.create,u.add=m.add,u.remove=m.remove,u.clear=m.clear,u.addComposite=m.addComposite,u.addBody=m.addBody,u.addConstraint=m.addConstraint})()}),63454:((r,y,e)=>{var u={};r.exports=u;var m=e(39745),d=e(70584);(function(){var l=[],h={overlap:0,axis:null},n={overlap:0,axis:null};u.create=function(a,c){return{pair:null,collided:!1,bodyA:a,bodyB:c,parentA:a.parent,parentB:c.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},u.collides=function(a,c,o){if(u._overlapAxes(h,a.vertices,c.vertices,a.axes),h.overlap<=0||(u._overlapAxes(n,c.vertices,a.vertices,c.axes),n.overlap<=0))return null;var v=o&&o.table[d.id(a,c)],g;v?g=v.collision:(g=u.create(a,c),g.collided=!0,g.bodyA=a.id<c.id?a:c,g.bodyB=a.id<c.id?c:a,g.parentA=g.bodyA.parent,g.parentB=g.bodyB.parent),a=g.bodyA,c=g.bodyB;var p;h.overlap<n.overlap?p=h:p=n;var x=g.normal,T=g.supports,E=p.axis,M=E.x,P=E.y;M*(c.position.x-a.position.x)+P*(c.position.y-a.position.y)<0?(x.x=M,x.y=P):(x.x=-M,x.y=-P),g.tangent.x=-x.y,g.tangent.y=x.x,g.depth=p.overlap,g.penetration.x=x.x*g.depth,g.penetration.y=x.y*g.depth;var w=u._findSupports(a,c,x,1),R=0;if(m.contains(a.vertices,w[0])&&(T[R++]=w[0]),m.contains(a.vertices,w[1])&&(T[R++]=w[1]),R<2){var A=u._findSupports(c,a,x,-1);m.contains(c.vertices,A[0])&&(T[R++]=A[0]),R<2&&m.contains(c.vertices,A[1])&&(T[R++]=A[1])}return R===0&&(T[R++]=w[0]),T.length=R,g},u._overlapAxes=function(a,c,o,v){var g=c.length,p=o.length,x=c[0].x,T=c[0].y,E=o[0].x,M=o[0].y,P=v.length,w=Number.MAX_VALUE,R=0,A,O,F,b,D,I;for(D=0;D<P;D++){var B=v[D],z=B.x,Y=B.y,X=x*z+T*Y,H=E*z+M*Y,N=X,U=H;for(I=1;I<g;I+=1)b=c[I].x*z+c[I].y*Y,b>N?N=b:b<X&&(X=b);for(I=1;I<p;I+=1)b=o[I].x*z+o[I].y*Y,b>U?U=b:b<H&&(H=b);if(O=N-H,F=U-X,A=O<F?O:F,A<w&&(w=A,R=D,A<=0))break}a.axis=v[R],a.overlap=w},u._projectToAxis=function(a,c,o){for(var v=c[0].x*o.x+c[0].y*o.y,g=v,p=1;p<c.length;p+=1){var x=c[p].x*o.x+c[p].y*o.y;x>g?g=x:x<v&&(v=x)}a.min=v,a.max=g},u._findSupports=function(a,c,o,v){var g=c.vertices,p=g.length,x=a.position.x,T=a.position.y,E=o.x*v,M=o.y*v,P=Number.MAX_VALUE,w,R,A,O,F;for(F=0;F<p;F+=1)R=g[F],O=E*(x-R.x)+M*(T-R.y),O<P&&(P=O,w=R);return A=g[(p+w.index-1)%p],P=E*(x-A.x)+M*(T-A.y),R=g[(w.index+1)%p],E*(x-R.x)+M*(T-R.y)<P?(l[0]=w,l[1]=R,l):(l[0]=w,l[1]=A,l)}})()}),17319:(r=>{var y={};r.exports=y,(function(){y.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}})()}),13657:((r,y,e)=>{var u={};r.exports=u;var m=e(68758),d=e(63454);(function(){u.create=function(l){var h={bodies:[],pairs:null};return m.extend(h,l)},u.setBodies=function(l,h){l.bodies=h.slice(0)},u.clear=function(l){l.bodies=[]},u.collisions=function(l){var h=[],n=l.pairs,a=l.bodies,c=a.length,o=u.canCollide,v=d.collides,g,p;for(a.sort(u._compareBoundsX),g=0;g<c;g++){var x=a[g],T=x.bounds,E=x.bounds.max.x,M=x.bounds.max.y,P=x.bounds.min.y,w=x.isStatic||x.isSleeping,R=x.parts.length,A=R===1;for(p=g+1;p<c;p++){var O=a[p],F=O.bounds;if(F.min.x>E)break;if(!(M<F.min.y||P>F.max.y)&&!(w&&(O.isStatic||O.isSleeping))&&o(x.collisionFilter,O.collisionFilter)){var b=O.parts.length;if(A&&b===1){var D=v(x,O,n);D&&h.push(D)}else for(var I=R>1?1:0,B=b>1?1:0,z=I;z<R;z++)for(var Y=x.parts[z],T=Y.bounds,X=B;X<b;X++){var H=O.parts[X],F=H.bounds;if(!(T.min.x>F.max.x||T.max.x<F.min.x||T.max.y<F.min.y||T.min.y>F.max.y)){var D=v(Y,H,n);D&&h.push(D)}}}}}return h},u.canCollide=function(l,h){return l.group===h.group&&l.group!==0?l.group>0:(l.mask&h.category)!==0&&(h.mask&l.category)!==0},u._compareBoundsX=function(l,h){return l.bounds.min.x-h.bounds.min.x}})()}),70584:((r,y,e)=>{var u={};r.exports=u;var m=e(17319);(function(){u.create=function(d,l){var h=d.bodyA,n=d.bodyB,a={id:u.id(h,n),bodyA:h,bodyB:n,collision:d,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:h.isSensor||n.isSensor,timeCreated:l,timeUpdated:l,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return u.update(a,d,l),a},u.update=function(d,l,h){var n=d.contacts,a=l.supports,c=d.activeContacts,o=l.parentA,v=l.parentB,g=o.vertices.length;d.isActive=!0,d.timeUpdated=h,d.collision=l,d.separation=l.depth,d.inverseMass=o.inverseMass+v.inverseMass,d.friction=o.friction<v.friction?o.friction:v.friction,d.frictionStatic=o.frictionStatic>v.frictionStatic?o.frictionStatic:v.frictionStatic,d.restitution=o.restitution>v.restitution?o.restitution:v.restitution,d.slop=o.slop>v.slop?o.slop:v.slop,l.pair=d,c.length=0;for(var p=0;p<a.length;p++){var x=a[p],T=x.body===o?x.index:g+x.index,E=n[T];E?c.push(E):c.push(n[T]=m.create(x))}},u.setActive=function(d,l,h){l?(d.isActive=!0,d.timeUpdated=h):(d.isActive=!1,d.activeContacts.length=0)},u.id=function(d,l){return d.id<l.id?"A"+d.id+"B"+l.id:"A"+l.id+"B"+d.id}})()}),91327:((r,y,e)=>{var u={};r.exports=u;var m=e(70584),d=e(68758);(function(){u.create=function(l){return d.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},l)},u.update=function(l,h,n){var a=l.list,c=a.length,o=l.table,v=h.length,g=l.collisionStart,p=l.collisionEnd,x=l.collisionActive,T,E,M,P;for(g.length=0,p.length=0,x.length=0,P=0;P<c;P++)a[P].confirmedActive=!1;for(P=0;P<v;P++)T=h[P],M=T.pair,M?(M.isActive?x.push(M):g.push(M),m.update(M,T,n),M.confirmedActive=!0):(M=m.create(T,n),o[M.id]=M,g.push(M),a.push(M));var w=[];for(c=a.length,P=0;P<c;P++)M=a[P],M.confirmedActive||(m.setActive(M,!1,n),p.push(M),!M.collision.bodyA.isSleeping&&!M.collision.bodyB.isSleeping&&w.push(P));for(P=0;P<w.length;P++)E=w[P]-P,M=a[E],a.splice(E,1),delete o[M.id]},u.clear=function(l){return l.table={},l.list.length=0,l.collisionStart.length=0,l.collisionActive.length=0,l.collisionEnd.length=0,l}})()}),13390:((r,y,e)=>{var u={};r.exports=u;var m=e(10438),d=e(63454),l=e(84091),h=e(68516),n=e(39745);(function(){u.collides=function(a,c){for(var o=[],v=c.length,g=a.bounds,p=d.collides,x=l.overlaps,T=0;T<v;T++){var E=c[T],M=E.parts.length,P=M===1?0:1;if(a!==E&&x(E.bounds,g))for(var w=P;w<M;w++){var R=E.parts[w];if(x(R.bounds,g)){var A=p(R,a);if(A){o.push(A);break}}}}return o},u.ray=function(a,c,o,v){v=v||1e-100;for(var g=m.angle(c,o),p=m.magnitude(m.sub(c,o)),x=(o.x+c.x)*.5,T=(o.y+c.y)*.5,E=h.rectangle(x,T,p,v,{angle:g}),M=u.collides(E,a),P=0;P<M.length;P+=1){var w=M[P];w.body=w.bodyB=w.bodyA}return M},u.region=function(a,c,o){for(var v=[],g=0;g<a.length;g++){var p=a[g],x=l.overlaps(p.bounds,c);(x&&!o||!x&&o)&&v.push(p)}return v},u.point=function(a,c){for(var o=[],v=0;v<a.length;v++){var g=a[v];if(l.contains(g.bounds,c))for(var p=g.parts.length===1?0:1;p<g.parts.length;p++){var x=g.parts[p];if(l.contains(x.bounds,c)&&n.contains(x.vertices,c)){o.push(g);break}}}return o}})()}),44272:((r,y,e)=>{var u={};r.exports=u;var m=e(39745),d=e(68758),l=e(84091);(function(){u._restingThresh=2,u._restingThreshTangent=Math.sqrt(6),u._positionDampen=.9,u._positionWarming=.8,u._frictionNormalMultiplier=5,u._frictionMaxStatic=Number.MAX_VALUE,u.preSolvePosition=function(h){var n,a,c,o=h.length;for(n=0;n<o;n++)a=h[n],a.isActive&&(c=a.activeContacts.length,a.collision.parentA.totalContacts+=c,a.collision.parentB.totalContacts+=c)},u.solvePosition=function(h,n,a){var c,o,v,g,p,x,T,E,M=u._positionDampen*(a||1),P=d.clamp(n/d._baseDelta,0,1),w=h.length;for(c=0;c<w;c++)o=h[c],!(!o.isActive||o.isSensor)&&(v=o.collision,g=v.parentA,p=v.parentB,x=v.normal,o.separation=x.x*(p.positionImpulse.x+v.penetration.x-g.positionImpulse.x)+x.y*(p.positionImpulse.y+v.penetration.y-g.positionImpulse.y));for(c=0;c<w;c++)o=h[c],!(!o.isActive||o.isSensor)&&(v=o.collision,g=v.parentA,p=v.parentB,x=v.normal,E=o.separation-o.slop*P,(g.isStatic||p.isStatic)&&(E*=2),g.isStatic||g.isSleeping||(T=M/g.totalContacts,g.positionImpulse.x+=x.x*E*T,g.positionImpulse.y+=x.y*E*T),p.isStatic||p.isSleeping||(T=M/p.totalContacts,p.positionImpulse.x-=x.x*E*T,p.positionImpulse.y-=x.y*E*T))},u.postSolvePosition=function(h){for(var n=u._positionWarming,a=h.length,c=m.translate,o=l.update,v=0;v<a;v++){var g=h[v],p=g.positionImpulse,x=p.x,T=p.y,E=g.velocity;if(g.totalContacts=0,x!==0||T!==0){for(var M=0;M<g.parts.length;M++){var P=g.parts[M];c(P.vertices,p),o(P.bounds,P.vertices,E),P.position.x+=x,P.position.y+=T}g.positionPrev.x+=x,g.positionPrev.y+=T,x*E.x+T*E.y<0?(p.x=0,p.y=0):(p.x*=n,p.y*=n)}}},u.preSolveVelocity=function(h){var n=h.length,a,c;for(a=0;a<n;a++){var o=h[a];if(!(!o.isActive||o.isSensor)){var v=o.activeContacts,g=v.length,p=o.collision,x=p.parentA,T=p.parentB,E=p.normal,M=p.tangent;for(c=0;c<g;c++){var P=v[c],w=P.vertex,R=P.normalImpulse,A=P.tangentImpulse;if(R!==0||A!==0){var O=E.x*R+M.x*A,F=E.y*R+M.y*A;x.isStatic||x.isSleeping||(x.positionPrev.x+=O*x.inverseMass,x.positionPrev.y+=F*x.inverseMass,x.anglePrev+=x.inverseInertia*((w.x-x.position.x)*F-(w.y-x.position.y)*O)),T.isStatic||T.isSleeping||(T.positionPrev.x-=O*T.inverseMass,T.positionPrev.y-=F*T.inverseMass,T.anglePrev-=T.inverseInertia*((w.x-T.position.x)*F-(w.y-T.position.y)*O))}}}}},u.solveVelocity=function(h,n){var a=n/d._baseDelta,c=a*a,o=c*a,v=-u._restingThresh*a,g=u._restingThreshTangent,p=u._frictionNormalMultiplier*a,x=u._frictionMaxStatic,T=h.length,E,M,P,w;for(P=0;P<T;P++){var R=h[P];if(!(!R.isActive||R.isSensor)){var A=R.collision,O=A.parentA,F=A.parentB,b=O.velocity,D=F.velocity,I=A.normal.x,B=A.normal.y,z=A.tangent.x,Y=A.tangent.y,X=R.activeContacts,H=X.length,N=1/H,U=O.inverseMass+F.inverseMass,L=R.friction*R.frictionStatic*p;for(b.x=O.position.x-O.positionPrev.x,b.y=O.position.y-O.positionPrev.y,D.x=F.position.x-F.positionPrev.x,D.y=F.position.y-F.positionPrev.y,O.angularVelocity=O.angle-O.anglePrev,F.angularVelocity=F.angle-F.anglePrev,w=0;w<H;w++){var G=X[w],V=G.vertex,k=V.x-O.position.x,W=V.y-O.position.y,$=V.x-F.position.x,K=V.y-F.position.y,j=b.x-W*O.angularVelocity,Z=b.y+k*O.angularVelocity,J=D.x-K*F.angularVelocity,Q=D.y+$*F.angularVelocity,_=j-J,q=Z-Q,et=I*_+B*q,rt=z*_+Y*q,ot=R.separation+et,ht=Math.min(ot,1);ht=ot<0?0:ht;var tt=ht*L;rt<-tt||rt>tt?(M=rt>0?rt:-rt,E=R.friction*(rt>0?1:-1)*o,E<-M?E=-M:E>M&&(E=M)):(E=rt,M=x);var at=k*B-W*I,nt=$*B-K*I,pt=N/(U+O.inverseInertia*at*at+F.inverseInertia*nt*nt),vt=(1+R.restitution)*et*pt;if(E*=pt,et<v)G.normalImpulse=0;else{var Lt=G.normalImpulse;G.normalImpulse+=vt,G.normalImpulse>0&&(G.normalImpulse=0),vt=G.normalImpulse-Lt}if(rt<-g||rt>g)G.tangentImpulse=0;else{var wt=G.tangentImpulse;G.tangentImpulse+=E,G.tangentImpulse<-M&&(G.tangentImpulse=-M),G.tangentImpulse>M&&(G.tangentImpulse=M),E=G.tangentImpulse-wt}var Tt=I*vt+z*E,mt=B*vt+Y*E;O.isStatic||O.isSleeping||(O.positionPrev.x+=Tt*O.inverseMass,O.positionPrev.y+=mt*O.inverseMass,O.anglePrev+=(k*mt-W*Tt)*O.inverseInertia),F.isStatic||F.isSleeping||(F.positionPrev.x-=Tt*F.inverseMass,F.positionPrev.y-=mt*F.inverseMass,F.anglePrev-=($*mt-K*Tt)*F.inverseInertia)}}}}})()}),52838:((r,y,e)=>{var u={};r.exports=u;var m=e(39745),d=e(10438),l=e(22806),h=e(84091),n=e(50658),a=e(68758);(function(){u._warming=.4,u._torqueDampen=1,u._minLength=1e-6,u.create=function(c){var o=c;o.bodyA&&!o.pointA&&(o.pointA={x:0,y:0}),o.bodyB&&!o.pointB&&(o.pointB={x:0,y:0});var v=o.bodyA?d.add(o.bodyA.position,o.pointA):o.pointA,g=o.bodyB?d.add(o.bodyB.position,o.pointB):o.pointB,p=d.magnitude(d.sub(v,g));o.length=typeof o.length<"u"?o.length:p,o.id=o.id||a.nextId(),o.label=o.label||"Constraint",o.type="constraint",o.stiffness=o.stiffness||(o.length>0?1:.7),o.damping=o.damping||0,o.angularStiffness=o.angularStiffness||0,o.angleA=o.bodyA?o.bodyA.angle:o.angleA,o.angleB=o.bodyB?o.bodyB.angle:o.angleB,o.plugin={};var x={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return o.length===0&&o.stiffness>.1?(x.type="pin",x.anchors=!1):o.stiffness<.9&&(x.type="spring"),o.render=a.extend(x,o.render),o},u.preSolveAll=function(c){for(var o=0;o<c.length;o+=1){var v=c[o],g=v.constraintImpulse;v.isStatic||g.x===0&&g.y===0&&g.angle===0||(v.position.x+=g.x,v.position.y+=g.y,v.angle+=g.angle)}},u.solveAll=function(c,o){for(var v=a.clamp(o/a._baseDelta,0,1),g=0;g<c.length;g+=1){var p=c[g],x=!p.bodyA||p.bodyA&&p.bodyA.isStatic,T=!p.bodyB||p.bodyB&&p.bodyB.isStatic;(x||T)&&u.solve(c[g],v)}for(g=0;g<c.length;g+=1)p=c[g],x=!p.bodyA||p.bodyA&&p.bodyA.isStatic,T=!p.bodyB||p.bodyB&&p.bodyB.isStatic,!x&&!T&&u.solve(c[g],v)},u.solve=function(c,o){var v=c.bodyA,g=c.bodyB,p=c.pointA,x=c.pointB;if(!(!v&&!g)){v&&!v.isStatic&&(d.rotate(p,v.angle-c.angleA,p),c.angleA=v.angle),g&&!g.isStatic&&(d.rotate(x,g.angle-c.angleB,x),c.angleB=g.angle);var T=p,E=x;if(v&&(T=d.add(v.position,p)),g&&(E=d.add(g.position,x)),!(!T||!E)){var M=d.sub(T,E),P=d.magnitude(M);P<u._minLength&&(P=u._minLength);var w=(P-c.length)/P,R=c.stiffness>=1||c.length===0,A=R?c.stiffness*o:c.stiffness*o*o,O=c.damping*o,F=d.mult(M,w*A),b=(v?v.inverseMass:0)+(g?g.inverseMass:0),D=(v?v.inverseInertia:0)+(g?g.inverseInertia:0),I=b+D,B,z,Y,X,H;if(O>0){var N=d.create();Y=d.div(M,P),H=d.sub(g&&d.sub(g.position,g.positionPrev)||N,v&&d.sub(v.position,v.positionPrev)||N),X=d.dot(Y,H)}v&&!v.isStatic&&(z=v.inverseMass/b,v.constraintImpulse.x-=F.x*z,v.constraintImpulse.y-=F.y*z,v.position.x-=F.x*z,v.position.y-=F.y*z,O>0&&(v.positionPrev.x-=O*Y.x*X*z,v.positionPrev.y-=O*Y.y*X*z),B=d.cross(p,F)/I*u._torqueDampen*v.inverseInertia*(1-c.angularStiffness),v.constraintImpulse.angle-=B,v.angle-=B),g&&!g.isStatic&&(z=g.inverseMass/b,g.constraintImpulse.x+=F.x*z,g.constraintImpulse.y+=F.y*z,g.position.x+=F.x*z,g.position.y+=F.y*z,O>0&&(g.positionPrev.x+=O*Y.x*X*z,g.positionPrev.y+=O*Y.y*X*z),B=d.cross(x,F)/I*u._torqueDampen*g.inverseInertia*(1-c.angularStiffness),g.constraintImpulse.angle+=B,g.angle+=B)}}},u.postSolveAll=function(c){for(var o=0;o<c.length;o++){var v=c[o],g=v.constraintImpulse;if(!(v.isStatic||g.x===0&&g.y===0&&g.angle===0)){l.set(v,!1);for(var p=0;p<v.parts.length;p++){var x=v.parts[p];m.translate(x.vertices,g),p>0&&(x.position.x+=g.x,x.position.y+=g.y),g.angle!==0&&(m.rotate(x.vertices,g.angle,v.position),n.rotate(x.axes,g.angle),p>0&&d.rotateAbout(x.position,g.angle,v.position,x.position)),h.update(x.bounds,x.vertices,v.velocity)}g.angle*=u._warming,g.x*=u._warming,g.y*=u._warming}}},u.pointAWorld=function(c){return{x:(c.bodyA?c.bodyA.position.x:0)+(c.pointA?c.pointA.x:0),y:(c.bodyA?c.bodyA.position.y:0)+(c.pointA?c.pointA.y:0)}},u.pointBWorld=function(c){return{x:(c.bodyB?c.bodyB.position.x:0)+(c.pointB?c.pointB.x:0),y:(c.bodyB?c.bodyB.position.y:0)+(c.pointB?c.pointB.y:0)}},u.currentLength=function(c){var o=(c.bodyA?c.bodyA.position.x:0)+(c.pointA?c.pointA.x:0),v=(c.bodyA?c.bodyA.position.y:0)+(c.pointA?c.pointA.y:0),g=(c.bodyB?c.bodyB.position.x:0)+(c.pointB?c.pointB.x:0),p=(c.bodyB?c.bodyB.position.y:0)+(c.pointB?c.pointB.y:0),x=o-g,T=v-p;return Math.sqrt(x*x+T*T)}})()}),68758:((r,y,e)=>{var u={};r.exports=u,(function(){u._baseDelta=16.666666666666668,u._nextId=0,u._seed=0,u._nowStartTime=+new Date,u._warnedOnce={},u._decomp=null,u.extend=function(d,l){var h,n;typeof l=="boolean"?(h=2,n=l):(h=1,n=!0);for(var a=h;a<arguments.length;a++){var c=arguments[a];if(c)for(var o in c)n&&c[o]&&c[o].constructor===Object&&(!d[o]||d[o].constructor===Object)?(d[o]=d[o]||{},u.extend(d[o],n,c[o])):d[o]=c[o]}return d},u.clone=function(d,l){return u.extend({},l,d)},u.keys=function(d){if(Object.keys)return Object.keys(d);var l=[];for(var h in d)l.push(h);return l},u.values=function(d){var l=[];if(Object.keys){for(var h=Object.keys(d),n=0;n<h.length;n++)l.push(d[h[n]]);return l}for(var a in d)l.push(d[a]);return l},u.get=function(d,l,h,n){l=l.split(".").slice(h,n);for(var a=0;a<l.length;a+=1)d=d[l[a]];return d},u.set=function(d,l,h,n,a){var c=l.split(".").slice(n,a);return u.get(d,l,0,-1)[c[c.length-1]]=h,h},u.shuffle=function(d){for(var l=d.length-1;l>0;l--){var h=Math.floor(u.random()*(l+1)),n=d[l];d[l]=d[h],d[h]=n}return d},u.choose=function(d){return d[Math.floor(u.random()*d.length)]},u.isElement=function(d){return typeof HTMLElement<"u"?d instanceof HTMLElement:!!(d&&d.nodeType&&d.nodeName)},u.isArray=function(d){return Object.prototype.toString.call(d)==="[object Array]"},u.isFunction=function(d){return typeof d=="function"},u.isPlainObject=function(d){return typeof d=="object"&&d.constructor===Object},u.isString=function(d){return toString.call(d)==="[object String]"},u.clamp=function(d,l,h){return d<l?l:d>h?h:d},u.sign=function(d){return d<0?-1:1},u.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-u._nowStartTime},u.random=function(d,l){return d=typeof d<"u"?d:0,l=typeof l<"u"?l:1,d+m()*(l-d)};var m=function(){return u._seed=(u._seed*9301+49297)%233280,u._seed/233280};u.colorToNumber=function(d){return d=d.replace("#",""),d.length==3&&(d=d.charAt(0)+d.charAt(0)+d.charAt(1)+d.charAt(1)+d.charAt(2)+d.charAt(2)),parseInt(d,16)},u.logLevel=1,u.log=function(){console&&u.logLevel>0&&u.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},u.info=function(){console&&u.logLevel>0&&u.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},u.warn=function(){console&&u.logLevel>0&&u.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},u.warnOnce=function(){var d=Array.prototype.slice.call(arguments).join(" ");u._warnedOnce[d]||(u.warn(d),u._warnedOnce[d]=!0)},u.deprecated=function(d,l,h){d[l]=u.chain(function(){u.warnOnce("🔅 deprecated 🔅",h)},d[l])},u.nextId=function(){return u._nextId++},u.indexOf=function(d,l){if(d.indexOf)return d.indexOf(l);for(var h=0;h<d.length;h++)if(d[h]===l)return h;return-1},u.map=function(d,l){if(d.map)return d.map(l);for(var h=[],n=0;n<d.length;n+=1)h.push(l(d[n]));return h},u.topologicalSort=function(d){var l=[],h=[],n=[];for(var a in d)!h[a]&&!n[a]&&u._topologicalSort(a,h,n,d,l);return l},u._topologicalSort=function(d,l,h,n,a){var c=n[d]||[];h[d]=!0;for(var o=0;o<c.length;o+=1){var v=c[o];h[v]||l[v]||u._topologicalSort(v,l,h,n,a)}h[d]=!1,l[d]=!0,a.push(d)},u.chain=function(){for(var d=[],l=0;l<arguments.length;l+=1){var h=arguments[l];h._chained?d.push.apply(d,h._chained):d.push(h)}var n=function(){for(var a,c=new Array(arguments.length),o=0,v=arguments.length;o<v;o++)c[o]=arguments[o];for(o=0;o<d.length;o+=1){var g=d[o].apply(a,c);typeof g<"u"&&(a=g)}return a};return n._chained=d,n},u.chainPathBefore=function(d,l,h){return u.set(d,l,u.chain(h,u.get(d,l)))},u.chainPathAfter=function(d,l,h){return u.set(d,l,u.chain(u.get(d,l),h))},u.setDecomp=function(d){u._decomp=d},u.getDecomp=function(){var d=u._decomp;try{!d&&typeof window<"u"&&(d=window.decomp),!d&&typeof e.g<"u"&&(d=e.g.decomp)}catch{d=null}return d}})()}),45775:((r,y,e)=>{var u={};r.exports=u;var m=e(22806),d=e(44272),l=e(13657),h=e(91327),n=e(39073),a=e(11299),c=e(52838),o=e(68758),v=e(84125);(function(){u.create=function(g){g=g||{};var p={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},x=o.extend(p,g);return x.world=g.world||a.create({label:"World"}),x.pairs=g.pairs||h.create(),x.detector=g.detector||l.create(),x.grid={buckets:[]},x.world.gravity=x.gravity,x.broadphase=x.grid,x.metrics={},x},u.update=function(g,p){var x=o.now(),T=g.world,E=g.detector,M=g.pairs,P=g.timing,w=P.timestamp,R;p=typeof p<"u"?p:o._baseDelta,p*=P.timeScale,P.timestamp+=p,P.lastDelta=p;var A={timestamp:P.timestamp,delta:p};n.trigger(g,"beforeUpdate",A);var O=a.allBodies(T),F=a.allConstraints(T);for(T.isModified&&(l.setBodies(E,O),a.setModified(T,!1,!1,!0)),g.enableSleeping&&m.update(O,p),u._bodiesApplyGravity(O,g.gravity),p>0&&u._bodiesUpdate(O,p),n.trigger(g,"beforeSolve",A),c.preSolveAll(O),R=0;R<g.constraintIterations;R++)c.solveAll(F,p);c.postSolveAll(O),E.pairs=g.pairs;var b=l.collisions(E);h.update(M,b,w),g.enableSleeping&&m.afterCollisions(M.list),M.collisionStart.length>0&&n.trigger(g,"collisionStart",{pairs:M.collisionStart,timestamp:P.timestamp,delta:p});var D=o.clamp(20/g.positionIterations,0,1);for(d.preSolvePosition(M.list),R=0;R<g.positionIterations;R++)d.solvePosition(M.list,p,D);for(d.postSolvePosition(O),c.preSolveAll(O),R=0;R<g.constraintIterations;R++)c.solveAll(F,p);for(c.postSolveAll(O),d.preSolveVelocity(M.list),R=0;R<g.velocityIterations;R++)d.solveVelocity(M.list,p);return u._bodiesUpdateVelocities(O),M.collisionActive.length>0&&n.trigger(g,"collisionActive",{pairs:M.collisionActive,timestamp:P.timestamp,delta:p}),M.collisionEnd.length>0&&n.trigger(g,"collisionEnd",{pairs:M.collisionEnd,timestamp:P.timestamp,delta:p}),u._bodiesClearForces(O),n.trigger(g,"afterUpdate",A),g.timing.lastElapsed=o.now()-x,g},u.merge=function(g,p){if(o.extend(g,p),p.world){g.world=p.world,u.clear(g);for(var x=a.allBodies(g.world),T=0;T<x.length;T++){var E=x[T];m.set(E,!1),E.id=o.nextId()}}},u.clear=function(g){h.clear(g.pairs),l.clear(g.detector)},u._bodiesClearForces=function(g){for(var p=g.length,x=0;x<p;x++){var T=g[x];T.force.x=0,T.force.y=0,T.torque=0}},u._bodiesApplyGravity=function(g,p){var x=typeof p.scale<"u"?p.scale:.001,T=g.length;if(!(p.x===0&&p.y===0||x===0))for(var E=0;E<T;E++){var M=g[E];M.isStatic||M.isSleeping||(M.force.y+=M.mass*p.y*x,M.force.x+=M.mass*p.x*x)}},u._bodiesUpdate=function(g,p){for(var x=g.length,T=0;T<x;T++){var E=g[T];E.isStatic||E.isSleeping||v.update(E,p)}},u._bodiesUpdateVelocities=function(g){for(var p=g.length,x=0;x<p;x++)v.updateVelocities(g[x])}})()}),39073:((r,y,e)=>{var u={};r.exports=u;var m=e(68758);(function(){u.on=function(d,l,h){for(var n=l.split(" "),a,c=0;c<n.length;c++)a=n[c],d.events=d.events||{},d.events[a]=d.events[a]||[],d.events[a].push(h);return h},u.off=function(d,l,h){if(!l){d.events={};return}typeof l=="function"&&(h=l,l=m.keys(d.events).join(" "));for(var n=l.split(" "),a=0;a<n.length;a++){var c=d.events[n[a]],o=[];if(h&&c)for(var v=0;v<c.length;v++)c[v]!==h&&o.push(c[v]);d.events[n[a]]=o}},u.trigger=function(d,l,h){var n,a,c,o,v=d.events;if(v&&m.keys(v).length>0){h||(h={}),n=l.split(" ");for(var g=0;g<n.length;g++)if(a=n[g],c=v[a],c){o=m.clone(h,!1),o.name=a,o.source=d;for(var p=0;p<c.length;p++)c[p].apply(d,[o])}}}})()}),16929:((r,y,e)=>{var u={};r.exports=u;var m=e(84474),d=e(68758);(function(){u.name="matter-js",u.version="0.19.0",u.uses=[],u.used=[],u.use=function(){m.use(u,Array.prototype.slice.call(arguments))},u.before=function(l,h){return l=l.replace(/^Matter./,""),d.chainPathBefore(u,l,h)},u.after=function(l,h){return l=l.replace(/^Matter./,""),d.chainPathAfter(u,l,h)}})()}),84474:((r,y,e)=>{var u={};r.exports=u;var m=e(68758);(function(){u._registry={},u.register=function(d){if(u.isPlugin(d)||m.warn("Plugin.register:",u.toString(d),"does not implement all required fields."),d.name in u._registry){var l=u._registry[d.name],h=u.versionParse(d.version).number,n=u.versionParse(l.version).number;h>n?(m.warn("Plugin.register:",u.toString(l),"was upgraded to",u.toString(d)),u._registry[d.name]=d):h<n?m.warn("Plugin.register:",u.toString(l),"can not be downgraded to",u.toString(d)):d!==l&&m.warn("Plugin.register:",u.toString(d),"is already registered to different plugin object")}else u._registry[d.name]=d;return d},u.resolve=function(d){return u._registry[u.dependencyParse(d).name]},u.toString=function(d){return typeof d=="string"?d:(d.name||"anonymous")+"@"+(d.version||d.range||"0.0.0")},u.isPlugin=function(d){return d&&d.name&&d.version&&d.install},u.isUsed=function(d,l){return d.used.indexOf(l)>-1},u.isFor=function(d,l){var h=d.for&&u.dependencyParse(d.for);return!d.for||l.name===h.name&&u.versionSatisfies(l.version,h.range)},u.use=function(d,l){if(d.uses=(d.uses||[]).concat(l||[]),d.uses.length===0){m.warn("Plugin.use:",u.toString(d),"does not specify any dependencies to install.");return}for(var h=u.dependencies(d),n=m.topologicalSort(h),a=[],c=0;c<n.length;c+=1)if(n[c]!==d.name){var o=u.resolve(n[c]);if(!o){a.push("❌ "+n[c]);continue}u.isUsed(d,o.name)||(u.isFor(o,d)||(m.warn("Plugin.use:",u.toString(o),"is for",o.for,"but installed on",u.toString(d)+"."),o._warned=!0),o.install?o.install(d):(m.warn("Plugin.use:",u.toString(o),"does not specify an install function."),o._warned=!0),o._warned?(a.push("🔶 "+u.toString(o)),delete o._warned):a.push("✅ "+u.toString(o)),d.used.push(o.name))}a.length>0&&!o.silent&&m.info(a.join("  "))},u.dependencies=function(d,l){var h=u.dependencyParse(d),n=h.name;if(l=l||{},!(n in l)){d=u.resolve(d)||d,l[n]=m.map(d.uses||[],function(c){u.isPlugin(c)&&u.register(c);var o=u.dependencyParse(c),v=u.resolve(c);return v&&!u.versionSatisfies(v.version,o.range)?(m.warn("Plugin.dependencies:",u.toString(v),"does not satisfy",u.toString(o),"used by",u.toString(h)+"."),v._warned=!0,d._warned=!0):v||(m.warn("Plugin.dependencies:",u.toString(c),"used by",u.toString(h),"could not be resolved."),d._warned=!0),o.name});for(var a=0;a<l[n].length;a+=1)u.dependencies(l[n][a],l);return l}},u.dependencyParse=function(d){if(m.isString(d)){var l=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return l.test(d)||m.warn("Plugin.dependencyParse:",d,"is not a valid dependency string."),{name:d.split("@")[0],range:d.split("@")[1]||"*"}}return{name:d.name,range:d.range||d.version}},u.versionParse=function(d){var l=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;l.test(d)||m.warn("Plugin.versionParse:",d,"is not a valid version or range.");var h=l.exec(d),n=Number(h[4]),a=Number(h[5]),c=Number(h[6]);return{isRange:!!(h[1]||h[2]),version:h[3],range:d,operator:h[1]||h[2]||"",major:n,minor:a,patch:c,parts:[n,a,c],prerelease:h[7],number:n*1e8+a*1e4+c}},u.versionSatisfies=function(d,l){l=l||"*";var h=u.versionParse(l),n=u.versionParse(d);if(h.isRange){if(h.operator==="*"||d==="*")return!0;if(h.operator===">")return n.number>h.number;if(h.operator===">=")return n.number>=h.number;if(h.operator==="~")return n.major===h.major&&n.minor===h.minor&&n.patch>=h.patch;if(h.operator==="^")return h.major>0?n.major===h.major&&n.number>=h.number:h.minor>0?n.minor===h.minor&&n.patch>=h.patch:n.patch===h.patch}return d===l||d==="*"}})()}),22806:((r,y,e)=>{var u={};r.exports=u;var m=e(84125),d=e(39073),l=e(68758);(function(){u._motionWakeThreshold=.18,u._motionSleepThreshold=.08,u._minBias=.9,u.update=function(h,n){for(var a=n/l._baseDelta,c=u._motionSleepThreshold,o=0;o<h.length;o++){var v=h[o],g=m.getSpeed(v),p=m.getAngularSpeed(v),x=g*g+p*p;if(v.force.x!==0||v.force.y!==0){u.set(v,!1);continue}var T=Math.min(v.motion,x),E=Math.max(v.motion,x);v.motion=u._minBias*T+(1-u._minBias)*E,v.sleepThreshold>0&&v.motion<c?(v.sleepCounter+=1,v.sleepCounter>=v.sleepThreshold/a&&u.set(v,!0)):v.sleepCounter>0&&(v.sleepCounter-=1)}},u.afterCollisions=function(h){for(var n=u._motionSleepThreshold,a=0;a<h.length;a++){var c=h[a];if(c.isActive){var o=c.collision,v=o.bodyA.parent,g=o.bodyB.parent;if(!(v.isSleeping&&g.isSleeping||v.isStatic||g.isStatic)&&(v.isSleeping||g.isSleeping)){var p=v.isSleeping&&!v.isStatic?v:g,x=p===v?g:v;!p.isStatic&&x.motion>n&&u.set(p,!1)}}}},u.set=function(h,n){var a=h.isSleeping;n?(h.isSleeping=!0,h.sleepCounter=h.sleepThreshold,h.positionImpulse.x=0,h.positionImpulse.y=0,h.positionPrev.x=h.position.x,h.positionPrev.y=h.position.y,h.anglePrev=h.angle,h.speed=0,h.angularSpeed=0,h.motion=0,a||d.trigger(h,"sleepStart")):(h.isSleeping=!1,h.sleepCounter=0,a&&d.trigger(h,"sleepEnd"))}})()}),68516:((r,y,e)=>{var u={};r.exports=u;var m=e(39745),d=e(68758),l=e(84125),h=e(84091),n=e(10438);(function(){u.rectangle=function(a,c,o,v,g){g=g||{};var p={label:"Rectangle Body",position:{x:a,y:c},vertices:m.fromPath("L 0 0 L "+o+" 0 L "+o+" "+v+" L 0 "+v)};if(g.chamfer){var x=g.chamfer;p.vertices=m.chamfer(p.vertices,x.radius,x.quality,x.qualityMin,x.qualityMax),delete g.chamfer}return l.create(d.extend({},p,g))},u.trapezoid=function(a,c,o,v,g,p){p=p||{},g*=.5;var x=(1-g*2)*o,T=o*g,E=T+x,M=E+T,P;g<.5?P="L 0 0 L "+T+" "+-v+" L "+E+" "+-v+" L "+M+" 0":P="L 0 0 L "+E+" "+-v+" L "+M+" 0";var w={label:"Trapezoid Body",position:{x:a,y:c},vertices:m.fromPath(P)};if(p.chamfer){var R=p.chamfer;w.vertices=m.chamfer(w.vertices,R.radius,R.quality,R.qualityMin,R.qualityMax),delete p.chamfer}return l.create(d.extend({},w,p))},u.circle=function(a,c,o,v,g){v=v||{};var p={label:"Circle Body",circleRadius:o};g=g||25;var x=Math.ceil(Math.max(10,Math.min(g,o)));return x%2===1&&(x+=1),u.polygon(a,c,x,o,d.extend({},p,v))},u.polygon=function(a,c,o,v,g){if(g=g||{},o<3)return u.circle(a,c,v,g);for(var p=2*Math.PI/o,x="",T=p*.5,E=0;E<o;E+=1){var M=T+E*p,P=Math.cos(M)*v,w=Math.sin(M)*v;x+="L "+P.toFixed(3)+" "+w.toFixed(3)+" "}var R={label:"Polygon Body",position:{x:a,y:c},vertices:m.fromPath(x)};if(g.chamfer){var A=g.chamfer;R.vertices=m.chamfer(R.vertices,A.radius,A.quality,A.qualityMin,A.qualityMax),delete g.chamfer}return l.create(d.extend({},R,g))},u.fromVertices=function(a,c,o,v,g,p,x,T){var E=d.getDecomp(),M,P,w,R,A,O,F,b,D,I,B;for(M=!!(E&&E.quickDecomp),v=v||{},w=[],g=typeof g<"u"?g:!1,p=typeof p<"u"?p:.01,x=typeof x<"u"?x:10,T=typeof T<"u"?T:.01,d.isArray(o[0])||(o=[o]),I=0;I<o.length;I+=1)if(O=o[I],R=m.isConvex(O),A=!R,A&&!M&&d.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),R||!M)R?O=m.clockwiseSort(O):O=m.hull(O),w.push({position:{x:a,y:c},vertices:O});else{var z=O.map(function($){return[$.x,$.y]});E.makeCCW(z),p!==!1&&E.removeCollinearPoints(z,p),T!==!1&&E.removeDuplicatePoints&&E.removeDuplicatePoints(z,T);var Y=E.quickDecomp(z);for(F=0;F<Y.length;F++){var X=Y[F],H=X.map(function($){return{x:$[0],y:$[1]}});x>0&&m.area(H)<x||w.push({position:m.centre(H),vertices:H})}}for(F=0;F<w.length;F++)w[F]=l.create(d.extend(w[F],v));if(g){var N=5;for(F=0;F<w.length;F++){var U=w[F];for(b=F+1;b<w.length;b++){var L=w[b];if(h.overlaps(U.bounds,L.bounds)){var G=U.vertices,V=L.vertices;for(D=0;D<U.vertices.length;D++)for(B=0;B<L.vertices.length;B++){var k=n.magnitudeSquared(n.sub(G[(D+1)%G.length],V[B])),W=n.magnitudeSquared(n.sub(G[D],V[(B+1)%V.length]));k<N&&W<N&&(G[D].isInternal=!0,V[B].isInternal=!0)}}}}}return w.length>1?(P=l.create(d.extend({parts:w.slice(0)},v)),l.setPosition(P,{x:a,y:c}),P):w[0]},u.flagCoincidentParts=function(a,c){c===void 0&&(c=5);for(var o=0;o<a.length;o++)for(var v=a[o],g=o+1;g<a.length;g++){var p=a[g];if(h.overlaps(v.bounds,p.bounds))for(var x=v.vertices,T=p.vertices,E=0;E<v.vertices.length;E++)for(var M=0;M<p.vertices.length;M++){var P=n.magnitudeSquared(n.sub(x[(E+1)%x.length],T[M])),w=n.magnitudeSquared(n.sub(x[E],T[(M+1)%T.length]));P<c&&w<c&&(x[E].isInternal=!0,T[M].isInternal=!0)}}return a}})()}),56643:((r,y,e)=>{var u={};r.exports=u;var m=e(11299),d=e(52838),l=e(68758),h=e(84125),n=e(68516);(function(){u.stack=function(a,c,o,v,g,p,x){for(var T=m.create({label:"Stack"}),E=a,M=c,P,w=0,R=0;R<v;R++){for(var A=0,O=0;O<o;O++){var F=x(E,M,O,R,P,w);if(F){var b=F.bounds.max.y-F.bounds.min.y,D=F.bounds.max.x-F.bounds.min.x;b>A&&(A=b),h.translate(F,{x:D*.5,y:b*.5}),E=F.bounds.max.x+g,m.addBody(T,F),P=F,w+=1}else E+=g}M+=A+p,E=a}return T},u.chain=function(a,c,o,v,g,p){for(var x=a.bodies,T=1;T<x.length;T++){var E=x[T-1],M=x[T],P=E.bounds.max.y-E.bounds.min.y,w=E.bounds.max.x-E.bounds.min.x,R=M.bounds.max.y-M.bounds.min.y,A=M.bounds.max.x-M.bounds.min.x,O={bodyA:E,pointA:{x:w*c,y:P*o},bodyB:M,pointB:{x:A*v,y:R*g}},F=l.extend(O,p);m.addConstraint(a,d.create(F))}return a.label+=" Chain",a},u.mesh=function(a,c,o,v,g){var p=a.bodies,x,T,E,M,P;for(x=0;x<o;x++){for(T=1;T<c;T++)E=p[T-1+x*c],M=p[T+x*c],m.addConstraint(a,d.create(l.extend({bodyA:E,bodyB:M},g)));if(x>0)for(T=0;T<c;T++)E=p[T+(x-1)*c],M=p[T+x*c],m.addConstraint(a,d.create(l.extend({bodyA:E,bodyB:M},g))),v&&T>0&&(P=p[T-1+(x-1)*c],m.addConstraint(a,d.create(l.extend({bodyA:P,bodyB:M},g)))),v&&T<c-1&&(P=p[T+1+(x-1)*c],m.addConstraint(a,d.create(l.extend({bodyA:P,bodyB:M},g))))}return a.label+=" Mesh",a},u.pyramid=function(a,c,o,v,g,p,x){return u.stack(a,c,o,v,g,p,function(T,E,M,P,w,R){var A=Math.min(v,Math.ceil(o/2)),O=w?w.bounds.max.x-w.bounds.min.x:0;if(!(P>A)){P=A-P;var F=P,b=o-1-P;if(!(M<F||M>b)){R===1&&h.translate(w,{x:(M+(o%2===1?1:-1))*O,y:0});var D=w?M*O:0;return x(a+D+M*g,E,M,P,w,R)}}})},u.newtonsCradle=function(a,c,o,v,g){for(var p=m.create({label:"Newtons Cradle"}),x=0;x<o;x++){var T=1.9,E=n.circle(a+x*(v*T),c+g,v,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),M=d.create({pointA:{x:a+x*(v*T),y:c},bodyB:E});m.addBody(p,E),m.addConstraint(p,M)}return p},u.car=function(a,c,o,v,g){var p=h.nextGroup(!0),x=20,T=-o*.5+x,E=o*.5-x,M=0,P=m.create({label:"Car"}),w=n.rectangle(a,c,o,v,{collisionFilter:{group:p},chamfer:{radius:v*.5},density:2e-4}),R=n.circle(a+T,c+M,g,{collisionFilter:{group:p},friction:.8}),A=n.circle(a+E,c+M,g,{collisionFilter:{group:p},friction:.8}),O=d.create({bodyB:w,pointB:{x:T,y:M},bodyA:R,stiffness:1,length:0}),F=d.create({bodyB:w,pointB:{x:E,y:M},bodyA:A,stiffness:1,length:0});return m.addBody(P,w),m.addBody(P,R),m.addBody(P,A),m.addConstraint(P,O),m.addConstraint(P,F),P},u.softBody=function(a,c,o,v,g,p,x,T,E,M){E=l.extend({inertia:1/0},E),M=l.extend({stiffness:.2,render:{type:"line",anchors:!1}},M);var P=u.stack(a,c,o,v,g,p,function(w,R){return n.circle(w,R,T,E)});return u.mesh(P,o,v,x,M),P.label="Soft Body",P}})()}),50658:((r,y,e)=>{var u={};r.exports=u;var m=e(10438),d=e(68758);(function(){u.fromVertices=function(l){for(var h={},n=0;n<l.length;n++){var a=(n+1)%l.length,c=m.normalise({x:l[a].y-l[n].y,y:l[n].x-l[a].x}),o=c.y===0?1/0:c.x/c.y;o=o.toFixed(3).toString(),h[o]=c}return d.values(h)},u.rotate=function(l,h){if(h!==0)for(var n=Math.cos(h),a=Math.sin(h),c=0;c<l.length;c++){var o=l[c],v;v=o.x*n-o.y*a,o.y=o.x*a+o.y*n,o.x=v}}})()}),84091:(r=>{var y={};r.exports=y,(function(){y.create=function(e){var u={min:{x:0,y:0},max:{x:0,y:0}};return e&&y.update(u,e),u},y.update=function(e,u,m){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var d=0;d<u.length;d++){var l=u[d];l.x>e.max.x&&(e.max.x=l.x),l.x<e.min.x&&(e.min.x=l.x),l.y>e.max.y&&(e.max.y=l.y),l.y<e.min.y&&(e.min.y=l.y)}m&&(m.x>0?e.max.x+=m.x:e.min.x+=m.x,m.y>0?e.max.y+=m.y:e.min.y+=m.y)},y.contains=function(e,u){return u.x>=e.min.x&&u.x<=e.max.x&&u.y>=e.min.y&&u.y<=e.max.y},y.overlaps=function(e,u){return e.min.x<=u.max.x&&e.max.x>=u.min.x&&e.max.y>=u.min.y&&e.min.y<=u.max.y},y.translate=function(e,u){e.min.x+=u.x,e.max.x+=u.x,e.min.y+=u.y,e.max.y+=u.y},y.shift=function(e,u){var m=e.max.x-e.min.x,d=e.max.y-e.min.y;e.min.x=u.x,e.max.x=u.x+m,e.min.y=u.y,e.max.y=u.y+d}})()}),92765:((r,y,e)=>{var u={};r.exports=u,e(84091);var m=e(68758);(function(){u.pathToVertices=function(d,l){typeof window<"u"&&!("SVGPathSeg"in window)&&m.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var h,n,a,c,o,v,g,p,x,T,E=[],M,P,w=0,R=0,A=0;l=l||15;var O=function(b,D,I){var B=I%2===1&&I>1;if(!x||b!=x.x||D!=x.y){x&&B?(M=x.x,P=x.y):(M=0,P=0);var z={x:M+b,y:P+D};(B||!x)&&(x=z),E.push(z),R=M+b,A=P+D}},F=function(b){var D=b.pathSegTypeAsLetter.toUpperCase();if(D!=="Z"){switch(D){case"M":case"L":case"T":case"C":case"S":case"Q":R=b.x,A=b.y;break;case"H":R=b.x;break;case"V":A=b.y;break}O(R,A,b.pathSegType)}};for(u._svgPathToAbsolute(d),a=d.getTotalLength(),v=[],h=0;h<d.pathSegList.numberOfItems;h+=1)v.push(d.pathSegList.getItem(h));for(g=v.concat();w<a;){if(T=d.getPathSegAtLength(w),o=v[T],o!=p){for(;g.length&&g[0]!=o;)F(g.shift());p=o}switch(o.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":c=d.getPointAtLength(w),O(c.x,c.y,0);break}w+=l}for(h=0,n=g.length;h<n;++h)F(g[h]);return E},u._svgPathToAbsolute=function(d){for(var l,h,n,a,c,o,v=d.pathSegList,g=0,p=0,x=v.numberOfItems,T=0;T<x;++T){var E=v.getItem(T),M=E.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(M))"x"in E&&(g=E.x),"y"in E&&(p=E.y);else switch("x1"in E&&(n=g+E.x1),"x2"in E&&(c=g+E.x2),"y1"in E&&(a=p+E.y1),"y2"in E&&(o=p+E.y2),"x"in E&&(g+=E.x),"y"in E&&(p+=E.y),M){case"m":v.replaceItem(d.createSVGPathSegMovetoAbs(g,p),T);break;case"l":v.replaceItem(d.createSVGPathSegLinetoAbs(g,p),T);break;case"h":v.replaceItem(d.createSVGPathSegLinetoHorizontalAbs(g),T);break;case"v":v.replaceItem(d.createSVGPathSegLinetoVerticalAbs(p),T);break;case"c":v.replaceItem(d.createSVGPathSegCurvetoCubicAbs(g,p,n,a,c,o),T);break;case"s":v.replaceItem(d.createSVGPathSegCurvetoCubicSmoothAbs(g,p,c,o),T);break;case"q":v.replaceItem(d.createSVGPathSegCurvetoQuadraticAbs(g,p,n,a),T);break;case"t":v.replaceItem(d.createSVGPathSegCurvetoQuadraticSmoothAbs(g,p),T);break;case"a":v.replaceItem(d.createSVGPathSegArcAbs(g,p,E.r1,E.r2,E.angle,E.largeArcFlag,E.sweepFlag),T);break;case"z":case"Z":g=l,p=h;break}(M=="M"||M=="m")&&(l=g,h=p)}}})()}),10438:(r=>{var y={};r.exports=y,(function(){y.create=function(e,u){return{x:e||0,y:u||0}},y.clone=function(e){return{x:e.x,y:e.y}},y.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},y.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},y.rotate=function(e,u,m){var d=Math.cos(u),l=Math.sin(u);m||(m={});var h=e.x*d-e.y*l;return m.y=e.x*l+e.y*d,m.x=h,m},y.rotateAbout=function(e,u,m,d){var l=Math.cos(u),h=Math.sin(u);d||(d={});var n=m.x+((e.x-m.x)*l-(e.y-m.y)*h);return d.y=m.y+((e.x-m.x)*h+(e.y-m.y)*l),d.x=n,d},y.normalise=function(e){var u=y.magnitude(e);return u===0?{x:0,y:0}:{x:e.x/u,y:e.y/u}},y.dot=function(e,u){return e.x*u.x+e.y*u.y},y.cross=function(e,u){return e.x*u.y-e.y*u.x},y.cross3=function(e,u,m){return(u.x-e.x)*(m.y-e.y)-(u.y-e.y)*(m.x-e.x)},y.add=function(e,u,m){return m||(m={}),m.x=e.x+u.x,m.y=e.y+u.y,m},y.sub=function(e,u,m){return m||(m={}),m.x=e.x-u.x,m.y=e.y-u.y,m},y.mult=function(e,u){return{x:e.x*u,y:e.y*u}},y.div=function(e,u){return{x:e.x/u,y:e.y/u}},y.perp=function(e,u){return u=u===!0?-1:1,{x:u*-e.y,y:u*e.x}},y.neg=function(e){return{x:-e.x,y:-e.y}},y.angle=function(e,u){return Math.atan2(u.y-e.y,u.x-e.x)},y._temp=[y.create(),y.create(),y.create(),y.create(),y.create(),y.create()]})()}),39745:((r,y,e)=>{var u={};r.exports=u;var m=e(10438),d=e(68758);(function(){u.create=function(l,h){for(var n=[],a=0;a<l.length;a++){var c=l[a],o={x:c.x,y:c.y,index:a,body:h,isInternal:!1};n.push(o)}return n},u.fromPath=function(l,h){var n=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,a=[];return l.replace(n,function(c,o,v){a.push({x:parseFloat(o),y:parseFloat(v)})}),u.create(a,h)},u.centre=function(l){for(var h=u.area(l,!0),n={x:0,y:0},a,c,o,v=0;v<l.length;v++)o=(v+1)%l.length,a=m.cross(l[v],l[o]),c=m.mult(m.add(l[v],l[o]),a),n=m.add(n,c);return m.div(n,6*h)},u.mean=function(l){for(var h={x:0,y:0},n=0;n<l.length;n++)h.x+=l[n].x,h.y+=l[n].y;return m.div(h,l.length)},u.area=function(l,h){for(var n=0,a=l.length-1,c=0;c<l.length;c++)n+=(l[a].x-l[c].x)*(l[a].y+l[c].y),a=c;return h?n/2:Math.abs(n)/2},u.inertia=function(l,h){for(var n=0,a=0,c=l,o,v,g=0;g<c.length;g++)v=(g+1)%c.length,o=Math.abs(m.cross(c[v],c[g])),n+=o*(m.dot(c[v],c[v])+m.dot(c[v],c[g])+m.dot(c[g],c[g])),a+=o;return h/6*(n/a)},u.translate=function(l,h,n){n=typeof n<"u"?n:1;var a=l.length,c=h.x*n,o=h.y*n,v;for(v=0;v<a;v++)l[v].x+=c,l[v].y+=o;return l},u.rotate=function(l,h,n){if(h!==0){var a=Math.cos(h),c=Math.sin(h),o=n.x,v=n.y,g=l.length,p,x,T,E;for(E=0;E<g;E++)p=l[E],x=p.x-o,T=p.y-v,p.x=o+(x*a-T*c),p.y=v+(x*c+T*a);return l}},u.contains=function(l,h){for(var n=h.x,a=h.y,c=l.length,o=l[c-1],v,g=0;g<c;g++){if(v=l[g],(n-o.x)*(v.y-o.y)+(a-o.y)*(o.x-v.x)>0)return!1;o=v}return!0},u.scale=function(l,h,n,a){if(h===1&&n===1)return l;a=a||u.centre(l);for(var c,o,v=0;v<l.length;v++)c=l[v],o=m.sub(c,a),l[v].x=a.x+o.x*h,l[v].y=a.y+o.y*n;return l},u.chamfer=function(l,h,n,a,c){typeof h=="number"?h=[h]:h=h||[8],n=typeof n<"u"?n:-1,a=a||2,c=c||14;for(var o=[],v=0;v<l.length;v++){var g=l[v-1>=0?v-1:l.length-1],p=l[v],x=l[(v+1)%l.length],T=h[v<h.length?v:h.length-1];if(T===0){o.push(p);continue}var E=m.normalise({x:p.y-g.y,y:g.x-p.x}),M=m.normalise({x:x.y-p.y,y:p.x-x.x}),P=Math.sqrt(2*Math.pow(T,2)),w=m.mult(d.clone(E),T),R=m.normalise(m.mult(m.add(E,M),.5)),A=m.sub(p,m.mult(R,P)),O=n;n===-1&&(O=Math.pow(T,.32)*1.75),O=d.clamp(O,a,c),O%2===1&&(O+=1);for(var F=Math.acos(m.dot(E,M)),b=F/O,D=0;D<O;D++)o.push(m.add(m.rotate(w,b*D),A))}return o},u.clockwiseSort=function(l){var h=u.mean(l);return l.sort(function(n,a){return m.angle(h,n)-m.angle(h,a)}),l},u.isConvex=function(l){var h=0,n=l.length,a,c,o,v;if(n<3)return null;for(a=0;a<n;a++)if(c=(a+1)%n,o=(a+2)%n,v=(l[c].x-l[a].x)*(l[o].y-l[c].y),v-=(l[c].y-l[a].y)*(l[o].x-l[c].x),v<0?h|=1:v>0&&(h|=2),h===3)return!1;return h!==0?!0:null},u.hull=function(l){var h=[],n=[],a,c;for(l=l.slice(0),l.sort(function(o,v){var g=o.x-v.x;return g!==0?g:o.y-v.y}),c=0;c<l.length;c+=1){for(a=l[c];n.length>=2&&m.cross3(n[n.length-2],n[n.length-1],a)<=0;)n.pop();n.push(a)}for(c=l.length-1;c>=0;c-=1){for(a=l[c];h.length>=2&&m.cross3(h[h.length-2],h[h.length-1],a)<=0;)h.pop();h.push(a)}return h.pop(),n.pop(),h.concat(n)}})()}),1675:((r,y,e)=>{var u=e(18171),m={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.19.0",silent:!0,install:function(d){d.after("Body.create",function(){m.Body.init(this)}),d.before("Engine.update",function(l){m.Engine.update(l)})},Body:{init:function(d){d.plugin.attractors=d.plugin.attractors||[]}},Engine:{update:function(d){for(var l=u.Composite.allBodies(d.world),h=0;h<l.length;h++){var n=l[h],a=n.plugin.attractors;if(a&&a.length>0)for(var c=0;c<l.length;c++){var o=l[c];if(h!==c)for(var v=0;v<a.length;v++){var g=a[v],p=g;u.Common.isFunction(g)&&(p=g(n,o)),p&&u.Body.applyForce(o,o.position,p)}}}}},Attractors:{gravityConstant:.001,gravity:function(d,l){var h=u.Vector.sub(l.position,d.position),n=u.Vector.magnitudeSquared(h)||1e-4,a=u.Vector.normalise(h),c=-m.Attractors.gravityConstant*(d.mass*l.mass/n),o=u.Vector.mult(a,c);u.Body.applyForce(d,d.position,u.Vector.neg(o)),u.Body.applyForce(l,l.position,o)}}};r.exports=m}),80391:(r=>{/**
 * @author       @dxu https://github.com/dxu/matter-collision-events
 * @author       Richard Davey <rich@photonstorm.com>
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.19.0",silent:!0,install:function(e){e.after("Engine.create",function(){e.Events.on(this,"collisionStart",function(u){u.pairs.map(function(m){var d=m.bodyA,l=m.bodyB;d.gameObject&&d.gameObject.emit("collide",d,l,m),l.gameObject&&l.gameObject.emit("collide",l,d,m),e.Events.trigger(d,"onCollide",{pair:m}),e.Events.trigger(l,"onCollide",{pair:m}),d.onCollideCallback&&d.onCollideCallback(m),l.onCollideCallback&&l.onCollideCallback(m),d.onCollideWith[l.id]&&d.onCollideWith[l.id](l,m),l.onCollideWith[d.id]&&l.onCollideWith[d.id](d,m)})}),e.Events.on(this,"collisionActive",function(u){u.pairs.map(function(m){var d=m.bodyA,l=m.bodyB;d.gameObject&&d.gameObject.emit("collideActive",d,l,m),l.gameObject&&l.gameObject.emit("collideActive",l,d,m),e.Events.trigger(d,"onCollideActive",{pair:m}),e.Events.trigger(l,"onCollideActive",{pair:m}),d.onCollideActiveCallback&&d.onCollideActiveCallback(m),l.onCollideActiveCallback&&l.onCollideActiveCallback(m)})}),e.Events.on(this,"collisionEnd",function(u){u.pairs.map(function(m){var d=m.bodyA,l=m.bodyB;d.gameObject&&d.gameObject.emit("collideEnd",d,l,m),l.gameObject&&l.gameObject.emit("collideEnd",l,d,m),e.Events.trigger(d,"onCollideEnd",{pair:m}),e.Events.trigger(l,"onCollideEnd",{pair:m}),d.onCollideEndCallback&&d.onCollideEndCallback(m),l.onCollideEndCallback&&l.onCollideEndCallback(m)})})})}};r.exports=y}),44097:((r,y,e)=>{var u=e(18171),m={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.19.0",silent:!0,install:function(d){d.after("Engine.update",function(){m.Engine.update(this)})},Engine:{update:function(d){for(var l=d.world,h=u.Composite.allBodies(l),n=u.Composite.allComposites(l),a=0;a<h.length;a+=1){var c=h[a];c.plugin.wrap&&m.Body.wrap(c,c.plugin.wrap)}for(a=0;a<n.length;a+=1){var o=n[a];o.plugin.wrap&&m.Composite.wrap(o,o.plugin.wrap)}}},Bounds:{wrap:function(d,l){var h=null,n=null;if(typeof l.min.x<"u"&&typeof l.max.x<"u"&&(d.min.x>l.max.x?h=l.min.x-d.max.x:d.max.x<l.min.x&&(h=l.max.x-d.min.x)),typeof l.min.y<"u"&&typeof l.max.y<"u"&&(d.min.y>l.max.y?n=l.min.y-d.max.y:d.max.y<l.min.y&&(n=l.max.y-d.min.y)),h!==null||n!==null)return{x:h||0,y:n||0}}},Body:{wrap:function(d,l){var h=m.Bounds.wrap(d.bounds,l);return h&&u.Body.translate(d,h),h}},Composite:{bounds:function(d){for(var l=u.Composite.allBodies(d),h=[],n=0;n<l.length;n+=1){var a=l[n];h.push(a.bounds.min,a.bounds.max)}return u.Bounds.create(h)},wrap:function(d,l){var h=m.Bounds.wrap(m.Composite.bounds(d),l);return h&&u.Composite.translate(d,h),h}}};r.exports=m}),81084:(r=>{/**
 * @author       Stefan Hedman <schteppe@gmail.com> (http://steffe.se)
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={decomp:F,quickDecomp:B,isSimple:D,removeCollinearPoints:z,removeDuplicatePoints:Y,makeCCW:x};function y(N,U,L){L=L||0;var G=[0,0],V,k,W,$,K,j,Z;return V=N[1][1]-N[0][1],k=N[0][0]-N[1][0],W=V*N[0][0]+k*N[0][1],$=U[1][1]-U[0][1],K=U[0][0]-U[1][0],j=$*U[0][0]+K*U[0][1],Z=V*K-$*k,X(Z,0,L)||(G[0]=(K*W-k*j)/Z,G[1]=(V*j-$*W)/Z),G}function e(N,U,L,G){var V=U[0]-N[0],k=U[1]-N[1],W=G[0]-L[0],$=G[1]-L[1];if(W*k-$*V===0)return!1;var K=(V*(L[1]-N[1])+k*(N[0]-L[0]))/(W*k-$*V),j=(W*(N[1]-L[1])+$*(L[0]-N[0]))/($*V-W*k);return K>=0&&K<=1&&j>=0&&j<=1}function u(N,U,L){return(U[0]-N[0])*(L[1]-N[1])-(L[0]-N[0])*(U[1]-N[1])}function m(N,U,L){return u(N,U,L)>0}function d(N,U,L){return u(N,U,L)>=0}function l(N,U,L){return u(N,U,L)<0}function h(N,U,L){return u(N,U,L)<=0}var n=[],a=[];function c(N,U,L,G){if(G){var V=n,k=a;V[0]=U[0]-N[0],V[1]=U[1]-N[1],k[0]=L[0]-U[0],k[1]=L[1]-U[1];var W=V[0]*k[0]+V[1]*k[1],$=Math.sqrt(V[0]*V[0]+V[1]*V[1]),K=Math.sqrt(k[0]*k[0]+k[1]*k[1]),j=Math.acos(W/($*K));return j<G}else return u(N,U,L)===0}function o(N,U){var L=U[0]-N[0],G=U[1]-N[1];return L*L+G*G}function v(N,U){var L=N.length;return N[U<0?U%L+L:U%L]}function g(N){N.length=0}function p(N,U,L,G){for(var V=L;V<G;V++)N.push(U[V])}function x(N){for(var U=0,L=N,G=1;G<N.length;++G)(L[G][1]<L[U][1]||L[G][1]===L[U][1]&&L[G][0]>L[U][0])&&(U=G);return m(v(N,U-1),v(N,U),v(N,U+1))?!1:(T(N),!0)}function T(N){for(var U=[],L=N.length,G=0;G!==L;G++)U.push(N.pop());for(var G=0;G!==L;G++)N[G]=U[G]}function E(N,U){return l(v(N,U-1),v(N,U),v(N,U+1))}var M=[],P=[];function w(N,U,L){var G,V,k=M,W=P;if(d(v(N,U+1),v(N,U),v(N,L))&&h(v(N,U-1),v(N,U),v(N,L)))return!1;V=o(v(N,U),v(N,L));for(var $=0;$!==N.length;++$)if(!(($+1)%N.length===U||$===U)&&d(v(N,U),v(N,L),v(N,$+1))&&h(v(N,U),v(N,L),v(N,$))&&(k[0]=v(N,U),k[1]=v(N,L),W[0]=v(N,$),W[1]=v(N,$+1),G=y(k,W),o(v(N,U),G)<V))return!1;return!0}function R(N,U,L){for(var G=0;G!==N.length;++G)if(!(G===U||G===L||(G+1)%N.length===U||(G+1)%N.length===L)&&e(v(N,U),v(N,L),v(N,G),v(N,G+1)))return!1;return!0}function A(N,U,L,G){var V=G||[];if(g(V),U<L)for(var k=U;k<=L;k++)V.push(N[k]);else{for(var k=0;k<=L;k++)V.push(N[k]);for(var k=U;k<N.length;k++)V.push(N[k])}return V}function O(N){for(var U=[],L=[],G=[],V=[],k=Number.MAX_VALUE,W=0;W<N.length;++W)if(E(N,W)){for(var $=0;$<N.length;++$)if(w(N,W,$)){L=O(A(N,W,$,V)),G=O(A(N,$,W,V));for(var K=0;K<G.length;K++)L.push(G[K]);L.length<k&&(U=L,k=L.length,U.push([v(N,W),v(N,$)]))}}return U}function F(N){var U=O(N);return U.length>0?b(N,U):[N]}function b(N,U){if(U.length===0)return[N];if(U instanceof Array&&U.length&&U[0]instanceof Array&&U[0].length===2&&U[0][0]instanceof Array){for(var L=[N],G=0;G<U.length;G++)for(var V=U[G],k=0;k<L.length;k++){var W=L[k],$=b(W,V);if($){L.splice(k,1),L.push($[0],$[1]);break}}return L}else{var V=U,G=N.indexOf(V[0]),k=N.indexOf(V[1]);return G!==-1&&k!==-1?[A(N,G,k),A(N,k,G)]:!1}}function D(N){var U=N,L;for(L=0;L<U.length-1;L++)for(var G=0;G<L-1;G++)if(e(U[L],U[L+1],U[G],U[G+1]))return!1;for(L=1;L<U.length-2;L++)if(e(U[0],U[U.length-1],U[L],U[L+1]))return!1;return!0}function I(N,U,L,G,V){V=V||0;var k=U[1]-N[1],W=N[0]-U[0],$=k*N[0]+W*N[1],K=G[1]-L[1],j=L[0]-G[0],Z=K*L[0]+j*L[1],J=k*j-K*W;return X(J,0,V)?[0,0]:[(j*$-W*Z)/J,(k*Z-K*$)/J]}function B(N,U,L,G,V,k,W){k=k||100,W=W||0,V=V||25,U=typeof U<"u"?U:[],L=L||[],G=G||[];var $=[0,0],K=[0,0],j=[0,0],Z=0,J=0,Q=0,_=0,q=0,et=0,rt=0,ot=[],ht=[],tt=N,at=N;if(at.length<3)return U;if(W++,W>k)return console.warn("quickDecomp: max level ("+k+") reached."),U;for(var nt=0;nt<N.length;++nt)if(E(tt,nt)){L.push(tt[nt]),Z=J=Number.MAX_VALUE;for(var pt=0;pt<N.length;++pt)m(v(tt,nt-1),v(tt,nt),v(tt,pt))&&h(v(tt,nt-1),v(tt,nt),v(tt,pt-1))&&(j=I(v(tt,nt-1),v(tt,nt),v(tt,pt),v(tt,pt-1)),l(v(tt,nt+1),v(tt,nt),j)&&(Q=o(tt[nt],j),Q<J&&(J=Q,K=j,et=pt))),m(v(tt,nt+1),v(tt,nt),v(tt,pt+1))&&h(v(tt,nt+1),v(tt,nt),v(tt,pt))&&(j=I(v(tt,nt+1),v(tt,nt),v(tt,pt),v(tt,pt+1)),m(v(tt,nt-1),v(tt,nt),j)&&(Q=o(tt[nt],j),Q<Z&&(Z=Q,$=j,q=pt)));if(et===(q+1)%N.length)j[0]=(K[0]+$[0])/2,j[1]=(K[1]+$[1])/2,G.push(j),nt<q?(p(ot,tt,nt,q+1),ot.push(j),ht.push(j),et!==0&&p(ht,tt,et,tt.length),p(ht,tt,0,nt+1)):(nt!==0&&p(ot,tt,nt,tt.length),p(ot,tt,0,q+1),ot.push(j),ht.push(j),p(ht,tt,et,nt+1));else{if(et>q&&(q+=N.length),_=Number.MAX_VALUE,q<et)return U;for(var pt=et;pt<=q;++pt)d(v(tt,nt-1),v(tt,nt),v(tt,pt))&&h(v(tt,nt+1),v(tt,nt),v(tt,pt))&&(Q=o(v(tt,nt),v(tt,pt)),Q<_&&R(tt,nt,pt)&&(_=Q,rt=pt%N.length));nt<rt?(p(ot,tt,nt,rt+1),rt!==0&&p(ht,tt,rt,at.length),p(ht,tt,0,nt+1)):(nt!==0&&p(ot,tt,nt,at.length),p(ot,tt,0,rt+1),p(ht,tt,rt,nt+1))}return ot.length<ht.length?(B(ot,U,L,G,V,k,W),B(ht,U,L,G,V,k,W)):(B(ht,U,L,G,V,k,W),B(ot,U,L,G,V,k,W)),U}return U.push(N),U}function z(N,U){for(var L=0,G=N.length-1;N.length>3&&G>=0;--G)c(v(N,G-1),v(N,G),v(N,G+1),U)&&(N.splice(G%N.length,1),L++);return L}function Y(N,U){for(var L=N.length-1;L>=1;--L)for(var G=N[L],V=L-1;V>=0;--V)if(H(G,N[V],U)){N.splice(L,1);continue}}function X(N,U,L){return L=L||0,Math.abs(N-U)<=L}function H(N,U,L){return X(N[0],U[0],L)&&X(N[1],U[1],L)}}),88257:((r,y,e)=>{/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2013-2023 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var u=e(56694),m=new u({initialize:function(l){this.pluginManager=l,this.game=l.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});r.exports=m}),18360:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};r.exports=y}),91963:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={},e={},u={};u.register=function(m,d,l,h){h===void 0&&(h=!1),y[m]={plugin:d,mapping:l,custom:h}},u.registerCustom=function(m,d,l,h){e[m]={plugin:d,mapping:l,data:h}},u.hasCore=function(m){return y.hasOwnProperty(m)},u.hasCustom=function(m){return e.hasOwnProperty(m)},u.getCore=function(m){return y[m]},u.getCustom=function(m){return e[m]},u.getCustomClass=function(m){return e.hasOwnProperty(m)?e[m].plugin:null},u.remove=function(m){y.hasOwnProperty(m)&&delete y[m]},u.removeCustom=function(m){e.hasOwnProperty(m)&&delete e[m]},u.destroyCorePlugins=function(){for(var m in y)y.hasOwnProperty(m)&&delete y[m]},u.destroyCustomPlugins=function(){for(var m in e)e.hasOwnProperty(m)&&delete e[m]},r.exports=u}),49274:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(97081),d=e(6659),l=e(76846),h=e(99325),n=e(61286),a=e(72632),c=e(91963),o=e(66458),v=new u({Extends:d,initialize:function(p){d.call(this),this.game=p,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],p.isBooted?this.boot():p.events.once(m.BOOT,this.boot,this)},boot:function(){var g,p,x,T,E,M,P,w=this.game.config,R=w.installGlobalPlugins;for(R=R.concat(this._pendingGlobal),g=0;g<R.length;g++)p=R[g],x=a(p,"key",null),T=a(p,"plugin",null),E=a(p,"start",!1),M=a(p,"mapping",null),P=a(p,"data",null),x&&(T?this.install(x,T,E,M,P):console.warn("Missing `plugin` for key: "+x));for(R=w.installScenePlugins,R=R.concat(this._pendingScene),g=0;g<R.length;g++)p=R[g],x=a(p,"key",null),T=a(p,"plugin",null),M=a(p,"mapping",null),x&&(T?this.installScenePlugin(x,T,M):console.warn("Missing `plugin` for key: "+x));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(m.DESTROY,this.destroy,this)},addToScene:function(g,p,x){var T,E,M,P=this.game,w=g.scene,R=g.settings.map,A=g.settings.isBooted;for(T=0;T<p.length;T++)E=p[T],P[E]?(g[E]=P[E],R.hasOwnProperty(E)&&(w[R[E]]=g[E])):E==="game"&&R.hasOwnProperty(E)&&(w[R[E]]=P);for(var O=0;O<x.length;O++)for(M=x[O],T=0;T<M.length;T++)if(E=M[T],!!c.hasCore(E)){var F=c.getCore(E),b=F.mapping,D=new F.plugin(w,this,b);g[b]=D,F.custom?w[b]=D:R.hasOwnProperty(b)&&(w[R[b]]=D),A&&D.boot()}for(M=this.plugins,T=0;T<M.length;T++){var I=M[T];I.mapping&&(w[I.mapping]=I.plugin)}},getDefaultScenePlugins:function(){var g=this.game.config.defaultPlugins;return g=g.concat(this.scenePlugins),g},installScenePlugin:function(g,p,x,T,E){if(E===void 0&&(E=!1),typeof p!="function"){console.warn("Invalid Scene Plugin: "+g);return}if(c.hasCore(g)||c.register(g,p,x,!0),this.scenePlugins.indexOf(g)===-1)this.scenePlugins.push(g);else if(!E&&c.hasCore(g)){console.warn("Scene Plugin key in use: "+g);return}if(T){var M=new p(T,this,g);T.sys[g]=M,x&&x!==""&&(T[x]=M),M.boot()}},install:function(g,p,x,T,E){if(x===void 0&&(x=!1),T===void 0&&(T=null),E===void 0&&(E=null),typeof p!="function")return console.warn("Invalid Plugin: "+g),null;if(c.hasCustom(g))return console.warn("Plugin key in use: "+g),null;if(T!==null&&(x=!0),!this.game.isBooted)this._pendingGlobal.push({key:g,plugin:p,start:x,mapping:T,data:E});else if(c.registerCustom(g,p,T,E),x)return this.start(g);return null},getIndex:function(g){for(var p=this.plugins,x=0;x<p.length;x++){var T=p[x];if(T.key===g)return x}return-1},getEntry:function(g){var p=this.getIndex(g);if(p!==-1)return this.plugins[p]},isActive:function(g){var p=this.getEntry(g);return p&&p.active},start:function(g,p){p===void 0&&(p=g);var x=this.getEntry(p);return x&&!x.active?(x.active=!0,x.plugin.start()):x||(x=this.createEntry(g,p)),x?x.plugin:null},createEntry:function(g,p){var x=c.getCustom(g);if(x){var T=new x.plugin(this);x={key:p,plugin:T,active:!0,mapping:x.mapping,data:x.data},this.plugins.push(x),T.init(x.data),T.start()}return x},stop:function(g){var p=this.getEntry(g);return p&&p.active&&(p.active=!1,p.plugin.stop()),this},get:function(g,p){p===void 0&&(p=!0);var x=this.getEntry(g);if(x)return x.plugin;var T=this.getClass(g);return T&&p?(x=this.createEntry(g,g),x?x.plugin:null):T||null},getClass:function(g){return c.getCustomClass(g)},removeGlobalPlugin:function(g){var p=this.getEntry(g);p&&o(this.plugins,p),c.removeCustom(g)},removeScenePlugin:function(g){o(this.scenePlugins,g),c.remove(g)},registerGameObject:function(g,p,x){return p&&n.register(g,p),x&&h.register(g,x),this},removeGameObject:function(g,p,x){return p===void 0&&(p=!0),x===void 0&&(x=!0),p&&n.remove(g),x&&h.remove(g),this},registerFileType:function(g,p,x){l.register(g,p),x&&x.sys.load&&(x.sys.load[g]=p)},destroy:function(){for(var g=0;g<this.plugins.length;g++)this.plugins[g].plugin.destroy();c.destroyCustomPlugins(),this.game.noReturn&&c.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});r.exports=v}),39283:((r,y,e)=>{/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2013-2023 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var u=e(88257),m=e(56694),d=e(7599),l=new m({Extends:u,initialize:function(n,a,c){u.call(this,a),this.scene=n,this.systems=n.sys,this.pluginKey=c,n.sys.events.once(d.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});r.exports=l}),45615:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={BasePlugin:e(88257),DefaultPlugins:e(18360),PluginCache:e(91963),PluginManager:e(49274),ScenePlugin:e(39283)}}),75205:(()=>{!("requestVideoFrameCallback"in HTMLVideoElement.prototype)&&"getVideoPlaybackQuality"in HTMLVideoElement.prototype&&(HTMLVideoElement.prototype._rvfcpolyfillmap={},HTMLVideoElement.prototype.requestVideoFrameCallback=function(r){const y=performance.now(),e=this.getVideoPlaybackQuality(),u=this.mozPresentedFrames||this.mozPaintedFrames||e.totalVideoFrames-e.droppedVideoFrames,m=(d,l)=>{const h=this.getVideoPlaybackQuality(),n=this.mozPresentedFrames||this.mozPaintedFrames||h.totalVideoFrames-h.droppedVideoFrames;if(n>u){const a=this.mozFrameDelay||h.totalFrameDelay-e.totalFrameDelay||0,c=l-d;r(l,{presentationTime:l+a*1e3,expectedDisplayTime:l+c,width:this.videoWidth,height:this.videoHeight,mediaTime:Math.max(0,this.currentTime||0)+c/1e3,presentedFrames:n,processingDuration:a}),delete this._rvfcpolyfillmap[y]}else this._rvfcpolyfillmap[y]=requestAnimationFrame(a=>m(l,a))};return this._rvfcpolyfillmap[y]=requestAnimationFrame(d=>m(y,d)),y},HTMLVideoElement.prototype.cancelVideoFrameCallback=function(r){cancelAnimationFrame(this._rvfcpolyfillmap[r]),delete this._rvfcpolyfillmap[r]})}),95723:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}}),27394:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={DEFAULT:0,LINEAR:0,NEAREST:1};r.exports=y}),91135:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(89787),m=e(61840),d=e(56694),l=e(86459),h=e(6659),n=e(81044),a=e(32834),c=e(40444),o=e(38203),v=e(69360),g=new d({Extends:h,initialize:function(x){h.call(this);var T=x.config;this.config={clearBeforeRender:T.clearBeforeRender,backgroundColor:T.backgroundColor,antialias:T.antialias,roundPixels:T.roundPixels},this.game=x,this.type=l.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=x.canvas;var E={alpha:x.config.transparent,desynchronized:x.config.desynchronized,willReadFrequently:!1};this.gameContext=T.context?T.context:this.gameCanvas.getContext("2d",E),this.currentContext=this.gameContext,this.antialias=x.config.antialias,this.blendModes=a(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new v,this._tempMatrix2=new v,this._tempMatrix3=new v,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(o.READY,this.boot,this)},boot:function(){var p=this.game,x=p.scale.baseSize;this.width=x.width,this.height=x.height,this.isBooted=!0,p.scale.on(c.RESIZE,this.onResize,this),this.resize(x.width,x.height)},onResize:function(p,x){(x.width!==this.width||x.height!==this.height)&&this.resize(x.width,x.height)},resize:function(p,x){this.width=p,this.height=x,this.emit(n.RESIZE,p,x)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(p){return this.currentContext.globalCompositeOperation=p,this},setContext:function(p){return this.currentContext=p||this.gameContext,this},setAlpha:function(p){return this.currentContext.globalAlpha=p,this},preRender:function(){var p=this.gameContext,x=this.config,T=this.width,E=this.height;p.globalAlpha=1,p.globalCompositeOperation="source-over",p.setTransform(1,0,0,1,0,0),x.clearBeforeRender&&(p.clearRect(0,0,T,E),x.transparent||(p.fillStyle=x.backgroundColor.rgba,p.fillRect(0,0,T,E))),p.save(),this.drawCount=0,this.emit(n.PRE_RENDER)},render:function(p,x,T){var E=x.length;this.emit(n.RENDER,p,T);var M=T.x,P=T.y,w=T.width,R=T.height,A=T.renderToTexture?T.context:p.sys.context;A.save(),this.game.scene.customViewports&&(A.beginPath(),A.rect(M,P,w,R),A.clip()),T.emit(u.PRE_RENDER,T),this.currentContext=A;var O=T.mask;O&&O.preRenderCanvas(this,null,T._maskCamera),T.transparent||(A.fillStyle=T.backgroundColor.rgba,A.fillRect(M,P,w,R)),A.globalAlpha=T.alpha,A.globalCompositeOperation="source-over",this.drawCount+=E,T.renderToTexture&&T.emit(u.PRE_RENDER,T),T.matrix.copyToContext(A);for(var F=0;F<E;F++){var b=x[F];b.mask&&b.mask.preRenderCanvas(this,b,T),b.renderCanvas(this,b,T),b.mask&&b.mask.postRenderCanvas(this,b,T)}A.setTransform(1,0,0,1,0,0),A.globalCompositeOperation="source-over",A.globalAlpha=1,T.flashEffect.postRenderCanvas(A),T.fadeEffect.postRenderCanvas(A),T.dirty=!1,O&&O.postRenderCanvas(this),A.restore(),T.renderToTexture&&(T.emit(u.POST_RENDER,T),T.renderToGame&&p.sys.context.drawImage(T.canvas,M,P)),T.emit(u.POST_RENDER,T)},postRender:function(){var p=this.gameContext;p.restore(),this.emit(n.POST_RENDER);var x=this.snapshotState;x.callback&&(m(this.gameCanvas,x),x.callback=null)},snapshotCanvas:function(p,x,T,E,M,P,w,R,A){T===void 0&&(T=!1),this.snapshotArea(E,M,P,w,x,R,A);var O=this.snapshotState;return O.getPixel=T,m(p,O),O.callback=null,this},snapshot:function(p,x,T){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,p,x,T)},snapshotArea:function(p,x,T,E,M,P,w){var R=this.snapshotState;return R.callback=M,R.type=P,R.encoder=w,R.getPixel=!1,R.x=p,R.y=x,R.width=Math.min(T,this.gameCanvas.width),R.height=Math.min(E,this.gameCanvas.height),this},snapshotPixel:function(p,x,T){return this.snapshotArea(p,x,1,1,T),this.snapshotState.getPixel=!0,this},batchSprite:function(p,x,T,E){var M=T.alpha*p.alpha;if(M!==0){var P=this.currentContext,w=this._tempMatrix1,R=this._tempMatrix2,A=x.canvasData,O=A.x,F=A.y,b=x.cutWidth,D=x.cutHeight,I=x.customPivot,B=x.source.resolution,z=p.displayOriginX,Y=p.displayOriginY,X=-z+x.x,H=-Y+x.y;if(p.isCropped){var N=p._crop;(N.flipX!==p.flipX||N.flipY!==p.flipY)&&x.updateCropUVs(N,p.flipX,p.flipY),b=N.cw,D=N.ch,O=N.cx,F=N.cy,X=-z+N.x,H=-Y+N.y,p.flipX&&(X>=0?X=-(X+b):X<0&&(X=Math.abs(X)-b)),p.flipY&&(H>=0?H=-(H+D):H<0&&(H=Math.abs(H)-D))}var U=1,L=1;p.flipX&&(I||(X+=-x.realWidth+z*2),U=-1),p.flipY&&(I||(H+=-x.realHeight+Y*2),L=-1);var G=p.x,V=p.y;T.roundPixels&&(G=Math.floor(G),V=Math.floor(V)),R.applyITRS(G,V,p.rotation,p.scaleX*U,p.scaleY*L),w.copyFrom(T.matrix),E?(w.multiplyWithOffset(E,-T.scrollX*p.scrollFactorX,-T.scrollY*p.scrollFactorY),R.e=G,R.f=V):(R.e-=T.scrollX*p.scrollFactorX,R.f-=T.scrollY*p.scrollFactorY),w.multiply(R),T.roundPixels&&(w.e=Math.round(w.e),w.f=Math.round(w.f)),P.save(),w.setToContext(P),P.globalCompositeOperation=this.blendModes[p.blendMode],P.globalAlpha=M,P.imageSmoothingEnabled=!x.source.scaleMode,p.mask&&p.mask.preRenderCanvas(this,p,T),b>0&&D>0&&P.drawImage(x.source.image,O,F,b,D,X,H,b/B,D/B),p.mask&&p.mask.postRenderCanvas(this,p,T),P.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});r.exports=g}),6046:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={CanvasRenderer:e(91135),GetBlendModes:e(32834),SetTransform:e(49584)}}),32834:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(95723),m=e(98581),d=function(){var l=[],h=m.supportNewBlendModes,n="source-over";return l[u.NORMAL]=n,l[u.ADD]="lighter",l[u.MULTIPLY]=h?"multiply":n,l[u.SCREEN]=h?"screen":n,l[u.OVERLAY]=h?"overlay":n,l[u.DARKEN]=h?"darken":n,l[u.LIGHTEN]=h?"lighten":n,l[u.COLOR_DODGE]=h?"color-dodge":n,l[u.COLOR_BURN]=h?"color-burn":n,l[u.HARD_LIGHT]=h?"hard-light":n,l[u.SOFT_LIGHT]=h?"soft-light":n,l[u.DIFFERENCE]=h?"difference":n,l[u.EXCLUSION]=h?"exclusion":n,l[u.HUE]=h?"hue":n,l[u.SATURATION]=h?"saturation":n,l[u.COLOR]=h?"color":n,l[u.LUMINOSITY]=h?"luminosity":n,l[u.ERASE]="destination-out",l[u.SOURCE_IN]="source-in",l[u.SOURCE_OUT]="source-out",l[u.SOURCE_ATOP]="source-atop",l[u.DESTINATION_OVER]="destination-over",l[u.DESTINATION_IN]="destination-in",l[u.DESTINATION_OUT]="destination-out",l[u.DESTINATION_ATOP]="destination-atop",l[u.LIGHTER]="lighter",l[u.COPY]="copy",l[u.XOR]="xor",l};r.exports=d}),49584:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(73329),m=function(d,l,h,n,a){var c=n.alpha*h.alpha;if(c<=0)return!1;var o=u(h,n,a).calc;return l.globalCompositeOperation=d.blendModes[h.blendMode],l.globalAlpha=c,l.save(),o.setToContext(l),l.imageSmoothingEnabled=h.frame?!h.frame.source.scaleMode:d.antialias,!0};r.exports=m}),70936:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="postrender"}),99298:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="prerender"}),7743:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="render"}),99519:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="resize"}),81044:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={POST_RENDER:e(70936),PRE_RENDER:e(99298),RENDER:e(7743),RESIZE:e(99519)}}),42069:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Canvas:e(6046),Events:e(81044),Snapshot:e(95528),WebGL:e(55478)}}),61840:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61068),m=e(27119),d=e(72632),l=function(h,n){var a=d(n,"callback"),c=d(n,"type","image/png"),o=d(n,"encoder",.92),v=Math.abs(Math.round(d(n,"x",0))),g=Math.abs(Math.round(d(n,"y",0))),p=Math.floor(d(n,"width",h.width)),x=Math.floor(d(n,"height",h.height)),T=d(n,"getPixel",!1);if(T){var E=h.getContext("2d",{willReadFrequently:!1}),M=E.getImageData(v,g,1,1),P=M.data;a.call(null,new m(P[0],P[1],P[2],P[3]))}else if(v!==0||g!==0||p!==h.width||x!==h.height){var w=u.createWebGL(this,p,x),R=w.getContext("2d",{willReadFrequently:!0});p>0&&x>0&&R.drawImage(h,v,g,p,x,0,0,p,x);var A=new Image;A.onerror=function(){a.call(null),u.remove(w)},A.onload=function(){a.call(null,A),u.remove(w)},A.src=w.toDataURL(c,o)}else{var O=new Image;O.onerror=function(){a.call(null)},O.onload=function(){a.call(null,O)},O.src=h.toDataURL(c,o)}};r.exports=l}),1217:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61068),m=e(27119),d=e(72632),l=function(h,n){var a=h,c=d(n,"callback"),o=d(n,"type","image/png"),v=d(n,"encoder",.92),g=Math.abs(Math.round(d(n,"x",0))),p=Math.abs(Math.round(d(n,"y",0))),x=d(n,"getPixel",!1),T=d(n,"isFramebuffer",!1),E=T?d(n,"bufferWidth",1):a.drawingBufferWidth,M=T?d(n,"bufferHeight",1):a.drawingBufferHeight;if(x){var P=new Uint8Array(4),w=T?p:M-p;a.readPixels(g,w,1,1,a.RGBA,a.UNSIGNED_BYTE,P),c.call(null,new m(P[0],P[1],P[2],P[3]))}else{var R=Math.floor(d(n,"width",E)),A=Math.floor(d(n,"height",M)),O=R*A*4,F=new Uint8Array(O);a.readPixels(g,M-p-A,R,A,a.RGBA,a.UNSIGNED_BYTE,F);for(var b=u.createWebGL(this,R,A),D=b.getContext("2d",{willReadFrequently:!0}),I=D.getImageData(0,0,R,A),B=I.data,z=0;z<A;z++)for(var Y=0;Y<R;Y++){var X=((A-z-1)*R+Y)*4,H=T?O-(z*R+(R-Y))*4:(z*R+Y)*4;B[H+0]=F[X+0],B[H+1]=F[X+1],B[H+2]=F[X+2],B[H+3]=F[X+3]}D.putImageData(I,0,0);var N=new Image;N.onerror=function(){c.call(null),u.remove(b)},N.onload=function(){c.call(null,N),u.remove(b)},N.src=b.toDataURL(o,v)}};r.exports=l}),95528:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Canvas:e(61840),WebGL:e(1217)}}),35217:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(65641),d=e(33885),l=e(77290),h=e(72632),n=e(37410),a=e(82127),c=e(5583),o=e(58136),v=e(47406),g=e(81828),p=e(66901),x=e(71264),T=e(77310),E=e(10919),M=e(21213),P=e(51212),w=e(60848),R=new u({initialize:function(O){this.game=O.game,this.renderer=O,this.classes=new d([[m.UTILITY_PIPELINE,w],[m.MULTI_PIPELINE,T],[m.BITMAPMASK_PIPELINE,c],[m.SINGLE_PIPELINE,P],[m.ROPE_PIPELINE,M],[m.LIGHT_PIPELINE,p],[m.POINTLIGHT_PIPELINE,E],[m.MOBILE_PIPELINE,x],[m.FX_PIPELINE,g]]),this.postPipelineClasses=new d([[String(v.BARREL),o.Barrel],[String(v.BLOOM),o.Bloom],[String(v.BLUR),o.Blur],[String(v.BOKEH),o.Bokeh],[String(v.CIRCLE),o.Circle],[String(v.COLOR_MATRIX),o.ColorMatrix],[String(v.DISPLACEMENT),o.Displacement],[String(v.GLOW),o.Glow],[String(v.GRADIENT),o.Gradient],[String(v.PIXELATE),o.Pixelate],[String(v.SHADOW),o.Shadow],[String(v.SHINE),o.Shine],[String(v.VIGNETTE),o.Vignette],[String(v.WIPE),o.Wipe]]),this.pipelines=new d,this.default=null,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.MOBILE_PIPELINE=null,this.FX_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderTargets=[],this.maxDimension=0,this.frameInc=32,this.targetIndex=0},boot:function(A,O,F){var b=this.renderer,D=this.renderTargets;this.frameInc=Math.floor(h(A,"frameInc",32));for(var I=b.width,B=b.height,z=Math.min(I,B),Y=Math.ceil(z/this.frameInc),X=1;X<Y;X++){var H=X*this.frameInc;D.push(new n(b,H,H)),D.push(new n(b,H,H)),D.push(new n(b,H,H)),this.maxDimension=H}D.push(new n(b,I,B,1,0,!0,!0)),D.push(new n(b,I,B,1,0,!0,!0)),D.push(new n(b,I,B,1,0,!0,!0));var N,U,L=this,G=this.game;if(this.classes.each(function(k,W){N=L.add(k,new W({game:G})),k===m.UTILITY_PIPELINE&&(L.UTILITY_PIPELINE=N,L.fullFrame1=N.fullFrame1,L.fullFrame2=N.fullFrame2,L.halfFrame1=N.halfFrame1,L.halfFrame2=N.halfFrame2)}),this.MULTI_PIPELINE=this.get(m.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(m.BITMAPMASK_PIPELINE),this.MOBILE_PIPELINE=this.get(m.MOBILE_PIPELINE),this.FX_PIPELINE=this.get(m.FX_PIPELINE),A)for(U in A){var V=A[U];N=new V(G),N.name=U,N.isPostFX?this.postPipelineClasses.set(U,V):this.has(U)||(this.classes.set(U,V),this.add(U,N))}this.default=this.get(O),F&&!l.os.desktop&&(this.default=this.MOBILE_PIPELINE)},setDefaultPipeline:function(A){var O=this.get(A);return O&&(this.default=O),O},add:function(A,O){if(O.isPostFX){console.warn(A+" is a Post Pipeline. Use `addPostPipeline` instead");return}var F=this.pipelines,b=this.renderer;return F.has(A)?console.warn("Pipeline exists: "+A):(O.name=A,O.manager=this,F.set(A,O)),O.hasBooted||O.boot(),b.width!==0&&b.height!==0&&!O.isPreFX&&O.resize(b.width,b.height),O},addPostPipeline:function(A,O){this.postPipelineClasses.has(A)||this.postPipelineClasses.set(A,O)},flush:function(){this.current&&this.current.flush()},has:function(A){var O=this.pipelines;return typeof A=="string"?O.has(A):!!O.contains(A)},get:function(A){var O=this.pipelines;if(typeof A=="string")return O.get(A);if(O.contains(A))return A},getPostPipeline:function(A,O,F){var b=this.postPipelineClasses,D,I="",B=typeof A;if(B==="string"||B==="number"?(D=b.get(A),I=A):B==="function"?(b.contains(A)&&(D=A),I=A.name):B==="object"&&(D=b.get(A.name),I=A.name),D){var z=new D(this.game,F);return z.name=I,O&&(z.gameObject=O),z}},remove:function(A,O,F){O===void 0&&(O=!0),F===void 0&&(F=!0),this.pipelines.delete(A),O&&this.classes.delete(A),F&&this.postPipelineClasses.delete(A)},set:function(A,O,F){if(!A.isPostFX)return this.isCurrent(A,F)||(this.flush(),this.current&&this.current.unbind(),this.current=A,A.bind(F)),A.updateProjectionMatrix(),A.onBind(O),A},preBatch:function(A){if(A.hasPostPipeline){this.flush();for(var O=A.postPipelines,F=O.length-1;F>=0;F--){var b=O[F];b.active&&b.preBatch(A)}}},postBatch:function(A){if(A.hasPostPipeline){this.flush();for(var O=A.postPipelines,F=0;F<O.length;F++){var b=O[F];b.active&&b.postBatch(A)}}},preBatchCamera:function(A){if(A.hasPostPipeline){this.flush();for(var O=A.postPipelines,F=O.length-1;F>=0;F--){var b=O[F];b.active&&b.preBatch(A)}}},postBatchCamera:function(A){if(A.hasPostPipeline){this.flush();for(var O=A.postPipelines,F=0;F<O.length;F++){var b=O[F];b.active&&b.postBatch(A)}}},isCurrent:function(A,O){var F=this.renderer,b=this.current;return b&&!O&&(O=b.currentShader),!(b!==A||O.program!==F.currentProgram)},copyFrame:function(A,O,F,b,D){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(A,O,F,b,D),this},copyToGame:function(A){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(A),this},drawFrame:function(A,O,F,b){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(A,O,F,b),this},blendFrames:function(A,O,F,b,D){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(A,O,F,b,D),this},blendFramesAdditive:function(A,O,F,b,D){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(A,O,F,b,D),this},clearFrame:function(A,O){return this.UTILITY_PIPELINE.clearFrame(A,O),this},blitFrame:function(A,O,F,b,D,I){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(A,O,F,b,D,I),this},copyFrameRect:function(A,O,F,b,D,I,B,z){return this.UTILITY_PIPELINE.copyFrameRect(A,O,F,b,D,I,B,z),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(A){return this.UTILITY_PIPELINE.bind(A)},setFX:function(){return this.set(this.FX_PIPELINE)},rebind:function(A){A===void 0&&this.previous&&(A=this.previous);var O=this.renderer,F=O.gl;F.disable(F.DEPTH_TEST),F.disable(F.CULL_FACE),O.hasActiveStencilMask()?F.clear(F.DEPTH_BUFFER_BIT):(F.disable(F.STENCIL_TEST),F.clear(F.DEPTH_BUFFER_BIT|F.STENCIL_BUFFER_BIT)),F.viewport(0,0,O.width,O.height),O.currentProgram=null,O.setBlendMode(0,!0);var b=O.vaoExtension;b&&b.bindVertexArrayOES(null);var D=this.pipelines.entries;for(var I in D)D[I].glReset=!0;A&&(this.current=A,A.rebind())},clear:function(){var A=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,A.currentProgram=null,A.setBlendMode(0,!0);var O=A.vaoExtension;O&&O.bindVertexArrayOES(null)},getRenderTarget:function(A){var O=this.renderTargets,F=3;if(A>this.maxDimension)return this.targetIndex=O.length-F,O[this.targetIndex];var b=(a(A,this.frameInc,0,!0)-1)*F;return this.targetIndex=b,O[b]},getSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+1]},getAltSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+2]},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.default=null,this.current=null,this.previous=null}});r.exports=R}),37410:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(81044),d=new u({initialize:function(h,n,a,c,o,v,g,p,x){c===void 0&&(c=1),o===void 0&&(o=0),v===void 0&&(v=!0),g===void 0&&(g=!1),p===void 0&&(p=!0),x===void 0&&(x=!0),this.renderer=h,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=c,this.minFilter=o,this.autoClear=v,this.autoResize=!0,this.hasDepthBuffer=p,this.forceClamp=x,this.resize(n,a),g?this.setAutoResize(!0):this.autoResize=!1},setAutoResize:function(l){return l&&!this.autoResize?(this.renderer.on(m.RESIZE,this.resize,this),this.autoResize=!0):!l&&this.autoResize&&(this.renderer.off(m.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(l,h){var n=l*this.scale,a=h*this.scale;if(this.autoResize&&(n!==this.width||a!==this.height)){var c=this.renderer;c.deleteFramebuffer(this.framebuffer),c.deleteTexture(this.texture),l*=this.scale,h*=this.scale,l=Math.round(l),h=Math.round(h),l<=0&&(l=1),h<=0&&(h=1),this.texture=c.createTextureFromSource(null,l,h,this.minFilter,this.forceClamp),this.framebuffer=c.createFramebuffer(l,h,this.texture,this.hasDepthBuffer),this.width=l,this.height=h}return this},bind:function(l,h,n){l===void 0&&(l=!1);var a=this.renderer;if(l&&a.flush(),h&&n&&this.resize(h,n),a.pushFramebuffer(this.framebuffer,!1,!1),l&&this.adjustViewport(),this.autoClear){var c=this.renderer.gl;c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT)}a.clearStencilMask()},adjustViewport:function(){var l=this.renderer.gl;l.viewport(0,0,this.width,this.height),l.disable(l.SCISSOR_TEST)},clear:function(){var l=this.renderer,h=l.gl;l.pushFramebuffer(this.framebuffer),h.disable(h.SCISSOR_TEST),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT),l.popFramebuffer(),l.resetScissor()},unbind:function(l){l===void 0&&(l=!1);var h=this.renderer;return l&&h.flush(),h.popFramebuffer()},destroy:function(){var l=this.renderer;l.deleteFramebuffer(this.framebuffer),l.deleteTexture(this.texture),l.off(m.RESIZE,this.resize,this),this.renderer=null,this.framebuffer=null,this.texture=null}});r.exports=d}),75512:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @author       Matthew Groves <@doormat>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={getTintFromFloats:function(y,e,u,m){var d=(y*255|0)&255,l=(e*255|0)&255,h=(u*255|0)&255,n=(m*255|0)&255;return(n<<24|d<<16|l<<8|h)>>>0},getTintAppendFloatAlpha:function(y,e){var u=(e*255|0)&255;return(u<<24|y)>>>0},getTintAppendFloatAlphaAndSwap:function(y,e){var u=(y>>16|0)&255,m=(y>>8|0)&255,d=(y|0)&255,l=(e*255|0)&255;return(l<<24|d<<16|m<<8|u)>>>0},getFloatsFromUintRGB:function(y){var e=(y>>16|0)&255,u=(y>>8|0)&255,m=(y|0)&255;return[e/255,u/255,m/255]},checkShaderMax:function(y,e){var u=Math.min(16,y.getParameter(y.MAX_TEXTURE_IMAGE_UNITS));return!e||e===-1?u:Math.min(u,e)},parseFragmentShaderMaxTextures:function(y,e){if(!y)return"";for(var u="",m=0;m<e;m++)m>0&&(u+=`
	else `),m<e-1&&(u+="if (outTexId < "+m+".5)"),u+=`
	{`,u+=`
		texture = texture2D(uMainSampler[`+m+"], outTexCoord);",u+=`
	}`;return y=y.replace(/%count%/gi,e.toString()),y.replace(/%forloop%/gi,u)},setGlowQuality:function(y,e,u,m){return u===void 0&&(u=e.config.glowFXQuality),m===void 0&&(m=e.config.glowFXDistance),y=y.replace(/__SIZE__/gi,(1/u/m).toFixed(7)),y=y.replace(/__DIST__/gi,m.toFixed(0)+".0"),y}}}),44775:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(28699),d=e(6659),l=e(18970),h=e(72632),n=e(16650),a=e(81044),c=e(37410),o=e(75512),v=e(71305),g=new u({Extends:d,initialize:function(x){d.call(this);var T=x.game,E=T.renderer,M=E.gl;this.name=h(x,"name","WebGLPipeline"),this.game=T,this.renderer=E,this.manager,this.gl=M,this.view=T.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.activeBuffer,this.topology=h(x,"topology",M.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.forceZero=h(x,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.isPreFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=x,this.glReset=!1,this.batch=[],this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.activeTextures=[]},boot:function(){var p,x=this.gl,T=this.config,E=this.renderer;this.isPostFX||(this.projectionMatrix=new n().identity());var M=this.renderTargets,P=h(T,"renderTarget",!1);typeof P=="boolean"&&P&&(P=1);var w=E.width,R=E.height;if(typeof P=="number")for(p=0;p<P;p++)M.push(new c(E,w,R,1,0,!0));else if(Array.isArray(P))for(p=0;p<P.length;p++){var A=h(P[p],"scale",1),O=h(P[p],"minFilter",0),F=h(P[p],"autoClear",1),b=h(P[p],"width",null),D=h(P[p],"height",b);b?M.push(new c(E,b,D,1,O,F)):M.push(new c(E,w,R,A,O,F))}M.length&&(this.currentRenderTarget=M[0]),this.setShadersFromConfig(T);var I=this.shaders,B=0;for(p=0;p<I.length;p++)I[p].vertexSize>B&&(B=I[p].vertexSize);var z=h(T,"batchSize",E.config.batchSize);this.vertexCapacity=z*6;var Y=new ArrayBuffer(this.vertexCapacity*B);this.vertexData=Y,this.bytes=new Uint8Array(Y),this.vertexViewF32=new Float32Array(Y),this.vertexViewU32=new Uint32Array(Y);var X=h(T,"vertices",null);for(X?(this.vertexViewF32.set(X),this.vertexBuffer=E.createVertexBuffer(Y,x.STATIC_DRAW)):this.vertexBuffer=E.createVertexBuffer(Y.byteLength,x.DYNAMIC_DRAW),this.setVertexBuffer(),p=I.length-1;p>=0;p--)I[p].rebind();this.hasBooted=!0,E.on(a.RESIZE,this.resize,this),E.on(a.PRE_RENDER,this.onPreRender,this),E.on(a.RENDER,this.onRender,this),E.on(a.POST_RENDER,this.onPostRender,this),this.emit(l.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(p,x,T){var E=this.renderer;if(p!==this.currentShader||E.currentProgram!==this.currentShader.program){this.flush();var M=this.setVertexBuffer(T);M&&!x&&(x=!0),p.bind(x,!1),this.currentShader=p}return this},getShaderByName:function(p){for(var x=this.shaders,T=0;T<x.length;T++)if(x[T].name===p)return x[T]},setShadersFromConfig:function(p){var x,T=this.shaders,E=this.renderer;for(x=0;x<T.length;x++)T[x].destroy();var M="vertShader",P="fragShader",w="attributes",R=h(p,M,null),A=o.parseFragmentShaderMaxTextures(h(p,P,null),E.maxTextures),O=h(p,w,null),F=h(p,"shaders",[]),b=F.length;if(b===0)R&&A&&(this.shaders=[new v(this,"default",R,A,m(O))]);else{var D=[];for(x=0;x<b;x++){var I=F[x],B,z,Y,X;if(typeof I=="string"?(B="default",z=R,Y=o.parseFragmentShaderMaxTextures(I,E.maxTextures),X=O):(B=h(I,"name","default"),z=h(I,M,R),Y=o.parseFragmentShaderMaxTextures(h(I,P,A),E.maxTextures),X=h(I,w,O)),B==="default"){var H=Y.split(`
`),N=H[0].trim();N.indexOf("#define SHADER_NAME")>-1&&(B=N.substring(20))}z&&Y&&D.push(new v(this,B,z,Y,m(X)))}this.shaders=D}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},createBatch:function(p){return this.currentBatch={start:this.vertexCount,count:0,texture:[p],unit:0,maxUnit:0},this.currentUnit=0,this.currentTexture=p,this.batch.push(this.currentBatch),0},addTextureToBatch:function(p){var x=this.currentBatch;x&&(x.texture.push(p),x.unit++,x.maxUnit++)},pushBatch:function(p){if(!this.currentBatch||this.forceZero&&p!==this.currentTexture)return this.createBatch(p);if(p===this.currentTexture)return this.currentUnit;var x=this.currentBatch,T=x.texture.indexOf(p);return T===-1?x.texture.length===this.renderer.maxTextures?this.createBatch(p):(x.unit++,x.maxUnit++,x.texture.push(p),this.currentUnit=x.unit,this.currentTexture=p,x.unit):(this.currentUnit=T,this.currentTexture=p,T)},setGameObject:function(p,x){return x===void 0&&(x=p.frame),this.pushBatch(x.source.glTexture)},shouldFlush:function(p){return p===void 0&&(p=0),this.vertexCount+p>this.vertexCapacity},vertexAvailable:function(){return this.vertexCapacity-this.vertexCount},resize:function(p,x){(p!==this.width||x!==this.height)&&this.flush(),this.width=p,this.height=x;for(var T=this.renderTargets,E=0;E<T.length;E++)T[E].resize(p,x);return this.setProjectionMatrix(p,x),this.emit(l.RESIZE,p,x,this),this.onResize(p,x),this},setProjectionMatrix:function(p,x){var T=this.projectionMatrix;if(!T)return this;this.projectionWidth=p,this.projectionHeight=x,T.ortho(0,p,x,0,-1e3,1e3);for(var E=this.shaders,M="uProjectionMatrix",P=0;P<E.length;P++){var w=E[P];w.hasUniform(M)&&(w.resetUniform(M),w.setMatrix4fv(M,!1,T.val,w))}return this},flipProjectionMatrix:function(p){p===void 0&&(p=!0);var x=this.projectionMatrix;if(!x)return this;var T=this.projectionWidth,E=this.projectionHeight;p?x.ortho(0,T,0,E,-1e3,1e3):x.ortho(0,T,E,0,-1e3,1e3),this.setMatrix4fv("uProjectionMatrix",!1,x.val)},updateProjectionMatrix:function(){if(this.projectionMatrix){var p=this.renderer.projectionWidth,x=this.renderer.projectionHeight;(this.projectionWidth!==p||this.projectionHeight!==x)&&this.setProjectionMatrix(p,x)}},bind:function(p){if(p===void 0&&(p=this.currentShader),this.glReset)return this.rebind(p);var x=!1,T=this.gl;return T.getParameter(T.ARRAY_BUFFER_BINDING)!==this.vertexBuffer&&(T.bindBuffer(T.ARRAY_BUFFER,this.vertexBuffer),this.activeBuffer=this.vertexBuffer,x=!0),p.bind(x),this.currentShader=p,this.activeTextures.length=0,this.emit(l.BIND,this,p),this.onActive(p),this},rebind:function(p){this.activeBuffer=null,this.setVertexBuffer();for(var x=this.shaders,T=x.length-1;T>=0;T--){var E=x[T].rebind();(!p||E===p)&&(this.currentShader=E)}return this.activeTextures.length=0,this.emit(l.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},setVertexBuffer:function(p){if(p===void 0&&(p=this.vertexBuffer),p!==this.activeBuffer){var x=this.gl;return this.gl.bindBuffer(x.ARRAY_BUFFER,p),this.activeBuffer=p,!0}return!1},preBatch:function(p){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(p),this},postBatch:function(p){return this.onDraw(this.currentRenderTarget),this.onPostBatch(p),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(p){if(p===void 0&&(p=!1),this.vertexCount>0){this.emit(l.BEFORE_FLUSH,this,p),this.onBeforeFlush(p);var x=this.gl,T=this.vertexCount,E=this.currentShader.vertexSize,M=this.topology;if(this.active){this.setVertexBuffer(),T===this.vertexCapacity?x.bufferData(x.ARRAY_BUFFER,this.vertexData,x.DYNAMIC_DRAW):x.bufferSubData(x.ARRAY_BUFFER,0,this.bytes.subarray(0,T*E));var P,w,R,A=this.batch,O=this.activeTextures;if(this.forceZero)for(O[0]||x.activeTexture(x.TEXTURE0),P=0;P<A.length;P++)w=A[P],R=w.texture[0],O[0]!==R&&(x.bindTexture(x.TEXTURE_2D,R),O[0]=R),x.drawArrays(M,w.start,w.count);else for(P=0;P<A.length;P++){w=A[P];for(var F=0;F<=w.maxUnit;F++)R=w.texture[F],O[F]!==R&&(x.activeTexture(x.TEXTURE0+F),x.bindTexture(x.TEXTURE_2D,R),O[F]=R);x.drawArrays(M,w.start,w.count)}}this.vertexCount=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.emit(l.AFTER_FLUSH,this,p),this.onAfterFlush(p)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(p,x,T,E,M,P,w){var R=this.vertexViewF32,A=this.vertexViewU32,O=this.vertexCount*this.currentShader.vertexComponentCount-1;R[++O]=p,R[++O]=x,R[++O]=T,R[++O]=E,R[++O]=M,R[++O]=P,A[++O]=w,this.vertexCount++,this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchQuad:function(p,x,T,E,M,P,w,R,A,O,F,b,D,I,B,z,Y,X,H,N){N===void 0&&(N=this.currentUnit);var U=!1;this.shouldFlush(6)&&(this.flush(),U=!0),this.currentBatch||(N=this.setTexture2D(H));var L=this.vertexViewF32,G=this.vertexViewU32,V=this.vertexCount*this.currentShader.vertexComponentCount-1;return L[++V]=x,L[++V]=T,L[++V]=O,L[++V]=F,L[++V]=N,L[++V]=X,G[++V]=I,L[++V]=E,L[++V]=M,L[++V]=O,L[++V]=D,L[++V]=N,L[++V]=X,G[++V]=z,L[++V]=P,L[++V]=w,L[++V]=b,L[++V]=D,L[++V]=N,L[++V]=X,G[++V]=Y,L[++V]=x,L[++V]=T,L[++V]=O,L[++V]=F,L[++V]=N,L[++V]=X,G[++V]=I,L[++V]=P,L[++V]=w,L[++V]=b,L[++V]=D,L[++V]=N,L[++V]=X,G[++V]=Y,L[++V]=R,L[++V]=A,L[++V]=b,L[++V]=F,L[++V]=N,L[++V]=X,G[++V]=B,this.vertexCount+=6,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(p),U},batchTri:function(p,x,T,E,M,P,w,R,A,O,F,b,D,I,B,z,Y){Y===void 0&&(Y=this.currentUnit);var X=!1;this.shouldFlush(3)&&(this.flush(),X=!0),this.currentBatch||(Y=this.setTexture2D(z));var H=this.vertexViewF32,N=this.vertexViewU32,U=this.vertexCount*this.currentShader.vertexComponentCount-1;return H[++U]=x,H[++U]=T,H[++U]=R,H[++U]=A,H[++U]=Y,H[++U]=B,N[++U]=b,H[++U]=E,H[++U]=M,H[++U]=R,H[++U]=F,H[++U]=Y,H[++U]=B,N[++U]=D,H[++U]=P,H[++U]=w,H[++U]=O,H[++U]=F,H[++U]=Y,H[++U]=B,N[++U]=I,this.vertexCount+=3,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(p),X},drawFillRect:function(p,x,T,E,M,P,w,R){w===void 0&&(w=this.renderer.whiteTexture),R===void 0&&(R=!0),p=Math.floor(p),x=Math.floor(x);var A=Math.floor(p+T),O=Math.floor(x+E),F=this.setTexture2D(w),b=o.getTintAppendFloatAlphaAndSwap(M,P),D=0,I=0,B=1,z=1;R&&(I=1,z=0),this.batchQuad(null,p,x,p,O,A,O,A,x,D,I,B,z,b,b,b,b,0,w,F)},setTexture2D:function(p){return p===void 0&&(p=this.renderer.whiteTexture),this.pushBatch(p)},bindTexture:function(p,x){x===void 0&&(x=0);var T=this.gl;return T.activeTexture(T.TEXTURE0+x),T.bindTexture(T.TEXTURE_2D,p),this},bindRenderTarget:function(p,x){return this.bindTexture(p.texture,x)},setTime:function(p,x){return this.set1f(p,this.game.loop.getDuration(),x),this},setBoolean:function(p,x,T){return T===void 0&&(T=this.currentShader),T.setBoolean(p,x),this},set1f:function(p,x,T){return T===void 0&&(T=this.currentShader),T.set1f(p,x),this},set2f:function(p,x,T,E){return E===void 0&&(E=this.currentShader),E.set2f(p,x,T),this},set3f:function(p,x,T,E,M){return M===void 0&&(M=this.currentShader),M.set3f(p,x,T,E),this},set4f:function(p,x,T,E,M,P){return P===void 0&&(P=this.currentShader),P.set4f(p,x,T,E,M),this},set1fv:function(p,x,T){return T===void 0&&(T=this.currentShader),T.set1fv(p,x),this},set2fv:function(p,x,T){return T===void 0&&(T=this.currentShader),T.set2fv(p,x),this},set3fv:function(p,x,T){return T===void 0&&(T=this.currentShader),T.set3fv(p,x),this},set4fv:function(p,x,T){return T===void 0&&(T=this.currentShader),T.set4fv(p,x),this},set1iv:function(p,x,T){return T===void 0&&(T=this.currentShader),T.set1iv(p,x),this},set2iv:function(p,x,T){return T===void 0&&(T=this.currentShader),T.set2iv(p,x),this},set3iv:function(p,x,T){return T===void 0&&(T=this.currentShader),T.set3iv(p,x),this},set4iv:function(p,x,T){return T===void 0&&(T=this.currentShader),T.set4iv(p,x),this},set1i:function(p,x,T){return T===void 0&&(T=this.currentShader),T.set1i(p,x),this},set2i:function(p,x,T,E){return E===void 0&&(E=this.currentShader),E.set2i(p,x,T),this},set3i:function(p,x,T,E,M){return M===void 0&&(M=this.currentShader),M.set3i(p,x,T,E),this},set4i:function(p,x,T,E,M,P){return P===void 0&&(P=this.currentShader),P.set4i(p,x,T,E,M),this},setMatrix2fv:function(p,x,T,E){return E===void 0&&(E=this.currentShader),E.setMatrix2fv(p,x,T),this},setMatrix3fv:function(p,x,T,E){return E===void 0&&(E=this.currentShader),E.setMatrix3fv(p,x,T),this},setMatrix4fv:function(p,x,T,E){return E===void 0&&(E=this.currentShader),E.setMatrix4fv(p,x,T),this},destroy:function(){this.emit(l.DESTROY,this);var p,x=this.shaders;for(p=0;p<x.length;p++)x[p].destroy();var T=this.renderTargets;for(p=0;p<T.length;p++)T[p].destroy();this.gl.deleteBuffer(this.vertexBuffer);var E=this.renderer;return E.off(a.RESIZE,this.resize,this),E.off(a.PRE_RENDER,this.onPreRender,this),E.off(a.RENDER,this.onRender,this),E.off(a.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this.activeTextures=null,this}});r.exports=g}),11857:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(66458),m=e(89787),d=e(56694),l=e(86459),h=e(6659),n=e(81044),a=e(28621),c=e(16650),o=e(72283),v=e(35217),g=e(37410),p=e(40444),x=e(38203),T=e(75512),E=e(1217),M=new d({Extends:h,initialize:function(w){h.call(this);var R=w.config,A={alpha:R.transparent,desynchronized:R.desynchronized,depth:!0,antialias:R.antialiasGL,premultipliedAlpha:R.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:R.failIfMajorPerformanceCaveat,powerPreference:R.powerPreference,preserveDrawingBuffer:R.preserveDrawingBuffer,willReadFrequently:!1};this.config={clearBeforeRender:R.clearBeforeRender,antialias:R.antialias,backgroundColor:R.backgroundColor,contextCreation:A,roundPixels:R.roundPixels,maxTextures:R.maxTextures,maxTextureSize:R.maxTextureSize,batchSize:R.batchSize,maxLights:R.maxLights,mipmapFilter:R.mipmapFilter},this.game=w,this.type=l.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=w.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.maxTextures=0,this.textureIndexes,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=o,this.contextRestoredHandler=o,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats,this.compression,this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.maskSource=null,this.maskTarget=null,this.spector=null,this._debugCapture=!1,this.init(this.config)},init:function(P){var w,R=this.game,A=this.canvas,O=P.backgroundColor;if(R.config.context?w=R.config.context:w=A.getContext("webgl",P.contextCreation)||A.getContext("experimental-webgl",P.contextCreation),!w||w.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=w;var F=this;this.contextLostHandler=function(X){F.contextLost=!0,console&&console.warn("WebGL Context lost. Renderer disabled"),X.preventDefault()},A.addEventListener("webglcontextlost",this.contextLostHandler,!1),R.context=w;for(var b=0;b<=27;b++)this.blendModes.push({func:[w.ONE,w.ONE_MINUS_SRC_ALPHA],equation:w.FUNC_ADD});this.blendModes[1].func=[w.ONE,w.DST_ALPHA],this.blendModes[2].func=[w.DST_COLOR,w.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[w.ONE,w.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[w.ZERO,w.ONE_MINUS_SRC_ALPHA],equation:w.FUNC_REVERSE_SUBTRACT},this.glFormats=[w.BYTE,w.SHORT,w.UNSIGNED_BYTE,w.UNSIGNED_SHORT,w.FLOAT],this.glFuncMap={mat2:{func:w.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:w.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:w.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:w.uniform1f,length:1},"1fv":{func:w.uniform1fv,length:1},"1i":{func:w.uniform1i,length:1},"1iv":{func:w.uniform1iv,length:1},"2f":{func:w.uniform2f,length:2},"2fv":{func:w.uniform2fv,length:1},"2i":{func:w.uniform2i,length:2},"2iv":{func:w.uniform2iv,length:1},"3f":{func:w.uniform3f,length:3},"3fv":{func:w.uniform3fv,length:1},"3i":{func:w.uniform3i,length:3},"3iv":{func:w.uniform3iv,length:1},"4f":{func:w.uniform4f,length:4},"4fv":{func:w.uniform4fv,length:1},"4i":{func:w.uniform4i,length:4},"4iv":{func:w.uniform4iv,length:1}};var D=w.getSupportedExtensions();(!P.maxTextures||P.maxTextures===-1)&&(P.maxTextures=w.getParameter(w.MAX_TEXTURE_IMAGE_UNITS)),P.maxTextureSize||(P.maxTextureSize=w.getParameter(w.MAX_TEXTURE_SIZE)),this.compression=this.getCompressedTextures(),this.supportedExtensions=D;var I="ANGLE_instanced_arrays";this.instancedArraysExtension=D.indexOf(I)>-1?w.getExtension(I):null;var B="OES_vertex_array_object";this.vaoExtension=D.indexOf(B)>-1?w.getExtension(B):null,w.disable(w.DEPTH_TEST),w.disable(w.CULL_FACE),w.enable(w.BLEND),w.clearColor(O.redGL,O.greenGL,O.blueGL,O.alphaGL),P.mipmapFilter!==""&&(this.mipmapFilter=w[P.mipmapFilter]),this.maxTextures=T.checkShaderMax(w,P.maxTextures),this.textureIndexes=[];for(var z=0;z<this.maxTextures;z++){var Y=w.createTexture();w.activeTexture(w.TEXTURE0+z),w.bindTexture(w.TEXTURE_2D,Y),w.texImage2D(w.TEXTURE_2D,0,w.RGBA,1,1,0,w.RGBA,w.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),this.textureIndexes.push(z)}return this.pipelines=new v(this),this.setBlendMode(l.BlendModes.NORMAL),this.projectionMatrix=new c().identity(),R.textures.once(x.READY,this.boot,this),this},boot:function(){var P=this.game,w=this.pipelines,R=P.scale.baseSize,A=R.width,O=R.height;this.width=A,this.height=O,this.isBooted=!0,this.renderTarget=new g(this,A,O,1,0,!0,!0),this.maskTarget=new g(this,A,O,1,0,!0,!0),this.maskSource=new g(this,A,O,1,0,!0,!0);var F=P.config;w.boot(F.pipeline,F.defaultPipeline,F.autoMobilePipeline),this.blankTexture=P.textures.getFrame("__DEFAULT").glTexture,this.whiteTexture=P.textures.getFrame("__WHITE").glTexture;var b=this.gl;b.bindFramebuffer(b.FRAMEBUFFER,null),b.enable(b.SCISSOR_TEST),P.scale.on(p.RESIZE,this.onResize,this),this.resize(A,O)},captureFrame:function(P,w){},captureNextFrame:function(){},getFps:function(){},log:function(){},startCapture:function(P,w,R){},stopCapture:function(){},onCapture:function(P){},onResize:function(P,w){(w.width!==this.width||w.height!==this.height)&&this.resize(w.width,w.height)},beginCapture:function(P,w){P===void 0&&(P=this.width),w===void 0&&(w=this.height),this.renderTarget.bind(!0,P,w),this.setProjectionMatrix(P,w)},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(P,w){var R=this.gl;return this.width=P,this.height=w,this.setProjectionMatrix(P,w),R.viewport(0,0,P,w),this.drawingBufferHeight=R.drawingBufferHeight,R.scissor(0,R.drawingBufferHeight-w,P,w),this.defaultScissor[2]=P,this.defaultScissor[3]=w,this.emit(n.RESIZE,P,w),this},getCompressedTextures:function(){var P="WEBGL_compressed_texture_",w="WEBKIT_"+P,R=function(O,F){var b=O.getExtension(P+F)||O.getExtension(w+F);if(b){var D={};for(var I in b)D[b[I]]=I;return D}},A=this.gl;return{ETC:R(A,"etc"),ETC1:R(A,"etc1"),ATC:R(A,"atc"),ASTC:R(A,"astc"),BPTC:R(A,"bptc"),RGTC:R(A,"rgtc"),PVRTC:R(A,"pvrtc"),S3TC:R(A,"s3tc"),S3TCSRGB:R(A,"s3tc_srgb"),IMG:!0}},getCompressedTextureName:function(P,w){var R=this.compression[P.toUpperCase()];if(w in R)return R[w]},supportsCompressedTexture:function(P,w){var R=this.compression[P.toUpperCase()];return R?w?w in R:!0:!1},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(P,w){return(P!==this.projectionWidth||w!==this.projectionHeight)&&(this.projectionWidth=P,this.projectionHeight=w,this.projectionMatrix.ortho(0,P,w,0,-1e3,1e3)),this},resetProjectionMatrix:function(){return this.setProjectionMatrix(this.width,this.height)},hasExtension:function(P){return this.supportedExtensions?this.supportedExtensions.indexOf(P):!1},getExtension:function(P){return this.hasExtension(P)?(P in this.extensions||(this.extensions[P]=this.gl.getExtension(P)),this.extensions[P]):null},flush:function(){this.pipelines.flush()},pushScissor:function(P,w,R,A,O){O===void 0&&(O=this.drawingBufferHeight);var F=this.scissorStack,b=[P,w,R,A];return F.push(b),this.setScissor(P,w,R,A,O),this.currentScissor=b,b},setScissor:function(P,w,R,A,O){O===void 0&&(O=this.drawingBufferHeight);var F=this.gl,b=this.currentScissor,D=R>0&&A>0;if(b&&D){var I=b[0],B=b[1],z=b[2],Y=b[3];D=I!==P||B!==w||z!==R||Y!==A}D&&(this.flush(),F.scissor(P,O-w-A,R,A))},resetScissor:function(){var P=this.gl;P.enable(P.SCISSOR_TEST);var w=this.currentScissor;if(w){var R=w[0],A=w[1],O=w[2],F=w[3];O>0&&F>0&&P.scissor(R,this.drawingBufferHeight-A-F,O,F)}},popScissor:function(){var P=this.scissorStack;P.pop();var w=P[P.length-1];w&&this.setScissor(w[0],w[1],w[2],w[3]),this.currentScissor=w},hasActiveStencilMask:function(){var P=this.currentMask.mask,w=this.currentCameraMask.mask;return P&&P.isStencil||w&&w.isStencil},resetViewport:function(){var P=this.gl;P.viewport(0,0,this.width,this.height),this.drawingBufferHeight=P.drawingBufferHeight},setBlendMode:function(P,w){w===void 0&&(w=!1);var R=this.gl,A=this.blendModes[P];return w||P!==l.BlendModes.SKIP_CHECK&&this.currentBlendMode!==P?(this.flush(),R.enable(R.BLEND),R.blendEquation(A.equation),A.func.length>2?R.blendFuncSeparate(A.func[0],A.func[1],A.func[2],A.func[3]):R.blendFunc(A.func[0],A.func[1]),this.currentBlendMode=P,!0):!1},addBlendMode:function(P,w){var R=this.blendModes.push({func:P,equation:w});return R-1},updateBlendMode:function(P,w,R){return this.blendModes[P]&&(this.blendModes[P].func=w,R&&(this.blendModes[P].equation=R)),this},removeBlendMode:function(P){return P>17&&this.blendModes[P]&&this.blendModes.splice(P,1),this},pushFramebuffer:function(P,w,R,A,O){return P===this.currentFramebuffer?this:(this.fboStack.push(P),this.setFramebuffer(P,w,R,A,O))},setFramebuffer:function(P,w,R,A,O){if(w===void 0&&(w=!1),R===void 0&&(R=!0),A===void 0&&(A=null),O===void 0&&(O=!1),P===this.currentFramebuffer)return this;var F=this.gl,b=this.width,D=this.height;return P&&P.renderTexture&&R?(b=P.renderTexture.width,D=P.renderTexture.height):this.flush(),F.bindFramebuffer(F.FRAMEBUFFER,P),R&&F.viewport(0,0,b,D),A&&F.framebufferTexture2D(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,F.TEXTURE_2D,A,0),O&&(F.clearColor(0,0,0,0),F.clear(F.COLOR_BUFFER_BIT)),w&&(P?(this.drawingBufferHeight=D,this.pushScissor(0,0,b,D)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=P,this},popFramebuffer:function(P,w){P===void 0&&(P=!1),w===void 0&&(w=!0);var R=this.fboStack;R.pop();var A=R[R.length-1];return A||(A=null),this.setFramebuffer(A,P,w),A},restoreFramebuffer:function(P,w){P===void 0&&(P=!1),w===void 0&&(w=!0);var R=this.fboStack,A=R[R.length-1];A||(A=null),this.currentFramebuffer=null,this.setFramebuffer(A,P,w)},setProgram:function(P){return P!==this.currentProgram?(this.flush(),this.gl.useProgram(P),this.currentProgram=P,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function(P,w,R,A,O){O===void 0&&(O=!1);var F=this.gl,b=F.NEAREST,D=F.NEAREST,I=F.CLAMP_TO_EDGE,B=null;w=P?P.width:w,R=P?P.height:R;var z=a(w,R);return z&&!O&&(I=F.REPEAT),A===l.ScaleModes.LINEAR&&this.config.antialias&&(b=z&&this.mipmapFilter?this.mipmapFilter:F.LINEAR,D=F.LINEAR),P&&P.compressed&&(b=F.LINEAR,D=F.LINEAR),!P&&typeof w=="number"&&typeof R=="number"?B=this.createTexture2D(0,b,D,I,I,F.RGBA,null,w,R):B=this.createTexture2D(0,b,D,I,I,F.RGBA,P),B},createTexture2D:function(P,w,R,A,O,F,b,D,I,B,z,Y){B=B??!0,z===void 0&&(z=!1),Y===void 0&&(Y=!1);var X=this.gl,H=X.createTexture();X.activeTexture(X.TEXTURE0);var N=X.getParameter(X.TEXTURE_BINDING_2D);X.bindTexture(X.TEXTURE_2D,H),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_MIN_FILTER,w),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_MAG_FILTER,R),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_WRAP_S,O),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_WRAP_T,A),X.pixelStorei(X.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B),Y&&X.pixelStorei(X.UNPACK_FLIP_Y_WEBGL,!0);var U=!1;if(b==null)X.texImage2D(X.TEXTURE_2D,P,F,D,I,0,F,X.UNSIGNED_BYTE,null),U=a(D,I);else if(b.compressed){D=b.width,I=b.height,U=b.generateMipmap;for(var L=0;L<b.mipmaps.length;L++)X.compressedTexImage2D(X.TEXTURE_2D,L,b.internalFormat,b.mipmaps[L].width,b.mipmaps[L].height,0,b.mipmaps[L].data)}else z||(D=b.width,I=b.height),X.texImage2D(X.TEXTURE_2D,P,F,F,X.UNSIGNED_BYTE,b),U=a(D,I);return U&&X.generateMipmap(X.TEXTURE_2D),N&&X.bindTexture(X.TEXTURE_2D,N),H.isAlphaPremultiplied=B,H.isRenderTexture=!1,H.width=D,H.height=I,H},createFramebuffer:function(P,w,R,A){A===void 0&&(A=!0);var O=this.gl,F=O.createFramebuffer(),b=0;if(this.setFramebuffer(F),R.isRenderTexture=!0,R.isAlphaPremultiplied=!1,O.framebufferTexture2D(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,O.TEXTURE_2D,R,0),b=O.checkFramebufferStatus(O.FRAMEBUFFER),b!==O.FRAMEBUFFER_COMPLETE){var D={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"};throw new Error("Framebuffer status: "+(D[b]||b))}if(F.renderTexture=R,A){var I=O.createRenderbuffer();O.bindRenderbuffer(O.RENDERBUFFER,I),O.renderbufferStorage(O.RENDERBUFFER,O.DEPTH_STENCIL,P,w),O.framebufferRenderbuffer(O.FRAMEBUFFER,O.DEPTH_STENCIL_ATTACHMENT,O.RENDERBUFFER,I)}return this.setFramebuffer(null),F},beginBitmapMask:function(P,w){var R=this.gl;R&&(this.flush(),this.maskTarget.bind(),this.currentCameraMask.mask!==P&&(this.currentMask.mask=P,this.currentMask.camera=w))},drawBitmapMask:function(P,w,R){this.flush(),this.maskSource.bind(),this.setBlendMode(0,!0),P.renderWebGL(this,P,w),this.maskSource.unbind(!0),this.maskTarget.unbind();var A=this.gl,O=this.getCurrentStencilMask();O?(A.enable(A.STENCIL_TEST),O.mask.applyStencil(this,O.camera,!0)):this.currentMask.mask=null,this.pipelines.set(R),A.activeTexture(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,this.maskTarget.texture),A.activeTexture(A.TEXTURE1),A.bindTexture(A.TEXTURE_2D,this.maskSource.texture)},createProgram:function(P,w){var R=this.gl,A=R.createProgram(),O=R.createShader(R.VERTEX_SHADER),F=R.createShader(R.FRAGMENT_SHADER);R.shaderSource(O,P),R.shaderSource(F,w),R.compileShader(O),R.compileShader(F);var b=`Shader failed:
`;if(!R.getShaderParameter(O,R.COMPILE_STATUS))throw new Error("Vertex "+b+R.getShaderInfoLog(O));if(!R.getShaderParameter(F,R.COMPILE_STATUS))throw new Error("Fragment "+b+R.getShaderInfoLog(F));if(R.attachShader(A,O),R.attachShader(A,F),R.linkProgram(A),!R.getProgramParameter(A,R.LINK_STATUS))throw new Error("Link "+b+R.getProgramInfoLog(A));return R.useProgram(A),A},createVertexBuffer:function(P,w){var R=this.gl,A=R.createBuffer();return R.bindBuffer(R.ARRAY_BUFFER,A),R.bufferData(R.ARRAY_BUFFER,P,w),R.bindBuffer(R.ARRAY_BUFFER,null),A},createIndexBuffer:function(P,w){var R=this.gl,A=R.createBuffer();return R.bindBuffer(R.ELEMENT_ARRAY_BUFFER,A),R.bufferData(R.ELEMENT_ARRAY_BUFFER,P,w),R.bindBuffer(R.ELEMENT_ARRAY_BUFFER,null),A},deleteTexture:function(P){return P&&this.gl.deleteTexture(P),this},deleteFramebuffer:function(P){if(P){var w=this.gl;w.bindFramebuffer(w.FRAMEBUFFER,P);var R=w.getParameter(w.RENDERBUFFER_BINDING);R&&w.deleteRenderbuffer(R),w.bindFramebuffer(w.FRAMEBUFFER,null),w.deleteFramebuffer(P),u(this.fboStack,P),this.currentFramebuffer===P&&(this.currentFramebuffer=null)}return this},deleteProgram:function(P){return P&&this.gl.deleteProgram(P),this},deleteBuffer:function(P){return this.gl.deleteBuffer(P),this},preRenderCamera:function(P){var w=P.x,R=P.y,A=P.width,O=P.height,F=P.backgroundColor;if(P.emit(m.PRE_RENDER,P),this.pipelines.preBatchCamera(P),this.pushScissor(w,R,A,O),P.mask&&(this.currentCameraMask.mask=P.mask,this.currentCameraMask.camera=P._maskCamera,P.mask.preRenderWebGL(this,P,P._maskCamera)),F.alphaGL>0){var b=this.pipelines.setMulti();b.drawFillRect(w,R,A,O,T.getTintFromFloats(F.blueGL,F.greenGL,F.redGL,1),F.alphaGL)}},getCurrentStencilMask:function(){var P=null,w=this.maskStack,R=this.currentCameraMask;return w.length>0?P=w[w.length-1]:R.mask&&R.mask.isStencil&&(P=R),P},postRenderCamera:function(P){var w=P.flashEffect,R=P.fadeEffect;if(w.isRunning||R.isRunning||R.isComplete){var A=this.pipelines.setMulti();w.postRenderWebGL(A,T.getTintFromFloats),R.postRenderWebGL(A,T.getTintFromFloats)}P.dirty=!1,this.popScissor(),P.mask&&(this.currentCameraMask.mask=null,P.mask.postRenderWebGL(this,P._maskCamera)),this.pipelines.postBatchCamera(P),P.emit(m.POST_RENDER,P)},preRender:function(){if(!this.contextLost){var P=this.gl;if(P.bindFramebuffer(P.FRAMEBUFFER,null),this.config.clearBeforeRender){var w=this.config.backgroundColor;P.clearColor(w.redGL,w.greenGL,w.blueGL,w.alphaGL),P.clear(P.COLOR_BUFFER_BIT|P.DEPTH_BUFFER_BIT|P.STENCIL_BUFFER_BIT)}P.enable(P.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&P.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.emit(n.PRE_RENDER)}},render:function(P,w,R){if(!this.contextLost){var A=w.length;if(this.emit(n.RENDER,P,R),this.preRenderCamera(R),A===0){this.setBlendMode(l.BlendModes.NORMAL),this.postRenderCamera(R);return}this.currentType="";for(var O=this.currentMask,F=0;F<A;F++){this.finalType=F===A-1;var b=w[F],D=b.mask;O=this.currentMask,O.mask&&O.mask!==D&&O.mask.postRenderWebGL(this,O.camera),D&&O.mask!==D&&D.preRenderWebGL(this,b,R),b.blendMode!==this.currentBlendMode&&this.setBlendMode(b.blendMode);var I=b.type;I!==this.currentType&&(this.newType=!0,this.currentType=I),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=w[F+1].type===this.currentType,b.renderWebGL(this,b,R),this.newType=!1}O=this.currentMask,O.mask&&O.mask.postRenderWebGL(this,O.camera),this.setBlendMode(l.BlendModes.NORMAL),this.postRenderCamera(R)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(n.POST_RENDER);var P=this.snapshotState;P.callback&&(E(this.gl,P),P.callback=null)}},clearStencilMask:function(){this.gl.disable(this.gl.STENCIL_TEST)},restoreStencilMask:function(){var P=this.gl,w=this.getCurrentStencilMask();if(w){var R=w.mask;P.enable(P.STENCIL_TEST),R.invertAlpha?P.stencilFunc(P.NOTEQUAL,R.level,255):P.stencilFunc(P.EQUAL,R.level,255)}},snapshot:function(P,w,R){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,P,w,R)},snapshotArea:function(P,w,R,A,O,F,b){var D=this.snapshotState;return D.callback=O,D.type=F,D.encoder=b,D.getPixel=!1,D.x=P,D.y=w,D.width=R,D.height=A,this},snapshotPixel:function(P,w,R){return this.snapshotArea(P,w,1,1,R),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(P,w,R,A,O,F,b,D,I,B,z){O===void 0&&(O=!1),F===void 0&&(F=0),b===void 0&&(b=0),D===void 0&&(D=w),I===void 0&&(I=R),B==="pixel"&&(O=!0,B="image/png");var Y=this.currentFramebuffer;this.snapshotArea(F,b,D,I,A,B,z);var X=this.snapshotState;return X.getPixel=O,X.isFramebuffer=!0,X.bufferWidth=w,X.bufferHeight=R,X.width=Math.min(X.width,w),X.height=Math.min(X.height,R),this.setFramebuffer(P),E(this.gl,X),this.setFramebuffer(Y),X.callback=null,X.isFramebuffer=!1,this},canvasToTexture:function(P,w,R,A){return R===void 0&&(R=!1),A===void 0&&(A=!1),w?this.updateCanvasTexture(P,w,A):this.createCanvasTexture(P,R,A)},createCanvasTexture:function(P,w,R){w===void 0&&(w=!1),R===void 0&&(R=!1);var A=this.gl,O=A.NEAREST,F=A.NEAREST,b=P.width,D=P.height,I=A.CLAMP_TO_EDGE,B=a(b,D);return!w&&B&&(I=A.REPEAT),this.config.antialias&&(O=B&&this.mipmapFilter?this.mipmapFilter:A.LINEAR,F=A.LINEAR),this.createTexture2D(0,O,F,I,I,A.RGBA,P,b,D,!0,!1,R)},updateCanvasTexture:function(P,w,R){R===void 0&&(R=!1);var A=this.gl,O=P.width,F=P.height;if(O>0&&F>0){A.activeTexture(A.TEXTURE0);var b=A.getParameter(A.TEXTURE_BINDING_2D);A.bindTexture(A.TEXTURE_2D,w),R&&A.pixelStorei(A.UNPACK_FLIP_Y_WEBGL,!0),A.pixelStorei(A.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),A.texImage2D(A.TEXTURE_2D,0,A.RGBA,A.RGBA,A.UNSIGNED_BYTE,P),w.width=O,w.height=F,b&&A.bindTexture(A.TEXTURE_2D,b)}return w},createVideoTexture:function(P,w,R){w===void 0&&(w=!1),R===void 0&&(R=!1);var A=this.gl,O=A.NEAREST,F=A.NEAREST,b=P.videoWidth,D=P.videoHeight,I=A.CLAMP_TO_EDGE,B=a(b,D);return!w&&B&&(I=A.REPEAT),this.config.antialias&&(O=B&&this.mipmapFilter?this.mipmapFilter:A.LINEAR,F=A.LINEAR),this.createTexture2D(0,O,F,I,I,A.RGBA,P,b,D,!0,!0,R)},updateVideoTexture:function(P,w,R){R===void 0&&(R=!1);var A=this.gl,O=P.videoWidth,F=P.videoHeight;if(O>0&&F>0){A.activeTexture(A.TEXTURE0);var b=A.getParameter(A.TEXTURE_BINDING_2D);A.bindTexture(A.TEXTURE_2D,w),A.pixelStorei(A.UNPACK_FLIP_Y_WEBGL,R),A.texImage2D(A.TEXTURE_2D,0,A.RGBA,A.RGBA,A.UNSIGNED_BYTE,P),w.width=O,w.height=F,b&&A.bindTexture(A.TEXTURE_2D,b)}return w},setTextureFilter:function(P,w){var R=this.gl,A=[R.LINEAR,R.NEAREST][w];R.activeTexture(R.TEXTURE0);var O=R.getParameter(R.TEXTURE_BINDING_2D);return R.bindTexture(R.TEXTURE_2D,P),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MIN_FILTER,A),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MAG_FILTER,A),O&&R.bindTexture(R.TEXTURE_2D,O),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.maskTarget.destroy(),this.maskSource.destroy(),this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});r.exports=M}),71305:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(72632),d=e(71402),l=new u({initialize:function(n,a,c,o,v){this.pipeline=n,this.name=a,this.renderer=n.renderer,this.gl=this.renderer.gl,this.fragSrc=o,this.vertSrc=c,this.program=this.renderer.createProgram(c,o),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(v),this.createUniforms()},createAttributes:function(h){var n=0,a=0,c=[];this.vertexComponentCount=0;for(var o=0;o<h.length;o++){var v=h[o],g=v.name,p=m(v,"size",1),x=m(v,"type",d.FLOAT),T=x.enum,E=x.size,M=!!v.normalized;c.push({name:g,size:p,type:T,normalized:M,offset:a,enabled:!1,location:-1}),E===4?n+=p:n++,a+=p*E}this.vertexSize=a,this.vertexComponentCount=n,this.attributes=c},bind:function(h,n){return h===void 0&&(h=!1),n===void 0&&(n=!1),n&&this.pipeline.flush(),this.renderer.setProgram(this.program),h&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(h){h===void 0&&(h=!1);for(var n=this.gl,a=this.vertexSize,c=this.attributes,o=this.program,v=0;v<c.length;v++){var g=c[v],p=g.size,x=g.type,T=g.offset,E=g.enabled,M=g.location,P=!!g.normalized;if(h){var w=n.getAttribLocation(o,g.name);w>=0?(n.enableVertexAttribArray(w),n.vertexAttribPointer(w,p,x,P,a,T),g.enabled=!0,g.location=w):w!==-1&&n.disableVertexAttribArray(w)}else E?n.vertexAttribPointer(M,p,x,P,a,T):!E&&M>-1&&(n.disableVertexAttribArray(M),g.location=-1)}return this},createUniforms:function(){var h=this.gl,n=this.program,a=this.uniforms,c,o,v,g=h.getProgramParameter(n,h.ACTIVE_UNIFORMS);for(c=0;c<g;c++){var p=h.getActiveUniform(n,c);if(p){o=p.name,v=h.getUniformLocation(n,o),v!==null&&(a[o]={name:o,location:v,value1:null,value2:null,value3:null,value4:null});var x=o.indexOf("[");x>0&&(o=o.substr(0,x),a.hasOwnProperty(o)||(v=h.getUniformLocation(n,o),v!==null&&(a[o]={name:o,location:v,value1:null,value2:null,value3:null,value4:null})))}}return this},hasUniform:function(h){return this.uniforms.hasOwnProperty(h)},resetUniform:function(h){var n=this.uniforms[h];return n&&(n.value1=null,n.value2=null,n.value3=null,n.value4=null),this},setUniform1:function(h,n,a,c){var o=this.uniforms[n];return o?((c||o.value1!==a)&&(o.value1=a,this.renderer.setProgram(this.program),h.call(this.gl,o.location,a),this.pipeline.currentShader=this),this):this},setUniform2:function(h,n,a,c,o){var v=this.uniforms[n];return v?((o||v.value1!==a||v.value2!==c)&&(v.value1=a,v.value2=c,this.renderer.setProgram(this.program),h.call(this.gl,v.location,a,c),this.pipeline.currentShader=this),this):this},setUniform3:function(h,n,a,c,o,v){var g=this.uniforms[n];return g?((v||g.value1!==a||g.value2!==c||g.value3!==o)&&(g.value1=a,g.value2=c,g.value3=o,this.renderer.setProgram(this.program),h.call(this.gl,g.location,a,c,o),this.pipeline.currentShader=this),this):this},setUniform4:function(h,n,a,c,o,v,g){var p=this.uniforms[n];return p?((g||p.value1!==a||p.value2!==c||p.value3!==o||p.value4!==v)&&(p.value1=a,p.value2=c,p.value3=o,p.value4=v,this.renderer.setProgram(this.program),h.call(this.gl,p.location,a,c,o,v),this.pipeline.currentShader=this),this):this},setBoolean:function(h,n){return this.setUniform1(this.gl.uniform1i,h,Number(n))},set1f:function(h,n){return this.setUniform1(this.gl.uniform1f,h,n)},set2f:function(h,n,a){return this.setUniform2(this.gl.uniform2f,h,n,a)},set3f:function(h,n,a,c){return this.setUniform3(this.gl.uniform3f,h,n,a,c)},set4f:function(h,n,a,c,o){return this.setUniform4(this.gl.uniform4f,h,n,a,c,o)},set1fv:function(h,n){return this.setUniform1(this.gl.uniform1fv,h,n,!0)},set2fv:function(h,n){return this.setUniform1(this.gl.uniform2fv,h,n,!0)},set3fv:function(h,n){return this.setUniform1(this.gl.uniform3fv,h,n,!0)},set4fv:function(h,n){return this.setUniform1(this.gl.uniform4fv,h,n,!0)},set1iv:function(h,n){return this.setUniform1(this.gl.uniform1iv,h,n,!0)},set2iv:function(h,n){return this.setUniform1(this.gl.uniform2iv,h,n,!0)},set3iv:function(h,n){return this.setUniform1(this.gl.uniform3iv,h,n,!0)},set4iv:function(h,n){return this.setUniform1(this.gl.uniform4iv,h,n,!0)},set1i:function(h,n){return this.setUniform1(this.gl.uniform1i,h,n)},set2i:function(h,n,a){return this.setUniform2(this.gl.uniform2i,h,n,a)},set3i:function(h,n,a,c){return this.setUniform3(this.gl.uniform3i,h,n,a,c)},set4i:function(h,n,a,c,o){return this.setUniform4(this.gl.uniform4i,h,n,a,c,o)},setMatrix2fv:function(h,n,a){return this.setUniform2(this.gl.uniformMatrix2fv,h,n,a,!0)},setMatrix3fv:function(h,n,a){return this.setUniform2(this.gl.uniformMatrix3fv,h,n,a,!0)},setMatrix4fv:function(h,n,a){return this.setUniform2(this.gl.uniformMatrix4fv,h,n,a,!0)},createProgram:function(h,n){h===void 0&&(h=this.vertSrc),n===void 0&&(n=this.fragSrc);var a=this.gl;return this.program&&a.deleteProgram(this.program),this.vertSrc=h,this.fragSrc=n,this.program=this.renderer.createProgram(h,n),this.createUniforms(),this.rebind()},destroy:function(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});r.exports=l}),71402:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};r.exports=y}),55478:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(71402),m=e(98611),d={PipelineManager:e(35217),Pipelines:e(62253),RenderTarget:e(37410),Utils:e(75512),WebGLPipeline:e(44775),WebGLRenderer:e(11857),WebGLShader:e(71305)};d=m(!1,d,u),r.exports=d}),5583:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(72632),d=e(91679),l=e(89053),h=e(71402),n=e(44775),a=new u({Extends:n,initialize:function(o){o.fragShader=m(o,"fragShader",d),o.vertShader=m(o,"vertShader",l),o.batchSize=m(o,"batchSize",1),o.vertices=m(o,"vertices",[-1,1,-1,-7,7,1]),o.attributes=m(o,"attributes",[{name:"inPosition",size:2,type:h.FLOAT}]),n.call(this,o)},boot:function(){n.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(c,o){n.prototype.resize.call(this,c,o),this.set2f("uResolution",c,o)},beginMask:function(c,o,v){this.renderer.beginBitmapMask(c,v)},endMask:function(c,o,v){var g=this.gl,p=this.renderer,x=c.bitmapMask;x&&g&&(p.drawBitmapMask(x,o,this),v&&this.set2f("uResolution",v.width,v.height),this.set1i("uInvertMaskAlpha",c.invertAlpha),g.drawArrays(this.topology,0,3),v&&this.set2f("uResolution",this.width,this.height),g.bindTexture(g.TEXTURE_2D,null))}});r.exports=a}),81828:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(58136),d=e(47406),l=e(72632),h=e(87228),n=e(92462),a=e(75512),c=new u({Extends:h,initialize:function(v){v.shaders=[a.setGlowQuality(n.FXGlowFrag,v.game),n.FXShadowFrag,n.FXPixelateFrag,n.FXVignetteFrag,n.FXShineFrag,n.FXBlurLowFrag,n.FXBlurMedFrag,n.FXBlurHighFrag,n.FXGradientFrag,n.FXBloomFrag,n.ColorMatrixFrag,n.FXCircleFrag,n.FXBarrelFrag,n.FXDisplacementFrag,n.FXWipeFrag,n.FXBokehFrag],h.call(this,v);var g=this.game;this.glow=new m.Glow(g),this.shadow=new m.Shadow(g),this.pixelate=new m.Pixelate(g),this.vignette=new m.Vignette(g),this.shine=new m.Shine(g),this.gradient=new m.Gradient(g),this.circle=new m.Circle(g),this.barrel=new m.Barrel(g),this.wipe=new m.Wipe(g),this.bokeh=new m.Bokeh(g);var p=[];p[d.GLOW]=this.onGlow,p[d.SHADOW]=this.onShadow,p[d.PIXELATE]=this.onPixelate,p[d.VIGNETTE]=this.onVignette,p[d.SHINE]=this.onShine,p[d.BLUR]=this.onBlur,p[d.GRADIENT]=this.onGradient,p[d.BLOOM]=this.onBloom,p[d.COLOR_MATRIX]=this.onColorMatrix,p[d.CIRCLE]=this.onCircle,p[d.BARREL]=this.onBarrel,p[d.DISPLACEMENT]=this.onDisplacement,p[d.WIPE]=this.onWipe,p[d.BOKEH]=this.onBokeh,this.fxHandlers=p,this.source,this.target,this.swap},onDraw:function(o,v,g){this.source=o,this.target=v,this.swap=g;var p=o.width,x=o.height,T=this.tempSprite,E=this.fxHandlers;if(T&&T.preFX)for(var M=T.preFX.list,P=0;P<M.length;P++){var w=M[P];w.active&&E[w.type].call(this,w,p,x)}this.drawToGame(this.source)},runDraw:function(){var o=this.source,v=this.target;this.copy(o,v),this.source=v,this.target=o},onGlow:function(o,v,g){var p=this.shaders[d.GLOW];this.setShader(p),this.glow.onPreRender(o,p,v,g),this.runDraw()},onShadow:function(o){var v=this.shaders[d.SHADOW];this.setShader(v),this.shadow.onPreRender(o,v),this.runDraw()},onPixelate:function(o,v,g){var p=this.shaders[d.PIXELATE];this.setShader(p),this.pixelate.onPreRender(o,p,v,g),this.runDraw()},onVignette:function(o){var v=this.shaders[d.VIGNETTE];this.setShader(v),this.vignette.onPreRender(o,v),this.runDraw()},onShine:function(o,v,g){var p=this.shaders[d.SHINE];this.setShader(p),this.shine.onPreRender(o,p,v,g),this.runDraw()},onBlur:function(o,v,g){var p=l(o,"quality"),x=this.shaders[d.BLUR+p];this.setShader(x),this.set1i("uMainSampler",0),this.set2f("resolution",v,g),this.set1f("strength",l(o,"strength")),this.set3fv("color",l(o,"glcolor"));for(var T=l(o,"x"),E=l(o,"y"),M=l(o,"steps"),P=0;P<M;P++)this.set2f("offset",T,0),this.runDraw(),this.set2f("offset",0,E),this.runDraw()},onGradient:function(o){var v=this.shaders[d.GRADIENT];this.setShader(v),this.gradient.onPreRender(o,v),this.runDraw()},onBloom:function(o,v,g){var p=this.shaders[d.BLOOM];this.copySprite(this.source,this.swap),this.setShader(p),this.set1i("uMainSampler",0),this.set1f("strength",l(o,"blurStrength")),this.set3fv("color",l(o,"glcolor"));for(var x=2/v*l(o,"offsetX"),T=2/g*l(o,"offsetY"),E=l(o,"steps"),M=0;M<E;M++)this.set2f("offset",x,0),this.runDraw(),this.set2f("offset",0,T),this.runDraw();this.blendFrames(this.swap,this.source,this.target,l(o,"strength")),this.copySprite(this.target,this.source)},onColorMatrix:function(o){this.setShader(this.colorMatrixShader),this.set1fv("uColorMatrix",o.getData()),this.set1f("uAlpha",o.alpha),this.runDraw()},onCircle:function(o,v,g){var p=this.shaders[d.CIRCLE];this.setShader(p),this.circle.onPreRender(o,p,v,g),this.runDraw()},onBarrel:function(o){var v=this.shaders[d.BARREL];this.setShader(v),this.barrel.onPreRender(o,v),this.runDraw()},onDisplacement:function(o){this.setShader(this.shaders[d.DISPLACEMENT]),this.set1i("uDisplacementSampler",1),this.set2f("amount",o.x,o.y),this.bindTexture(o.glTexture,1),this.runDraw()},onWipe:function(o){var v=this.shaders[d.WIPE];this.setShader(v),this.wipe.onPreRender(o,v),this.runDraw()},onBokeh:function(o,v,g){var p=this.shaders[d.BOKEH];this.setShader(p),this.bokeh.onPreRender(o,p,v,g),this.runDraw()},destroy:function(){return this.glow.destroy(),this.shadow.destroy(),this.pixelate.destroy(),this.vignette.destroy(),this.shine.destroy(),this.gradient.destroy(),this.circle.destroy(),this.barrel.destroy(),this.wipe.destroy(),this.bokeh.destroy(),this.fxHandlers=null,this.source=null,this.target=null,this.swap=null,h.prototype.destroy.call(this),this}});r.exports=c}),66901:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(72632),d=e(65045),l=e(77310),h=e(69360),n=e(93736),a=e(44775),c=new u({Extends:l,initialize:function(v){var g=m(v,"fragShader",d);v.fragShader=g.replace("%LIGHT_COUNT%",v.game.renderer.config.maxLights),l.call(this,v),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.defaultNormalMap,this.currentNormalMap,this.lightsActive=!0,this.tempVec2=new n,this._tempMatrix=new h,this._tempMatrix2=new h},boot:function(){a.prototype.boot.call(this);var o=this.gl,v=o.createTexture();o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,v),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,1,1,0,o.RGBA,o.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:v}},onRender:function(o,v){var g=o.sys.lights;if(this.lightsActive=!1,!(!g||!g.active)){var p=g.getLights(v),x=p.length;this.lightsActive=!0;var T,E=this.renderer,M=E.height,P=v.matrix,w=this.tempVec2;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",v.x,v.y,v.rotation,v.zoom),this.set3f("uAmbientLightColor",g.ambientColor.r,g.ambientColor.g,g.ambientColor.b),this.set1i("uLightCount",x),T=0;T<x;T++){var R=p[T].light,A=R.color,O="uLights["+T+"].";P.transformPoint(R.x,R.y,w),this.set2f(O+"position",w.x-v.scrollX*R.scrollFactorX*v.zoom,M-(w.y-v.scrollY*R.scrollFactorY*v.zoom)),this.set3f(O+"color",A.r,A.g,A.b),this.set1f(O+"intensity",R.intensity),this.set1f(O+"radius",R.radius)}this.currentNormalMapRotation=null}},setNormalMapRotation:function(o){if(o!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var v=this.inverseRotationMatrix;if(o){var g=-o,p=Math.cos(g),x=Math.sin(g);v[1]=x,v[3]=-x,v[0]=v[4]=p}else v[0]=v[4]=1,v[1]=v[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,v),this.currentNormalMapRotation=o}},setTexture2D:function(o,v){var g=this.renderer;o===void 0&&(o=g.whiteTexture);var p=this.getNormalMap(v);this.isNewNormalMap(o,p)&&(this.flush(),this.createBatch(o),this.addTextureToBatch(p),this.currentNormalMap=p);var x=0;if(v&&v.parentContainer){var T=v.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);x=T.rotationNormalized}else v&&(x=v.rotation);return this.setNormalMapRotation(x),0},setGameObject:function(o,v){v===void 0&&(v=o.frame);var g=v.glTexture,p=this.getNormalMap(o);if(this.isNewNormalMap(g,p)&&(this.flush(),this.createBatch(g),this.addTextureToBatch(p),this.currentNormalMap=p),o.parentContainer){var x=o.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);this.setNormalMapRotation(x.rotationNormalized)}else this.setNormalMapRotation(o.rotation);return 0},isNewNormalMap:function(o,v){return this.currentTexture!==o||this.currentNormalMap!==v},getNormalMap:function(o){var v;return o?o.displayTexture?v=o.displayTexture.dataSource[o.displayFrame.sourceIndex]:o.texture?v=o.texture.dataSource[o.frame.sourceIndex]:o.tileset&&(Array.isArray(o.tileset)?v=o.tileset[0].image.dataSource[0]:v=o.tileset.image.dataSource[0]):v=this.defaultNormalMap,v||(v=this.defaultNormalMap),v.glTexture},batchSprite:function(o,v,g){this.lightsActive&&l.prototype.batchSprite.call(this,o,v,g)},batchTexture:function(o,v,g,p,x,T,E,M,P,w,R,A,O,F,b,D,I,B,z,Y,X,H,N,U,L,G,V,k,W,$,K,j){this.lightsActive&&l.prototype.batchTexture.call(this,o,v,g,p,x,T,E,M,P,w,R,A,O,F,b,D,I,B,z,Y,X,H,N,U,L,G,V,k,W,$,K,j)},batchTextureFrame:function(o,v,g,p,x,T,E){this.lightsActive&&l.prototype.batchTextureFrame.call(this,o,v,g,p,x,T,E)}});r.exports=c}),71264:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(72632),d=e(77310),l=e(85060),h=e(18166),n=e(71402),a=e(44775),c=new u({Extends:d,initialize:function(v){v.fragShader=m(v,"fragShader",l),v.vertShader=m(v,"vertShader",h),v.attributes=m(v,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:n.UNSIGNED_BYTE,normalized:!0}]),v.forceZero=!0,d.call(this,v)},boot:function(){a.prototype.boot.call(this),this.set1i("uMainSampler",0)}});r.exports=c}),77310:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(11117),d=e(72632),l=e(53787),h=e(15968),n=e(69360),a=e(75512),c=e(71402),o=e(44775),v=new u({Extends:o,initialize:function(p){var x=p.game.renderer,T=d(p,"fragShader",l);p.fragShader=a.parseFragmentShaderMaxTextures(T,x.maxTextures),p.vertShader=d(p,"vertShader",h),p.attributes=d(p,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:c.UNSIGNED_BYTE,normalized:!0}]),o.call(this,p),this._tempMatrix1=new n,this._tempMatrix2=new n,this._tempMatrix3=new n,this.calcMatrix=new n,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){o.prototype.boot.call(this),this.currentShader.set1iv("uMainSampler",this.renderer.textureIndexes)},batchSprite:function(g,p,x){this.manager.set(this,g);var T=this._tempMatrix1,E=this._tempMatrix2,M=this._tempMatrix3,P=g.frame,w=P.glTexture,R=P.u0,A=P.v0,O=P.u1,F=P.v1,b=P.x,D=P.y,I=P.cutWidth,B=P.cutHeight,z=P.customPivot,Y=g.displayOriginX,X=g.displayOriginY,H=-Y+b,N=-X+D;if(g.isCropped){var U=g._crop;(U.flipX!==g.flipX||U.flipY!==g.flipY)&&P.updateCropUVs(U,g.flipX,g.flipY),R=U.u0,A=U.v0,O=U.u1,F=U.v1,I=U.width,B=U.height,b=U.x,D=U.y,H=-Y+b,N=-X+D}var L=1,G=1;g.flipX&&(z||(H+=-P.realWidth+Y*2),L=-1),(g.flipY||P.source.isGLTexture&&!w.flipY)&&(z||(N+=-P.realHeight+X*2),G=-1);var V=g.x,k=g.y;E.applyITRS(V,k,g.rotation,g.scaleX*L,g.scaleY*G),T.copyFrom(p.matrix),x?(T.multiplyWithOffset(x,-p.scrollX*g.scrollFactorX,-p.scrollY*g.scrollFactorY),E.e=V,E.f=k):(E.e-=p.scrollX*g.scrollFactorX,E.f-=p.scrollY*g.scrollFactorY),T.multiply(E,M);var W=M.setQuad(H,N,H+I,N+B,p.roundPixels),$=a.getTintAppendFloatAlpha,K=p.alpha,j=$(g.tintTopLeft,K*g._alphaTL),Z=$(g.tintTopRight,K*g._alphaTR),J=$(g.tintBottomLeft,K*g._alphaBL),Q=$(g.tintBottomRight,K*g._alphaBR);this.shouldFlush(6)&&this.flush();var _=this.setGameObject(g,P);this.manager.preBatch(g),this.batchQuad(g,W[0],W[1],W[2],W[3],W[4],W[5],W[6],W[7],R,A,O,F,j,Z,J,Q,g.tintFill,w,_),this.manager.postBatch(g)},batchTexture:function(g,p,x,T,E,M,P,w,R,A,O,F,b,D,I,B,z,Y,X,H,N,U,L,G,V,k,W,$,K,j,Z,J){this.manager.set(this,g);var Q=this._tempMatrix1,_=this._tempMatrix2,q=this._tempMatrix3,et=Y/x+W,rt=X/T+$,ot=(Y+H)/x+W,ht=(X+N)/T+$,tt=P,at=w,nt=-B,pt=-z;if(g.isCropped){var vt=g._crop,Lt=vt.width,wt=vt.height;tt=Lt,at=wt,P=Lt,w=wt,Y=vt.x,X=vt.y;var Tt=Y,mt=X;F&&(Tt=H-vt.x-Lt),b&&(mt=N-vt.y-wt),et=Tt/x+W,rt=mt/T+$,ot=(Tt+Lt)/x+W,ht=(mt+wt)/T+$,nt=-B+Y,pt=-z+X}b=b^(!Z&&p.isRenderTexture?1:0),F&&(tt*=-1,nt+=P),b&&(at*=-1,pt+=w),_.applyITRS(E,M,O,R,A),Q.copyFrom(K.matrix),j?(Q.multiplyWithOffset(j,-K.scrollX*D,-K.scrollY*I),_.e=E,_.f=M):(_.e-=K.scrollX*D,_.f-=K.scrollY*I),Q.multiply(_,q);var Rt=q.setQuad(nt,pt,nt+tt,pt+at,K.roundPixels);J===void 0&&(J=this.setTexture2D(p)),g&&this.manager.preBatch(g),this.batchQuad(g,Rt[0],Rt[1],Rt[2],Rt[3],Rt[4],Rt[5],Rt[6],Rt[7],et,rt,ot,ht,U,L,G,V,k,p,J),g&&this.manager.postBatch(g)},batchTextureFrame:function(g,p,x,T,E,M,P){this.manager.set(this);var w=this._tempMatrix1.copyFrom(M),R=this._tempMatrix2;P?w.multiply(P,R):R=w;var A=R.setQuad(p,x,p+g.width,x+g.height,!1),O=this.setTexture2D(g.source.glTexture);T=a.getTintAppendFloatAlpha(T,E),this.batchQuad(null,A[0],A[1],A[2],A[3],A[4],A[5],A[6],A[7],g.u0,g.v0,g.u1,g.v1,T,T,T,T,0,g.glTexture,O)},batchFillRect:function(g,p,x,T,E,M){this.renderer.pipelines.set(this);var P=this.calcMatrix;M&&M.multiply(E,P);var w=P.setQuad(g,p,g+x,p+T,!1),R=this.fillTint;this.batchQuad(null,w[0],w[1],w[2],w[3],w[4],w[5],w[6],w[7],0,0,1,1,R.TL,R.TR,R.BL,R.BR,2)},batchFillTriangle:function(g,p,x,T,E,M,P,w){this.renderer.pipelines.set(this);var R=this.calcMatrix;w&&w.multiply(P,R);var A=R.getX(g,p),O=R.getY(g,p),F=R.getX(x,T),b=R.getY(x,T),D=R.getX(E,M),I=R.getY(E,M),B=this.fillTint;this.batchTri(null,A,O,F,b,D,I,0,0,1,1,B.TL,B.TR,B.BL,2)},batchStrokeTriangle:function(g,p,x,T,E,M,P,w,R){var A=this.tempTriangle;A[0].x=g,A[0].y=p,A[0].width=P,A[1].x=x,A[1].y=T,A[1].width=P,A[2].x=E,A[2].y=M,A[2].width=P,A[3].x=g,A[3].y=p,A[3].width=P,this.batchStrokePath(A,P,!1,w,R)},batchFillPath:function(g,p,x){this.renderer.pipelines.set(this);var T=this.calcMatrix;x&&x.multiply(p,T);for(var E=g.length,M=this.polygonCache,P,w,R=this.fillTint.TL,A=this.fillTint.TR,O=this.fillTint.BL,F=0;F<E;++F)w=g[F],M.push(w.x,w.y);P=m(M),E=P.length;for(var b=0;b<E;b+=3){var D=P[b+0]*2,I=P[b+1]*2,B=P[b+2]*2,z=M[D+0],Y=M[D+1],X=M[I+0],H=M[I+1],N=M[B+0],U=M[B+1],L=T.getX(z,Y),G=T.getY(z,Y),V=T.getX(X,H),k=T.getY(X,H),W=T.getX(N,U),$=T.getY(N,U);this.batchTri(null,L,G,V,k,W,$,0,0,1,1,R,A,O,2)}M.length=0},batchStrokePath:function(g,p,x,T,E){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var M=g.length-1,P=0;P<M;P++){var w=g[P],R=g[P+1];this.batchLine(w.x,w.y,R.x,R.y,w.width/2,R.width/2,p,P,!x&&P===M-1,T,E)}},batchLine:function(g,p,x,T,E,M,P,w,R,A,O){this.renderer.pipelines.set(this);var F=this.calcMatrix;O&&O.multiply(A,F);var b=x-g,D=T-p,I=Math.sqrt(b*b+D*D);if(I!==0){var B=E*(T-p)/I,z=E*(g-x)/I,Y=M*(T-p)/I,X=M*(g-x)/I,H=x-Y,N=T-X,U=g-B,L=p-z,G=x+Y,V=T+X,k=g+B,W=p+z,$=F.getX(H,N),K=F.getY(H,N),j=F.getX(U,L),Z=F.getY(U,L),J=F.getX(G,V),Q=F.getY(G,V),_=F.getX(k,W),q=F.getY(k,W),et=this.strokeTint,rt=et.TL,ot=et.TR,ht=et.BL,tt=et.BR;if(this.batchQuad(null,_,q,j,Z,$,K,J,Q,0,0,1,1,rt,ot,ht,tt,2),!(P<=2)){var at=this.prevQuad,nt=this.firstQuad;w>0&&at[4]?this.batchQuad(null,_,q,j,Z,at[0],at[1],at[2],at[3],0,0,1,1,rt,ot,ht,tt,2):(nt[0]=_,nt[1]=q,nt[2]=j,nt[3]=Z,nt[4]=1),R&&nt[4]?this.batchQuad(null,$,K,J,Q,nt[0],nt[1],nt[2],nt[3],0,0,1,1,rt,ot,ht,tt,2):(at[0]=$,at[1]=K,at[2]=J,at[3]=Q,at[4]=1)}}},destroy:function(){return this._tempMatrix1.destroy(),this._tempMatrix2.destroy(),this._tempMatrix3.destroy(),this._tempMatrix1=null,this._tempMatrix1=null,this._tempMatrix1=null,o.prototype.destroy.call(this),this}});r.exports=v}),10919:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(72632),d=e(83327),l=e(54677),h=e(44775),n=new u({Extends:h,initialize:function(c){c.vertShader=m(c,"vertShader",l),c.fragShader=m(c,"fragShader",d),c.attributes=m(c,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),h.call(this,c)},onRender:function(a,c){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",c.zoom)},batchPointLight:function(a,c,o,v,g,p,x,T,E,M,P,w){var R=a.color,A=a.intensity,O=a.radius,F=a.attenuation,b=R.r*A,D=R.g*A,I=R.b*A,B=c.alpha*a.alpha;this.shouldFlush(6)&&this.flush(),this.currentBatch||this.setTexture2D(),this.batchLightVert(o,v,P,w,O,F,b,D,I,B),this.batchLightVert(g,p,P,w,O,F,b,D,I,B),this.batchLightVert(x,T,P,w,O,F,b,D,I,B),this.batchLightVert(o,v,P,w,O,F,b,D,I,B),this.batchLightVert(x,T,P,w,O,F,b,D,I,B),this.batchLightVert(E,M,P,w,O,F,b,D,I,B),this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchLightVert:function(a,c,o,v,g,p,x,T,E,M){var P=this.vertexViewF32,w=this.vertexCount*this.currentShader.vertexComponentCount-1;P[++w]=a,P[++w]=c,P[++w]=o,P[++w]=v,P[++w]=g,P[++w]=p,P[++w]=x,P[++w]=T,P[++w]=E,P[++w]=M,this.vertexCount++}});r.exports=n}),80486:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(65246),d=e(72632),l=e(12569),h=e(99365),n=e(44775),a=new u({Extends:n,initialize:function(o){o.renderTarget=d(o,"renderTarget",1),o.fragShader=d(o,"fragShader",l),o.vertShader=d(o,"vertShader",h),o.attributes=d(o,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),o.batchSize=1,o.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],n.call(this,o),this.isPostFX=!0,this.gameObject,this.controller,this.colorMatrix=new m,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){n.prototype.boot.call(this);var c=this.manager.UTILITY_PIPELINE;this.fullFrame1=c.fullFrame1,this.fullFrame2=c.fullFrame2,this.halfFrame1=c.halfFrame1,this.halfFrame2=c.halfFrame2,this.set1i("uMainSampler",0)},onDraw:function(c){this.bindAndDraw(c)},getController:function(c){return c!==void 0?c:this.controller?this.controller:this},copySprite:function(c,o,v){v===void 0&&(v=!1);var g=this.gl;g.activeTexture(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,c.texture);var p=g.getParameter(g.FRAMEBUFFER_BINDING);g.bindFramebuffer(g.FRAMEBUFFER,o.framebuffer),g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,o.texture,0),g.clearColor(0,0,0,0),g.clear(g.COLOR_BUFFER_BIT),g.bufferData(g.ARRAY_BUFFER,this.vertexData,g.STATIC_DRAW),g.drawArrays(g.TRIANGLES,0,6),v&&(g.bindTexture(g.TEXTURE_2D,null),g.bindFramebuffer(g.FRAMEBUFFER,p))},copyFrame:function(c,o,v,g,p){this.manager.copyFrame(c,o,v,g,p)},copyToGame:function(c){this.manager.copyToGame(c)},drawFrame:function(c,o,v){this.manager.drawFrame(c,o,v,this.colorMatrix)},blendFrames:function(c,o,v,g,p){this.manager.blendFrames(c,o,v,g,p)},blendFramesAdditive:function(c,o,v,g,p){this.manager.blendFramesAdditive(c,o,v,g,p)},clearFrame:function(c,o){this.manager.clearFrame(c,o)},blitFrame:function(c,o,v,g,p,x){this.manager.blitFrame(c,o,v,g,p,x)},copyFrameRect:function(c,o,v,g,p,x,T,E){this.manager.copyFrameRect(c,o,v,g,p,x,T,E)},bindAndDraw:function(c,o,v,g,p){v===void 0&&(v=!0),g===void 0&&(g=!0);var x=this.gl,T=this.renderer;this.bind(p),this.set1i("uMainSampler",0),o?(x.viewport(0,0,o.width,o.height),x.bindFramebuffer(x.FRAMEBUFFER,o.framebuffer),x.framebufferTexture2D(x.FRAMEBUFFER,x.COLOR_ATTACHMENT0,x.TEXTURE_2D,o.texture,0),v&&(g?x.clearColor(0,0,0,0):x.clearColor(0,0,0,1),x.clear(x.COLOR_BUFFER_BIT))):(T.popFramebuffer(!1,!1),T.currentFramebuffer||x.viewport(0,0,T.width,T.height)),T.restoreStencilMask(),x.activeTexture(x.TEXTURE0),x.bindTexture(x.TEXTURE_2D,c.texture),x.bufferData(x.ARRAY_BUFFER,this.vertexData,x.STATIC_DRAW),x.drawArrays(x.TRIANGLES,0,6),o&&(x.bindTexture(x.TEXTURE_2D,null),x.bindFramebuffer(x.FRAMEBUFFER,T.currentFramebuffer))},destroy:function(){return this.controller&&this.controller.destroy(),this.gameObject=null,this.controller=null,this.colorMatrix=null,this.fullFrame1=null,this.fullFrame2=null,this.halfFrame1=null,this.halfFrame2=null,n.prototype.destroy.call(this),this}});r.exports=a}),87228:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(95723),m=e(79993),d=e(56694),l=e(37486),h=e(72632),n=e(77310),a=e(12569),c=e(74118),o=e(37410),v=e(85060),g=e(18166),p=e(44775),x=new d({Extends:n,initialize:function(E){var M=h(E,"fragShader",a),P=h(E,"vertShader",g),w=h(E,"drawShader",a),R=[{name:"DrawSprite",fragShader:v,vertShader:g},{name:"CopySprite",fragShader:M,vertShader:P},{name:"DrawGame",fragShader:w,vertShader:g},{name:"ColorMatrix",fragShader:l}],A=h(E,"shaders",[]);E.shaders=R.concat(A),E.vertShader||(E.vertShader=P),E.batchSize=1,n.call(this,E),this.isPreFX=!0,this.customMainSampler=null,this.drawSpriteShader,this.copyShader,this.gameShader,this.colorMatrixShader,this.quadVertexData,this.quadVertexBuffer,this.quadVertexViewF32,this.spriteBounds=new c,this.targetBounds=new c,this.fsTarget,this.tempSprite,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){p.prototype.boot.call(this);var T=this.shaders,E=this.renderer;this.drawSpriteShader=T[0],this.copyShader=T[1],this.gameShader=T[2],this.colorMatrixShader=T[3],this.fsTarget=new o(E,E.width,E.height,1,0,!0,!0),this.renderTargets=this.manager.renderTargets.concat(this.fsTarget);var M=new ArrayBuffer(168);this.quadVertexData=M,this.quadVertexViewF32=new Float32Array(M),this.quadVertexBuffer=E.createVertexBuffer(M,this.gl.STATIC_DRAW),this.onResize(E.width,E.height),this.currentShader=this.copyShader},onResize:function(T,E){var M=this.quadVertexViewF32;M[1]=E,M[22]=E,M[14]=T,M[28]=T,M[35]=T,M[36]=E},batchQuad:function(T,E,M,P,w,R,A,O,F,b,D,I,B,z,Y,X,H,N,U){var L=Math.min(E,P,R,O),G=Math.min(M,w,A,F),V=Math.max(E,P,R,O),k=Math.max(M,w,A,F),W=V-L,$=k-G,K=this.spriteBounds.setTo(L,G,W,$),j=T?T.preFX.padding:0,Z=W+j*2,J=$+j*2,Q=Math.abs(Math.max(Z,J)),_=this.manager.getRenderTarget(Q),q=this.targetBounds.setTo(0,0,_.width,_.height);m(q,K.centerX,K.centerY),this.tempSprite=T;var et=this.gl,rt=this.renderer;rt.clearStencilMask(),this.setShader(this.drawSpriteShader),this.set1i("uMainSampler",0),this.flipProjectionMatrix(!0),T&&(this.onDrawSprite(T,_),T.preFX.onFX(this));var ot=this.fsTarget;return this.flush(),et.viewport(0,0,rt.width,rt.height),et.bindFramebuffer(et.FRAMEBUFFER,ot.framebuffer),et.framebufferTexture2D(et.FRAMEBUFFER,et.COLOR_ATTACHMENT0,et.TEXTURE_2D,ot.texture,0),et.clearColor(0,0,0,0),et.clear(et.COLOR_BUFFER_BIT),this.setTexture2D(U),this.batchVert(E,M,b,D,0,N,z),this.batchVert(P,w,b,B,0,N,X),this.batchVert(R,A,I,B,0,N,H),this.batchVert(E,M,b,D,0,N,z),this.batchVert(R,A,I,B,0,N,H),this.batchVert(O,F,I,D,0,N,Y),this.flush(),this.flipProjectionMatrix(!1),et.activeTexture(et.TEXTURE0),et.bindTexture(et.TEXTURE_2D,_.texture),et.copyTexSubImage2D(et.TEXTURE_2D,0,0,0,q.x,q.y,q.width,q.height),et.bindFramebuffer(et.FRAMEBUFFER,null),et.bindTexture(et.TEXTURE_2D,null),this.onBatch(T),this.currentShader=this.copyShader,this.onDraw(_,this.manager.getSwapRenderTarget(),this.manager.getAltSwapRenderTarget()),!0},onDrawSprite:function(){},onCopySprite:function(){},copySprite:function(T,E,M,P,w,R,A){M===void 0&&(M=!0),P===void 0&&(P=!0),w===void 0&&(w=!1),A===void 0&&(A=this.copyShader);var O=this.gl,F=this.tempSprite;R&&(A=this.colorMatrixShader),this.currentShader=A;var b=this.setVertexBuffer(this.quadVertexBuffer);if(A.bind(b,!1),this.set1i("uMainSampler",0),F.preFX.onFXCopy(this),this.onCopySprite(T,E,F),R&&(this.set1fv("uColorMatrix",R.getData()),this.set1f("uAlpha",R.alpha)),O.activeTexture(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,T.texture),T.height>E.height)O.viewport(0,0,T.width,T.height),this.setTargetUVs(T,E);else{var D=E.height-T.height;O.viewport(0,D,T.width,T.height),this.resetUVs()}if(O.bindFramebuffer(O.FRAMEBUFFER,E.framebuffer),O.framebufferTexture2D(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,O.TEXTURE_2D,E.texture,0),M&&(O.clearColor(0,0,0,+!P),O.clear(O.COLOR_BUFFER_BIT)),w){var I=this.renderer.currentBlendMode;this.renderer.setBlendMode(u.ERASE)}O.bufferData(O.ARRAY_BUFFER,this.quadVertexData,O.STATIC_DRAW),O.drawArrays(O.TRIANGLES,0,6),w&&this.renderer.setBlendMode(I),O.bindFramebuffer(O.FRAMEBUFFER,null)},copy:function(T,E){var M=this.gl;this.set1i("uMainSampler",0),M.activeTexture(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,T.texture),M.viewport(0,0,T.width,T.height),this.setUVs(0,0,0,1,1,1,1,0),M.bindFramebuffer(M.FRAMEBUFFER,E.framebuffer),M.framebufferTexture2D(M.FRAMEBUFFER,M.COLOR_ATTACHMENT0,M.TEXTURE_2D,E.texture,0),M.clearColor(0,0,0,0),M.clear(M.COLOR_BUFFER_BIT),M.bufferData(M.ARRAY_BUFFER,this.quadVertexData,M.STATIC_DRAW),M.drawArrays(M.TRIANGLES,0,6),M.bindFramebuffer(M.FRAMEBUFFER,null)},blendFrames:function(T,E,M,P,w){this.manager.blendFrames(T,E,M,P,w)},blendFramesAdditive:function(T,E,M,P,w){this.manager.blendFramesAdditive(T,E,M,P,w)},drawToGame:function(T){this.currentShader=null,this.setShader(this.copyShader),this.bindAndDraw(T)},copyToGame:function(T){this.currentShader=null,this.setShader(this.gameShader),this.bindAndDraw(T)},bindAndDraw:function(T){var E=this.gl,M=this.renderer;this.set1i("uMainSampler",0),this.customMainSampler?this.setTexture2D(this.customMainSampler):this.setTexture2D(T.texture);var P=this._tempMatrix1.loadIdentity(),w=this.targetBounds.x,R=this.targetBounds.y,A=w+T.width,O=R+T.height,F=P.getX(w,R),b=P.getX(w,O),D=P.getX(A,O),I=P.getX(A,R),B=P.getY(w,R),z=P.getY(w,O),Y=P.getY(A,O),X=P.getY(A,R),H=16777215;this.batchVert(F,B,0,0,0,0,H),this.batchVert(b,z,0,1,0,0,H),this.batchVert(D,Y,1,1,0,0,H),this.batchVert(F,B,0,0,0,0,H),this.batchVert(D,Y,1,1,0,0,H),this.batchVert(I,X,1,0,0,0,H),M.restoreFramebuffer(!1,!0),M.currentFramebuffer||E.viewport(0,0,M.width,M.height),M.restoreStencilMask(),this.flush(),this.tempSprite=null},onDraw:function(T){this.drawToGame(T)},setUVs:function(T,E,M,P,w,R,A,O){var F=this.quadVertexViewF32;F[2]=T,F[3]=E,F[9]=M,F[10]=P,F[16]=w,F[17]=R,F[23]=T,F[24]=E,F[30]=w,F[31]=R,F[37]=A,F[38]=O},setTargetUVs:function(T,E){var M=E.height/T.height;M>.5?M=.5-(M-.5):M=.5+(.5-M),this.setUVs(0,M,0,1+M,1,1+M,1,M)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)},destroy:function(){return this.gl.deleteBuffer(this.quadVertexBuffer),this.drawSpriteShader=null,this.copyShader=null,this.gameShader=null,this.colorMatrixShader=null,this.quadVertexData=null,this.quadVertexBuffer=null,this.quadVertexViewF32=null,this.fsTarget=null,this.tempSprite=null,n.prototype.destroy.call(this),this}});r.exports=x}),21213:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(72632),d=e(77310),l=new u({Extends:d,initialize:function(n){n.topology=5,n.batchSize=m(n,"batchSize",256),d.call(this,n)}});r.exports=l}),51212:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(72632),d=e(77310),l=e(85060),h=e(18166),n=e(44775),a=new u({Extends:d,initialize:function(o){o.fragShader=m(o,"fragShader",l),o.vertShader=m(o,"vertShader",h),o.forceZero=!0,d.call(this,o)},boot:function(){n.prototype.boot.call(this),this.set1i("uMainSampler",0)}});r.exports=a}),60848:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(2529),m=e(95723),d=e(56694),l=e(65246),h=e(37486),n=e(79060),a=e(72632),c=e(98921),o=e(99365),v=e(44775),g=new d({Extends:v,initialize:function(x){x.renderTarget=a(x,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),x.vertShader=a(x,"vertShader",o),x.shaders=a(x,"shaders",[{name:"Copy",fragShader:n},{name:"AddBlend",fragShader:u},{name:"LinearBlend",fragShader:c},{name:"ColorMatrix",fragShader:h}]),x.attributes=a(x,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),x.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],x.batchSize=1,v.call(this,x),this.colorMatrix=new l,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){v.prototype.boot.call(this);var p=this.shaders,x=this.renderTargets;this.copyShader=p[0],this.addShader=p[1],this.linearShader=p[2],this.colorMatrixShader=p[3],this.fullFrame1=x[0],this.fullFrame2=x[1],this.halfFrame1=x[2],this.halfFrame2=x[3]},copyFrame:function(p,x,T,E,M){T===void 0&&(T=1),E===void 0&&(E=!0),M===void 0&&(M=!0);var P=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",T),P.activeTexture(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,p.texture),x?(P.viewport(0,0,x.width,x.height),P.bindFramebuffer(P.FRAMEBUFFER,x.framebuffer),P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,x.texture,0)):P.viewport(0,0,p.width,p.height),E&&(M?P.clearColor(0,0,0,0):P.clearColor(0,0,0,1),P.clear(P.COLOR_BUFFER_BIT)),P.bufferData(P.ARRAY_BUFFER,this.vertexData,P.STATIC_DRAW),P.drawArrays(P.TRIANGLES,0,6),P.bindFramebuffer(P.FRAMEBUFFER,null),P.bindTexture(P.TEXTURE_2D,null)},blitFrame:function(p,x,T,E,M,P,w){T===void 0&&(T=1),E===void 0&&(E=!0),M===void 0&&(M=!0),P===void 0&&(P=!1),w===void 0&&(w=!1);var R=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",T),R.activeTexture(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,p.texture),p.height>x.height)R.viewport(0,0,p.width,p.height),this.setTargetUVs(p,x);else{var A=x.height-p.height;R.viewport(0,A,p.width,p.height)}if(R.bindFramebuffer(R.FRAMEBUFFER,x.framebuffer),R.framebufferTexture2D(R.FRAMEBUFFER,R.COLOR_ATTACHMENT0,R.TEXTURE_2D,x.texture,0),E&&(M?R.clearColor(0,0,0,0):R.clearColor(0,0,0,1),R.clear(R.COLOR_BUFFER_BIT)),P){var O=this.renderer.currentBlendMode;this.renderer.setBlendMode(m.ERASE)}w&&this.flipY(),R.bufferData(R.ARRAY_BUFFER,this.vertexData,R.STATIC_DRAW),R.drawArrays(R.TRIANGLES,0,6),P&&this.renderer.setBlendMode(O),R.bindFramebuffer(R.FRAMEBUFFER,null),R.bindTexture(R.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(p,x,T,E,M,P,w,R){w===void 0&&(w=!0),R===void 0&&(R=!0);var A=this.gl;A.bindFramebuffer(A.FRAMEBUFFER,p.framebuffer),A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,p.texture,0),w&&(R?A.clearColor(0,0,0,0):A.clearColor(0,0,0,1),A.clear(A.COLOR_BUFFER_BIT)),A.activeTexture(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,x.texture),A.copyTexSubImage2D(A.TEXTURE_2D,0,0,0,T,E,M,P),A.bindFramebuffer(A.FRAMEBUFFER,null),A.bindTexture(A.TEXTURE_2D,null)},copyToGame:function(p){var x=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),x.activeTexture(x.TEXTURE0),x.bindTexture(x.TEXTURE_2D,p.texture),x.bufferData(x.ARRAY_BUFFER,this.vertexData,x.STATIC_DRAW),x.drawArrays(x.TRIANGLES,0,6)},drawFrame:function(p,x,T,E){T===void 0&&(T=!0),E===void 0&&(E=this.colorMatrix);var M=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",E.getData()),this.set1f("uAlpha",E.alpha),M.activeTexture(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,p.texture),x?(M.viewport(0,0,x.width,x.height),M.bindFramebuffer(M.FRAMEBUFFER,x.framebuffer),M.framebufferTexture2D(M.FRAMEBUFFER,M.COLOR_ATTACHMENT0,M.TEXTURE_2D,x.texture,0)):M.viewport(0,0,p.width,p.height),T?M.clearColor(0,0,0,0):M.clearColor(0,0,0,1),M.clear(M.COLOR_BUFFER_BIT),M.bufferData(M.ARRAY_BUFFER,this.vertexData,M.STATIC_DRAW),M.drawArrays(M.TRIANGLES,0,6),M.bindFramebuffer(M.FRAMEBUFFER,null),M.bindTexture(M.TEXTURE_2D,null)},blendFrames:function(p,x,T,E,M,P){E===void 0&&(E=1),M===void 0&&(M=!0),P===void 0&&(P=this.linearShader);var w=this.gl;this.setShader(P),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",E),w.activeTexture(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,p.texture),w.activeTexture(w.TEXTURE1),w.bindTexture(w.TEXTURE_2D,x.texture),T?(w.bindFramebuffer(w.FRAMEBUFFER,T.framebuffer),w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_2D,T.texture,0),w.viewport(0,0,T.width,T.height)):w.viewport(0,0,p.width,p.height),M?w.clearColor(0,0,0,0):w.clearColor(0,0,0,1),w.clear(w.COLOR_BUFFER_BIT),w.bufferData(w.ARRAY_BUFFER,this.vertexData,w.STATIC_DRAW),w.drawArrays(w.TRIANGLES,0,6),w.bindFramebuffer(w.FRAMEBUFFER,null),w.bindTexture(w.TEXTURE_2D,null)},blendFramesAdditive:function(p,x,T,E,M){this.blendFrames(p,x,T,E,M,this.addShader)},clearFrame:function(p,x){x===void 0&&(x=!0);var T=this.gl;T.viewport(0,0,p.width,p.height),T.bindFramebuffer(T.FRAMEBUFFER,p.framebuffer),x?T.clearColor(0,0,0,0):T.clearColor(0,0,0,1),T.clear(T.COLOR_BUFFER_BIT);var E=this.renderer.currentFramebuffer;T.bindFramebuffer(T.FRAMEBUFFER,E)},setUVs:function(p,x,T,E,M,P,w,R){var A=this.vertexViewF32;A[2]=p,A[3]=x,A[6]=T,A[7]=E,A[10]=M,A[11]=P,A[14]=p,A[15]=x,A[18]=M,A[19]=P,A[22]=w,A[23]=R},setTargetUVs:function(p,x){var T=x.height/p.height;T>.5?T=.5-(T-.5):T=.5+(.5-T),this.setUVs(0,T,0,1+T,1,1+T,1,T)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});r.exports=g}),65641:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline",MOBILE_PIPELINE:"MobilePipeline",FX_PIPELINE:"FxPipeline"};r.exports=y}),68726:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pipelineafterflush"}),67186:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pipelinebeforeflush"}),22709:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pipelinebind"}),74469:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pipelineboot"}),93953:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pipelinedestroy"}),51687:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pipelinerebind"}),25034:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pipelineresize"}),18970:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={AFTER_FLUSH:e(68726),BEFORE_FLUSH:e(67186),BIND:e(22709),BOOT:e(74469),DESTROY:e(93953),REBIND:e(51687),RESIZE:e(25034)}}),32469:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(87751),d=e(80486),l=new u({Extends:d,initialize:function(n){d.call(this,{game:n,fragShader:m}),this.amount=1},onPreRender:function(h,n){h=this.getController(h),this.set1f("amount",h.amount,n)}});r.exports=l}),2134:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(88222),d=e(80486),l=new u({Extends:d,initialize:function(n){d.call(this,{game:n,fragShader:m}),this.steps=4,this.offsetX=1,this.offsetY=1,this.blurStrength=1,this.strength=1,this.glcolor=[1,1,1]},onPreRender:function(h){h=this.getController(h),this.set1f("strength",h.blurStrength),this.set3fv("color",h.glcolor)},onDraw:function(h){var n=this.getController(),a=this.fullFrame1,c=this.fullFrame2;this.copyFrame(h,c);for(var o=2/h.width*n.offsetX,v=2/h.height*n.offsetY,g=0;g<n.steps;g++)this.set2f("offset",o,0),this.copySprite(h,a),this.set2f("offset",0,v),this.copySprite(a,h);this.blendFrames(c,h,a,n.strength),this.copyToGame(a)}});r.exports=l}),63377:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(35491),d=e(75568),l=e(44481),h=e(80486),n=new u({Extends:h,initialize:function(c){h.call(this,{game:c,shaders:[{name:"Gaussian5",fragShader:m},{name:"Gaussian9",fragShader:d},{name:"Gaussian13",fragShader:l}]}),this.activeShader=this.shaders[0],this.x=2,this.y=2,this.steps=4,this.strength=1,this.glcolor=[1,1,1]},setQualityLow:function(){return this.activeShader=this.shaders[0],this},setQualityMedium:function(){return this.activeShader=this.shaders[1],this},setQualityHigh:function(){return this.activeShader=this.shaders[2],this},onDraw:function(a){var c=this.getController(),o=this.gl,v=this.fullFrame1,g=o.getParameter(o.FRAMEBUFFER_BINDING);this.bind(this.activeShader),o.activeTexture(o.TEXTURE0),o.viewport(0,0,a.width,a.height),this.set1i("uMainSampler",0),this.set2f("resolution",a.width,a.height),this.set1f("strength",c.strength),this.set3fv("color",c.glcolor);for(var p=0;p<c.steps;p++)this.set2f("offset",c.x,0),this.copySprite(a,v),this.set2f("offset",0,c.y),this.copySprite(v,a);o.bindFramebuffer(o.FRAMEBUFFER,g),o.bindTexture(o.TEXTURE_2D,null),this.copyToGame(a)}});r.exports=n}),49745:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(69960),d=e(80486),l=new u({Extends:d,initialize:function(n){d.call(this,{game:n,fragShader:m}),this.isTiltShift=!1,this.strength=1,this.blurX=1,this.blurY=1,this.radius=.5,this.amount=1,this.contrast=.2},onPreRender:function(h,n,a,c){h=this.getController(h),this.set1f("radius",h.radius,n),this.set1f("amount",h.amount,n),this.set1f("contrast",h.contrast,n),this.set1f("strength",h.strength,n),this.set2f("blur",h.blurX,h.blurY,n),this.setBoolean("isTiltShift",h.isTiltShift,n),a&&c&&this.set2f("resolution",a,c,n)},onDraw:function(h){this.set2f("resolution",h.width,h.height),this.bindAndDraw(h)}});r.exports=l}),4323:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(33754),d=e(80486),l=new u({Extends:d,initialize:function(n){d.call(this,{game:n,fragShader:m}),this.scale=1,this.feather=.005,this.thickness=8,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4]},onPreRender:function(h,n,a,c){h=this.getController(h),this.set1f("scale",h.scale,n),this.set1f("feather",h.feather,n),this.set1f("thickness",h.thickness,n),this.set3fv("color",h.glcolor,n),this.set4fv("backgroundColor",h.glcolor2,n),a&&c&&this.set2f("resolution",a,c,n)},onDraw:function(h){this.set2f("resolution",h.width,h.height),this.bindAndDraw(h)}});r.exports=l}),92066:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(80486),d=new u({Extends:m,initialize:function(h){m.call(this,{game:h})},onDraw:function(l){var h=this.fullFrame1;this.controller?this.manager.drawFrame(l,h,!0,this.controller):this.drawFrame(l,h),this.copyToGame(h)}});r.exports=d}),89581:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(35668),d=e(80486),l=new u({Extends:d,initialize:function(n){d.call(this,{game:n,fragShader:m}),this.x=.005,this.y=.005,this.glTexture},onBoot:function(){this.setTexture("__WHITE")},setTexture:function(h){var n=this.game.textures.getFrame(h);n&&(this.glTexture=n.glTexture)},onDraw:function(h){var n=this.getController(),a=this.fullFrame1;this.bind(),this.set1i("uMainSampler",0),this.set1i("uDisplacementSampler",1),this.set2f("amount",n.x,n.y),this.bindTexture(n.glTexture,1),this.copySprite(h,a),this.copyToGame(a)}});r.exports=l}),55084:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(72632),d=e(69675),l=e(80486),h=e(75512),n=new u({Extends:l,initialize:function(c,o){var v=m(o,"quality",.1),g=m(o,"distance",10);l.call(this,{game:c,fragShader:h.setGlowQuality(d,c,v,g)}),this.outerStrength=4,this.innerStrength=0,this.knockout=!1,this.glcolor=[1,1,1,1]},onPreRender:function(a,c,o,v){a=this.getController(a),this.set1f("outerStrength",a.outerStrength,c),this.set1f("innerStrength",a.innerStrength,c),this.set4fv("glowColor",a.glcolor,c),this.setBoolean("knockout",a.knockout,c),o&&v&&this.set2f("resolution",o,v,c)},onDraw:function(a){this.set2f("resolution",a.width,a.height),this.bindAndDraw(a)}});r.exports=n}),41653:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(90993),d=e(80486),l=new u({Extends:d,initialize:function(n){d.call(this,{game:n,fragShader:m}),this.alpha=.2,this.size=0,this.fromX=0,this.fromY=0,this.toX=0,this.toY=1,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0]},onPreRender:function(h,n){h=this.getController(h),this.set1f("alpha",h.alpha,n),this.set1i("size",h.size,n),this.set3fv("color1",h.glcolor1,n),this.set3fv("color2",h.glcolor2,n),this.set2f("positionFrom",h.fromX,h.fromY,n),this.set2f("positionTo",h.toX,h.toY,n)}});r.exports=l}),73416:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(37945),d=e(80486),l=new u({Extends:d,initialize:function(n){d.call(this,{game:n,fragShader:m}),this.amount=1},onPreRender:function(h,n,a,c){h=this.getController(h),this.set1f("amount",h.amount,n),a&&c&&this.set2f("resolution",a,c,n)},onDraw:function(h){this.set2f("resolution",h.width,h.height),this.bindAndDraw(h)}});r.exports=l}),58049:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(85718),d=e(80486),l=new u({Extends:d,initialize:function(n){d.call(this,{game:n,fragShader:m}),this.x=0,this.y=0,this.decay=.1,this.power=1,this.glcolor=[0,0,0,1],this.samples=6,this.intensity=1},onPreRender:function(h,n){h=this.getController(h);var a=h.samples;this.set1i("samples",a,n),this.set1f("intensity",h.intensity,n),this.set1f("decay",h.decay,n),this.set1f("power",h.power/a,n),this.set2f("lightPosition",h.x,h.y,n),this.set4fv("color",h.glcolor,n)}});r.exports=l}),18026:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(13740),d=e(80486),l=new u({Extends:d,initialize:function(n){d.call(this,{game:n,fragShader:m}),this.speed=.5,this.lineWidth=.5,this.gradient=3,this.reveal=!1},onPreRender:function(h,n,a,c){h=this.getController(h),this.setTime("time",n),this.set1f("speed",h.speed,n),this.set1f("lineWidth",h.lineWidth,n),this.set1f("gradient",h.gradient,n),this.setBoolean("reveal",h.reveal,n),a&&c&&this.set2f("resolution",a,c,n)},onDraw:function(h){this.set2f("resolution",h.width,h.height),this.bindAndDraw(h)}});r.exports=l}),72381:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(80617),d=e(80486),l=new u({Extends:d,initialize:function(n){d.call(this,{game:n,fragShader:m}),this.x=.5,this.y=.5,this.radius=.5,this.strength=.5},onPreRender:function(h,n){h=this.getController(h),this.set1f("radius",h.radius,n),this.set1f("strength",h.strength,n),this.set2f("position",h.x,h.y,n)}});r.exports=l}),80542:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(62879),d=e(80486),l=new u({Extends:d,initialize:function(n){d.call(this,{game:n,fragShader:m}),this.progress=0,this.wipeWidth=.1,this.direction=0,this.axis=0,this.reveal=!1},onPreRender:function(h,n){h=this.getController(h);var a=h.progress,c=h.wipeWidth,o=h.direction,v=h.axis;this.set4f("config",a,c,o,v,n),this.setBoolean("reveal",h.reveal,n)}});r.exports=l}),58136:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u={Barrel:e(32469),Bloom:e(2134),Blur:e(63377),Bokeh:e(49745),Circle:e(4323),ColorMatrix:e(92066),Displacement:e(89581),Glow:e(55084),Gradient:e(41653),Pixelate:e(73416),Shadow:e(58049),Shine:e(18026),Vignette:e(72381),Wipe:e(80542)};r.exports=u}),62253:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(65641),m=e(98611),d={FX:e(58136),BitmapMaskPipeline:e(5583),Events:e(18970),FXPipeline:e(81828),LightPipeline:e(66901),MobilePipeline:e(71264),MultiPipeline:e(77310),PointLightPipeline:e(10919),PostFXPipeline:e(80486),PreFXPipeline:e(87228),RopePipeline:e(21213),SinglePipeline:e(51212),UtilityPipeline:e(60848)};d=m(!1,d,u),r.exports=d}),2529:(r=>{r.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = frame1 + frame2 * uStrength;","}"].join(`
`)}),91679:(r=>{r.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","precision mediump float;","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    if (!uInvertMaskAlpha)","    {","        mainColor *= maskColor.a;","    }","    else","    {","        mainColor *= (1.0 - maskColor.a);","    }","    gl_FragColor = mainColor;","}"].join(`
`)}),89053:(r=>{r.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","precision mediump float;","attribute vec2 inPosition;","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}"].join(`
`)}),37486:(r=>{r.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","varying vec2 outTexCoord;","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","        return;","    }","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","    vec4 result;","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","    rgb *= result.a;","    gl_FragColor = vec4(rgb, result.a);","}"].join(`
`)}),79060:(r=>{r.exports=["#define SHADER_NAME PHASER_COPY_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uBrightness;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}"].join(`
`)}),87751:(r=>{r.exports=["#define SHADER_NAME BARREL_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float amount;","varying vec2 outTexCoord;","vec2 Distort(vec2 p)","{","    float theta  = atan(p.y, p.x);","    float radius = length(p);","    radius = pow(radius, amount);","    p.x = radius * cos(theta);","    p.y = radius * sin(theta);","    return 0.5 * (p + 1.0);","}","void main()","{","    vec2 xy = 2.0 * outTexCoord - 1.0;","    vec2 texCoord = outTexCoord;","    if (length(xy) < 1.0)","    {","        texCoord = Distort(xy);","    }","    gl_FragColor = texture2D(uMainSampler, texCoord);","}"].join(`
`)}),88222:(r=>{r.exports=["#define SHADER_NAME BLOOM_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec4 sum = texture2D(uMainSampler, outTexCoord) * 0.204164 * strength;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord - offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 3.294215) * 0.093913;","    gl_FragColor = (sum + texture2D(uMainSampler, outTexCoord - offset * 3.294215) * 0.093913) * vec4(color, 1);","}"].join(`
`)}),44481:(r=>{r.exports=["#define SHADER_NAME BLUR_HIGH_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.411764705882353) * offset * strength;","    vec2 off2 = vec2(3.2941176470588234) * offset * strength;","    vec2 off3 = vec2(5.176470588235294) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.1964825501511404;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv + (off3 / resolution)) * 0.010381362401148057;","    col += texture2D(uMainSampler, uv - (off3 / resolution)) * 0.010381362401148057;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)}),35491:(r=>{r.exports=["#define SHADER_NAME BLUR_LOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 offset = vec2(1.333) * strength;","    col += texture2D(uMainSampler, uv) * 0.29411764705882354;","    col += texture2D(uMainSampler, uv + (offset / resolution)) * 0.35294117647058826;","    col += texture2D(uMainSampler, uv - (offset / resolution)) * 0.35294117647058826;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)}),75568:(r=>{r.exports=["#define SHADER_NAME BLUR_MED_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.3846153846) * offset * strength;","    vec2 off2 = vec2(3.2307692308) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.2270270270;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.0702702703;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.0702702703;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)}),69960:(r=>{r.exports=["#define SHADER_NAME BOKEH_FS","precision mediump float;","#define ITERATIONS 100.0","#define ONEOVER_ITR 1.0 / ITERATIONS","#define PI 3.141596","#define GOLDEN_ANGLE 2.39996323","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float radius;","uniform float amount;","uniform float contrast;","uniform bool isTiltShift;","uniform float strength;","uniform vec2 blur;","varying vec2 outTexCoord;","vec2 Sample (in float theta, inout float r)","{","    r += 1.0 / r;","    return (r - 1.0) * vec2(cos(theta), sin(theta)) * 0.06;","}","vec3 Bokeh (sampler2D tex, vec2 uv, float radius)","{","    vec3 acc = vec3(0.0);","    vec3 div = vec3(0.0);","    vec2 pixel = vec2(resolution.y / resolution.x, 1.0) * radius * .025;","    float r = 1.0;","    for (float j = 0.0; j < GOLDEN_ANGLE * ITERATIONS; j += GOLDEN_ANGLE)","    {","        vec3 col = texture2D(tex, uv + pixel * Sample(j, r)).xyz;","        col = contrast > 0.0 ? col * col * (1.0 + contrast) : col;","        vec3 bokeh = vec3(0.5) + pow(col, vec3(10.0)) * amount;","        acc += col * bokeh;","        div += bokeh;","    }","    return acc / div;","}","void main ()","{","    float shift = 1.0;","    if (isTiltShift)","    {","        vec2 uv = vec2(gl_FragCoord.xy / resolution + vec2(-0.5, -0.5)) * 2.0;","        float centerStrength = 1.0;","        shift = length(uv * blur * strength) * centerStrength;","    }","    gl_FragColor = vec4(Bokeh(uMainSampler, outTexCoord * vec2(1.0, 1.0), radius * shift), 0.0);","}"].join(`
`)}),33754:(r=>{r.exports=["#define SHADER_NAME CIRCLE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec3 color;","uniform vec4 backgroundColor;","uniform float thickness;","uniform float scale;","uniform float feather;","varying vec2 outTexCoord;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 position = (gl_FragCoord.xy / resolution.xy) * 2.0 - 1.0;","    float aspectRatio = resolution.x / resolution.y;","    position.x *= aspectRatio;","    float grad = length(position);","    float outer = aspectRatio;","    float inner = outer - (thickness * 2.0 / resolution.y);","    if (aspectRatio >= 1.0)","    {","        float f = 2.0 + (resolution.y / resolution.x);","        outer = 1.0;","        inner = 1.0 - (thickness * f / resolution.x);","    }","    outer *= scale;","    inner *= scale;","    float circle = smoothstep(outer, outer - 0.01, grad);","    float ring = circle - smoothstep(inner, inner - feather, grad);","    texture = mix(backgroundColor * backgroundColor.a, texture, texture.a);","    texture = (texture * (circle - ring));","    gl_FragColor = vec4(texture.rgb + (ring * color), texture.a);","}"].join(`
`)}),35668:(r=>{r.exports=["#define SHADER_NAME DISPLACEMENT_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform sampler2D uDisplacementSampler;","uniform vec2 amount;","varying vec2 outTexCoord;","void main ()","{","    vec2 disp = (-vec2(0.5, 0.5) + texture2D(uDisplacementSampler, outTexCoord).rr) * amount;","    gl_FragColor = texture2D(uMainSampler, outTexCoord + disp).rgba;","}"].join(`
`)}),69675:(r=>{r.exports=["#define SHADER_NAME GLOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform float outerStrength;","uniform float innerStrength;","uniform vec2 resolution;","uniform vec4 glowColor;","uniform bool knockout;","const float PI = 3.14159265358979323846264;","const float DIST = __DIST__;","const float SIZE = min(__SIZE__, PI * 2.0);","const float STEP = ceil(PI * 2.0 / SIZE);","const float MAX_ALPHA = STEP * DIST * (DIST + 1.0) / 2.0;","void main ()","{","    vec2 px = vec2(1.0 / resolution.x, 1.0 / resolution.y);","    float totalAlpha = 0.0;","    vec2 direction;","    vec2 displaced;","    vec4 color;","    for (float angle = 0.0; angle < PI * 2.0; angle += SIZE)","    {","        direction = vec2(cos(angle), sin(angle)) * px;","        for (float curDistance = 0.0; curDistance < DIST; curDistance++)","        {","            displaced = outTexCoord + direction * (curDistance + 1.0);","            color = texture2D(uMainSampler, displaced);","            totalAlpha += (DIST - curDistance) * color.a;","        }","    }","    color = texture2D(uMainSampler, outTexCoord);","    float alphaRatio = (totalAlpha / MAX_ALPHA);","    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * color.a;","    float innerGlowStrength = min(1.0, innerGlowAlpha);","    vec4 innerColor = mix(color, glowColor, innerGlowStrength);","    float outerGlowAlpha = alphaRatio * outerStrength * (1.0 - color.a);","    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);","    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;","    if (knockout)","    {","        float resultAlpha = outerGlowAlpha + innerGlowAlpha;","        gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);","    }","    else","    {","        gl_FragColor = innerColor + outerGlowColor;","    }","}"].join(`
`)}),90993:(r=>{r.exports=["#define SHADER_NAME GRADIENT_FS","#define SRGB_TO_LINEAR(c) pow((c), vec3(2.2))","#define LINEAR_TO_SRGB(c) pow((c), vec3(1.0 / 2.2))","#define SRGB(r, g, b) SRGB_TO_LINEAR(vec3(float(r), float(g), float(b)) / 255.0)","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 positionFrom;","uniform vec2 positionTo;","uniform vec3 color1;","uniform vec3 color2;","uniform float alpha;","uniform int size;","varying vec2 outTexCoord;","float gradientNoise(in vec2 uv)","{","    const vec3 magic = vec3(0.06711056, 0.00583715, 52.9829189);","    return fract(magic.z * fract(dot(uv, magic.xy)));","}","float stepped (in float s, in float scale, in int steps)","{","    return steps > 0 ? floor( s / ((1.0 * scale) / float(steps))) * 1.0 / float(steps - 1) : s;","}","void main ()","{","    vec2 a = positionFrom;","    vec2 b = positionTo;","    vec2 ba = b - a;","    float d = dot(outTexCoord - a, ba) / dot(ba, ba);","    float t = size > 0 ? stepped(d, 1.0, size) : d;","    t = smoothstep(0.0, 1.0, clamp(t, 0.0, 1.0));","    vec3 color = mix(SRGB(color1.r, color1.g, color1.b), SRGB(color2.r, color2.g, color2.b), t);","    color = LINEAR_TO_SRGB(color);","    color += (1.0 / 255.0) * gradientNoise(outTexCoord) - (0.5 / 255.0);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = vec4(mix(color.rgb, texture.rgb, alpha), 1.0) * texture.a;","}"].join(`
`)}),37945:(r=>{r.exports=["#define SHADER_NAME PIXELATE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float amount;","varying vec2 outTexCoord;","void main ()","{","    float pixelSize = floor(2.0 + amount);","    vec2 center = pixelSize * floor(outTexCoord * resolution / pixelSize) + pixelSize * vec2(0.5, 0.5);","    vec2 corner1 = center + pixelSize * vec2(-0.5, -0.5);","    vec2 corner2 = center + pixelSize * vec2(+0.5, -0.5);","    vec2 corner3 = center + pixelSize * vec2(+0.5, +0.5);","    vec2 corner4 = center + pixelSize * vec2(-0.5, +0.5);","    vec4 pixel = 0.4 * texture2D(uMainSampler, center / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner1 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner2 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner3 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner4 / resolution);","    gl_FragColor = pixel;","}"].join(`
`)}),85718:(r=>{r.exports=["#define SHADER_NAME SHADOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform vec2 lightPosition;","uniform vec4 color;","uniform float decay;","uniform float power;","uniform float intensity;","uniform int samples;","const int MAX = 12;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 pc = (lightPosition - outTexCoord) * intensity;","    float shadow = 0.0;","    float limit = max(float(MAX), float(samples));","    for (int i = 0; i < MAX; ++i)","    {","        if (i >= samples)","        {","            break;","        }","        shadow += texture2D(uMainSampler, outTexCoord + float(i) * decay / limit * pc).a * power;","    }","    float mask = 1.0 - texture.a;","    gl_FragColor = mix(texture, color, shadow * mask);","}"].join(`
`)}),13740:(r=>{r.exports=["#define SHADER_NAME SHINE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform bool reveal;","uniform float speed;","uniform float time;","uniform float lineWidth;","uniform float gradient;","varying vec2 outTexCoord;","void main ()","{","	vec2 uv = gl_FragCoord.xy / resolution.xy;","    vec4 tex = texture2D(uMainSampler, outTexCoord);","    vec4 col1 = vec4(0.3, 0.0, 0.0, 1.0);","    vec4 col2 = vec4(0.85, 0.85, 0.85, 1.0);","    uv.x = uv.x - mod(time * speed, 2.0) + 0.5;","    float y = uv.x * gradient;","    float s = smoothstep(y - lineWidth, y, uv.y) - smoothstep(y, y + lineWidth, uv.y);","    gl_FragColor = (((s * col1) + (s * col2)) * tex);","    if (!reveal)","    {","        gl_FragColor += tex;","    }","}"].join(`
`)}),80617:(r=>{r.exports=["#define SHADER_NAME VIGNETTE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float radius;","uniform float strength;","uniform vec2 position;","varying vec2 outTexCoord;","void main ()","{","    vec4 col = vec4(1.0);","    float d = length(outTexCoord - position);","    if (d <= radius)","    {","        float g = d / radius;","        g = sin(g * 3.14 * strength);","    	col = vec4(g * g * g);","    }","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = texture * (1.0 - col);","}"].join(`
`)}),62879:(r=>{r.exports=["#define SHADER_NAME WIPE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec4 config;","uniform bool reveal;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 color0;","    vec4 color1;","    if (reveal)","    {","        color0 = vec4(0);","        color1 = texture2D(uMainSampler, uv);","    }","    else","    {","        color0 = texture2D(uMainSampler, uv);","        color1 = vec4(0);","    }","    float distance = config.x;","    float width = config.y;","    float direction = config.z;","    float axis = uv.x;","    if (config.w == 1.0)","    {","        axis = uv.y;","    }","    float adjust = mix(width, -width, distance);","    float value = smoothstep(distance - width, distance + width, abs(direction - axis) + adjust);","    gl_FragColor = mix(color1, color0, value);","}"].join(`
`)}),65045:(r=>{r.exports=["#define SHADER_NAME PHASER_LIGHT_FS","precision mediump float;","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","const int kMaxLights = %LIGHT_COUNT%;","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","uniform int uLightCount;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","    for (int index = 0; index < kMaxLights; ++index)","    {","        if (index < uLightCount)","        {","            Light light = uLights[index];","            vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","            vec3 lightNormal = normalize(lightDir);","            float distToSurf = length(lightDir) * uCamera.w;","            float diffuseFactor = max(dot(normal, lightNormal), 0.0);","            float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","            float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","            vec3 diffuse = light.color * diffuseFactor;","            finalColor += (attenuation * diffuse) * light.intensity;","        }","    }","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}"].join(`
`)}),98921:(r=>{r.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}"].join(`
`)}),25005:(r=>{r.exports=["#define SHADER_NAME PHASER_MESH_FS","precision mediump float;","uniform vec3 uLightPosition;","uniform vec3 uLightAmbient;","uniform vec3 uLightDiffuse;","uniform vec3 uLightSpecular;","uniform vec3 uFogColor;","uniform float uFogNear;","uniform float uFogFar;","uniform vec3 uMaterialAmbient;","uniform vec3 uMaterialDiffuse;","uniform vec3 uMaterialSpecular;","uniform float uMaterialShine;","uniform vec3 uCameraPosition;","uniform sampler2D uTexture;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main (void)","{","    vec4 color = texture2D(uTexture, vTextureCoord);","    vec3 ambient = uLightAmbient * uMaterialAmbient;","    vec3 norm = normalize(vNormal);","    vec3 lightDir = normalize(uLightPosition - vPosition);","    float diff = max(dot(norm, lightDir), 0.0);","    vec3 diffuse = uLightDiffuse * (diff * uMaterialDiffuse);","    vec3 viewDir = normalize(uCameraPosition - vPosition);","    vec3 reflectDir = reflect(-lightDir, norm);","    float spec = pow(max(dot(viewDir, reflectDir), 0.0), uMaterialShine);","    vec3 specular = uLightSpecular * (spec * uMaterialSpecular);","    vec3 result = (ambient + diffuse + specular) * color.rgb;","    float depth = gl_FragCoord.z / gl_FragCoord.w;","    float fogFactor = smoothstep(uFogNear, uFogFar, depth);","    gl_FragColor.rgb = mix(result.rgb, uFogColor, fogFactor);","    gl_FragColor.a = color.a;","}"].join(`
`)}),94914:(r=>{r.exports=["#define SHADER_NAME PHASER_MESH_VS","precision mediump float;","attribute vec3 aVertexPosition;","attribute vec3 aVertexNormal;","attribute vec2 aTextureCoord;","uniform mat4 uViewProjectionMatrix;","uniform mat4 uModelMatrix;","uniform mat4 uNormalMatrix;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main ()","{","    vTextureCoord = aTextureCoord;","    vPosition = vec3(uModelMatrix * vec4(aVertexPosition, 1.0));","    vNormal = vec3(uNormalMatrix * vec4(aVertexNormal, 1.0));","    gl_Position = uViewProjectionMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);","}"].join(`
`)}),11263:(r=>{r.exports=["#define SHADER_NAME PHASER_MOBILE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)}),51852:(r=>{r.exports=["#define SHADER_NAME PHASER_MOBILE_VS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)}),53787:(r=>{r.exports=["#define SHADER_NAME PHASER_MULTI_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler[%count%];","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture;","    %forloop%","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)}),15968:(r=>{r.exports=["#define SHADER_NAME PHASER_MULTI_VS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)}),83327:(r=>{r.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","precision mediump float;","uniform vec2 uResolution;","uniform float uCameraZoom;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","    float distToSurf = length(center - gl_FragCoord.xy);","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}"].join(`
`)}),54677:(r=>{r.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}"].join(`
`)}),12569:(r=>{r.exports=["#define SHADER_NAME PHASER_POSTFX_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}"].join(`
`)}),99365:(r=>{r.exports=["#define SHADER_NAME PHASER_QUAD_VS","precision mediump float;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","varying vec2 outFragCoord;","varying vec2 outTexCoord;","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","    gl_Position = vec4(inPosition, 0, 1);","}"].join(`
`)}),85060:(r=>{r.exports=["#define SHADER_NAME PHASER_SINGLE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)}),18166:(r=>{r.exports=["#define SHADER_NAME PHASER_SINGLE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)}),92462:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={AddBlendFrag:e(2529),BitmapMaskFrag:e(91679),BitmapMaskVert:e(89053),ColorMatrixFrag:e(37486),CopyFrag:e(79060),FXBarrelFrag:e(87751),FXBloomFrag:e(88222),FXBlurHighFrag:e(44481),FXBlurLowFrag:e(35491),FXBlurMedFrag:e(75568),FXBokehFrag:e(69960),FXCircleFrag:e(33754),FXDisplacementFrag:e(35668),FXGlowFrag:e(69675),FXGradientFrag:e(90993),FXPixelateFrag:e(37945),FXShadowFrag:e(85718),FXShineFrag:e(13740),FXVignetteFrag:e(80617),FXWipeFrag:e(62879),LightFrag:e(65045),LinearBlendFrag:e(98921),MeshFrag:e(25005),MeshVert:e(94914),MobileFrag:e(11263),MobileVert:e(51852),MultiFrag:e(53787),MultiVert:e(15968),PointLightFrag:e(83327),PointLightVert:e(54677),PostFXFrag:e(12569),QuadVert:e(99365),SingleFrag:e(85060),SingleVert:e(18166)}}),756:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(55301),m=e(56694),d=e(6659),l=e(40444),h=e(97081),n=e(74181),a=e(2893),c=e(9229),o=e(72283),v=e(74118),g=e(90881),p=e(84314),x=e(93736),T=e(47751),E=new m({Extends:d,initialize:function(P){d.call(this),this.game=P,this.canvas,this.canvasBounds=new v,this.parent=null,this.parentIsWindow=!1,this.parentSize=new g,this.gameSize=new g,this.baseSize=new g,this.displaySize=new g,this.scaleMode=u.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new x(1,1),this.autoRound=!1,this.autoCenter=u.CENTER.NO_CENTER,this.orientation=u.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.domlisteners={orientationChange:o,windowResize:o,fullScreenChange:o,fullScreenError:o}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(h.BOOT,this.boot,this)},boot:function(){var M=this.game;this.canvas=M.canvas,this.fullscreen=M.device.fullscreen,this.scaleMode!==u.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===u.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),M.events.on(h.PRE_STEP,this.step,this),M.events.once(h.READY,this.refresh,this),M.events.once(h.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(M){this.getParent(M),this.getParentBounds();var P=M.width,w=M.height,R=M.scaleMode,A=M.zoom,O=M.autoRound;if(typeof P=="string"){var F=this.parentSize.width;F===0&&(F=window.innerWidth);var b=parseInt(P,10)/100;P=Math.floor(F*b)}if(typeof w=="string"){var D=this.parentSize.height;D===0&&(D=window.innerHeight);var I=parseInt(w,10)/100;w=Math.floor(D*I)}this.scaleMode=R,this.autoRound=O,this.autoCenter=M.autoCenter,this.resizeInterval=M.resizeInterval,O&&(P=Math.floor(P),w=Math.floor(w)),this.gameSize.setSize(P,w),A===u.ZOOM.MAX_ZOOM&&(A=this.getMaxZoom()),this.zoom=A,A!==1&&(this._resetZoom=!0),this.baseSize.setSize(P,w),O&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),M.minWidth>0&&this.displaySize.setMin(M.minWidth*A,M.minHeight*A),M.maxWidth>0&&this.displaySize.setMax(M.maxWidth*A,M.maxHeight*A),this.displaySize.setSize(P,w),this.orientation=c(P,w)},getParent:function(M){var P=M.parent;if(P!==null){if(this.parent=a(P),this.parentIsWindow=this.parent===document.body,M.expandParent&&M.scaleMode!==u.SCALE_MODE.NONE){var w=this.parent.getBoundingClientRect();(this.parentIsWindow||w.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",w=this.parent.getBoundingClientRect(),!this.parentIsWindow&&w.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}M.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=a(M.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var M=this.parentSize,P=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(P.height=n(!0));var w=P.width,R=P.height;if(M.width!==w||M.height!==R)return M.setSize(w,R),!0;if(this.canvas){var A=this.canvasBounds,O=this.canvas.getBoundingClientRect();if(O.x!==A.x||O.y!==A.y)return!0}return!1},lockOrientation:function(M){var P=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return P?P.call(screen,M):!1},setParentSize:function(M,P){return this.parentSize.setSize(M,P),this.refresh()},setGameSize:function(M,P){var w=this.autoRound;w&&(M=Math.floor(M),P=Math.floor(P));var R=this.width,A=this.height;return this.gameSize.resize(M,P),this.baseSize.resize(M,P),w&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(M/P),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(R,A)},resize:function(M,P){var w=this.zoom,R=this.autoRound;R&&(M=Math.floor(M),P=Math.floor(P));var A=this.width,O=this.height;this.gameSize.resize(M,P),this.baseSize.resize(M,P),R&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(M*w,P*w),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var F=this.canvas.style,b=M*w,D=P*w;return R&&(b=Math.floor(b),D=Math.floor(D)),(b!==M||D!==P)&&(F.width=b+"px",F.height=D+"px"),this.refresh(A,O)},setZoom:function(M){return this.zoom=M,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(M,P){M===void 0&&(M=this.width),P===void 0&&(P=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var w=this.game.domContainer;if(w){this.baseSize.setCSS(w);var R=this.canvas.style,A=w.style;A.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",A.marginLeft=R.marginLeft,A.marginTop=R.marginTop}return this.emit(l.RESIZE,this.gameSize,this.baseSize,this.displaySize,M,P),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var M=c(this.width,this.height);M!==this.orientation&&(this.orientation=M,this.emit(l.ORIENTATION_CHANGE,M))}},updateScale:function(){var M=this.canvas.style,P=this.gameSize.width,w=this.gameSize.height,R,A,O=this.zoom,F=this.autoRound;this.scaleMode===u.SCALE_MODE.NONE?(this.displaySize.setSize(P*O,w*O),R=this.displaySize.width,A=this.displaySize.height,F&&(R=Math.floor(R),A=Math.floor(A)),this._resetZoom&&(M.width=R+"px",M.height=A+"px",this._resetZoom=!1)):this.scaleMode===u.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),R=this.displaySize.width,A=this.displaySize.height,F&&(R=Math.floor(R),A=Math.floor(A)),this.canvas.width=R,this.canvas.height=A):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),R=this.displaySize.width,A=this.displaySize.height,F&&(R=Math.floor(R),A=Math.floor(A)),M.width=R+"px",M.height=A+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var M=p(this.parentSize.width,this.gameSize.width,0,!0),P=p(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(M,P),1)},updateCenter:function(){var M=this.autoCenter;if(M!==u.CENTER.NO_CENTER){var P=this.canvas,w=P.style,R=P.getBoundingClientRect(),A=R.width,O=R.height,F=Math.floor((this.parentSize.width-A)/2),b=Math.floor((this.parentSize.height-O)/2);M===u.CENTER.CENTER_HORIZONTALLY?b=0:M===u.CENTER.CENTER_VERTICALLY&&(F=0),w.marginLeft=F+"px",w.marginTop=b+"px"}},updateBounds:function(){var M=this.canvasBounds,P=this.canvas.getBoundingClientRect();M.x=P.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),M.y=P.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),M.width=P.width,M.height=P.height},transformX:function(M){return(M-this.canvasBounds.left)*this.displayScale.x},transformY:function(M){return(M-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(M){M===void 0&&(M={navigationUI:"hide"});var P=this.fullscreen;if(!P.available){this.emit(l.FULLSCREEN_UNSUPPORTED);return}if(!P.active){var w=this.getFullscreenTarget();P.keyboard?w[P.request](Element.ALLOW_KEYBOARD_INPUT):w[P.request](M)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(l.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(M){this.removeFullscreenTarget(),this.emit(l.FULLSCREEN_FAILED,M)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var M=document.createElement("div");M.style.margin="0",M.style.padding="0",M.style.width="100%",M.style.height="100%",this.fullscreenTarget=M,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var P=this.canvas.parentNode;P.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var M=this.fullscreenTarget;if(M&&M.parentNode){var P=M.parentNode;P.insertBefore(this.canvas,M),P.removeChild(M)}}},stopFullscreen:function(){var M=this.fullscreen;if(!M.available)return this.emit(l.FULLSCREEN_UNSUPPORTED),!1;M.active&&document[M.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(l.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(M){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(M)},startListeners:function(){var M=this,P=this.domlisteners;if(P.orientationChange=function(){M.updateBounds(),M._checkOrientation=!0,M.dirty=!0},P.windowResize=function(){M.updateBounds(),M.dirty=!0},window.addEventListener("orientationchange",P.orientationChange,!1),window.addEventListener("resize",P.windowResize,!1),this.fullscreen.available){P.fullScreenChange=function(R){return M.onFullScreenChange(R)},P.fullScreenError=function(R){return M.onFullScreenError(R)};var w=["webkit","moz",""];w.forEach(function(R){document.addEventListener(R+"fullscreenchange",P.fullScreenChange,!1),document.addEventListener(R+"fullscreenerror",P.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",P.fullScreenChange,!1),document.addEventListener("MSFullscreenError",P.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},getViewPort:function(M,P){M instanceof T||(P=M,M=void 0),P===void 0&&(P=new v);var w=this.baseSize,R=this.parentSize,A=this.canvasBounds,O=this.displayScale,F=A.x>=0?0:-(A.x*O.x),b=A.y>=0?0:-(A.y*O.y),D;R.width>=A.width?D=w.width:D=w.width-(A.width-R.width)*O.x;var I;return R.height>=A.height?I=w.height:I=w.height-(A.height-R.height)*O.y,P.setTo(F,b,D,I),M&&(P.width/=M.zoomX,P.height/=M.zoomY,P.centerX=M.centerX+M.scrollX,P.centerY=M.centerY+M.scrollY),P},step:function(M,P){this.parent&&(this._lastCheck+=P,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var M=this.domlisteners;window.removeEventListener("orientationchange",M.orientationChange,!1),window.removeEventListener("resize",M.windowResize,!1);var P=["webkit","moz",""];P.forEach(function(w){document.removeEventListener(w+"fullscreenchange",M.fullScreenChange,!1),document.removeEventListener(w+"fullscreenerror",M.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",M.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",M.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===u.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===u.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});r.exports=E}),35098:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}}),53539:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}}),12637:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}}),10217:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}}),55301:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u={CENTER:e(35098),ORIENTATION:e(53539),SCALE_MODE:e(12637),ZOOM:e(10217)};r.exports=u}),82085:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="enterfullscreen"}),11826:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="fullscreenfailed"}),56691:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="fullscreenunsupported"}),34739:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="leavefullscreen"}),26681:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="orientationchange"}),11428:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="resize"}),40444:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={ENTER_FULLSCREEN:e(82085),FULLSCREEN_FAILED:e(11826),FULLSCREEN_UNSUPPORTED:e(56691),LEAVE_FULLSCREEN:e(34739),ORIENTATION_CHANGE:e(26681),RESIZE:e(11428)}}),86754:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(98611),m=e(55301),d={Center:e(35098),Events:e(40444),Orientation:e(53539),ScaleManager:e(756),ScaleModes:e(12637),Zoom:e(10217)};d=u(!1,d,m.CENTER),d=u(!1,d,m.ORIENTATION),d=u(!1,d,m.SCALE_MODE),d=u(!1,d,m.ZOOM),r.exports=d}),47736:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72632),m=e(40587),d=function(l){var h=l.game.config.defaultPhysicsSystem,n=u(l.settings,"physics",!1);if(!(!h&&!n)){var a=[];if(h&&a.push(m(h+"Physics")),n)for(var c in n)c=m(c.concat("Physics")),a.indexOf(c)===-1&&a.push(c);return a}};r.exports=d}),91088:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72632),m=function(d){var l=d.plugins.getDefaultScenePlugins(),h=u(d.settings,"plugins",!1);return Array.isArray(h)?h:l||[]};r.exports=m}),90415:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};r.exports=y}),87157:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(63946),d=new u({initialize:function(h){this.sys=new m(this,h),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});r.exports=d}),13553:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(92980),d=e(7599),l=e(97081),h=e(10850),n=e(683),a=e(72283),c=e(87157),o=e(63946),v=new u({initialize:function(p,x){if(this.game=p,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,this.systemScene,x){Array.isArray(x)||(x=[x]);for(var T=0;T<x.length;T++)this._pending.push({key:"default",scene:x[T],autoStart:T===0,data:{}})}p.events.once(l.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){this.systemScene=this.createSceneFromInstance("__SYSTEM",new c);var g,p,x,T;for(g=0;g<this._pending.length;g++){p=this._pending[g],x=p.key,T=p.scene;var E;T instanceof c?E=this.createSceneFromInstance(x,T):typeof T=="object"?E=this.createSceneFromObject(x,T):typeof T=="function"&&(E=this.createSceneFromFunction(x,T)),x=E.sys.settings.key,this.keys[x]=E,this.scenes.push(E),this._data[x]&&(E.sys.settings.data=this._data[x].data,this._data[x].autoStart&&(p.autoStart=!0)),(p.autoStart||E.sys.settings.active)&&this._start.push(x)}for(this._pending.length=0,this._data={},this.isBooted=!0,g=0;g<this._start.length;g++)p=this._start[g],this.start(p);this._start.length=0}},processQueue:function(){var g=this._pending.length,p=this._queue.length;if(!(g===0&&p===0)){var x,T;if(g){for(x=0;x<g;x++)T=this._pending[x],this.add(T.key,T.scene,T.autoStart,T.data);for(x=0;x<this._start.length;x++)T=this._start[x],this.start(T);this._start.length=0,this._pending.length=0}for(x=0;x<this._queue.length;x++)T=this._queue[x],this[T.op](T.keyA,T.keyB);this._queue.length=0}},add:function(g,p,x,T){if(x===void 0&&(x=!1),T===void 0&&(T={}),this.isProcessing||!this.isBooted)return this._pending.push({key:g,scene:p,autoStart:x,data:T}),this.isBooted||(this._data[g]={data:T}),null;g=this.getKey(g,p);var E;return p instanceof c?E=this.createSceneFromInstance(g,p):typeof p=="object"?(p.key=g,E=this.createSceneFromObject(g,p)):typeof p=="function"&&(E=this.createSceneFromFunction(g,p)),E.sys.settings.data=T,g=E.sys.settings.key,this.keys[g]=E,this.scenes.push(E),(x||E.sys.settings.active)&&(this._pending.length?this._start.push(g):this.start(g)),E},remove:function(g){if(this.isProcessing)this._queue.push({op:"remove",keyA:g,keyB:null});else{var p=this.getScene(g);if(!p||p.sys.isTransitioning())return this;var x=this.scenes.indexOf(p),T=p.sys.settings.key;x>-1&&(delete this.keys[T],this.scenes.splice(x,1),this._start.indexOf(T)>-1&&(x=this._start.indexOf(T),this._start.splice(x,1)),p.sys.destroy())}return this},bootScene:function(g){var p=g.sys,x=p.settings;p.sceneUpdate=a,g.init&&(g.init.call(g,x.data),x.status=m.INIT,x.isTransition&&p.events.emit(d.TRANSITION_INIT,x.transitionFrom,x.transitionDuration));var T;p.load&&(T=p.load,T.reset()),T&&g.preload?(g.preload.call(g),x.status=m.LOADING,T.once(n.COMPLETE,this.loadComplete,this),T.start()):this.create(g)},loadComplete:function(g){this.game.sound&&this.game.sound.onBlurPausedSounds&&this.game.sound.unlock(),this.create(g.scene)},payloadComplete:function(g){this.bootScene(g.scene)},update:function(g,p){this.processQueue(),this.isProcessing=!0;for(var x=this.scenes.length-1;x>=0;x--){var T=this.scenes[x].sys;T.settings.status>m.START&&T.settings.status<=m.RUNNING&&T.step(g,p),T.scenePlugin._target&&T.scenePlugin.step(g,p)}},render:function(g){for(var p=0;p<this.scenes.length;p++){var x=this.scenes[p].sys;x.settings.visible&&x.settings.status>=m.LOADING&&x.settings.status<m.SLEEPING&&x.render(g)}this.isProcessing=!1},create:function(g){var p=g.sys,x=p.settings;g.create&&(x.status=m.CREATING,g.create.call(g,x.data),x.status===m.DESTROYED)||(x.isTransition&&p.events.emit(d.TRANSITION_START,x.transitionFrom,x.transitionDuration),g.update&&(p.sceneUpdate=g.update),x.status=m.RUNNING,p.events.emit(d.CREATE,g))},createSceneFromFunction:function(g,p){var x=new p;if(x instanceof c){var T=x.sys.settings.key;if(T!==""&&(g=T),this.keys.hasOwnProperty(g))throw new Error("Cannot add a Scene with duplicate key: "+g);return this.createSceneFromInstance(g,x)}else return x.sys=new o(x),x.sys.settings.key=g,x.sys.init(this.game),x},createSceneFromInstance:function(g,p){var x=p.sys.settings.key;return x===""&&(p.sys.settings.key=g),p.sys.init(this.game),p},createSceneFromObject:function(g,p){var x=new c(p),T=x.sys.settings.key;T!==""?g=T:x.sys.settings.key=g,x.sys.init(this.game);for(var E=["init","preload","create","update","render"],M=0;M<E.length;M++){var P=h(p,E[M],null);P&&(x[E[M]]=P)}if(p.hasOwnProperty("extend")){for(var w in p.extend)if(p.extend.hasOwnProperty(w)){var R=p.extend[w];w==="data"&&x.hasOwnProperty("data")&&typeof R=="object"?x.data.merge(R):w!=="sys"&&(x[w]=R)}}return x},getKey:function(g,p){if(g||(g="default"),typeof p=="function")return g;if(p instanceof c?g=p.sys.settings.key:typeof p=="object"&&p.hasOwnProperty("key")&&(g=p.key),this.keys.hasOwnProperty(g))throw new Error("Cannot add a Scene with duplicate key: "+g);return g},getScenes:function(g,p){g===void 0&&(g=!0),p===void 0&&(p=!1);for(var x=[],T=this.scenes,E=0;E<T.length;E++){var M=T[E];M&&(!g||g&&M.sys.isActive())&&x.push(M)}return p?x.reverse():x},getScene:function(g){if(typeof g=="string"){if(this.keys[g])return this.keys[g]}else for(var p=0;p<this.scenes.length;p++)if(g===this.scenes[p])return g;return null},isActive:function(g){var p=this.getScene(g);return p?p.sys.isActive():null},isPaused:function(g){var p=this.getScene(g);return p?p.sys.isPaused():null},isVisible:function(g){var p=this.getScene(g);return p?p.sys.isVisible():null},isSleeping:function(g){var p=this.getScene(g);return p?p.sys.isSleeping():null},pause:function(g,p){var x=this.getScene(g);return x&&x.sys.pause(p),this},resume:function(g,p){var x=this.getScene(g);return x&&x.sys.resume(p),this},sleep:function(g,p){var x=this.getScene(g);return x&&!x.sys.isTransitioning()&&x.sys.sleep(p),this},wake:function(g,p){var x=this.getScene(g);return x&&x.sys.wake(p),this},run:function(g,p){var x=this.getScene(g);if(!x){for(var T=0;T<this._pending.length;T++)if(this._pending[T].key===g){this.queueOp("start",g,p);break}return this}x.sys.isSleeping()?x.sys.wake(p):x.sys.isPaused()?x.sys.resume(p):this.start(g,p)},start:function(g,p){if(!this.isBooted)return this._data[g]={autoStart:!0,data:p},this;var x=this.getScene(g);if(!x)return console.warn("Scene not found for key: "+g),this;var T=x.sys,E=T.settings.status;if(E>=m.START&&E<=m.CREATING)return this;if(E>=m.RUNNING&&E<=m.SLEEPING)T.shutdown(),T.sceneUpdate=a,T.start(p);else{T.sceneUpdate=a,T.start(p);var M;if(T.load&&(M=T.load),M&&T.settings.hasOwnProperty("pack")&&(M.reset(),M.addPack({payload:T.settings.pack})))return T.settings.status=m.LOADING,M.once(n.COMPLETE,this.payloadComplete,this),M.start(),this}return this.bootScene(x),this},stop:function(g,p){var x=this.getScene(g);if(x&&!x.sys.isTransitioning()&&x.sys.settings.status!==m.SHUTDOWN){var T=x.sys.load;T&&(T.off(n.COMPLETE,this.loadComplete,this),T.off(n.COMPLETE,this.payloadComplete,this)),x.sys.shutdown(p)}return this},switch:function(g,p){var x=this.getScene(g),T=this.getScene(p);return x&&T&&x!==T&&(this.sleep(g),this.isSleeping(p)?this.wake(p):this.start(p)),this},getAt:function(g){return this.scenes[g]},getIndex:function(g){var p=this.getScene(g);return this.scenes.indexOf(p)},bringToTop:function(g){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:g,keyB:null});else{var p=this.getIndex(g);if(p!==-1&&p<this.scenes.length){var x=this.getScene(g);this.scenes.splice(p,1),this.scenes.push(x)}}return this},sendToBack:function(g){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:g,keyB:null});else{var p=this.getIndex(g);if(p!==-1&&p>0){var x=this.getScene(g);this.scenes.splice(p,1),this.scenes.unshift(x)}}return this},moveDown:function(g){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:g,keyB:null});else{var p=this.getIndex(g);if(p>0){var x=p-1,T=this.getScene(g),E=this.getAt(x);this.scenes[p]=E,this.scenes[x]=T}}return this},moveUp:function(g){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:g,keyB:null});else{var p=this.getIndex(g);if(p<this.scenes.length-1){var x=p+1,T=this.getScene(g),E=this.getAt(x);this.scenes[p]=E,this.scenes[x]=T}}return this},moveAbove:function(g,p){if(g===p)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:g,keyB:p});else{var x=this.getIndex(g),T=this.getIndex(p);if(x!==-1&&T!==-1&&T<x){var E=this.getAt(T);this.scenes.splice(T,1),this.scenes.splice(x+(T>x),0,E)}}return this},moveBelow:function(g,p){if(g===p)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:g,keyB:p});else{var x=this.getIndex(g),T=this.getIndex(p);if(x!==-1&&T!==-1&&T>x){var E=this.getAt(T);this.scenes.splice(T,1),x===0?this.scenes.unshift(E):this.scenes.splice(x-(T<x),0,E)}}return this},queueOp:function(g,p,x){return this._queue.push({op:g,keyA:p,keyB:x}),this},swapPosition:function(g,p){if(g===p)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:g,keyB:p});else{var x=this.getIndex(g),T=this.getIndex(p);if(x!==T&&x!==-1&&T!==-1){var E=this.getAt(x);this.scenes[x]=this.scenes[T],this.scenes[T]=E}}return this},dump:function(){for(var g=[],p=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],x=0;x<this.scenes.length;x++){var T=this.scenes[x].sys,E=T.settings.visible&&(T.settings.status===m.RUNNING||T.settings.status===m.PAUSED)?"[*] ":"[-] ";E+=T.settings.key+" ("+p[T.settings.status]+")",g.push(E)}console.log(g.join(`
`))},destroy:function(){for(var g=0;g<this.scenes.length;g++){var p=this.scenes[g].sys;p.destroy()}this.systemScene.sys.destroy(),this.update=a,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null,this.systemScene=null}});r.exports=v}),64051:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(82897),m=e(56694),d=e(7599),l=e(72632),h=e(91963),n=new m({initialize:function(c){this.scene=c,this.systems=c.sys,this.settings=c.sys.settings,this.key=c.sys.settings.key,this.manager=c.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,c.sys.events.once(d.BOOT,this.boot,this),c.sys.events.on(d.START,this.pluginStart,this)},boot:function(){this.systems.events.once(d.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(d.SHUTDOWN,this.shutdown,this)},start:function(a,c){return a===void 0&&(a=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",a,c),this},restart:function(a){var c=this.key;return this.manager.queueOp("stop",c),this.manager.queueOp("start",c,a),this},transition:function(a){a===void 0&&(a={});var c=l(a,"target",!1),o=this.manager.getScene(c);if(!c||!this.checkValidTransition(o))return!1;var v=l(a,"duration",1e3);this._elapsed=0,this._target=o,this._duration=v,this._willSleep=l(a,"sleep",!1),this._willRemove=l(a,"remove",!1);var g=l(a,"onUpdate",null);g&&(this._onUpdate=g,this._onUpdateScope=l(a,"onUpdateScope",this.scene));var p=l(a,"allowInput",!1);this.settings.transitionAllowInput=p;var x=o.sys.settings;x.isTransition=!0,x.transitionFrom=this.scene,x.transitionDuration=v,x.transitionAllowInput=p,l(a,"moveAbove",!1)?this.manager.moveAbove(this.key,c):l(a,"moveBelow",!1)&&this.manager.moveBelow(this.key,c),o.sys.isSleeping()?o.sys.wake(l(a,"data")):this.manager.start(c,l(a,"data"));var T=l(a,"onStart",null),E=l(a,"onStartScope",this.scene);return T&&T.call(E,this.scene,o,v),this.systems.events.emit(d.TRANSITION_OUT,o,v),!0},checkValidTransition:function(a){return!(!a||a.sys.isActive()||a.sys.isTransitioning()||a===this.scene||this.systems.isTransitioning())},step:function(a,c){this._elapsed+=c,this.transitionProgress=u(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var a=this._target.sys,c=this._target.sys.settings;a.events.emit(d.TRANSITION_COMPLETE,this.scene),c.isTransition=!1,c.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(a,c,o,v){return this.manager.add(a,c,o,v)},launch:function(a,c){return a&&a!==this.key&&this.manager.queueOp("start",a,c),this},run:function(a,c){return a&&a!==this.key&&this.manager.queueOp("run",a,c),this},pause:function(a,c){return a===void 0&&(a=this.key),this.manager.queueOp("pause",a,c),this},resume:function(a,c){return a===void 0&&(a=this.key),this.manager.queueOp("resume",a,c),this},sleep:function(a,c){return a===void 0&&(a=this.key),this.manager.queueOp("sleep",a,c),this},wake:function(a,c){return a===void 0&&(a=this.key),this.manager.queueOp("wake",a,c),this},switch:function(a){return a!==this.key&&this.manager.queueOp("switch",this.key,a),this},stop:function(a,c){return a===void 0&&(a=this.key),this.manager.queueOp("stop",a,c),this},setActive:function(a,c,o){c===void 0&&(c=this.key);var v=this.manager.getScene(c);return v&&v.sys.setActive(a,o),this},setVisible:function(a,c){c===void 0&&(c=this.key);var o=this.manager.getScene(c);return o&&o.sys.setVisible(a),this},isSleeping:function(a){return a===void 0&&(a=this.key),this.manager.isSleeping(a)},isActive:function(a){return a===void 0&&(a=this.key),this.manager.isActive(a)},isPaused:function(a){return a===void 0&&(a=this.key),this.manager.isPaused(a)},isVisible:function(a){return a===void 0&&(a=this.key),this.manager.isVisible(a)},swapPosition:function(a,c){return c===void 0&&(c=this.key),a!==c&&this.manager.swapPosition(a,c),this},moveAbove:function(a,c){return c===void 0&&(c=this.key),a!==c&&this.manager.moveAbove(a,c),this},moveBelow:function(a,c){return c===void 0&&(c=this.key),a!==c&&this.manager.moveBelow(a,c),this},remove:function(a){return a===void 0&&(a=this.key),this.manager.remove(a),this},moveUp:function(a){return a===void 0&&(a=this.key),this.manager.moveUp(a),this},moveDown:function(a){return a===void 0&&(a=this.key),this.manager.moveDown(a),this},bringToTop:function(a){return a===void 0&&(a=this.key),this.manager.bringToTop(a),this},sendToBack:function(a){return a===void 0&&(a=this.key),this.manager.sendToBack(a),this},get:function(a){return this.manager.getScene(a)},getStatus:function(a){var c=this.manager.getScene(a);if(c)return c.sys.getStatus()},getIndex:function(a){return a===void 0&&(a=this.key),this.manager.getIndex(a)},shutdown:function(){var a=this.systems.events;a.off(d.SHUTDOWN,this.shutdown,this),a.off(d.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(d.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});h.register("ScenePlugin",n,"scenePlugin"),r.exports=n}),36765:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(92980),m=e(10850),d=e(30657),l=e(90415),h={create:function(n){return typeof n=="string"?n={key:n}:n===void 0&&(n={}),{status:u.PENDING,key:m(n,"key",""),active:m(n,"active",!1),visible:m(n,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:m(n,"pack",!1),cameras:m(n,"cameras",null),map:m(n,"map",d(l,m(n,"mapAdd",{}))),physics:m(n,"physics",{}),loader:m(n,"loader",{}),plugins:m(n,"plugins",!1),input:m(n,"input",{})}}};r.exports=h}),63946:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(92980),d=e(18360),l=e(7599),h=e(47736),n=e(91088),a=e(72283),c=e(36765),o=new u({initialize:function(g,p){this.scene=g,this.game,this.renderer,this.config=p,this.settings=c.create(p),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=a},init:function(v){this.settings.status=m.INIT,this.sceneUpdate=a,this.game=v,this.renderer=v.renderer,this.canvas=v.canvas,this.context=v.context;var g=v.plugins;this.plugins=g,g.addToScene(this,d.Global,[d.CoreScene,n(this),h(this)]),this.events.emit(l.BOOT,this),this.settings.isBooted=!0},step:function(v,g){var p=this.events;p.emit(l.PRE_UPDATE,v,g),p.emit(l.UPDATE,v,g),this.sceneUpdate.call(this.scene,v,g),p.emit(l.POST_UPDATE,v,g)},render:function(v){var g=this.displayList;g.depthSort(),this.events.emit(l.PRE_RENDER,v),this.cameras.render(v,g),this.events.emit(l.RENDER,v)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(v){var g=this.settings,p=this.getStatus();return p!==m.CREATING&&p!==m.RUNNING?console.warn("Cannot pause non-running Scene",g.key):this.settings.active&&(g.status=m.PAUSED,g.active=!1,this.events.emit(l.PAUSE,this,v)),this},resume:function(v){var g=this.events,p=this.settings;return this.settings.active||(p.status=m.RUNNING,p.active=!0,g.emit(l.RESUME,this,v)),this},sleep:function(v){var g=this.settings,p=this.getStatus();return p!==m.CREATING&&p!==m.RUNNING?console.warn("Cannot sleep non-running Scene",g.key):(g.status=m.SLEEPING,g.active=!1,g.visible=!1,this.events.emit(l.SLEEP,this,v)),this},wake:function(v){var g=this.events,p=this.settings;return p.status=m.RUNNING,p.active=!0,p.visible=!0,g.emit(l.WAKE,this,v),p.isTransition&&g.emit(l.TRANSITION_WAKE,p.transitionFrom,p.transitionDuration),this},getData:function(){return this.settings.data},getStatus:function(){return this.settings.status},canInput:function(){var v=this.settings.status;return v>m.PENDING&&v<=m.RUNNING},isSleeping:function(){return this.settings.status===m.SLEEPING},isActive:function(){return this.settings.status===m.RUNNING},isPaused:function(){return this.settings.status===m.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(v){return this.settings.visible=v,this},setActive:function(v,g){return v?this.resume(g):this.pause(g)},start:function(v){var g=this.events,p=this.settings;v&&(p.data=v),p.status=m.START,p.active=!0,p.visible=!0,g.emit(l.START,this),g.emit(l.READY,this,v)},shutdown:function(v){var g=this.events,p=this.settings;g.off(l.TRANSITION_INIT),g.off(l.TRANSITION_START),g.off(l.TRANSITION_COMPLETE),g.off(l.TRANSITION_OUT),p.status=m.SHUTDOWN,p.active=!1,p.visible=!1,g.emit(l.SHUTDOWN,this,v)},destroy:function(){var v=this.events,g=this.settings;g.status=m.DESTROYED,g.active=!1,g.visible=!1,v.emit(l.DESTROY,this),v.removeAllListeners();for(var p=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],x=0;x<p.length;x++)this[p[x]]=null}});r.exports=o}),92980:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};r.exports=y}),31803:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="addedtoscene"}),94817:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="boot"}),28977:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="create"}),91959:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="destroy"}),363:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pause"}),15643:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="postupdate"}),17058:(r=>{/**
 * @author       samme
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="prerender"}),77125:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="preupdate"}),76018:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="ready"}),28620:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="removedfromscene"}),41538:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="render"}),34268:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="resume"}),2342:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="shutdown"}),96541:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="sleep"}),74244:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="start"}),17046:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="transitioncomplete"}),13637:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="transitioninit"}),14733:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="transitionout"}),33899:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="transitionstart"}),52418:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="transitionwake"}),31735:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="update"}),8470:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="wake"}),7599:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={ADDED_TO_SCENE:e(31803),BOOT:e(94817),CREATE:e(28977),DESTROY:e(91959),PAUSE:e(363),POST_UPDATE:e(15643),PRE_RENDER:e(17058),PRE_UPDATE:e(77125),READY:e(76018),REMOVED_FROM_SCENE:e(28620),RENDER:e(41538),RESUME:e(34268),SHUTDOWN:e(2342),SLEEP:e(96541),START:e(74244),TRANSITION_COMPLETE:e(17046),TRANSITION_INIT:e(13637),TRANSITION_OUT:e(14733),TRANSITION_START:e(33899),TRANSITION_WAKE:e(52418),UPDATE:e(31735),WAKE:e(8470)}}),20436:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(92980),m=e(98611),d={Events:e(7599),GetPhysicsPlugins:e(47736),GetScenePlugins:e(91088),SceneManager:e(13553),ScenePlugin:e(64051),Settings:e(36765),Systems:e(63946)};d=m(!1,d,u),r.exports=d}),25798:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(6659),d=e(76038),l=e(98611),h=e(72283),n=new u({Extends:m,initialize:function(c,o,v){m.call(this),this.manager=c,this.key=o,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=l(this.config,v),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(a){return!a||!a.name||typeof a.name!="string"?!1:this.markers[a.name]?(console.error("addMarker "+a.name+" already exists in Sound"),!1):(a=l(!0,{name:"",start:0,duration:this.totalDuration-(a.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},a),this.markers[a.name]=a,!0)},updateMarker:function(a){return!a||!a.name||typeof a.name!="string"?!1:this.markers[a.name]?(this.markers[a.name]=l(!0,this.markers[a.name],a),!0):(console.warn("Audio Marker: "+a.name+" missing in Sound: "+this.key),!1)},removeMarker:function(a){var c=this.markers[a];return c?(this.markers[a]=null,c):null},play:function(a,c){if(a===void 0&&(a=""),typeof a=="object"&&(c=a,a=""),typeof a!="string")return!1;if(!a)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[a])return console.warn("Marker: "+a+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[a],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=l(this.currentConfig,c),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:h,calculateRate:function(){var a=1.0005777895065548,c=this.currentConfig.detune+this.manager.detune,o=Math.pow(a,c);this.totalRate=this.currentConfig.rate*this.manager.rate*o},destroy:function(){this.pendingRemove||(this.emit(d.DESTROY,this),this.removeAllListeners(),this.pendingRemove=!0,this.manager=null,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});r.exports=n}),12486:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(32742),d=e(6659),l=e(76038),h=e(97081),n=e(71608),a=e(51463),c=e(72283),o=e(93736),v=new u({Extends:d,initialize:function(p){d.call(this),this.game=p,this.jsonCache=p.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,this.gameLostFocus=!1,this.listenerPosition=new o,p.events.on(h.BLUR,this.onGameBlur,this),p.events.on(h.FOCUS,this.onGameFocus,this),p.events.on(h.PRE_STEP,this.update,this),p.events.once(h.DESTROY,this.destroy,this)},add:c,addAudioSprite:function(g,p){p===void 0&&(p={});var x=this.add(g,p);x.spritemap=this.jsonCache.get(g).spritemap;for(var T in x.spritemap)if(x.spritemap.hasOwnProperty(T)){var E=m(p),M=x.spritemap[T];E.loop=M.hasOwnProperty("loop")?M.loop:!1,x.addMarker({name:T,start:M.start,duration:M.end-M.start,config:E})}return x},get:function(g){return a(this.sounds,"key",g)},getAll:function(g){return g?n(this.sounds,"key",g):n(this.sounds)},getAllPlaying:function(){return n(this.sounds,"isPlaying",!0)},play:function(g,p){var x=this.add(g);return x.once(l.COMPLETE,x.destroy,x),p?p.name?(x.addMarker(p),x.play(p.name)):x.play(p):x.play()},playAudioSprite:function(g,p,x){var T=this.addAudioSprite(g);return T.once(l.COMPLETE,T.destroy,T),T.play(p,x)},remove:function(g){var p=this.sounds.indexOf(g);return p!==-1?(g.destroy(),this.sounds.splice(p,1),!0):!1},removeAll:function(){this.sounds.forEach(function(g){g.destroy()}),this.sounds.length=0},removeByKey:function(g){for(var p=0,x=this.sounds.length-1;x>=0;x--){var T=this.sounds[x];T.key===g&&(T.destroy(),this.sounds.splice(x,1),p++)}return p},pauseAll:function(){this.forEachActiveSound(function(g){g.pause()}),this.emit(l.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(g){g.resume()}),this.emit(l.RESUME_ALL,this)},setListenerPosition:c,stopAll:function(){this.forEachActiveSound(function(g){g.stop()}),this.emit(l.STOP_ALL,this)},stopByKey:function(g){var p=0;return this.getAll(g).forEach(function(x){x.stop()&&p++}),p},unlock:c,onBlur:c,onFocus:c,onGameBlur:function(){this.gameLostFocus=!0,this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.gameLostFocus=!1,this.pauseOnBlur&&this.onFocus()},update:function(g,p){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(l.UNLOCKED,this));for(var x=this.sounds.length-1;x>=0;x--)this.sounds[x].pendingRemove&&this.sounds.splice(x,1);this.sounds.forEach(function(T){T.update(g,p)})},destroy:function(){this.game.events.off(h.BLUR,this.onGameBlur,this),this.game.events.off(h.FOCUS,this.onGameFocus,this),this.game.events.off(h.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.listenerPosition=null,this.game=null},forEachActiveSound:function(g,p){var x=this;this.sounds.forEach(function(T,E){T&&!T.pendingRemove&&g.call(p||x,T,E,x.sounds)})},setRate:function(g){return this.rate=g,this},rate:{get:function(){return this._rate},set:function(g){this._rate=g,this.forEachActiveSound(function(p){p.calculateRate()}),this.emit(l.GLOBAL_RATE,this,g)}},setDetune:function(g){return this.detune=g,this},detune:{get:function(){return this._detune},set:function(g){this._detune=g,this.forEachActiveSound(function(p){p.calculateRate()}),this.emit(l.GLOBAL_DETUNE,this,g)}}});r.exports=v}),84191:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(27622),m=e(17546),d=e(55491),l={create:function(h){var n=h.config.audio,a=h.device.audio;return n.noAudio||!a.webAudio&&!a.audioData?new m(h):a.webAudio&&!n.disableWebAudio?new d(h):new u(h)}};r.exports=l}),77578:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="complete"}),19679:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="decodedall"}),56951:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="decoded"}),16436:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="destroy"}),55154:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="detune"}),57818:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="detune"}),57890:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="mute"}),83022:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="rate"}),99170:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="volume"}),64289:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="looped"}),67214:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="loop"}),53128:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="mute"}),73078:(r=>{/**
 * @author       pi-kei
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pan"}),76763:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pauseall"}),88426:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pause"}),13765:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="play"}),80291:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="rate"}),11124:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="resumeall"}),55382:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="resume"}),71157:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="seek"}),31776:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="stopall"}),39450:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="stop"}),21939:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="unlocked"}),33019:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="volume"}),76038:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={COMPLETE:e(77578),DECODED:e(56951),DECODED_ALL:e(19679),DESTROY:e(16436),DETUNE:e(55154),GLOBAL_DETUNE:e(57818),GLOBAL_MUTE:e(57890),GLOBAL_RATE:e(83022),GLOBAL_VOLUME:e(99170),LOOP:e(67214),LOOPED:e(64289),MUTE:e(53128),PAN:e(73078),PAUSE_ALL:e(76763),PAUSE:e(88426),PLAY:e(13765),RATE:e(80291),RESUME_ALL:e(11124),RESUME:e(55382),SEEK:e(71157),STOP_ALL:e(31776),STOP:e(39450),UNLOCKED:e(21939),VOLUME:e(33019)}}),34350:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(25798),m=e(56694),d=e(76038),l=e(82897),h=new m({Extends:u,initialize:function(a,c,o){if(o===void 0&&(o={}),this.tags=a.game.cache.audio.get(c),!this.tags)throw new Error('No cached audio asset with key "'+c);this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,u.call(this,a,c,o)},play:function(n,a){return this.manager.isLocked(this,"play",[n,a])||!u.prototype.play.call(this,n,a)||!this.pickAndPlayAudioTag()?!1:(this.emit(d.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!u.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(d.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!u.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(d.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!u.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(d.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var n=this.currentConfig.seek,a=this.currentConfig.delay,c=(this.currentMarker?this.currentMarker.start:0)+n;return this.previousTime=c,this.audio.currentTime=c,this.applyConfig(),a===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+a*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var n=0;n<this.tags.length;n++){var a=this.tags[n];if(a.dataset.used==="false")return a.dataset.used="true",this.audio=a,!0}if(!this.manager.override)return!1;var c=[];this.manager.forEachActiveSound(function(v){v.key===this.key&&v.audio&&c.push(v)},this),c.sort(function(v,g){return v.loop===g.loop?g.seek/g.duration-v.seek/v.duration:v.loop?1:-1});var o=c[0];return this.audio=o.audio,o.reset(),o.audio=null,o.startTime=0,o.previousTime=0,!0},playCatchPromise:function(){var n=this.audio.play();n&&n.catch(function(a){console.warn(a)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){u.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(n){if(this.isPlaying){if(this.startTime>0){this.startTime<n-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,n-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var a=this.currentMarker?this.currentMarker.start:0,c=a+this.duration,o=this.audio.currentTime;if(this.currentConfig.loop)o>=c-this.manager.loopEndOffset?(this.audio.currentTime=a+Math.max(0,o-c),o=this.audio.currentTime):o<a&&(this.audio.currentTime+=a,o=this.audio.currentTime),o<this.previousTime&&this.emit(d.LOOPED,this);else if(o>=c){this.reset(),this.stopAndReleaseAudioTag(),this.emit(d.COMPLETE,this);return}this.previousTime=o}},destroy:function(){u.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=l(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){u.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(n){this.currentConfig.mute=n,!this.manager.isLocked(this,"mute",n)&&(this.updateMute(),this.emit(d.MUTE,this,n))}},setMute:function(n){return this.mute=n,this},volume:{get:function(){return this.currentConfig.volume},set:function(n){this.currentConfig.volume=n,!this.manager.isLocked(this,"volume",n)&&(this.updateVolume(),this.emit(d.VOLUME,this,n))}},setVolume:function(n){return this.volume=n,this},rate:{get:function(){return this.currentConfig.rate},set:function(n){this.currentConfig.rate=n,!this.manager.isLocked(this,d.RATE,n)&&(this.calculateRate(),this.emit(d.RATE,this,n))}},setRate:function(n){return this.rate=n,this},detune:{get:function(){return this.currentConfig.detune},set:function(n){this.currentConfig.detune=n,!this.manager.isLocked(this,d.DETUNE,n)&&(this.calculateRate(),this.emit(d.DETUNE,this,n))}},setDetune:function(n){return this.detune=n,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(n){this.manager.isLocked(this,"seek",n)||this.startTime>0||(this.isPlaying||this.isPaused)&&(n=Math.min(Math.max(0,n),this.duration),this.isPlaying?(this.previousTime=n,this.audio.currentTime=n):this.isPaused&&(this.currentConfig.seek=n),this.emit(d.SEEK,this,n))}},setSeek:function(n){return this.seek=n,this},loop:{get:function(){return this.currentConfig.loop},set:function(n){this.currentConfig.loop=n,!this.manager.isLocked(this,"loop",n)&&(this.audio&&(this.audio.loop=n),this.emit(d.LOOP,this,n))}},setLoop:function(n){return this.loop=n,this},pan:{get:function(){return this.currentConfig.pan},set:function(n){this.currentConfig.pan=n,this.emit(d.PAN,this,n)}},setPan:function(n){return this.pan=n,this}});r.exports=h}),27622:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(12486),m=e(56694),d=e(76038),l=e(34350),h=new m({Extends:u,initialize:function(a){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,u.call(this,a)},add:function(n,a){var c=new l(this,n,a);return this.sounds.push(c),c},unlock:function(){this.locked=!1;var n=this;if(this.game.cache.audio.entries.each(function(v,g){for(var p=0;p<g.length;p++)if(g[p].dataset.locked==="true")return n.locked=!0,!1;return!0}),!!this.locked){var a=!1,c=function(){a=!0},o=function(){if(a){a=!1;return}document.body.removeEventListener("touchmove",c),document.body.removeEventListener("touchend",o);var v=[];if(n.game.cache.audio.entries.each(function(p,x){for(var T=0;T<x.length;T++){var E=x[T];E.dataset.locked==="true"&&v.push(E)}return!0}),v.length!==0){var g=v[v.length-1];g.oncanplaythrough=function(){g.oncanplaythrough=null,v.forEach(function(p){p.dataset.locked="false"}),n.unlocked=!0},v.forEach(function(p){p.load()})}};this.once(d.UNLOCKED,function(){for(this.forEachActiveSound(function(g){g.currentMarker===null&&g.duration===0&&(g.duration=g.tags[0].duration),g.totalDuration=g.tags[0].duration});this.lockedActionsQueue.length;){var v=this.lockedActionsQueue.shift();v.sound[v.prop].apply?v.sound[v.prop].apply(v.sound,v.value||[]):v.sound[v.prop]=v.value}},this),document.body.addEventListener("touchmove",c,!1),document.body.addEventListener("touchend",o,!1)}},onBlur:function(){this.forEachActiveSound(function(n){n.isPlaying&&(this.onBlurPausedSounds.push(n),n.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(n){n.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){u.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(n,a,c){return n.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:n,prop:a,value:c}),!0):!1},setMute:function(n){return this.mute=n,this},mute:{get:function(){return this._mute},set:function(n){this._mute=n,this.forEachActiveSound(function(a){a.updateMute()}),this.emit(d.GLOBAL_MUTE,this,n)}},setVolume:function(n){return this.volume=n,this},volume:{get:function(){return this._volume},set:function(n){this._volume=n,this.forEachActiveSound(function(a){a.updateVolume()}),this.emit(d.GLOBAL_VOLUME,this,n)}}});r.exports=h}),56751:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={SoundManagerCreator:e(84191),Events:e(76038),BaseSound:e(25798),BaseSoundManager:e(12486),WebAudioSound:e(96008),WebAudioSoundManager:e(55491),HTML5AudioSound:e(34350),HTML5AudioSoundManager:e(27622),NoAudioSound:e(38662),NoAudioSoundManager:e(17546)}}),38662:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(25798),m=e(56694),d=e(6659),l=e(98611),h=e(72283),n=function(){return!1},a=function(){return null},c=function(){return this},o=new m({Extends:d,initialize:function(g,p,x){x===void 0&&(x={}),d.call(this),this.manager=g,this.key=p,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=l({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},x),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:n,updateMarker:n,removeMarker:a,play:n,pause:n,resume:n,stop:n,setMute:c,setVolume:c,setRate:c,setDetune:c,setSeek:c,setLoop:c,setPan:c,applyConfig:a,resetConfig:a,update:h,calculateRate:a,destroy:function(){u.prototype.destroy.call(this)}});r.exports=o}),17546:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(12486),m=e(56694),d=e(6659),l=e(38662),h=e(72283),n=new m({Extends:d,initialize:function(c){d.call(this),this.game=c,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(a,c){var o=new l(this,a,c);return this.sounds.push(o),o},addAudioSprite:function(a,c){var o=this.add(a,c);return o.spritemap={},o},get:function(a){return u.prototype.get.call(this,a)},getAll:function(a){return u.prototype.getAll.call(this,a)},play:function(a,c){return!1},playAudioSprite:function(a,c,o){return!1},remove:function(a){return u.prototype.remove.call(this,a)},removeAll:function(){return u.prototype.removeAll.call(this)},removeByKey:function(a){return u.prototype.removeByKey.call(this,a)},stopByKey:function(a){return u.prototype.stopByKey.call(this,a)},onBlur:h,onFocus:h,onGameBlur:h,onGameFocus:h,pauseAll:h,resumeAll:h,stopAll:h,update:h,setRate:h,setDetune:h,setMute:h,setVolume:h,unlock:h,forEachActiveSound:function(a,c){u.prototype.forEachActiveSound.call(this,a,c)},destroy:function(){u.prototype.destroy.call(this)}});r.exports=n}),96008:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(25798),m=e(56694),d=e(76038),l=e(72632),h=new m({Extends:u,initialize:function(a,c,o){if(o===void 0&&(o={}),this.audioBuffer=a.game.cache.audio.get(c),!this.audioBuffer)throw new Error('Audio key "'+c+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=a.context.createGain(),this.volumeNode=a.context.createGain(),this.pannerNode=null,this.spatialNode=null,this.spatialSource=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),a.context.createPanner&&(this.spatialNode=a.context.createPanner(),this.volumeNode.connect(this.spatialNode)),a.context.createStereoPanner?(this.pannerNode=a.context.createStereoPanner(),a.context.createPanner?this.spatialNode.connect(this.pannerNode):this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(a.destination)):a.context.createPanner?this.spatialNode.connect(a.destination):this.volumeNode.connect(a.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,u.call(this,a,c,o)},play:function(n,a){return u.prototype.play.call(this,n,a)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(d.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!u.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(d.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!u.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(d.RESUME,this),!0)},stop:function(){return u.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(d.STOP,this),!0):!1},createAndStartBufferSource:function(){var n=this.currentConfig.seek,a=this.currentConfig.delay,c=this.manager.context.currentTime+a,o=(this.currentMarker?this.currentMarker.start:0)+n,v=this.duration-n;this.playTime=c-n,this.startTime=c,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,c),Math.max(0,o),Math.max(0,v)),this.resetConfig()},createAndStartLoopBufferSource:function(){var n=this.getLoopTime(),a=this.currentMarker?this.currentMarker.start:0,c=this.duration;this.loopTime=n,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,n),Math.max(0,a),Math.max(0,c))},createBufferSource:function(){var n=this,a=this.manager.context.createBufferSource();return a.buffer=this.audioBuffer,a.connect(this.muteNode),a.onended=function(c){c.target===n.source&&(n.currentConfig.loop?n.hasLooped=!0:n.hasEnded=!0)},a},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1});var n=this.currentConfig.source;if(n&&this.manager.context.createPanner){var a=this.spatialNode;a.panningModel=l(n,"panningModel","equalpower"),a.distanceModel=l(n,"distanceModel","inverse"),a.orientationX.value=l(n,"orientationX",0),a.orientationY.value=l(n,"orientationY",0),a.orientationZ.value=l(n,"orientationZ",-1),a.refDistance=l(n,"refDistance",1),a.maxDistance=l(n,"maxDistance",1e4),a.rolloffFactor=l(n,"rolloffFactor",1),a.coneInnerAngle=l(n,"coneInnerAngle",360),a.coneOuterAngle=l(n,"coneOuterAngle",0),a.coneOuterGain=l(n,"coneOuterGain",0),this.spatialSource=l(n,"follow",null),this.spatialSource||(a.positionX.value=l(n,"x",0),a.positionY.value=l(n,"y",0),a.positionZ.value=l(n,"z",0))}u.prototype.applyConfig.call(this)},x:{get:function(){return this.spatialNode?this.spatialNode.positionX:0},set:function(n){this.spatialNode&&(this.spatialNode.positionX.value=n)}},y:{get:function(){return this.spatialNode?this.spatialNode.positionY:0},set:function(n){this.spatialNode&&(this.spatialNode.positionY.value=n)}},update:function(){if(this.isPlaying&&this.spatialSource){var n=l(this.spatialSource,"x",null),a=l(this.spatialSource,"y",null);n&&n!==this._spatialx&&(this._spatialx=this.spatialNode.positionX.value=n),a&&a!==this._spatialy&&(this._spatialy=this.spatialNode.positionY.value=a)}this.hasEnded?(this.hasEnded=!1,u.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(d.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(d.LOOPED,this))},destroy:function(){this.pendingRemove||(u.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.spatialNode&&(this.spatialNode.disconnect(),this.spatialNode=null,this.spatialSource=null),this.rateUpdates.length=0,this.rateUpdates=null)},calculateRate:function(){u.prototype.calculateRate.call(this);var n=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,n),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,n)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var n=0,a=0;a<this.rateUpdates.length;a++){var c=0;a<this.rateUpdates.length-1?c=this.rateUpdates[a+1].time:c=this.manager.context.currentTime-this.playTime,n+=(c-this.rateUpdates[a].time)*this.rateUpdates[a].rate}return n},getLoopTime:function(){for(var n=0,a=0;a<this.rateUpdates.length-1;a++)n+=(this.rateUpdates[a+1].time-this.rateUpdates[a].time)*this.rateUpdates[a].rate;var c=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+c.time+(this.duration-n)/c.rate},rate:{get:function(){return this.currentConfig.rate},set:function(n){this.currentConfig.rate=n,this.calculateRate(),this.emit(d.RATE,this,n)}},setRate:function(n){return this.rate=n,this},detune:{get:function(){return this.currentConfig.detune},set:function(n){this.currentConfig.detune=n,this.calculateRate(),this.emit(d.DETUNE,this,n)}},setDetune:function(n){return this.detune=n,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(n){this.currentConfig.mute=n,this.muteNode.gain.setValueAtTime(n?0:1,0),this.emit(d.MUTE,this,n)}},setMute:function(n){return this.mute=n,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(n){this.currentConfig.volume=n,this.volumeNode.gain.setValueAtTime(n,0),this.emit(d.VOLUME,this,n)}},setVolume:function(n){return this.volume=n,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(n){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(n=Math.min(Math.max(0,n),this.duration),this.currentConfig.seek=n,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(d.SEEK,this,n))}},setSeek:function(n){return this.seek=n,this},loop:{get:function(){return this.currentConfig.loop},set:function(n){this.currentConfig.loop=n,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),n&&this.createAndStartLoopBufferSource()),this.emit(d.LOOP,this,n)}},setLoop:function(n){return this.loop=n,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(n){this.currentConfig.pan=n,this.pannerNode&&this.pannerNode.pan.setValueAtTime(n,this.manager.context.currentTime),this.emit(d.PAN,this,n)}},setPan:function(n){return this.pan=n,this}});r.exports=h}),55491:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(82329),m=e(12486),d=e(56694),l=e(76038),h=e(97081),n=e(96008),a=e(72632),c=new d({Extends:m,initialize:function(v){this.context=this.createAudioContext(v),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended"&&("ontouchstart"in window||"onclick"in window),m.call(this,v),this.locked&&v.isBooted?this.unlock():v.events.once(h.BOOT,this.unlock,this)},createAudioContext:function(o){var v=o.config.audio;if(v.context)return v.context.resume(),v.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(o){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=o,this.masterMuteNode=o.createGain(),this.masterVolumeNode=o.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(o.destination),this.destination=this.masterMuteNode,this},add:function(o,v){var g=new n(this,o,v);return this.sounds.push(g),g},decodeAudio:function(o,v){var g;Array.isArray(o)?g=o:g=[{key:o,data:v}];for(var p=this.game.cache.audio,x=g.length,T=0;T<g.length;T++){var E=g[T],M=E.key,P=E.data;typeof P=="string"&&(P=u(P));var w=(function(A,O){p.add(A,O),this.emit(l.DECODED,A),x--,x===0&&this.emit(l.DECODED_ALL)}).bind(this,M),R=(function(A,O){console.error("Error decoding audio: "+A+" - ",O?O.message:""),x--,x===0&&this.emit(l.DECODED_ALL)}).bind(this,M);this.context.decodeAudioData(P,w,R)}},setListenerPosition:function(o,v){return o===void 0&&(o=this.game.scale.width/2),v===void 0&&(v=this.game.scale.height/2),this.listenerPosition.set(o,v),this},unlock:function(){var o=this,v=document.body,g=function p(){if(o.context&&v){var x=v.removeEventListener;o.context.resume().then(function(){x("touchstart",p),x("touchend",p),x("click",p),x("keydown",p),o.unlocked=!0},function(){x("touchstart",p),x("touchend",p),x("click",p),x("keydown",p)})}};v&&(v.addEventListener("touchstart",g,!1),v.addEventListener("touchend",g,!1),v.addEventListener("click",g,!1),v.addEventListener("keydown",g,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var o=this.context;o&&!this.locked&&(o.state==="suspended"||o.state==="interrupted")&&o.resume()},update:function(o,v){var g=this.context.listener;if(g&&g.positionX!==void 0){var p=a(this.listenerPosition,"x",null),x=a(this.listenerPosition,"y",null);p&&p!==this._spatialx&&(this._spatialx=g.positionX.value=p),x&&x!==this._spatialy&&(this._spatialy=g.positionY.value=x)}m.prototype.update.call(this,o,v),this.gameLostFocus||this.onFocus()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var o=this;this.context.close().then(function(){o.context=null})}m.prototype.destroy.call(this)},setMute:function(o){return this.mute=o,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(o){this.masterMuteNode.gain.setValueAtTime(o?0:1,0),this.emit(l.GLOBAL_MUTE,this,o)}},setVolume:function(o){return this.volume=o,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(o){this.masterVolumeNode.gain.setValueAtTime(o,0),this.emit(l.GLOBAL_VOLUME,this,o)}}});r.exports=c}),71207:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(59959),m=e(56694),d=e(72283),l=e(17922),h=new m({initialize:function(a){this.parent=a,this.list=[],this.position=0,this.addCallback=d,this.removeCallback=d,this._sortKey=""},add:function(n,a){return a?u.Add(this.list,n):u.Add(this.list,n,0,this.addCallback,this)},addAt:function(n,a,c){return c?u.AddAt(this.list,n,a):u.AddAt(this.list,n,a,0,this.addCallback,this)},getAt:function(n){return this.list[n]},getIndex:function(n){return this.list.indexOf(n)},sort:function(n,a){return n?(a===void 0&&(a=function(c,o){return c[n]-o[n]}),l(this.list,a),this):this},getByName:function(n){return u.GetFirst(this.list,"name",n)},getRandom:function(n,a){return u.GetRandom(this.list,n,a)},getFirst:function(n,a,c,o){return u.GetFirst(this.list,n,a,c,o)},getAll:function(n,a,c,o){return u.GetAll(this.list,n,a,c,o)},count:function(n,a){return u.CountAllMatching(this.list,n,a)},swap:function(n,a){u.Swap(this.list,n,a)},moveTo:function(n,a){return u.MoveTo(this.list,n,a)},moveAbove:function(n,a){return u.MoveAbove(this.list,n,a)},moveBelow:function(n,a){return u.MoveBelow(this.list,n,a)},remove:function(n,a){return a?u.Remove(this.list,n):u.Remove(this.list,n,this.removeCallback,this)},removeAt:function(n,a){return a?u.RemoveAt(this.list,n):u.RemoveAt(this.list,n,this.removeCallback,this)},removeBetween:function(n,a,c){return c?u.RemoveBetween(this.list,n,a):u.RemoveBetween(this.list,n,a,this.removeCallback,this)},removeAll:function(n){for(var a=this.list.length;a--;)this.remove(this.list[a],n);return this},bringToTop:function(n){return u.BringToTop(this.list,n)},sendToBack:function(n){return u.SendToBack(this.list,n)},moveUp:function(n){return u.MoveUp(this.list,n),n},moveDown:function(n){return u.MoveDown(this.list,n),n},reverse:function(){return this.list.reverse(),this},shuffle:function(){return u.Shuffle(this.list),this},replace:function(n,a){return u.Replace(this.list,n,a)},exists:function(n){return this.list.indexOf(n)>-1},setAll:function(n,a,c,o){return u.SetAll(this.list,n,a,c,o),this},each:function(n,a){for(var c=[null],o=2;o<arguments.length;o++)c.push(arguments[o]);for(o=0;o<this.list.length;o++)c[0]=this.list[o],n.apply(a,c)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});r.exports=h}),33885:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=new u({initialize:function(l){if(this.entries={},this.size=0,Array.isArray(l))for(var h=0;h<l.length;h++)this.set(l[h][0],l[h][1])},set:function(d,l){return this.has(d)||this.size++,this.entries[d]=l,this},get:function(d){if(this.has(d))return this.entries[d]},getArray:function(){var d=[],l=this.entries;for(var h in l)d.push(l[h]);return d},has:function(d){return this.entries.hasOwnProperty(d)},delete:function(d){return this.has(d)&&(delete this.entries[d],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(d){delete this.entries[d]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var d=[],l=this.entries;for(var h in l)d.push(l[h]);return d},dump:function(){var d=this.entries;console.group("Map");for(var l in d)console.log(l,d[l]);console.groupEnd()},each:function(d){var l=this.entries;for(var h in l)if(d(h,l[h])===!1)break;return this},contains:function(d){var l=this.entries;for(var h in l)if(l[h]===d)return!0;return!1},merge:function(d,l){l===void 0&&(l=!1);var h=this.entries,n=d.entries;for(var a in n)h.hasOwnProperty(a)&&l?h[a]=n[a]:this.set(a,n[a]);return this}});r.exports=m}),74623:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(6659),d=e(36716),l=new u({Extends:m,initialize:function(){m.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},isActive:function(h){return this._active.indexOf(h)>-1},isPending:function(h){return this._toProcess>0&&this._pending.indexOf(h)>-1},isDestroying:function(h){return this._destroy.indexOf(h)>-1},add:function(h){return this.checkQueue&&this.isActive()&&!this.isDestroying()||this.isPending()||(this._pending.push(h),this._toProcess++),h},remove:function(h){if(this.isPending(h)){var n=this._pending,a=n.indexOf(h);a!==-1&&n.splice(a,1)}else this.isActive(h)&&(this._destroy.push(h),this._toProcess++);return h},removeAll:function(){for(var h=this._active,n=this._destroy,a=h.length;a--;)n.push(h[a]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var h=this._destroy,n=this._active,a,c;for(a=0;a<h.length;a++){c=h[a];var o=n.indexOf(c);o!==-1&&(n.splice(o,1),this.emit(d.PROCESS_QUEUE_REMOVE,c))}for(h.length=0,h=this._pending,a=0;a<h.length;a++)c=h[a],(!this.checkQueue||this.checkQueue&&n.indexOf(c)===-1)&&(n.push(c),this.emit(d.PROCESS_QUEUE_ADD,c));return h.length=0,this._toProcess=0,n},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});r.exports=l}),68687:((r,y,e)=>{/**
 * @author       Vladimir Agafonkin
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(53466);function m(P){if(!(this instanceof m))return new m(P);this._maxEntries=Math.max(4,P||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}m.prototype={all:function(){return this._all(this.data,[])},search:function(P){var w=this.data,R=[],A=this.toBBox;if(!T(P,w))return R;for(var O=[],F,b,D,I;w;){for(F=0,b=w.children.length;F<b;F++)D=w.children[F],I=w.leaf?A(D):D,T(P,I)&&(w.leaf?R.push(D):x(P,I)?this._all(D,R):O.push(D));w=O.pop()}return R},collides:function(P){var w=this.data,R=this.toBBox;if(!T(P,w))return!1;for(var A=[],O,F,b,D;w;){for(O=0,F=w.children.length;O<F;O++)if(b=w.children[O],D=w.leaf?R(b):b,T(P,D)){if(w.leaf||x(P,D))return!0;A.push(b)}w=A.pop()}return!1},load:function(P){if(!(P&&P.length))return this;if(P.length<this._minEntries){for(var w=0,R=P.length;w<R;w++)this.insert(P[w]);return this}var A=this._build(P.slice(),0,P.length-1,0);if(!this.data.children.length)this.data=A;else if(this.data.height===A.height)this._splitRoot(this.data,A);else{if(this.data.height<A.height){var O=this.data;this.data=A,A=O}this._insert(A,this.data.height-A.height-1,!0)}return this},insert:function(P){return P&&this._insert(P,this.data.height-1),this},clear:function(){return this.data=E([]),this},remove:function(P,w){if(!P)return this;for(var R=this.data,A=this.toBBox(P),O=[],F=[],b,D,I,B;R||O.length;){if(R||(R=O.pop(),D=O[O.length-1],b=F.pop(),B=!0),R.leaf&&(I=d(P,R.children,w),I!==-1))return R.children.splice(I,1),O.push(R),this._condense(O),this;!B&&!R.leaf&&x(R,A)?(O.push(R),F.push(b),b=0,D=R,R=R.children[0]):D?(b++,R=D.children[b],B=!1):R=null}return this},toBBox:function(P){return P},compareMinX:a,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(P){return this.data=P,this},_all:function(P,w){for(var R=[];P;)P.leaf?w.push.apply(w,P.children):R.push.apply(R,P.children),P=R.pop();return w},_build:function(P,w,R,A){var O=R-w+1,F=this._maxEntries,b;if(O<=F)return b=E(P.slice(w,R+1)),l(b,this.toBBox),b;A||(A=Math.ceil(Math.log(O)/Math.log(F)),F=Math.ceil(O/Math.pow(F,A-1))),b=E([]),b.leaf=!1,b.height=A;var D=Math.ceil(O/F),I=D*Math.ceil(Math.sqrt(F)),B,z,Y,X;for(M(P,w,R,I,this.compareMinX),B=w;B<=R;B+=I)for(Y=Math.min(B+I-1,R),M(P,B,Y,D,this.compareMinY),z=B;z<=Y;z+=D)X=Math.min(z+D-1,Y),b.children.push(this._build(P,z,X,A-1));return l(b,this.toBBox),b},_chooseSubtree:function(P,w,R,A){for(var O,F,b,D,I,B,z,Y;A.push(w),!(w.leaf||A.length-1===R);){for(z=Y=1/0,O=0,F=w.children.length;O<F;O++)b=w.children[O],I=o(b),B=g(P,b)-I,B<Y?(Y=B,z=I<z?I:z,D=b):B===Y&&I<z&&(z=I,D=b);w=D||w.children[0]}return w},_insert:function(P,w,R){var A=this.toBBox,O=R?P:A(P),F=[],b=this._chooseSubtree(O,this.data,w,F);for(b.children.push(P),n(b,O);w>=0&&F[w].children.length>this._maxEntries;)this._split(F,w),w--;this._adjustParentBBoxes(O,F,w)},_split:function(P,w){var R=P[w],A=R.children.length,O=this._minEntries;this._chooseSplitAxis(R,O,A);var F=this._chooseSplitIndex(R,O,A),b=E(R.children.splice(F,R.children.length-F));b.height=R.height,b.leaf=R.leaf,l(R,this.toBBox),l(b,this.toBBox),w?P[w-1].children.push(b):this._splitRoot(R,b)},_splitRoot:function(P,w){this.data=E([P,w]),this.data.height=P.height+1,this.data.leaf=!1,l(this.data,this.toBBox)},_chooseSplitIndex:function(P,w,R){var A,O,F,b,D,I,B,z;for(I=B=1/0,A=w;A<=R-w;A++)O=h(P,0,A,this.toBBox),F=h(P,A,R,this.toBBox),b=p(O,F),D=o(O)+o(F),b<I?(I=b,z=A,B=D<B?D:B):b===I&&D<B&&(B=D,z=A);return z},_chooseSplitAxis:function(P,w,R){var A=P.leaf?this.compareMinX:a,O=P.leaf?this.compareMinY:c,F=this._allDistMargin(P,w,R,A),b=this._allDistMargin(P,w,R,O);F<b&&P.children.sort(A)},_allDistMargin:function(P,w,R,A){P.children.sort(A);var O=this.toBBox,F=h(P,0,w,O),b=h(P,R-w,R,O),D=v(F)+v(b),I,B;for(I=w;I<R-w;I++)B=P.children[I],n(F,P.leaf?O(B):B),D+=v(F);for(I=R-w-1;I>=w;I--)B=P.children[I],n(b,P.leaf?O(B):B),D+=v(b);return D},_adjustParentBBoxes:function(P,w,R){for(var A=R;A>=0;A--)n(w[A],P)},_condense:function(P){for(var w=P.length-1,R;w>=0;w--)P[w].children.length===0?w>0?(R=P[w-1].children,R.splice(R.indexOf(P[w]),1)):this.clear():l(P[w],this.toBBox)},compareMinX:function(P,w){return P.left-w.left},compareMinY:function(P,w){return P.top-w.top},toBBox:function(P){return{minX:P.left,minY:P.top,maxX:P.right,maxY:P.bottom}}};function d(P,w,R){if(!R)return w.indexOf(P);for(var A=0;A<w.length;A++)if(R(P,w[A]))return A;return-1}function l(P,w){h(P,0,P.children.length,w,P)}function h(P,w,R,A,O){O||(O=E(null)),O.minX=1/0,O.minY=1/0,O.maxX=-1/0,O.maxY=-1/0;for(var F=w,b;F<R;F++)b=P.children[F],n(O,P.leaf?A(b):b);return O}function n(P,w){return P.minX=Math.min(P.minX,w.minX),P.minY=Math.min(P.minY,w.minY),P.maxX=Math.max(P.maxX,w.maxX),P.maxY=Math.max(P.maxY,w.maxY),P}function a(P,w){return P.minX-w.minX}function c(P,w){return P.minY-w.minY}function o(P){return(P.maxX-P.minX)*(P.maxY-P.minY)}function v(P){return P.maxX-P.minX+(P.maxY-P.minY)}function g(P,w){return(Math.max(w.maxX,P.maxX)-Math.min(w.minX,P.minX))*(Math.max(w.maxY,P.maxY)-Math.min(w.minY,P.minY))}function p(P,w){var R=Math.max(P.minX,w.minX),A=Math.max(P.minY,w.minY),O=Math.min(P.maxX,w.maxX),F=Math.min(P.maxY,w.maxY);return Math.max(0,O-R)*Math.max(0,F-A)}function x(P,w){return P.minX<=w.minX&&P.minY<=w.minY&&w.maxX<=P.maxX&&w.maxY<=P.maxY}function T(P,w){return w.minX<=P.maxX&&w.minY<=P.maxY&&w.maxX>=P.minX&&w.maxY>=P.minY}function E(P){return{children:P,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function M(P,w,R,A,O){for(var F=[w,R],b;F.length;)R=F.pop(),w=F.pop(),!(R-w<=A)&&(b=w+Math.ceil((R-w)/A/2)*A,u(P,b,w,R,O),F.push(w,b,b,R))}r.exports=m}),58403:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=new u({initialize:function(l){if(this.entries=[],Array.isArray(l))for(var h=0;h<l.length;h++)this.set(l[h])},set:function(d){return this.entries.indexOf(d)===-1&&this.entries.push(d),this},get:function(d,l){for(var h=0;h<this.entries.length;h++){var n=this.entries[h];if(n[d]===l)return n}},getArray:function(){return this.entries.slice(0)},delete:function(d){var l=this.entries.indexOf(d);return l>-1&&this.entries.splice(l,1),this},dump:function(){console.group("Set");for(var d=0;d<this.entries.length;d++){var l=this.entries[d];console.log(l)}console.groupEnd()},each:function(d,l){var h,n=this.entries.slice(),a=n.length;if(l)for(h=0;h<a&&d.call(l,n[h],h)!==!1;h++);else for(h=0;h<a&&d(n[h],h)!==!1;h++);return this},iterate:function(d,l){var h,n=this.entries.length;if(l)for(h=0;h<n&&d.call(l,this.entries[h],h)!==!1;h++);else for(h=0;h<n&&d(this.entries[h],h)!==!1;h++);return this},iterateLocal:function(d){var l,h=[];for(l=1;l<arguments.length;l++)h.push(arguments[l]);var n=this.entries.length;for(l=0;l<n;l++){var a=this.entries[l];a[d].apply(a,h)}return this},clear:function(){return this.entries.length=0,this},contains:function(d){return this.entries.indexOf(d)>-1},union:function(d){var l=new m;return d.entries.forEach(function(h){l.set(h)}),this.entries.forEach(function(h){l.set(h)}),l},intersect:function(d){var l=new m;return this.entries.forEach(function(h){d.contains(h)&&l.set(h)}),l},difference:function(d){var l=new m;return this.entries.forEach(function(h){d.contains(h)||l.set(h)}),l},size:{get:function(){return this.entries.length},set:function(d){return d<this.entries.length?this.entries.length=d:this.entries.length}}});r.exports=m}),90881:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(82897),m=e(56694),d=e(84314),l=e(93736),h=new m({initialize:function(a,c,o,v){a===void 0&&(a=0),c===void 0&&(c=a),o===void 0&&(o=0),v===void 0&&(v=null),this._width=a,this._height=c,this._parent=v,this.aspectMode=o,this.aspectRatio=c===0?1:a/c,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new l},setAspectMode:function(n){return n===void 0&&(n=0),this.aspectMode=n,this.setSize(this._width,this._height)},setSnap:function(n,a){return n===void 0&&(n=0),a===void 0&&(a=n),this.snapTo.set(n,a),this.setSize(this._width,this._height)},setParent:function(n){return this._parent=n,this.setSize(this._width,this._height)},setMin:function(n,a){return n===void 0&&(n=0),a===void 0&&(a=n),this.minWidth=u(n,0,this.maxWidth),this.minHeight=u(a,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(n,a){return n===void 0&&(n=Number.MAX_VALUE),a===void 0&&(a=n),this.maxWidth=u(n,this.minWidth,Number.MAX_VALUE),this.maxHeight=u(a,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(n,a){switch(n===void 0&&(n=0),a===void 0&&(a=n),this.aspectMode){case h.NONE:this._width=this.getNewWidth(d(n,this.snapTo.x)),this._height=this.getNewHeight(d(a,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case h.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(d(n,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case h.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(d(a,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case h.FIT:this.constrain(n,a,!0);break;case h.ENVELOP:this.constrain(n,a,!1);break}return this},setAspectRatio:function(n){return this.aspectRatio=n,this.setSize(this._width,this._height)},resize:function(n,a){return this._width=this.getNewWidth(d(n,this.snapTo.x)),this._height=this.getNewHeight(d(a,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(n,a){return a===void 0&&(a=!0),n=u(n,this.minWidth,this.maxWidth),a&&this._parent&&n>this._parent.width&&(n=Math.max(this.minWidth,this._parent.width)),n},getNewHeight:function(n,a){return a===void 0&&(a=!0),n=u(n,this.minHeight,this.maxHeight),a&&this._parent&&n>this._parent.height&&(n=Math.max(this.minHeight,this._parent.height)),n},constrain:function(n,a,c){n===void 0&&(n=0),a===void 0&&(a=n),c===void 0&&(c=!0),n=this.getNewWidth(n),a=this.getNewHeight(a);var o=this.snapTo,v=a===0?1:n/a;return c&&this.aspectRatio>v||!c&&this.aspectRatio<v?(n=d(n,o.x),a=n/this.aspectRatio,o.y>0&&(a=d(a,o.y),n=a*this.aspectRatio)):(c&&this.aspectRatio<v||!c&&this.aspectRatio>v)&&(a=d(a,o.y),n=a*this.aspectRatio,o.x>0&&(n=d(n,o.x),a=n*(1/this.aspectRatio))),this._width=n,this._height=a,this},fitTo:function(n,a){return this.constrain(n,a,!0)},envelop:function(n,a){return this.constrain(n,a,!1)},setWidth:function(n){return this.setSize(n,this._height)},setHeight:function(n){return this.setSize(this._width,n)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(n){n&&n.style&&(n.style.width=this._width+"px",n.style.height=this._height+"px")},copy:function(n){return n.setAspectMode(this.aspectMode),n.aspectRatio=this.aspectRatio,n.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(n){this.setSize(n,this._height)}},height:{get:function(){return this._height},set:function(n){this.setSize(this._width,n)}}});h.NONE=0,h.WIDTH_CONTROLS_HEIGHT=1,h.HEIGHT_CONTROLS_WIDTH=2,h.FIT=3,h.ENVELOP=4,r.exports=h}),94160:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="add"}),95393:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="remove"}),36716:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={PROCESS_QUEUE_ADD:e(94160),PROCESS_QUEUE_REMOVE:e(95393)}}),20010:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Events:e(36716),List:e(71207),Map:e(33885),ProcessQueue:e(74623),RTree:e(68687),Set:e(58403),Size:e(90881)}}),17487:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(82897),d=e(27119),l=e(86459),h=e(28621),n=e(31673),a=new u({Extends:n,initialize:function(o,v,g,p,x){n.call(this,o,v,g,p,x),this.add("__BASE",0,0,0,p,x),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.width=p,this.height=x,this.imageData=this.context.getImageData(0,0,p,x),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===l.WEBGL&&this.refresh(),this},draw:function(c,o,v,g){return g===void 0&&(g=!0),this.context.drawImage(v,c,o),g&&this.update(),this},drawFrame:function(c,o,v,g,p){v===void 0&&(v=0),g===void 0&&(g=0),p===void 0&&(p=!0);var x=this.manager.getFrame(c,o);if(x){var T=x.canvasData,E=x.cutWidth,M=x.cutHeight,P=x.source.resolution;this.context.drawImage(x.source.image,T.x,T.y,E,M,v,g,E/P,M/P),p&&this.update()}return this},setPixel:function(c,o,v,g,p,x){x===void 0&&(x=255),c=Math.abs(Math.floor(c)),o=Math.abs(Math.floor(o));var T=this.getIndex(c,o);if(T>-1){var E=this.context.getImageData(c,o,1,1);E.data[0]=v,E.data[1]=g,E.data[2]=p,E.data[3]=x,this.context.putImageData(E,c,o)}return this},putData:function(c,o,v,g,p,x,T){return g===void 0&&(g=0),p===void 0&&(p=0),x===void 0&&(x=c.width),T===void 0&&(T=c.height),this.context.putImageData(c,o,v,g,p,x,T),this},getData:function(c,o,v,g){c=m(Math.floor(c),0,this.width-1),o=m(Math.floor(o),0,this.height-1),v=m(v,1,this.width-c),g=m(g,1,this.height-o);var p=this.context.getImageData(c,o,v,g);return p},getPixel:function(c,o,v){v||(v=new d);var g=this.getIndex(c,o);if(g>-1){var p=this.data,x=p[g+0],T=p[g+1],E=p[g+2],M=p[g+3];v.setTo(x,T,E,M)}return v},getPixels:function(c,o,v,g){c===void 0&&(c=0),o===void 0&&(o=0),v===void 0&&(v=this.width),g===void 0&&(g=v),c=Math.abs(Math.round(c)),o=Math.abs(Math.round(o));for(var p=m(c,0,this.width),x=m(c+v,0,this.width),T=m(o,0,this.height),E=m(o+g,0,this.height),M=new d,P=[],w=T;w<E;w++){for(var R=[],A=p;A<x;A++)M=this.getPixel(A,w,M),R.push({x:A,y:w,color:M.color,alpha:M.alphaGL});P.push(R)}return P},getIndex:function(c,o){return c=Math.abs(Math.round(c)),o=Math.abs(Math.round(o)),c<this.width&&o<this.height?(c+o*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(c,o,v,g,p){return c===void 0&&(c=0),o===void 0&&(o=0),v===void 0&&(v=this.width),g===void 0&&(g=this.height),p===void 0&&(p=!0),this.context.clearRect(c,o,v,g),p&&this.update(),this},setSize:function(c,o){return o===void 0&&(o=c),(c!==this.width||o!==this.height)&&(this.canvas.width=c,this.canvas.height=o,this._source.width=c,this._source.height=o,this._source.isPowerOf2=h(c,o),this.frames.__BASE.setSize(c,o,0,0),this.width=c,this.height=o,this.refresh()),this},destroy:function(){n.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});r.exports=a}),845:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(95723),m=e(51052),d=e(61068),l=e(56694),h=e(86459),n=e(82047),a=e(72632),c=e(65641),o=e(37410),v=e(31673),g=e(75512),p=new l({Extends:v,initialize:function(T,E,M,P){M===void 0&&(M=256),P===void 0&&(P=256),this.type="DynamicTexture";var w=T.game.renderer,R=w&&w.type===h.CANVAS,A=R?d.create2D(this,M,P):[this];v.call(this,T,E,A,M,P),this.add("__BASE",0,0,0,M,P),this.renderer=w,this.isDrawing=!1,this.canvas=R?A:null,this.context=R?A.getContext("2d",{willReadFrequently:!0}):null,this.dirty=!1,this.isSpriteTexture=!0,this._eraseMode=!1,this.camera=new m(0,0,M,P).setScene(T.game.scene.systemScene,!1),this.renderTarget=R?null:new o(w,M,P,1,0,!1,!0,!0,!1),this.pipeline=R?null:w.pipelines.get(c.SINGLE_PIPELINE),this.setSize(M,P)},setSize:function(x,T){T===void 0&&(T=x);var E=this.get(),M=E.source;if(x!==this.width||T!==this.height){this.canvas&&(this.canvas.width=x,this.canvas.height=T);var P=this.renderTarget;P&&(P.resize(x,T),E.glTexture=P.texture,M.isRenderTexture=!0,M.isGLTexture=!0,M.glTexture=P.texture,M.glTexture.flipY=!0),this.camera.setSize(x,T),M.width=x,M.height=T,E.setSize(x,T),this.width=x,this.height=T}else{var w=this.getSourceImage();E.cutX+x>w.width&&(x=w.width-E.cutX),E.cutY+T>w.height&&(T=w.height-E.cutY),E.setSize(x,T,E.cutX,E.cutY)}return this},setIsSpriteTexture:function(x){return this.isSpriteTexture=x,this},fill:function(x,T,E,M,P,w){var R=this.camera,A=this.renderer;T===void 0&&(T=1),E===void 0&&(E=0),M===void 0&&(M=0),P===void 0&&(P=this.width),w===void 0&&(w=this.height);var O=x>>16&255,F=x>>8&255,b=x&255,D=this.renderTarget;if(R.preRender(),D){D.bind(!0);var I=this.pipeline.manager.set(this.pipeline),B=A.width/D.width,z=A.height/D.height;I.drawFillRect(E*B,M*z,P*B,w*z,g.getTintFromFloats(b/255,F/255,O/255,1),T),D.unbind(!0)}else{var Y=this.context;A.setContext(Y),Y.globalCompositeOperation="source-over",Y.fillStyle="rgba("+O+","+F+","+b+","+T+")",Y.fillRect(E,M,P,w),A.setContext()}return this.dirty=!0,this},clear:function(){if(this.dirty){var x=this.context,T=this.renderTarget;T?T.clear():x&&(x.save(),x.setTransform(1,0,0,1,0,0),x.clearRect(0,0,this.width,this.height),x.restore()),this.dirty=!1}return this},stamp:function(x,T,E,M,P){E===void 0&&(E=0),M===void 0&&(M=0);var w=a(P,"alpha",1),R=a(P,"tint",16777215),A=a(P,"angle",0),O=a(P,"rotation",0),F=a(P,"scale",1),b=a(P,"scaleX",F),D=a(P,"scaleY",F),I=a(P,"originX",.5),B=a(P,"originY",.5),z=a(P,"blendMode",0),Y=a(P,"erase",!1),X=a(P,"skipBatch",!1),H=this.manager.resetStamp(w,R);return H.setAngle(0),A!==0?H.setAngle(A):O!==0&&H.setRotation(O),H.setScale(b,D),H.setTexture(x,T),H.setOrigin(I,B),H.setBlendMode(z),Y&&(this._eraseMode=!0),X?this.batchGameObject(H,E,M):this.draw(H,E,M),Y&&(this._eraseMode=!1),this},erase:function(x,T,E){return this._eraseMode=!0,this.draw(x,T,E),this._eraseMode=!1,this},draw:function(x,T,E,M,P){return this.beginDraw(),this.batchDraw(x,T,E,M,P),this.endDraw(),this},drawFrame:function(x,T,E,M,P,w){return this.beginDraw(),this.batchDrawFrame(x,T,E,M,P,w),this.endDraw(),this},repeat:function(x,T,E,M,P,w,R,A,O){if(E===void 0&&(E=0),M===void 0&&(M=0),P===void 0&&(P=this.width),w===void 0&&(w=this.height),R===void 0&&(R=1),A===void 0&&(A=16777215),O===void 0&&(O=!1),x instanceof n?T=x:T=this.manager.getFrame(x,T),!T)return this;var F=this.manager.resetStamp(R,A);F.setFrame(T),F.setOrigin(0);var b=T.width,D=T.height;P=Math.floor(P),w=Math.floor(w);var I=Math.ceil(P/b),B=Math.ceil(w/D),z=I*b-P,Y=B*D-w;z>0&&(z=b-z),Y>0&&(Y=D-Y),E<0&&(I+=Math.ceil(Math.abs(E)/b)),M<0&&(B+=Math.ceil(Math.abs(M)/D));var X=E,H=M,N=!1,U=this.manager.stampCrop.setTo(0,0,b,D);O||this.beginDraw();for(var L=0;L<B;L++){if(H+D<0){H+=D;continue}for(var G=0;G<I;G++){if(N=!1,X+b<0){X+=b;continue}else X<0&&(N=!0,U.width=b+X,U.x=b-U.width);H<0&&(N=!0,U.height=D+H,U.y=D-U.height),z>0&&G===I-1&&(N=!0,U.width=z),Y>0&&L===B-1&&(N=!0,U.height=Y),N&&F.setCrop(U),this.batchGameObject(F,X,H),F.isCropped=!1,U.setTo(0,0,b,D),X+=b}X=E,H+=D}return O||this.endDraw(),this},beginDraw:function(){if(!this.isDrawing){var x=this.camera,T=this.renderer,E=this.renderTarget;x.preRender(),E?T.beginCapture(E.width,E.height):T.setContext(this.context),this.isDrawing=!0}return this},batchDraw:function(x,T,E,M,P){return Array.isArray(x)||(x=[x]),this.batchList(x,T,E,M,P),this},batchDrawFrame:function(x,T,E,M,P,w){E===void 0&&(E=0),M===void 0&&(M=0),P===void 0&&(P=1),w===void 0&&(w=16777215);var R=this.manager.getFrame(x,T);return R&&(this.renderTarget?this.pipeline.batchTextureFrame(R,E,M,w,P,this.camera.matrix,null):this.batchTextureFrame(R,E,M,P,w)),this},endDraw:function(x){if(x===void 0&&(x=this._eraseMode),this.isDrawing){var T=this.renderer,E=this.renderTarget;if(E){var M=T.endCapture(),P=T.pipelines.setUtility();P.blitFrame(M,E,1,!1,!1,x,this.isSpriteTexture),T.resetScissor(),T.resetViewport()}else T.setContext();this.dirty=!0,this.isDrawing=!1}return this},batchList:function(x,T,E,M,P){var w=x.length;if(w!==0)for(var R=0;R<w;R++){var A=x[R];!A||A===this||(A.renderWebGL||A.renderCanvas?this.batchGameObject(A,T,E):A.isParent||A.list?this.batchGroup(A.getChildren(),T,E):typeof A=="string"?this.batchTextureFrameKey(A,null,T,E,M,P):A instanceof n?this.batchTextureFrame(A,T,E,M,P):Array.isArray(A)&&this.batchList(A,T,E,M,P))}},batchGroup:function(x,T,E){T===void 0&&(T=0),E===void 0&&(E=0);for(var M=0;M<x.length;M++){var P=x[M];P.willRender(this.camera)&&this.batchGameObject(P,P.x+T,P.y+E)}},batchGameObject:function(x,T,E){T===void 0&&(T=x.x),E===void 0&&(E=x.y);var M=x.x,P=x.y,w=this.camera,R=this.renderer,A=this._eraseMode,O=x.mask;if(x.setPosition(T,E),this.canvas){if(A){var F=x.blendMode;x.blendMode=u.ERASE}O&&O.preRenderCanvas(R,x,w),x.renderCanvas(R,x,w,null),O&&O.postRenderCanvas(R,x,w),A&&(x.blendMode=F)}else R&&(O&&O.preRenderWebGL(R,x,w),A||R.setBlendMode(x.blendMode),x.renderWebGL(R,x,w),O&&O.postRenderWebGL(R,w,this.renderTarget));x.setPosition(M,P)},batchTextureFrameKey:function(x,T,E,M,P,w){var R=this.manager.getFrame(x,T);R&&this.batchTextureFrame(R,E,M,P,w)},batchTextureFrame:function(x,T,E,M,P){T===void 0&&(T=0),E===void 0&&(E=0),M===void 0&&(M=1),P===void 0&&(P=16777215);var w=this.camera.matrix,R=this.renderTarget;if(R)this.pipeline.batchTextureFrame(x,T,E,P,M,w,null);else{var A=this.context,O=x.canvasData,F=x.source.image;A.save(),A.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",A.globalAlpha=M,w.setToContext(A),O.width>0&&O.height>0&&A.drawImage(F,O.x,O.y,O.width,O.height,T,E,O.width,O.height),A.restore()}},snapshotArea:function(x,T,E,M,P,w,R){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,P,!1,x,T,E,M,w,R):this.renderer.snapshotCanvas(this.canvas,P,!1,x,T,E,M,w,R),this},snapshot:function(x,T,E){return this.snapshotArea(0,0,this.width,this.height,x,T,E)},snapshotPixel:function(x,T,E){return this.snapshotArea(x,T,1,1,E,"pixel")},getWebGLTexture:function(){if(this.renderTarget)return this.renderTarget.texture},renderWebGL:function(x,T,E,M){var P=this.manager.resetStamp();P.setTexture(this),P.setOrigin(0),P.renderWebGL(x,P,E,M)},renderCanvas:function(){},preDestroy:function(){d.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.camera.destroy(),this.stamp.destroy(),this.canvas=null,this.context=null,this.renderer=null,this.scene=null}});r.exports=p}),82047:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(82897),d=e(98611),l=new u({initialize:function(n,a,c,o,v,g,p){this.texture=n,this.name=a,this.source=n.source[c],this.sourceIndex=c,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(g,p,o,v)},setSize:function(h,n,a,c){a===void 0&&(a=0),c===void 0&&(c=0),this.cutX=a,this.cutY=c,this.cutWidth=h,this.cutHeight=n,this.width=h,this.height=n,this.halfWidth=Math.floor(h*.5),this.halfHeight=Math.floor(n*.5),this.centerX=Math.floor(h/2),this.centerY=Math.floor(n/2);var o=this.data,v=o.cut;v.x=a,v.y=c,v.w=h,v.h=n,v.r=a+h,v.b=c+n,o.sourceSize.w=h,o.sourceSize.h=n,o.spriteSourceSize.w=h,o.spriteSourceSize.h=n,o.radius=.5*Math.sqrt(h*h+n*n);var g=o.drawImage;return g.x=a,g.y=c,g.width=h,g.height=n,this.updateUVs()},setTrim:function(h,n,a,c,o,v){var g=this.data,p=g.spriteSourceSize;return g.trim=!0,g.sourceSize.w=h,g.sourceSize.h=n,p.x=a,p.y=c,p.w=o,p.h=v,p.r=a+o,p.b=c+v,this.x=a,this.y=c,this.width=o,this.height=v,this.halfWidth=o*.5,this.halfHeight=v*.5,this.centerX=Math.floor(o/2),this.centerY=Math.floor(v/2),this.updateUVs()},setCropUVs:function(h,n,a,c,o,v,g){var p=this.cutX,x=this.cutY,T=this.cutWidth,E=this.cutHeight,M=this.realWidth,P=this.realHeight;n=m(n,0,M),a=m(a,0,P),c=m(c,0,M-n),o=m(o,0,P-a);var w=p+n,R=x+a,A=c,O=o,F=this.data;if(F.trim){var b=F.spriteSourceSize;c=m(c,0,T-n),o=m(o,0,E-a);var D=n+c,I=a+o,B=!(b.r<n||b.b<a||b.x>D||b.y>I);if(B){var z=Math.max(b.x,n),Y=Math.max(b.y,a),X=Math.min(b.r,D)-z,H=Math.min(b.b,I)-Y;A=X,O=H,v?w=p+(T-(z-b.x)-X):w=p+(z-b.x),g?R=x+(E-(Y-b.y)-H):R=x+(Y-b.y),n=z,a=Y,c=X,o=H}else w=0,R=0,A=0,O=0}else v&&(w=p+(T-n-c)),g&&(R=x+(E-a-o));var N=this.source.width,U=this.source.height;return h.u0=Math.max(0,w/N),h.v0=Math.max(0,R/U),h.u1=Math.min(1,(w+A)/N),h.v1=Math.min(1,(R+O)/U),h.x=n,h.y=a,h.cx=w,h.cy=R,h.cw=A,h.ch=O,h.width=c,h.height=o,h.flipX=v,h.flipY=g,h},updateCropUVs:function(h,n,a){return this.setCropUVs(h,h.x,h.y,h.width,h.height,n,a)},setUVs:function(h,n,a,c,o,v){var g=this.data.drawImage;return g.width=h,g.height=n,this.u0=a,this.v0=c,this.u1=o,this.v1=v,this},updateUVs:function(){var h=this.cutX,n=this.cutY,a=this.cutWidth,c=this.cutHeight,o=this.data.drawImage;o.width=a,o.height=c;var v=this.source.width,g=this.source.height;return this.u0=h/v,this.v0=n/g,this.u1=(h+a)/v,this.v1=(n+c)/g,this},updateUVsInverted:function(){var h=this.source.width,n=this.source.height;return this.u0=(this.cutX+this.cutHeight)/h,this.v0=this.cutY/n,this.u1=this.cutX/h,this.v1=(this.cutY+this.cutWidth)/n,this},clone:function(){var h=new l(this.texture,this.name,this.sourceIndex);return h.cutX=this.cutX,h.cutY=this.cutY,h.cutWidth=this.cutWidth,h.cutHeight=this.cutHeight,h.x=this.x,h.y=this.y,h.width=this.width,h.height=this.height,h.halfWidth=this.halfWidth,h.halfHeight=this.halfHeight,h.centerX=this.centerX,h.centerY=this.centerY,h.rotated=this.rotated,h.data=d(!0,h.data,this.data),h.updateUVs(),h},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});r.exports=l}),31673:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(82047),d=e(32547),l='Texture "%s" has no frame "%s"',h=new u({initialize:function(a,c,o,v,g){Array.isArray(o)||(o=[o]),this.manager=a,this.key=c,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var p=0;p<o.length;p++)this.source.push(new d(this,o[p],v,g))},add:function(n,a,c,o,v,g){if(this.has(n))return null;var p=new m(this,n,a,c,o,v,g);return this.frames[n]=p,this.firstFrame==="__BASE"&&(this.firstFrame=n),this.frameTotal++,p},remove:function(n){if(this.has(n)){var a=this.get(n);return a.destroy(),delete this.frames[n],!0}return!1},has:function(n){return this.frames.hasOwnProperty(n)},get:function(n){n||(n=this.firstFrame);var a=this.frames[n];return a||(console.warn(l,this.key,n),a=this.frames[this.firstFrame]),a},getTextureSourceIndex:function(n){for(var a=0;a<this.source.length;a++)if(this.source[a]===n)return a;return-1},getFramesFromTextureSource:function(n,a){a===void 0&&(a=!1);var c=[];for(var o in this.frames)if(!(o==="__BASE"&&!a)){var v=this.frames[o];v.sourceIndex===n&&c.push(v)}return c},getFrameNames:function(n){n===void 0&&(n=!1);var a=Object.keys(this.frames);if(!n){var c=a.indexOf("__BASE");c!==-1&&a.splice(c,1)}return a},getSourceImage:function(n){(n==null||this.frameTotal===1)&&(n="__BASE");var a=this.frames[n];return a?a.source.image:(console.warn(l,this.key,n),this.frames.__BASE.source.image)},getDataSourceImage:function(n){(n==null||this.frameTotal===1)&&(n="__BASE");var a=this.frames[n],c;return a?c=a.sourceIndex:(console.warn(l,this.key,n),c=this.frames.__BASE.sourceIndex),this.dataSource[c].image},setDataSource:function(n){Array.isArray(n)||(n=[n]);for(var a=0;a<n.length;a++){var c=this.source[a];this.dataSource.push(new d(this,n[a],c.width,c.height))}},setFilter:function(n){var a;for(a=0;a<this.source.length;a++)this.source[a].setFilter(n);for(a=0;a<this.dataSource.length;a++)this.dataSource[a].setFilter(n)},destroy:function(){var n,a=this.source,c=this.dataSource;for(n=0;n<a.length;n++)a[n]&&a[n].destroy();for(n=0;n<c.length;n++)c[n]&&c[n].destroy();for(var o in this.frames){var v=this.frames[o];v&&v.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key),this.manager=null}});r.exports=h}),6237:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61068),m=e(17487),d=e(56694),l=e(27119),h=e(86459),n=e(845),a=e(6659),c=e(38203),o=e(82047),v=e(97081),g=e(52780),p=e(10850),x=e(1539),T=e(42911),E=e(69150),M=e(74118),P=e(31673),w=new d({Extends:a,initialize:function(A){a.call(this),this.game=A,this.name="TextureManager",this.list={},this._tempCanvas=u.create2D(this),this._tempContext=this._tempCanvas.getContext("2d",{willReadFrequently:!0}),this._pending=0,this.stamp,this.stampCrop=new M,this.silentWarnings=!1,A.events.once(v.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(c.LOAD,this.updatePending,this),this.on(c.ERROR,this.updatePending,this);var R=this.game.config;this.addBase64("__DEFAULT",R.defaultImage),this.addBase64("__MISSING",R.missingImage),this.addBase64("__WHITE",R.whiteImage),this.game.events.once(v.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(c.LOAD),this.off(c.ERROR),this.emit(c.READY),this.stamp=new x(this.game.scene.systemScene).setOrigin(0))},checkKey:function(R){return this.exists(R)?(this.silentWarnings||console.error("Texture key already in use: "+R),!1):!0},remove:function(R){if(typeof R=="string")if(this.exists(R))R=this.get(R);else return this.silentWarnings||console.warn("No texture found matching key: "+R),this;return this.list.hasOwnProperty(R.key)&&(R.destroy(),this.emit(c.REMOVE,R.key),this.emit(c.REMOVE_KEY+R.key)),this},removeKey:function(R){return this.list.hasOwnProperty(R)&&delete this.list[R],this},addBase64:function(R,A){if(this.checkKey(R)){var O=this,F=new Image;F.onerror=function(){O.emit(c.ERROR,R)},F.onload=function(){var b=O.create(R,F);E.Image(b,0),O.emit(c.ADD,R,b),O.emit(c.ADD_KEY+R,b),O.emit(c.LOAD,R,b)},F.src=A}return this},getBase64:function(R,A,O,F){O===void 0&&(O="image/png"),F===void 0&&(F=.92);var b="",D=this.getFrame(R,A);if(D&&(D.source.isRenderTexture||D.source.isGLTexture))this.silentWarnings||console.warn("Cannot getBase64 from WebGL Texture");else if(D){var I=D.canvasData,B=u.create2D(this,I.width,I.height),z=B.getContext("2d",{willReadFrequently:!0});I.width>0&&I.height>0&&z.drawImage(D.source.image,I.x,I.y,I.width,I.height,0,0,I.width,I.height),b=B.toDataURL(O,F),u.remove(B)}return b},addImage:function(R,A,O){var F=null;return this.checkKey(R)&&(F=this.create(R,A),E.Image(F,0),O&&F.setDataSource(O),this.emit(c.ADD,R,F),this.emit(c.ADD_KEY+R,F)),F},addGLTexture:function(R,A,O,F){var b=null;return this.checkKey(R)&&(O===void 0&&(O=A.width),F===void 0&&(F=A.height),b=this.create(R,A,O,F),b.add("__BASE",0,0,0,O,F),this.emit(c.ADD,R,b),this.emit(c.ADD_KEY+R,b)),b},addCompressedTexture:function(R,A,O){var F=null;if(this.checkKey(R)){if(F=this.create(R,A),F.add("__BASE",0,0,0,A.width,A.height),O)if(Array.isArray(O))for(var b=0;b<O.length;b++)E.JSONHash(F,b,O[b]);else E.JSONHash(F,0,O);this.emit(c.ADD,R,F),this.emit(c.ADD_KEY+R,F)}return F},addRenderTexture:function(R,A){var O=null;return this.checkKey(R)&&(O=this.create(R,A),O.add("__BASE",0,0,0,A.width,A.height),this.emit(c.ADD,R,O),this.emit(c.ADD_KEY+R,O)),O},generate:function(R,A){if(this.checkKey(R)){var O=u.create(this,1,1);return A.canvas=O,g(A),this.addCanvas(R,O)}else return null},createCanvas:function(R,A,O){if(A===void 0&&(A=256),O===void 0&&(O=256),this.checkKey(R)){var F=u.create(this,A,O,h.CANVAS,!0);return this.addCanvas(R,F)}return null},addCanvas:function(R,A,O){O===void 0&&(O=!1);var F=null;return O?F=new m(this,R,A,A.width,A.height):this.checkKey(R)&&(F=new m(this,R,A,A.width,A.height),this.list[R]=F,this.emit(c.ADD,R,F),this.emit(c.ADD_KEY+R,F)),F},addDynamicTexture:function(R,A,O){var F=null;return typeof R=="string"&&!this.exists(R)?F=new n(this,R,A,O):(F=R,R=F.key),this.checkKey(R)?(this.list[R]=F,this.emit(c.ADD,R,F),this.emit(c.ADD_KEY+R,F)):F=null,F},addAtlas:function(R,A,O,F){return Array.isArray(O.textures)||Array.isArray(O.frames)?this.addAtlasJSONArray(R,A,O,F):this.addAtlasJSONHash(R,A,O,F)},addAtlasJSONArray:function(R,A,O,F){var b=null;if(A instanceof P?(R=b.key,b=A):this.checkKey(R)&&(b=this.create(R,A)),b){if(Array.isArray(O))for(var D=O.length===1,I=0;I<b.source.length;I++){var B=D?O[0]:O[I];E.JSONArray(b,I,B)}else E.JSONArray(b,0,O);F&&b.setDataSource(F),this.emit(c.ADD,R,b),this.emit(c.ADD_KEY+R,b)}return b},addAtlasJSONHash:function(R,A,O,F){var b=null;if(A instanceof P?(R=b.key,b=A):this.checkKey(R)&&(b=this.create(R,A)),b){if(Array.isArray(O))for(var D=0;D<O.length;D++)E.JSONHash(b,D,O[D]);else E.JSONHash(b,0,O);F&&b.setDataSource(F),this.emit(c.ADD,R,b),this.emit(c.ADD_KEY+R,b)}return b},addAtlasXML:function(R,A,O,F){var b=null;return A instanceof P?(R=b.key,b=A):this.checkKey(R)&&(b=this.create(R,A)),b&&(E.AtlasXML(b,0,O),F&&b.setDataSource(F),this.emit(c.ADD,R,b),this.emit(c.ADD_KEY+R,b)),b},addUnityAtlas:function(R,A,O,F){var b=null;return A instanceof P?(R=b.key,b=A):this.checkKey(R)&&(b=this.create(R,A)),b&&(E.UnityYAML(b,0,O),F&&b.setDataSource(F),this.emit(c.ADD,R,b),this.emit(c.ADD_KEY+R,b)),b},addSpriteSheet:function(R,A,O,F){var b=null;if(A instanceof P?(R=b.key,b=A):this.checkKey(R)&&(b=this.create(R,A)),b){var D=b.source[0].width,I=b.source[0].height;E.SpriteSheet(b,0,0,0,D,I,O),F&&b.setDataSource(F),this.emit(c.ADD,R,b),this.emit(c.ADD_KEY+R,b)}return b},addSpriteSheetFromAtlas:function(R,A){if(!this.checkKey(R))return null;var O=p(A,"atlas",null),F=p(A,"frame",null);if(!(!O||!F)){var b=this.get(O),D=b.get(F);if(D){var I=this.create(R,D.source.image);return D.trimmed?E.SpriteSheetFromAtlas(I,D,A):E.SpriteSheet(I,0,D.cutX,D.cutY,D.cutWidth,D.cutHeight,A),this.emit(c.ADD,R,I),this.emit(c.ADD_KEY+R,I),I}}},create:function(R,A,O,F){var b=null;return this.checkKey(R)&&(b=new P(this,R,A,O,F),this.list[R]=b),b},exists:function(R){return this.list.hasOwnProperty(R)},get:function(R){return R===void 0&&(R="__DEFAULT"),this.list[R]?this.list[R]:R instanceof P?R:R instanceof o?R.texture:this.list.__MISSING},cloneFrame:function(R,A){if(this.list[R])return this.list[R].get(A).clone()},getFrame:function(R,A){if(this.list[R])return this.list[R].get(A)},parseFrame:function(R){if(R){if(typeof R=="string")return this.getFrame(R);if(Array.isArray(R)&&R.length===2)return this.getFrame(R[0],R[1]);if(T(R))return this.getFrame(R.key,R.frame);if(R instanceof P)return R.get();if(R instanceof o)return R}else return},getTextureKeys:function(){var R=[];for(var A in this.list)A!=="__DEFAULT"&&A!=="__MISSING"&&A!=="__WHITE"&&R.push(A);return R},getPixel:function(R,A,O,F){var b=this.getFrame(O,F);if(b){R-=b.x,A-=b.y;var D=b.data.cut;if(R+=D.x,A+=D.y,R>=D.x&&R<D.r&&A>=D.y&&A<D.b){var I=this._tempContext;I.clearRect(0,0,1,1),I.drawImage(b.source.image,R,A,1,1,0,0,1,1);var B=I.getImageData(0,0,1,1);return new l(B.data[0],B.data[1],B.data[2],B.data[3])}}return null},getPixelAlpha:function(R,A,O,F){var b=this.getFrame(O,F);if(b){R-=b.x,A-=b.y;var D=b.data.cut;if(R+=D.x,A+=D.y,R>=D.x&&R<D.r&&A>=D.y&&A<D.b){var I=this._tempContext;I.clearRect(0,0,1,1),I.drawImage(b.source.image,R,A,1,1,0,0,1,1);var B=I.getImageData(0,0,1,1);return B.data[3]}}return null},setTexture:function(R,A,O){return this.list[A]&&(R.texture=this.list[A],R.frame=R.texture.get(O)),R},renameTexture:function(R,A){var O=this.get(R);return O&&R!==A?(O.key=A,this.list[A]=O,delete this.list[R],!0):!1},each:function(R,A){for(var O=[null],F=1;F<arguments.length;F++)O.push(arguments[F]);for(var b in this.list)O[0]=this.list[b],R.apply(A,O)},resetStamp:function(R,A){R===void 0&&(R=1),A===void 0&&(A=16777215);var O=this.stamp;return O.setCrop(),O.setPosition(0),O.setAngle(0),O.setScale(1),O.setAlpha(R),O.setTint(A),O},destroy:function(){for(var R in this.list)this.list[R].destroy();this.list={},this.stamp.destroy(),this.game=null,this.stamp=null,u.remove(this._tempCanvas)}});r.exports=w}),32547:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61068),m=e(56694),d=e(28621),l=e(27394),h=new m({initialize:function(a,c,o,v,g){g===void 0&&(g=!1);var p=a.manager.game;this.renderer=p.renderer,this.texture=a,this.source=c,this.image=c.compressed?null:c,this.compressionAlgorithm=c.compressed?c.format:null,this.resolution=1,this.width=o||c.naturalWidth||c.videoWidth||c.width||0,this.height=v||c.naturalHeight||c.videoHeight||c.height||0,this.scaleMode=l.DEFAULT,this.isCanvas=c instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&c instanceof HTMLVideoElement,this.isRenderTexture=c.type==="RenderTexture"||c.type==="DynamicTexture",this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&c instanceof WebGLTexture,this.isPowerOf2=d(this.width,this.height),this.glTexture=null,this.flipY=g,this.init(p)},init:function(n){var a=this.renderer;if(a){var c=this.source;if(a.gl){var o=this.image,v=this.flipY,g=this.width,p=this.height,x=this.scaleMode;this.isCanvas?this.glTexture=a.createCanvasTexture(o,!1,v):this.isVideo?this.glTexture=a.createVideoTexture(o,!1,v):this.isRenderTexture?this.glTexture=a.createTextureFromSource(null,g,p,x):this.isGLTexture?this.glTexture=c:this.compressionAlgorithm?this.glTexture=a.createTextureFromSource(c):this.glTexture=a.createTextureFromSource(o,g,p,x)}else this.isRenderTexture&&(this.image=c.canvas)}n.config.antialias||this.setFilter(1)},setFilter:function(n){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,n),this.scaleMode=n},setFlipY:function(n){return n===void 0&&(n=!0),this.flipY=n,this},update:function(){var n=this.renderer,a=this.image,c=this.flipY,o=n.gl;o&&this.isCanvas?this.glTexture=n.updateCanvasTexture(a,this.glTexture,c):o&&this.isVideo&&(this.glTexture=n.updateVideoTexture(a,this.glTexture,c))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture,!0),this.isCanvas&&u.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});r.exports=h}),65154:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={LINEAR:0,NEAREST:1};r.exports=y}),49644:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="addtexture"}),29569:(r=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="addtexture-"}),60079:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="onerror"}),72665:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="onload"}),93006:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="ready"}),69018:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="removetexture"}),85549:(r=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="removetexture-"}),38203:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={ADD:e(49644),ADD_KEY:e(29569),ERROR:e(60079),LOAD:e(72665),READY:e(93006),REMOVE:e(69018),REMOVE_KEY:e(85549)}}),87499:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(98611),m=e(65154),d={CanvasTexture:e(17487),DynamicTexture:e(845),Events:e(38203),FilterMode:m,Frame:e(82047),Parsers:e(69150),Texture:e(31673),TextureManager:e(6237),TextureSource:e(32547)};d=u(!1,d,m),r.exports=d}),35082:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){if(!m.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var d=e.source[u];e.add("__BASE",u,0,0,d.width,d.height);for(var l=m.getElementsByTagName("SubTexture"),h,n=0;n<l.length;n++){var a=l[n].attributes,c=a.name.value,o=parseInt(a.x.value,10),v=parseInt(a.y.value,10),g=parseInt(a.width.value,10),p=parseInt(a.height.value,10);if(h=e.add(c,u,o,v,g,p),a.frameX){var x=Math.abs(parseInt(a.frameX.value,10)),T=Math.abs(parseInt(a.frameY.value,10)),E=parseInt(a.frameWidth.value,10),M=parseInt(a.frameHeight.value,10);h.setTrim(g,p,x,T,E,M)}}return e};r.exports=y}),83332:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){var m=e.source[u];return e.add("__BASE",u,0,0,m.width,m.height),e};r.exports=y}),21560:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){var m=e.source[u];return e.add("__BASE",u,0,0,m.width,m.height),e};r.exports=y}),64423:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(32742),m=function(d,l,h){if(!h.frames&&!h.textures){console.warn("Invalid Texture Atlas JSON Array");return}var n=d.source[l];d.add("__BASE",l,0,0,n.width,n.height);for(var a=Array.isArray(h.textures)?h.textures[l].frames:h.frames,c,o=0;o<a.length;o++){var v=a[o];if(c=d.add(v.filename,l,v.frame.x,v.frame.y,v.frame.w,v.frame.h),!c){console.warn("Invalid atlas json, frame already exists: "+v.filename);continue}v.trimmed&&c.setTrim(v.sourceSize.w,v.sourceSize.h,v.spriteSourceSize.x,v.spriteSourceSize.y,v.spriteSourceSize.w,v.spriteSourceSize.h),v.rotated&&(c.rotated=!0,c.updateUVsInverted());var g=v.anchor||v.pivot;g&&(c.customPivot=!0,c.pivotX=g.x,c.pivotY=g.y),c.customData=u(v)}for(var p in h)p!=="frames"&&(Array.isArray(h[p])?d.customData[p]=h[p].slice(0):d.customData[p]=h[p]);return d};r.exports=m}),17264:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(32742),m=function(d,l,h){if(!h.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var n=d.source[l];d.add("__BASE",l,0,0,n.width,n.height);var a=h.frames,c;for(var o in a)if(a.hasOwnProperty(o)){var v=a[o];if(c=d.add(o,l,v.frame.x,v.frame.y,v.frame.w,v.frame.h),!c){console.warn("Invalid atlas json, frame already exists: "+o);continue}v.trimmed&&c.setTrim(v.sourceSize.w,v.sourceSize.h,v.spriteSourceSize.x,v.spriteSourceSize.y,v.spriteSourceSize.w,v.spriteSourceSize.h),v.rotated&&(c.rotated=!0,c.updateUVsInverted());var g=v.anchor||v.pivot;g&&(c.customPivot=!0,c.pivotX=g.x,c.pivotY=g.y),c.customData=u(v)}for(var p in h)p!=="frames"&&(Array.isArray(h[p])?d.customData[p]=h[p].slice(0):d.customData[p]=h[p]);return d};r.exports=m}),67409:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){var u=[171,75,84,88,32,49,49,187,13,10,26,10],m,d=new Uint8Array(e,0,12);for(m=0;m<d.length;m++)if(d[m]!==u[m]){console.warn("KTXParser - Invalid file format");return}var l=Uint32Array.BYTES_PER_ELEMENT,h=new DataView(e,12,13*l),n=h.getUint32(0,!0)===67305985,a=h.getUint32(1*l,n);if(a!==0){console.warn("KTXParser - Only compressed formats supported");return}var c=h.getUint32(4*l,n),o=h.getUint32(6*l,n),v=h.getUint32(7*l,n),g=Math.max(1,h.getUint32(11*l,n)),p=h.getUint32(12*l,n),x=new Array(g),T=64+p,E=o,M=v;for(m=0;m<g;m++){var P=new Int32Array(e,T,1)[0];T+=4,x[m]={data:new Uint8Array(e,T,P),width:E,height:M},E=Math.max(1,E>>1),M=Math.max(1,M>>1),T+=P}return{mipmaps:x,width:o,height:v,internalFormat:c,compressed:!0,generateMipmap:!1}};r.exports=y}),24904:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function y(R,A,O,F,b,D,I){return I===void 0&&(I=16),Math.floor((R+O)/b)*Math.floor((A+F)/D)*I}function e(R,A){return R=Math.max(R,16),A=Math.max(A,8),R*A/4}function u(R,A){return R=Math.max(R,8),A=Math.max(A,8),R*A/2}function m(R,A){return y(R,A,3,3,4,4,8)}function d(R,A){return y(R,A,3,3,4,4)}function l(R,A){return y(R,A,4,3,5,4)}function h(R,A){return y(R,A,4,4,5,5)}function n(R,A){return y(R,A,5,4,6,5)}function a(R,A){return y(R,A,5,5,6,6)}function c(R,A){return y(R,A,7,4,8,5)}function o(R,A){return y(R,A,7,5,8,6)}function v(R,A){return y(R,A,7,7,8,8)}function g(R,A){return y(R,A,9,4,10,5)}function p(R,A){return y(R,A,9,5,10,6)}function x(R,A){return y(R,A,9,7,10,8)}function T(R,A){return y(R,A,9,9,10,10)}function E(R,A){return y(R,A,11,9,12,10)}function M(R,A){return y(R,A,11,11,12,12)}var P={0:{sizeFunc:e,glFormat:35841},1:{sizeFunc:e,glFormat:35843},2:{sizeFunc:u,glFormat:35840},3:{sizeFunc:u,glFormat:35842},6:{sizeFunc:m,glFormat:36196},7:{sizeFunc:m,glFormat:33776},8:{sizeFunc:d,glFormat:33777},9:{sizeFunc:d,glFormat:33778},11:{sizeFunc:d,glFormat:33779},22:{sizeFunc:m,glFormat:37492},23:{sizeFunc:d,glFormat:37496},24:{sizeFunc:m,glFormat:37494},25:{sizeFunc:m,glFormat:37488},26:{sizeFunc:d,glFormat:37490},27:{sizeFunc:d,glFormat:37808},28:{sizeFunc:l,glFormat:37809},29:{sizeFunc:h,glFormat:37810},30:{sizeFunc:n,glFormat:37811},31:{sizeFunc:a,glFormat:37812},32:{sizeFunc:c,glFormat:37813},33:{sizeFunc:o,glFormat:37814},34:{sizeFunc:v,glFormat:37815},35:{sizeFunc:g,glFormat:37816},36:{sizeFunc:p,glFormat:37817},37:{sizeFunc:x,glFormat:37818},38:{sizeFunc:T,glFormat:37819},39:{sizeFunc:E,glFormat:37820},40:{sizeFunc:M,glFormat:37821}},w=function(R){for(var A=new Uint32Array(R,0,13),O=A[2],F=P[O].glFormat,b=P[O].sizeFunc,D=A[11],I=A[7],B=A[6],z=52+A[12],Y=new Uint8Array(R,z),X=new Array(D),H=0,N=I,U=B,L=0;L<D;L++){var G=b(N,U);X[L]={data:new Uint8Array(Y.buffer,Y.byteOffset+H,G),width:N,height:U},N=Math.max(1,N>>1),U=Math.max(1,U>>1),H+=G}return{mipmaps:X,width:I,height:B,internalFormat:F,compressed:!0,generateMipmap:!1}};r.exports=w}),6143:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72632),m=function(d,l,h,n,a,c,o){var v=u(o,"frameWidth",null),g=u(o,"frameHeight",v);if(v===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var p=d.source[l];d.add("__BASE",l,0,0,p.width,p.height);var x=u(o,"startFrame",0),T=u(o,"endFrame",-1),E=u(o,"margin",0),M=u(o,"spacing",0),P=Math.floor((a-E+M)/(v+M)),w=Math.floor((c-E+M)/(g+M)),R=P*w;R===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",d.key),(x>R||x<-R)&&(x=0),x<0&&(x=R+x),(T===-1||T>R||T<x)&&(T=R);for(var A=E,O=E,F=0,b=0,D=0,I=0;I<R;I++){F=0,b=0;var B=A+v,z=O+g;B>a&&(F=B-a),z>c&&(b=z-c),I>=x&&I<=T&&(d.add(D,l,h+A,n+O,v-F,g-b),D++),A+=v+M,A+v>a&&(A=E,O+=g+M)}return d};r.exports=m}),20030:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72632),m=function(d,l,h){var n=u(h,"frameWidth",null),a=u(h,"frameHeight",n);if(!n)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var c=d.source[0];d.add("__BASE",0,0,0,c.width,c.height),u(h,"startFrame",0),u(h,"endFrame",-1);for(var o=u(h,"margin",0),v=u(h,"spacing",0),g=l.cutX,p=l.cutY,x=l.cutWidth,T=l.cutHeight,E=l.realWidth,M=l.realHeight,P=Math.floor((E-o+v)/(n+v)),w=Math.floor((M-o+v)/(a+v)),R=l.x,A=n-R,O=n-(E-x-R),F=l.y,b=a-F,D=a-(M-T-F),I,B=o,z=o,Y=0,X=0,H=0;H<w;H++){for(var N=H===0,U=H===w-1,L=0;L<P;L++){var G=L===0,V=L===P-1;if(I=d.add(Y,X,g+B,p+z,n,a),G||N||V||U){var k=G?R:0,W=N?F:0,$=0,K=0;G&&($+=n-A),V&&($+=n-O),N&&(K+=a-b),U&&(K+=a-D);var j=n-$,Z=a-K;I.cutWidth=j,I.cutHeight=Z,I.setTrim(n,a,k,W,j,Z)}B+=v,G?B+=A:V?B+=O:B+=n,Y++}B=o,z+=v,N?z+=b:U?z+=D:z+=a}return d};r.exports=m}),89187:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=0,e=function(m,d,l,h){var n=y-h.y-h.height;m.add(l,d,h.x,n,h.width,h.height)},u=function(m,d,l){var h=m.source[d];m.add("__BASE",d,0,0,h.width,h.height),y=h.height;for(var n=l.split(`
`),a=/^[ ]*(- )*(\w+)+[: ]+(.*)/,c="",o="",v={x:0,y:0,width:0,height:0},g=0;g<n.length;g++){var p=n[g].match(a);if(p){var x=p[1]==="- ",T=p[2],E=p[3];if(x&&(o!==c&&(e(m,d,o,v),c=o),v={x:0,y:0,width:0,height:0}),T==="name"){o=E;continue}switch(T){case"x":case"y":case"width":case"height":v[T]=parseInt(E,10);break}}}return o!==c&&e(m,d,o,v),m};r.exports=u}),69150:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={AtlasXML:e(35082),Canvas:e(83332),Image:e(21560),JSONArray:e(64423),JSONHash:e(17264),KTXParser:e(67409),PVRParser:e(24904),SpriteSheet:e(6143),SpriteSheetFromAtlas:e(20030),UnityYAML:e(89187)}}),93560:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}}),97042:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=new u({initialize:function(l,h,n,a,c,o,v){(n===void 0||n<=0)&&(n=32),(a===void 0||a<=0)&&(a=32),c===void 0&&(c=0),o===void 0&&(o=0),this.name=l,this.firstgid=h|0,this.imageWidth=n|0,this.imageHeight=a|0,this.imageMargin=c|0,this.imageSpacing=o|0,this.properties=v||{},this.images=[],this.total=0},containsImageIndex:function(d){return d>=this.firstgid&&d<this.firstgid+this.total},addImage:function(d,l){return this.images.push({gid:d,image:l}),this.total++,this}});r.exports=m}),46422:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=new u({initialize:function(l){if(this.gids=[],l!==void 0)for(var h=0;h<l.length;++h)for(var n=l[h],a=0;a<n.total;++a)this.gids[n.firstgid+a]=n;this._gids=this.gids},enabled:{get:function(){return!!this.gids},set:function(d){this.gids=d?this._gids:void 0}},getTypeIncludingTile:function(d){if(d.type!==void 0&&d.type!=="")return d.type;if(!(!this.gids||d.gid===void 0)){var l=this.gids[d.gid];if(l){var h=l.getTileData(d.gid);if(h)return h.type}}},setTextureAndFrame:function(d,l,h,n){if(l===null&&this.gids&&n.gid!==void 0){var a=this.gids[n.gid];a&&(l===null&&a.image!==void 0&&(l=a.image.key),h===null&&(h=n.gid-a.firstgid),d.scene.textures.getFrame(l,h)||(l=null,h=null))}d.setTexture(l,h)},setPropertiesFromTiledObject:function(d,l){if(this.gids!==void 0&&l.gid!==void 0){var h=this.gids[l.gid];h!==void 0&&this.setFromJSON(d,h.getTileProperties(l.gid))}this.setFromJSON(d,l.properties)},setFromJSON:function(d,l){if(l){if(Array.isArray(l)){l.forEach(function(n){d.setData(n.name,n.value)});return}for(var h in l)d[h]!==void 0?d[h]=l[h]:d.setData(h,l[h])}}});r.exports=m}),15043:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(93560),m=e(16586),d=e(90715),l=e(89797),h=function(n,a,c,o,v,g,p,x){c===void 0&&(c=32),o===void 0&&(o=32),v===void 0&&(v=10),g===void 0&&(g=10),x===void 0&&(x=!1);var T=null;if(Array.isArray(p)){var E=a!==void 0?a:"map";T=d(E,u.ARRAY_2D,p,c,o,x)}else if(a!==void 0){var M=n.cache.tilemap.get(a);M?T=d(a,M.format,M.data,c,o,x):console.warn("No map data found for key "+a)}return T===null&&(T=new m({tileWidth:c,tileHeight:o,width:v,height:g})),new l(n,T)};r.exports=h}),29633:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(64937),d=e(12920),l=e(28699),h=e(66658),n=new u({Mixins:[m.Alpha,m.Flip,m.Visible],initialize:function(c,o,v,g,p,x,T,E){this.layer=c,this.index=o,this.x=v,this.y=g,this.width=p,this.height=x,this.right,this.bottom,this.baseWidth=T!==void 0?T:p,this.baseHeight=E!==void 0?E:x,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.physics={}},containsPoint:function(a,c){return!(a<this.pixelX||c<this.pixelY||a>this.right||c>this.bottom)},copy:function(a){return this.index=a.index,this.alpha=a.alpha,this.properties=l(a.properties),this.visible=a.visible,this.setFlip(a.flipX,a.flipY),this.tint=a.tint,this.rotation=a.rotation,this.collideUp=a.collideUp,this.collideDown=a.collideDown,this.collideLeft=a.collideLeft,this.collideRight=a.collideRight,this.collisionCallback=a.collisionCallback,this.collisionCallbackContext=a.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(a){var c=this.tilemapLayer;if(c){var o=c.tileToWorldXY(this.x,this.y,void 0,a);return o.x}return this.x*this.baseWidth},getRight:function(a){var c=this.tilemapLayer;return c?this.getLeft(a)+this.width*c.scaleX:this.getLeft(a)+this.width},getTop:function(a){var c=this.tilemapLayer;if(c){var o=c.tileToWorldXY(this.x,this.y,void 0,a);return o.y}return this.y*this.baseWidth-(this.height-this.baseHeight)},getBottom:function(a){var c=this.tilemapLayer;return c?this.getTop(a)+this.height*c.scaleY:this.getTop(a)+this.height},getBounds:function(a,c){return c===void 0&&(c=new h),c.x=this.getLeft(a),c.y=this.getTop(a),c.width=this.getRight(a)-c.x,c.height=this.getBottom(a)-c.y,c},getCenterX:function(a){return(this.getLeft(a)+this.getRight(a))/2},getCenterY:function(a){return(this.getTop(a)+this.getBottom(a))/2},intersects:function(a,c,o,v){return!(o<=this.pixelX||v<=this.pixelY||a>=this.right||c>=this.bottom)},isInteresting:function(a,c){return a&&c?this.canCollide||this.hasInterestingFace:a?this.collides:c?this.hasInterestingFace:!1},resetCollision:function(a){if(a===void 0&&(a=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,a){var c=this.tilemapLayer;c&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(a,c,o,v,g){if(c===void 0&&(c=a),o===void 0&&(o=a),v===void 0&&(v=a),g===void 0&&(g=!0),this.collideLeft=a,this.collideRight=c,this.collideUp=o,this.collideDown=v,this.faceLeft=a,this.faceRight=c,this.faceTop=o,this.faceBottom=v,g){var p=this.tilemapLayer;p&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},setCollisionCallback:function(a,c){return a===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=a,this.collisionCallbackContext=c),this},setSize:function(a,c,o,v){return a!==void 0&&(this.width=a),c!==void 0&&(this.height=c),o!==void 0&&(this.baseWidth=o),v!==void 0&&(this.baseHeight=v),this.updatePixelXY(),this},updatePixelXY:function(){var a=this.layer.orientation;if(a===d.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(a===d.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(a===d.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(a===d.HEXAGONAL){var c=this.layer.staggerAxis,o=this.layer.staggerIndex,v=this.layer.hexSideLength,g,p;c==="y"?(p=(this.baseHeight-v)/2+v,o==="odd"?this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2):this.pixelX=this.x*this.baseWidth-this.y%2*(this.baseWidth/2),this.pixelY=this.y*p):c==="x"&&(g=(this.baseWidth-v)/2+v,this.pixelX=this.x*g,o==="odd"?this.pixelY=this.y*this.baseHeight+this.x%2*(this.baseHeight/2):this.pixelY=this.y*this.baseHeight-this.x%2*(this.baseHeight/2))}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var a=this.layer.tilemapLayer;if(a){var c=a.gidMap[this.index];if(c)return c}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var a=this.tilemapLayer;return a?a.tilemap:null}}});r.exports=n}),89797:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(14556),m=e(56694),d=e(75606),l=e(93560),h=e(72632),n=e(94990),a=e(46422),c=e(12920),o=e(52257),v=e(72677),g=e(13747),p=e(29633),x=e(5047),T=e(87177),E=e(47975),M=new m({initialize:function(w,R){this.scene=w,this.tileWidth=R.tileWidth,this.tileHeight=R.tileHeight,this.width=R.width,this.height=R.height,this.orientation=R.orientation,this.renderOrder=R.renderOrder,this.format=R.format,this.version=R.version,this.properties=R.properties,this.widthInPixels=R.widthInPixels,this.heightInPixels=R.heightInPixels,this.imageCollections=R.imageCollections,this.images=R.images,this.layers=R.layers,this.tiles=R.tiles,this.tilesets=R.tilesets,this.objects=R.objects,this.currentLayerIndex=0,this.hexSideLength=R.hexSideLength;var A=this.orientation;this._convert={WorldToTileXY:x.GetWorldToTileXYFunction(A),WorldToTileX:x.GetWorldToTileXFunction(A),WorldToTileY:x.GetWorldToTileYFunction(A),TileToWorldXY:x.GetTileToWorldXYFunction(A),TileToWorldX:x.GetTileToWorldXFunction(A),TileToWorldY:x.GetTileToWorldYFunction(A),GetTileCorners:x.GetTileCornersFunction(A)}},setRenderOrder:function(P){var w=["right-down","left-down","right-up","left-up"];return typeof P=="number"&&(P=w[P]),w.indexOf(P)>-1&&(this.renderOrder=P),this},addTilesetImage:function(P,w,R,A,O,F,b,D){if(P===void 0)return null;if(w==null&&(w=P),!this.scene.sys.textures.exists(w))return console.warn("Invalid Tileset Image: "+w),null;var I=this.scene.sys.textures.get(w),B=this.getTilesetIndex(P);if(B===null&&this.format===l.TILED_JSON)return console.warn("No data found for Tileset: "+P),null;var z=this.tilesets[B];return z?(z.setTileSize(R,A),z.setSpacing(O,F),z.setImage(I),z):(R===void 0&&(R=this.tileWidth),A===void 0&&(A=this.tileHeight),O===void 0&&(O=0),F===void 0&&(F=0),b===void 0&&(b=0),D===void 0&&(D={x:0,y:0}),z=new E(P,b,R,A,O,F,void 0,void 0,D),z.setImage(I),this.tilesets.push(z),this.tiles=u(this),z)},copy:function(P,w,R,A,O,F,b,D){return D=this.getLayer(D),D!==null?(x.Copy(P,w,R,A,O,F,b,D),this):null},createBlankLayer:function(P,w,R,A,O,F,b,D){R===void 0&&(R=0),A===void 0&&(A=0),O===void 0&&(O=this.width),F===void 0&&(F=this.height),b===void 0&&(b=this.tileWidth),D===void 0&&(D=this.tileHeight);var I=this.getLayerIndex(P);if(I!==null)return console.warn("Invalid Tilemap Layer ID: "+P),null;for(var B=new n({name:P,tileWidth:b,tileHeight:D,width:O,height:F,orientation:this.orientation}),z,Y=0;Y<F;Y++){z=[];for(var X=0;X<O;X++)z.push(new p(B,-1,X,Y,b,D,this.tileWidth,this.tileHeight));B.data.push(z)}this.layers.push(B),this.currentLayerIndex=this.layers.length-1;var H=new T(this.scene,this,this.currentLayerIndex,w,R,A);return H.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(H),H},createLayer:function(P,w,R,A){var O=this.getLayerIndex(P);if(O===null)return console.warn("Invalid Tilemap Layer ID: "+P),typeof P=="string"&&console.warn("Valid tilelayer names: %o",this.getTileLayerNames()),null;var F=this.layers[O];if(F.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+P),null;this.currentLayerIndex=O,R===void 0&&(R=F.x),A===void 0&&(A=F.y);var b=new T(this.scene,this,O,w,R,A);return b.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(b),b},createFromObjects:function(P,w,R){R===void 0&&(R=!0);var A=[],O=this.getObjectLayer(P);if(!O)return console.warn("createFromObjects: Invalid objectLayerName given: "+P),A;var F=new a(R?this.tilesets:void 0);Array.isArray(w)||(w=[w]);for(var b=O.objects,D=0;D<w.length;D++){var I=w[D],B=h(I,"id",null),z=h(I,"gid",null),Y=h(I,"name",null),X=h(I,"type",null);F.enabled=!h(I,"ignoreTileset",null);for(var H,N=[],U=0;U<b.length;U++)H=b[U],(B===null&&z===null&&Y===null&&X===null||B!==null&&H.id===B||z!==null&&H.gid===z||Y!==null&&H.name===Y||X!==null&&F.getTypeIncludingTile(H)===X)&&N.push(H);for(var L=h(I,"classType",g),G=h(I,"scene",this.scene),V=h(I,"container",null),k=h(I,"key",null),W=h(I,"frame",null),$=0;$<N.length;$++){H=N[$];var K=new L(G);if(K.setName(H.name),K.setPosition(H.x,H.y),F.setTextureAndFrame(K,k,W,H),H.width&&(K.displayWidth=H.width),H.height&&(K.displayHeight=H.height),this.orientation===c.ISOMETRIC){var j=this.tileWidth/this.tileHeight,Z={x:K.x-K.y,y:(K.x+K.y)/j};K.x=Z.x,K.y=Z.y}var J={x:K.originX*H.width,y:(K.originY-(H.gid?1:0))*H.height};if(H.rotation){var Q=d(H.rotation);o(J,Q),K.rotation=Q}K.x+=J.x,K.y+=J.y,(H.flippedHorizontal!==void 0||H.flippedVertical!==void 0)&&K.setFlip(H.flippedHorizontal,H.flippedVertical),H.visible||(K.visible=!1),F.setPropertiesFromTiledObject(K,H),V?V.add(K):G.add.existing(K),A.push(K)}}return A},createFromTiles:function(P,w,R,A,O,F){return F=this.getLayer(F),F===null?null:x.CreateFromTiles(P,w,R,A,O,F)},fill:function(P,w,R,A,O,F,b){return F===void 0&&(F=!0),b=this.getLayer(b),b===null?null:(x.Fill(P,w,R,A,O,F,b),this)},filterObjects:function(P,w,R){if(typeof P=="string"){var A=P;if(P=this.getObjectLayer(P),!P)return console.warn("No object layer found with the name: "+A),null}return P.objects.filter(w,R)},filterTiles:function(P,w,R,A,O,F,b,D){return D=this.getLayer(D),D===null?null:x.FilterTiles(P,w,R,A,O,F,b,D)},findByIndex:function(P,w,R,A){return A=this.getLayer(A),A===null?null:x.FindByIndex(P,w,R,A)},findObject:function(P,w,R){if(typeof P=="string"){var A=P;if(P=this.getObjectLayer(P),!P)return console.warn("No object layer found with the name: "+A),null}return P.objects.find(w,R)||null},findTile:function(P,w,R,A,O,F,b,D){return D=this.getLayer(D),D===null?null:x.FindTile(P,w,R,A,O,F,b,D)},forEachTile:function(P,w,R,A,O,F,b,D){return D=this.getLayer(D),D===null?null:(x.ForEachTile(P,w,R,A,O,F,b,D),this)},getImageIndex:function(P){return this.getIndex(this.images,P)},getImageLayerNames:function(){return!this.images||!Array.isArray(this.images)?[]:this.images.map(function(P){return P.name})},getIndex:function(P,w){for(var R=0;R<P.length;R++)if(P[R].name===w)return R;return null},getLayer:function(P){var w=this.getLayerIndex(P);return w!==null?this.layers[w]:null},getObjectLayer:function(P){var w=this.getIndex(this.objects,P);return w!==null?this.objects[w]:null},getObjectLayerNames:function(){return!this.objects||!Array.isArray(this.objects)?[]:this.objects.map(function(P){return P.name})},getLayerIndex:function(P){return P===void 0?this.currentLayerIndex:typeof P=="string"?this.getLayerIndexByName(P):typeof P=="number"&&P<this.layers.length?P:P instanceof T&&P.tilemap===this?P.layerIndex:null},getLayerIndexByName:function(P){return this.getIndex(this.layers,P)},getTileAt:function(P,w,R,A){return A=this.getLayer(A),A===null?null:x.GetTileAt(P,w,R,A)},getTileAtWorldXY:function(P,w,R,A,O){return O=this.getLayer(O),O===null?null:x.GetTileAtWorldXY(P,w,R,A,O)},getTileLayerNames:function(){return!this.layers||!Array.isArray(this.layers)?[]:this.layers.map(function(P){return P.name})},getTilesWithin:function(P,w,R,A,O,F){return F=this.getLayer(F),F===null?null:x.GetTilesWithin(P,w,R,A,O,F)},getTilesWithinShape:function(P,w,R,A){return A=this.getLayer(A),A===null?null:x.GetTilesWithinShape(P,w,R,A)},getTilesWithinWorldXY:function(P,w,R,A,O,F,b){return b=this.getLayer(b),b===null?null:x.GetTilesWithinWorldXY(P,w,R,A,O,F,b)},getTileset:function(P){var w=this.getIndex(this.tilesets,P);return w!==null?this.tilesets[w]:null},getTilesetIndex:function(P){return this.getIndex(this.tilesets,P)},hasTileAt:function(P,w,R){return R=this.getLayer(R),R===null?null:x.HasTileAt(P,w,R)},hasTileAtWorldXY:function(P,w,R,A){return A=this.getLayer(A),A===null?null:x.HasTileAtWorldXY(P,w,R,A)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(P){this.setLayer(P)}},putTileAt:function(P,w,R,A,O){return A===void 0&&(A=!0),O=this.getLayer(O),O===null?null:x.PutTileAt(P,w,R,A,O)},putTileAtWorldXY:function(P,w,R,A,O,F){return A===void 0&&(A=!0),F=this.getLayer(F),F===null?null:x.PutTileAtWorldXY(P,w,R,A,O,F)},putTilesAt:function(P,w,R,A,O){return A===void 0&&(A=!0),O=this.getLayer(O),O===null?null:(x.PutTilesAt(P,w,R,A,O),this)},randomize:function(P,w,R,A,O,F){return F=this.getLayer(F),F===null?null:(x.Randomize(P,w,R,A,O,F),this)},calculateFacesAt:function(P,w,R){return R=this.getLayer(R),R===null?null:(x.CalculateFacesAt(P,w,R),this)},calculateFacesWithin:function(P,w,R,A,O){return O=this.getLayer(O),O===null?null:(x.CalculateFacesWithin(P,w,R,A,O),this)},removeLayer:function(P){var w=this.getLayerIndex(P);if(w!==null){v(this.layers,w);for(var R=w;R<this.layers.length;R++)this.layers[R].tilemapLayer&&this.layers[R].tilemapLayer.layerIndex--;return this.currentLayerIndex===w&&(this.currentLayerIndex=0),this}else return null},destroyLayer:function(P){var w=this.getLayerIndex(P);return w!==null?(P=this.layers[w],P.tilemapLayer.destroy(),v(this.layers,w),this.currentLayerIndex===w&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var P=this.layers,w=0;w<P.length;w++)P[w].tilemapLayer&&P[w].tilemapLayer.destroy(!1);return P.length=0,this.currentLayerIndex=0,this},removeTile:function(P,w,R){w===void 0&&(w=-1),R===void 0&&(R=!0);var A=[];Array.isArray(P)||(P=[P]);for(var O=0;O<P.length;O++){var F=P[O];A.push(this.removeTileAt(F.x,F.y,!0,R,F.tilemapLayer)),w>-1&&this.putTileAt(w,F.x,F.y,R,F.tilemapLayer)}return A},removeTileAt:function(P,w,R,A,O){return R===void 0&&(R=!0),A===void 0&&(A=!0),O=this.getLayer(O),O===null?null:x.RemoveTileAt(P,w,R,A,O)},removeTileAtWorldXY:function(P,w,R,A,O,F){return R===void 0&&(R=!0),A===void 0&&(A=!0),F=this.getLayer(F),F===null?null:x.RemoveTileAtWorldXY(P,w,R,A,O,F)},renderDebug:function(P,w,R){return R=this.getLayer(R),R===null?null:(this.orientation===c.ORTHOGONAL&&x.RenderDebug(P,w,R),this)},renderDebugFull:function(P,w){for(var R=this.layers,A=0;A<R.length;A++)x.RenderDebug(P,w,R[A]);return this},replaceByIndex:function(P,w,R,A,O,F,b){return b=this.getLayer(b),b===null?null:(x.ReplaceByIndex(P,w,R,A,O,F,b),this)},setCollision:function(P,w,R,A,O){return w===void 0&&(w=!0),R===void 0&&(R=!0),O===void 0&&(O=!0),A=this.getLayer(A),A===null?null:(x.SetCollision(P,w,R,A,O),this)},setCollisionBetween:function(P,w,R,A,O){return R===void 0&&(R=!0),A===void 0&&(A=!0),O=this.getLayer(O),O===null?null:(x.SetCollisionBetween(P,w,R,A,O),this)},setCollisionByProperty:function(P,w,R,A){return w===void 0&&(w=!0),R===void 0&&(R=!0),A=this.getLayer(A),A===null?null:(x.SetCollisionByProperty(P,w,R,A),this)},setCollisionByExclusion:function(P,w,R,A){return w===void 0&&(w=!0),R===void 0&&(R=!0),A=this.getLayer(A),A===null?null:(x.SetCollisionByExclusion(P,w,R,A),this)},setCollisionFromCollisionGroup:function(P,w,R){return P===void 0&&(P=!0),w===void 0&&(w=!0),R=this.getLayer(R),R===null?null:(x.SetCollisionFromCollisionGroup(P,w,R),this)},setTileIndexCallback:function(P,w,R,A){return A=this.getLayer(A),A===null?null:(x.SetTileIndexCallback(P,w,R,A),this)},setTileLocationCallback:function(P,w,R,A,O,F,b){return b=this.getLayer(b),b===null?null:(x.SetTileLocationCallback(P,w,R,A,O,F,b),this)},setLayer:function(P){var w=this.getLayerIndex(P);return w!==null&&(this.currentLayerIndex=w),this},setBaseTileSize:function(P,w){this.tileWidth=P,this.tileHeight=w,this.widthInPixels=this.width*P,this.heightInPixels=this.height*w;for(var R=0;R<this.layers.length;R++){this.layers[R].baseTileWidth=P,this.layers[R].baseTileHeight=w;for(var A=this.layers[R].data,O=this.layers[R].width,F=this.layers[R].height,b=0;b<F;b++)for(var D=0;D<O;D++){var I=A[b][D];I!==null&&I.setSize(void 0,void 0,P,w)}}return this},setLayerTileSize:function(P,w,R){if(R=this.getLayer(R),R===null)return this;R.tileWidth=P,R.tileHeight=w;for(var A=R.data,O=R.width,F=R.height,b=0;b<F;b++)for(var D=0;D<O;D++){var I=A[b][D];I!==null&&I.setSize(P,w)}return this},shuffle:function(P,w,R,A,O){return O=this.getLayer(O),O===null?null:(x.Shuffle(P,w,R,A,O),this)},swapByIndex:function(P,w,R,A,O,F,b){return b=this.getLayer(b),b===null?null:(x.SwapByIndex(P,w,R,A,O,F,b),this)},tileToWorldX:function(P,w,R){return R=this.getLayer(R),R===null?null:this._convert.TileToWorldX(P,w,R)},tileToWorldY:function(P,w,R){return R=this.getLayer(R),R===null?null:this._convert.TileToWorldY(P,w,R)},tileToWorldXY:function(P,w,R,A,O){return O=this.getLayer(O),O===null?null:this._convert.TileToWorldXY(P,w,R,A,O)},getTileCorners:function(P,w,R,A){return A=this.getLayer(A),A===null?null:this._convert.GetTileCorners(P,w,R,A)},weightedRandomize:function(P,w,R,A,O,F){return F=this.getLayer(F),F===null?null:(x.WeightedRandomize(w,R,A,O,P,F),this)},worldToTileX:function(P,w,R,A){return A=this.getLayer(A),A===null?null:this._convert.WorldToTileX(P,w,R,A)},worldToTileY:function(P,w,R,A){return A=this.getLayer(A),A===null?null:this._convert.WorldToTileY(P,w,R,A)},worldToTileXY:function(P,w,R,A,O,F){return F=this.getLayer(F),F===null?null:this._convert.WorldToTileXY(P,w,R,A,O,F)},destroy:function(){this.removeAllLayers(),this.tiles.length=0,this.tilesets.length=0,this.objects.length=0,this.scene=null}});r.exports=M}),4843:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(99325),m=e(15043);u.register("tilemap",function(d){var l=d!==void 0?d:{};return m(this.scene,l.key,l.tileWidth,l.tileHeight,l.width,l.height,l.data,l.insertNull)})}),37940:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(61286),m=e(15043);u.register("tilemap",function(d,l,h,n,a,c,o){return d===null&&(d=void 0),l===null&&(l=void 0),h===null&&(h=void 0),n===null&&(n=void 0),a===null&&(a=void 0),m(this.scene,d,l,h,n,a,c,o)})}),87177:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(64937),d=e(89980),l=e(5047),h=e(96193),n=e(93736),a=new u({Extends:d,Mixins:[m.Alpha,m.BlendMode,m.ComputedSize,m.Depth,m.Flip,m.GetBounds,m.Mask,m.Origin,m.Pipeline,m.PostPipeline,m.Transform,m.Visible,m.ScrollFactor,h],initialize:function(o,v,g,p,x,T){d.call(this,o,"TilemapLayer"),this.isTilemap=!0,this.tilemap=v,this.layerIndex=g,this.layer=v.layers[g],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=l.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.tempVec=new n,this.setTilesets(p),this.setAlpha(this.layer.alpha),this.setPosition(x,T),this.setOrigin(0,0),this.setSize(v.tileWidth*this.layer.width,v.tileHeight*this.layer.height),this.initPipeline(),this.initPostPipeline(!1)},setTilesets:function(c){var o=[],v=[],g=this.tilemap;Array.isArray(c)||(c=[c]);for(var p=0;p<c.length;p++){var x=c[p];if(typeof x=="string"&&(x=g.getTileset(x)),x){v.push(x);for(var T=x.firstgid,E=0;E<x.total;E++)o[T+E]=x}}this.gidMap=o,this.tileset=v},setRenderOrder:function(c){var o=["right-down","left-down","right-up","left-up"];return typeof c=="string"&&(c=o.indexOf(c)),c>=0&&c<4&&(this._renderOrder=c),this},calculateFacesAt:function(c,o){return l.CalculateFacesAt(c,o,this.layer),this},calculateFacesWithin:function(c,o,v,g){return l.CalculateFacesWithin(c,o,v,g,this.layer),this},createFromTiles:function(c,o,v,g,p){return l.CreateFromTiles(c,o,v,g,p,this.layer)},cull:function(c){return this.cullCallback(this.layer,c,this.culledTiles,this._renderOrder)},copy:function(c,o,v,g,p,x,T){return l.Copy(c,o,v,g,p,x,T,this.layer),this},fill:function(c,o,v,g,p,x){return l.Fill(c,o,v,g,p,x,this.layer),this},filterTiles:function(c,o,v,g,p,x,T){return l.FilterTiles(c,o,v,g,p,x,T,this.layer)},findByIndex:function(c,o,v){return l.FindByIndex(c,o,v,this.layer)},findTile:function(c,o,v,g,p,x,T){return l.FindTile(c,o,v,g,p,x,T,this.layer)},forEachTile:function(c,o,v,g,p,x,T){return l.ForEachTile(c,o,v,g,p,x,T,this.layer),this},setTint:function(c,o,v,g,p,x){c===void 0&&(c=16777215);var T=function(E){E.tint=c};return this.forEachTile(T,this,o,v,g,p,x)},getTileAt:function(c,o,v){return l.GetTileAt(c,o,v,this.layer)},getTileAtWorldXY:function(c,o,v,g){return l.GetTileAtWorldXY(c,o,v,g,this.layer)},getIsoTileAtWorldXY:function(c,o,v,g,p){v===void 0&&(v=!0);var x=this.tempVec;return l.IsometricWorldToTileXY(c,o,!0,x,p,this.layer,v),this.getTileAt(x.x,x.y,g)},getTilesWithin:function(c,o,v,g,p){return l.GetTilesWithin(c,o,v,g,p,this.layer)},getTilesWithinShape:function(c,o,v){return l.GetTilesWithinShape(c,o,v,this.layer)},getTilesWithinWorldXY:function(c,o,v,g,p,x){return l.GetTilesWithinWorldXY(c,o,v,g,p,x,this.layer)},hasTileAt:function(c,o){return l.HasTileAt(c,o,this.layer)},hasTileAtWorldXY:function(c,o,v){return l.HasTileAtWorldXY(c,o,v,this.layer)},putTileAt:function(c,o,v,g){return l.PutTileAt(c,o,v,g,this.layer)},putTileAtWorldXY:function(c,o,v,g,p){return l.PutTileAtWorldXY(c,o,v,g,p,this.layer)},putTilesAt:function(c,o,v,g){return l.PutTilesAt(c,o,v,g,this.layer),this},randomize:function(c,o,v,g,p){return l.Randomize(c,o,v,g,p,this.layer),this},removeTileAt:function(c,o,v,g){return l.RemoveTileAt(c,o,v,g,this.layer)},removeTileAtWorldXY:function(c,o,v,g,p){return l.RemoveTileAtWorldXY(c,o,v,g,p,this.layer)},renderDebug:function(c,o){return l.RenderDebug(c,o,this.layer),this},replaceByIndex:function(c,o,v,g,p,x){return l.ReplaceByIndex(c,o,v,g,p,x,this.layer),this},setSkipCull:function(c){return c===void 0&&(c=!0),this.skipCull=c,this},setCullPadding:function(c,o){return c===void 0&&(c=1),o===void 0&&(o=1),this.cullPaddingX=c,this.cullPaddingY=o,this},setCollision:function(c,o,v,g){return l.SetCollision(c,o,v,this.layer,g),this},setCollisionBetween:function(c,o,v,g){return l.SetCollisionBetween(c,o,v,g,this.layer),this},setCollisionByProperty:function(c,o,v){return l.SetCollisionByProperty(c,o,v,this.layer),this},setCollisionByExclusion:function(c,o,v){return l.SetCollisionByExclusion(c,o,v,this.layer),this},setCollisionFromCollisionGroup:function(c,o){return l.SetCollisionFromCollisionGroup(c,o,this.layer),this},setTileIndexCallback:function(c,o,v){return l.SetTileIndexCallback(c,o,v,this.layer),this},setTileLocationCallback:function(c,o,v,g,p,x){return l.SetTileLocationCallback(c,o,v,g,p,x,this.layer),this},shuffle:function(c,o,v,g){return l.Shuffle(c,o,v,g,this.layer),this},swapByIndex:function(c,o,v,g,p,x){return l.SwapByIndex(c,o,v,g,p,x,this.layer),this},tileToWorldX:function(c,o){return this.tilemap.tileToWorldX(c,o,this)},tileToWorldY:function(c,o){return this.tilemap.tileToWorldY(c,o,this)},tileToWorldXY:function(c,o,v,g){return this.tilemap.tileToWorldXY(c,o,v,g,this)},getTileCorners:function(c,o,v){return this.tilemap.getTileCorners(c,o,v,this)},weightedRandomize:function(c,o,v,g,p){return l.WeightedRandomize(o,v,g,p,c,this.layer),this},worldToTileX:function(c,o,v){return this.tilemap.worldToTileX(c,o,v,this)},worldToTileY:function(c,o,v){return this.tilemap.worldToTileY(c,o,v,this)},worldToTileXY:function(c,o,v,g,p){return this.tilemap.worldToTileXY(c,o,v,g,p,this)},destroy:function(c){c===void 0&&(c=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),c&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],d.prototype.destroy.call(this))}});r.exports=a}),17394:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(69360),m=new u,d=new u,l=new u,h=function(n,a,c,o){var v=a.cull(c),g=v.length,p=c.alpha*a.alpha;if(!(g===0||p<=0)){var x=m,T=d,E=l;T.applyITRS(a.x,a.y,a.rotation,a.scaleX,a.scaleY),x.copyFrom(c.matrix);var M=n.currentContext,P=a.gidMap;M.save(),o?(x.multiplyWithOffset(o,-c.scrollX*a.scrollFactorX,-c.scrollY*a.scrollFactorY),T.e=a.x,T.f=a.y,x.multiply(T,E),E.copyToContext(M)):(T.e-=c.scrollX*a.scrollFactorX,T.f-=c.scrollY*a.scrollFactorY,T.copyToContext(M)),(!n.antialias||a.scaleX>1||a.scaleY>1)&&(M.imageSmoothingEnabled=!1);for(var w=0;w<g;w++){var R=v[w],A=P[R.index];if(A){var O=A.image.getSourceImage(),F=A.getTileTextureCoordinates(R.index),b=A.tileWidth,D=A.tileHeight;if(!(F===null||b===0||D===0)){var I=b*.5,B=D*.5;F.x+=A.tileOffset.x,F.y+=A.tileOffset.y,M.save(),M.translate(R.pixelX+I,R.pixelY+B),R.rotation!==0&&M.rotate(R.rotation),(R.flipX||R.flipY)&&M.scale(R.flipX?-1:1,R.flipY?-1:1),M.globalAlpha=p*R.alpha,M.drawImage(O,F.x,F.y,b,D,-I,-B,b,D),M.restore()}}}M.restore()}};r.exports=h}),96193:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72283),m=u,d=u;m=e(51395),d=e(17394),r.exports={renderWebGL:m,renderCanvas:d}}),51395:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(75512),m=function(d,l,h){var n=l.cull(h),a=n.length,c=h.alpha*l.alpha;if(!(a===0||c<=0)){var o=l.gidMap,v=d.pipelines.set(l.pipeline,l),g=u.getTintAppendFloatAlpha,p=l.scrollFactorX,x=l.scrollFactorY,T=l.x,E=l.y,M=l.scaleX,P=l.scaleY;d.pipelines.preBatch(l);for(var w=0;w<a;w++){var R=n[w],A=o[R.index];if(A){var O=A.getTileTextureCoordinates(R.index);if(O!==null){var F=A.glTexture,b=v.setTexture2D(F,l),D=A.tileWidth,I=A.tileHeight,B=O.x,z=O.y,Y=A.tileWidth*.5,X=A.tileHeight*.5,H=A.tileOffset.x,N=A.tileOffset.y,U=g(R.tint,c*R.alpha);v.batchTexture(l,F,F.width,F.height,T+R.pixelX*M+(Y*M-H),E+R.pixelY*P+(X*P-N),R.width,R.height,M,P,R.rotation,R.flipX,R.flipY,p,x,Y,X,B,z,D,I,U,U,U,U,!1,0,0,h,null,!0,b)}}}d.pipelines.postBatch(l)}};r.exports=m}),47975:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(93736),d=new u({initialize:function(h,n,a,c,o,v,g,p,x){(a===void 0||a<=0)&&(a=32),(c===void 0||c<=0)&&(c=32),o===void 0&&(o=0),v===void 0&&(v=0),g===void 0&&(g={}),p===void 0&&(p={}),this.name=h,this.firstgid=n,this.tileWidth=a,this.tileHeight=c,this.tileMargin=o,this.tileSpacing=v,this.tileProperties=g,this.tileData=p,this.tileOffset=new m,x!==void 0&&this.tileOffset.set(x.x,x.y),this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(l){return this.containsTileIndex(l)?this.tileProperties[l-this.firstgid]:null},getTileData:function(l){return this.containsTileIndex(l)?this.tileData[l-this.firstgid]:null},getTileCollisionGroup:function(l){var h=this.getTileData(l);return h&&h.objectgroup?h.objectgroup:null},containsTileIndex:function(l){return l>=this.firstgid&&l<this.firstgid+this.total},getTileTextureCoordinates:function(l){return this.containsTileIndex(l)?this.texCoordinates[l-this.firstgid]:null},setImage:function(l){return this.image=l,this.glTexture=l.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(l,h){return l!==void 0&&(this.tileWidth=l),h!==void 0&&(this.tileHeight=h),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(l,h){return l!==void 0&&(this.tileMargin=l),h!==void 0&&(this.tileSpacing=h),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(l,h){var n=(h-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing),a=(l-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(n%1!==0||a%1!==0)&&console.warn("Image tile area not tile size multiple in: "+this.name),n=Math.floor(n),a=Math.floor(a),this.rows=n,this.columns=a,this.total=n*a,this.texCoordinates.length=0;for(var c=this.tileMargin,o=this.tileMargin,v=0;v<this.rows;v++){for(var g=0;g<this.columns;g++)this.texCoordinates.push({x:c,y:o}),c+=this.tileWidth+this.tileSpacing;c=this.tileMargin,o+=this.tileHeight+this.tileSpacing}return this}});r.exports=d}),92839:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(15494),m=function(d,l,h){var n=u(d,l,!0,h),a=u(d,l-1,!0,h),c=u(d,l+1,!0,h),o=u(d-1,l,!0,h),v=u(d+1,l,!0,h),g=n&&n.collides;return g&&(n.faceTop=!0,n.faceBottom=!0,n.faceLeft=!0,n.faceRight=!0),a&&a.collides&&(g&&(n.faceTop=!1),a.faceBottom=!g),c&&c.collides&&(g&&(n.faceBottom=!1),c.faceTop=!g),o&&o.collides&&(g&&(n.faceLeft=!1),o.faceRight=!g),v&&v.collides&&(g&&(n.faceRight=!1),v.faceLeft=!g),n&&!n.collides&&n.resetFaces(),n};r.exports=m}),60386:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(15494),m=e(50811),d=function(l,h,n,a,c){for(var o=null,v=null,g=null,p=null,x=m(l,h,n,a,null,c),T=0;T<x.length;T++){var E=x[T];E&&(E.collides?(o=u(E.x,E.y-1,!0,c),v=u(E.x,E.y+1,!0,c),g=u(E.x-1,E.y,!0,c),p=u(E.x+1,E.y,!0,c),E.faceTop=!(o&&o.collides),E.faceBottom=!(v&&v.collides),E.faceLeft=!(g&&g.collides),E.faceRight=!(p&&p.collides)):E.resetFaces())}};r.exports=d}),13125:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(93736),m=new u,d=function(l,h,n,a){var c=n.tilemapLayer,o=c.cullPaddingX,v=c.cullPaddingY,g=c.tilemap.tileToWorldXY(l,h,m,a,c);return g.x>a.worldView.x+c.scaleX*n.tileWidth*(-o-.5)&&g.x<a.worldView.right+c.scaleX*n.tileWidth*(o-.5)&&g.y>a.worldView.y+c.scaleY*n.tileHeight*(-v-1)&&g.y<a.worldView.bottom+c.scaleY*n.tileHeight*(v-.5)};r.exports=d}),17347:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(60386),m=e(50811),d=e(62839),l=e(29633),h=function(n,a,c,o,v,g,p,x){p===void 0&&(p=!0);var T=m(n,a,c,o,null,x),E=[];T.forEach(function(F){var b=new l(F.layer,F.index,F.x,F.y,F.width,F.height,F.baseWidth,F.baseHeight);b.copy(F),E.push(b)});for(var M=v-n,P=g-a,w=0;w<E.length;w++){var R=E[w],A=R.x+M,O=R.y+P;d(A,O,x)&&x.data[O][A]&&(R.x=A,R.y=O,R.updatePixelXY(),x.data[O][A]=R)}p&&u(v-1,g-1,c+2,o+2,x),T.length=0,E.length=0};r.exports=h}),93604:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(50811),m=e(51202),d=function(l,h,n,a,c,o){n||(n={}),Array.isArray(l)||(l=[l]);var v=o.tilemapLayer;a||(a=v.scene),c||(c=a.cameras.main);var g=u(0,0,o.width,o.height,null,o),p=[],x;for(x=0;x<g.length;x++){var T=g[x];if(l.indexOf(T.index)!==-1){var E=v.tileToWorldXY(T.x,T.y,void 0,c,o);n.x=E.x,n.y=E.y,p.push(a.make.sprite(n))}}if(typeof h=="number")for(x=0;x<l.length;x++)m(l[x],h,0,0,o.width,o.height,o);else if(Array.isArray(h))for(x=0;x<l.length;x++)m(l[x],h[x],0,0,o.width,o.height,o);return p};r.exports=d}),71586:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(74118),m=e(82127),d=e(84314),l=new u,h=function(n,a){var c=n.tilemapLayer.tilemap,o=n.tilemapLayer,v=Math.floor(c.tileWidth*o.scaleX),g=Math.floor(c.tileHeight*o.scaleY),p=d(a.worldView.x-o.x,v,0,!0)-o.cullPaddingX,x=m(a.worldView.right-o.x,v,0,!0)+o.cullPaddingX,T=d(a.worldView.y-o.y,g,0,!0)-o.cullPaddingY,E=m(a.worldView.bottom-o.y,g,0,!0)+o.cullPaddingY;return l.setTo(p,T,x-p,E-T)};r.exports=h}),381:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(71586),m=e(6987),d=function(l,h,n,a){n===void 0&&(n=[]),a===void 0&&(a=0),n.length=0;var c=l.tilemapLayer,o=u(l,h);return(c.skipCull||c.scrollFactorX!==1||c.scrollFactorY!==1)&&(o.left=0,o.right=l.width,o.top=0,o.bottom=l.height),m(l,o,a,n),n};r.exports=d}),97734:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(50811),m=e(60386),d=e(68234),l=function(h,n,a,c,o,v,g){for(var p=g.collideIndexes.indexOf(h)!==-1,x=u(n,a,c,o,null,g),T=0;T<x.length;T++)x[T].index=h,d(x[T],p);v&&m(n-1,a-1,c+2,o+2,g)};r.exports=l}),63555:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(50811),m=function(d,l,h,n,a,c,o,v){var g=u(h,n,a,c,o,v);return g.filter(d,l)};r.exports=m}),37982:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d){u===void 0&&(u=0),m===void 0&&(m=!1);var l=0,h,n,a;if(m){for(n=d.height-1;n>=0;n--)for(h=d.width-1;h>=0;h--)if(a=d.data[n][h],a&&a.index===e){if(l===u)return a;l+=1}}else for(n=0;n<d.height;n++)for(h=0;h<d.width;h++)if(a=d.data[n][h],a&&a.index===e){if(l===u)return a;l+=1}return null};r.exports=y}),48297:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(50811),m=function(d,l,h,n,a,c,o,v){var g=u(h,n,a,c,o,v);return g.find(d,l)||null};r.exports=m}),80916:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(50811),m=function(d,l,h,n,a,c,o,v){var g=u(h,n,a,c,o,v);g.forEach(d,l)};r.exports=m}),31493:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(12920),m=e(381),d=e(37524),l=e(20887),h=e(72283),n=e(19242),a=function(c){return c===u.ORTHOGONAL?m:c===u.HEXAGONAL?d:c===u.STAGGERED?n:c===u.ISOMETRIC?l:h};r.exports=a}),15494:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(62839),m=function(d,l,h,n){if(h===void 0&&(h=!1),u(d,l,n)){var a=n.data[l][d]||null;return a?a.index===-1?h?a:null:a:null}else return null};r.exports=m}),24640:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(15494),m=e(93736),d=new m,l=function(h,n,a,c,o){return o.tilemapLayer.worldToTileXY(h,n,!0,d,c),u(d.x,d.y,a,o)};r.exports=l}),48495:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(93736),m=function(d,l,h,n){var a=n.baseTileWidth,c=n.baseTileHeight,o=n.tilemapLayer,v=0,g=0;o&&(h||(h=o.scene.cameras.main),v=o.x+h.scrollX*(1-o.scrollFactorX),g=o.y+h.scrollY*(1-o.scrollFactorY),a*=o.scaleX,c*=o.scaleY);var p=v+d*a,x=g+l*c;return[new u(p,x),new u(p+a,x),new u(p+a,x+c),new u(p,x+c)]};r.exports=m}),7160:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(12920),m=e(63634),d=e(72283),l=e(48495),h=function(n){return n===u.ORTHOGONAL?l:n===u.ISOMETRIC?d:n===u.HEXAGONAL?m:(n===u.STAGGERED,d)};r.exports=h}),16884:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(12920),m=e(72283),d=e(44150),l=function(h){return h===u.ORTHOGONAL?d:m};r.exports=l}),68182:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(12920),m=e(21715),d=e(21808),l=e(72283),h=e(33388),n=e(46836),a=function(c){return c===u.ORTHOGONAL?n:c===u.ISOMETRIC?d:c===u.HEXAGONAL?m:c===u.STAGGERED?h:l};r.exports=a}),3752:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(12920),m=e(72283),d=e(84132),l=e(42477),h=function(n){return n===u.ORTHOGONAL?l:n===u.STAGGERED?d:m};r.exports=h}),50811:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72632),m=function(d,l,h,n,a,c){d===void 0&&(d=0),l===void 0&&(l=0),h===void 0&&(h=c.width),n===void 0&&(n=c.height),a||(a={});var o=u(a,"isNotEmpty",!1),v=u(a,"isColliding",!1),g=u(a,"hasInterestingFace",!1);d<0&&(h+=d,d=0),l<0&&(n+=l,l=0),d+h>c.width&&(h=Math.max(c.width-d,0)),l+n>c.height&&(n=Math.max(c.height-l,0));for(var p=[],x=l;x<l+n;x++)for(var T=d;T<d+h;T++){var E=c.data[x][T];if(E!==null){if(o&&E.index===-1||v&&!E.collides||g&&!E.hasInterestingFace)continue;p.push(E)}}return p};r.exports=m}),31674:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(84068),m=e(50811),d=e(7563),l=e(72283),h=e(93736),n=function(g,p){return d.RectangleToTriangle(p,g)},a=new h,c=new h,o=new h,v=function(g,p,x,T){if(g===void 0)return[];var E=l;g instanceof u.Circle?E=d.CircleToRectangle:g instanceof u.Rectangle?E=d.RectangleToRectangle:g instanceof u.Triangle?E=n:g instanceof u.Line&&(E=d.LineToRectangle),T.tilemapLayer.worldToTileXY(g.left,g.top,!0,c,x);var M=c.x,P=c.y;T.tilemapLayer.worldToTileXY(g.right,g.bottom,!1,o,x);var w=Math.ceil(o.x),R=Math.ceil(o.y),A=Math.max(w-M,1),O=Math.max(R-P,1),F=m(M,P,A,O,p,T),b=T.tileWidth,D=T.tileHeight;T.tilemapLayer&&(b*=T.tilemapLayer.scaleX,D*=T.tilemapLayer.scaleY);for(var I=[],B=new u.Rectangle(0,0,b,D),z=0;z<F.length;z++){var Y=F[z];T.tilemapLayer.tileToWorldXY(Y.x,Y.y,a,x),B.x=a.x,B.y=a.y,E(g,B)&&I.push(Y)}return I};r.exports=v}),44662:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(50811),m=e(93736),d=new m,l=new m,h=function(n,a,c,o,v,g,p){var x=p.tilemapLayer.tilemap._convert.WorldToTileXY;x(n,a,!0,d,g,p);var T=d.x,E=d.y;x(n+c,a+o,!1,l,g,p);var M=Math.ceil(l.x),P=Math.ceil(l.y);return u(T,E,M-T,P-E,v,p)};r.exports=h}),29296:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(12920),m=e(10618),d=e(806),l=function(h){return h===u.ORTHOGONAL?d:m};r.exports=l}),32688:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(12920),m=e(11516),d=e(18750),l=e(72283),h=e(90562),n=e(45676),a=function(c){return c===u.ORTHOGONAL?n:c===u.ISOMETRIC?d:c===u.HEXAGONAL?m:c===u.STAGGERED?h:l};r.exports=a}),74326:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(12920),m=e(10618),d=e(3689),l=e(70520),h=function(n){return n===u.ORTHOGONAL?l:n===u.STAGGERED?d:m};r.exports=h}),46598:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(62839),m=function(d,l,h){if(u(d,l,h)){var n=h.data[l][d];return n!==null&&n.index>-1}else return!1};r.exports=m}),28654:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(46598),m=e(93736),d=new m,l=function(h,n,a,c){c.tilemapLayer.worldToTileXY(h,n,!0,d,a);var o=d.x,v=d.y;return u(o,v,c)};r.exports=l}),6358:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(82127),m=e(84314),d=function(l,h){var n=l.tilemapLayer.tilemap,a=l.tilemapLayer,c=Math.floor(n.tileWidth*a.scaleX),o=Math.floor(n.tileHeight*a.scaleY),v=l.hexSideLength,g,p,x,T;if(this.staggerAxis==="y"){var E=(o-v)/2+v;g=m(h.worldView.x-a.x,c,0,!0)-a.cullPaddingX,p=u(h.worldView.right-a.x,c,0,!0)+a.cullPaddingX,x=m(h.worldView.y-a.y,E,0,!0)-a.cullPaddingY,T=u(h.worldView.bottom-a.y,E,0,!0)+a.cullPaddingY}else{var M=(c-v)/2+v;g=m(h.worldView.x-a.x,M,0,!0)-a.cullPaddingX,p=u(h.worldView.right-a.x,M,0,!0)+a.cullPaddingX,x=m(h.worldView.y-a.y,o,0,!0)-a.cullPaddingY,T=u(h.worldView.bottom-a.y,o,0,!0)+a.cullPaddingY}return{left:g,right:p,top:x,bottom:T}};r.exports=d}),37524:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(6358),m=e(6987),d=function(l,h,n,a){n===void 0&&(n=[]),a===void 0&&(a=0),n.length=0;var c=l.tilemapLayer,o=u(l,h);return c.skipCull&&c.scrollFactorX===1&&c.scrollFactorY===1&&(o.left=0,o.right=l.width,o.top=0,o.bottom=l.height),m(l,o,a,n),n};r.exports=d}),63634:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(21715),m=e(93736),d=new m,l=function(h,n,a,c){var o=c.baseTileWidth,v=c.baseTileHeight,g=c.tilemapLayer;g&&(o*=g.scaleX,v*=g.scaleY);var p=u(h,n,d,a,c),x=[],T=.5773502691896257,E,M;this.staggerAxis==="y"?(E=T*o,M=v/2):(E=o/2,M=T*v);for(var P=0;P<6;P++){var w=2*Math.PI*(.5-P)/6;x.push(new m(p.x+E*Math.cos(w),p.y+M*Math.sin(w)))}return x};r.exports=l}),21715:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(93736),m=function(d,l,h,n,a){h||(h=new u);var c=a.baseTileWidth,o=a.baseTileHeight,v=a.tilemapLayer,g=0,p=0;v&&(n||(n=v.scene.cameras.main),g=v.x+n.scrollX*(1-v.scrollFactorX),p=v.y+n.scrollY*(1-v.scrollFactorY),c*=v.scaleX,o*=v.scaleY);var x=c/2,T=o/2,E,M;return this.staggerAxis==="y"?(E=g+c*d+c,M=p+1.5*l*T+T,l%2===0&&(this.staggerIndex==="odd"?E-=x:E+=x)):this.staggerAxis==="x"&&this.staggerIndex==="odd"&&(E=g+1.5*d*x+x,M=p+o*d+o,d%2===0&&(this.staggerIndex==="odd"?M-=T:M+=T)),h.set(E,M)};r.exports=m}),11516:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(93736),m=function(d,l,h,n,a,c){n||(n=new u);var o=c.baseTileWidth,v=c.baseTileHeight,g=c.tilemapLayer;g&&(a||(a=g.scene.cameras.main),d=d-(g.x+a.scrollX*(1-g.scrollFactorX)),l=l-(g.y+a.scrollY*(1-g.scrollFactorY)),o*=g.scaleX,v*=g.scaleY);var p=.5773502691896257,x=-.3333333333333333,T=0,E=.6666666666666666,M=o/2,P=v/2,w,R,A,O,F;c.staggerAxis==="y"?(w=(d-M)/(p*o),R=(l-P)/P,A=p*w+x*R,O=T*w+E*R):(w=(d-M)/M,R=(l-P)/(p*v),A=x*w+p*R,O=E*w+T*R),F=-A-O;var b=Math.round(A),D=Math.round(O),I=Math.round(F),B=Math.abs(b-A),z=Math.abs(D-O),Y=Math.abs(I-F);B>z&&B>Y?b=-D-I:z>Y&&(D=-b-I);var X,H=D;return c.staggerIndex==="odd"?X=H%2===0?D/2+b:D/2+b-.5:X=H%2===0?D/2+b:D/2+b+.5,n.set(X,H)};r.exports=m}),62839:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){return e>=0&&e<m.width&&u>=0&&u<m.height};r.exports=y}),20887:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(13125),m=function(d,l,h,n){h===void 0&&(h=[]),n===void 0&&(n=0),h.length=0;var a=d.tilemapLayer,c=d.data,o=d.width,v=d.height,g=a.skipCull,p=0,x=o,T=0,E=v,M,P,w;if(n===0){for(P=T;P<E;P++)for(M=p;M<x;M++)if(g||u(M,P,d,l)){if(w=c[P][M],!w||w.index===-1||!w.visible||w.alpha===0)continue;h.push(w)}}else if(n===1){for(P=T;P<E;P++)for(M=x;M>=p;M--)if(g||u(M,P,d,l)){if(w=c[P][M],!w||w.index===-1||!w.visible||w.alpha===0)continue;h.push(w)}}else if(n===2){for(P=E;P>=T;P--)for(M=p;M<x;M++)if(g||u(M,P,d,l)){if(w=c[P][M],!w||w.index===-1||!w.visible||w.alpha===0)continue;h.push(w)}}else if(n===3){for(P=E;P>=T;P--)for(M=x;M>=p;M--)if(g||u(M,P,d,l)){if(w=c[P][M],!w||w.index===-1||!w.visible||w.alpha===0)continue;h.push(w)}}return a.tilesDrawn=h.length,a.tilesTotal=o*v,h};r.exports=m}),21808:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(93736),m=function(d,l,h,n,a){h||(h=new u);var c=a.baseTileWidth,o=a.baseTileHeight,v=a.tilemapLayer,g=0,p=0;v&&(n||(n=v.scene.cameras.main),g=v.x+n.scrollX*(1-v.scrollFactorX),c*=v.scaleX,p=v.y+n.scrollY*(1-v.scrollFactorY),o*=v.scaleY);var x=g+(d-l)*(c/2),T=p+(d+l)*(o/2);return h.set(x,T)};r.exports=m}),18750:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(93736),m=function(d,l,h,n,a,c,o){n||(n=new u);var v=c.baseTileWidth,g=c.baseTileHeight,p=c.tilemapLayer;p&&(a||(a=p.scene.cameras.main),l=l-(p.y+a.scrollY*(1-p.scrollFactorY)),g*=p.scaleY,d=d-(p.x+a.scrollX*(1-p.scrollFactorX)),v*=p.scaleX);var x=v/2,T=g/2;d=d-x,o||(l=l-g);var E=.5*(d/x+l/T),M=.5*(-d/x+l/T);return h&&(E=Math.floor(E),M=Math.floor(M)),n.set(E,M)};r.exports=m}),29003:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(29633),m=e(62839),d=e(92839),l=e(68234),h=function(n,a,c,o,v){if(o===void 0&&(o=!0),!m(a,c,v))return null;var g,p=v.data[c][a],x=p&&p.collides;n instanceof u?(v.data[c][a]===null&&(v.data[c][a]=new u(v,n.index,a,c,v.tileWidth,v.tileHeight)),v.data[c][a].copy(n)):(g=n,v.data[c][a]===null?v.data[c][a]=new u(v,g,a,c,v.tileWidth,v.tileHeight):v.data[c][a].index=g);var T=v.data[c][a],E=v.collideIndexes.indexOf(T.index)!==-1;if(g=n instanceof u?n.index:n,g===-1)T.width=v.tileWidth,T.height=v.tileHeight;else{var M=v.tilemapLayer.tilemap.tiles,P=M[g][2],w=v.tilemapLayer.tileset[P];T.width=w.tileWidth,T.height=w.tileHeight}return l(T,E),o&&x!==T.collides&&d(a,c,v),T};r.exports=h}),48565:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(29003),m=e(93736),d=new m,l=function(h,n,a,c,o,v){return v.tilemapLayer.worldToTileXY(n,a,!0,d,o,v),u(h,d.x,d.y,c,v)};r.exports=l}),56547:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(60386),m=e(29003),d=function(l,h,n,a,c){if(a===void 0&&(a=!0),!Array.isArray(l))return null;Array.isArray(l[0])||(l=[l]);for(var o=l.length,v=l[0].length,g=0;g<o;g++)for(var p=0;p<v;p++){var x=l[g][p];m(x,h+p,n+g,!1,c)}a&&u(h-1,n-1,v+2,o+2,c)};r.exports=d}),91180:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(50811),m=e(72861),d=function(l,h,n,a,c,o){var v,g=u(l,h,n,a,{},o);if(!c)for(c=[],v=0;v<g.length;v++)c.indexOf(g[v].index)===-1&&c.push(g[v].index);for(v=0;v<g.length;v++)g[v].index=m(c)};r.exports=d}),929:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(29633),m=e(62839),d=e(92839),l=function(h,n,a,c,o){if(a===void 0&&(a=!0),c===void 0&&(c=!0),!m(h,n,o))return null;var v=o.data[n][h];if(v)o.data[n][h]=a?null:new u(o,-1,h,n,o.tileWidth,o.tileHeight);else return null;return c&&v&&v.collides&&d(h,n,o),v};r.exports=l}),17384:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(929),m=e(93736),d=new m,l=function(h,n,a,c,o,v){return v.tilemapLayer.worldToTileXY(h,n,!0,d,o,v),u(d.x,d.y,a,c,v)};r.exports=l}),93763:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(50811),m=e(95509),d=new m(105,210,231,150),l=new m(243,134,48,200),h=new m(40,39,37,150),n=function(a,c,o){c===void 0&&(c={});var v=c.tileColor!==void 0?c.tileColor:d,g=c.collidingTileColor!==void 0?c.collidingTileColor:l,p=c.faceColor!==void 0?c.faceColor:h,x=u(0,0,o.width,o.height,null,o);a.translateCanvas(o.tilemapLayer.x,o.tilemapLayer.y),a.scaleCanvas(o.tilemapLayer.scaleX,o.tilemapLayer.scaleY);for(var T=0;T<x.length;T++){var E=x[T],M=E.width,P=E.height,w=E.pixelX,R=E.pixelY,A=E.collides?g:v;A!==null&&(a.fillStyle(A.color,A.alpha/255),a.fillRect(w,R,M,P)),w+=1,R+=1,M-=2,P-=2,p!==null&&(a.lineStyle(1,p.color,p.alpha/255),E.faceTop&&a.lineBetween(w,R,w+M,R),E.faceRight&&a.lineBetween(w+M,R,w+M,R+P),E.faceBottom&&a.lineBetween(w,R+P,w+M,R+P),E.faceLeft&&a.lineBetween(w,R,w,R+P))}};r.exports=n}),51202:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(50811),m=function(d,l,h,n,a,c,o){for(var v=u(h,n,a,c,null,o),g=0;g<v.length;g++)v[g]&&v[g].index===d&&(v[g].index=l)};r.exports=m}),6987:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d){var l=e.data,h=e.width,n=e.height,a=e.tilemapLayer,c=Math.max(0,u.left),o=Math.min(h,u.right),v=Math.max(0,u.top),g=Math.min(n,u.bottom),p,x,T;if(m===0)for(x=v;x<g;x++)for(p=c;l[x]&&p<o;p++)T=l[x][p],!(!T||T.index===-1||!T.visible||T.alpha===0)&&d.push(T);else if(m===1)for(x=v;x<g;x++)for(p=o;l[x]&&p>=c;p--)T=l[x][p],!(!T||T.index===-1||!T.visible||T.alpha===0)&&d.push(T);else if(m===2)for(x=g;x>=v;x--)for(p=c;l[x]&&p<o;p++)T=l[x][p],!(!T||T.index===-1||!T.visible||T.alpha===0)&&d.push(T);else if(m===3)for(x=g;x>=v;x--)for(p=o;l[x]&&p>=c;p--)T=l[x][p],!(!T||T.index===-1||!T.visible||T.alpha===0)&&d.push(T);return a.tilesDrawn=d.length,a.tilesTotal=h*n,d};r.exports=y}),51710:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(68234),m=e(60386),d=e(91181),l=function(h,n,a,c,o){n===void 0&&(n=!0),a===void 0&&(a=!0),o===void 0&&(o=!0),Array.isArray(h)||(h=[h]);for(var v=0;v<h.length;v++)d(h[v],n,c);if(o)for(var g=0;g<c.height;g++)for(var p=0;p<c.width;p++){var x=c.data[g][p];x&&h.indexOf(x.index)!==-1&&u(x,n)}a&&m(0,0,c.width,c.height,c)};r.exports=l}),15216:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(68234),m=e(60386),d=e(91181),l=function(h,n,a,c,o,v){if(a===void 0&&(a=!0),c===void 0&&(c=!0),v===void 0&&(v=!0),!(h>n)){for(var g=h;g<=n;g++)d(g,a,o);if(v)for(var p=0;p<o.height;p++)for(var x=0;x<o.width;x++){var T=o.data[p][x];T&&T.index>=h&&T.index<=n&&u(T,a)}c&&m(0,0,o.width,o.height,o)}};r.exports=l}),33158:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(68234),m=e(60386),d=e(91181),l=function(h,n,a,c){n===void 0&&(n=!0),a===void 0&&(a=!0),Array.isArray(h)||(h=[h]);for(var o=0;o<c.height;o++)for(var v=0;v<c.width;v++){var g=c.data[o][v];g&&h.indexOf(g.index)===-1&&(u(g,n),d(g.index,n,c))}a&&m(0,0,c.width,c.height,c)};r.exports=l}),4180:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(68234),m=e(60386),d=e(19256),l=function(h,n,a,c){n===void 0&&(n=!0),a===void 0&&(a=!0);for(var o=0;o<c.height;o++)for(var v=0;v<c.width;v++){var g=c.data[o][v];if(g){for(var p in h)if(d(g.properties,p)){var x=h[p];Array.isArray(x)||(x=[x]);for(var T=0;T<x.length;T++)g.properties[p]===x[T]&&u(g,n)}}}a&&m(0,0,c.width,c.height,c)};r.exports=l}),18625:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(68234),m=e(60386),d=function(l,h,n){l===void 0&&(l=!0),h===void 0&&(h=!0);for(var a=0;a<n.height;a++)for(var c=0;c<n.width;c++){var o=n.data[a][c];if(o){var v=o.getCollisionGroup();v&&v.objects&&v.objects.length>0&&u(o,l)}}h&&m(0,0,n.width,n.height,n)};r.exports=d}),91181:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){var d=m.collideIndexes.indexOf(e);u&&d===-1?m.collideIndexes.push(e):!u&&d!==-1&&m.collideIndexes.splice(d,1)};r.exports=y}),68234:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){u?e.setCollision(!0,!0,!0,!0,!1):e.resetCollision(!1)};r.exports=y}),11628:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d){if(typeof e=="number")d.callbacks[e]=u!==null?{callback:u,callbackContext:m}:void 0;else for(var l=0,h=e.length;l<h;l++)d.callbacks[e[l]]=u!==null?{callback:u,callbackContext:m}:void 0};r.exports=y}),72732:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(50811),m=function(d,l,h,n,a,c,o){for(var v=u(d,l,h,n,null,o),g=0;g<v.length;g++)v[g].setCollisionCallback(a,c)};r.exports=m}),34397:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(50811),m=e(18592),d=function(l,h,n,a,c){var o=u(l,h,n,a,null,c),v=o.map(function(p){return p.index});m(v);for(var g=0;g<o.length;g++)o[g].index=v[g]};r.exports=d}),53945:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(82127),m=e(84314),d=function(l,h){var n=l.tilemapLayer.tilemap,a=l.tilemapLayer,c=Math.floor(n.tileWidth*a.scaleX),o=Math.floor(n.tileHeight*a.scaleY),v=m(h.worldView.x-a.x,c,0,!0)-a.cullPaddingX,g=u(h.worldView.right-a.x,c,0,!0)+a.cullPaddingX,p=m(h.worldView.y-a.y,o/2,0,!0)-a.cullPaddingY,x=u(h.worldView.bottom-a.y,o/2,0,!0)+a.cullPaddingY;return{left:v,right:g,top:p,bottom:x}};r.exports=d}),19242:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(53945),m=e(6987),d=function(l,h,n,a){n===void 0&&(n=[]),a===void 0&&(a=0),n.length=0;var c=l.tilemapLayer,o=u(l,h);return c.skipCull&&c.scrollFactorX===1&&c.scrollFactorY===1&&(o.left=0,o.right=l.width,o.top=0,o.bottom=l.height),m(l,o,a,n),n};r.exports=d}),33388:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(93736),m=function(d,l,h,n,a){h||(h=new u);var c=a.baseTileWidth,o=a.baseTileHeight,v=a.tilemapLayer,g=0,p=0;v&&(n||(n=v.scene.cameras.main),g=v.x+n.scrollX*(1-v.scrollFactorX),c*=v.scaleX,p=v.y+n.scrollY*(1-v.scrollFactorY),o*=v.scaleY);var x=g+d*c+l%2*(c/2),T=p+l*(o/2);return h.set(x,T)};r.exports=m}),84132:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){var d=m.baseTileHeight,l=m.tilemapLayer,h=0;return l&&(u===void 0&&(u=l.scene.cameras.main),h=l.y+u.scrollY*(1-l.scrollFactorY),d*=l.scaleY),h+e*(d/2)+d};r.exports=y}),90562:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(93736),m=function(d,l,h,n,a,c){n||(n=new u);var o=c.baseTileWidth,v=c.baseTileHeight,g=c.tilemapLayer;g&&(a||(a=g.scene.cameras.main),l=l-(g.y+a.scrollY*(1-g.scrollFactorY)),v*=g.scaleY,d=d-(g.x+a.scrollX*(1-g.scrollFactorX)),o*=g.scaleX);var p=h?Math.floor(l/(v/2)):l/(v/2),x=h?Math.floor((d+p%2*.5*o)/o):(d+p%2*.5*o)/o;return n.set(x,p)};r.exports=m}),3689:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d){var l=d.baseTileHeight,h=d.tilemapLayer;return h&&(m||(m=h.scene.cameras.main),e=e-(h.y+m.scrollY*(1-h.scrollFactorY)),l*=h.scaleY),u?Math.floor(e/(l/2)):e/(l/2)};r.exports=y}),55217:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(50811),m=function(d,l,h,n,a,c,o){for(var v=u(h,n,a,c,null,o),g=0;g<v.length;g++)v[g]&&(v[g].index===d?v[g].index=l:v[g].index===l&&(v[g].index=d))};r.exports=m}),44150:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){var d=m.baseTileWidth,l=m.tilemapLayer,h=0;return l&&(u||(u=l.scene.cameras.main),h=l.x+u.scrollX*(1-l.scrollFactorX),d*=l.scaleX),h+e*d};r.exports=y}),46836:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(44150),m=e(42477),d=e(93736),l=function(h,n,a,c,o){return a||(a=new d(0,0)),a.x=u(h,c,o),a.y=m(n,c,o),a};r.exports=l}),42477:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){var d=m.baseTileHeight,l=m.tilemapLayer,h=0;return l&&(u||(u=l.scene.cameras.main),h=l.y+u.scrollY*(1-l.scrollFactorY),d*=l.scaleY),h+e*d};r.exports=y}),39677:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(50811),m=function(d,l,h,n,a,c){if(a){var o,v=u(d,l,h,n,null,c),g=0;for(o=0;o<a.length;o++)g+=a[o].weight;if(!(g<=0))for(o=0;o<v.length;o++){for(var p=Math.random()*g,x=0,T=-1,E=0;E<a.length;E++)if(x+=a[E].weight,p<=x){var M=a[E].index;T=Array.isArray(M)?M[Math.floor(Math.random()*M.length)]:M;break}v[o].index=T}}};r.exports=m}),806:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(45676),m=e(93736),d=new m,l=function(h,n,a,c){return u(h,0,n,d,a,c),d.x};r.exports=l}),45676:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(93736),m=function(d,l,h,n,a,c){h===void 0&&(h=!0),n||(n=new u);var o=c.baseTileWidth,v=c.baseTileHeight,g=c.tilemapLayer;g&&(a||(a=g.scene.cameras.main),d=d-(g.x+a.scrollX*(1-g.scrollFactorX)),l=l-(g.y+a.scrollY*(1-g.scrollFactorY)),o*=g.scaleX,v*=g.scaleY);var p=d/o,x=l/v;return h&&(p=Math.floor(p),x=Math.floor(x)),n.set(p,x)};r.exports=m}),70520:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(45676),m=e(93736),d=new m,l=function(h,n,a,c){return u(0,h,n,d,a,c),d.y};r.exports=l}),5047:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={CalculateFacesAt:e(92839),CalculateFacesWithin:e(60386),CheckIsoBounds:e(13125),Copy:e(17347),CreateFromTiles:e(93604),CullBounds:e(71586),CullTiles:e(381),Fill:e(97734),FilterTiles:e(63555),FindByIndex:e(37982),FindTile:e(48297),ForEachTile:e(80916),GetCullTilesFunction:e(31493),GetTileAt:e(15494),GetTileAtWorldXY:e(24640),GetTileCorners:e(48495),GetTileCornersFunction:e(7160),GetTilesWithin:e(50811),GetTilesWithinShape:e(31674),GetTilesWithinWorldXY:e(44662),GetTileToWorldXFunction:e(16884),GetTileToWorldXYFunction:e(68182),GetTileToWorldYFunction:e(3752),GetWorldToTileXFunction:e(29296),GetWorldToTileXYFunction:e(32688),GetWorldToTileYFunction:e(74326),HasTileAt:e(46598),HasTileAtWorldXY:e(28654),HexagonalCullBounds:e(6358),HexagonalCullTiles:e(37524),HexagonalGetTileCorners:e(63634),HexagonalTileToWorldXY:e(21715),HexagonalWorldToTileXY:e(11516),IsInLayerBounds:e(62839),IsometricCullTiles:e(20887),IsometricTileToWorldXY:e(21808),IsometricWorldToTileXY:e(18750),PutTileAt:e(29003),PutTileAtWorldXY:e(48565),PutTilesAt:e(56547),Randomize:e(91180),RemoveTileAt:e(929),RemoveTileAtWorldXY:e(17384),RenderDebug:e(93763),ReplaceByIndex:e(51202),RunCull:e(6987),SetCollision:e(51710),SetCollisionBetween:e(15216),SetCollisionByExclusion:e(33158),SetCollisionByProperty:e(4180),SetCollisionFromCollisionGroup:e(18625),SetLayerCollisionIndex:e(91181),SetTileCollision:e(68234),SetTileIndexCallback:e(11628),SetTileLocationCallback:e(72732),Shuffle:e(34397),StaggeredCullBounds:e(53945),StaggeredCullTiles:e(19242),StaggeredTileToWorldXY:e(33388),StaggeredTileToWorldY:e(84132),StaggeredWorldToTileXY:e(90562),StaggeredWorldToTileY:e(3689),SwapByIndex:e(55217),TileToWorldX:e(44150),TileToWorldXY:e(46836),TileToWorldY:e(42477),WeightedRandomize:e(39677),WorldToTileX:e(806),WorldToTileXY:e(45676),WorldToTileY:e(70520)}}),12920:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}}),84758:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u={ORIENTATION:e(12920)};r.exports=u}),52678:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(98611),m=e(84758),d={Components:e(5047),Parsers:e(34124),Formats:e(93560),ImageCollection:e(97042),ParseToTilemap:e(15043),Tile:e(29633),Tilemap:e(89797),TilemapCreator:e(4843),TilemapFactory:e(37940),Tileset:e(47975),TilemapLayer:e(87177),Orientation:e(12920),LayerData:e(94990),MapData:e(16586),ObjectLayer:e(15256)};d=u(!1,d,m.ORIENTATION),r.exports=d}),94990:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(12920),d=e(72632),l=new u({initialize:function(n){n===void 0&&(n={}),this.name=d(n,"name","layer"),this.x=d(n,"x",0),this.y=d(n,"y",0),this.width=d(n,"width",0),this.height=d(n,"height",0),this.tileWidth=d(n,"tileWidth",0),this.tileHeight=d(n,"tileHeight",0),this.baseTileWidth=d(n,"baseTileWidth",this.tileWidth),this.baseTileHeight=d(n,"baseTileHeight",this.tileHeight),this.orientation=d(n,"orientation",m.ORTHOGONAL),this.widthInPixels=d(n,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=d(n,"heightInPixels",this.height*this.baseTileHeight),this.alpha=d(n,"alpha",1),this.visible=d(n,"visible",!0),this.properties=d(n,"properties",[]),this.indexes=d(n,"indexes",[]),this.collideIndexes=d(n,"collideIndexes",[]),this.callbacks=d(n,"callbacks",[]),this.bodies=d(n,"bodies",[]),this.data=d(n,"data",[]),this.tilemapLayer=d(n,"tilemapLayer",null),this.hexSideLength=d(n,"hexSideLength",0),this.staggerAxis=d(n,"staggerAxis","y"),this.staggerIndex=d(n,"staggerIndex","odd")}});r.exports=l}),16586:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(12920),d=e(72632),l=new u({initialize:function(n){n===void 0&&(n={}),this.name=d(n,"name","map"),this.width=d(n,"width",0),this.height=d(n,"height",0),this.infinite=d(n,"infinite",!1),this.tileWidth=d(n,"tileWidth",0),this.tileHeight=d(n,"tileHeight",0),this.widthInPixels=d(n,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=d(n,"heightInPixels",this.height*this.tileHeight),this.format=d(n,"format",null),this.orientation=d(n,"orientation",m.ORTHOGONAL),this.renderOrder=d(n,"renderOrder","right-down"),this.version=d(n,"version","1"),this.properties=d(n,"properties",{}),this.layers=d(n,"layers",[]),this.images=d(n,"images",[]),this.objects=d(n,"objects",[]),Array.isArray(this.objects)||(this.objects=[]),this.collision=d(n,"collision",{}),this.tilesets=d(n,"tilesets",[]),this.imageCollections=d(n,"imageCollections",[]),this.tiles=d(n,"tiles",[]),this.hexSideLength=d(n,"hexSideLength",0),this.staggerAxis=d(n,"staggerAxis","y"),this.staggerIndex=d(n,"staggerIndex","odd")}});r.exports=l}),15256:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(72632),d=new u({initialize:function(h){h===void 0&&(h={}),this.name=m(h,"name","object layer"),this.opacity=m(h,"opacity",1),this.properties=m(h,"properties",{}),this.propertyTypes=m(h,"propertytypes",{}),this.type=m(h,"type","objectgroup"),this.visible=m(h,"visible",!0),this.objects=m(h,"objects",[]),Array.isArray(this.objects)||(this.objects=[])}});r.exports=d}),21394:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(12920),m=function(d){return d=d.toLowerCase(),d==="isometric"?u.ISOMETRIC:d==="staggered"?u.STAGGERED:d==="hexagonal"?u.HEXAGONAL:u.ORTHOGONAL};r.exports=m}),90715:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(93560),m=e(84346),d=e(96097),l=e(2378),h=e(44909),n=function(a,c,o,v,g,p){var x;switch(c){case u.ARRAY_2D:x=m(a,o,v,g,p);break;case u.CSV:x=d(a,o,v,g,p);break;case u.TILED_JSON:x=l(a,o,p);break;case u.WELTMEISTER:x=h(a,o,p);break;default:console.warn("Unrecognized tilemap data format: "+c),x=null}return x};r.exports=n}),84346:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(93560),m=e(94990),d=e(16586),l=e(29633),h=function(n,a,c,o,v){for(var g=new m({tileWidth:c,tileHeight:o}),p=new d({name:n,tileWidth:c,tileHeight:o,format:u.ARRAY_2D,layers:[g]}),x=[],T=a.length,E=0,M=0;M<a.length;M++){x[M]=[];for(var P=a[M],w=0;w<P.length;w++){var R=parseInt(P[w],10);isNaN(R)||R===-1?x[M][w]=v?null:new l(g,-1,w,M,c,o):x[M][w]=new l(g,R,w,M,c,o)}E===0&&(E=P.length)}return p.width=g.width=E,p.height=g.height=T,p.widthInPixels=g.widthInPixels=E*c,p.heightInPixels=g.heightInPixels=T*o,g.data=x,p};r.exports=h}),96097:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(93560),m=e(84346),d=function(l,h,n,a,c){var o=h.trim().split(`
`).map(function(g){return g.split(",")}),v=m(l,o,n,a,c);return v.format=u.CSV,v};r.exports=d}),30951:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(94990),m=e(29633),d=function(l,h){for(var n=[],a=0;a<l.layer.length;a++){for(var c=l.layer[a],o=new u({name:c.name,width:c.width,height:c.height,tileWidth:c.tilesize,tileHeight:c.tilesize,visible:c.visible===1}),v=[],g=[],p=0;p<c.data.length;p++){for(var x=0;x<c.data[p].length;x++){var T=c.data[p][x]-1,E;T>-1?E=new m(o,T,x,p,c.tilesize,c.tilesize):E=h?null:new m(o,-1,x,p,c.tilesize,c.tilesize),v.push(E)}g.push(v),v=[]}o.data=g,n.push(o)}return n};r.exports=d}),47488:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(47975),m=function(d){for(var l=[],h=[],n=0;n<d.layer.length;n++){var a=d.layer[n],c=a.tilesetName;c!==""&&h.indexOf(c)===-1&&(h.push(c),l.push(new u(c,0,a.tilesize,a.tilesize,0,0)))}return l};r.exports=m}),44909:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(93560),m=e(16586),d=e(30951),l=e(47488),h=function(n,a,c){if(a.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+n),null;for(var o=0,v=0,g=0;g<a.layer.length;g++)a.layer[g].width>o&&(o=a.layer[g].width),a.layer[g].height>v&&(v=a.layer[g].height);var p=new m({width:o,height:v,name:n,tileWidth:a.layer[0].tilesize,tileHeight:a.layer[0].tilesize,format:u.WELTMEISTER});return p.layers=d(a,c),p.tilesets=l(a),p};r.exports=h}),24507:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={ParseTileLayers:e(30951),ParseTilesets:e(47488),ParseWeltmeister:e(44909)}}),34124:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={FromOrientationString:e(21394),Parse:e(90715),Parse2DArray:e(84346),ParseCSV:e(96097),Impact:e(24507),Tiled:e(50044)}}),48646:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(98611),m=function(d){for(var l,h,n,a,c,o=0;o<d.layers.length;o++){l=d.layers[o],a=null;for(var v=0;v<l.data.length;v++){c=l.data[v];for(var g=0;g<c.length;g++)h=c[g],!(h===null||h.index<0)&&(n=d.tiles[h.index][2],a=d.tilesets[n],h.width=a.tileWidth,h.height=a.tileHeight,a.tileProperties&&a.tileProperties[h.index-a.firstgid]&&(h.properties=u(h.properties,a.tileProperties[h.index-a.firstgid])))}}};r.exports=m}),43908:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){for(var u=window.atob(e),m=u.length,d=new Array(m/4),l=0;l<m;l+=4)d[l/4]=(u.charCodeAt(l)|u.charCodeAt(l+1)<<8|u.charCodeAt(l+2)<<16|u.charCodeAt(l+3)<<24)>>>0;return d};r.exports=y}),14556:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(47975),m=function(d){var l,h,n=[];for(l=0;l<d.imageCollections.length;l++)for(var a=d.imageCollections[l],c=a.images,o=0;o<c.length;o++){var v=c[o];h=new u(v.image,v.gid,a.imageWidth,a.imageHeight,0,0),h.updateTileData(a.imageWidth,a.imageHeight),d.tilesets.push(h)}for(l=0;l<d.tilesets.length;l++){h=d.tilesets[l];for(var g=h.tileMargin,p=h.tileMargin,x=0,T=0,E=0,M=h.firstgid;M<h.firstgid+h.total&&(n[M]=[g,p,l],g+=h.tileWidth+h.tileSpacing,x++,!(x===h.total||(T++,T===h.columns&&(g=h.tileMargin,p+=h.tileHeight+h.tileSpacing,T=0,E++,E===h.rows))));M++);}return n};r.exports=m}),92044:((r,y,e)=>{/**
 * @author       Seth Berrier <berriers@uwstout.edu>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72632),m=function(d,l,h){if(!l)return{i:0,layers:d.layers,name:"",opacity:1,visible:!0,x:0,y:0};var n=l.x+u(l,"startx",0)*d.tilewidth+u(l,"offsetx",0),a=l.y+u(l,"starty",0)*d.tileheight+u(l,"offsety",0);return{i:0,layers:l.layers,name:h.name+l.name+"/",opacity:h.opacity*l.opacity,visible:h.visible&&l.visible,x:h.x+n,y:h.y+a}};r.exports=m}),8847:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=2147483648,e=1073741824,u=536870912,m=function(d){var l=!!(d&y),h=!!(d&e),n=!!(d&u);d=d&536870911;var a=0,c=!1;return l&&h&&n?(a=Math.PI/2,c=!0):l&&h&&!n?(a=Math.PI,c=!1):l&&!h&&n?(a=Math.PI/2,c=!1):l&&!h&&!n?(a=0,c=!0):!l&&h&&n?(a=3*Math.PI/2,c=!1):!l&&h&&!n?(a=Math.PI,c=!0):!l&&!h&&n?(a=3*Math.PI/2,c=!0):!l&&!h&&!n&&(a=0,c=!1),{gid:d,flippedHorizontal:l,flippedVertical:h,flippedAntiDiagonal:n,rotation:a,flipped:c}};r.exports=m}),78339:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72632),m=e(92044),d=function(l){for(var h=[],n=[],a=m(l);a.i<a.layers.length||n.length>0;){if(a.i>=a.layers.length){if(n.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}a=n.pop();continue}var c=a.layers[a.i];if(a.i++,c.type!=="imagelayer"){if(c.type==="group"){var o=m(l,c,a);n.push(a),a=o}continue}var v=u(c,"offsetx",0)+u(c,"startx",0),g=u(c,"offsety",0)+u(c,"starty",0);h.push({name:a.name+c.name,image:c.image,x:a.x+v+c.x,y:a.y+g+c.y,alpha:a.opacity*c.opacity,visible:a.visible&&c.visible,properties:u(c,"properties",{})})}return h};r.exports=d}),2378:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(48646),m=e(14556),d=e(12920),l=e(28699),h=e(93560),n=e(21394),a=e(16586),c=e(78339),o=e(61136),v=e(95925),g=e(93392),p=function(x,T,E){var M=l(T),P=new a({width:M.width,height:M.height,name:x,tileWidth:M.tilewidth,tileHeight:M.tileheight,orientation:n(M.orientation),format:h.TILED_JSON,version:M.version,properties:M.properties,renderOrder:M.renderorder,infinite:M.infinite});P.orientation===d.HEXAGONAL&&(P.hexSideLength=M.hexsidelength,P.staggerAxis=M.staggeraxis,P.staggerIndex=M.staggerindex),P.layers=v(M,E),P.images=c(M);var w=g(M);return P.tilesets=w.tilesets,P.imageCollections=w.imageCollections,P.objects=o(M),P.tiles=m(P),u(P),P};r.exports=p}),4281:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(28820),m=e(8847),d=function(n){return{x:n.x,y:n.y}},l=["id","name","type","rotation","properties","visible","x","y","width","height"],h=function(n,a,c){a===void 0&&(a=0),c===void 0&&(c=0);var o=u(n,l);if(o.x+=a,o.y+=c,n.gid){var v=m(n.gid);o.gid=v.gid,o.flippedHorizontal=v.flippedHorizontal,o.flippedVertical=v.flippedVertical,o.flippedAntiDiagonal=v.flippedAntiDiagonal}else n.polyline?o.polyline=n.polyline.map(d):n.polygon?o.polygon=n.polygon.map(d):n.ellipse?o.ellipse=n.ellipse:n.text?o.text=n.text:n.point?o.point=!0:o.rectangle=!0;return o};r.exports=h}),61136:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72632),m=e(4281),d=e(15256),l=e(92044),h=function(n){for(var a=[],c=[],o=l(n);o.i<o.layers.length||c.length>0;){if(o.i>=o.layers.length){if(c.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}o=c.pop();continue}var v=o.layers[o.i];if(o.i++,v.opacity*=o.opacity,v.visible=o.visible&&v.visible,v.type!=="objectgroup"){if(v.type==="group"){var g=l(n,v,o);c.push(o),o=g}continue}v.name=o.name+v.name;for(var p=o.x+u(v,"startx",0)+u(v,"offsetx",0),x=o.y+u(v,"starty",0)+u(v,"offsety",0),T=[],E=0;E<v.objects.length;E++){var M=m(v.objects[E],p,x);T.push(M)}var P=new d(v);P.objects=T,a.push(P)}return a};r.exports=h}),95925:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(43908),m=e(12920),d=e(92044),l=e(21394),h=e(72632),n=e(94990),a=e(8847),c=e(29633),o=function(v,g){for(var p=h(v,"infinite",!1),x=[],T=[],E=d(v);E.i<E.layers.length||T.length>0;){if(E.i>=E.layers.length){if(T.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}E=T.pop();continue}var M=E.layers[E.i];if(E.i++,M.type!=="tilelayer"){if(M.type==="group"){var P=d(v,M,E);T.push(E),E=P}continue}if(M.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+M.name+"'");continue}else if(M.encoding&&M.encoding==="base64"){if(M.chunks)for(var w=0;w<M.chunks.length;w++)M.chunks[w].data=u(M.chunks[w].data);M.data&&(M.data=u(M.data)),delete M.encoding}var R,A,O,F,b=[],D=0;if(p){var I=h(M,"startx",0)+M.x,B=h(M,"starty",0)+M.y;R=new n({name:E.name+M.name,x:E.x+h(M,"offsetx",0)+I*v.tilewidth,y:E.y+h(M,"offsety",0)+B*v.tileheight,width:M.width,height:M.height,tileWidth:v.tilewidth,tileHeight:v.tileheight,alpha:E.opacity*M.opacity,visible:E.visible&&M.visible,properties:h(M,"properties",[]),orientation:l(v.orientation)}),R.orientation===m.HEXAGONAL&&(R.hexSideLength=v.hexsidelength,R.staggerAxis=v.staggeraxis,R.staggerIndex=v.staggerindex);for(var z=0;z<M.height;z++){b[z]=[null];for(var Y=0;Y<M.width;Y++)b[z][Y]=null}for(z=0,K=M.chunks.length;z<K;z++)for(var X=M.chunks[z],H=X.x-I,N=X.y-B,U=0,L=0,G=X.data.length;L<G;L++){var V=D+H,k=U+N;A=a(X.data[L]),A.gid>0?(O=new c(R,A.gid,V,k,v.tilewidth,v.tileheight),O.rotation=A.rotation,O.flipX=A.flipped,b[k][V]=O):(F=g?null:new c(R,-1,V,k,v.tilewidth,v.tileheight),b[k][V]=F),D++,D===X.width&&(U++,D=0)}}else{R=new n({name:E.name+M.name,x:E.x+h(M,"offsetx",0)+M.x,y:E.y+h(M,"offsety",0)+M.y,width:M.width,height:M.height,tileWidth:v.tilewidth,tileHeight:v.tileheight,alpha:E.opacity*M.opacity,visible:E.visible&&M.visible,properties:h(M,"properties",[]),orientation:l(v.orientation)}),R.orientation===m.HEXAGONAL&&(R.hexSideLength=v.hexsidelength,R.staggerAxis=v.staggeraxis,R.staggerIndex=v.staggerindex);for(var W=[],$=0,K=M.data.length;$<K;$++)A=a(M.data[$]),A.gid>0?(O=new c(R,A.gid,D,b.length,v.tilewidth,v.tileheight),O.rotation=A.rotation,O.flipX=A.flipped,W.push(O)):(F=g?null:new c(R,-1,D,b.length,v.tilewidth,v.tileheight),W.push(F)),D++,D===M.width&&(b.push(W),D=0,W=[])}R.data=b,x.push(R)}return x};r.exports=o}),93392:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(47975),m=e(97042),d=e(4281),l=e(39642),h=function(n){for(var a=[],c=[],o=null,v,g=0;g<n.tilesets.length;g++){var p=n.tilesets[g];if(p.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(p.image){var x=new u(p.name,p.firstgid,p.tilewidth,p.tileheight,p.margin,p.spacing,void 0,void 0,p.tileoffset);if(n.version>1){var T=void 0,E=void 0;if(Array.isArray(p.tiles)){T=T||{},E=E||{};for(var M=0;M<p.tiles.length;M++){var P=p.tiles[M];if(P.properties){var w={};P.properties.forEach(function(z){w[z.name]=z.value}),E[P.id]=w}if(P.objectgroup&&((T[P.id]||(T[P.id]={})).objectgroup=P.objectgroup,P.objectgroup.objects)){var R=P.objectgroup.objects.map(function(z){return d(z)});T[P.id].objectgroup.objects=R}P.animation&&((T[P.id]||(T[P.id]={})).animation=P.animation),P.type&&((T[P.id]||(T[P.id]={})).type=P.type)}}Array.isArray(p.wangsets)&&(T=T||{},E=E||{},l(p.wangsets,T)),T&&(x.tileData=T,x.tileProperties=E)}else if(p.tileproperties&&(x.tileProperties=p.tileproperties),p.tiles){x.tileData=p.tiles;for(v in x.tileData){var A=x.tileData[v].objectgroup;if(A&&A.objects){var O=A.objects.map(function(z){return d(z)});x.tileData[v].objectgroup.objects=O}}}x.updateTileData(p.imagewidth,p.imageheight),a.push(x)}else{var F=new m(p.name,p.firstgid,p.tilewidth,p.tileheight,p.margin,p.spacing,p.properties),b=0;for(M=0;M<p.tiles.length;M++){P=p.tiles[M];var D=P.image,I=parseInt(P.id,10),B=p.firstgid+I;F.addImage(B,D),b=Math.max(I,b)}F.maxId=b,c.push(F)}o&&(o.lastgid=p.firstgid-1),o=p}return{tilesets:a,imageCollections:c}};r.exports=h}),39642:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){for(var m=0;m<e.length;m++){var d=e[m],l=m;if(d.name&&d.name!==""&&(l=d.name),Array.isArray(d.wangtiles)&&d.wangtiles.length>0){var h={},n={},a,c,o;if(Array.isArray(d.edgecolors))for(a=0;a<d.edgecolors.length;a++)o=1+a,c=d.edgecolors[a],c.name!==""&&(h[o]=c.name);if(Array.isArray(d.cornercolors))for(a=0;a<d.cornercolors.length;a++)o=1+a,c=d.cornercolors[a],c.name!==""&&(n[o]=c.name);if(Array.isArray(d.colors))for(a=0;a<d.colors.length;a++)c=d.colors[a],o=1+a,c.name!==""&&(h[o]=n[o]=c.name);for(var v=[h,n,h,n,h,n,h,n],g=0;g<d.wangtiles.length;g++){var p=d.wangtiles[g],x=u[p.tileid]||(u[p.tileid]={});x=x.wangid||(x.wangid={});for(var T=[],E=0;E<Math.min(v.length,p.wangid.length);E++){if(c=p.wangid[E],c===0){T.push(void 0);continue}var M=v[E][c];if(M!==void 0){T.push(M);continue}T.push(c)}x[l]=T}}}};r.exports=y}),50044:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={AssignTileProperties:e(48646),Base64Decode:e(43908),BuildTilesetIndex:e(14556),CreateGroupLayer:e(92044),ParseGID:e(8847),ParseImageLayers:e(78339),ParseJSONTiled:e(2378),ParseObject:e(4281),ParseObjectLayers:e(61136),ParseTileLayers:e(95925),ParseTilesets:e(93392)}}),73779:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(91963),d=e(7599),l=e(57911),h=e(66458),n=new u({initialize:function(c){this.scene=c,this.systems=c.sys,this.now=0,this.startTime=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],c.sys.events.once(d.BOOT,this.boot,this),c.sys.events.on(d.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(d.DESTROY,this.destroy,this)},start:function(){this.startTime=this.systems.game.loop.time;var a=this.systems.events;a.on(d.PRE_UPDATE,this.preUpdate,this),a.on(d.UPDATE,this.update,this),a.once(d.SHUTDOWN,this.shutdown,this)},addEvent:function(a){var c;return a instanceof l?(c=a,this.removeEvent(c),c.elapsed=c.startAt,c.hasDispatched=!1,c.repeatCount=c.repeat===-1||c.loop?999999999999:c.repeat):c=new l(a),this._pendingInsertion.push(c),c},delayedCall:function(a,c,o,v){return this.addEvent({delay:a,callback:c,args:o,callbackScope:v})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(a){Array.isArray(a)||(a=[a]);for(var c=0;c<a.length;c++){var o=a[c];h(this._pendingRemoval,o),h(this._pendingInsertion,o),h(this._active,o)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var a=this._pendingRemoval.length,c=this._pendingInsertion.length;if(!(a===0&&c===0)){var o,v;for(o=0;o<a;o++){v=this._pendingRemoval[o];var g=this._active.indexOf(v);g>-1&&this._active.splice(g,1),v.destroy()}for(o=0;o<c;o++)v=this._pendingInsertion[o],this._active.push(v);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(a,c){if(this.now=a,!this.paused){c*=this.timeScale;for(var o=0;o<this._active.length;o++){var v=this._active[o];if(!v.paused&&(v.elapsed+=c*v.timeScale,v.elapsed>=v.delay)){var g=v.elapsed-v.delay;if(v.elapsed=v.delay,!v.hasDispatched&&v.callback&&(v.hasDispatched=!0,v.callback.apply(v.callbackScope,v.args)),v.repeatCount>0){if(v.repeatCount--,g>=v.delay)for(;g>=v.delay&&v.repeatCount>0;)v.callback&&v.callback.apply(v.callbackScope,v.args),g-=v.delay,v.repeatCount--;v.elapsed=g,v.hasDispatched=!1}else v.hasDispatched&&this._pendingRemoval.push(v)}}}},shutdown:function(){var a;for(a=0;a<this._pendingInsertion.length;a++)this._pendingInsertion[a].destroy();for(a=0;a<this._active.length;a++)this._active[a].destroy();for(a=0;a<this._pendingRemoval.length;a++)this._pendingRemoval[a].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var c=this.systems.events;c.off(d.PRE_UPDATE,this.preUpdate,this),c.off(d.UPDATE,this.update,this),c.off(d.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(d.START,this.start,this),this.scene=null,this.systems=null}});m.register("Clock",n,"time"),r.exports=n}),20517:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(6659),d=e(61286),l=e(72632),h=e(7599),n=new u({Extends:m,initialize:function(c,o){m.call(this),this.scene=c,this.systems=c.sys,this.elapsed=0,this.paused=!0,this.complete=!1,this.totalComplete=0,this.events=[];var v=this.systems.events;v.on(h.PRE_UPDATE,this.preUpdate,this),v.on(h.UPDATE,this.update,this),v.once(h.SHUTDOWN,this.destroy,this),o&&this.add(o)},preUpdate:function(a,c){this.paused||(this.elapsed+=c)},update:function(){if(!this.paused){var a,c=this.events,o=!1,v=this.systems,g;for(a=0;a<c.length;a++){var p=c[a];if(!p.complete&&p.time<=this.elapsed){if(p.complete=!0,this.totalComplete++,p.once&&(o=!0),p.set&&p.target)for(var x in p.set)p.target[x]=p.set[x];p.tween&&v.tweens.add(p.tween),p.sound&&(typeof p.sound=="string"?v.sound.play(p.sound):v.sound.play(p.sound.key,p.sound.config)),g=p.target?p.target:this,p.event&&this.emit(p.event,g),p.run&&p.run.call(g),p.stop&&this.stop()}}if(o)for(a=0;a<c.length;a++)c[a].complete&&c[a].once&&(c.splice(a,1),a--);this.totalComplete>=c.length&&(this.complete=!0)}},play:function(a){return a===void 0&&(a=!0),this.paused=!1,this.complete=!1,this.totalComplete=0,a&&this.reset(),this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},stop:function(){return this.paused=!0,this.complete=!0,this},reset:function(){this.elapsed=0;for(var a=0;a<this.events.length;a++)this.events[a].complete=!1;return this.play(!1)},add:function(a){Array.isArray(a)||(a=[a]);var c=this.events,o=0;c.length>0&&(o=c[c.length-1].time);for(var v=0;v<a.length;v++){var g=a[v],p=l(g,"at",0),x=l(g,"in",null);x!==null&&(p=this.elapsed+x);var T=l(g,"from",null);T!==null&&(p=o+T),c.push({complete:!1,time:p,run:l(g,"run",null),event:l(g,"event",null),target:l(g,"target",null),set:l(g,"set",null),tween:l(g,"tween",null),sound:l(g,"sound",null),once:l(g,"once",!1),stop:l(g,"stop",!1)}),o=p}return this.complete=!1,this},clear:function(){return this.events=[],this.elapsed=0,this.paused=!0,this},isPlaying:function(){return!this.paused&&!this.complete},getProgress:function(){var a=Math.min(this.totalComplete,this.events.length);return a/this.events.length},destroy:function(){var a=this.systems.events;a.off(h.PRE_UPDATE,this.preUpdate,this),a.off(h.UPDATE,this.update,this),a.off(h.SHUTDOWN,this.destroy,this),this.scene=null,this.systems=null,this.events=[]}});d.register("timeline",function(a){return new n(this.scene,a)}),r.exports=n}),57911:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(72632),d=new u({initialize:function(h){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(h)},reset:function(l){if(this.delay=m(l,"delay",0),this.repeat=m(l,"repeat",0),this.loop=m(l,"loop",!1),this.callback=m(l,"callback",void 0),this.callbackScope=m(l,"callbackScope",this),this.args=m(l,"args",[]),this.timeScale=m(l,"timeScale",1),this.startAt=m(l,"startAt",0),this.paused=m(l,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this.delay===0&&(this.repeat>0||this.loop))throw new Error("TimerEvent infinite loop created via zero delay");return this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var l=this.delay+this.delay*this.repeat,h=this.elapsed+this.delay*(this.repeat-this.repeatCount);return h/l}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(l){l===void 0&&(l=!1),this.elapsed=this.delay,this.hasDispatched=!l,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});r.exports=d}),97121:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Clock:e(73779),Timeline:e(20517),TimerEvent:e(57911)}}),64532:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(66458),m=e(56694),d=e(5454),l=e(68710),h=e(91963),n=e(7599),a=e(91944),c=e(39366),o=e(68061),v=e(45641),g=e(56034),p=new m({initialize:function(T){this.scene=T,this.events=T.sys.events,this.timeScale=1,this.paused=!1,this.processing=!1,this.tweens=[],this.time=0,this.startTime=0,this.nextTime=0,this.prevTime=0,this.maxLag=500,this.lagSkip=33,this.gap=1e3/240,this.events.once(n.BOOT,this.boot,this),this.events.on(n.START,this.start,this)},boot:function(){this.events.once(n.DESTROY,this.destroy,this)},start:function(){this.timeScale=1,this.paused=!1,this.startTime=Date.now(),this.prevTime=this.startTime,this.nextTime=this.gap,this.events.on(n.UPDATE,this.update,this),this.events.once(n.SHUTDOWN,this.shutdown,this)},create:function(x){Array.isArray(x)||(x=[x]);for(var T=[],E=0;E<x.length;E++){var M=x[E];M instanceof c||M instanceof v?T.push(M):Array.isArray(M.tweens)?T.push(g(this,M)):T.push(o(this,M))}return T.length===1?T[0]:T},add:function(x){var T=x,E=this.tweens;return T instanceof c||T instanceof v||(Array.isArray(T.tweens)?T=g(this,T):T=o(this,T)),E.push(T.reset()),T},addMultiple:function(x){for(var T,E=[],M=this.tweens,P=0;P<x.length;P++)T=x[P],T instanceof c||T instanceof v||(Array.isArray(T.tweens)?T=g(this,T):T=o(this,T)),M.push(T.reset()),E.push(T);return E},chain:function(x){var T=g(this,x);return this.tweens.push(T.init()),T},getChainedTweens:function(x){return x.getChainedTweens()},has:function(x){return this.tweens.indexOf(x)>-1},existing:function(x){return this.has(x)||this.tweens.push(x.reset()),this},addCounter:function(x){var T=l(this,x);return this.tweens.push(T.reset()),T},stagger:function(x,T){return a(x,T)},setLagSmooth:function(x,T){return x===void 0&&(x=1/1e-8),T===void 0&&(T=0),this.maxLag=x,this.lagSkip=Math.min(T,this.maxLag),this},setFps:function(x){return x===void 0&&(x=240),this.gap=1e3/x,this.nextTime=this.time*1e3+this.gap,this},getDelta:function(x){var T=Date.now()-this.prevTime;T>this.maxLag&&(this.startTime+=T-this.lagSkip),this.prevTime+=T;var E=this.prevTime-this.startTime,M=E-this.nextTime,P=E-this.time*1e3;return M>0||x?(E/=1e3,this.time=E,this.nextTime+=M+(M>=this.gap?4:this.gap-M)):P=0,P},tick:function(){return this.step(!0),this},update:function(){this.paused||this.step(!1)},step:function(x){x===void 0&&(x=!1);var T=this.getDelta(x);if(!(T<=0)){this.processing=!0;var E,M,P=[],w=this.tweens;for(E=0;E<w.length;E++)M=w[E],M.update(T)&&P.push(M);var R=P.length;if(R&&w.length>0){for(E=0;E<R;E++){M=P[E];var A=w.indexOf(M);A>-1&&(M.isPendingRemove()||M.isDestroyed())&&(w.splice(A,1),M.destroy())}P.length=0}this.processing=!1}},remove:function(x){return this.processing?x.setPendingRemoveState():(u(this.tweens,x),x.setRemovedState()),this},reset:function(x){return this.existing(x),x.seek(),x.setActiveState(),this},makeActive:function(x){return this.existing(x),x.setActiveState(),this},each:function(x,T){var E,M=[null];for(E=1;E<arguments.length;E++)M.push(arguments[E]);return this.tweens.forEach(function(P){M[0]=P,x.apply(T,M)}),this},getTweens:function(){return this.tweens.slice()},getTweensOf:function(x){var T=[],E=this.tweens;Array.isArray(x)?x=d(x):x=[x];for(var M=x.length,P=0;P<E.length;P++)for(var w=E[P],R=0;R<M;R++)!w.isDestroyed()&&w.hasTarget(x[R])&&T.push(w);return T},getGlobalTimeScale:function(){return this.timeScale},setGlobalTimeScale:function(x){return this.timeScale=x,this},isTweening:function(x){for(var T=this.tweens,E,M=0;M<T.length;M++)if(E=T[M],E.isPlaying()&&E.hasTarget(x))return!0;return!1},killAll:function(){for(var x=this.processing?this.getTweens():this.tweens,T=0;T<x.length;T++)x[T].destroy();return this.processing||(x.length=0),this},killTweensOf:function(x){for(var T=this.getTweensOf(x),E=0;E<T.length;E++)T[E].destroy();return this},pauseAll:function(){return this.paused=!0,this},resumeAll:function(){return this.paused=!1,this},shutdown:function(){this.killAll(),this.tweens=[],this.events.off(n.UPDATE,this.update,this),this.events.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(n.START,this.start,this),this.scene=null,this.events=null}});h.register("TweenManager",p,"tweens"),r.exports=p}),63130:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){return e&&e.hasOwnProperty(u)?e[u]:m};r.exports=y}),21902:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(35060),m=e(40587),d=function(l,h){var n=u.Power0;if(typeof l=="string")if(u.hasOwnProperty(l))n=u[l];else{var a="";if(l.indexOf(".")){a=l.substring(l.indexOf(".")+1);var c=a.toLowerCase();c==="in"?a="easeIn":c==="out"?a="easeOut":c==="inout"&&(a="easeInOut")}l=m(l.substring(0,l.indexOf(".")+1)+a),u.hasOwnProperty(l)&&(n=u[l])}else typeof l=="function"&&(n=l);if(!h)return n;var o=h.slice(0);return o.unshift(0),function(v){return o[0]=v,n.apply(this,o)}};r.exports=d}),4840:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(63210),m=e(88332),d=e(47614),l={bezier:u,catmull:m,catmullrom:m,linear:d},h=function(n){if(n===null)return null;var a=l.linear;return typeof n=="string"?l.hasOwnProperty(n)&&(a=l[n]):typeof n=="function"&&(a=n),a};r.exports=h}),28348:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){var d;if(e.hasOwnProperty(u)){var l=typeof e[u];l==="function"?d=function(h,n,a,c,o,v){return e[u](h,n,a,c,o,v)}:d=function(){return e[u]}}else typeof m=="function"?d=m:d=function(){return m};return d};r.exports=y}),92407:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(53709),m=function(d){var l,h=[];if(d.hasOwnProperty("props"))for(l in d.props)l.substring(0,1)!=="_"&&h.push({key:l,value:d.props[l]});else for(l in d)u.indexOf(l)===-1&&l.substring(0,1)!=="_"&&h.push({key:l,value:d[l]});return h};r.exports=m}),65868:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(10850),m=function(d){var l=u(d,"targets",null);return l===null||(typeof l=="function"&&(l=l.call()),Array.isArray(l)||(l=[l])),l};r.exports=m}),9744:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(17489),m=e(61616);function d(c){return!!c.getActive&&typeof c.getActive=="function"}function l(c){return!!c.getStart&&typeof c.getStart=="function"}function h(c){return!!c.getEnd&&typeof c.getEnd=="function"}function n(c){return l(c)||h(c)||d(c)}var a=function(c,o){var v,g=function(X,H,N){return N},p=function(X,H,N){return N},x=null,T=typeof o;if(T==="number")g=function(){return o};else if(Array.isArray(o))p=function(){return o[0]},g=function(){return o[o.length-1]};else if(T==="string"){var E=o.toLowerCase(),M=E.substring(0,6)==="random",P=E.substring(0,3)==="int";if(M||P){var w=E.indexOf("("),R=E.indexOf(")"),A=E.indexOf(",");if(w&&R&&A){var O=parseFloat(E.substring(w+1,A)),F=parseFloat(E.substring(A+1,R));M?g=function(){return m(O,F)}:g=function(){return u(O,F)}}else throw new Error("invalid random() format")}else{E=E[0];var b=parseFloat(o.substr(2));switch(E){case"+":g=function(X,H,N){return N+b};break;case"-":g=function(X,H,N){return N-b};break;case"*":g=function(X,H,N){return N*b};break;case"/":g=function(X,H,N){return N/b};break;default:g=function(){return parseFloat(o)}}}}else if(T==="function")g=o;else if(T==="object")if(n(o))d(o)&&(x=o.getActive),h(o)&&(g=o.getEnd),l(o)&&(p=o.getStart);else if(o.hasOwnProperty("value"))v=a(c,o.value);else{var D=o.hasOwnProperty("to"),I=o.hasOwnProperty("from"),B=o.hasOwnProperty("start");if(D&&(I||B)){if(v=a(c,o.to),B){var z=a(c,o.start);v.getActive=z.getEnd}if(I){var Y=a(c,o.from);v.getStart=Y.getEnd}}}return v||(v={getActive:x,getEnd:g,getStart:p}),v};r.exports=a}),68710:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(502),m=e(99730),d=e(20494),l=e(63130),h=e(21902),n=e(28348),a=e(10850),c=e(9744),o=e(72066),v=e(39366),g=function(p,x,T){if(x instanceof v)return x.parent=p,x;T===void 0?T=m:T=o(m,T);var E=a(x,"from",0),M=a(x,"to",1),P=[{value:E}],w=a(x,"delay",T.delay),R=a(x,"easeParams",T.easeParams),A=a(x,"ease",T.ease),O=c("value",M),F=new v(p,P),b=F.add(0,"value",O.getEnd,O.getStart,O.getActive,h(a(x,"ease",A),a(x,"easeParams",R)),n(x,"delay",w),a(x,"duration",T.duration),l(x,"yoyo",T.yoyo),a(x,"hold",T.hold),a(x,"repeat",T.repeat),a(x,"repeatDelay",T.repeatDelay),!1,!1);b.start=E,b.current=E,F.completeDelay=d(x,"completeDelay",0),F.loop=Math.round(d(x,"loop",0)),F.loopDelay=Math.round(d(x,"loopDelay",0)),F.paused=l(x,"paused",!1),F.persist=l(x,"persist",!1),F.callbackScope=a(x,"callbackScope",F);for(var D=u.TYPES,I=0;I<D.length;I++){var B=D[I],z=a(x,B,!1);if(z){var Y=a(x,B+"Params",[]);F.setCallback(B,z,Y)}}return F};r.exports=g}),91944:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(21902),m=e(10850),d=e(83392),l=function(h,n){n===void 0&&(n={});var a,c=m(n,"start",0),o=m(n,"ease",null),v=m(n,"grid",null),g=m(n,"from",0),p=g==="first",x=g==="center",T=g==="last",E=typeof g=="number",M=Array.isArray(h),P=parseFloat(M?h[0]:h),w=M?parseFloat(h[1]):0,R=Math.max(P,w);if(M&&(c+=P),v){var A=v[0],O=v[1],F=0,b=0,D=0,I=0,B=[];T?(F=A-1,b=O-1):E?(F=g%A,b=Math.floor(g/A)):x&&(F=(A-1)/2,b=(O-1)/2);for(var z=d.MIN_SAFE_INTEGER,Y=0;Y<O;Y++){B[Y]=[];for(var X=0;X<A;X++){D=F-X,I=b-Y;var H=Math.sqrt(D*D+I*I);H>z&&(z=H),B[Y][X]=H}}}var N=o?u(o):null;return v?a=function(U,L,G,V){var k=0,W=V%A,$=Math.floor(V/A);W>=0&&W<A&&$>=0&&$<O&&(k=B[$][W]);var K;if(M){var j=w-P;N?K=k/z*j*N(k/z):K=k/z*j}else N?K=k*P*N(k/z):K=k*P;return K+c}:a=function(U,L,G,V,k){k--;var W;p?W=V:x?W=Math.abs(k/2-V):T?W=k-V:E&&(W=Math.abs(g-V));var $;if(M){var K;x?K=(w-P)/k*(W*2):K=(w-P)/k*W,N?$=K*N(W/k):$=K}else N?$=k*R*N(W/k):$=W*P;return $+c},a};r.exports=l}),68061:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(502),m=e(99730),d=e(20494),l=e(63130),h=e(21902),n=e(4840),a=e(28348),c=e(92407),o=e(65868),v=e(10850),g=e(9744),p=e(72066),x=e(39366),T=function(E,M,P){if(M instanceof x)return M.parent=E,M;P===void 0?P=m:P=p(m,P);var w=o(M);!w&&P.targets&&(w=P.targets);for(var R=c(M),A=v(M,"delay",P.delay),O=v(M,"duration",P.duration),F=v(M,"easeParams",P.easeParams),b=v(M,"ease",P.ease),D=v(M,"hold",P.hold),I=v(M,"repeat",P.repeat),B=v(M,"repeatDelay",P.repeatDelay),z=l(M,"yoyo",P.yoyo),Y=l(M,"flipX",P.flipX),X=l(M,"flipY",P.flipY),H=v(M,"interpolation",P.interpolation),N=function(J,Q,_,q){if(_==="texture"){var et=q,rt=void 0;Array.isArray(q)?(et=q[0],rt=q[1]):q.hasOwnProperty("value")?(et=q.value,Array.isArray(q.value)?(et=q.value[0],rt=q.value[1]):typeof q.value=="string"&&(et=q.value)):typeof q=="string"&&(et=q),J.addFrame(Q,et,rt,a(q,"delay",A),v(q,"duration",O),v(q,"hold",D),v(q,"repeat",I),v(q,"repeatDelay",B),l(q,"flipX",Y),l(q,"flipY",X))}else{var ot=g(_,q),ht=n(v(q,"interpolation",H));J.add(Q,_,ot.getEnd,ot.getStart,ot.getActive,h(v(q,"ease",b),v(q,"easeParams",F)),a(q,"delay",A),v(q,"duration",O),l(q,"yoyo",z),v(q,"hold",D),v(q,"repeat",I),v(q,"repeatDelay",B),l(q,"flipX",Y),l(q,"flipY",X),ht,ht?q:null)}},U=new x(E,w),L=0;L<R.length;L++)for(var G=R[L].key,V=R[L].value,k=0;k<w.length;k++)G==="scale"&&!w[k].hasOwnProperty("scale")?(N(U,k,"scaleX",V),N(U,k,"scaleY",V)):N(U,k,G,V);U.completeDelay=d(M,"completeDelay",0),U.loop=Math.round(d(M,"loop",0)),U.loopDelay=Math.round(d(M,"loopDelay",0)),U.paused=l(M,"paused",!1),U.persist=l(M,"persist",!1),U.callbackScope=v(M,"callbackScope",U);for(var W=u.TYPES,$=0;$<W.length;$++){var K=W[$],j=v(M,K,!1);if(j){var Z=v(M,K+"Params",[]);U.setCallback(K,j,Z)}}return U};r.exports=T}),56034:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(502),m=e(20494),d=e(63130),l=e(65868),h=e(10850),n=e(68061),a=e(45641),c=function(o,v){if(v instanceof a)return v.parent=o,v;var g=new a(o);g.startDelay=h(v,"delay",0),g.completeDelay=m(v,"completeDelay",0),g.loop=Math.round(m(v,"loop",h(v,"repeat",0))),g.loopDelay=Math.round(m(v,"loopDelay",h(v,"repeatDelay",0))),g.paused=d(v,"paused",!1),g.persist=d(v,"persist",!0),g.callbackScope=h(v,"callbackScope",g);var p,x=u.TYPES;for(p=0;p<x.length;p++){var T=x[p],E=h(v,T,!1);if(E){var M=h(v,T+"Params",[]);g.setCallback(T,E,M)}}var P=h(v,"tweens",null);if(Array.isArray(P)){var w=[],R=l(v),A=void 0;for(R&&(A={targets:R}),p=0;p<P.length;p++)w.push(n(g,P[p],A));g.add(w)}return g};r.exports=c}),79619:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={GetBoolean:e(63130),GetEaseFunction:e(21902),GetInterpolationFunction:e(4840),GetNewValue:e(28348),GetProps:e(92407),GetTargets:e(65868),GetValueOp:e(9744),NumberTweenBuilder:e(68710),StaggerBuilder:e(91944),TweenBuilder:e(68061)}}),5570:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="active"}),6383:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="complete"}),72582:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="loop"}),90281:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pause"}),80803:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="repeat"}),13640:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="resume"}),10472:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="start"}),5379:(r=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="stop"}),43449:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="update"}),61541:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="yoyo"}),54272:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={TWEEN_ACTIVE:e(5570),TWEEN_COMPLETE:e(6383),TWEEN_LOOP:e(72582),TWEEN_PAUSE:e(90281),TWEEN_RESUME:e(13640),TWEEN_REPEAT:e(80803),TWEEN_START:e(10472),TWEEN_STOP:e(5379),TWEEN_UPDATE:e(43449),TWEEN_YOYO:e(61541)}}),75193:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u={States:e(55303),Builders:e(79619),Events:e(54272),TweenManager:e(64532),Tween:e(39366),TweenData:e(15718),TweenFrameData:e(96490),BaseTween:e(502),TweenChain:e(45641)};r.exports=u}),502:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(6659),d=e(54272),l=e(55303),h=new u({Extends:m,initialize:function(a){m.call(this),this.parent=a,this.data=[],this.totalData=0,this.startDelay=0,this.hasStarted=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=l.PENDING,this.paused=!1,this.callbacks={onActive:null,onComplete:null,onLoop:null,onPause:null,onRepeat:null,onResume:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope,this.persist=!1},setTimeScale:function(n){return this.timeScale=n,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return!this.paused&&this.isActive()},isPaused:function(){return this.paused},pause:function(){return this.paused||(this.paused=!0,this.dispatchEvent(d.TWEEN_PAUSE,"onPause")),this},resume:function(){return this.paused&&(this.paused=!1,this.dispatchEvent(d.TWEEN_RESUME,"onResume")),this},makeActive:function(){this.parent.makeActive(this),this.dispatchEvent(d.TWEEN_ACTIVE,"onActive")},onCompleteHandler:function(){this.setPendingRemoveState(),this.dispatchEvent(d.TWEEN_COMPLETE,"onComplete")},complete:function(n){return n===void 0&&(n=0),n?(this.setCompleteDelayState(),this.countdown=n):this.onCompleteHandler(),this},completeAfterLoop:function(n){return n===void 0&&(n=0),this.loopCounter>n&&(this.loopCounter=n),this},remove:function(){return this.parent.remove(this),this},stop:function(){return!this.isRemoved()&&!this.isPendingRemove()&&!this.isDestroyed()&&(this.dispatchEvent(d.TWEEN_STOP,"onStop"),this.setPendingRemoveState()),this},updateLoopCountdown:function(n){this.countdown-=n,this.countdown<=0&&(this.setActiveState(),this.dispatchEvent(d.TWEEN_LOOP,"onLoop"))},updateStartCountdown:function(n){return this.countdown-=n,this.countdown<=0&&(this.hasStarted=!0,this.setActiveState(),this.dispatchEvent(d.TWEEN_START,"onStart"),n=0),n},updateCompleteDelay:function(n){this.countdown-=n,this.countdown<=0&&this.onCompleteHandler()},setCallback:function(n,a,c){return c===void 0&&(c=[]),this.callbacks.hasOwnProperty(n)&&(this.callbacks[n]={func:a,params:c}),this},setPendingState:function(){this.state=l.PENDING},setActiveState:function(){this.state=l.ACTIVE},setLoopDelayState:function(){this.state=l.LOOP_DELAY},setCompleteDelayState:function(){this.state=l.COMPLETE_DELAY},setStartDelayState:function(){this.state=l.START_DELAY,this.countdown=this.startDelay,this.hasStarted=!1},setPendingRemoveState:function(){this.state=l.PENDING_REMOVE},setRemovedState:function(){this.state=l.REMOVED},setFinishedState:function(){this.state=l.FINISHED},setDestroyedState:function(){this.state=l.DESTROYED},isPending:function(){return this.state===l.PENDING},isActive:function(){return this.state===l.ACTIVE},isLoopDelayed:function(){return this.state===l.LOOP_DELAY},isCompleteDelayed:function(){return this.state===l.COMPLETE_DELAY},isStartDelayed:function(){return this.state===l.START_DELAY},isPendingRemove:function(){return this.state===l.PENDING_REMOVE},isRemoved:function(){return this.state===l.REMOVED},isFinished:function(){return this.state===l.FINISHED},isDestroyed:function(){return this.state===l.DESTROYED},destroy:function(){this.data&&this.data.forEach(function(n){n.destroy()}),this.removeAllListeners(),this.callbacks=null,this.data=null,this.parent=null,this.setDestroyedState()}});h.TYPES=["onActive","onComplete","onLoop","onPause","onRepeat","onResume","onStart","onStop","onUpdate","onYoyo"],r.exports=h}),65521:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(56694),m=e(54272),d=e(55303),l=new u({initialize:function(n,a,c,o,v,g,p,x,T,E){this.tween=n,this.targetIndex=a,this.duration=o,this.totalDuration=0,this.delay=0,this.getDelay=c,this.yoyo=v,this.hold=g,this.repeat=p,this.repeatDelay=x,this.repeatCounter=0,this.flipX=T,this.flipY=E,this.progress=0,this.elapsed=0,this.state=0,this.isCountdown=!1},getTarget:function(){return this.tween.targets[this.targetIndex]},setTargetValue:function(h){h===void 0&&(h=this.current),this.tween.targets[this.targetIndex][this.key]=h},setCreatedState:function(){this.state=d.CREATED,this.isCountdown=!1},setDelayState:function(){this.state=d.DELAY,this.isCountdown=!0},setPendingRenderState:function(){this.state=d.PENDING_RENDER,this.isCountdown=!1},setPlayingForwardState:function(){this.state=d.PLAYING_FORWARD,this.isCountdown=!1},setPlayingBackwardState:function(){this.state=d.PLAYING_BACKWARD,this.isCountdown=!1},setHoldState:function(){this.state=d.HOLD_DELAY,this.isCountdown=!0},setRepeatState:function(){this.state=d.REPEAT_DELAY,this.isCountdown=!0},setCompleteState:function(){this.state=d.COMPLETE,this.isCountdown=!1},isCreated:function(){return this.state===d.CREATED},isDelayed:function(){return this.state===d.DELAY},isPendingRender:function(){return this.state===d.PENDING_RENDER},isPlayingForward:function(){return this.state===d.PLAYING_FORWARD},isPlayingBackward:function(){return this.state===d.PLAYING_BACKWARD},isHolding:function(){return this.state===d.HOLD_DELAY},isRepeating:function(){return this.state===d.REPEAT_DELAY},isComplete:function(){return this.state===d.COMPLETE},setStateFromEnd:function(h){this.yoyo?this.onRepeat(h,!0,!0):this.repeatCounter>0?this.onRepeat(h,!0,!1):this.setCompleteState()},setStateFromStart:function(h){this.repeatCounter>0?this.onRepeat(h,!1):this.setCompleteState()},reset:function(){var h=this.tween,n=h.totalTargets,a=this.targetIndex,c=h.targets[a],o=this.key;this.progress=0,this.elapsed=0,this.delay=this.getDelay(c,o,0,a,n,h),this.repeatCounter=this.repeat===-1?d.MAX:this.repeat,this.setPendingRenderState();var v=this.duration+this.hold;this.yoyo&&(v+=this.duration);var g=v+this.repeatDelay;this.totalDuration=this.delay+v,this.repeat===-1?(this.totalDuration+=g*d.MAX,h.isInfinite=!0):this.repeat>0&&(this.totalDuration+=g*this.repeat),this.totalDuration>h.duration&&(h.duration=this.totalDuration),this.delay<h.startDelay&&(h.startDelay=this.delay),this.delay>0&&(this.elapsed=this.delay,this.setDelayState())},onRepeat:function(h,n,a){var c=this.tween,o=c.totalTargets,v=this.targetIndex,g=c.targets[v],p=this.key,x=p!=="texture";if(this.elapsed=h,this.progress=h/this.duration,this.flipX&&g.toggleFlipX(),this.flipY&&g.toggleFlipY(),x&&(n||a)&&(this.start=this.getStartValue(g,p,this.start,v,o,c)),a){this.setPlayingBackwardState(),this.dispatchEvent(m.TWEEN_YOYO,"onYoyo");return}this.repeatCounter--,x&&(this.end=this.getEndValue(g,p,this.start,v,o,c)),this.repeatDelay>0?(this.elapsed=this.repeatDelay-h,x&&(this.current=this.start,g[p]=this.current),this.setRepeatState()):(this.setPlayingForwardState(),this.dispatchEvent(m.TWEEN_REPEAT,"onRepeat"))},destroy:function(){this.tween=null,this.getDelay=null,this.setCompleteState()}});r.exports=l}),99730:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1,persist:!1,interpolation:null};r.exports=y}),53709:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","interpolation","loop","loopDelay","onActive","onActiveParams","onComplete","onCompleteParams","onLoop","onLoopParams","onPause","onPauseParams","onRepeat","onRepeatParams","onResume","onResumeParams","onStart","onStartParams","onStop","onStopParams","onUpdate","onUpdateParams","onYoyo","onYoyoParams","paused","persist","props","repeat","repeatDelay","targets","yoyo"]}),39366:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(502),m=e(56694),d=e(54272),l=e(99325),h=e(61286),n=e(83392),a=e(55303),c=e(15718),o=e(96490),v=new m({Extends:u,initialize:function(p,x){u.call(this,p),this.targets=x,this.totalTargets=x.length,this.isSeeking=!1,this.isInfinite=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0},add:function(g,p,x,T,E,M,P,w,R,A,O,F,b,D,I,B){var z=new c(this,g,p,x,T,E,M,P,w,R,A,O,F,b,D,I,B);return this.totalData=this.data.push(z),z},addFrame:function(g,p,x,T,E,M,P,w,R,A){var O=new o(this,g,p,x,T,E,M,P,w,R,A);return this.totalData=this.data.push(O),O},getValue:function(g){g===void 0&&(g=0);var p=null;return this.data&&(p=this.data[g].current),p},hasTarget:function(g){return this.targets&&this.targets.indexOf(g)!==-1},updateTo:function(g,p,x){if(x===void 0&&(x=!1),g!=="texture")for(var T=0;T<this.totalData;T++){var E=this.data[T];E.key===g&&(E.isPlayingForward()||E.isPlayingBackward())&&(E.end=p,x&&(E.start=E.current))}return this},restart:function(){switch(this.state){case a.REMOVED:case a.FINISHED:this.seek(),this.parent.makeActive(this);break;case a.PENDING:case a.PENDING_REMOVE:this.parent.reset(this);break;case a.DESTROYED:console.warn("Cannot restart destroyed Tween",this);break;default:this.seek();break}return this.paused=!1,this.hasStarted=!1,this},nextState:function(){if(this.loopCounter>0)this.elapsed=0,this.progress=0,this.loopCounter--,this.initTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(d.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},onCompleteHandler:function(){this.progress=1,this.totalProgress=1,u.prototype.onCompleteHandler.call(this)},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed Tween",this),this):((this.isPendingRemove()||this.isFinished())&&this.seek(),this.paused=!1,this.setActiveState(),this)},seek:function(g,p,x){if(g===void 0&&(g=0),p===void 0&&(p=16.6),x===void 0&&(x=!1),this.isDestroyed())return console.warn("Cannot seek destroyed Tween",this),this;x||(this.isSeeking=!0),this.reset(!0),this.initTweenData(!0),this.setActiveState(),this.dispatchEvent(d.TWEEN_ACTIVE,"onActive");var T=this.paused;if(this.paused=!1,g>0){for(var E=Math.floor(g/p),M=g-E*p,P=0;P<E;P++)this.update(p);M>0&&this.update(M)}return this.paused=T,this.isSeeking=!1,this},initTweenData:function(g){g===void 0&&(g=!1),this.duration=0,this.startDelay=n.MAX_SAFE_INTEGER;for(var p=this.data,x=0;x<this.totalData;x++)p[x].reset(g);this.duration=Math.max(this.duration,.01);var T=this.duration,E=this.completeDelay,M=this.loopCounter,P=this.loopDelay;M>0?this.totalDuration=T+E+(T+P)*M:this.totalDuration=T+E},reset:function(g){return g===void 0&&(g=!1),this.elapsed=0,this.totalElapsed=0,this.progress=0,this.totalProgress=0,this.loopCounter=this.loop,this.loop===-1&&(this.isInfinite=!0,this.loopCounter=a.MAX),g||(this.initTweenData(),this.setActiveState(),this.dispatchEvent(d.TWEEN_ACTIVE,"onActive")),this},update:function(g){if(this.isPendingRemove()||this.isDestroyed())return!0;if(this.paused||this.isFinished())return!1;if(g*=this.timeScale*this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(g),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(g),!1;this.hasStarted||(this.startDelay-=g,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(d.TWEEN_START,"onStart"),g=0));var p=!1;if(this.isActive())for(var x=this.data,T=0;T<this.totalData;T++)x[T].update(g)&&(p=!0);this.elapsed+=g,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=g,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),p||this.nextState();var E=this.isPendingRemove();return E&&this.persist&&(this.setFinishedState(),E=!1),E},forward:function(g){return this.update(g),this},rewind:function(g){return this.update(-g),this},dispatchEvent:function(g,p){if(!this.isSeeking){this.emit(g,this,this.targets);var x=this.callbacks[p];x&&x.func.apply(this.callbackScope,[this,this.targets].concat(x.params))}},destroy:function(){u.prototype.destroy.call(this),this.targets=null}});h.register("tween",function(g){return this.scene.sys.tweens.add(g)}),l.register("tween",function(g){return this.scene.sys.tweens.create(g)}),r.exports=v}),45641:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(66458),m=e(502),d=e(56694),l=e(54272),h=e(99325),n=e(61286),a=e(55303),c=new d({Extends:m,initialize:function(v){m.call(this,v),this.currentTween=null,this.currentIndex=0},init:function(){return this.loopCounter=this.loop===-1?a.MAX:this.loop,this.setCurrentTween(0),this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this.dispatchEvent(l.TWEEN_ACTIVE,"onActive"),this},add:function(o){var v=this.parent.create(o);Array.isArray(v)||(v=[v]);for(var g=this.data,p=0;p<v.length;p++){var x=v[p];x.parent=this,g.push(x.reset())}return this.totalData=g.length,this},remove:function(o){return u(this.data,o),o.setRemovedState(),o===this.currentTween&&this.nextTween(),this.totalData=this.data.length,this},hasTarget:function(o){for(var v=this.data,g=0;g<this.totalData;g++)if(v[g].hasTarget(o))return!0;return!1},restart:function(){return this.isDestroyed()?(console.warn("Cannot restart destroyed TweenChain",this),this):(this.isRemoved()&&this.parent.makeActive(this),this.resetTweens(),this.paused=!1,this.init())},reset:function(o){return o.seek(),o.setActiveState(),this},makeActive:function(o){return o.reset(),o.setActiveState(),this},nextState:function(){if(this.loopCounter>0)this.loopCounter--,this.resetTweens(),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(l.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed TweenChain",this),this):((this.isPendingRemove()||this.isPending())&&this.resetTweens(),this.paused=!1,this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this)},resetTweens:function(){for(var o=this.data,v=this.totalData,g=0;g<v;g++)o[g].reset(!1);this.currentIndex=0,this.currentTween=o[0]},update:function(o){if(this.isPendingRemove()||this.isDestroyed())return!0;if(this.isFinished()||this.paused)return!1;o*=this.parent.timeScale,this.isLoopDelayed()?this.updateLoopCountdown(o):this.isCompleteDelayed()?this.updateCompleteDelay(o):this.isStartDelayed()&&(o=this.updateStartCountdown(o));var v=!1;return this.isActive()&&this.currentTween&&(this.currentTween.update(o)&&this.nextTween()&&this.nextState(),v=this.isPendingRemove(),v&&this.persist&&(this.setFinishedState(),v=!1)),v},nextTween:function(){return this.currentIndex++,this.currentIndex===this.totalData?!0:(this.setCurrentTween(this.currentIndex),!1)},setCurrentTween:function(o){this.currentIndex=o,this.currentTween=this.data[o],this.currentTween.setActiveState(),this.currentTween.dispatchEvent(l.TWEEN_ACTIVE,"onActive")},dispatchEvent:function(o,v){this.emit(o,this);var g=this.callbacks[v];g&&g.func.apply(this.callbackScope,[this].concat(g.params))},destroy:function(){m.prototype.destroy.call(this),this.currentTween=null}});n.register("tweenchain",function(o){return this.scene.sys.tweens.chain(o)}),h.register("tweenchain",function(o){return this.scene.sys.tweens.create(o)}),r.exports=c}),15718:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(65521),m=e(82897),d=e(56694),l=e(54272),h=new d({Extends:u,initialize:function(a,c,o,v,g,p,x,T,E,M,P,w,R,A,O,F,b){u.call(this,a,c,T,E,M,P,w,R,A,O),this.key=o,this.getActiveValue=p,this.getEndValue=v,this.getStartValue=g,this.ease=x,this.start=0,this.previous=0,this.current=0,this.end=0,this.interpolation=F,this.interpolationData=b},reset:function(n){u.prototype.reset.call(this);var a=this.tween.targets[this.targetIndex],c=this.key;n&&(a[c]=this.start),this.start=0,this.previous=0,this.current=0,this.end=0,this.getActiveValue&&(a[c]=this.getActiveValue(a,c,0))},update:function(n){var a=this.tween,c=a.totalTargets,o=this.targetIndex,v=a.targets[o],g=this.key;if(!v)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=n,this.elapsed<=0&&(this.elapsed=0,n=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(l.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.start=this.getStartValue(v,g,v[g],o,c,a),this.end=this.getEndValue(v,g,this.start,o,c,a),this.current=this.start,v[g]=this.start,this.setPlayingForwardState(),!0;var p=this.isPlayingForward(),x=this.isPlayingBackward();if(p||x){var T=this.elapsed,E=this.duration,M=0,P=!1;T+=n,T>=E?(M=T-E,T=E,P=!0):T<0&&(T=0);var w=m(T/E,0,1);if(this.elapsed=T,this.progress=w,this.previous=this.current,P)p?(this.current=this.end,v[g]=this.end,this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(M)):(this.current=this.start,v[g]=this.start,this.setStateFromStart(M));else{p||(w=1-w);var R=this.ease(w);this.interpolation?this.current=this.interpolation(this.interpolationData,R):this.current=this.start+(this.end-this.start)*R,v[g]=this.current}this.dispatchEvent(l.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(n,a){var c=this.tween;if(!c.isSeeking){var o=c.targets[this.targetIndex],v=this.key,g=this.current,p=this.previous;c.emit(n,c,v,o,g,p);var x=c.callbacks[a];x&&x.func.apply(c.callbackScope,[c,o,v,g,p].concat(x.params))}},destroy:function(){u.prototype.destroy.call(this),this.getActiveValue=null,this.getEndValue=null,this.getStartValue=null,this.ease=null}});r.exports=h}),96490:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(65521),m=e(82897),d=e(56694),l=e(54272),h=new d({Extends:u,initialize:function(a,c,o,v,g,p,x,T,E,M,P){u.call(this,a,c,g,p,!1,x,T,E,M,P),this.key="texture",this.startTexture=null,this.endTexture=o,this.startFrame=null,this.endFrame=v,this.yoyo=T!==0},reset:function(n){u.prototype.reset.call(this);var a=this.tween.targets[this.targetIndex];this.startTexture||(this.startTexture=a.texture.key,this.startFrame=a.frame.name),n&&a.setTexture(this.startTexture,this.startFrame)},update:function(n){var a=this.tween,c=this.targetIndex,o=a.targets[c];if(!o)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=n,this.elapsed<=0&&(this.elapsed=0,n=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(l.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.startTexture&&o.setTexture(this.startTexture,this.startFrame),this.setPlayingForwardState(),!0;var v=this.isPlayingForward(),g=this.isPlayingBackward();if(v||g){var p=this.elapsed,x=this.duration,T=0,E=!1;p+=n,p>=x?(T=p-x,p=x,E=!0):p<0&&(p=0);var M=m(p/x,0,1);this.elapsed=p,this.progress=M,E&&(v?(o.setTexture(this.endTexture,this.endFrame),this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(T)):(o.setTexture(this.startTexture,this.startFrame),this.setStateFromStart(T))),this.dispatchEvent(l.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(n,a){var c=this.tween;if(!c.isSeeking){var o=c.targets[this.targetIndex],v=this.key;c.emit(n,c,v,o);var g=c.callbacks[a];g&&g.func.apply(c.callbackScope,[c,o,v].concat(g.params))}},destroy:function(){u.prototype.destroy.call(this),this.startTexture=null,this.endTexture=null,this.startFrame=null,this.endFrame=null}});r.exports=h}),55303:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y={CREATED:0,DELAY:2,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING:20,ACTIVE:21,LOOP_DELAY:22,COMPLETE_DELAY:23,START_DELAY:24,PENDING_REMOVE:25,REMOVED:26,FINISHED:27,DESTROYED:28,MAX:999999999999};r.exports=y}),56694:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function y(h){return!!h.get&&typeof h.get=="function"||!!h.set&&typeof h.set=="function"}function e(h,n,a){var c=a?h[n]:Object.getOwnPropertyDescriptor(h,n);return!a&&c.value&&typeof c.value=="object"&&(c=c.value),c&&y(c)?(typeof c.enumerable>"u"&&(c.enumerable=!0),typeof c.configurable>"u"&&(c.configurable=!0),c):!1}function u(h,n){var a=Object.getOwnPropertyDescriptor(h,n);return a?(a.value&&typeof a.value=="object"&&(a=a.value),a.configurable===!1):!1}function m(h,n,a,c){for(var o in n)if(n.hasOwnProperty(o)){var v=e(n,o,a);if(v!==!1){var g=c||h;if(u(g.prototype,o)){if(l.ignoreFinals)continue;throw new Error("cannot override final property '"+o+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(h.prototype,o,v)}else h.prototype[o]=n[o]}}function d(h,n){if(n){Array.isArray(n)||(n=[n]);for(var a=0;a<n.length;a++)m(h,n[a].prototype||n[a])}}function l(h){h||(h={});var n,a;if(h.initialize){if(typeof h.initialize!="function")throw new Error("initialize must be a function");n=h.initialize,delete h.initialize}else if(h.Extends){var c=h.Extends;n=function(){c.apply(this,arguments)}}else n=function(){};h.Extends?(n.prototype=Object.create(h.Extends.prototype),n.prototype.constructor=n,a=h.Extends,delete h.Extends):n.prototype.constructor=n;var o=null;return h.Mixins&&(o=h.Mixins,delete h.Mixins),d(n,o),m(n,h,!0,a),n}l.extend=m,l.mixin=d,l.ignoreFinals=!1,r.exports=l}),72283:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(){};r.exports=y}),10618:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(){return null};r.exports=y}),78991:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d,l){if(l===void 0&&(l=e),m>0){var h=m-e.length;if(h<=0)return null}if(!Array.isArray(u))return e.indexOf(u)===-1?(e.push(u),d&&d.call(l,u),u):null;for(var n=u.length-1;n>=0;)e.indexOf(u[n])!==-1&&u.splice(n,1),n--;if(n=u.length,n===0)return null;m>0&&n>h&&(u.splice(h),n=h);for(var a=0;a<n;a++){var c=u[a];e.push(c),d&&d.call(l,c)}return u};r.exports=y}),48522:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d,l,h){if(m===void 0&&(m=0),h===void 0&&(h=e),d>0){var n=d-e.length;if(n<=0)return null}if(!Array.isArray(u))return e.indexOf(u)===-1?(e.splice(m,0,u),l&&l.call(h,u),u):null;for(var a=u.length-1;a>=0;)e.indexOf(u[a])!==-1&&u.pop(),a--;if(a=u.length,a===0)return null;d>0&&a>n&&(u.splice(n),a=n);for(var c=a-1;c>=0;c--){var o=u[c];e.splice(m,0,o),l&&l.call(h,o)}return u};r.exports=y}),58742:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){var m=e.indexOf(u);return m!==-1&&m<e.length&&(e.splice(m,1),e.push(u)),u};r.exports=y}),30164:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(45838),m=function(d,l,h,n,a){n===void 0&&(n=0),a===void 0&&(a=d.length);var c=0;if(u(d,n,a))for(var o=n;o<a;o++){var v=d[o];v[l]===h&&c++}return c};r.exports=m}),36337:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){var d,l=[null];for(d=3;d<arguments.length;d++)l.push(arguments[d]);for(d=0;d<e.length;d++)l[0]=e[d],u.apply(m,l);return e};r.exports=y}),46208:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(45838),m=function(d,l,h,n,a){if(n===void 0&&(n=0),a===void 0&&(a=d.length),u(d,n,a)){var c,o=[null];for(c=5;c<arguments.length;c++)o.push(arguments[c]);for(c=n;c<a;c++)o[0]=d[c],l.apply(h,o)}return d};r.exports=m}),2406:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){if(u.length){if(u.length===1)return u[0]}else return NaN;var d=1,l,h;if(m){if(e<u[0][m])return u[0];for(;u[d][m]<e;)d++}else for(;u[d]<e;)d++;return d>u.length&&(d=u.length),m?(l=u[d-1][m],h=u[d][m],h-e<=e-l?u[d]:u[d-1]):(l=u[d-1],h=u[d],h-e<=e-l?h:l)};r.exports=y}),5454:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){u===void 0&&(u=[]);for(var m=0;m<e.length;m++)Array.isArray(e[m])?y(e[m],u):u.push(e[m]);return u};r.exports=y}),71608:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(45838),m=function(d,l,h,n,a){n===void 0&&(n=0),a===void 0&&(a=d.length);var c=[];if(u(d,n,a))for(var o=n;o<a;o++){var v=d[o];(!l||l&&h===void 0&&v.hasOwnProperty(l)||l&&h!==void 0&&v[l]===h)&&c.push(v)}return c};r.exports=m}),51463:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(45838),m=function(d,l,h,n,a){if(n===void 0&&(n=0),a===void 0&&(a=d.length),u(d,n,a))for(var c=n;c<a;c++){var o=d[c];if(!l||l&&h===void 0&&o.hasOwnProperty(l)||l&&h!==void 0&&o[l]===h)return o}return null};r.exports=m}),72861:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){u===void 0&&(u=0),m===void 0&&(m=e.length);var d=u+Math.floor(Math.random()*m);return e[d]===void 0?null:e[d]};r.exports=y}),24218:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){if(u===m)return e;var d=e.indexOf(u),l=e.indexOf(m);if(d<0||l<0)throw new Error("Supplied items must be elements of the same array");return d>l||(e.splice(d,1),l===e.length-1?e.push(u):e.splice(l,0,u)),e};r.exports=y}),58258:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){if(u===m)return e;var d=e.indexOf(u),l=e.indexOf(m);if(d<0||l<0)throw new Error("Supplied items must be elements of the same array");return d<l||(e.splice(d,1),l===0?e.unshift(u):e.splice(l,0,u)),e};r.exports=y}),51172:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){var m=e.indexOf(u);if(m>0){var d=e[m-1],l=e.indexOf(d);e[m]=d,e[l]=u}return e};r.exports=y}),68396:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){var d=e.indexOf(u);if(d===-1||m<0||m>=e.length)throw new Error("Supplied index out of bounds");return d!==m&&(e.splice(d,1),e.splice(m,0,u)),u};r.exports=y}),27555:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){var m=e.indexOf(u);if(m!==-1&&m<e.length-1){var d=e[m+1],l=e.indexOf(d);e[m]=d,e[l]=u}return e};r.exports=y}),13401:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d){var l=[],h,n=!1;if((m||d)&&(n=!0,m||(m=""),d||(d="")),u<e)for(h=e;h>=u;h--)n?l.push(m+h.toString()+d):l.push(h);else for(h=e;h<=u;h++)n?l.push(m+h.toString()+d):l.push(h);return l};r.exports=y}),89955:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(67233),m=function(d,l,h){d===void 0&&(d=0),l===void 0&&(l=null),h===void 0&&(h=1),l===null&&(l=d,d=0);for(var n=[],a=Math.max(u((l-d)/(h||1)),0),c=0;c<a;c++)n.push(d),d+=h;return n};r.exports=m}),53466:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function y(m,d,l){var h=m[d];m[d]=m[l],m[l]=h}function e(m,d){return m<d?-1:m>d?1:0}var u=function(m,d,l,h,n){for(l===void 0&&(l=0),h===void 0&&(h=m.length-1),n===void 0&&(n=e);h>l;){if(h-l>600){var a=h-l+1,c=d-l+1,o=Math.log(a),v=.5*Math.exp(2*o/3),g=.5*Math.sqrt(o*v*(a-v)/a)*(c-a/2<0?-1:1),p=Math.max(l,Math.floor(d-c*v/a+g)),x=Math.min(h,Math.floor(d+(a-c)*v/a+g));u(m,d,p,x,n)}var T=m[d],E=l,M=h;for(y(m,l,d),n(m[h],T)>0&&y(m,l,h);E<M;){for(y(m,E,M),E++,M--;n(m[E],T)<0;)E++;for(;n(m[M],T)>0;)M--}n(m[l],T)===0?y(m,l,M):(M++,y(m,M,h)),M<=d&&(l=M+1),d<=M&&(h=M-1)}};r.exports=u}),75757:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(10850),m=e(18592),d=function(h,n,a){for(var c=[],o=0;o<h.length;o++)for(var v=0;v<n.length;v++)for(var g=0;g<a;g++)c.push({a:h[o],b:n[v]});return c},l=function(h,n,a){var c=u(a,"max",0),o=u(a,"qty",1),v=u(a,"random",!1),g=u(a,"randomB",!1),p=u(a,"repeat",0),x=u(a,"yoyo",!1),T=[];if(g&&m(n),p===-1)if(c===0)p=0;else{var E=h.length*n.length*o;x&&(E*=2),p=Math.ceil(c/E)}for(var M=0;M<=p;M++){var P=d(h,n,o);v&&m(P),T=T.concat(P),x&&(P.reverse(),T=T.concat(P))}return c&&T.splice(c),T};r.exports=l}),66458:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72677),m=function(d,l,h,n){n===void 0&&(n=d);var a;if(!Array.isArray(l))return a=d.indexOf(l),a!==-1?(u(d,a),h&&h.call(n,l),l):null;for(var c=l.length-1,o=[];c>=0;){var v=l[c];a=d.indexOf(v),a!==-1&&(u(d,a),o.push(v),h&&h.call(n,v)),c--}return o};r.exports=m}),8324:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72677),m=function(d,l,h,n){if(n===void 0&&(n=d),l<0||l>d.length-1)throw new Error("Index out of bounds");var a=u(d,l);return h&&h.call(n,a),a};r.exports=m}),47427:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(45838),m=function(d,l,h,n,a){if(l===void 0&&(l=0),h===void 0&&(h=d.length),a===void 0&&(a=d),u(d,l,h)){var c=h-l,o=d.splice(l,c);if(n)for(var v=0;v<o.length;v++){var g=o[v];n.call(a,g)}return o}else return[]};r.exports=m}),50147:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(72677),m=function(d,l,h){l===void 0&&(l=0),h===void 0&&(h=d.length);var n=l+Math.floor(Math.random()*h);return u(d,n)};r.exports=m}),80402:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){var d=e.indexOf(u),l=e.indexOf(m);return d!==-1&&l===-1?(e[d]=m,!0):!1};r.exports=y}),77640:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){u===void 0&&(u=1);for(var m=null,d=0;d<u;d++)m=e.shift(),e.push(m);return m};r.exports=y}),38487:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){u===void 0&&(u=1);for(var m=null,d=0;d<u;d++)m=e.pop(),e.unshift(m);return m};r.exports=y}),45838:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d){var l=e.length;if(u<0||u>l||u>=m||m>l){if(d)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};r.exports=y}),27847:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){var m=e.indexOf(u);return m!==-1&&m>0&&(e.splice(m,1),e.unshift(u)),u};r.exports=y}),6034:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(45838),m=function(d,l,h,n,a){if(n===void 0&&(n=0),a===void 0&&(a=d.length),u(d,n,a))for(var c=n;c<a;c++){var o=d[c];o.hasOwnProperty(l)&&(o[l]=h)}return d};r.exports=m}),18592:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){for(var u=e.length-1;u>0;u--){var m=Math.floor(Math.random()*(u+1)),d=e[u];e[u]=e[m],e[m]=d}return e};r.exports=y}),28834:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){var u=/\D/g;return e.sort(function(m,d){return parseInt(m.replace(u,""),10)-parseInt(d.replace(u,""),10)}),e};r.exports=y}),72677:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){if(!(u>=e.length)){for(var m=e.length-1,d=e[u],l=u;l<m;l++)e[l]=e[l+1];return e.length=m,d}};r.exports=y}),17922:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Angry Bytes (and contributors)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(77290);function m(n,a){return String(n).localeCompare(a)}function d(n,a){var c=n.length;if(c<=1)return n;for(var o=new Array(c),v=1;v<c;v*=2){l(n,a,v,o);var g=n;n=o,o=g}return n}function l(n,a,c,o){var v=n.length,g=0,p=c*2,x,T,E,M,P;for(x=0;x<v;x+=p)for(T=x+c,E=T+c,T>v&&(T=v),E>v&&(E=v),M=x,P=T;;)if(M<T&&P<E)a(n[M],n[P])<=0?o[g++]=n[M++]:o[g++]=n[P++];else if(M<T)o[g++]=n[M++];else if(P<E)o[g++]=n[P++];else break}var h=function(n,a){if(a===void 0&&(a=m),!n||n.length<2)return n;if(u.features.stableSort)return n.sort(a);var c=d(n,a);return c!==n&&l(c,null,n.length,n),n};r.exports=h}),96928:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){if(u===m)return e;var d=e.indexOf(u),l=e.indexOf(m);if(d<0||l<0)throw new Error("Supplied items must be elements of the same array");return e[d]=m,e[l]=u,e};r.exports=y}),59959:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Matrix:e(13515),Add:e(78991),AddAt:e(48522),BringToTop:e(58742),CountAllMatching:e(30164),Each:e(36337),EachInRange:e(46208),FindClosestInSorted:e(2406),Flatten:e(5454),GetAll:e(71608),GetFirst:e(51463),GetRandom:e(72861),MoveDown:e(51172),MoveTo:e(68396),MoveUp:e(27555),MoveAbove:e(24218),MoveBelow:e(58258),NumberArray:e(13401),NumberArrayStep:e(89955),QuickSelect:e(53466),Range:e(75757),Remove:e(66458),RemoveAt:e(8324),RemoveBetween:e(47427),RemoveRandomElement:e(50147),Replace:e(80402),RotateLeft:e(77640),RotateRight:e(38487),SafeRange:e(45838),SendToBack:e(27847),SetAll:e(6034),Shuffle:e(18592),SortByDigits:e(28834),SpliceOne:e(72677),StableSort:e(17922),Swap:e(96928)}}),97494:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))return!1;for(var u=e[0].length,m=1;m<e.length;m++)if(e[m].length!==u)return!1;return!0};r.exports=y}),68428:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(76400),m=e(97494),d=function(l){var h="";if(!m(l))return h;for(var n=0;n<l.length;n++){for(var a=0;a<l[n].length;a++){var c=l[n][a].toString();c!=="undefined"?h+=u(c,2):h+="?",a<l[n].length-1&&(h+=" |")}if(n<l.length-1){h+=`
`;for(var o=0;o<l[n].length;o++)h+="---",o<l[n].length-1&&(h+="+");h+=`
`}}return h};r.exports=d}),59521:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return e.reverse()};r.exports=y}),51995:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){for(var u=0;u<e.length;u++)e[u].reverse();return e};r.exports=y}),89011:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(63515),m=function(d){return u(d,180)};r.exports=m}),42549:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(63515),m=function(d){return u(d,90)};r.exports=m}),63515:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(97494),m=e(78581),d=function(l,h){if(h===void 0&&(h=90),!u(l))return null;if(typeof h!="string"&&(h=(h%360+360)%360),h===90||h===-270||h==="rotateLeft")l=m(l),l.reverse();else if(h===-90||h===270||h==="rotateRight")l.reverse(),l=m(l);else if(Math.abs(h)===180||h==="rotate180"){for(var n=0;n<l.length;n++)l[n].reverse();l.reverse()}return l};r.exports=d}),14305:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(63515),m=function(d){return u(d,-90)};r.exports=m}),27365:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(77640),m=e(38487),d=function(l,h,n){if(h===void 0&&(h=0),n===void 0&&(n=0),n!==0&&(n<0?u(l,Math.abs(n)):m(l,n)),h!==0)for(var a=0;a<l.length;a++){var c=l[a];h<0?u(c,Math.abs(h)):m(c,h)}return l};r.exports=d}),78581:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){for(var u=e.length,m=e[0].length,d=new Array(m),l=0;l<m;l++){d[l]=new Array(u);for(var h=u-1;h>-1;h--)d[l][h]=e[h][l]}return d};r.exports=y}),13515:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={CheckMatrix:e(97494),MatrixToString:e(68428),ReverseColumns:e(59521),ReverseRows:e(51995),Rotate180:e(89011),RotateLeft:e(42549),RotateMatrix:e(63515),RotateRight:e(14305),Translate:e(27365),TransposeMatrix:e(78581)}}),40581:(r=>{/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=function(u,m){for(var d=new Uint8Array(u),l=d.length,h=m?"data:"+m+";base64,":"",n=0;n<l;n+=3)h+=y[d[n]>>2],h+=y[(d[n]&3)<<4|d[n+1]>>4],h+=y[(d[n+1]&15)<<2|d[n+2]>>6],h+=y[d[n+2]&63];return l%3===2?h=h.substring(0,h.length-1)+"=":l%3===1&&(h=h.substring(0,h.length-2)+"=="),h};r.exports=e}),82329:(r=>{/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */for(var y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=new Uint8Array(256),u=0;u<y.length;u++)e[y.charCodeAt(u)]=u;var m=function(d){d=d.substr(d.indexOf(",")+1);var l=d.length,h=l*.75,n=0,a,c,o,v;d[l-1]==="="&&(h--,d[l-2]==="="&&h--);for(var g=new ArrayBuffer(h),p=new Uint8Array(g),x=0;x<l;x+=4)a=e[d.charCodeAt(x)],c=e[d.charCodeAt(x+1)],o=e[d.charCodeAt(x+2)],v=e[d.charCodeAt(x+3)],p[n++]=a<<2|c>>4,p[n++]=(c&15)<<4|o>>2,p[n++]=(o&3)<<6|v&63;return g};r.exports=m}),78417:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={ArrayBufferToBase64:e(40581),Base64ToArrayBuffer:e(82329)}}),22178:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Array:e(59959),Base64:e(78417),Objects:e(64615),String:e(50379),NOOP:e(72283),NULL:e(10618)}}),32742:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){var u={};for(var m in e)Array.isArray(e[m])?u[m]=e[m].slice(0):u[m]=e[m];return u};r.exports=y}),28699:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){var u,m,d;if(typeof e!="object"||e===null)return e;u=Array.isArray(e)?[]:{};for(d in e)m=e[d],u[d]=y(m);return u};r.exports=y}),98611:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(42911),m=function(){var d,l,h,n,a,c,o=arguments[0]||{},v=1,g=arguments.length,p=!1;for(typeof o=="boolean"&&(p=o,o=arguments[1]||{},v=2),g===v&&(o=this,--v);v<g;v++)if((d=arguments[v])!=null)for(l in d)h=o[l],n=d[l],o!==n&&(p&&n&&(u(n)||(a=Array.isArray(n)))?(a?(a=!1,c=h&&Array.isArray(h)?h:[]):c=h&&u(h)?h:{},o[l]=m(p,c,n)):n!==void 0&&(o[l]=n));return o};r.exports=m}),20494:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(5923),m=e(10850),d=function(l,h,n){var a=m(l,h,null);if(a===null)return n;if(Array.isArray(a))return u.RND.pick(a);if(typeof a=="object"){if(a.hasOwnProperty("randInt"))return u.RND.integerInRange(a.randInt[0],a.randInt[1]);if(a.hasOwnProperty("randFloat"))return u.RND.realInRange(a.randFloat[0],a.randFloat[1])}else if(typeof a=="function")return a(h);return a};r.exports=d}),72632:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){var d=typeof e;return!e||d==="number"||d==="string"?m:e.hasOwnProperty(u)&&e[u]!==void 0?e[u]:m};r.exports=y}),94324:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(10850),m=e(82897),d=function(l,h,n,a,c){c===void 0&&(c=n);var o=u(l,h,c);return m(o,n,a)};r.exports=d}),10850:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d){if(!e&&!d||typeof e=="number")return m;if(e&&e.hasOwnProperty(u))return e[u];if(d&&d.hasOwnProperty(u))return d[u];if(u.indexOf(".")!==-1){for(var l=u.split("."),h=e,n=d,a=m,c=m,o=!0,v=!0,g=0;g<l.length;g++)h&&h.hasOwnProperty(l[g])?(a=h[l[g]],h=h[l[g]]):o=!1,n&&n.hasOwnProperty(l[g])?(c=n[l[g]],n=n[l[g]]):v=!1;return o?a:v?c:m}else return m};r.exports=y}),87701:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){for(var m=0;m<u.length;m++)if(!e.hasOwnProperty(u[m]))return!1;return!0};r.exports=y}),53523:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){for(var m=0;m<u.length;m++)if(e.hasOwnProperty(u[m]))return!0;return!1};r.exports=y}),19256:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return e.hasOwnProperty(u)};r.exports=y}),42911:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){if(!e||typeof e!="object"||e.nodeType||e===e.window)return!1;try{if(e.constructor&&!{}.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0};r.exports=y}),30657:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(32742),m=function(d,l){var h=u(d);for(var n in l)h.hasOwnProperty(n)||(h[n]=l[n]);return h};r.exports=m}),72066:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(32742),m=function(d,l){var h=u(d);for(var n in l)h.hasOwnProperty(n)&&(h[n]=l[n]);return h};r.exports=m}),28820:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var u=e(19256),m=function(d,l){for(var h={},n=0;n<l.length;n++){var a=l[n];u(d,a)&&(h[a]=d[a])}return h};r.exports=m}),22440:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m){if(!e||typeof e=="number")return!1;if(e.hasOwnProperty(u))return e[u]=m,!0;if(u.indexOf(".")!==-1){for(var d=u.split("."),l=e,h=e,n=0;n<d.length;n++)if(l.hasOwnProperty(d[n]))h=l,l=l[d[n]];else return!1;return h[d[d.length-1]]=m,!0}return!1};r.exports=y}),64615:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Clone:e(32742),DeepCopy:e(28699),Extend:e(98611),GetAdvancedValue:e(20494),GetFastValue:e(72632),GetMinMaxValue:e(94324),GetValue:e(10850),HasAll:e(87701),HasAny:e(53523),HasValue:e(19256),IsPlainObject:e(42911),Merge:e(30657),MergeRight:e(72066),Pick:e(28820),SetValue:e(22440)}}),69429:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return e.replace(/%([0-9]+)/g,function(m,d){return u[Number(d)-1]})};r.exports=y}),76400:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u,m,d){u===void 0&&(u=0),m===void 0&&(m=" "),d===void 0&&(d=3),e=e.toString();var l=0;if(u+1>=e.length)switch(d){case 1:e=new Array(u+1-e.length).join(m)+e;break;case 3:var h=Math.ceil((l=u-e.length)/2),n=l-h;e=new Array(n+1).join(m)+e+new Array(h+1).join(m);break;default:e=e+new Array(u+1-e.length).join(m);break}return e};r.exports=y}),76872:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e,u){return u===0?e.slice(1):e.slice(0,u-1)+e.slice(u)};r.exports=y}),8051:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return e.split("").reverse().join("")};r.exports=y}),76583:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var u=Math.random()*16|0,m=e==="x"?u:u&3|8;return m.toString(16)})};r.exports=y}),40587:(r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var y=function(e){return e&&e[0].toUpperCase()+e.slice(1)};r.exports=y}),50379:((r,y,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Format:e(69429),Pad:e(76400),RemoveAt:e(76872),Reverse:e(8051),UppercaseFirst:e(40587),UUID:e(76583)}})},f={};function C(r){var y=f[r];if(y!==void 0)return y.exports;var e=f[r]={exports:{}};return s[r](e,e.exports,C),e.exports}C.g=(function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}})();var S=C(92491);return S})())})(Ia)),Ia.exports}var Ny=Gy();const lt=Iy(Ny);class st{constructor(t){this.scene=t,this.displayList=t.sys.displayList,this.updateList=t.sys.updateList,t.events.once("destroy",this.destroy,this)}destroy(){this.scene=null,this.displayList=null,this.updateList=null}static register(t,s){st.prototype[t]=s}}var Vy=function(i){return i===void 0&&(i=zy),this.getFrameNameCallback=i,this},zy=function(i,t,s){return s==="__BASE"?`${i},${t}`:`${s}_${i},${t}`};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var Uy=function(i){if(typeof i!="object"||i.nodeType||i===i.window)return!1;try{if(i.constructor&&!{}.hasOwnProperty.call(i.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0},fe=function(i){var t,s,f;if(i==null||typeof i!="object")return i;if(t=Array.isArray(i)?[]:{},Uy(i))for(f in i)s=i[f],t[f]=fe(s);else t=i;return t},Yy=function(i,t,s,f){Array.isArray(t)&&(f=s,s=t,t=void 0),t===void 0&&(t="__BASE"),s=fe(s),f=fe(f),this.textureKey=i,this.baseFrameName=t,this.columns.data=s,this.columns.count=s?s.length:0,this.columns.stretch=0,this.columns.minWidth=0,this.columns.scale=1,this.rows.data=f,this.rows.count=f?f.length:0,this.rows.stretch=0,this.rows.minHeight=0,this.rows.scale=1;var C=this.scene.sys.textures.get(i);if(!C)return this.clear(),this;if(!s||!f)return this.clear(),this;for(var S=C.get(t),r=S.width,y=0,e=0,u=s.length;e<u;e++)s[e]===void 0?y++:typeof s[e]=="number"?r-=s[e]:r-=s[e].width;for(var m=r/y,d=S.height,l=0,e=0,u=f.length;e<u;e++)f[e]===void 0?l++:typeof f[e]=="number"?d-=f[e]:d-=f[e].width;for(var h=d/l,n,a,c,o,v,g=0,p=0,x=0,T=f.length;x<T;x++){f[x]===void 0&&(f[x]=h),typeof f[x]=="number"&&(f[x]={height:f[x],stretch:x%2}),n=f[x],c=n.height,this.rows.stretch+=n.stretch|0,this.rows.minHeight+=n.stretch>0?0:c,g=0;for(var e=0,E=s.length;e<E;e++){if(s[e]===void 0&&(s[e]=m),typeof s[e]=="number"&&(s[e]={width:s[e],stretch:e%2}),a=s[e],o=a.width,x===0&&(this.columns.stretch+=a.stretch|0,this.columns.minWidth+=a.stretch>0?0:o),o>=1&&c>=1){v=this.getFrameNameCallback(e,x,t);var M=typeof v;(M==="string"||M==="number")&&C.add(v,0,g+S.cutX,p+S.cutY,o,c)}g+=o}p+=c}return this.updateTexture(),this},ky=function(){if(this.clear(),this.textureKey===void 0)return this;var i=this.scene.sys.textures.get(this.textureKey);if(!i)return this;var t=this.columns.minWidth*this.maxFixedPartScaleX,s=this.rows.minHeight*this.maxFixedPartScaleY,f=this.width-t,C=this.height-s,S=f>=0?this.maxFixedPartScaleX:this.width/t,r=C>=0?this.maxFixedPartScaleY:this.height/s;if(this.preserveRatio){var y=Math.min(S,r);if(S>y){var e=(S-y)*t;f>=0?f+=e:f=e,S=y}if(r>y){var u=(r-y)*s;C>=0?C+=u:C=u,r=y}}this.columns.scale=S,this.rows.scale=r;var m;f>0?m=this.columns.stretch>0?f/this.columns.stretch:0:m=0;var d;C>0?d=this.rows.stretch>0?C/this.rows.stretch:0:d=0;var l,h,n,a,c,o=0,v=0,g;this._beginDraw();for(var p=0,x=this.rows.count;p<x;p++){n=this.rows.data[p],c=n.stretch===0?n.height*r:d*n.stretch,o=0;for(var T=0,E=this.columns.count;T<E;T++)h=this.columns.data[T],a=h.stretch===0?h.width*S:m*h.stretch,l=this.getFrameNameCallback(T,p,this.baseFrameName),i.has(l)&&a>0&&c>0&&(n.stretch===0&&h.stretch===0||this.getStretchMode(T,p)===0?g=0:g=1,g===0?this._drawImage(this.textureKey,l,o,v,a,c):this._drawTileSprite(this.textureKey,l,o,v,a,c)),o+=a;v+=c}this._endDraw()};const Xy=Phaser.Utils.Objects.IsPlainObject,$d=Phaser.Utils.Objects.GetValue;var Wy=function(i){return Xy(i)?(this.stretchMode.edge=Qo($d(i,"edge",0)),this.stretchMode.internal=Qo($d(i,"internal",0))):(i=Qo(i),this.stretchMode.edge=i,this.stretchMode.internal=i),this},Qo=function(i){return typeof i=="string"&&(i=Hy[i]),i};const Hy={scale:0,repeat:1};var $y=function(i,t){return i===0||i===this.columns.count-1||t===0||t===this.rows.count-1},Ky=function(i,t){return $y.call(this,i,t)?this.stretchMode.edge:this.stretchMode.internal},jy=function(i){return i==null&&(i=!0),this.preserveRatio=i,this},Zy=function(i,t){return t===void 0&&(t=i),this.maxFixedPartScaleX=i,this.maxFixedPartScaleY=t,this},he=function(){};const Jy={_beginDraw:he,_drawImage:he,_drawTileSprite:he,_endDraw:he,setGetFrameNameCallback:Vy,setBaseTexture:Yy,updateTexture:ky,setStretchMode:Wy,getStretchMode:Ky,setPreserveRatio:jy,setMaxFixedPartScale:Zy},Nn=Phaser.Utils.Objects.IsPlainObject,Pt=Phaser.Utils.Objects.GetValue;var zp=function(i,t){class s extends i{constructor(C,S,r,y,e,u,m,d,l,h){Nn(S)?(h=S,S=Pt(h,"x",0),r=Pt(h,"y",0),y=Pt(h,"width",1),e=Pt(h,"height",1),u=Pt(h,"key",void 0),m=Pt(h,"baseFrame",void 0),d=Pt(h,"columns",void 0),l=Pt(h,"rows",void 0)):Nn(y)?(h=y,y=Pt(h,"width",1),e=Pt(h,"height",1),u=Pt(h,"key",void 0),m=Pt(h,"baseFrame",void 0),d=Pt(h,"columns",void 0),l=Pt(h,"rows",void 0)):Nn(u)?(h=u,u=Pt(h,"key",void 0),m=Pt(h,"baseFrame",void 0),d=Pt(h,"columns",void 0),l=Pt(h,"rows",void 0)):Nn(m)?(h=m,m=Pt(h,"baseFrame",void 0),d=Pt(h,"columns",void 0),l=Pt(h,"rows",void 0)):Array.isArray(m)?(h=l,l=d,d=m,m=Pt(h,"baseFrame",void 0)):Nn(d)&&(h=d,d=Pt(h,"columns",void 0),l=Pt(h,"rows",void 0)),super(C),this.type=t,this.setPosition(S,r).setSize(y,e).setOrigin(.5,.5),this.columns={},this.rows={},this.stretchMode={},this._tileSprite=void 0,this._image=void 0,this.setGetFrameNameCallback(Pt(h,"getFrameNameCallback",void 0)),this.setStretchMode(Pt(h,"stretchMode",0)),this.setPreserveRatio(Pt(h,"preserveRatio",!0));var n=Pt(h,"maxFixedPartScale",1),a=Pt(h,"maxFixedPartScaleX",n),c=Pt(h,"maxFixedPartScaleY",void 0);this.setMaxFixedPartScale(a,c),this.setBaseTexture(u,m,d,l)}get minWidth(){return this.columns.minWidth}get minHeight(){return this.rows.minHeight}get fixedPartScaleX(){return this.columns.scale}get fixedPartScaleY(){return this.rows.scale}resize(C,S){return this.width===C&&this.height===S?this:(super.resize?super.resize(C,S):super.setSize(C,S),this.updateTexture(),this)}}return Object.assign(s.prototype,Jy),s};const Qy=Phaser.Game;var Kd=function(i){return i instanceof Qy};const qy=Phaser.Scene;var Os=function(i){return i instanceof qy},Mn=function(i){if(i==null||typeof i!="object")return null;if(Kd(i))return i;if(Kd(i.game))return i.game;if(Os(i))return i.sys.game;if(Os(i.scene))return i.scene.sys.game};const _y=Phaser.GameObjects;var Bi=void 0,Up=function(i,t){if(Bi||(Bi={},Mn(i).events.once("destroy",function(){for(var f in Bi)Bi[f].destroy();Bi=void 0})),!Bi.hasOwnProperty(t)){var s=Mn(i).scene.systemScene,i=new _y[t](s);i.setOrigin(0),Bi[t]=i}return Bi[t]},tT=function(i,t,s,f,C,S){var r=Up(this,"Image").setTexture(i,t).setDisplaySize(C,S);this.batchDraw(r,s,f)},eT=function(i,t,s,f,C,S){var r=Up(this,"TileSprite").setTexture(i,t).setSize(C,S);this.batchDraw(r,s,f)};const wl=Phaser.GameObjects.RenderTexture;let _a=class extends zp(wl,"rexNinePatch"){};var iT={_beginDraw:wl.prototype.beginDraw,_endDraw:wl.prototype.endDraw,_drawImage:tT,_drawTileSprite:eT};Object.assign(_a.prototype,iT);var Yp=function(i){return i==null||i===""||i.length===0},sT=function(i,t,s){var f=i;if(!Yp(t)){typeof t=="string"&&(t=t.split("."));for(var C,S=0,r=t.length;S<r;S++){if(C=t[S],f[C]==null||typeof f[C]!="object"){var y;S===r-1?y={}:y={},f[C]=y}f=f[C]}}return f},it=function(i,t,s,f){if(f===void 0&&(f="."),typeof i=="object"){if(Yp(t)){if(s==null)return;typeof s=="object"&&(i=s)}else{typeof t=="string"&&(t=t.split(f));var C=t.pop(),S=sT(i,t);S[C]=s}return i}};st.register("ninePatch",function(i,t,s,f,C,S,r,y){var e=new _a(this.scene,i,t,s,f,C,S,r,y);return this.scene.add.existing(e),e});it(window,"RexPlugins.UI.NinePatch",_a);const nT=Phaser.GameObjects.GetCalcMatrix;var rT=function(i,t,s,f){var C=t.getRenderList();if(C.length!==0){s.addToRenderList(t);var S=i.pipelines.set(t.pipeline),r=t.frame.glTexture,y=S.setGameObject(t),e=s.roundPixels,u=nT(t,s,f),m=S.calcMatrix.copyFrom(u.calc),d=t._displayOriginX,l=t._displayOriginY,h=s.alpha*t.alpha;i.pipelines.preBatch(t);for(var n=0,a=C.length;n<a;n++)C[n].webglRender(S,m,h,d,l,r,y,e);i.pipelines.postBatch(t)}};const aT=Phaser.Renderer.Canvas.SetTransform;var oT=function(i,t,s,f){var C=i.currentContext,S=t.getRenderList();if(!(S.length===0||!aT(i,C,t,s,f))){s.addToRenderList(t);var r=s.roundPixels,y=-t._displayOriginX,e=-t._displayOriginY;C.translate(y,e);for(var u=0,m=S.length;u<m;u++)S[u].canvasRender(C,y,e,r);C.restore()}};const hT={renderWebGL:rT,renderCanvas:oT};var lT=function(i,t){return this.texture=this.scene.sys.textures.get(i),this.frame=this.texture.get(t),this},jd=function(i,t){if(this.width===i&&this.height===t)return this;this.width=i,this.height=t,this.updateDisplayOrigin();var s=this.input;return s&&!s.customHitArea&&(s.hitArea.width=i,s.hitArea.height=t),this},uT=function(i){return this.lastAppendedChildren.length=0,Array.isArray(i)?(this.children.add(i),this.lastAppendedChildren.push(...i)):(this.children.add(i),this.lastAppendedChildren.push(i)),this};const dT=Phaser.Utils.Array.Remove;var fT=function(i){return this.poolManager&&this.poolManager.free(i),dT(this.children.list,i),this.lastAppendedChildren.length=0,this.dirty=!0,this},Zd=function(){return this.poolManager&&this.poolManager.freeMultiple(this.children.list),this.children.list.length=0,this.lastAppendedChildren.length=0,this.dirty=!0,this},cT=function(){return this.lastAppendedChildren},vT=function(){return this.children.list};const pT={setTint(i){return this.tint=i,this.tintFill=!1,this},setTintFill(i){return this.tint=i,this.tintFill=!0,this},clearTint(){return this.setTint(16777215),this}};var kp={setTexture:lT,resize:jd,setSize:jd,addChild:uT,removeChild:fT,removeChildren:Zd,clear:Zd,getLastAppendedChildren:cT,getChildren:vT};Object.assign(kp,pT);class ui{constructor(){this.items=[]}destroy(){this.clear(),this.items=void 0}pop(){return this.items.length>0?this.items.pop():null}push(t){return this.items.push(t),this}pushMultiple(t){return this.items.push.apply(this.items,t),t.length=0,this}clear(){return this.items.length=0,this}}const gT=Phaser.Utils.Objects.GetValue;var mT={};let xT=class{constructor(t){this.pools=gT(t,"pools",mT)}destroy(){this.pools=void 0}free(t){if(!this.pools)return this;var s=t.type;return this.pools.hasOwnProperty(s)||(this.pools[s]=new ui),this.pools[s].push(t),t.onFree(),this}freeMultiple(t){if(!this.pools)return this;for(var s=0,f=t.length;s<f;s++)this.free(t[s]);return this}allocate(t){return!this.pools||!this.pools.hasOwnProperty(t)?null:this.pools[t].pop()}};const yT=Phaser.GameObjects.GameObject,TT=Phaser.Utils.Objects.IsPlainObject,Vn=Phaser.Utils.Objects.GetValue,CT=Phaser.Structs.List,ST=Phaser.Utils.Array.StableSort;class Xp extends yT{constructor(t,s,f,C,S,r){TT(s)&&(r=s,s=Vn(r,"x",0),f=Vn(r,"y",0),C=Vn(r,"texture"),S=Vn(r,"frame")),s===void 0&&(s=0),f===void 0&&(f=0),super(t,"rexBlitter"),this.children=new CT,this.renderList=[],this.displayListDirty=!1,this.lastAppendedChildren=[];var y=Vn(r,"reuseBob",!0);this.poolManager=y?new xT(r):void 0,this.setTexture(C,S).setPosition(s,f).setOrigin(0,0).clearTint().initPipeline()}preDestroy(){this.removeChildren(),this.children.destroy(),this.renderList.length=0,this.poolManager&&this.poolManager.destroy()}getRenderList(){if(this.displayListDirty){this.renderList.length=0;for(var t=!1,s=this.children.list,f=0,C=s.length;f<C;f++){var S=s[f];PT(S)&&(this.renderList.push(S),t||(t=S.depth!==0))}t&&ST(this.renderList,ET),this.displayListDirty=!1}return this.renderList}}var PT=function(i){return i.active&&i.visible&&i.alpha>0},ET=function(i,t){return i._depth-t._depth};const Ye=Phaser.GameObjects.Components;Phaser.Class.mixin(Xp,[Ye.Alpha,Ye.BlendMode,Ye.ComputedSize,Ye.Depth,Ye.GetBounds,Ye.Mask,Ye.Origin,Ye.Pipeline,Ye.ScrollFactor,Ye.Transform,Ye.Visible,hT,kp]);const Wp="image";/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var Ft=function(i,t,s){if(!i||typeof i=="number")return s;if(i.hasOwnProperty(t))return i[t];if(t.indexOf(".")!==-1){for(var f=t.split("."),C=i,S=s,r=0;r<f.length;r++)if(C.hasOwnProperty(f[r]))S=C[f[r]],C=C[f[r]];else{S=s;break}return S}else return s},Mi=function(i){if(typeof i!="object"||i===null)return i;if(Array.isArray(i))i.length=0;else for(var t in i)delete i[t];return i};const to={enableData(){return this.data===void 0&&(this.data={}),this},setData(i,t){if(this.enableData(),arguments.length===1){var s=i;for(i in s)this.data[i]=s[i]}else this.data[i]=t;return this},getData(i,t){return this.enableData(),i===void 0?this.data:Ft(this.data,i,t)},incData(i,t,s){return s===void 0&&(s=0),this.enableData(),this.setData(i,this.getData(i,s)+t),this},mulData(i,t,s){return s===void 0&&(s=0),this.enableData(),this.setData(i,this.getData(i,s)*t),this},clearData(){return this.data&&Mi(this.data),this}};let Hp=class{constructor(t,s){this.type=s,this.data=void 0,this.setParent(t).reset().setActive()}destroy(){this.parent&&this.parent.removeChild(this)}setParent(t){return this.parent=t,this}setDisplayListDirty(t){return t&&this.parent&&(this.parent.displayListDirty=!0),this}get active(){return this._active}set active(t){this.setDisplayListDirty(this._active!=t),this._active=t}setActive(t){return t===void 0&&(t=!0),this.active=t,this}modifyPorperties(t){return this}reset(){this.clearData()}onFree(){this.reset().setActive(!1).setParent()}};Object.assign(Hp.prototype,to);const MT=Phaser.Math.DegToRad,wT=Phaser.Math.RadToDeg,Ys=Phaser.Utils.Objects.GetValue;let RT=class extends Hp{get visible(){return this._visible}set visible(t){this.setDisplayListDirty(this._visible!=t),this._visible=t}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}get alpha(){return this._alpha}set alpha(t){this.setDisplayListDirty(!!this._alpha!=!!t),this._alpha=t}setAlpha(t){return this.alpha=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setPosition(t,s){return this.x=t,this.y=s,this}setRotation(t){return this.rotation=t,this}get angle(){return wT(this.rotation)}set angle(t){this.rotation=MT(t)}setAngle(t){return this.angle=t,this}setScaleX(t){return this.scaleX=t,this}get width(){return this._width}set width(t){this._width=t}setWidth(t,s){return s===void 0&&(s=!1),this.width=t,s&&(this.scaleY=this.scaleX),this}setScaleY(t){return this.scaleY=t,this}setScale(t,s){return s===void 0&&(s=t),this.scaleX=t,this.scaleY=s,this}get height(){return this._height}set height(t){this._height=t}setHeight(t,s){return s===void 0&&(s=!1),this.height=t,s&&(this.scaleX=this.scaleY),this}setScale(t,s){return s===void 0&&(s=t),this.scaleX=t,this.scaleY=s,this}get displayWidth(){return this._width*this.scaleX}set displayWidth(t){this.scaleX=t/this._width}setDisplayWidth(t,s){return s===void 0&&(s=!1),this.displayWidth=t,s&&(this.scaleY=this.scaleX),this}get displayHeight(){return this._height*this.scaleY}set displayHeight(t){this.scaleY=t/this._height}setDisplayHeight(t,s){return s===void 0&&(s=!1),this.displayHeight=t,s&&(this.scaleX=this.scaleY),this}setOriginX(t){return this.originX=t,this._displayOriginX=this.width*t,this}setOriginY(t){return this.originY=t,this._displayOriginY=this.height*t,this}setOrigin(t,s){return s===void 0&&(s=t),this.setOriginX(t).setOriginY(s),this}get depth(){return this._depth}set depth(t){this.setDisplayListDirty(this._depth!=t),this._depth=t}setDepth(t){return t===void 0&&(t=0),this.depth=t,this}modifyPorperties(t){if(!t)return this;t.hasOwnProperty("x")&&this.setX(t.x),t.hasOwnProperty("y")&&this.setY(t.y),t.hasOwnProperty("rotation")?this.setRotation(t.rotation):t.hasOwnProperty("angle")&&this.setAngle(t.angle),t.hasOwnProperty("alpha")&&this.setAlpha(t.alpha);var s=Ys(t,"width",void 0),f=Ys(t,"height",void 0),C=Ys(t,"scale",void 0),S=Ys(t,"scaleX",C),r=Ys(t,"scaleY",C);s!==void 0?f===void 0&&r===void 0?this.setWidth(s,!0):this.setWidth(s):S!==void 0?this.setScaleX(S):t.hasOwnProperty("displayWidth")&&this.setDisplayWidth(t.displayWidth),f!==void 0?s===void 0&&S===void 0?this.setHeight(f,!0):this.setHeight(f):r!==void 0?this.setScaleY(r):t.hasOwnProperty("displayHeight")&&this.setDisplayHeight(t.displayHeight);var y=Ys(t,"origin",void 0);return y!==void 0?this.setOrigin(y):(t.hasOwnProperty("originX")&&this.setOriginX(t.originX),t.hasOwnProperty("originY")&&this.setOriginY(t.originY)),t.hasOwnProperty("depth")&&this.setDepth(t.depth),this}reset(){return super.reset(),this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setOrigin(0).setDepth(0),this}webglRender(t,s,f,C,S,r,y,e){}canvasRender(t,s,f,C){}};const AT=Phaser.GameObjects.Components.TransformMatrix,OT=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;var kr=new AT,bT=function(i,t,s,f,C,S,r,y){var e=this._width,u=this._height,m=e*this.originX,d=u*this.originY,l=this.x-f,h=this.y-C,n=1,a=1;this.flipX&&(l+=e-m*2,n=-1),this.flipY&&(h+=u-d*2,a=-1),kr.applyITRS(l,h,this.rotation,this.scaleX*n,this.scaleY*a),t.multiply(kr,kr);var c=-m,o=-d,v=c+e,g=o+u,p=kr.setQuad(c,o,v,g,y),x=this.frame.u0,T=this.frame.v0,E=this.frame.u1,M=this.frame.v1,P=OT(this.tint,this.alpha*s);i.batchQuad(this.parent,p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],x,T,E,M,P,P,P,P,this.tintFill,S,r)},FT=function(i,t,s,f){i.save();var C=this._width,S=this._height,r=C*this.originX,y=S*this.originY,e=this.x-r,u=this.y-y,m=1,d=1;this.flipX&&(e+=C,m=-1),this.flipY&&(u+=S,d=-1),f&&(e=Math.round(e),u=Math.round(u)),i.translate(e,u),i.rotate(this.rotation),i.scale(this.scaleX*m,this.scaleY*d);var l=this.frame;i.drawImage(l.source.image,l.cutX,l.cutY,C,S,0,0,C,S),i.restore()};const LT=Phaser.Utils.Objects.IsPlainObject;let $p=class extends RT{constructor(t,s){super(t,Wp),this.setFrame(s)}get width(){return this._width}set width(t){}get height(){return this._height}set height(t){}setFrame(t){return arguments.length>0&&!LT(t)&&(t=this.parent.texture.get(t)),this.frame=t,this._width=t?t.width:0,this._height=t?t.height:0,this}setFlipX(t){return t===void 0&&(t=!0),this.flipX=t,this}setFlipY(t){return t===void 0&&(t=!0),this.flipY=t,this}resetFlip(){return this.flipX=!1,this.flipY=!1,this}get tint(){return this._tint===void 0?this.parent.tint:this._tint}set tint(t){this._tint=t}setTint(t){return this.tint=t,this.tintFill=!1,this}setTintFill(t){return this.tint=t,this.tintFill=!0,this}clearTint(){return this.setTint(16777215),this}resetTint(){return this.tint=void 0,this.tintFill=void 0,this}get tintFill(){return this._tintFill===void 0?this.parent.tintFill:this._tintFill}set tintFill(t){this._tintFill=t}reset(){return super.reset(),this.resetFlip().resetTint().setFrame(),this}modifyPorperties(t){return t?(t.hasOwnProperty("width")&&(t.displayWidth=t.width,delete t.width),t.hasOwnProperty("height")&&(t.displayHeight=t.height,delete t.height),t.hasOwnProperty("frame")&&this.setFrame(t.frame),super.modifyPorperties(t),t.hasOwnProperty("flipX")&&this.setFlipX(t.flipX),t.hasOwnProperty("flipY")&&this.setFlipY(t.flipY),t.hasOwnProperty("tint")&&this.setTint(t.tint),t.hasOwnProperty("tintFill")&&this.setTintFill(t.tintFill),this):this}};var DT={webglRender:bT,canvasRender:FT};Object.assign($p.prototype,DT);var Kp=function(i,t){typeof t=="string"&&(t={frame:t});var s=i.poolManager?i.poolManager.allocate(Wp):null;return s===null?s=new $p(i):s.setParent(i).setActive(),s.modifyPorperties(t),i.addChild(s),s},IT=function(i,t,s,f,C,S){Kp(this,{frame:t,x:s,y:f,width:C,height:S})},BT=function(i,t,s,f,C,S){var r=this.texture.get(t),y=r.width,e=r.height,u=Math.floor(C/y),m=Math.floor(S/e);s+=(C-u*y)/2,f+=(S-m*e)/2;for(var d=0;d<u;d++)for(var l=0;l<m;l++)Kp(this,{frame:t,x:s+d*y,y:f+l*e})};const GT={_drawImage:IT,_drawTileSprite:BT};class eo extends zp(Xp,"rexNinePatch2"){setBaseTexture(t,s,f,C){return this.setTexture(t,s),super.setBaseTexture(t,s,f,C),this}}Object.assign(eo.prototype,GT);st.register("ninePatch2",function(i,t,s,f,C,S,r,y){var e=new eo(this.scene,i,t,s,f,C,S,r,y);return this.scene.add.existing(e),e});it(window,"RexPlugins.UI.NinePatch2",eo);const Wi=Phaser.Utils.Objects.GetValue;let jp=class{constructor(t,s,f,C,S){t===void 0&&(t=0),s===void 0&&(s=t),f===void 0&&(f=0),C===void 0&&(C=0),S===void 0&&(S=0),this.cornerRadius={},this._width=0,this._height=0,this.setTo(t,s,f,C,S)}setTo(t,s,f,C,S){return this.setPosition(t,s),this.setRadius(S),this.setSize(f,C),this}setPosition(t,s){return this.x=t,this.y=s,this}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}setSize(t,s){return this.width=t,this.height=s,this}get minWidth(){var t=this.cornerRadius;return Math.max(t.tl.x+t.tr.x,t.bl.x+t.br.x)}get minHeight(){var t=this.cornerRadius;return Math.max(t.tl.y+t.bl.y,t.tr.y+t.br.y)}get width(){return this._width}set width(t){t==null&&(t=0),this._width=Math.max(t,this.minWidth)}get height(){return this._height}set height(t){t==null&&(t=0),this._height=Math.max(t,this.minHeight)}get radius(){var t=this.cornerRadius;return Math.max(t.tl.x,t.tl.y,t.tr.x,t.tr.y,t.bl.x,t.bl.y,t.br.x,t.br.y)}set radius(t){var s,f;typeof t=="number"?(s=t,f=t):(s=Wi(t,"x",0),f=Wi(t,"y",0));var C=this.cornerRadius;C.tl=Xr(Wi(t,"tl",void 0),s,f),C.tr=Xr(Wi(t,"tr",void 0),s,f),C.bl=Xr(Wi(t,"bl",void 0),s,f),C.br=Xr(Wi(t,"br",void 0),s,f)}get radiusTL(){var t=this.cornerRadius.tl;return Math.max(t.x,t.y)}set radiusTL(t){Wr(this.cornerRadius.tl,t)}get radiusTR(){var t=this.cornerRadius.tr;return Math.max(t.x,t.y)}set radiusTR(t){Wr(this.cornerRadius.tr,t)}get radiusBL(){var t=this.cornerRadius.bl;return Math.max(t.x,t.y)}set radiusBL(t){Wr(this.cornerRadius.bl,t)}get radiusBR(){var t=this.cornerRadius.br;return Math.max(t.x,t.y)}set radiusBR(t){Wr(this.cornerRadius.br,t)}};var Xr=function(i,t,s){return i===void 0?i={x:t,y:s}:typeof i=="number"&&(i={x:i,y:i}),Zp(i),i},Wr=function(i,t){typeof t=="number"?(i.x=t,i.y=t):(i.x=Wi(t,"x",0),i.y=Wi(t,"y",0)),Zp(i)},Zp=function(i){i.convex=i.x>=0||i.y>=0,i.x=Math.abs(i.x),i.y=Math.abs(i.y)},di=function(i,t,s){var f=s.length;if(f>=2){var C=s[f-2],S=s[f-1];if(i===C&&t===S)return s}return s.push(i,t),s};const Jd=Phaser.Math.DegToRad;var Qt=function(i,t,s,f,C,S,r,y,e){r&&S>C?S-=360:!r&&S<C&&(S+=360);var u=S-C,m=Jd(u)/y;C=Jd(C);for(var d=0;d<=y;d++){var l=C+m*d,h=i+s*Math.cos(l),n=t+f*Math.sin(l);di(h,n,e)}return e},NT=Phaser.Renderer.WebGL.Utils,Jp=function(i,t,s,f,C,S){for(var r=NT.getTintAppendFloatAlpha(s.fillColor,s.fillAlpha*f),y=s.pathData,e=s.pathIndexes,u=0;u<e.length;u+=3){var m=e[u]*2,d=e[u+1]*2,l=e[u+2]*2,h=y[m+0]-C,n=y[m+1]-S,a=y[d+0]-C,c=y[d+1]-S,o=y[l+0]-C,v=y[l+1]-S,g=t.getX(h,n),p=t.getY(h,n),x=t.getX(a,c),T=t.getY(a,c),E=t.getX(o,v),M=t.getY(o,v);i.batchTri(s,g,p,x,T,E,M,0,0,1,1,r,r,r,2)}},VT=Phaser.Renderer.WebGL.Utils,io=function(i,t,s,f,C){var S=i.strokeTint,r=VT.getTintAppendFloatAlpha(t.strokeColor,t.strokeAlpha*s);S.TL=r,S.TR=r,S.BL=r,S.BR=r;var y=t.pathData,e=y.length-1,u=t.lineWidth,m=u/2,d=y[0]-f,l=y[1]-C;t.closePath||(e-=2);for(var h=2;h<e;h+=2){var n=y[h]-f,a=y[h+1]-C;i.batchLine(d,l,n,a,m,m,u,h-2,t.closePath?h===e-1:!1),d=n,l=a}};const zT=Phaser.GameObjects.GetCalcMatrix;var UT=function(i,t,s,f){t.dirty&&(t.updateData(),t.dirty=!1),s.addToRenderList(t);var C=i.pipelines.set(t.pipeline),S=zT(t,s,f),r=C.calcMatrix.copyFrom(S.calc),y=t._displayOriginX,e=t._displayOriginY,u=s.alpha*t.alpha;i.pipelines.preBatch(t),t.isFilled&&Jp(C,r,t,u,y,e),t.isStroked&&io(C,t,u,y,e),i.pipelines.postBatch(t)},Cr=function(i,t,s,f){var C=t.fillColor,S=t.fillAlpha,r=(C&16711680)>>>16,y=(C&65280)>>>8,e=C&255;i.fillStyle="rgba("+r+","+y+","+e+","+S+")"},Sr=function(i,t,s,f){var C=t.strokeColor,S=t.strokeAlpha,r=(C&16711680)>>>16,y=(C&65280)>>>8,e=C&255;i.strokeStyle="rgba("+r+","+y+","+e+","+S+")",i.lineWidth=t.lineWidth};const YT=Phaser.Renderer.Canvas.SetTransform;var kT=function(i,t,s,f){t.dirty&&(t.updateData(),t.dirty=!1),s.addToRenderList(t);var C=i.currentContext;if(YT(i,C,t,s,f)){var S=t._displayOriginX,r=t._displayOriginY,y=t.pathData,e=y.length-1,u=y[0]-S,m=y[1]-r;C.beginPath(),C.moveTo(u,m),t.closePath||(e-=2);for(var d=2;d<e;d+=2){var l=y[d]-S,h=y[d+1]-r;C.lineTo(l,h)}C.closePath(),t.isFilled&&(Cr(C,t),C.fill()),t.isStroked&&(Sr(C,t),C.stroke()),C.restore()}};const XT={renderWebGL:UT,renderCanvas:kT},WT=Phaser.GameObjects.Shape,HT=Phaser.Utils.Objects.IsPlainObject,Qd=Phaser.Utils.Objects.GetValue,$T=Phaser.Geom.Polygon.Earcut;let bi=class extends WT{constructor(t,s,f,C,S,r,y,e){var u,m,d,l;if(HT(s)){var h=s;s=h.x,f=h.y,C=h.width,S=h.height,r=h.radius,y=h.color,e=h.alpha,u=h.strokeColor,m=h.strokeAlpha,d=h.strokeWidth,l=h.shape}s===void 0&&(s=0),f===void 0&&(f=0),C===void 0&&(C=1),S===void 0&&(S=C),r===void 0&&(r=0),l===void 0&&(l=0);var n=new jp;if(super(t,"rexRoundRectangleShape",n),this.setShapeType(l),this.shapeType===0){var a=Qd(r,"radius",r);n.setTo(0,0,C,S,a)}else{var a={x:C/2,y:S/2};n.setTo(0,0,C,S,a)}var c=Qd(r,"iteration",void 0);this.setIteration(c),this.setPosition(s,f),this.setFillStyle(y,e),u!==void 0&&d===void 0&&(d=2),this.setStrokeStyle(d,u,m),this.updateDisplayOrigin(),this.dirty=!0}get fillColor(){return this._fillColor}set fillColor(t){this._fillColor=t,this.isFilled=t!=null&&this._fillAlpha>0}get fillAlpha(){return this._fillAlpha}set fillAlpha(t){this._fillAlpha=t,this.isFilled=t>0&&this._fillColor!=null}setFillStyle(t,s){return s===void 0&&(s=1),this.fillColor=t,this.fillAlpha=s,this}get strokeColor(){return this._strokeColor}set strokeColor(t){this._strokeColor=t,this.isStroked=t!=null&&this._lineWidth>0}get lineWidth(){return this._lineWidth}set lineWidth(t){this._lineWidth=t,this.isStroked=t>0&&this._strokeColor!=null}setStrokeStyle(t,s,f){return f===void 0&&(f=1),this.lineWidth=t,this.strokeColor=s,this.strokeAlpha=f,this}updateData(){var t=this.geom,s=this.pathData;s.length=0;var f=t.width,C=t.height,S=t.cornerRadius,r,y=this.iteration+1;if(r=S.tl,Hr(r))if(r.convex){var e=r.x,u=r.y;Qt(e,u,r.x,r.y,180,270,!1,y,s)}else{var e=0,u=0;Qt(e,u,r.x,r.y,90,0,!0,y,s)}else di(0,0,s);if(r=S.tr,Hr(r))if(r.convex){var e=f-r.x,u=r.y;Qt(e,u,r.x,r.y,270,360,!1,y,s)}else{var e=f,u=0;Qt(e,u,r.x,r.y,180,90,!0,y,s)}else di(f,0,s);if(r=S.br,Hr(r))if(r.convex){var e=f-r.x,u=C-r.y;Qt(e,u,r.x,r.y,0,90,!1,y,s)}else{var e=f,u=C;Qt(e,u,r.x,r.y,270,180,!0,y,s)}else di(f,C,s);if(r=S.bl,Hr(r))if(r.convex){var e=r.x,u=C-r.y;Qt(e,u,r.x,r.y,90,180,!1,y,s)}else{var e=0,u=C;Qt(e,u,r.x,r.y,360,270,!0,y,s)}else di(0,C,s);return s.push(s[0],s[1]),this.pathIndexes=$T(s),this}setShapeType(t){return typeof t=="string"&&(t=KT[t]),this.shapeType=t,this}get width(){return this.geom.width}set width(t){this.resize(t,this.height)}get height(){return this.geom.height}set height(t){this.resize(this.width,t)}setSize(t,s){if(s===void 0&&(s=t),this.geom.width===t&&this.geom.height===s)return this;this.geom.setSize(t,s),this.shapeType===1&&this.setRadius({x:t/2,y:s/2}),this.updateDisplayOrigin(),this.dirty=!0;var f=this.input;return f&&!f.customHitArea&&(f.hitArea.width=t,f.hitArea.height=s),this}resize(t,s){return this.setSize(t,s),this}get radius(){return this.geom.radius}set radius(t){this.geom.setRadius(t),this.updateDisplayOrigin(),this.dirty=!0}get radiusTL(){return this.geom.radiusTL}set radiusTL(t){this.geom.radiusTL=t,this.dirty=!0}get radiusTR(){return this.geom.radiusTR}set radiusTR(t){this.geom.radiusTR=t,this.dirty=!0}get radiusBL(){return this.geom.radiusBL}set radiusBL(t){this.geom.radiusBL=t,this.dirty=!0}get radiusBR(){return this.geom.radiusBR}set radiusBR(t){this.geom.radiusBR=t,this.dirty=!0}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}setRadiusTL(t){return t===void 0&&(t=0),this.radiusTL=t,this}setRadiusTR(t){return t===void 0&&(t=0),this.radiusTR=t,this}setRadiusBL(t){return t===void 0&&(t=0),this.radiusBL=t,this}setRadiusBR(t){return t===void 0&&(t=0),this.radiusBR=t,this}get cornerRadius(){return this.geom.cornerRadius}set cornerRadius(t){this.radius=t}setCornerRadius(t){return this.setRadius(t)}get iteration(){return this._iteration}set iteration(t){if(this._iteration===void 0){this._iteration=t;return}this._iteration!==t&&(this._iteration=t,this.dirty=!0)}setIteration(t){return t===void 0&&(t=6),this.iteration=t,this}};var Hr=function(i){return i.x>0&&i.y>0};const KT={rectangle:0,circle:1};Object.assign(bi.prototype,XT);st.register("roundRectangle",function(i,t,s,f,C,S,r){var y=new bi(this.scene,i,t,s,f,C,S,r);return this.scene.add.existing(y),y});it(window,"RexPlugins.UI.RoundRectangle",bi);var Rl=function(i,t,s,f){if(s===void 0&&(s="."),f===void 0&&(f={}),!i)return f;if(t in i)return Object.assign(f,i[t]);t+=s;for(var C in i)C.startsWith(t)&&(f[C.replace(t,"")]=i[C]);return f},qo=function(i,t,s){var f=Rl(i,t);if(s)for(var C in f)s.hasOwnProperty(C)&&(f[s[C]]=f[C],delete f[C]);return f},tu=function(i,t,s){if(s===void 0&&(s={}),Array.isArray(t))for(var f,C=0,S=t.length;C<S;C++)f=t[C],s[f]=i[f];else for(var f in t)s[f]=i[f];return s},eu=function(i,t){for(var s in i)if(!(s in t)||i[s]!==t[s])return!1;for(var s in t)if(!(s in i))return!1;return!0},ks=function(i,t){if(t){var s=tu(i,t);if(!eu(s,t))return i.modifyStyle(t),s}};const jT={setActiveState(i){return i===void 0&&(i=!0),this.activeState===i?this:(this.activeState=i,i?this.activeStyleSave=ks(this,this.activeStyle):(ks(this,this.activeStyleSave),this.activeStyleSave=void 0),this)},setHoverState(i){return i===void 0&&(i=!0),this.hoverState===i?this:(this.hoverState=i,i?this.hoverStyleSave=ks(this,this.hoverStyle):(ks(this,this.hoverStyleSave),this.hoverStyleSave=void 0),this)},setDisableState(i){return i===void 0&&(i=!0),this.disableState===i?this:(this.disableState=i,i?this.disableStyleSave=ks(this,this.disableStyle):(ks(this,this.disableStyleSave),this.disableStyleSave=void 0),this)}};class so extends bi{constructor(t,s){s===void 0&&(s={}),super(t,s),this.activeStyle=qo(s,"active",_o),this.hoverStyle=qo(s,"hover",_o),this.disableStyle=qo(s,"disable",_o)}modifyStyle(t){for(var s in t)this[s]=t[s];return this}}const _o={color:"fillColor",alpha:"fillAlpha",strokeWidth:"lineWidth"};Object.assign(so.prototype,jT);st.register("statesRoundRectangle",function(i){var t=new so(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.StatesRoundRectangle",so);const ZT=Phaser.Renderer.WebGL.Utils;var JT=function(i,t,s,f){if(t.dirty&&(t.updateTexture(),t.dirty=!1),!(t.width===0||t.height===0)){s.addToRenderList(t);var C=t.frame,S=C.width,r=C.height,y=ZT.getTintAppendFloatAlpha,e=i.pipelines.set(t.pipeline,t),u=e.setTexture2D(C.glTexture,t);i.pipelines.preBatch(t),e.batchTexture(t,C.glTexture,S,r,t.x,t.y,S/t.resolution,r/t.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,S,r,y(t.tintTopLeft,s.alpha*t._alphaTL),y(t.tintTopRight,s.alpha*t._alphaTR),y(t.tintBottomLeft,s.alpha*t._alphaBL),y(t.tintBottomRight,s.alpha*t._alphaBR),t.tintFill,0,0,s,f,!1,u),i.pipelines.postBatch(t)}},QT=function(i,t,s,f){t.dirty&&(t.updateTexture(),t.dirty=!1),!(t.width===0||t.height===0)&&(s.addToRenderList(t),i.batchSprite(t,t.frame,s,f))};const qT={renderWebGL:JT,renderCanvas:QT},_T=Phaser.Display.Color,t1={clear(){return this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},fill(i){return this.context.fillStyle=i,this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},drawFrame(i,t,s,f,C,S,r,y,e,u){var m=this.scene.sys.textures.getFrame(i,t);if(!m)return this;var d=m.cutWidth,l=m.cutHeight;s===void 0&&(s=0),f===void 0&&(f=0),C===void 0&&(C=d),S===void 0&&(S=l),r===void 0&&(r=0),y===void 0&&(y=0),e===void 0&&(e=d),u===void 0&&(u=l);var h=m.cutX+r,n=m.cutY+y;return this.context.drawImage(m.source.image,h,n,e,u,s,f,C,S),this.dirty=!0,this},getDataURL(i,t){return this.canvas.toDataURL(i,t)},getPixel(i,t,s){s===void 0&&(s=new _T);var f=this.context.getImageData(i,t,1,1);return s.setTo(f.data[0],f.data[1],f.data[2],f.data[3]),s},setPixel(i,t,s,f,C,S){if(typeof s!="number"){var r=s;s=r.red,f=r.green,C=r.blue,S=r.alpha}S===void 0&&(S=s!==0||f!==0||C!==0?255:0);var y=this.context.createImageData(1,1);return y.data[0]=s,y.data[1]=f,y.data[2]=C,y.data[3]=S,this.context.putImageData(y,i,t),this.dirty=!0,this}};var Qp=function(i,t,s,f,C,S,r){var y=i.sys.textures,e=i.renderer;f===void 0&&(f=0),C===void 0&&(C=0),S===void 0&&(S=t.width),r===void 0&&(r=t.height);var u;y.exists(s)?u=y.get(s):u=y.createCanvas(s,S,r);var m=u.getSourceImage();m.width!==S&&(m.width=S),m.height!==r&&(m.height=r);var d=m.getContext("2d",{willReadFrequently:!0});d.clearRect(0,0,S,r),d.drawImage(t,f,C,S,r),e.gl&&u&&e.canvasToTexture(m,u.source[0].glTexture,!0,0)};const e1={updateTexture(i,t){i&&(t?i.call(t,this.canvas,this.context):i(this.canvas,this.context)),(this.canvas.width!==this.frame.width||this.canvas.height!==this.frame.height)&&this.frame.setSize(this.canvas.width,this.canvas.height),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(this.canvas,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!1;var s=this.input;return s&&!s.customHitArea&&(s.hitArea.width=this.width,s.hitArea.height=this.height),this},generateTexture(i,t,s,f,C){var S=this.canvas;return f===void 0?f=S.width:f*=this.resolution,C===void 0?C=S.height:C*=this.resolution,Qp(this.scene,S,i,t,s,f,C),this},loadTexture(i,t){var s=this.scene.sys.textures.getFrame(i,t);return s?(this.width!==s.cutWidth||this.height!==s.cutHeight?this.setSize(s.cutWidth,s.cutHeight):this.clear(),this.drawFrame(i,t),this.dirty=!0,this):this}},qd=Phaser.Display.Canvas.CanvasPool,i1=Phaser.GameObjects.GameObject;let is=class extends i1{constructor(t,s,f,C,S){s===void 0&&(s=0),f===void 0&&(f=0),C===void 0&&(C=1),S===void 0&&(S=1),super(t,"rexCanvas"),this.renderer=t.sys.game.renderer,this.resolution=1,this._width=C,this._height=S,C=Math.max(Math.ceil(C*this.resolution),1),S=Math.max(Math.ceil(S*this.resolution),1),this.canvas=qd.create(this,C,S),this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.dirty=!1,this.setPosition(s,f),this.setOrigin(.5,.5),this.initPipeline(),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.dirty=!0}preDestroy(){qd.remove(this.canvas),this.texture.destroy(),this.canvas=null,this.context=null}get width(){return this._width}set width(t){this.setSize(t,this._height)}get height(){return this._height}set height(t){this.setSize(this._width,t)}setCanvasSize(t,s){return this._width===t&&this._height===s?this:(this._width=t,this._height=s,this.updateDisplayOrigin(),t=Math.max(Math.ceil(t*this.resolution),1),s=Math.max(Math.ceil(s*this.resolution),1),this.canvas.width=t,this.canvas.height=s,this.frame.setSize(t,s),this.dirty=!0,this)}setSize(t,s){return this.setCanvasSize(t,s),this}get displayWidth(){return this.scaleX*this._width}set displayWidth(t){this.scaleX=t/this._width}get displayHeight(){return this.scaleY*this._height}set displayHeight(t){this.scaleY=t/this._height}setDisplaySize(t,s){return this.displayWidth=t,this.displayHeight=s,this}getCanvas(t){return t||(this.dirty=!0),this.canvas}getContext(t){return t||(this.dirty=!0),this.context}needRedraw(){return this.dirty=!0,this}resize(t,s){return this.setSize(t,s),this}};const Se=Phaser.GameObjects.Components;Phaser.Class.mixin(is,[Se.Alpha,Se.BlendMode,Se.Crop,Se.Depth,Se.Flip,Se.GetBounds,Se.Mask,Se.Origin,Se.Pipeline,Se.ScrollFactor,Se.Tint,Se.Transform,Se.Visible,qT,t1,e1]);const s1=Phaser.Utils.String.Pad;var gt=function(i,t,s){if(i==null)return i;switch(typeof i){case"string":return i;case"number":return`#${s1(Math.floor(i).toString(16),6,"0",1)}`;case"function":return i(t,s);case"object":return i.hasOwnProperty("r")?i.hasOwnProperty("a")?`rgba(${i.r},${i.g},${i.b},${i.a})`:`rgb(${i.r},${i.g},${i.b})`:i.hasOwnProperty("h")?i.hasOwnProperty("a")?`hsla(${i.h},${i.s},${i.l},${i.a})`:`hsl(${i.h},${i.s},${i.l})`:i;default:return i}};const _d=Phaser.Math.DegToRad;var qp=function(i,t,s,f,C,S,r){var y=new jp(t,s,f,C,S),e=y.minWidth,u=y.minHeight,m=f>=e?1:f/e,d=C>=u?1:C/u,l=y.cornerRadius,h,n,a,c,o;i.save(),i.beginPath(),i.translate(t,s),h=l.tl,Kr(h)?(n=h.x*m,a=h.y*d,$r(h)?(c=n,o=a,Gi(i,c,o,n,a,180,270,!1,r)):(c=0,o=0,Gi(i,c,o,n,a,90,0,!0,r))):i.lineTo(0,0),h=l.tr,Kr(h)?(n=h.x*m,a=h.y*d,$r(h)?(c=f-n,o=a,Gi(i,c,o,n,a,270,360,!1,r)):(c=f,o=0,Gi(i,c,o,n,a,180,90,!0,r))):i.lineTo(f,0),h=l.br,Kr(h)?(n=h.x*m,a=h.y*d,$r(h)?(c=f-n,o=C-a,Gi(i,c,o,n,a,0,90,!1,r)):(c=f,o=C,Gi(i,c,o,n,a,270,180,!0,r))):i.lineTo(f,C),h=l.bl,Kr(h)?(n=h.x*m,a=h.y*d,$r(h)?(c=n,o=C-a,Gi(i,c,o,n,a,90,180,!1,r)):(c=0,o=C,Gi(i,c,o,n,a,360,270,!0,r))):i.lineTo(0,C),i.closePath(),i.restore()},$r=function(i){return!i.hasOwnProperty("convex")||i.convex},Kr=function(i){return i.x>0&&i.y>0},Gi=function(i,t,s,f,C,S,r,y,e){if(y&&r>S?r-=360:!y&&r<S&&(r+=360),S=_d(S),r=_d(r),e==null)i.ellipse(t,s,f,C,0,S,r,y);else{e+=1;for(var u,m,d,l=(r-S)/e,h=0;h<=e;h++)d=S+l*h,u=t+f*Math.cos(d),m=s+C*Math.sin(d),i.lineTo(u,m)}},n1=function(i,t,s,f,C,S,r,y,e,u,m,d,l){if(qp(t,s,f,C,S,r,l),y!=null){if(m!=null){var h;d?h=t.createLinearGradient(0,0,C,0):h=t.createLinearGradient(0,0,0,S),h.addColorStop(0,y),h.addColorStop(1,m),y=h}t.fillStyle=y,t.fill()}e!=null&&u>0&&(t.strokeStyle=e,t.lineWidth=u,t.stroke())},iu=function(i,t,s,f,C,S,r,y){if(!(t==null&&s==null)){var e=i.canvas.width,u=i.canvas.height;s==null&&(f=0);var m=f/2;e=Math.max(1,e-f),u=Math.max(1,u-f),n1(i.canvas,i.context,m,m,e,u,C,t,s,f,S,r,y)}},r1=function(){iu(this,this.fillStyle,this.strokeStyle,this.lineWidth,this.radius,this.fillColor2,this.isHorizontalGradient,this.iteration)};const tf=Phaser.Utils.Objects.GetValue;let _p=class extends is{constructor(t,s,f,C,S,r,y,e,u,m,d){s===void 0&&(s=0),f===void 0&&(f=0),C===void 0&&(C=1),S===void 0&&(S=C),r===void 0&&(r=0),super(t,s,f,C,S),this.type="rexRoundRectangleCanvas";var l=tf(r,"radius",r),h=tf(r,"iteration",void 0);this.setRadius(l),this.setIteration(h),this.setFillStyle(y,m,d),this.setStrokeStyle(e,u)}get radius(){return this._radius}set radius(t){this.dirty|=this._radius!=t,this._radius=t}setRadius(t){return this.radius=t,this}get iteration(){return this._iteration}set iteration(t){this.dirty|=this._iteration!=t,this._iteration=t}setIteration(t){return this.iteration=t,this}get fillStyle(){return this._fillStyle}set fillStyle(t){t=gt(t,this.canvas,this.context),this.dirty|=this._fillStyle!=t,this._fillStyle=t}get fillColor2(){return this._fillColor2}set fillColor2(t){t=gt(t,this.canvas,this.context),this.dirty|=this._fillColor2!=t,this._fillColor2=t}get isHorizontalGradient(){return this._isHorizontalGradient}set isHorizontalGradient(t){this.dirty|=this._isHorizontalGradient!=t,this._isHorizontalGradient=t}setFillStyle(t,s,f){return f===void 0&&(f=!0),this.fillStyle=t,this.fillColor2=s,this.isHorizontalGradient=f,this}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){t=gt(t,this.canvas,this.context),this.dirty|=this._strokeStyle!=t,this._strokeStyle=t}get lineWidth(){return this._lineWidth}set lineWidth(t){this.dirty|=this._lineWidth!=t,this._lineWidth=t}setStrokeStyle(t,s){return this.strokeStyle=t,this.lineWidth=s,this}updateTexture(){return this.clear(),r1.call(this),super.updateTexture(),this}};st.register("roundRectangleCanvas",function(i,t,s,f,C,S,r,y,e,u){var m=new _p(this.scene,i,t,s,f,C,S,r,y,e,u);return this.scene.add.existing(m),m});it(window,"RexPlugins.UI.RoundRectangleCanvas",_p);/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var a1=Phaser.Renderer.WebGL.Utils,o1=function(i,t,s,f){if(!(t.width===0||t.height===0)){s.addToRenderList(t);var C=t.frame,S=C.width,r=C.height,y=a1.getTintAppendFloatAlpha,e=i.pipelines.set(t.pipeline,t),u=e.setTexture2D(C.glTexture,t);i.pipelines.preBatch(t),e.batchTexture(t,C.glTexture,S,r,t.x,t.y,S/t.style.resolution,r/t.style.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,S,r,y(t.tintTopLeft,s.alpha*t._alphaTL),y(t.tintTopRight,s.alpha*t._alphaTR),y(t.tintBottomLeft,s.alpha*t._alphaBL),y(t.tintBottomRight,s.alpha*t._alphaBR),t.tintFill,0,0,s,f,!1,u),i.pipelines.postBatch(t)}};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var h1=function(i,t,s,f){t.width===0||t.height===0||(s.addToRenderList(t),i.batchSprite(t,t.frame,s,f))};const l1={renderWebGL:o1,renderCanvas:h1},th=Phaser.Display.Canvas.CanvasPool;var u1=function(i,t,s){s===void 0&&(s={});var f=th.create(this),C=f.getContext("2d",{willReadFrequently:!0});i.syncFont(f,C);var S=C.measureText(t),r=Math.ceil(S.width*i.baselineX),y=r,e=2*y;if(y=y*i.baselineY|0,f.width=r,f.height=e,C.fillStyle="#f00",C.fillRect(0,0,r,e),C.font=i._font,C.textBaseline="alphabetic",C.fillStyle="#000",C.fillText(i.testString,0,y),s.left=0,r===0||e===0||!C.getImageData(0,0,r,e))return th.remove(f),s;for(var u=C.getImageData(0,0,r,e).data,m=!1,d=0;d<r;d++){for(var l=0;l<e;l++){var h=(l*r+d)*4;if(u[h]!==255){s.left=d,m=!0;break}}if(m)break}return th.remove(f),s};const d1=Phaser.GameObjects.GameObject;class tg extends d1{setStyle(t){return this.style.setStyle(t)}setFont(t){return this.style.setFont(t)}setFontFamily(t){return this.style.setFontFamily(t)}setFontSize(t){return this.style.setFontSize(t)}setFontStyle(t){return this.style.setFontStyle(t)}setTestString(t){return this.style.setTestString(t)}setFixedSize(t,s){return this.style.setFixedSize(t,s)}setBackgroundColor(t,s,f){return this.style.setBackgroundColor(t,s,f)}setBackgroundStrokeColor(t,s){return this.style.setBackgroundStrokeColor(t,s)}setBackgroundCornerRadius(t,s){return this.style.setBackgroundCornerRadius(t,s)}setFill(t){return this.style.setFill(t)}setColor(t){return this.style.setColor(t)}setStroke(t,s){return this.style.setStroke(t,s)}setShadow(t,s,f,C,S,r){return this.style.setShadow(t,s,f,C,S,r)}setShadowOffset(t,s){return this.style.setShadowOffset(t,s)}setShadowColor(t){return this.style.setShadowColor(t)}setShadowBlur(t){return this.style.setShadowBlur(t)}setShadowStroke(t){return this.style.setShadowStroke(t)}setShadowFill(t){return this.style.setShadowFill(t)}setWrapMode(t){return this.style.setWrapMode(t)}setWrapWidth(t){return this.style.setWrapWidth(t)}setWordWrapWidth(t){return this.style.setWrapWidth(t)}setAlign(t){return this.style.setHAlign(t)}setHAlign(t){return this.style.setHAlign(t)}setVAlign(t){return this.style.setVAlign(t)}setLineSpacing(t){return this.style.setLineSpacing(t)}set lineSpacing(t){this.setLineSpacing(t)}get lineSpacing(){return this.style.lineSpacing}setXOffset(t){return this.style.setXOffset(t)}setMaxLines(t){return this.style.setMaxLines(t)}setResolution(t){return this.style.setResolution(t)}getTextMetrics(){return this.style.getTextMetrics()}setTextMetrics(t,s){return this.style.setTextMetrics(t,s)}measureTextMargins(t,s){return u1(this.style,t,s)}}const ve=Phaser.GameObjects.Components;Phaser.Class.mixin(tg,[ve.Alpha,ve.BlendMode,ve.ComputedSize,ve.Crop,ve.Depth,ve.Flip,ve.GetBounds,ve.Mask,ve.Origin,ve.Pipeline,ve.ScrollFactor,ve.Tint,ve.Transform,ve.Visible,l1]);var f1={backgroundColor:["backgroundColor",null,gt],backgroundColor2:["backgroundColor2",null,gt],backgroundHorizontalGradient:["backgroundHorizontalGradient",!0,null],backgroundStrokeColor:["backgroundStrokeColor",null,gt],backgroundStrokeLineWidth:["backgroundStrokeLineWidth",2,null],backgroundCornerRadius:["backgroundCornerRadius",0,null],backgroundCornerIteration:["backgroundCornerIteration",null,null],fontFamily:["fontFamily","Courier",null],fontSize:["fontSize","16px",null],fontStyle:["fontStyle","",null],color:["color","#fff",gt],stroke:["stroke","#fff",gt],strokeThickness:["strokeThickness",0,null],shadowOffsetX:["shadow.offsetX",0,null],shadowOffsetY:["shadow.offsetY",0,null],shadowColor:["shadow.color","#000",gt],shadowBlur:["shadow.blur",0,null],shadowStroke:["shadow.stroke",!1,null],shadowFill:["shadow.fill",!1,null],underlineColor:["underline.color","#000",gt],underlineThickness:["underline.thickness",0,null],underlineOffset:["underline.offset",0,null],halign:["halign","left",null],valign:["valign","top",null],maxLines:["maxLines",0,null],fixedWidth:["fixedWidth",0,null],fixedHeight:["fixedHeight",0,null],resolution:["resolution",0,null],lineSpacing:["lineSpacing",0,null],xOffset:["xOffset",0,null],rtl:["rtl",!1,null],testString:["testString","|MÃ‰qgy",null],baselineX:["baselineX",1.2,null],baselineY:["baselineY",1.4,null],wrapMode:["wrap.mode",0,null],wrapWidth:["wrap.width",0,null],wrapCallback:["wrap.callback",null],wrapCallbackScope:["wrap.callbackScope",null]};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */const jr=Phaser.Display.Canvas.CanvasPool;var ef=function(i){var t=jr.create(this),s=t.getContext("2d",{willReadFrequently:!0});i.syncFont(t,s);var f=s.measureText(i.testString);if("actualBoundingBoxAscent"in f){var C=f.actualBoundingBoxAscent,S=f.actualBoundingBoxDescent,u={ascent:C,descent:S,fontSize:C+S};return jr.remove(t),u}var r=Math.ceil(f.width*i.baselineX),y=r,e=2*y;y=y*i.baselineY|0,t.width=r,t.height=e,s.fillStyle="#f00",s.fillRect(0,0,r,e),s.font=i._font,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(i.testString,0,y);var u={ascent:0,descent:0,fontSize:0};if(!s.getImageData(0,0,r,e))return u.ascent=y,u.descent=y+6,u.fontSize=u.ascent+u.descent,jr.remove(t),u;var m=s.getImageData(0,0,r,e).data,d=m.length,l=r*4,h,n,a=0,c=!1;for(h=0;h<y;h++){for(n=0;n<l;n+=4)if(m[a+n]!==255){c=!0;break}if(!c)a+=l;else break}for(u.ascent=y-h,a=d-l,c=!1,h=e;h>y;h--){for(n=0;n<l;n+=4)if(m[a+n]!==255){c=!0;break}if(!c)a-=l;else break}return u.descent=h-y,u.fontSize=u.ascent+u.descent,jr.remove(t),u},$t={NO_NEWLINE:0,RAW_NEWLINE:1,WRAPPED_NEWLINE:2,NO_WRAP:0,WORD_WRAP:1,CHAR_WRAP:2,SPLITREGEXP:/(?:\r\n|\r|\n)/};const c1=Phaser.Utils.Objects.GetAdvancedValue,Pe=Phaser.Utils.Objects.GetValue;let su=class{constructor(t,s,f){this.parent=t,f===void 0&&(f=f1),this.propertyMap=f,this.backgroundColor,this.backgroundColor2,this.backgroundHorizontalGradient,this.backgroundStrokeColor,this.backgroundStrokeLineWidth,this.backgroundCornerRadius,this.backgroundCornerIteration,this.fontFamily,this.fontSize,this.fontStyle,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.underlineColor,this.underlineThickness,this.underlineOffset,this.halign,this.valign,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.lineSpacing,this.xOffset,this.rtl,this.testString,this.baselineX,this.baselineY,this.wrapMode,this.wrapWidth,this.wrapCallback,this.wrapCallbackScope,this._font,this.setStyle(s,!1,!0)}get isWrapFitMode(){return this.fixedWidth>0&&this.wrapMode!==$t.NO_WRAP&&this.wrapWidth===0}setStyle(t,s,f){if(s===void 0&&(s=!0),f===void 0&&(f=!1),t&&t.hasOwnProperty("wrap")){var C=t.wrap;if(C.hasOwnProperty("mode")){var S=C.mode;typeof S=="string"&&(C.mode=sf[S])}else C.hasOwnProperty("width")&&(C.mode=1)}t&&t.rtl&&f&&!t.hasOwnProperty("halign")&&(t.halign="right"),t&&t.hasOwnProperty("fontSize")&&typeof t.fontSize=="number"&&(t.fontSize=t.fontSize.toString()+"px");var r=this.propertyMap;for(var y in r){var e=r[y],u=e[0],m=f?e[1]:this[y],d=e[2];if(y==="wrapCallback"||y==="wrapCallbackScope")this[y]=Pe(t,u,m);else{var l=c1(t,u,m);d&&(l=d(l)),this[y]=l}}var h=Pe(t,"font",null);h===null?this._font=this.fontStyle+" "+this.fontSize+" "+this.fontFamily:this._font=h;var n=Pe(t,"fill",null);n!==null&&(this.color=gt(n));var a=Pe(t,"metrics",!1);return a?this.metrics={ascent:Pe(a,"ascent",0),descent:Pe(a,"descent",0),fontSize:Pe(a,"fontSize",0)}:(s||!this.metrics)&&(this.metrics=ef(this)),s?this.parent.updateText():this.parent}syncFont(t,s){s.font=this._font}syncStyle(t,s){s.textBaseline="alphabetic",s.fillStyle=this.color,s.strokeStyle=this.stroke,s.lineWidth=this.strokeThickness,s.lineCap="round",s.lineJoin="round"}syncShadow(t,s){s?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)}update(t){return t&&(this._font=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim(),this.metrics=ef(this)),this.parent.updateText(t)}buildFont(){var t=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim();return t!==this._font&&(this._font=t),this}setFont(t){return typeof t=="string"?(this.fontFamily=t,this.fontSize="",this.fontStyle=""):(this.fontFamily=Pe(t,"fontFamily","Courier"),this.fontSize=Pe(t,"fontSize","16px"),this.fontStyle=Pe(t,"fontStyle","")),this.update(!0)}setFontFamily(t){return this.fontFamily=t,this.update(!0)}setFontStyle(t){return this.fontStyle=t,this.update(!0)}setFontSize(t){return typeof t=="number"&&(t=t.toString()+"px"),this.fontSize=t,this.update(!0)}setTestString(t){return this.testString=t,this.update(!0)}setFixedSize(t,s){return this.fixedWidth=t,this.fixedHeight=s,t&&(this.parent.width=t),s&&(this.parent.height=s),this.update(this.isWrapFitMode)}setResolution(t){return this.resolution=t,this.update(!1)}setLineSpacing(t){return this.lineSpacing=t,this.update(!1)}setXOffset(t){return this.xOffset=t,this.update(!1)}setBackgroundColor(t,s,f){return f===void 0&&(f=!0),this.backgroundColor=gt(t,this.parent.canvas,this.parent.context),this.backgroundColor2=gt(s,this.parent.canvas,this.parent.context),this.backgroundHorizontalGradient=f,this.update(!1)}setBackgroundStrokeColor(t,s){return this.backgroundStrokeColor=gt(t,this.parent.canvas,this.parent.context),this.backgroundStrokeLineWidth=s,this.update(!1)}setBackgroundCornerRadius(t,s){return this.backgroundCornerRadius=t,this.backgroundCornerIteration=s,this.update(!1)}setFill(t){return this.color=gt(t,this.parent.canvas,this.parent.context),this.update(!1)}setColor(t){return this.color=gt(t,this.parent.canvas,this.parent.context),this.update(!1)}setStroke(t,s){return t===void 0?this.strokeThickness=0:(s===void 0&&(s=this.strokeThickness),this.stroke=gt(t,this.parent.canvas,this.parent.context),this.strokeThickness=s),this.update(!0)}setShadow(t,s,f,C,S,r){return t===void 0&&(t=0),s===void 0&&(s=0),f===void 0&&(f="#000"),C===void 0&&(C=0),S===void 0&&(S=!1),r===void 0&&(r=!0),this.shadowOffsetX=t,this.shadowOffsetY=s,this.shadowColor=gt(f,this.parent.canvas,this.parent.context),this.shadowBlur=C,this.shadowStroke=S,this.shadowFill=r,this.update(!1)}setShadowOffset(t,s){return t===void 0&&(t=0),s===void 0&&(s=t),this.shadowOffsetX=t,this.shadowOffsetY=s,this.update(!1)}setShadowColor(t){return t===void 0&&(t="#000"),this.shadowColor=gt(t,this.parent.canvas,this.parent.context),this.update(!1)}setShadowBlur(t){return t===void 0&&(t=0),this.shadowBlur=t,this.update(!1)}setShadowStroke(t){return this.shadowStroke=t,this.update(!1)}setShadowFill(t){return this.shadowFill=t,this.update(!1)}setUnderline(t,s,f){return t===void 0&&(t="#000"),s===void 0&&(s=0),f===void 0&&(f=0),this.underlineColor=gt(t,this.parent.canvas,this.parent.context),this.underlineThickness=s,this.underlineOffset=f,this.update(!1)}setUnderlineColor(t){return t===void 0&&(t="#000"),this.underlineColor=gt(t,this.parent.canvas,this.parent.context),this.update(!1)}setUnderlineThickness(t){return t===void 0&&(t=0),this.underlineThickness=t,this.update(!1)}setUnderlineOffset(t){return t===void 0&&(t=0),this.underlineOffset=t,this.update(!1)}setWrapMode(t){return typeof t=="string"&&(t=sf[t.toLowerCase()]||0),this.wrapMode=t,this.update(!0)}setWrapWidth(t){return this.wrapWidth=t,this.update(!1)}setAlign(t,s){return t===void 0&&(t="left"),s===void 0&&(s="top"),this.halign=t,this.valign=s,this.update(!1)}setHAlign(t){return t===void 0&&(t="left"),this.halign=t,this.update(!1)}setVAlign(t){return t===void 0&&(t="top"),this.valign=t,this.update(!1)}setMaxLines(t){return t===void 0&&(t=0),this.maxLines=t,this.update(!1)}getTextMetrics(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}}setTextMetrics(t,s){return this.metrics.ascent=t.ascent,this.metrics.descent=t.descent,this.metrics.fontSize=t.fontSize,s&&(typeof s=="string"?(this.fontFamily=s,this.fontSize="",this.fontStyle=""):(this.fontFamily=Pe(s,"fontFamily",this.fontFamily),this.fontSize=Pe(s,"fontSize",this.fontSize),this.fontStyle=Pe(s,"fontStyle",this.fontStyle))),this.parent.updateText(!0)}get lineHeight(){return this.metrics.fontSize+this.strokeThickness+this.lineSpacing}toJSON(){var t={},s=this.propertyMap;for(var f in s)t[f]=this[f];return t.metrics=this.getTextMetrics(),t}destroy(){this.parent=void 0}};const sf={none:$t.NO_WRAP,word:$t.WORD_WRAP,char:$t.CHAR_WRAP,character:$t.CHAR_WRAP},v1={draw(i,t,s,f){var C=this.penManager;this.hitAreaManager.clear();var S=this.context;S.save();var r=this.defaultStyle;this.clear(),iu(this,r.backgroundColor,r.backgroundStrokeColor,r.backgroundStrokeLineWidth,r.backgroundCornerRadius,r.backgroundColor2,r.backgroundHorizontalGradient,r.backgroundCornerIteration),i+=this.startXOffset,t+=this.startYOffset;var y=r.halign,e=r.valign,u,m=r.lineHeight,d=C.lines,l=d.length,h=r.maxLines,n,a,c;h>0&&l>h?(n=h,e==="center"?a=Math.floor((l-n)/2):e==="bottom"?a=l-n:a=0):(n=l,a=0),c=a+n;var o,v,g=this.rtl,p=g?this.parent.width:void 0;e==="center"?v=Math.max((f-n*m)/2,0):e==="bottom"?v=Math.max(f-n*m-2,0):v=0,v+=t;for(var x=a;x<c;x++)if(u=C.getLineWidth(x),u!==0){for(var T=d[x],E=T.length,M=y,P=0;P<E;P++){var w=T[P].prop.align;if(w!==void 0){M=w;break}}M==="center"?o=(s-u)/2:M==="right"?o=g?0:s-u:o=g?s-u:0,o+=i;for(var P=0;P<E;P++)this.drawPen(T[P],o,v,p)}S.restore()},drawPen(i,t,s,f){t+=i.x,s+=i.y+(i.prop.y||0),f!==void 0&&(t=f-t);var C=this.canvas,S=this.context;S.save();var r=this.parser.propToContextStyle(this.defaultStyle,i.prop);if(r.buildFont(),r.syncFont(C,S),r.syncStyle(C,S),r.underlineThickness>0&&i.width>0&&this.drawUnderline(t,s,i.width,r),i.isTextPen&&this.drawText(t,s,i.text,r),i.isImagePen&&this.drawImage(t,s,i.prop.img,r),S.restore(),i.hasAreaMarker&&i.width>0){var y,e=i.prop.area;if(e)y={key:e};else{var u=i.prop.url;y={key:`url:${u}`,url:u}}this.hitAreaManager.add(t,s-this.startYOffset,i.width,this.defaultStyle.lineHeight,y)}},clear(){var i=this.canvas;this.context.clearRect(0,0,i.width,i.height)},drawUnderline(i,t,s,f){t+=f.underlineOffset-f.underlineThickness/2,this.autoRound&&(i=Math.round(i),t=Math.round(t));var C=this.context,S=C.lineCap;C.lineCap="butt",C.strokeStyle=f.underlineColor,C.lineWidth=f.underlineThickness,C.beginPath(),C.moveTo(i,t),C.lineTo(i+s,t),C.stroke(),C.lineCap=S},drawText(i,t,s,f){this.autoRound&&(i=Math.round(i),t=Math.round(t));var C=this.context;f.stroke&&f.stroke!=="none"&&f.strokeThickness>0&&(f.syncShadow(C,f.shadowStroke),C.strokeText(s,i,t)),f.color&&f.color!=="none"&&(f.syncShadow(C,f.shadowFill),C.fillText(s,i,t))},drawImage(i,t,s,f){t-=this.startYOffset,this.parent.imageManager.draw(s,this.context,i,t,this.autoRound)}},vs=Phaser.Utils.Objects.GetValue,p1=$t.NO_NEWLINE,nf=$t.RAW_NEWLINE;class g1{constructor(t){this.prop={},this.resetFromJSON(t)}resetFromJSON(t){this.text=vs(t,"text",""),this.x=vs(t,"x",0),this.y=vs(t,"y",0),this.width=vs(t,"width",0);var s=vs(t,"prop",null);s===null&&(s={}),this.prop=s,this.newLineMode=vs(t,"newLineMode",0),this.startIndex=vs(t,"startIndex",0)}get plainText(){var t=this.text;return this.newLineMode===nf&&(t+=`
`),t}get wrapText(){var t=this.text;return this.newLineMode!==p1&&(t+=`
`),t}get rawTextLength(){var t=this.text.length;return this.newLineMode===nf&&(t+=1),t}get endIndex(){return this.startIndex+this.rawTextLength}get lastX(){return this.x+this.width}get isTextPen(){return this.text!==""}get isImagePen(){return!!this.prop.img}get hasAreaMarker(){return!!this.prop.area||!!this.prop.url}}var Fs=function(i,t){var s=Array.isArray(i);if(t===void 0?t=s?[]:{}:Mi(t),s){t.length=i.length;for(var f=0,C=i.length;f<C;f++)t[f]=i[f]}else for(var S in i)t[S]=i[S];return t};const rf=Phaser.Utils.Objects.GetFastValue,af=$t.NO_NEWLINE,m1=$t.WRAPPED_NEWLINE;class nu{constructor(t){this.pens=[],this.lines=[],this.maxLinesWidth=void 0,this.pensPool=t.pensPool,this.linesPool=t.linesPool,this.tagToText=rf(t,"tagToText",he),this.tagToTextScope=rf(t,"tagToTextScope",void 0)}destroy(){this.clear(),this.tagToText=void 0,this.tagToTextScope=void 0}clear(){for(var t=0,s=this.lines.length;t<s;t++)this.lines[t].length=0;this.pensPool.pushMultiple(this.pens),this.linesPool.pushMultiple(this.lines),this.maxLinesWidth=void 0}addTextPen(t,s,f,C,S,r){var y=this.pensPool.pop();return y==null&&(y=new g1),ps.text=t,ps.x=s,ps.y=f,ps.width=C,ps.prop=S,ps.newLineMode=r,y.resetFromJSON(ps),this.addPen(y),this}addImagePen(t,s,f,C){return this.addTextPen("",t,s,f,C,af),this}addNewLinePen(){var t=this.lastPen,s=t?t.lastX:0,f=t?t.y:0,C=t?Fs(t.prop):null;return this.addTextPen("",s,f,0,C,m1),this}addPen(t){var s=this.lastPen;s==null?t.startIndex=0:t.startIndex=s.endIndex,this.pens.push(t);var f=this.lastLine;f==null&&(f=this.linesPool.pop()||[],this.lines.push(f)),f.push(t),t.newLineMode!==af&&(f=this.linesPool.pop()||[],this.lines.push(f)),this.maxLinesWidth=void 0}clone(t){t==null&&(t=new nu),t.clear();for(var s=0,f=this.lines.length;s<f;s++)for(var C=this.lines[s],S=0,r=C.length;S<r;S++){var y=C[S];t.addPen(y.text,y.x,y.y,y.width,Fs(y.prop),y.newLineMode)}return t}get lastPen(){return this.pens[this.pens.length-1]}get lastLine(){return this.lines[this.lines.length-1]}getLineStartIndex(t){if(t>=this.lines.length)return this.getLineEndIndex(t);var s=this.lines[t];return s&&s[0]?s[0].startIndex:0}getLineEndIndex(t){t>=this.lines.length&&(t=this.lines.length-1);var s,f=!1,C;for(s=t;s>=0&&(C=this.lines[s],f=C!=null&&C.length>0,!f);s--);if(!f)return 0;var S=C[C.length-1];return S.endIndex}getLineWidth(t){var s=this.lines[t];if(!s)return 0;var f=s[s.length-1];if(f==null)return 0;var C=f.lastX;return C}getMaxLineWidth(){if(this.maxLinesWidth!==void 0)return this.maxLinesWidth;for(var t,s=0,f=0,C=this.lines.length;f<C;f++)t=this.getLineWidth(f),t>s&&(s=t);return this.maxLinesWidth=s,s}getLineWidths(){for(var t=[],s=0,f=this.lines.length;s<f;s++)t.push(this.getLineWidth(s));return t}get linesCount(){return this.lines.length}get plainText(){for(var t="",s=this.pens,f=0,C=s.length;f<C;f++)t+=s[f].plainText;return t}get rawTextLength(){for(var t=0,s=this.pens,f=0,C=this.pens.length;f<C;f++)t+=s[f].rawTextLength;return t}getSliceTagText(t,s,f){if(t===void 0&&(t=0),s===void 0){var C=this.lastPen;if(C==null)return"";s=C.endIndex}f===void 0&&(f=!1);for(var S="",r,y,e,u,m,d,l,h=0,n=this.pens.length;h<n&&(r=this.pens[h],u=r.endIndex,!(!(u<=t)&&(r=this.pens[h],y=f?r.wrapText:r.plainText,d=r.prop,e=r.startIndex,m=e>=t&&u<=s,m||(y=y.substring(t-e,s-e)),this.tagToTextScope?S+=this.tagToText.call(this.tagToTextScope,y,d,l):S+=this.tagToText(y,d,l),l=d,u>=s)));h++);return S}get length(){return this.lines.length}set length(t){this.clear()}}var ps={};const x1=Phaser.Geom.Rectangle;var of=new ui;class y1{constructor(){this.hitAreas=[]}destroy(){this.clear()}clear(){for(var t=0,s=this.hitAreas.length;t<s;t++)Mi(this.hitAreas[t].data);return of.pushMultiple(this.hitAreas),this}add(t,s,f,C,S){var r=of.pop();return r===null?r=new x1(t,s,f,C):r.setTo(t,s,f,C),r.data=S,this.hitAreas.push(r),this}getFirst(t,s){for(var f=0,C=this.hitAreas.length;f<C;f++){var S=this.hitAreas[f];if(S.contains(t,s))return S}return null}getByKey(t){for(var s=0,f=this.hitAreas.length;s<f;s++){var C=this.hitAreas[s];if(C.data.key===t)return C}return null}drawBounds(t,s,f){s===void 0&&(s=16777215),f&&t.save().scaleCanvas(f.scaleX,f.scaleY).rotateCanvas(f.rotation).translateCanvas(f.x,f.y);for(var C=0,S=this.hitAreas.length;C<S;C++){var r=this.hitAreas[C];t.lineStyle(1,s).strokeRect(r.x,r.y,r.width,r.height)}return f&&t.restore(),this}}var T1=function(){this.parent.on("pointerdown",C1,this).on("pointerup",S1,this).on("pointermove",eh,this).on("pointerover",eh,this).on("pointerout",function(i,t){eh.call(this,i,null,null,t)},this)},C1=function(i,t,s,f){var C=this.hitAreaManager.getFirst(t,s);if(C!==null){var S=C.data.key;Tn.call(this,"areadown",S,i,t,s,f),C.data.isDown=!0}},S1=function(i,t,s,f){var C=this.hitAreaManager.getFirst(t,s);if(C!==null){var S=C.data,r=S.key;if(Tn.call(this,"areaup",r,i,t,s,f),S.isDown){Tn.call(this,"areaclick",r,i,t,s,f);var y=S.url;y&&window.open(y,"_blank")}S.isDown=!1}},eh=function(i,t,s,f){if(t===null){this.lastHitAreaKey!==null&&(Tn.call(this,"areaout",this.lastHitAreaKey,i,t,s,f),this.hitAreaManager.getByKey(this.lastHitAreaKey).isDown=!1,this.lastHitAreaKey=null);return}var C=this.hitAreaManager.getFirst(t,s),S=C?C.data.key:null;if(this.lastHitAreaKey!==S){if(this.lastHitAreaKey!==null){Tn.call(this,"areaout",this.lastHitAreaKey,i,t,s,f);var r=this.hitAreaManager.getByKey(this.lastHitAreaKey);this.urlTagCursorStyle&&r.data.url&&(this.scene.input.manager.canvas.style.cursor=""),r.isDown=!1}S!==null&&(Tn.call(this,"areaover",S,i,t,s,f),this.urlTagCursorStyle&&C.data.url&&(this.scene.input.manager.canvas.style.cursor=this.urlTagCursorStyle)),this.lastHitAreaKey=S}},Tn=function(i,t,s,f,C,S){this.parent.emit(`${i}-${t}`,s,f,C,S),this.parent.emit(i,t,s,f,C,S)};const P1=$t.NO_NEWLINE,E1=$t.RAW_NEWLINE,ih=$t.WRAPPED_NEWLINE,hf=$t.NO_WRAP,M1=$t.WORD_WRAP,w1=$t.CHAR_WRAP,R1=$t.SPLITREGEXP;var eg=function(i,t,s,f,C,S){f<=0&&(s=hf);var r=[];if(!i||!i.length)return r;for(var y=s===hf,e=s===M1,u=i.split(R1),m,d,l,h=0,n=u.length;h<n;h++){if(m=u[h],l=h===n-1?P1:E1,y){var a=t(m);r.push(S.getLine(m,a,l));continue}if(d=h===0?f-C:f,m.length<=100){var a=t(m);if(a<=d){r.push(S.getLine(m,a,l));continue}}var c,o;e?(c=m.split(" "),o=c[c.length-1]==="",o&&(c.length-=1)):c=m;for(var v,g,p,x="",T=0,E,M=e?t(" "):void 0,P=0,w=c.length;P<w;P++){if(v=c[P],g=t(v),p=P===w-1,e&&(!p||o)&&(v+=" ",g+=M),e&&g>f){x!==""?r.push(S.getLine(x,T,ih)):P===0&&C>0&&r.push(S.getLine("",0,ih)),r.push(...eg(v,t,w1,f,0,S));var R=r.pop();x=R.text,T=R.width,S.freeLine(R),x===" "&&(x="",T=0);continue}E=T+g,E>d?(r.push(S.getLine(x,T,ih)),x=v,T=g,d=f):(x+=v,T=E),p&&r.push(S.getLine(x,T,l))}}return r};const sh=Phaser.Utils.Objects.GetValue,A1=$t.NO_WRAP,O1=$t.NO_NEWLINE;class ig{constructor(t){this.parent=t.parent,this.scene=this.parent.scene,this.context=sh(t,"context",null),this.canvas=this.context.canvas,this.parser=sh(t,"parser",null),this.defaultStyle=sh(t,"style",null),this.autoRound=!0,this.pensPool=t.pensPool,this.linesPool=t.linesPool,this.wrapTextLinesPool=t.wrapTextLinesPool,this.penManager=this.newPenManager(),this._tmpPenManager=null,this.hitAreaManager=new y1,this.lastHitAreaKey=null,this.urlTagCursorStyle=null;var s=this.context;this.getTextWidth=function(f){return s.measureText(f).width}}destroy(){this.parent=void 0,this.scene=void 0,this.context=void 0,this.canvas=void 0,this.parser=void 0,this.defaultStyle=void 0,this.penManager&&(this.penManager.destroy(),this.penManager=void 0),this._tmpPenManager&&(this._tmpPenManager.destroy(),this._tmpPenManager=void 0),this.hitAreaManager&&(this.hitAreaManager.destroy(),this.hitAreaManager=void 0),this.pensPool=void 0,this.linesPool=void 0,this.wrapTextLinesPool=void 0}updatePenManager(t,s,f,C,S){if(S===void 0&&(S=this.penManager),S.clear(),t==="")return S;var r=this.parent.style;if(r.isWrapFitMode){var y=this.parent.padding;f=r.fixedWidth-y.left-y.right}for(var e=this.canvas,u=this.context,m=function(b){return u.measureText(b).width},d=0,l=0,h=r.wrapCallback,n=r.wrapCallbackScope,a=!0,c,o,v,g=this.parser.splitText(t),p,x,T=this.wrapTextLinesPool,E=0,M=g.length;E<M;E++)if(p=this.parser.tagTextToProp(g[E],o),c=p.plainText,o=p.prop,o.img){var P=this.imageManager.getOuterWidth(o.img);f>0&&s!==A1&&f<d+P&&(S.addNewLinePen(),l+=C,d=0),S.addImagePen(d,l,P,Fs(o)),d+=P}else if(c!==""){if(u.save(),v=this.parser.propToContextStyle(this.defaultStyle,o),v.buildFont(),v.syncFont(e,u),v.syncStyle(e,u),!h)x=eg(c,m,s,f,d,T);else{x=h.call(n,c,m,f,d),typeof x=="string"&&(x=x.split(`
`));for(var A,w=0,R=x.length;w<R;w++)A=x[w],typeof A=="string"?x[w]=T.getLine(A,m(A),w<R-1?2:0):a=!1}for(var A,w=0,R=x.length;w<R;w++)A=x[w],S.addTextPen(A.text,d,l,A.width,Fs(o),A.newLineMode),A.newLineMode!==O1?(d=0,l+=C):d+=A.width;a&&T.freeLines(x),x=null,u.restore()}for(var E=0,M=this.lines.length;E<M;E++){var O=this.lines[E],F=O[O.length-1];F&&(F.width+=this.parser.getStrokeThinkness(this.defaultStyle,F.prop))}return S}get startXOffset(){var t=this.defaultStyle;return t.strokeThickness/2+t.xOffset}get startYOffset(){var t=this.defaultStyle;return t.strokeThickness/2+t.metrics.ascent}get lines(){return this.penManager.lines}get desplayLinesCount(){var t=this.penManager.linesCount,s=this.defaultStyle.maxLines;return s>0&&t>s&&(t=s),t}get linesWidth(){return Math.ceil(this.penManager.getMaxLineWidth())}get linesHeight(){var t=this.desplayLinesCount,s=this.defaultStyle.lineHeight*t;return t>0&&(s-=this.defaultStyle.lineSpacing),s}get imageManager(){return this.parent.imageManager}get rtl(){return this.parent.style.rtl}newPenManager(){return new nu({pensPool:this.pensPool,linesPool:this.linesPool,tagToText:this.parser.propToTagText,tagToTextScope:this.parser})}get tmpPenManager(){return this._tmpPenManager===null&&(this._tmpPenManager=this.newPenManager()),this._tmpPenManager}getPlainText(t,s,f){var C;if(t==null)C=this.penManager.plainText;else{var S=this.parser.splitText(t,1);C="";for(var r=0,y=S.length;r<y;r++)C+=S[r]}return(s!=null||f!=null)&&(s==null&&(s=0),f==null&&(f=C.length),C=C.substring(s,f)),C}getPenManager(t,s){if(t===void 0)return this.copyPenManager(s,this.penManager);s===void 0&&(s=this.newPenManager());var f=this.defaultStyle;return this.updatePenManager(t,f.wrapMode,f.wrapWidth,f.lineHeight,s),s}getText(t,s,f,C){if(t==null)return this.penManager.getSliceTagText(s,f,C);var S=this.tmpPenManager,r=this.defaultStyle;return this.updatePenManager(t,r.wrapMode,r.wrapWidth,r.lineHeight,S),S.getSliceTagText(s,f,C)}copyPenManager(t,s){return s===void 0&&(s=this.penManager),s.copy(t)}getTextWidth(t){return t===void 0&&(t=this.penManager),t.getMaxLineWidth()}getLastPen(t){return t===void 0&&(t=this.penManager),t.lastPen}}var b1={setInteractive:T1};Object.assign(ig.prototype,v1,b1);class lf extends ui{freeLine(t){if(t)return this.push(t),this}freeLines(t){if(t)return this.pushMultiple(t),this}getLine(t,s,f){var C=this.pop();return C===null&&(C={}),C.text=t,C.width=s,C.newLineMode=f,C}}const F1=Phaser.Utils.Objects.IsPlainObject,zn=Phaser.Utils.Objects.GetValue;var nh=function(i,t){F1(i)?(t=i,i=t.key):t===void 0&&(t={key:i}),t.hasOwnProperty("key")||(t.key=i);var s=t.key,f=t.frame,C=t.width,S=t.height;if(C===void 0||S===void 0){var r=this.textureManager.getFrame(s,f),y=r?r.cutWidth:0,e=r?r.cutHeight:0;C===void 0&&S===void 0?(C=y,S=e):C===void 0?C=y*(S/e):S===void 0&&(S=e*(C/y))}this.images[i]={key:s,frame:f,width:C,height:S,y:zn(t,"y",0),left:zn(t,"left",0),right:zn(t,"right",0),originX:zn(t,"originX",0),originY:zn(t,"originY",0)}},L1=function(i,t,s,f,C){var S=this.get(i),r=this.textureManager.getFrame(S.key,S.frame),y=S.width,e=S.height;s+=S.left-S.originX*y,f+=S.y-S.originY*e,C&&(s=Math.round(s),f=Math.round(f)),t.drawImage(r.source.image,r.cutX,r.cutY,r.cutWidth,r.cutHeight,s,f,y,e)};class ru{constructor(t){this.textureManager=t.sys.textures,this.images={}}destroy(){this.textureManager=void 0,this.images=void 0}add(t,s){if(typeof t=="string")nh.call(this,t,s);else if(Array.isArray(t))for(var f=t,C=0,S=f.length;C<S;C++)nh.call(this,f[C]);else{var f=t;for(var t in f)nh.call(this,t,f[t])}return this}has(t){return this.images.hasOwnProperty(t)}remove(t){return this.has(t)&&delete this.images[t],this}get(t){return this.has(t)||this.textureManager.exists(t)&&this.add(t),this.images[t]}getOuterWidth(t){var s=this.get(t);return s?s.width+s.left+s.right:0}getFrame(t){var s=this.get(t);return s?this.textureManager.getFrame(s.key,s.frame):void 0}hasTexture(t){return!!this.getFrame(t)}}var D1={draw:L1};Object.assign(ru.prototype,D1);const I1=Phaser.Utils.Objects.IsPlainObject,B1=Phaser.DOM.AddToDOM,uf=Phaser.Display.Canvas.CanvasPool,G1=Phaser.GameObjects.GameObject,pe=Phaser.Utils.Objects.GetValue,N1=Phaser.DOM.RemoveFromDOM,V1=$t.SPLITREGEXP;var Xs=null,rh=null,ah=null;class sg extends tg{constructor(t,s,f,C,S,r,y){if(I1(s)){var e=s;s=pe(e,"x",0),f=pe(e,"y",0),C=pe(e,"text",""),S=pe(e,"style")}if(s===void 0&&(s=0),f===void 0&&(f=0),super(t,r),this.renderer=t.sys.game.renderer,this.setPosition(s,f),this.setOrigin(0,0),this.initPipeline(),this.canvas=uf.create(this),this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this._imageManager=void 0,S){if(S.hasOwnProperty("align")){var u=S.align;delete S.align,S.halign=u}S.hasOwnProperty("stroke")&&!S.hasOwnProperty("strokeThickness")&&(S.strokeThickness=1)}this.style=new su(this,S);var m=pe(S,"images",void 0);m&&this.addImage(m),this.autoRound=!0,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null);var d=pe(S,"sharedPool",!0),l,h,n;d?(Xs||(Xs={},rh=new ui,ah=new lf,this.scene.game.events.once("destroy",function(){Xs=null,rh=null,ah=null})),Xs.hasOwnProperty(r)||(Xs[r]=new ui),l=Xs[r],h=rh,n=ah):(l=new ui,h=new ui,n=new lf),this.canvasText=new ig({parent:this,context:this.context,parser:y,style:this.style,pensPool:l,linesPool:h,wrapTextLinesPool:n}),this.parser=y,this.initRTL(),S&&S.padding&&this.setPadding(S.padding),this.setText(C),this.setUrlTagCursorStyle(pe(S,"urlTagCursorStyle","pointer")),pe(S,"interactive",!1)&&this.setInteractive()}preDestroy(){this.style.rtl&&N1(this.canvas),this.canvasText.destroy(),this.canvasText=void 0,this._imageManager&&(this._imageManager.destroy(),this._imageManager=void 0),uf.remove(this.canvas),this.texture.destroy()}set text(t){this.setText(t)}get text(){return this._text}initRTL(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",B1(this.canvas,this.scene.sys.canvas),this.originX=1)}setText(t){return t==null?t="":Array.isArray(t)?t=t.join(`
`):t=t.toString(),t===this._text?this:(this._text=t,this.updateText(),this)}appendText(t){return t==null?this:(Array.isArray(t)&&(t=t.join(`
`)),this.setText(this.text+t.toString()),this)}setPadding(t,s,f,C){if(typeof t=="object"){var S=t,r=pe(S,"x",null);r!==null?(t=r,f=r):(t=pe(S,"left",0),f=pe(S,"right",t));var y=pe(S,"y",null);y!==null?(s=y,C=y):(s=pe(S,"top",0),C=pe(S,"bottom",s))}else t===void 0&&(t=0),s===void 0&&(s=t),f===void 0&&(f=t),C===void 0&&(C=s);return this.padding.left=t,this.padding.top=s,this.padding.right=f,this.padding.bottom=C,this.updateText(!1)}updateText(t){t===void 0&&(t=!0);var s=this.canvasText,f=this.style;t&&s.updatePenManager(this._text,f.wrapMode,f.wrapWidth,f.lineHeight);var C=this.padding,S,r,y=Math.ceil(s.linesWidth);f.fixedWidth===0?(this.width=y+C.left+C.right,S=y):(this.width=f.fixedWidth,S=this.width-C.left-C.right,S<y&&(S=y)),f.fixedHeight===0?(this.height=s.linesHeight+C.top+C.bottom,r=s.linesHeight):(this.height=f.fixedHeight,r=this.height-C.top-C.bottom,r<s.linesHeight&&(r=s.linesHeight));var e=this.width,u=this.height;this.updateDisplayOrigin();var m=f.resolution;e*=m,u*=m,e=Math.max(Math.ceil(e),1),u=Math.max(Math.ceil(u),1);var d=this.canvas,l=this.context;d.width!==e||d.height!==u?(d.width=e,d.height=u,this.frame.setSize(e,u)):l.clearRect(0,0,e,u),l.save(),l.scale(m,m);var h=this.style.rtl?C.right:C.left,n=C.top;s.draw(h,n,S,r),l.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(d,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var a=this.input;return a&&!a.customHitArea&&(a.hitArea.width=this.width,a.hitArea.height=this.height),this}toJSON(){var t=Components.ToJSON(this),s={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),resolution:this.resolution,padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=s,t}setInteractive(t,s,f){var C=!!this.input;return G1.prototype.setInteractive.call(this,t,s,f),C||this.canvasText.setInteractive(),this}setUrlTagCursorStyle(t){return this.urlTagCursorStyle=t,this}get urlTagCursorStyle(){return this.canvasText.urlTagCursorStyle}set urlTagCursorStyle(t){this.canvasText.urlTagCursorStyle=t}getWrappedText(t,s,f){return t=this.canvasText.getText(t,s,f,!0),t.split(V1)}getPlainText(t,s,f){return this.canvasText.getPlainText(t,s,f)}getText(t,s,f,C){return C===void 0&&(C=!1),this.canvasText.getText(t,s,f,C)}getSubString(t,s,f){return this.getText(t,s,f)}copyPenManager(t){return this.canvasText.copyPenManager(t)}getPenManager(t,s){return this.canvasText.getPenManager(t,s)}setSize(t,s){return this.setFixedSize(t,s)}resize(t,s){return this.setFixedSize(t,s)}get imageManager(){return this._imageManager||(this._imageManager=new ru(this.scene)),this._imageManager}addImage(t,s){return this.imageManager.add(t,s),this}drawAreaBounds(t,s){return this.canvasText.hitAreaManager.drawBounds(t,s,this),this}generateTexture(t,s,f,C,S){var r=this.canvas;return C===void 0?C=r.width:C*=this.resolution,S===void 0?S=r.height:S*=this.resolution,Qp(this.scene,r,t,s,f,C,S),this}}var re=function(i,t){return t===void 0?`\\[${i}\\]`:`\\[${i}=(${t})\\]`},ce=function(i){return`\\[/${i}\\]`};const au="[-.0-9]+",ou="[a-z]+|#[0-9abcdef]+",no="[^\\]]+",ng="esc",rg=re(ng),ag=ce(ng),og="raw",hg=re(og),lg=ce(og),ug="b",dg=re(ug),fg=ce(ug),cg="i",vg=re(cg),pg=ce(cg),gg="weight",mg=re(gg,au),xg=ce(gg),yg="size",Tg=re(yg,au),Cg=ce(yg),Sg="color",Pg=re(Sg,ou),Eg=ce(Sg),hu="u",Mg=re(hu),wg=re(hu,ou),Rg=ce(hu),Ag="shadow",Og=re(Ag),bg=ce(Ag),lu="stroke",Fg=re(lu),Lg=re(lu,ou),Dg=ce(lu),Ig="y",Bg=re(Ig,au),Gg=ce(Ig),Ng="img",Vg=re(Ng,no),zg=ce(Ng),Ug="area",Yg=re(Ug,no),kg=ce(Ug),Xg="url",Wg=re(Xg,no),Hg=ce(Xg),$g="align",Kg=re($g,no),jg=ce($g),Zg=new RegExp(rg,"i"),Al=new RegExp(ag,"i"),Jg=new RegExp(hg,"i"),Ol=new RegExp(lg,"i"),z1=new RegExp(dg,"i"),U1=new RegExp(fg,"i"),Y1=new RegExp(vg,"i"),k1=new RegExp(pg,"i"),df=new RegExp(mg,"i"),X1=new RegExp(xg,"i"),ff=new RegExp(Tg,"i"),W1=new RegExp(Cg,"i"),cf=new RegExp(Pg,"i"),H1=new RegExp(Eg,"i"),$1=new RegExp(Mg,"i"),vf=new RegExp(wg,"i"),K1=new RegExp(Rg,"i"),j1=new RegExp(Og,"i"),Z1=new RegExp(bg,"i"),J1=new RegExp(Fg,"i"),pf=new RegExp(Lg,"i"),Q1=new RegExp(Dg,"i"),gf=new RegExp(Bg,"i"),q1=new RegExp(Gg,"i"),mf=new RegExp(Vg,"i"),_1=new RegExp(zg,"i"),xf=new RegExp(Yg,"i"),tC=new RegExp(kg,"i"),yf=new RegExp(Wg,"i"),eC=new RegExp(Hg,"i"),Tf=new RegExp(Kg,"i"),iC=new RegExp(jg,"i"),Cf=new RegExp([hg,lg,rg,ag,dg,fg,vg,pg,mg,xg,Tg,Cg,Pg,Eg,Mg,wg,Rg,Og,bg,Fg,Lg,Dg,Bg,Gg,Vg,zg,Yg,kg,Wg,Hg,Kg,jg].join("|"),"ig");var sC=function(i,t){for(var s=[],f=0,C=!1,S=!1;;){var r=Cf.exec(i);if(!r)break;var y=r[0];if(S)if(Al.test(y))S=!1;else continue;else if(C)if(Ol.test(y))C=!1;else continue;else Zg.test(y)?S=!0:Jg.test(y)&&(C=!0);var e=Cf.lastIndex,u=e-y.length;if(f<u){var m=i.substring(f,u);s.push(m)}t===void 0&&s.push(y),f=e}var d=i.length;return f<d&&s.push(i.substring(f,d)),s};const jt=!1,Jt=!0;var nC={plainText:null,prevProp:null},rC=function(i,t){t==null&&(t={});var s="";if(t.img&&xt(t,jt,"img"),t.esc)Al.test(i)?xt(t,jt,"esc"):s=i;else if(t.raw)Ol.test(i)?xt(t,jt,"raw"):s=i;else if(Zg.test(i))xt(t,Jt,"esc",!0);else if(Al.test(i))xt(t,jt,"esc");else if(Jg.test(i))xt(t,Jt,"raw",!0);else if(Ol.test(i))xt(t,jt,"raw");else if(z1.test(i))xt(t,Jt,"b",!0);else if(U1.test(i))xt(t,jt,"b");else if(Y1.test(i))xt(t,Jt,"i",!0);else if(k1.test(i))xt(t,jt,"i");else if(df.test(i)){var f=i.match(df);xt(t,Jt,"weight",f[1])}else if(X1.test(i))xt(t,jt,"weight");else if(ff.test(i)){var f=i.match(ff);xt(t,Jt,"size",`${f[1]}px`)}else if(W1.test(i))xt(t,jt,"size");else if(cf.test(i)){var f=i.match(cf);xt(t,Jt,"color",f[1])}else if(H1.test(i))xt(t,jt,"color");else if($1.test(i))xt(t,Jt,"u",!0);else if(vf.test(i)){var f=i.match(vf);xt(t,Jt,"u",f[1])}else if(K1.test(i))xt(t,jt,"u");else if(j1.test(i))xt(t,Jt,"shadow",!0);else if(Z1.test(i))xt(t,jt,"shadow");else if(J1.test(i))xt(t,Jt,"stroke",!0);else if(pf.test(i)){var f=i.match(pf);xt(t,Jt,"stroke",f[1])}else if(Q1.test(i))xt(t,jt,"stroke");else if(gf.test(i)){var f=i.match(gf);xt(t,Jt,"y",parseFloat(f[1]))}else if(q1.test(i))xt(t,jt,"y");else if(mf.test(i)){var f=i.match(mf);xt(t,Jt,"img",f[1])}else if(_1.test(i))xt(t,jt,"img");else if(xf.test(i)){var f=i.match(xf);xt(t,Jt,"area",f[1])}else if(tC.test(i))xt(t,jt,"area");else if(yf.test(i)){var f=i.match(yf);xt(t,Jt,"url",f[1])}else if(eC.test(i))xt(t,jt,"url");else if(Tf.test(i)){var f=i.match(Tf);xt(t,Jt,"align",f[1])}else iC.test(i)?xt(t,jt,"align"):s=i;var C=nC;return C.plainText=s,C.prop=t,C},xt=function(i,t,s,f){return t===Jt?i[s]=f:i.hasOwnProperty(s)&&delete i[s],i},aC=function(i,t){var s=hC;if(t.hasOwnProperty("img"))s.image=t.img;else{if(s.image=null,t.hasOwnProperty("family")?s.fontFamily=t.family:s.fontFamily=i.fontFamily,t.hasOwnProperty("size")){var f=t.size;typeof f=="number"&&(f=`${f}px`),s.fontSize=f}else s.fontSize=i.fontSize;s.fontStyle=oC(t),t.hasOwnProperty("color")?s.color=t.color:s.color=i.color,t.hasOwnProperty("stroke")?t.stroke===!0?(s.stroke=i.stroke,s.strokeThickness=i.strokeThickness):(s.stroke=t.stroke,s.strokeThickness=i.strokeThickness):(s.stroke=i.stroke,s.strokeThickness=0)}return t.hasOwnProperty("shadow")?t.shadow===!0?(s.shadowColor=i.shadowColor,s.shadowOffsetX=i.shadowOffsetX,s.shadowOffsetY=i.shadowOffsetY,s.shadowBlur=i.shadowBlur,s.shadowStroke=!0,s.shadowFill=!0):(s.shadowColor=t.shadow,s.shadowOffsetX=i.shadowOffsetX,s.shadowOffsetY=i.shadowOffsetY,s.shadowBlur=i.shadowBlur,s.shadowStroke=!0,s.shadowFill=!0):(s.shadowColor="#000",s.shadowOffsetX=0,s.shadowOffsetY=0,s.shadowBlur=0,s.shadowStroke=!1,s.shadowFill=!1),t.hasOwnProperty("u")?t.u===!0?(s.underlineColor=i.underlineColor,s.underlineThickness=i.underlineThickness,s.underlineOffset=i.underlineOffset):(s.underlineColor=t.u,s.underlineThickness=i.underlineThickness,s.underlineOffset=i.underlineOffset):(s.underlineColor="#000",s.underlineThickness=0,s.underlineOffset=0),s},oC=function(i){var t=i.b,s=i.weight,f=i.i;return t||s||f?f?t?"bold italic":s?`${s} italic`:"italic":t?"bold":s.toString():""},hC=new su,lC=function(i,t,s){s==null&&(s=uC);var f=[];for(var C in s)t.hasOwnProperty(C)||f.push(`[/${C}]`);for(var C in t){var S=t[C];if(s[C]!==S)switch(C){case"size":f.push(`[size=${S.replace("px","")}]`);break;case"color":case"weight":case"stroke":case"y":case"img":case"area":case"url":case"align":f.push(`[${C}=${S}]`);break;case"u":S===!0?f.push("[u]"):f.push(`[u=${S}]`);break;default:f.push(`[${C}]`);break}}return f.push(i),f.join("")},uC={};let Qg=class{getStrokeThinkness(t,s){var f;return s.hasOwnProperty("stroke")?f=t.strokeThickness:f=0,f}};var dC={splitText:sC,tagTextToProp:rC,propToContextStyle:aC,propToTagText:lC};Object.assign(Qg.prototype,dC);class ro extends sg{constructor(t,s,f,C,S){var r=new Qg(S);super(t,s,f,C,S,"rexBBCodeText",r)}}st.register("BBCodeText",function(i,t,s,f){var C=new ro(this.scene,i,t,s,f);return this.scene.add.existing(C),C});it(window,"RexPlugins.UI.BBCodeText",ro);var fC={plainText:null,prevProp:null},cC=new su;let vC=class{constructor(t){t===void 0&&(t={}),this.tags=t}addTag(t,s){this.tags[t]=s}getTag(t){return this.tags[t]}splitText(t,s){for(var f=[],C=0;;){var S=oh.exec(t);if(!S)break;var r=S[0],y=oh.lastIndex-r.length;if(C<y&&f.push(t.substring(C,y)),s===void 0)f.push(r);else if(s===1){if(Pf.test(r)){var e=r.match(Ef);f.push(e[2])}else if(Mf.test(r)){var e=r.match(wf);f.push(e[2])}}C=oh.lastIndex}var u=t.length;return C<u&&f.push(t.substring(C,u)),f}tagTextToProp(t,s){var f,C;if(Pf.test(t)){var S=t.match(Ef);if(S!=null){var r=S[1],y=this.tags;y.hasOwnProperty(r)?C=y[r]:C={},C._class=r,f=S[2]}}else if(Mf.test(t)){var S=t.match(wf);if(S!=null){var e=S[1];C=pC(e),C._style=e,f=S[2]}}f==null&&(f=t),C==null&&(C={});var u=fC;return u.plainText=f,u.prop=C,u}propToContextStyle(t,s){var f=cC;if(s.hasOwnProperty("img"))f.image=s.img;else{if(f.image=null,s.hasOwnProperty("family")||s.hasOwnProperty("fontFamily")||s.hasOwnProperty("font-family")){var C=s.hasOwnProperty("family")?s.family:s.hasOwnProperty("fontFamily")?s.fontFamily:s["font-family"];f.fontFamily=C}else f.fontFamily=t.fontFamily;if(s.hasOwnProperty("size")||s.hasOwnProperty("fontSize")||s.hasOwnProperty("font-size")){var S=s.hasOwnProperty("size")?s.size:s.hasOwnProperty("fontSize")?s.fontSize:s["font-size"];typeof S=="number"&&(S=`${S}px`),f.fontSize=S}else f.fontSize=t.fontSize;if(s.hasOwnProperty("style")||s.hasOwnProperty("fontStyle")||s.hasOwnProperty("font-style")){var r=s.hasOwnProperty("style")?s.style:s.hasOwnProperty("fontStyle")?s.fontStyle:s["font-style"];f.fontStyle=r}else f.fontStyle=t.fontStyle;if(s.hasOwnProperty("color")||s.hasOwnProperty("font-color")){var y=s.hasOwnProperty("color")?s.color:s["font-color"];f.color=y}else f.color=t.color;if(s.hasOwnProperty("stroke")){var e=s.stroke;f.stroke=e.hasOwnProperty("color")?e.color:t.stroke,f.strokeThickness=e.hasOwnProperty("thickness")?e.thickness:t.strokeThickness}else f.stroke=t.stroke,f.strokeThickness=t.strokeThickness}if(s.hasOwnProperty("shadow")){var u=s.shadow;f.shadowColor=u.hasOwnProperty("color")?u.color:t.shadowColor,f.shadowOffsetX=u.hasOwnProperty("offsetX")?u.offsetX:t.shadowOffsetX,f.shadowOffsetY=u.hasOwnProperty("offsetY")?u.offsetY:t.shadowOffsetY,f.shadowBlur=u.hasOwnProperty("blur")?u.blur:t.shadowBlur,f.shadowStroke=!0,f.shadowFill=!0}else f.shadowColor=t.shadowColor,f.shadowOffsetX=t.shadowOffsetX,f.shadowOffsetY=t.shadowOffsetY,f.shadowBlur=t.shadowBlur,f.shadowStroke=t.shadowStroke,f.shadowFill=t.shadowFill;if(s.hasOwnProperty("u")||s.hasOwnProperty("underline")){var m=s.hasOwnProperty("u")?s.u:s.underline;f.underlineColor=m.hasOwnProperty("color")?m.color:t.underlineColor,f.underlineThickness=m.hasOwnProperty("thickness")?m.thickness:t.underlineThickness,f.underlineOffset=m.hasOwnProperty("offset")?m.offset:t.underlineOffset}else f.underlineColor=t.underlineColor,f.underlineThickness=t.underlineThickness,f.underlineOffset=t.underlineOffset;return f}getStrokeThinkness(t,s){var f;if(s.hasOwnProperty("stroke")){var C=s.stroke;f=C.hasOwnProperty("thickness")?C.thickness:t.strokeThickness}else f=t.strokeThickness;return f}propToTagText(t,s,f){return s.hasOwnProperty("_class")?t===""&&this.isTextTag(s._class)?"":`<class='${s._class}'>${t}</class>`:s.hasOwnProperty("_style")?`<style='${s._style}'>${t}</style>`:t}destroy(){this.tags=void 0}isTextTag(t){var s=this.tags[t];return s?s.img==null:!1}};var pC=function(i){i=i.split(";");for(var t={},s,f,C,S=0,r=i.length;S<r;S++)if(s=i[S].split(":"),f=s[0],C=s[1],!(Sf(f)||Sf(C))){switch(f){case"stroke":var y=C.split(" "),m=y.length;C={},m>=1&&(C.color=y[0]),m>=2&&(C.thickness=parseInt(y[1].replace("px","")));break;case"shadow":var e=C.split(" "),m=e.length;C={},m>=1&&(C.color=e[0]),m>=2&&(C.offsetX=parseInt(e[1].replace("px",""))),m>=3&&(C.offsetY=parseInt(e[2].replace("px",""))),m>=4&&(C.blur=parseInt(e[3].replace("px","")));break;case"u":case"underline":var u=C.split(" "),m=u.length;C={},m>=1&&(C.color=u[0]),m>=2&&(C.thickness=parseInt(u[1].replace("px",""))),m>=3&&(C.offset=parseInt(u[2].replace("px","")));break;case"y":C=parseFloat(C);break}t[f]=C}return t},Sf=function(i){return i=i.replace(gC,""),i.length===0},oh=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>|<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/g,Pf=/<\s*class=/i,Ef=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>/,Mf=/<\s*style=/i,wf=/<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/,gC=/^\s+|\s+$/;const mC=Phaser.Utils.Objects.GetValue;class qg extends sg{constructor(t,s,f,C,S){var r=mC(S,"tags",void 0),y=new vC(r);super(t,s,f,C,S,"rexTagText",y)}addTag(t,s){return this.parser.addTag(t,s),this.updateText(!0)}addTags(t){for(var s in t)this.parser.addTag(s,t[s]);return this.updateText(!0)}getTag(t){return this.parser.getTag(t)}preDestroy(){super.preDestroy(),this.parser.destroy(),this.parser=void 0}}st.register("tagText",function(i,t,s,f){var C=new qg(this.scene,i,t,s,f);return this.scene.add.existing(C),C});it(window,"RexPlugins.UI.TagText",qg);const Zr=Phaser.Utils.Objects.GetValue;var Ba=function(i,t){return t===void 0?i:i[t]},Ji=function(i,t,s){i===void 0&&(i={}),t===void 0&&(t=0);var f=typeof t;return f==="string"?i[t]=s:f==="number"?(i.left=t,i.right=t,i.top=t,i.bottom=t):(i.left=Zr(t,"left",0),i.right=Zr(t,"right",0),i.top=Zr(t,"top",0),i.bottom=Zr(t,"bottom",0)),i};let uu=class{constructor(t,s){this.setParent(t),this.type=s,this.renderable=!1,this.reset().setActive()}destroy(){this.parent.removeChild(this)}setParent(t){return this.parent=t,this}get scene(){return this.parent.scene}get canvas(){return this.parent?this.parent.canvas:null}get context(){return this.parent?this.parent.context:null}setDirty(t){return t&&this.parent&&(this.parent.dirty=!0),this}get active(){return this._active}set active(t){this.setDirty(this._active!=t),this._active=t}setActive(t){return t===void 0&&(t=!0),this.active=t,this}modifyPorperties(t){return this}onFree(){this.reset().setParent()}reset(){return this}render(){}contains(t,s){return!1}};Object.assign(uu.prototype,to);const xC={renderContent(){},render(){if(!this.willRender)return this;var i=this.context;if(i.save(),i.globalAlpha=this.alpha,this.toLocalPosition){var t=this.drawX,s=this.drawY;this.autoRound&&(t=Math.round(t),s=Math.round(s)),i.translate(t,s),i.scale(this.scaleX,this.scaleY),i.rotate(this.rotation)}return this.drawBelowCallback&&this.drawBelowCallback(this),this.renderContent(),this.drawAboveCallback&&this.drawAboveCallback(this),i.restore(),this}},yC=Phaser.Math.RotateAround;var TC=function(i,t,s,f){return f===void 0?f={}:f===!0&&(hh===void 0&&(hh={}),f=hh),f.x=(i-s.drawX)/s.scaleX,f.y=(t-s.drawY)/s.scaleY,s.rotation!==0&&yC(f,0,0,-s.rotation),f},hh;const CC=Phaser.Geom.Rectangle;var SC=function(i,t){if(this.width===0||this.height===0)return!1;var s=TC(i,t,this,!0);return PC(this).contains(s.x,s.y)},PC=function(i){Jr===void 0&&(Jr=new CC);var t=i.drawTLX,s=i.drawTLY;return Jr.setTo(t,s,i.drawTRX-t,i.drawBLY-s),Jr},Jr;const EC=Phaser.Math.RotateAround;var _g=function(i,t,s,f){return f===void 0?f={}:f===!0&&(lh===void 0&&(lh={}),f=lh),f.x=t,f.y=s,i.rotation!==0&&EC(f,0,0,i.rotation),f.x=f.x*i.scaleX+i.drawX,f.y=f.y*i.scaleY+i.drawY,f},lh;const Rf=Phaser.GameObjects.Components.TransformMatrix;var MC=function(i,t,s,f){f===void 0?f={}:f===!0&&(f=wC);var C=t-i.width*i.originX,S=s-i.height*i.originY;return Un===void 0&&(Un=new Rf,Af=new Rf),i.parentContainer?i.getWorldTransformMatrix(Un,Af):Un.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY),Un.transformPoint(C,S,f),f},Un,Af,wC={},RC=function(i,t,s,f,C){var S=_g(t,s,f,!0),r=MC(i,S.x,S.y,C);return r},t0=function(i,t,s,f,C){typeof s!="number"&&(C=s,s=0,f=0);var S=t.drawCenterX+s,r=t.drawCenterY+f;return RC(i,t,S,r,C)},AC=function(i,t,s){return t0(this.parent,this,i,t,s)},e0={contains:SC,getWorldPosition:AC};Object.assign(e0,xC);const OC=Phaser.Math.DegToRad,bC=Phaser.Math.RadToDeg,Qr=Phaser.Utils.Objects.GetValue;class Ls extends uu{constructor(t,s){super(t,s),this.renderable=!0,this.toLocalPosition=!0,this.originX=0,this.offsetX=0,this.offsetY=0}get visible(){return this._visible}set visible(t){this.setDirty(this._visible!=t),this._visible=t}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}get alpha(){return this._alpha}set alpha(t){this.setDirty(this._alpha!=t),this._alpha=t}setAlpha(t){return this.alpha=t,this}get x(){return this._x}set x(t){this.setDirty(this._x!=t),this._x=t}setX(t){return this.x=t,this}get y(){return this._y}set y(t){this.setDirty(this._y!=t),this._y=t}setY(t){return this.y=t,this}setPosition(t,s){return this.x=t,this.y=s,this}setInitialPosition(t,s){return this.x0=t,this.y0=s,this}get rotation(){return this._rotation}set rotation(t){this.setDirty(this._rotation!=t),this._rotation=t}setRotation(t){return this.rotation=t,this}get angle(){return bC(this._rotation)}set angle(t){this.rotation=OC(t)}setAngle(t){return this.angle=t,this}get scaleX(){return this._scaleX}set scaleX(t){this.setDirty(this._scaleX!==t),this._scaleX=t}setScaleX(t){return this.scaleX=t,this}get width(){return 0}set width(t){}setWidth(t,s){return s===void 0&&(s=!1),this.width=t,s&&(this.scaleY=this.scaleX),this}get leftSpace(){return this._leftSpace}set leftSpace(t){this.setDirty(this._leftSpace!==t),this._leftSpace=t}setLeftSpace(t){return this.leftSpace=t,this}get rightSpace(){return this._rightSpace}set rightSpace(t){this.setDirty(this._rightSpace!==t),this._rightSpace=t}setRightSpace(t){return this.rightSpace=t,this}get outerWidth(){return this.width+this.leftSpace+this.rightSpace}get scaleY(){return this._scaleY}set scaleY(t){this.setDirty(this._scaleY!==t),this._scaleY=t}setScaleY(t){return this.scaleY=t,this}get height(){return 0}set height(t){}setHeight(t,s){return s===void 0&&(s=!1),this.height=t,s&&(this.scaleX=this.scaleY),this}setScale(t,s){return s===void 0&&(s=t),this.scaleX=t,this.scaleY=s,this}setOrigin(t){return this.originX=t,this}setAlign(t){return this.align=t,this}modifyPorperties(t){if(!t)return this;t.hasOwnProperty("x")&&this.setX(t.x),t.hasOwnProperty("y")&&this.setY(t.y),t.hasOwnProperty("rotation")?this.setRotation(t.rotation):t.hasOwnProperty("angle")&&this.setAngle(t.angle),t.hasOwnProperty("alpha")&&this.setAlpha(t.alpha);var s=Qr(t,"width",void 0),f=Qr(t,"height",void 0),C=Qr(t,"scaleX",void 0),S=Qr(t,"scaleY",void 0);return s!==void 0?f===void 0&&S===void 0?this.setWidth(s,!0):this.setWidth(s):C!==void 0&&this.setScaleX(C),f!==void 0?s===void 0&&C===void 0?this.setHeight(f,!0):this.setHeight(f):S!==void 0&&this.setScaleY(S),t.hasOwnProperty("leftSpace")&&this.setLeftSpace(t.leftSpace),t.hasOwnProperty("rightSpace")&&this.setRightSpace(t.rightSpace),t.hasOwnProperty("align")&&this.setAlign(t.align),this}setDrawBelowCallback(t){return this.drawBelowCallback=t,this}setDrawAboveCallback(t){return this.drawAboveCallback=t,this}reset(){return this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setLeftSpace(0).setRightSpace(0).setOrigin(0).setAlign().setDrawBelowCallback().setDrawAboveCallback(),this}get willRender(){return this.visible&&this.alpha>0}get drawX(){return this.x+this.leftSpace+this.offsetX-this.originX*this.width}get drawY(){return this.y+this.offsetY}get drawTLX(){return 0}get drawTLY(){return 0}get drawBLX(){return 0}get drawBLY(){return 0}get drawTRX(){return 0}get drawTRY(){return 0}get drawBRX(){return 0}get drawBRY(){return 0}get drawCenterX(){return(this.drawTRX+this.drawTLX)/2}get drawCenterY(){return(this.drawBLY+this.drawTLY)/2}}Object.assign(Ls.prototype,e0);var ji=function(i,t,s){return t.hasOwnProperty(i)?t[i]:s[i]};const gs=Phaser.Utils.Objects.GetValue;class FC extends Ls{constructor(t,s){super(t,"background"),this.setColor(gs(s,"color",null),gs(s,"color2",null),gs(s,"horizontalGradient",!0)),this.setStroke(gs(s,"stroke",null),gs(s,"strokeThickness",2)),this.setCornerRadius(gs(s,"cornerRadius",0),gs(s,"cornerIteration",null))}set color(t){t=gt(t,this.canvas,this.context),this.setDirty(this._color!=t),this._color=t}get color(){return this._color}set color2(t){t=gt(t,this.canvas,this.context),this.setDirty(this._color2!=t),this._color2=t}get color2(){return this._color2}set horizontalGradient(t){this.setDirty(this._horizontalGradient!=t),this._horizontalGradient=t}get horizontalGradient(){return this._horizontalGradient}setColor(t,s,f){return f===void 0&&(f=!0),this.color=t,this.color2=s,this.horizontalGradient=f,this}set stroke(t){t=gt(t,this.canvas,this.context),this.setDirty(this._stroke!=t),this._stroke=t}get stroke(){return this._stroke}set strokeThickness(t){this.setDirty(this._strokeThickness!=t),this._strokeThickness=t}get strokeThickness(){return this._strokeThickness}setStroke(t,s){return t!=null&&s===void 0&&(s=2),this.stroke=t,this.strokeThickness=s,this}set cornerRadius(t){this.setDirty(this._cornerRadius!=t),this._cornerRadius=t}get cornerRadius(){return this._cornerRadius}set cornerIteration(t){this.setDirty(this._cornerIteration!=t),this._cornerIteration=t}get cornerIteration(){return this._cornerIteration}modifyStyle(t){return t.hasOwnProperty("color")&&this.setColor(t.color,ji("color2",t,this),ji("horizontalGradient",t,this)),t.hasOwnProperty("stroke")&&this.setStroke(t.stroke,ji("strokeThickness",t,this)),t.hasOwnProperty("cornerRadius")&&this.setCornerRadius(t.cornerRadius,ji("cornerIteration",t,this)),this}modifyPorperties(t){return super.modifyPorperties(t),this.modifyStyle(t),this}setCornerRadius(t,s){return this.cornerRadius=t,this.cornerIteration=s,this}renderContent(){iu(this.parent,this.color,this.stroke,this.strokeThickness,this.cornerRadius,this.color2,this.horizontalGradient,this.cornerIteration)}}const Ni=Phaser.Utils.Objects.GetValue;class LC extends Ls{constructor(t,s){super(t,"innerbounds"),this.setColor(Ni(s,"color",null),Ni(s,"color2",null),Ni(s,"horizontalGradient",!0)),this.setStroke(Ni(s,"stroke",null),Ni(s,"strokeThickness",2))}set color(t){t=gt(t,this.canvas,this.context),this.setDirty(this._color!=t),this._color=t}get color(){return this._color}set color2(t){t=gt(t,this.canvas,this.context),this.setDirty(this._color2!=t),this._color2=t}get color2(){return this._color2}set horizontalGradient(t){this.setDirty(this._horizontalGradient!=t),this._horizontalGradient=t}get horizontalGradient(){return this._horizontalGradient}setColor(t,s,f){return f===void 0&&(f=!0),this.color=t,this.color2=s,this.horizontalGradient=f,this}set stroke(t){t=gt(t,this.canvas,this.context),this.setDirty(this._stroke!=t),this._stroke=t}get stroke(){return this._stroke}set strokeThickness(t){this.setDirty(this._strokeThickness!=t),this._strokeThickness=t}get strokeThickness(){return this._strokeThickness}setStroke(t,s){return t!=null&&s===void 0&&(s=2),this.stroke=t,this.strokeThickness=s,this}modifyPorperties(t){super.modifyPorperties(t),t.hasOwnProperty("color")&&this.setColor(t.color,Ni(t,"color2",null),Ni(t,"horizontalGradient",!0)),t.hasOwnProperty("stroke")&&this.setStroke(t.stroke,Ni(t,"strokeThickness",2))}renderContent(){var t=this.parent.padding,s=t.left,f=t.top,C=this.parent.width-t.left-t.right,S=this.parent.height-t.top-t.bottom,r=this.context;if(this.color!=null){var y;if(this.color2!=null){var e;this.horizontalGradient?e=r.createLinearGradient(0,0,C,0):e=r.createLinearGradient(0,0,0,S),e.addColorStop(0,this.color),e.addColorStop(1,this.color2),y=e}else y=this.color;r.fillStyle=y,r.fillRect(s,f,C,S)}this.stroke!=null&&this.strokeThickness>0&&(r.strokeStyle=this.stroke,r.lineWidth=this.strokeThickness,r.strokeRect(s,f,C,S))}}const Yt=Phaser.Utils.Objects.GetValue;class ao{constructor(t,s){this.parent=t,this.set(s)}toJSON(){return{bold:this.bold,italic:this.italic,fontSize:this.fontSize,fontFamily:this.fontFamily,color:this.color,stroke:this.stroke,strokeThickness:this.strokeThickness,shaodwColor:this.shadowColor,shadowBlur:this.shadowBlur,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,offsetX:this.offsetX,offsetY:this.offsetY,leftSpace:this.leftSpace,rightSpace:this.rightSpace,backgroundHeight:this.backgroundHeight,backgroundBottomY:this.backgroundBottomY,align:this.align}}set(t){return this.setBold(Yt(t,"bold",!1)),this.setItalic(Yt(t,"italic",!1)),this.setFontSize(Yt(t,"fontSize","16px")),this.setFontFamily(Yt(t,"fontFamily","Courier")),this.setColor(Yt(t,"color","#fff")),this.setStrokeStyle(Yt(t,"stroke",null),Yt(t,"strokeThickness",0)),this.setShadow(Yt(t,"shadowColor",null),Yt(t,"shadowOffsetX",0),Yt(t,"shadowOffsetY",0),Yt(t,"shadowBlur",0)),this.setOffset(Yt(t,"offsetX",0),Yt(t,"offsetY",0)),this.setSpace(Yt(t,"leftSpace",0),Yt(t,"rightSpace",0)),this.setAlign(Yt(t,"align",void 0)),this.setBackgroundColor(Yt(t,"backgroundColor",null)),this.setBackgroundHeight(Yt(t,"backgroundHeight",void 0)),this.setBackgroundBottomY(Yt(t,"backgroundBottomY",void 0)),this}modify(t){return t.hasOwnProperty("bold")&&this.setBold(t.bold),t.hasOwnProperty("italic")&&this.setItalic(t.italic),t.hasOwnProperty("fontSize")&&this.setFontSize(t.fontSize),t.hasOwnProperty("fontFamily")&&this.setFontFamily(t.fontFamily),t.hasOwnProperty("color")&&this.setColor(t.color),(t.hasOwnProperty("stroke")||t.hasOwnProperty("strokeThickness"))&&this.setStrokeStyle(ji("stroke",t,this),ji("strokeThickness",t,this)),t.hasOwnProperty("shadowColor")&&this.setShadowColor(t.shadowColor),(t.hasOwnProperty("shadowOffsetX")||t.hasOwnProperty("shadowOffsetY"))&&this.setShadowOffset(ji("shadowOffsetX",t,this),ji("shadowOffsetY",t,this)),t.hasOwnProperty("shadowBlur")&&this.setShadowBlur(t.shaodwBlur),t.hasOwnProperty("offsetX")&&this.setOffsetX(t.offsetX),t.hasOwnProperty("offsetY")&&this.setOffsetY(t.offsetY),t.hasOwnProperty("leftSpace")&&this.setLeftSpace(t.leftSpace),t.hasOwnProperty("rightSpace")&&this.setRightSpace(t.rightSpace),t.hasOwnProperty("align")&&this.setAlign(t.align),t.hasOwnProperty("backgroundColor")&&this.setBackgroundColor(t.backgroundColor),t.hasOwnProperty("backgroundHeight")&&this.setBackgroundHeight(t.backgroundHeight),t.hasOwnProperty("backgroundBottomY")&&this.setBackgroundBottomY(t.backgroundBottomY),this}setUpdateTextFlag(){return this.parent&&(this.parent.updateTextFlag=!0),this}clone(){return new ao(null,this.toJSON())}copyFrom(t){return this.set(t.toJSON()),this}copyTo(t){return t.set(this.toJSON()),this}setBold(t){return t===void 0&&(t=!0),this.bold=t,this.setUpdateTextFlag(),this}setItalic(t){return t===void 0&&(t=!0),this.italic=t,this.setUpdateTextFlag(),this}get fontStyle(){return this.bold&&this.italic?"bold italic":this.bold?"bold":this.italic?"italic":""}setFontSize(t){return typeof t=="number"&&(t=`${t}px`),this.fontSize=t,this.setUpdateTextFlag(),this}setFontFamily(t){return this.fontFamily=t,this.setUpdateTextFlag(),this}get font(){return`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`}setColor(t){return this.color=gt(t),this}get hasFill(){return this.color!=null}setStrokeStyle(t,s){return this.stroke=gt(t),s!==void 0&&(this.strokeThickness=s),this}setStrokeThickness(t){return this.strokeThickness=t,this}get hasStroke(){return this.stroke!=null&&this.strokeThickness>0}setShadowColor(t){return this.shadowColor=gt(t),this}setShadowOffset(t,s){return t===void 0&&(t=0),s===void 0&&(s=0),this.shadowOffsetX=t,this.shadowOffsetY=s,this}setShadowBlur(t){return t===void 0&&(t=0),this.shaodwBlur=t,this}setShadow(t,s,f,C){return this.setShadowColor(t).setShadowOffset(s,f).setShadowBlur(C),this}setBackgroundColor(t){return this.backgroundColor=gt(t),this}get hasBackgroundColor(){return this.backgroundColor!=null}setBackgroundHeight(t){return this.backgroundHeight=t,this}setBackgroundBottomY(t){return this.backgroundBottomY=t,this}setOffsetX(t){return t===void 0&&(t=0),this.offsetX=t,this}setOffsetY(t){return t===void 0&&(t=0),this.offsetY=t,this}setOffset(t,s){return this.setOffsetX(t).setOffsetY(s),this}setLeftSpace(t){return t===void 0&&(t=0),this.leftSpace=t,this}setRightSpace(t){return t===void 0&&(t=0),this.rightSpace=t,this}setSpace(t,s){return this.setLeftSpace(t).setRightSpace(s),this}setAlign(t){return this.align=t,this}syncFont(t){return t.font=this.font,this}syncStyle(t){t.textBaseline="alphabetic";var s=this.hasFill,f=this.hasStroke;return t.fillStyle=s?this.color:"#000",t.strokeStyle=f?this.stroke:"#000",t.lineWidth=f?this.strokeThickness:0,t.lineCap="round",t.lineJoin="round",this}syncShadow(t){t.shadowColor!=null?(t.shadowColor=this.shadowColor,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowBlur=this.shadowBlur):(t.shadowColor=0,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0)}getTextMetrics(t,s){return this.syncFont(t).syncStyle(t),t.measureText(s)}}var DC=function(i,t){i===void 0&&(i=0),t===void 0&&(t=0);var s=this.fixedWidth!==i||this.fixedHeight!==t;return s?(this.fixedWidth=i,this.fixedHeight=t,this.dirty=!0,this.setCanvasSize(i>0?i:this.width,t>0?t:this.height),this):this},IC=function(i,t){var s=this.padding,f=s.left,C=s.right,S=s.top,r=s.bottom;return Ji(s,i,t),this.dirty=this.dirty||f!=s.left||C!=s.right||S!=s.top||r!=s.bottom,this},BC=function(i){return Ba(this.padding,i)},GC=function(i){return this.textStyle.modify(i),this},NC=function(i){return this.defaultTextStyle.modify(i),this},VC=function(){return this.textStyle.copyFrom(this.defaultTextStyle),this},zC=function(i){return this.testString=i,this};const UC=Phaser.Utils.Array.Remove;var YC=function(i){return this.poolManager.free(i),UC(this.children,i),this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this},kC=function(){return this.poolManager.freeMultiple(this.children),this.children.length=0,this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this};const XC=Phaser.Utils.Array.Remove;var WC=function(i){return XC(this.children,i),this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this},HC=function(){return this.setText(),this},i0=function(i,t){var s=Array.isArray(i);return t===void 0||t===this.children.length?s?this.children.push(...i):this.children.push(i):s?this.children.splice(t,0,...i):this.children.splice(t,0,i),this.lastAppendedChildren.length=0,s?this.lastAppendedChildren.push(...i):this.lastAppendedChildren.push(i),this};const ss="text",s0="image",n0="drawer",r0="space",du="command";var a0=function(i){return i.type===ss&&i.text===`
`},o0=function(i){return i.type===ss&&i.text==="\f"},$C=function(i){return i.type===ss&&i.text===" "},wn=function(i){return i.type===ss},KC=function(i){return i.type===du};class h0 extends Ls{constructor(t,s,f){super(t,ss),this.updateTextFlag=!1,this.style=new ao(this,f),this.setText(s)}get autoRound(){return this.parent.autoRound}get offsetX(){return this.style.offsetX}set offsetX(t){this.style&&(this.style.offsetX=t)}get offsetY(){return this.style.offsetY}set offsetY(t){this.style&&(this.style.offsetY=t)}get leftSpace(){return this.style.leftSpace*this.scaleX}set leftSpace(t){this.style&&(this.style.leftSpace=t),super.leftSpace=t}get rightSpace(){return this.style.rightSpace*this.scaleX}set rightSpace(t){this.style&&(this.style.rightSpace=t),super.rightSpace=t}get align(){return this.style.align}set align(t){this.style&&(this.style.align=t)}modifyStyle(t){return this.setDirty(!0),this.style.modify(t),this.updateTextFlag&&this.updateTextSize(),this}modifyPorperties(t){return t?(this.modifyStyle(t),super.modifyPorperties(t),this):this}setText(t){return this.setDirty(this.text!=t),this.text=t,this.updateTextSize(),this}updateTextSize(){var t=this.text;if(t===`
`||t==="\f"||t==="")this.textWidth=0,this.textHeight=0,this.ascent=0,this.descent=0;else{var s=this.style.getTextMetrics(this.context,this.text);this.textWidth=s.width;var f,C;"actualBoundingBoxAscent"in s?(f=s.actualBoundingBoxAscent,C=s.actualBoundingBoxDescent):(f=0,C=0),this.textHeight=f+C,this.ascent=f,this.descent=C}return this.updateTextFlag=!1,this}get width(){return this.textWidth*this.scaleX}set width(t){this.textWidth>0?this.scaleX=t/this.textWidth:this.scaleX=1}get height(){return this.textHeight*this.scaleY}set height(t){this.textHeight>0?this.scaleY=t/this.textHeight:this.scaleY=1}get willRender(){var t=this.text;return t===`
`||t==="\f"?!1:super.willRender}renderContent(){var t=this.context,s=this.style;if(s.hasBackgroundColor){t.fillStyle=s.backgroundColor;var f=this.drawTLX,C=this.drawTRX-f,S=s.backgroundBottomY;S==null&&(S=this.drawBLY);var r=s.backgroundHeight;r==null&&(r=S-this.drawTLY);var y=S-r;t.fillRect(f,y,C,r)}var e=s.hasFill,u=s.hasStroke;!e&&!u||(s.syncFont(t).syncStyle(t),u&&(s.syncShadow(t),t.strokeText(this.text,0,0)),e&&(s.syncShadow(t),t.fillText(this.text,0,0)))}get drawTLX(){return-this.leftSpace}get drawTLY(){return-this.ascent}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.descent}get drawTRX(){return this.textWidth+this.rightSpace}get drawTRY(){return-this.ascent}get drawBRX(){return this.textWidth+this.rightSpace}get drawBRY(){return this.descent}}var jC=function(i,t){t&&this.textStyle.modify(t);var s=this.poolManager.allocate(ss);return s===null?s=new h0(this,i,this.textStyle):s.setParent(this).setActive().modifyStyle(this.textStyle).setText(i),s},ZC=function(i,t){t&&this.textStyle.modify(t);for(var s=[],f=0,C=i.length;f<C;f++){var S=i.charAt(f),r=this.poolManager.allocate(ss);r===null?r=new h0(this,S,this.textStyle):r.setParent(this).setActive().modifyStyle(this.textStyle).setText(S),s.push(r)}return s},Pr=function(i,t){var s=this.createCharChildren(i,t);return this.addChild(s),this},JC=function(i,t){return i===void 0&&(i=""),this.removeChildren(),Pr.call(this,i,t),this.dirty=!0,this},QC=function(i,t,s){var f=this.createCharChildren(t,s);return i=this.getCharChildIndex(i,!0),this.addChild(f,i),this},qC=function(i,t){t===void 0&&(t=1);for(var s=0;s<t;s++){var f=this.getCharChildIndex(i,!0);if(f===void 0)break;this.removeChild(this.children[f])}return this},_C=function(i){var t="";return this.forEachCharChild(function(s){t+=s.text},void 0,i),t};class tS extends Ls{constructor(t,s,f){super(t,s0),this.setTexture(s,f)}get frameWidth(){return this.frameObj?this.frameObj.cutWidth:0}get frameHeight(){return this.frameObj?this.frameObj.cutHeight:0}get offsetY(){return-this.height}set offsetY(t){}get key(){return this._key}set key(t){this.setDirty(this._key!=t),this._key=t}get frame(){return this._frame}set frame(t){this.setDirty(this._frame!=t),this._frame=t}setTexture(t,s){return this.key=t,this.frame=s,this.frameObj=this.scene.sys.textures.getFrame(t,s),this}get width(){return this.frameWidth*this.scaleX}set width(t){this.setDirty(this.width!==t),this.scaleX=t/this.frameWidth}get height(){return this.frameHeight*this.scaleY}set height(t){this.setDirty(this.height!==t),this.scaleY=t/this.frameHeight}setHeight(t,s){return s===void 0&&(s=!1),this.height=t,s&&(this.scaleX=this.scaleY),this}renderContent(){var t=this.context,s=this.frameObj,f=this.frameWidth,C=this.frameHeight;t.drawImage(s.source.image,s.cutX,s.cutY,f,C,0,0,f,C)}get drawTLX(){return-this.leftSpace}get drawTLY(){return 0}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.frameHeight}get drawTRX(){return this.frameWidth+this.rightSpace}get drawTRY(){return 0}get drawBRX(){return this.frameWidth+this.rightSpace}get drawBRY(){return this.frameHeight}}var eS=function(i,t,s){var f=this.poolManager.allocate(s0);return f===null?f=new tS(this,i,t):f.setParent(this).setActive().setTexture(i,t),f.modifyPorperties(s),f},l0=function(i,t,s){var f=this.createImageChild(i,t,s);return this.addChild(f),this};class iS extends Ls{constructor(t,s,f,C){super(t,n0),this.setRenderCallback(s),this.setDrawerSize(f,C)}setRenderCallback(t){return t?this.renderContent=t.bind(this):delete this.renderContent,this}setDrawerSize(t,s){return t===!0?(this.toLocalPosition=!1,t=void 0,s=void 0):this.toLocalPosition=!0,t===void 0&&(t=0),s===void 0&&(s=t),this.drawerWidth=t,this.drawerHeight=s,this}onFree(){super.onFree(),this.setRenderCallback()}get width(){return this.drawerWidth*this.scaleX}set width(t){this.setDirty(this.width!==t),this.scaleX=this.drawerWidth>0?t/this.drawerWidth:1}get height(){return this.drawerHeight*this.scaleY}set height(t){this.setDirty(this.height!==t),this.scaleY=this.drawerHeight>0?t/this.drawerHeight:1}get offsetY(){return-this.height}set offsetY(t){}get drawTLX(){return-this.leftSpace}get drawTLY(){return 0}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.drawerHeight}get drawTRX(){return this.drawerWidth+this.rightSpace}get drawTRY(){return 0}get drawBRX(){return this.drawerWidth+this.rightSpace}get drawBRY(){return this.drawerHeight}}var sS=function(i,t,s){var f=this.poolManager.allocate(n0);return f===null?f=new iS(this,i,t,s):f.setParent(this).setActive().setRenderCallback(i).setDrawerSize(t,s),f},nS=function(i,t,s){var f=this.createDrawerChild(i,t,s);return this.addChild(f),this};let rS=class extends Ls{constructor(t,s){super(t,r0),this.setSpaceWidth(s)}get width(){return this.spaceWidth*this.scaleX}set width(t){this.spaceWidth>0?this.scaleX=t/this.spaceWidth:this.scaleX=1}setSpaceWidth(t){return this.spaceWidth=t,this}};var aS=function(i){var t=this.poolManager.allocate(r0);return t===null?t=new rS(this,i):t.setParent(this).setActive().setSpaceWidth(i),t},u0=function(i){var t=this.createSpaceChild(i);return this.addChild(t),this};class oS extends uu{constructor(t,s,f,C,S){super(t,du),this.setName(s).setParameter(C).setCallback(f,S)}setName(t){return this.name=t,this}setParameter(t){return this.param=t,this}setCallback(t,s){return this.callback=t,this.scope=s,this}exec(){var t;return this.scope?t=this.callback.call(this.scope,this.param,this.name):t=this.callback(this.param,this.name),t}onFree(){super.onFree(),this.setName().setCallback().setParameter()}}var hS=function(i,t,s,f){var C=this.poolManager.allocate(du);return C===null?C=new oS(this,i,t,s,f):C.setParent(this).setActive().setName(i).setCallback(t,f).setParameter(s),C},ct=function(i,t,s,f){var C=this.createCommandChild(i,t,s,f);return this.addChild(C),this},lS=function(i){return i===void 0?i={}:typeof i=="object"&&(i=fe(i)),this.wrapConfig=i,this},uS=function(i,t,s,f){f===void 0&&(f={word:[],width:0}),f.word.length=0;for(var C=i.length,S=t,r=f.word,y=0;S<C;){var e=i[S];if(!e.renderable){r.push(e),S++;continue}var u=e.type===ss?e.text:null;if(u!==null&&u!==" "&&u!==`
`&&u!=="\f")r.push(e),y+=e.outerWidth,S++;else{S===t&&(r.push(e),y+=e.outerWidth);break}if(s)break}return f.width=y,f},d0=function(i){for(var t=0,s=i.length;t<s;t++){var f=i[t];if(f.align!==void 0)return f.align}},f0=function(i,t,s){if(!(t===0&&s===0))for(var f=0,C=i.length;f<C;f++){var S=i[f];S.renderable&&(S.x+=t,S.y+=s)}},dS=function(i,t,s){var f=i.hAlign,C=i.vAlign,S,r,y=i.linesHeight;switch(C){case 1:case"center":r=(s-y)/2;break;case 2:case"bottom":r=s-y;break;default:r=0;break}for(var e=i.lines,u=0,m=e.length;u<m;u++){var d=e[u],l=d.width,h=d.children,n=d0(h);switch(n===void 0&&(n=f),n){case 1:case"center":S=(t-l)/2;break;case 2:case"right":S=t-l;break;default:S=0;break}f0(h,S,r)}},Of=function(){var i=this.defaultTextStyle.getTextMetrics(this.context,this.testString),t,s;return"actualBoundingBoxAscent"in i?(t=i.actualBoundingBoxAscent,s=i.actualBoundingBoxDescent):(t=0,s=0),qr.ascent=t,qr.descent=s,qr.height=t+s,qr},qr={};const Ee=Phaser.Utils.Objects.GetValue;var fS=function(i){var t=Ee(i,"start",0);Ji(this.wrapPadding,Ee(i,"padding",0));var s=this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom,f=this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,C=Ee(i,"lineHeight"),S=Ee(i,"ascent",C),r;if(C===void 0){var y=Ee(i,"useDefaultTextHeight",!1);if(r=Ee(i,"maxLines",0),this.fixedHeight>0&&!y){var k=this.fixedHeight-s;if(r>0)C=k/r;else{var e=Of.call(this);C=e.height,S=e.ascent,r=Math.floor((k-S)/C)}}else{var e=Of.call(this);C=e.height,S=e.ascent}}else if(this.fixedHeight>0){if(r=Ee(i,"maxLines"),r===void 0){var k=this.fixedHeight-s;r=Math.floor(k/C)}}else r=Ee(i,"maxLines",0);S===void 0&&(S=C);var u=r===0,m=Ee(i,"wrapWidth",void 0);m===void 0&&(this.fixedWidth>0?m=this.fixedWidth-f:m=1/0);for(var d=Ee(i,"letterSpacing",0),l=Ee(i,"hAlign",0),h=Ee(i,"vAlign",0),n=Ee(i,"charWrap",!1),a={callback:"runWordWrap",start:t,isLastPage:!1,padding:this.wrapPadding,ascent:S,lineHeight:C,maxLines:r,wrapWidth:m,letterSpacing:d,hAlign:l,vAlign:h,charWrap:n,children:[],lines:[],maxLineWidth:0,linesHeight:0},c=this.children,o=0,v=c.length;o<v;o++)c[o].setActive(!1);m+=d;for(var g=this.padding.left+this.wrapPadding.left,p=this.padding.top+this.wrapPadding.top+S,x=g,T=p,E=m,M=t,P=c.length,w=a.children,R=a.lines,A=[],O=0,F=0,b;M<P;){b=uS(c,M,n,b);var D=b.word,I=D.length,B=b.width+I*d;M+=I;var z=a0(D[0]),Y=o0(D[0]),X=z||Y;if(E<B||X){if(X){var H=D[0];H.setActive().setPosition(x,T),w.push(H),A.push(H)}x=g,T+=C,E=m,R.push({children:A,width:O}),F=Math.max(F,O),O=0,A=[];var N=Y||!u&&R.length===r;if(N)break;if(X)continue}E-=B,O+=B;for(var o=0,v=D.length;o<v;o++){var U=D[o];U.setActive(),w.push(U),A.push(U),U.renderable&&(U.setPosition(x,T),x+=U.outerWidth+d)}}A.length>0&&(R.push({children:A,width:O}),F=Math.max(F,O)),a.start+=w.length,a.isLastPage=a.start===P,a.maxLineWidth=F,a.linesHeight=R.length*C;var L=this.fixedWidth>0?this.fixedWidth:a.maxLineWidth+f,G=this.fixedHeight>0?this.fixedHeight:a.linesHeight+s,V=L-f,k=G-s;dS(a,V,k),this.setCanvasSize(L,G);for(var o=0,v=w.length;o<v;o++){var U=w[o];U.renderable&&(U.x0=U.x,U.y0=U.y)}return a};const cS=Phaser.Utils.Objects.Merge;var vS=function(i){return i===void 0&&(i={}),fS.call(this,cS(i,this.wrapConfig))},pS=function(i,t,s){var f=i.hAlign,C=i.vAlign,S,r,y=i.rtl,e=i.lines,u=i.lineWidth,m=i.linesWidth;switch(f){case 1:case"center":S=(t-m)/2;break;case 2:case"right":S=t-m;break;default:S=0;break}y&&(S+=u);for(var d=0,l=e.length;d<l;d++){var h=e[y?l-d-1:d],n=h.children,a=h.height,c=d0(n);switch(c===void 0&&(c=C),c){case 1:case"center":r=(s-a)/2;break;case 2:case"bottom":r=s-a;break;default:r=0;break}f0(n,S,r),S+=u}};const Me=Phaser.Utils.Objects.GetValue;var gS=function(i){var t=Me(i,"start",0);Ji(this.wrapPadding,Me(i,"padding",0));var s=this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom,f=this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,C=Me(i,"lineWidth",void 0),S;if(C===void 0)if(S=Me(i,"maxLines",0),this.fixedWidth>0){var H=this.fixedWidth-f;C=H/S}else C=0;else if(this.fixedWidth>0){if(S=Me(i,"maxLines",void 0),S===void 0){var H=this.fixedWidth-f;S=Math.floor(H/C)+1}}else S=Me(i,"maxLines",0);var r=S===0,y=Me(i,"fixedChildHeight",void 0);if(y===void 0){var e=Me(i,"charPerLine",void 0);if(e!==void 0){var N=this.fixedHeight-s;y=Math.floor(N/e)}}var u=Me(i,"wrapHeight",void 0);u===void 0&&(this.fixedHeight>0?u=this.fixedHeight-s:u=1/0);for(var m=Me(i,"letterSpacing",0),d=Me(i,"rtl",!0),l=Me(i,"hAlign",d?2:0),h=Me(i,"vAlign",0),n={callback:"runVerticalWrap",start:t,isLastPage:!1,padding:this.wrapPadding,lineWidth:C,maxLines:S,fixedChildHeight:y,wrapHeight:u,letterSpacing:m,hAlign:l,vAlign:h,rtl:d,children:[],lines:[],maxLineHeight:0,linesWidth:0},a=this.children,c=0,o=a.length;c<o;c++)a[c].setActive(!1);u+=m;for(var v=this.padding.left+this.wrapPadding.left,g=this.padding.top+this.wrapPadding.top,p=v,x=g,T=u,E=t,M=a.length,P=n.children,w=n.lines,R=[],A=0,O=0;E<M;){var F=a[E];if(E++,!F.renderable){F.setActive(),P.push(F),R.push(F);continue}var b=(y!==void 0?y:F.height)+m,D=a0(F),I=o0(F),B=D||I;if(T<b||B){D&&(F.setActive().setPosition(p,x).setOrigin(.5),P.push(F),R.push(F)),p=v,x=g,T=u,w.push({children:R,height:A}),O=Math.max(O,A),A=0,R=[];var z=I||!r&&w.length===S;if(z)break;if(B)continue}T-=b,A+=b,F.setActive().setPosition(p,x).setOrigin(.5),P.push(F),R.push(F),x+=b}R.length>0&&(w.push({children:R,height:A}),O=Math.max(O,A)),n.start+=P.length,n.isLastPage=n.start===M,n.maxLineHeight=O,n.linesWidth=w.length*C;var Y=this.fixedWidth>0?this.fixedWidth:n.linesWidth+f,X=this.fixedHeight>0?this.fixedHeight:n.maxLineHeight+s,H=Y-f,N=X-s;pS(n,H,N),this.setCanvasSize(Y,X);for(var c=0,o=P.length;c<o;c++){var F=P[c];F.renderable&&(F.x0=F.x,F.y0=F.y)}return n};const mS=Phaser.Utils.Objects.Merge;var xS=function(i){return i===void 0&&(i={}),gS.call(this,mS(i,this.wrapConfig))};const bf=Phaser.Utils.Objects.GetValue;var yS=function(i){var t=bf(this.wrapConfig,"callback");return t||(t=bf(i,"callback",this.runWordWrap)),typeof t=="string"&&(t=this[t]),t.call(this,i)};const TS={setVAlign(i){return this.wrapConfig.vAlign=i,this},setHAlign(i){return this.wrapConfig.hAlign=i,this}};var CS=function(){this.clear(),this.setCanvasSize(this.width,this.height),this.background.active&&this.background.render();for(var i,t=0,s=this.children.length;t<s;t++)i=this.children[t],i.active&&i.render();this.innerBounds.active&&this.innerBounds.render()},SS=function(i,t,s){s===void 0&&(s=!0);for(var f=this.children,C=0,S=0,r=f.length;S<r;S++){var y=f[S];if(!(s&&!y.active)){var e;if(t?e=i.call(this,y,C,f):e=i(y,C,f),C++,e)break}}return this},PS=function(i,t,s){s===void 0&&(s=!0);for(var f=this.children,C=0,S=0,r=f.length;S<r;S++){var y=f[S];if(!(s&&!y.active)&&y.renderable&&!y.removed){var e;if(t?e=i.call(this,y,C,f):e=i(y,C,f),C++,e)break}}return this},ES=function(i,t,s){s===void 0&&(s=!0);for(var f=this.children,C=0,S=0,r=f.length;S<r;S++){var y=f[S];if(!(s&&!y.active)&&wn(y)&&!y.removed){var e;if(t?e=i.call(this,y,C,f):e=i(y,C,f),C++,e)break}}return this},MS=function(){return this.children};const wS=Phaser.Utils.Array.GetAll;var RS=function(){return wS(this.children,"active",!0)},AS=function(i,t){return t===void 0&&(t=[]),this.forEachCharChild(function(s){t.push(s)},void 0,i),t},OS=function(){return this.lastAppendedChildren},bS=function(i,t,s,f){typeof t!="number"&&(f=t,t=0,s=0);var C=i.drawCenterX+t,S=i.drawCenterY+s;return _g(i,C,S,f)};const FS=Phaser.Math.Distance.BetweenPointsSquared;var LS=function(i,t){var s={x:i,y:t},f=1/0,C=null;return this.forEachRenderableChild(function(S){var r=FS(s,bS(S,!0));f>r&&(f=r,C=S)}),C},DS=function(i,t,s,f){return typeof i=="number"&&(i=this.getCharChild(i,!0)),t0(this,i,t,s,f)},IS=function(){for(var i=this.children,t=0,s=0,f=0,C=i.length;f<C;f++){var S=i[f];if(!(!S.renderable||!S.active||!S.visible)){var r=S.x0!==void 0?S.x0:S.x,y=S.y0!==void 0?S.y0:S.y;t=Math.max(t,r),s=Math.max(s,y)}}var e=t+this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,u=s+this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom;return(this.width!==e||this.height!==u)&&(this.dirty=!0,this.setCanvasSize(e,u)),this},BS=function(i,t){t===void 0&&(t=!0);for(var s=this.children,f=0,C=s.length;f<C;f++){var S=s[f];if(!(t&&!S.active)&&wn(S)&&!S.removed){if(i===0)return f;i--}}},GS=function(i,t){t===void 0&&(t=!0);for(var s=this.children,f=0,C=s.length;f<C;f++){var S=s[f];if(!(t&&!S.active)&&wn(S)&&!S.removed){if(i===0)return S;i--}}},NS=function(i,t){if(typeof i!="number"&&(i=this.children.indexOf(i),i<0))return null;t===void 0&&(t=!0);var s=this.children;i>=s.length&&(i=s.length);for(var f=0,C=0;C<i;C++){var S=s[C];t&&!S.active||wn(S)&&!S.removed&&f++}return f},VS=function(i){return i===void 0&&(i=!0),this.childrenInteractiveEnable!==i&&(this.lastOverChild=null),this.childrenInteractiveEnable=i,this},fu=function(f,t,s){for(var f=f,C=0,S=f.length;C<S;C++){var r=f[C];if(!(!r.active||!r.renderable)&&r.contains(t,s))return r}return null},zS=function(){return this.on("pointerdown",US,this).on("pointerdown",YS,this).on("pointermove",uh,this).on("pointerover",uh,this).on("pointerout",function(i,t){uh.call(this,i,null,null,t)},this),this},US=function(i,t,s,f){if(this.childrenInteractiveEnable){var C=fu(this.children,t,s);C&&this.emit("child.pointerdown",C,i,t,s,f)}},YS=function(i,t,s,f){if(this.childrenInteractiveEnable){var C=fu(this.children,t,s);C&&this.emit("child.pointerup",C,i,t,s,f)}},uh=function(i,t,s,f){if(this.childrenInteractiveEnable){if(t===null){this.lastOverChild!==null&&(this.emit("child.pointerout",this.lastOverChild,i,t,s,f),this.lastOverChild=null);return}var C=fu(this.children,t,s);C!==this.lastOverChild&&(this.lastOverChild!==null&&this.emit("child.pointerout",this.lastOverChild,i,t,s,f),C!==null&&this.emit("child.pointerover",C,i,t,s,f),this.lastOverChild=C)}};const kS=Phaser.GameObjects.GameObject;var XS=function(i,t,s){var f=!!this.input;return kS.prototype.setInteractive.call(this,i,t,s),f||zS.call(this),this};const WS=Phaser.Utils.Array.BringToTop,HS=Phaser.Utils.Array.SendToBack,$S=Phaser.Utils.Array.MoveUp,KS=Phaser.Utils.Array.MoveDown,jS=Phaser.Utils.Array.MoveAbove,ZS=Phaser.Utils.Array.MoveBelow,JS={moveChildToFist(i){return HS(this.children,i),this},moveChildToLast(i){return WS(this.children,i),this},movechildUp(i){return $S(this.children,i),this},movechildDown(i){return KS(this.children,i),this},movechildAbove(i,t){return jS(this.children,i,t),this},movechildBelow(i,t){return ZS(this.children,i,t),this}},QS={setBackgroundColor(i,t,s){return this.background.setColor(i,t,s),this},setBackgroundStroke(i,t){return this.background.setStroke(i,t),this},setBackgroundCornerRadius(i,t){return this.background.setCornerRadius(i,t),this}},qS={setInnerBoundsColor(i,t,s){return this.innerBounds.setColor(i,t,s),this},setInnerBoundsStroke(i,t){return this.innerBounds.setStroke(i,t),this}};var c0={setFixedSize:DC,setPadding:IC,getPadding:BC,modifyTextStyle:GC,modifyDefaultTextStyle:NC,resetTextStyle:VC,setTestString:zC,removeChild:YC,removeChildren:kC,popChild:WC,clearContent:HC,addChild:i0,createCharChild:jC,createCharChildren:ZC,setText:JC,appendText:Pr,insertText:QC,removeText:qC,getText:_C,createImageChild:eS,appendImage:l0,createDrawerChild:sS,appendDrawer:nS,createSpaceChild:aS,appendSpace:u0,createCommandChild:hS,appendCommand:ct,setWrapConfig:lS,runWordWrap:vS,runVerticalWrap:xS,runWrap:yS,renderContent:CS,forEachChild:SS,forEachRenderableChild:PS,forEachCharChild:ES,getChildren:MS,getActiveChildren:RS,getCharChildren:AS,getLastAppendedChildren:OS,getNearestChild:LS,getCharWorldPosition:DS,setToMinSize:IS,getCharChildIndex:BS,getCharChild:GS,getCharIndex:NS,setChildrenInteractiveEnable:VS,setInteractive:XS};Object.assign(c0,JS,QS,qS,TS);const _S=Phaser.Utils.Objects.GetFastValue;var tP={};class eP{constructor(t){this.pools=_S(t,"pools",tP)}free(t){if(!this.pools)return this;var s=t.type;return this.pools.hasOwnProperty(s)||(this.pools[s]=new ui),this.pools[s].push(t),t.onFree(),this}freeMultiple(t){if(!this.pools)return this;for(var s=0,f=t.length;s<f;s++)this.free(t[s]);return this}allocate(t){return!this.pools||!this.pools.hasOwnProperty(t)?null:this.pools[t].pop()}}const Ff=Phaser.Utils.Objects.IsPlainObject,ge=Phaser.Utils.Objects.GetValue;class Fn extends is{constructor(t,s,f,C,S,r){Ff(s)?(r=s,s=ge(r,"x",0),f=ge(r,"y",0),C=ge(r,"width",0),S=ge(r,"height",0)):Ff(C)&&(r=C,C=ge(r,"width",0),S=ge(r,"height",0));var y=C===0?1:C,e=S===0?1:S;super(t,s,f,y,e),this.type="rexDynamicText",this.autoRound=!0,this.padding=Ji(),this.wrapPadding=Ji();var u=ge(r,"style",void 0);this.defaultTextStyle=new ao(null,u),this.textStyle=this.defaultTextStyle.clone(),this.setTestString(ge(r,"testString","|MÉqgy")),this.background=new FC(this,ge(r,"background",void 0)),this.innerBounds=new LC(this,ge(r,"innerBounds",void 0)),this.children=[],this.lastAppendedChildren=[],this.lastOverChild=null,this.poolManager=new eP(r),this.setFixedSize(C,S),this.setPadding(ge(r,"padding",0)),this.setWrapConfig(ge(r,"wrap",void 0)),this.setChildrenInteractiveEnable(ge(r,"childrenInteractive",!1));var m=ge(r,"text",void 0);m&&this.setText(m)}updateTexture(){return this.renderContent(),super.updateTexture(),this}get text(){return this.getText(!0)}set text(t){this.setText(t)}setSize(t,s){return this.setFixedSize(t,s),this}}Object.assign(Fn.prototype,c0);st.register("dynamicText",function(i,t,s,f,C){var S=new Fn(this.scene,i,t,s,f,C);return this.scene.add.existing(S),S});it(window,"RexPlugins.UI.DynamicText",Fn);var iP=function(i){return Os(i)?i.sys.sound:i.sound};const Ln={setEventEmitter(i,t){return t===void 0&&(t=Phaser.Events.EventEmitter),this._privateEE=i===!0||i===void 0,this._eventEmitter=this._privateEE?new t:i,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(i){return this._eventEmitter&&i&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}};var v0=function(i){return i==null||typeof i!="object"?null:Os(i)?i:i.scene&&Os(i.scene)?i.scene:i.parent&&i.parent.scene&&Os(i.parent.scene)?i.parent.scene:null};const sP=Phaser.Utils.Objects.GetValue;class _t{constructor(t,s){this.setParent(t),this.isShutdown=!1,this.setEventEmitter(sP(s,"eventEmitter",!0)),this.parent&&(this.parent===this.scene?this.scene.sys.events.once("shutdown",this.onEnvDestroy,this):this.parent===this.game?this.game.events.once("shutdown",this.onEnvDestroy,this):this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this))}shutdown(t){this.isShutdown||(this.parent&&(this.parent===this.scene?this.scene.sys.events.off("shutdown",this.onEnvDestroy,this):this.parent===this.game?this.game.events.off("shutdown",this.onEnvDestroy,this):this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this)),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.game=void 0,this.isShutdown=!0)}destroy(t){this.shutdown(t)}onEnvDestroy(){this.destroy(!0)}onParentDestroy(t,s){this.destroy(s)}setParent(t){return this.parent=t,this.scene=v0(t),this.game=Mn(t),this}}Object.assign(_t.prototype,Ln);const nP=Phaser.Utils.Objects.GetValue;class oo extends _t{constructor(t,s){super(t,s),this._isRunning=!1,this.isPaused=!1,this.tickingState=!1,this.setTickingMode(nP(s,"tickingMode",1))}boot(){this.tickingMode===2&&!this.tickingState&&this.startTicking()}shutdown(t){this.isShutdown||(this.stop(),this.tickingState&&this.stopTicking(),super.shutdown(t))}setTickingMode(t){typeof t=="string"&&(t=rP[t]),this.tickingMode=t}startTicking(){this.tickingState=!0}stopTicking(){this.tickingState=!1}get isRunning(){return this._isRunning}set isRunning(t){this._isRunning!==t&&(this._isRunning=t,this.tickingMode===1&&t!=this.tickingState&&(t?this.startTicking():this.stopTicking()))}start(){return this.isPaused=!1,this.isRunning=!0,this}pause(){return this.isRunning&&(this.isPaused=!0,this.isRunning=!1),this}resume(){return this.isPaused&&(this.isRunning=!0),this}stop(){return this.isPaused=!1,this.isRunning=!1,this}complete(){this.isPaused=!1,this.isRunning=!1,this.emit("complete",this.parent,this)}}const rP={no:0,lazy:1,always:2},aP=Phaser.Utils.Objects.GetValue;class oP extends oo{constructor(t,s){super(t,s);var f=this.scene?"update":"step";this.tickEventName=aP(s,"tickEventName",f),this.isSceneTicker=!hP(this.tickEventName)}startTicking(){super.startTicking(),this.isSceneTicker?this.scene.sys.events.on(this.tickEventName,this.update,this):this.game.events.on(this.tickEventName,this.update,this)}stopTicking(){super.stopTicking(),this.isSceneTicker&&this.scene?this.scene.sys.events.off(this.tickEventName,this.update,this):this.game&&this.game.events.off(this.tickEventName,this.update,this)}}var hP=function(i){return i==="step"||i==="poststep"};const mi=Phaser.Utils.Objects.GetValue,Lf=Phaser.Math.Clamp;let p0=class{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){this.state=mi(t,"state",Yn),this.timeScale=mi(t,"timeScale",1),this.delay=mi(t,"delay",0),this.repeat=mi(t,"repeat",0),this.repeatCounter=mi(t,"repeatCounter",0),this.repeatDelay=mi(t,"repeatDelay",0),this.duration=mi(t,"duration",0),this.nowTime=mi(t,"nowTime",0),this.justRestart=mi(t,"justRestart",!1)}toJSON(){return{state:this.state,timeScale:this.timeScale,delay:this.delay,repeat:this.repeat,repeatCounter:this.repeatCounter,repeatDelay:this.repeatDelay,duration:this.duration,nowTime:this.nowTime,justRestart:this.justRestart}}destroy(){}setTimeScale(t){return this.timeScale=t,this}setDelay(t){return t===void 0&&(t=0),this.delay=t,this}setDuration(t){return this.duration=t,this}setRepeat(t){return this.repeat=t,this}setRepeatInfinity(){return this.repeat=-1,this}setRepeatDelay(t){return this.repeatDelay=t,this}start(){return this.nowTime=this.delay>0?-this.delay:0,this.state=this.nowTime>=0?Ws:kn,this.repeatCounter=0,this}stop(){return this.state=Yn,this}update(t,s){this.state===Yn||this.state===_r||s===0||this.timeScale===0||(this.nowTime+=s*this.timeScale,this.justRestart=!1,this.nowTime>=this.duration?this.repeat===-1||this.repeatCounter<this.repeat?(this.repeatCounter++,this.justRestart=!0,this.nowTime-=this.duration,this.repeatDelay>0&&(this.nowTime-=this.repeatDelay,this.state=Df)):(this.nowTime=this.duration,this.state=_r):this.nowTime>=0&&(this.state=Ws))}get t(){var t;switch(this.state){case Yn:case kn:case Df:t=0;break;case Ws:t=this.nowTime/this.duration;break;case _r:t=1;break}return Lf(t,0,1)}set t(t){t=Lf(t,-1,1),t<0?(this.state=kn,this.nowTime=-this.delay*t):(this.state=Ws,this.nowTime=this.duration*t,t===1&&this.repeat!==0&&this.repeatCounter++)}setT(t){return this.t=t,this}get isIdle(){return this.state===Yn}get isDelay(){return this.state===kn}get isCountDown(){return this.state===Ws}get isRunning(){return this.state===kn||this.state===Ws}get isDone(){return this.state===_r}get isOddIteration(){return(this.repeatCounter&1)===1}get isEvenIteration(){return(this.repeatCounter&1)===0}};const Yn=0,kn=1,Ws=2,Df=3,_r=-1;class lP extends oP{constructor(t,s){super(t,s),this.timer=new p0}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}start(){return this.timer.start(),super.start(),this}stop(){return this.timer.stop(),super.stop(),this}complete(){return this.timer.stop(),super.complete(),this}}const Xn=Phaser.Utils.Objects.GetValue,If=Phaser.Utils.Objects.GetAdvancedValue,uP=Phaser.Tweens.Builders.GetEaseFunction;class Ds extends lP{resetFromJSON(t){return this.timer.resetFromJSON(Xn(t,"timer")),this.setEnable(Xn(t,"enable",!0)),this.setTarget(Xn(t,"target",this.parent)),this.setDelay(If(t,"delay",0)),this.setDuration(If(t,"duration",1e3)),this.setEase(Xn(t,"ease","Linear")),this.setRepeat(Xn(t,"repeat",0)),this}setEnable(t){return t==null&&(t=!0),this.enable=t,this}setTarget(t){return t===void 0&&(t=this.parent),this.target=t,this}setDelay(t){return this.delay=t,this}setDuration(t){return this.duration=t,this}setRepeat(t){return this.repeat=t,this}setRepeatDelay(t){return this.repeatDelay=t,this}setEase(t){return t===void 0&&(t="Linear"),this.ease=t,this.easeFn=uP(t),this}start(){return this.timer.isRunning?this:(super.start(),this)}restart(){return this.timer.stop(),this.start.apply(this,arguments),this}stop(t){return t===void 0&&(t=!1),super.stop(),t&&(this.timer.setT(1),this.updateGameObject(this.target,this.timer),this.complete()),this}update(t,s){if(!this.isRunning||!this.enable||!this.parent.active)return this;var f=this.target,C=this.timer;return C.update(t,s),C.isDelay||this.updateGameObject(f,C),this.emit("update",f,this),C.isDone&&this.complete(),this}updateGameObject(t,s){}}const dP=Phaser.Sound.BaseSound;var cu=function(i){return i instanceof dP};const Bf=Phaser.Utils.Objects.GetValue,Gf=Phaser.Utils.Objects.GetAdvancedValue,fP=Phaser.Math.Linear;let g0=class extends Ds{constructor(t,s,f){cu(t)&&(f=s,s=t,t=void 0),s.active=!0,s.scene=t,s.game=s.manager.game,super(s,f),this.volume={},this.resetFromJSON(f)}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(Bf(t,"mode",0)),this.setEnable(Bf(t,"enable",!0)),this.setVolumeRange(Gf(t,"volume.start",this.parent.volume),Gf(t,"volume.end",0)),this}setMode(t){return typeof t=="string"&&(t=cP[t]),this.mode=t,this}setVolumeRange(t,s){return this.volume.start=t,this.volume.end=s,this}start(){return this.timer.isRunning?this:(this.parent.setVolume(this.volume.start),this.timer.setDelay(this.delay).setDuration(this.duration),super.start(),this)}updateGameObject(t,s){t.volume=fP(this.volume.start,this.volume.end,s.t)}complete(){switch(super.complete(),this.mode){case 1:this.parent.stop();break;case 2:this.parent.destroy();break}return this}};const cP={stop:1,destroy:2};var ho=function(i,t,s,f,C){cu(i)&&(C=f,f=s,s=t,t=i,i=void 0),f===void 0&&(f=1),C===void 0&&(C=0);var S={mode:0,volume:{start:C,end:f},duration:s};typeof t=="string"&&(t=i.sys.sound.add(t));var r;return t.hasOwnProperty("_fade")?(r=t._fade,r.stop().resetFromJSON(S)):(r=new g0(i,t,S),t._fade=r),r.start(),t.isPlaying||t.setVolume(C).play(),t},Rn=function(i,t,s,f){cu(i)&&(f=s,s=t,t=i,i=void 0),f===void 0&&(f=!0);var C={mode:f?2:1,volume:{start:t.volume,end:0},duration:s},S;return t.hasOwnProperty("_fade")?(S=t._fade,S.stop().resetFromJSON(C)):(S=new g0(i,t,C),t._fade=S),S.start(),t.isPlaying||t.play(),t};const vP={setBackgroundMusicLoopValue(i){return this.backgroundMusicLoopValue=i,this},setBackgroundMusicFadeTime(i){return this.backgroundMusicFadeTime=i,this},getBackgroundMusic(){return this.backgroundMusic},setCurrentBackgroundMusic(i){return this.backgroundMusic=i,i&&(i.setLoop(this.backgroundMusicLoopValue),i.once("complete",function(){this.backgroundMusic===i&&(this.backgroundMusic.destroy(),this.backgroundMusic=void 0)},this).once("destroy",function(){this.backgroundMusic===i&&(this.backgroundMusic=void 0)},this),i.isPlaying||i.play()),this},playBackgroundMusic(i){return this.backgroundMusic&&this.backgroundMusic.key===i?this:(this.stopBackgroundMusic(),this.setCurrentBackgroundMusic(this.sound.add(i)),this.backgroundMusicFadeTime>0&&this.fadeInBackgroundMusic(this.backgroundMusicFadeTime),this)},pauseBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.pause(),this},resumeBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.resume(),this},stopBackgroundMusic(){return this.backgroundMusic&&(this.backgroundMusicFadeTime>0?this.fadeOutBackgroundMusic(this.backgroundMusicFadeTime,!0):(this.backgroundMusic.stop(),this.backgroundMusic.destroy(),this.backgroundMusic=void 0)),this},fadeInBackgroundMusic(i){return this.backgroundMusic&&ho(this.backgroundMusic,i,this.backgroundMusicVolume,0),this},fadeOutBackgroundMusic(i,t){return this.backgroundMusic&&Rn(this.backgroundMusic,i,t),this},crossFadeBackgroundMusic(i,t){var s=this.backgroundMusicFadeTime;return this.backgroundMusicFadeTime=0,this.fadeOutBackgroundMusic(t,!0).playBackgroundMusic(i).fadeInBackgroundMusic(t),this.backgroundMusicFadeTime=s,this},setBackgroundMusicVolume(i){return this.backgroundMusicVolume=i,this}},pP={setBackgroundMusic2LoopValue(i){return this.backgroundMusic2LoopValue=i,this},setBackgroundMusic2FadeTime(i){return this.backgroundMusic2FadeTime=i,this},getBackgroundMusic2(){return this.backgroundMusic2},setCurrentBackgroundMusic2(i){return this.backgroundMusic2=i,i&&(i.setLoop(this.backgroundMusic2LoopValue),i.once("complete",function(){this.backgroundMusic2===i&&(this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0)},this).once("destroy",function(){this.backgroundMusic2===i&&(this.backgroundMusic2=void 0)},this),i.isPlaying||i.play()),this},playBackgroundMusic2(i){return this.backgroundMusic2&&this.backgroundMusic2.key===i?this:(this.stopBackgroundMusic2(),this.setCurrentBackgroundMusic2(this.sound.add(i)),this.backgroundMusic2FadeTime>0&&this.fadeInBackgroundMusic2(this.backgroundMusic2FadeTime),this)},pauseBackgroundMusic2(){return this.backgroundMusic2&&this.backgroundMusic2.pause(),this},resumeBackgroundMusic2(){return this.backgroundMusic2&&this.backgroundMusic2.resume(),this},stopBackgroundMusic2(){return this.backgroundMusic2&&(this.backgroundMusic2FadeTime>0?this.fadeOutBackgroundMusic2(this.backgroundMusic2FadeTime,!0):(this.backgroundMusic2.stop(),this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0)),this},fadeInBackgroundMusic2(i){return this.backgroundMusic2&&ho(this.backgroundMusic2,i,this.backgroundMusic2Volume,0),this},fadeOutBackgroundMusic2(i,t){return this.backgroundMusic2&&Rn(this.backgroundMusic2,i,t),this},crossFadeBackgroundMusic2(i,t){var s=this.backgroundMusic2FadeTime;return this.backgroundMusic2FadeTime=0,this.fadeOutBackgroundMusic2(t,!0).playBackgroundMusic2(i).fadeInBackgroundMusic2(t),this.backgroundMusic2FadeTime=s,this},setBackgroundMusic2Volume(i){return this.backgroundMusic2Volume=i,this}},Nf=Phaser.Utils.Array.Remove,gP={getSoundEffects(){return this.soundEffects},getLastSoundEffect(){return this.soundEffects[this.soundEffects.length-1]},playSoundEffect(i){var t=this.sound.add(i);return t.setVolume(this.soundEffectsVolume),this.soundEffects.push(t),t.once("complete",function(){t.destroy(),this.sound&&Nf(this.soundEffects,t)},this).once("destroy",function(){this.sound&&Nf(this.soundEffects,t)},this).play(),this},fadeInSoundEffect(i){var t=this.getLastSoundEffect();return t&&ho(t,i,this.soundEffectsVolume,0),this},fadeOutSoundEffect(i,t){var s=this.getLastSoundEffect();return s&&Rn(s,i,t),this},fadeOutAllSoundEffects(i,t){for(var s=this.soundEffects.length-1;s>=0;s--)Rn(this.soundEffects[s],i,t);return this},setSoundEffectVolume(i,t){if(t===void 0&&(t=!1),t){var s=this.getLastSoundEffect();s&&s.setVolume(i)}else this.soundEffectsVolume=i;return this}},Vf=Phaser.Utils.Array.Remove,mP={getSoundEffects2(){return this.soundEffects2},getLastSoundEffect2(){return this.soundEffects2[this.soundEffects2.length-1]},playSoundEffect2(i){var t=this.sound.add(i);return t.setVolume(this.soundEffects2Volume),this.soundEffects2.push(t),t.once("complete",function(){t.destroy(),this.sound&&Vf(this.soundEffects2,t)},this).once("destroy",function(){this.sound&&Vf(this.soundEffects2,t)},this).play(),this},fadeInSoundEffect2(i){var t=this.getLastSoundEffect2();return t&&ho(t,i,this.soundEffects2Volume,0),this},fadeOutSoundEffect2(i,t){var s=this.getLastSoundEffect2();return s&&Rn(s,i,t),this},fadeOutAllSoundEffects2(i,t){for(var s=this.soundEffects2.length-1;s>=0;s--)Rn(this.soundEffects2[s],i,t);return this},setSoundEffect2Volume(i,t){if(t===void 0&&(t=!1),t){var s=this.getLastSoundEffect2();s&&s.setVolume(i)}else this.soundEffects2Volume=i;return this}};var m0={};Object.assign(m0,vP,pP,gP,mP);const _e=Phaser.Utils.Objects.GetValue;class x0{constructor(t,s){this.sound=iP(t),this.backgroundMusic=void 0,this._backgroundMusicVolume=_e(s,"bgm.volume",1),this.setBackgroundMusicLoopValue(_e(s,"bgm.loop",!0)),this.setBackgroundMusicFadeTime(_e(s,"bgm.fade",500)),this.backgroundMusic2=void 0,this._backgroundMusic2Volume=_e(s,"bgm2.volume",1),this.setBackgroundMusic2LoopValue(_e(s,"bgm2.loop",!0)),this.setBackgroundMusic2FadeTime(_e(s,"bgm2.fade",500)),this.soundEffects=[],this._soundEffectsVolume=_e(s,"soundEffect.volume",1),this.soundEffects2=[],this._soundEffects2Volume=_e(s,"soundEffect2.volume",1);var f=_e(s,"bgm.initial",void 0);f&&this.setCurrentBackgroundMusic(f);var C=_e(s,"bgm2.initial",void 0);C&&this.setCurrentBackgroundMusic2(C)}destroy(){if(this.backgroundMusic&&this.backgroundMusic.destroy(),this.backgroundMusic=void 0,this.backgroundMusic2&&this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0,this.soundEffects.length)for(var t=this.soundEffects.length-1;t>=0;t--)this.soundEffects[t].destroy();if(this.soundEffects.length=0,this.soundEffects2.length)for(var t=this.soundEffects2.length-1;t>=0;t--)this.soundEffects2[t].destroy();return this.soundEffects2.length=0,this.sound=void 0,this}get backgroundMusicVolume(){return this._backgroundMusicVolume}set backgroundMusicVolume(t){this._backgroundMusicVolume=t,this.backgroundMusic&&this.backgroundMusic.setVolume(t)}get backgroundMusic2Volume(){return this._backgroundMusic2Volume}set backgroundMusic2Volume(t){this._backgroundMusic2Volume=t,this.backgroundMusic2&&this.backgroundMusic2.setVolume(t)}get soundEffectsVolume(){return this._soundEffectsVolume}set soundEffectsVolume(t){this._soundEffectsVolume=t;for(var s=this.soundEffects,f=0,C=s.length;f<C;f++)s[f].setVolume(t)}}Object.assign(x0.prototype,m0);const dh=Phaser.Utils.Objects.GetValue;class xP extends oo{constructor(t,s){super(t,s),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.isRunning=dh(t,"isRunning",!1),this.timeScale=dh(t,"timeScale",1),this.now=dh(t,"now",0),this}toJSON(){return{isRunning:this.isRunning,timeScale:this.timeScale,now:this.now,tickingMode:this.tickingMode}}start(t){return t===void 0&&(t=0),this.delta=0,this.now=t,super.start(),this}seek(t){return this.now=t,this}setTimeScale(t){return this.timeScale=t,this}tick(t){return t*=this.timeScale,this.now+=t,this.delta=t,this.emit("update",this.now,this.delta),this}}class y0 extends xP{startTicking(){super.startTicking(),this.scene.sys.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&this.scene.sys.events.off("update",this.update,this)}update(t,s){return!this.isRunning||this.timeScale===0?this:(this.tick(s),this)}}var yP=function(i,t){return t===void 0&&(t=.5),i<=t?i=i/t:i=1-(i-t)/(1-t),i};const zf=Phaser.Math.Clamp;class TP{constructor(t,s){this.setTimeline(t).reset(s)}setTimeline(t){return this.timeline=t,this}setName(t){return this.name=t,this}setCallbacks(t,s,f,C){return this.target=t,this.onStart=s,this.onProgress=f,this.onComplete=C,this}setDuration(t,s){return s===void 0&&(s=!1),this.duration=t,this.remainder=t,this.t=0,this.yoyo=s,this}setPaused(t){return this.isPaused=t,this}pause(){return this.isPaused=!0,this}resume(){return this.isPaused=!1,this}setRemoved(t){return this.removed=t,this}remove(){return this.removed=!0,this}seek(t){return this.remainder=this.duration*(1-t),this}reset(t){return this.setName(t.name).setDuration(t.duration,t.yoyo).setCallbacks(t.target,t.onStart,t.onProgress,t.onComplete).setPaused(!1).setRemoved(!1),this}onFree(){this.setTimeline().setCallbacks()}getProgress(){var t=1-this.remainder/this.duration;return t=zf(t,0,1),this.yoyo&&(t=yP(t)),t}setProgress(t){t=zf(t,0,1),this.remainder=this.duration*(1-t)}runCallback(t){t&&t(this.target,this.t,this)}update(t,s){if(this.removed)return!0;if(this.isPaused)return!1;this.remainder-=s,this.t=this.getProgress(),this.runCallback(this.onProgress);var f=this.remainder<=0;return f&&this.runCallback(this.onComplete),f}}let CP=class extends ui{allocate(){return this.pop()}free(t){t.onFree(),this.push(t)}freeMultiple(t){for(var s=0,f=t.length;s<f;s++)this.free(t[s]);return this}};const SP=Phaser.Utils.Objects.GetValue,PP=new CP;class EP extends y0{constructor(t,s){super(t,s),this.addedTimers=[],this.timers=[],this.timerPool=SP(s,"pool",PP)}shutdown(){this.isShutdown||(this.timerPool.freeMultiple(this.addedTimers).freeMultiple(this.timers),this.timerPool=void 0,this.addedTimers=void 0,this.timers=void 0,super.shutdown())}addTimer(t){var s=this.timerPool.allocate();return s?s.setTimeline(this).reset(t):s=new TP(this,t),this.addedTimers.push(s),s.runCallback(s.onStart),this.isRunning||this.start(),s}delayCall(t,s,f,C){var S=this.addTimer({duration:t,onComplete:function(r,y,e){f===void 0&&(f=[]),f.push(e),s.apply(C,f)}});return S}getTimers(t){for(var s=[],f=[this.addedTimers,this.timers],C=0,S=f.length;C<S;C++)for(var r=f[C],y=0,e=r.length;y<e;y++){var u=r[y];u.name===t&&s.push(u)}return s}update(t,s){if(super.update(t,s),!!this.isRunning){this.timers.push(...this.addedTimers),this.addedTimers.length=0;for(var f=[],C=0,S=this.timers.length;C<S;C++){var r=this.timers[C],y=r.update(this.now,this.delta);y?this.timerPool.free(r):f.push(r)}this.timers=f,this.timers.length===0&&this.addedTimers.length===0&&this.complete()}}}const MP=Phaser.Utils.Objects.GetValue;var wP=function(i,t){var s=MP(t,"sounds");return s!==!1&&(this.soundManager=new x0(i,s)),this.gameObjectManagers={},this.timeline=new EP(this),this.managersScene=i,this},RP=function(i){this.timeline.timeScale=i;for(var t in this.gameObjectManagers)this.gameObjectManagers[t].setTimeScale(i);return this},AP=function(){return this.timeline.timeScale},OP=function(i){this.soundManager&&this.soundManager.destroy(),this.soundManager=void 0;for(var t in this.gameObjectManagers)this.gameObjectManagers[t].destroy(i),delete this.gameObjectManagers[t];this.timeline&&this.timeline.destroy(),this.timeline=void 0,this.managersScene=void 0};const bP={hasProperty(i){var t=this.gameObject;if(t.hasOwnProperty(i))return!0;var s=t[i];return s!==void 0},getProperty(i){return this.gameObject[i]},setProperty(i,t){return this.gameObject[i]=t,this},easeProperty(i,t,s,f,C,S,r){var y=this.tweens,e=y[i];e&&e.remove();var u=this.gameObject,m={targets:u,duration:s,ease:f,repeat:C,yoyo:S,onComplete:function(){y[i].remove(),y[i]=null,r&&r(u,i)},onCompleteScope:this};return m[i]=t,e=this.scene.tweens.add(m),e.timeScale=this.timeScale,y[i]=e,this}},FP={hasMethod(i){return typeof this.gameObject[i]=="function"},call(i,...t){if(!this.hasMethod(i))return this;var s=this.gameObject;return s[i].apply(s,t),this}},LP={hasData(i){var t=this.gameObject;return t.data?t.data.has(i):!1},getData(i){return this.gameObject.getData(i)},setData(i,t){return this.gameObject.setData(i,t),this}};class vu{constructor(t,s,f){this.GOManager=t,this.tweens={},this.setGO(s,f)}get scene(){return this.GOManager.scene}get timeScale(){return this.GOManager.timeScale}destroy(){this.freeGO(),this.GOManager=void 0}freeTweens(){var t=this.tweens,s;for(var f in t)s=t[f],s&&s.remove(),t[f]=null;return this}freeGO(){return this.freeTweens(),this.gameObject.destroy(),this.gameObject=void 0,this}setGO(t,s){return t.setName(s),this.gameObject=t,this.name=s,this.freeTweens(),this}setTimeScale(t){var s=this.tweens;for(var f in s){var C=s[f];C&&(C.timeScale=t)}return this}}Object.assign(vu.prototype,bP,FP,LP);var pu=function(i){for(var t in i)return!1;return!0};const DP={tint:0,alpha:1},IP={setGOFadeMode(i){return typeof i=="string"&&(i=DP[i]),this.fadeMode=i,this},setGOFadeTime(i){return this.fadeTime=i,this},hasTintFadeEffect(i){return(this.fadeMode===void 0||this.fadeMode===0)&&this.fadeTime>0&&i.setTint!==void 0},hasAlphaFadeEffect(i){return(this.fadeMode===void 0||this.fadeMode===1)&&this.fadeTime>0&&i.setAlpha!==void 0},fadeBob(i,t,s,f){var C=i.gameObject;return this.hasTintFadeEffect(C)?(t!==void 0&&i.setProperty("tintGray",255*t),i.easeProperty("tintGray",Math.floor(255*s),this.fadeTime,"Linear",0,!1,f)):this.hasAlphaFadeEffect(C)?(t!==void 0&&i.setProperty("alpha",t),i.easeProperty("alpha",s,this.fadeTime,"Linear",0,!1,f)):f&&f(C),this}};var ur=function(i){return i>>16&255},dr=function(i){return i>>8&255},fr=function(i){return i&255};const BP=65535,GP=16711935,NP=16776960;var VP=function(i,t){return(t&255)<<16|i&BP},zP=function(i,t){return(t&255)<<8|i&GP},UP=function(i,t){return t&255|i&NP},YP=function(i,t,s,f){return(t&255)<<16|(s&255)<<8|f&255},kP=function(i,t){if(i.hasOwnProperty("tintR"))return i;t===void 0&&(t=16777215);var s=ur(t),f=dr(t),C=fr(t);return Object.defineProperty(i,"tint",{get:function(){return t},set:function(S){S=Math.floor(S)&16777215,i.setTint&&i.setTint(S),t!==S&&(t=S,s=ur(t),f=dr(t),C=fr(t))}}),Object.defineProperty(i,"tintR",{get:function(){return s},set:function(S){S=Math.floor(S)&255,s!==S&&(s=S,i.tint=VP(t,S))}}),Object.defineProperty(i,"tintG",{get:function(){return f},set:function(S){S=Math.floor(S)&255,f!==S&&(f=S,i.tint=zP(t,S))}}),Object.defineProperty(i,"tintB",{get:function(){return C},set:function(S){S=Math.floor(S)&255,C!==S&&(C=S,i.tint=UP(t,S))}}),Object.defineProperty(i,"tintGray",{get:function(){return Math.floor((s+f+C)/3)},set:function(S){S=Math.floor(S)&255,(s!==S||f!==S||C!==S)&&(s=S,f=S,C=S,i.tint=YP(t,S,S,S))}}),i.tint=t,i};const XP=Phaser.Events.EventEmitter;var WP=function(i){if(i.events)return i;var t=new XP,s=i.x;Object.defineProperty(i,"x",{get:function(){return s},set:function(r){s!==r&&(s=r,t.emit("update",i))}});var f=i.y;Object.defineProperty(i,"y",{get:function(){return f},set:function(r){f!==r&&(f=r,t.emit("update",i))}});var C=i.width;Object.defineProperty(i,"width",{get:function(){return C},set:function(r){C!==r&&(C=r,t.emit("update",i))}});var S=i.height;return Object.defineProperty(i,"height",{get:function(){return S},set:function(r){S!==r&&(S=r,t.emit("update",i))}}),i.events=t,i},HP=function(i,t,s,f,C,S){return S===void 0?S={}:S===!0&&(S=$P),typeof s!="number"&&(s=0,f=0),S.x=C.x+C.width*i+s,S.y=C.y+C.height*t+f,S},$P={},KP=function(i,t,s,f,C,S,r){if(i.hasOwnProperty("vp"))return i;typeof s=="function"&&(r=s,s=void 0),typeof C=="function"&&(r=C,C=void 0),s===void 0&&(s=.5),f===void 0&&(f=.5),C===void 0&&(C=0),S===void 0&&(S=0),r===void 0&&(r=HP),WP(t);var y=t.events;i.vp=t;var e=function(){r(s,f,C,S,t,i)};y.on("update",e),i.once("destroy",function(){y.off("update",e),i.vp=void 0}),Object.defineProperty(i,"vpx",{get:function(){return s},set:function(u){s!==u&&(s=u,e())}}),Object.defineProperty(i,"vpy",{get:function(){return f},set:function(u){f!==u&&(f=u,e())}}),Object.defineProperty(i,"vpxOffset",{get:function(){return C},set:function(u){C!==u&&(C=u,e())}}),Object.defineProperty(i,"vpyOffset",{get:function(){return S},set:function(u){S!==u&&(S=u,e())}}),e()};const jP=Phaser.Utils.Array.Remove,ZP={has(i){return this.bobs.hasOwnProperty(i)},exists(i){return this.bobs.hasOwnProperty(i)},get(i){return this.bobs[i]},getGO(i){var t=this.get(i);return t?t.gameObject:null},addGO(i,t){this.remove(i,!0),this.hasTintFadeEffect(t)&&kP(t),this.viewportCoordinateEnable&&KP(t,this.viewport),t.once("destroy",function(){jP(this.removedGOs,t),this.isEmpty&&this.emit("empty")},this);var s=new this.BobClass(this,t,i);return this.bobs[i]=s,this},add(i,...t){var s=this.createGameObjectCallback,f=this.createGameObjectScope,C=s.call(f,this.scene,...t);this.addGO(i,C);var S=this.get(i);return this.fadeBob(S,0,1),this},forEachGO(i,t){for(var s in this.bobs){var f=this.bobs[s].gameObject,C;if(t?C=i.call(t,f,s,this):C=i(f,s,this),C)break}return this}},JP={remove(i,t){if(!this.has(i))return this;var s=this.get(i);return delete this.bobs[i],this.removedGOs.push(s.gameObject),t?s.destroy():this.fadeBob(s,void 0,0,function(){s.destroy()}),this},removeAll(){var i=this.bobs;for(var t in i)this.remove(t);return this},clear(i){i===void 0&&(i=!0);var t=this.bobs;for(var s in t)i&&t[s].destroy(),delete t[s];return this.removedGOs.length=0,this}},QP={hasProperty(i,t){return this.has(i)?this.get(i).hasProperty(t):!1},getProperty(i,t){if(this.has(i))return this.get(i).getProperty(t)},isNumberProperty(i,t){var s=this.getProperty(i,t);return typeof s=="number"},setProperty(i,t,s){return this.has(i)?(this.symbols&&typeof s=="string"&&this.isNumberProperty(i,t)&&(s in this.symbols?s=this.symbols[s]:console.warn(`Can't find symbol ${s}`)),this.get(i).setProperty(t,s),this):this},easeProperty(i,t,s,f,C,S,r,y){return this.has(i)?(f===void 0&&(f=1e3),C===void 0&&(C="Linear"),S===void 0&&(S=0),r===void 0&&(r=!1),this.symbols&&typeof s=="string"&&this.isNumberProperty(i,t)&&(s in this.symbols?s=this.symbols[s]:console.warn(`Can't find symbol ${s}`)),this.get(i).easeProperty(t,s,f,C,S,r,y),this):this},hasTweenTask(i,t){if(!this.has(i))return!1;var s=this.get(i).tweens;return s.hasOwnProperty(t)},getTweenTask(i,t){if(!this.has(i))return null;var s=this.get(i).tweens,f=s[t];return f||null}},qP={hasMethod(i,t){return this.has(i)?this.get(i).hasMethod(t):!1},call(i,t,...s){return this.has(i)?(this.get(i).call(t,...s),this):this}},_P={hasData(i,t){return this.has(i)?this.get(i).hasData(t):!1},getData(i,t){if(this.has(i))return this.get(i).getData(t)},setData(i,t,s){return this.has(i)?(this.get(i).setData(t,s),this):this}};var Mt=function(i){return i.displayWidth!==void 0?i.displayWidth:i.width},St=function(i){return i.displayHeight!==void 0?i.displayHeight:i.height};const Uf=Phaser.Geom.Rectangle,qi=Phaser.Math.Vector2,t2=Phaser.Math.RotateAround;var gu=function(i,t){if(t===void 0?t=new Uf:t===!0&&(fh===void 0&&(fh=new Uf),t=fh),i.getBounds)return i.getBounds(t);var s,f,C,S,r,y,e,u;if(i.parentContainer){var m=i.parentContainer.getBoundsTransformMatrix();bl(i,t),m.transformPoint(t.x,t.y,t),s=t.x,f=t.y,Fl(i,t),m.transformPoint(t.x,t.y,t),C=t.x,S=t.y,Ll(i,t),m.transformPoint(t.x,t.y,t),r=t.x,y=t.y,Dl(i,t),m.transformPoint(t.x,t.y,t),e=t.x,u=t.y}else bl(i,t),s=t.x,f=t.y,Fl(i,t),C=t.x,S=t.y,Ll(i,t),r=t.x,y=t.y,Dl(i,t),e=t.x,u=t.y;return t.x=Math.min(s,C,r,e),t.y=Math.min(f,S,y,u),t.width=Math.max(s,C,r,e)-t.x,t.height=Math.max(f,S,y,u)-t.y,t},fh=void 0,bl=function(i,t,s){return t===void 0?t=new qi:t===!0&&(Ne===void 0&&(Ne=new qi),t=Ne),i.getTopLeft?i.getTopLeft(t):(t.x=i.x-Mt(i)*i.originX,t.y=i.y-St(i)*i.originY,lo(i,t,s))},Fl=function(i,t,s){return t===void 0?t=new qi:t===!0&&(Ne===void 0&&(Ne=new qi),t=Ne),i.getTopRight?i.getTopRight(t):(t.x=i.x-Mt(i)*i.originX+Mt(i),t.y=i.y-St(i)*i.originY,lo(i,t,s))},Ll=function(i,t,s){return t===void 0?t=new qi:t===!0&&(Ne===void 0&&(Ne=new qi),t=Ne),i.getBottomLeft?i.getBottomLeft(t):(t.x=i.x-Mt(i)*i.originX,t.y=i.y-St(i)*i.originY+St(i),lo(i,t,s))},Dl=function(i,t,s){return t===void 0?t=new qi:t===!0&&(Ne===void 0&&(Ne=new qi),t=Ne),i.getBottomRight?i.getBottomRight(t):(t.x=i.x-Mt(i)*i.originX+Mt(i),t.y=i.y-St(i)*i.originY+St(i),lo(i,t,s))},Ne=void 0,lo=function(i,t,s){if(s===void 0&&(s=!1),i.rotation!==0&&t2(t,i.x,i.y,i.rotation),s&&i.parentContainer){var f=i.parentContainer.getBoundsTransformMatrix();f.transformPoint(t.x,t.y,t)}return t};const Wn=Phaser.Utils.Objects.GetValue;var T0=function(i,t,s){var f,C,S,r,y;if(typeof s=="number"?f=s:(f=Wn(s,"color"),C=Wn(s,"lineWidth"),S=Wn(s,"fillColor"),r=Wn(s,"fillAlpha",1),y=Wn(s,"padding",0)),Array.isArray(i))for(var e=0,u=i.length;e<u;e++)Yf(i[e],t,f,C,S,r,y);else Yf(i,t,f,C,S,r,y)},Yf=function(i,t,s,f,C,S,r){var y=i.getBounds||i.width!==void 0&&i.height!==void 0;if(y){s===void 0&&(s=16777215),f===void 0&&(f=1),C===void 0&&(C=null),S===void 0&&(S=1),r===void 0&&(r=0);var e=bl(i,Hs[0]);e.x-=r,e.y-=r;var u=Fl(i,Hs[1]);u.x+=r,u.y-=r;var m=Dl(i,Hs[2]);m.x+=r,m.y+=r;var d=Ll(i,Hs[3]);d.x-=r,d.y+=r,C!==null&&t.fillStyle(C,S).fillPoints(Hs,!0,!0),s!==null&&t.lineStyle(f,s).strokePoints(Hs,!0,!0)}},Hs=[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],e2=function(i,t){return this.forEachGO(function(s){s.drawBounds?s.drawBounds(i,t):T0(s,i,t)}),this},C0={drawGameObjectsBounds:e2};Object.assign(C0,IP,ZP,JP,QP,qP,_P);const i2=Phaser.Cameras.Scene2D.BaseCamera;var s2=function(i){return i instanceof i2};const S0=Phaser.Geom.Rectangle;var Dn=function(i,t,s){s2(t)||(s=t,t=void 0),s===void 0?s=new S0:s===!0&&(s=n2);var f=i.sys.scale,C=f.baseSize,S=f.parentSize,r=f.canvasBounds,y=f.displayScale,e=r.x>=0?0:-(r.x*y.x),u=r.y>=0?0:-(r.y*y.y),m;S.width>=r.width?m=C.width:m=C.width-(r.width-S.width)*y.x;var d;return S.height>=r.height?d=C.height:d=C.height-(r.height-S.height)*y.y,s.setTo(e,u,m,d),t&&(s.width/=t.zoomX,s.height/=t.zoomY,s.centerX=t.centerX+t.scrollX,s.centerY=t.centerY+t.scrollY),s},n2=new S0;const ke=Phaser.Utils.Objects.GetValue;class mu{constructor(t,s){this.scene=t,this.BobClass=ke(s,"BobClass",vu),this.setCreateGameObjectCallback(ke(s,"createGameObject"),ke(s,"createGameObjectScope")),this.setEventEmitter(ke(s,"eventEmitter",void 0));var f=ke(s,"fade",500);typeof f=="number"?(this.setGOFadeMode(),this.setGOFadeTime(f)):(this.setGOFadeMode(ke(f,"mode")),this.setGOFadeTime(ke(f,"time",500)));var C=ke(s,"viewportCoordinate",!1);C!==!1?(this.setViewportCoordinateEnable(ke(s,"enable",!0)),this.setViewport(ke(C,"viewport"))):this.setViewportCoordinateEnable(!1),this.setSymbols(ke(s,"symbols")),this.bobs={},this.removedGOs=[],this._timeScale=1}destroy(t){this.clear(!t),this.createGameObjectCallback=void 0,this.viewport=void 0,this.scene=void 0}set timeScale(t){if(this._timeScale!==t){this._timeScale=t;var s=this.bobs;for(var f in s)s[f].setTimeScale(t)}}get timeScale(){return this._timeScale}setTimeScale(t){return this.timeScale=t,this}setCreateGameObjectCallback(t,s){return this.createGameObjectCallback=t,this.createGameObjectScope=s,this}setViewportCoordinateEnable(t){return t===void 0&&(t=!0),this.viewportCoordinateEnable=t,this}setViewport(t){return t===void 0&&(t=Dn(this.scene,this.scene.cameras.main)),this.viewport=t,this}setSymbols(t){return this.symbols=t,this}get isEmpty(){return pu(this.bobs)&&this.removedGOs.length===0}}Object.assign(mu.prototype,Ln,C0);const P0={addGameObjectManager(i,t){i===void 0&&(i={}),t===void 0&&(t=mu),i.createGameObjectScope||(i.createGameObjectScope=this);var s=new t(this.managersScene,i);return this.gameObjectManagers[i.name]=s,this},getGameObjectManager(i){return this.gameObjectManagers[i]},getGameObjectManagerNames(){var i=[];for(var t in this.gameObjectManagers)i.push(t);return i}},r2={createGameObject(i,t,...s){return this.getGameObjectManager(i).add(t,...s),this},destroyGameObject(i,t){var s=this.getGameObjectManager(i);return t===void 0?s.removeAll():s.remove(t),this},callGameObjectMethod(i,t,s,...f){return this.getGameObjectManager(i).call(t,s,...f),this},setGameObjectProperty(i,t,s,f){return this.getGameObjectManager(i).setProperty(t,s,f),this},easeGameObjectProperty(i,t,s,f,C,S,r,y){return this.getGameObjectManager(i).easeProperty(t,s,f,C,S,r,y),this},getGameObject(i,t,s){var f=this.getGameObjectManager(i);if(typeof t=="string")return f.getGO(t);var C=t;C===void 0&&(C=f.bobs),s===void 0&&(s={});for(t in C)s[t]=f.getGO(t);return s},addGameObject(i,t,s){var f=this.getGameObjectManager(i);if(typeof t=="string")f.addGO(t,s);else{var C=t;for(t in C)f.addGO(t,C[t])}return this},drawGameObjectsBounds(i,t,s){i instanceof Phaser.GameObjects.Graphics&&(s=t,t=i,i=void 0),i===void 0&&(i=this.getGameObjectManagerNames()),Array.isArray(i)||(i=[i]);for(var f=0,C=i.length;f<C;f++)this.getGameObjectManager(i[f]).drawGameObjectsBounds(t,s);return this}};var a2=function(i){class t extends i{}var s={initManagers:wP,setTimeScale:RP,getTimeScale:AP,destroyManagers:OP};return Object.assign(t.prototype,s,P0,r2),t},o2=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,h2=/^0x[0-9A-F]+$/i,E0=function(i){return typeof i!="string"||(i===""?i=null:o2.test(i)?i=parseFloat(i):h2.test(i)?i=parseInt(i,16):i==="false"?i=!1:i==="true"&&(i=!0)),i},Ya=function(i){return i.replace(l2,"\\$&").replace(u2,"\\x2d")},l2=/[|\\{}()[\]^$+*?.]/g,u2=/-/g;let M0=class{constructor(t){this.setEventEmitter(Ft(t,"eventEmitter",void 0)),this.setValueConverter(Ft(t,"valueConvert",!0)),this.setLoopEnable(Ft(t,"loop",!1)),this.setMultipleLinesTagEnable(Ft(t,"multipleLinesTag",!1));var s=Ft(t,"delimiters","<>");this.setDelimiters(s[0],s[1]),this.setTranslateTagNameCallback(Ft(t,"translateTagNameCallback")),this.isRunning=!1,this.isPaused=!1,this.skipEventFlag=!1,this.justCompleted=!1,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}setMultipleLinesTagEnable(t){return t===void 0&&(t=!0),this.multipleLinesTagEnable=t,this}setDelimiters(t,s){s===void 0&&(s=t[1],t=t[0]),this.delimiterLeft=t,this.delimiterRight=s,t=Ya(this.delimiterLeft),s=Ya(this.delimiterRight);var f=this.multipleLinesTagEnable?"gs":"gi";return this.reSplit=RegExp(`${t}(.+?)${s}`,f),this}setTranslateTagNameCallback(t){return this.translateTagNameCallback=t,this}setValueConverter(t){return t===!0?t=E0:t||(t=d2),this.valueConverter=t,this}setLoopEnable(t){return t===void 0&&(t=!0),this.loopEnable=t,this}setSource(t){return this.source=t,this}resetIndex(t){return t===void 0&&(t=0),this.progressIndex=t,this.reSplit.lastIndex=t,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null,this.justCompleted=!1,this.isRunning=!1,this}start(t){return this.setSource(t).restart(),this}restart(){this.resetIndex().next()}next(){if(this.isPaused&&this.onResume(),this.isRunning)return this;if(this.isRunning=!0,this.justCompleted)return this.isRunning=!1,this;this.reSplit.lastIndex===0&&this.onStart();var t=this.source,s=t.length;for(this.reSplit.lastIndex=this.progressIndex;;){var f=this.reSplit.exec(t);if(!f){if(this.progressIndex<s&&(this.onContent(t.substring(this.progressIndex,s)),this.isPaused)){this.progressIndex=s;break}this.onComplete(),this.isRunning=!1;return}var C=this.reSplit.lastIndex,S=C-f[0].length;if(this.progressIndex<S&&(this.onContent(t.substring(this.progressIndex,S)),this.isPaused)){this.progressIndex=S;break}if(this.onTag(f[1]),this.progressIndex=C,this.isPaused)break}return this.isRunning=!1,this}skipEvent(){return this.skipEventFlag=!0,this}pause(){return this.isPaused||this.onPause(),this}pauseUntilEvent(t,s){return this.isPaused?this:(this.pause(),t.once(s,function(){this.next()},this),this)}onContent(t){this.skipEventFlag=!1,this.emit("content",t),this.lastContent=t}onTag(t){}onStart(){this.isRunning=!0,this.emit("start",this)}onComplete(){this.isRunning=!1,this.justCompleted=!0,this.emit("complete",this),this.loopEnable&&this.resetIndex()}onPause(){this.isPaused=!0,this.emit("pause",this)}onResume(){this.isPaused=!1,this.emit("resume",this)}};const d2=function(i){return i};Object.assign(M0.prototype,Ln);var f2=function(i,t){if(i==null)return[];for(var s=i.split(","),f=0,C=s.length;f<C;f++)s[f]=t(s[f]);return s};class c2 extends M0{constructor(t){t===void 0&&(t={}),t.hasOwnProperty("multipleLinesTag")||(t.multipleLinesTag=!1),super(t),this.setTagExpression(Ft(t,"regex.tag",void 0)),this.setValueExpression(Ft(t,"regex.value",void 0));var s=Ft(t,"delimiters","<>");this.setDelimiters(s[0],s[1])}setTagExpression(t){return t||(t=ta),this.tagExpression=t,this}setValueExpression(t){return t||(t=ta),this.valueExpression=t,this}setDelimiters(t,s){super.setDelimiters(t,s);var f=`(${this.tagExpression})(=(${this.valueExpression}))?`;if(this.reTag=RegExp(f,"i"),this.tagExpression!==ta||this.valueExpression!==ta){var C=`${this.tagExpression}(=${this.valueExpression})?`,S=`/${this.tagExpression}`;t=Ya(this.delimiterLeft),s=Ya(this.delimiterRight);var r=this.multipleLinesTagEnable?"gs":"gi";this.reSplit=RegExp(`${t}((${C})|(${S}))${s}`,r)}return this}onTag(t){var s=t.match(this.reTag),f=s[1],C=f.charAt(0)==="/";if(C&&(f=f.substring(1,f.length)),this.translateTagNameCallback&&(f=this.translateTagNameCallback(f)),this.skipEventFlag=!1,C)this.emit(`-${f}`),this.skipEventFlag||this.emit("-",f),this.lastTagEnd=f;else{var S=f2(s[3],this.valueConverter);this.emit(`+${f}`,...S),this.skipEventFlag||this.emit("+",f,...S),this.lastTagStart=f}}}const ta="[^=]+";var v2=function(i,t,s){var f="color",C;t.on("start",function(){C=i.textStyle.color}).on(`+${f}`,function(S){i.textStyle.setColor(S),t.skipEvent()}).on(`-${f}`,function(){i.textStyle.setColor(C),t.skipEvent()}).on("complete",function(){i.textStyle.setColor(C)})},p2=function(i,t,s){var f="stroke",C;t.on("start",function(){C=i.textStyle.stroke,i.textStyle.setStrokeStyle(null)}).on(`+${f}`,function(S){S===void 0&&(S=C),i.textStyle.setStrokeStyle(S),t.skipEvent()}).on(`-${f}`,function(){i.textStyle.setStrokeStyle(null),t.skipEvent()}).on("complete",function(){i.textStyle.setStrokeStyle(C)})},g2=function(i,t,s){var f="b";t.on("start",function(){i.textStyle.setBold(!1)}).on(`+${f}`,function(){i.textStyle.setBold(!0),t.skipEvent()}).on(`-${f}`,function(){i.textStyle.setBold(!1),t.skipEvent()})},m2=function(i,t,s){var f="i";t.on("start",function(){i.textStyle.setItalic(!1)}).on(`+${f}`,function(){i.textStyle.setItalic(!0),t.skipEvent()}).on(`-${f}`,function(){i.textStyle.setItalic(!1),t.skipEvent()})},x2=function(i,t,s){var f="size",C;t.on("start",function(){C=i.textStyle.fontSize}).on(`+${f}`,function(S){i.textStyle.setFontSize(S),t.skipEvent()}).on(`-${f}`,function(){i.textStyle.setFontSize(C),t.skipEvent()}).on("complete",function(){i.textStyle.setFontSize(C)})},y2=function(i,t,s){var f="y",C;t.on("start",function(){C=i.textStyle.offsetY,i.textStyle.setOffsetY(0)}).on(`+${f}`,function(S){S===void 0&&(S=C),i.textStyle.setOffsetY(S),t.skipEvent()}).on(`-${f}`,function(){i.textStyle.setOffsetY(0),t.skipEvent()}).on("complete",function(){i.textStyle.setOffsetY(0)})},T2=function(i,t,s){var f="x",C;t.on("start",function(){C=i.textStyle.offsetY,i.textStyle.setOffsetX(0)}).on(`+${f}`,function(S){S===void 0&&(S=C),i.textStyle.setOffsetX(S),t.skipEvent()}).on(`-${f}`,function(){i.textStyle.setOffsetX(0),t.skipEvent()}).on("complete",function(){i.textStyle.setOffsetX(0)})},C2=function(i,t,s){var f="left",C;t.on("start",function(){C=i.textStyle.leftSpace,i.textStyle.setLeftSpace(0)}).on(`+${f}`,function(S){S===void 0&&(S=C),i.textStyle.setLeftSpace(S),t.skipEvent()}).on(`-${f}`,function(){i.textStyle.setLeftSpace(0),t.skipEvent()}).on("complete",function(){i.textStyle.setLeftSpace(0)})},S2=function(i,t,s){var f="right",C;t.on("start",function(){C=i.textStyle.rightSpace,i.textStyle.setRightSpace(0)}).on(`+${f}`,function(S){S===void 0&&(S=C),i.textStyle.setRightSpace(S),t.skipEvent()}).on(`-${f}`,function(){i.textStyle.setRightSpace(0),t.skipEvent()}).on("complete",function(){i.textStyle.setRightSpace(0)})},P2=function(i,t,s){var f="shadow",C;t.on("start",function(){C=i.textStyle.shadowColor,i.textStyle.setShadowColor(null)}).on(`+${f}`,function(S){S===void 0&&(S=C),i.textStyle.setShadowColor(S),t.skipEvent()}).on(`-${f}`,function(){i.textStyle.setShadowColor(null),t.skipEvent()}).on("complete",function(){i.textStyle.setShadowColor(C)})},E2=function(i,t,s){var f="align";t.on(`+${f}`,function(C){i.textStyle.setAlign(C),t.skipEvent()}).on(`-${f}`,function(){i.textStyle.setAlign(),t.skipEvent()}).on("complete",function(){i.textStyle.setAlign()})},M2=function(i,t,s){var f="img";t.on(`+${f}`,function(C){var S=i.imageManager.get(C);l0.call(i,S.key,S.frame,{width:S.width,hieght:S.height,leftSpace:S.left,rightSpace:S.right}),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},w2=function(i,t,s){var f="space";t.on(`+${f}`,function(C){u0.call(i,C),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},R2=function(i,t,s){var f="speed";t.on(`+${f}`,function(C){kf(i,C),t.skipEvent()}).on(`-${f}`,function(){kf(i,void 0),t.skipEvent()})},A2=function(i){this.typeWriter.setTypingSpeed(i)},kf=function(i,t){ct.call(i,"speed",A2,t,i)},O2=function(i,t,s){var f="se";t.on(`+${f}`,function(C,S){ct.call(i,f,b2,[C,S],i),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()});var f="se2";t.on(`+${f}`,function(C,S){ct.call(i,f,F2,[C,S],i),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},b2=function(i){if(!this.skipSoundEffect){var t=i[0],s=i[1];this.soundManager.playSoundEffect(t),s&&this.soundManager.fadeInSoundEffect(s)}},F2=function(i){if(!this.skipSoundEffect){var t=i[0],s=i[1];this.soundManager.playSoundEffect2(t),s&&this.soundManager.fadeInSoundEffect2(s)}},L2=function(i,t,s){var f="se.fadein";t.on(`+${f}`,function(C){ct.call(i,f,D2,C,i),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()});var f="se2.fadein";t.on(`+${f}`,function(C){ct.call(i,f,I2,C,i),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},D2=function(i){this.soundManager.fadeInSoundEffect(i)},I2=function(i){this.soundManager.fadeInSoundEffect2(i)},B2=function(i,t,s){var f="se.fadeout";t.on(`+${f}`,function(C,S){S=S==="stop",ct.call(i,f,G2,[C,S],i),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()});var f="se2.fadeout";t.on(`+${f}`,function(C,S){S=S==="stop",ct.call(i,f,N2,[C,S],i),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},G2=function(i){this.soundManager.fadeOutSoundEffect(...i)},N2=function(i){this.soundManager.fadeOutSoundEffect2(...i)},V2=function(i,t,s){var f="se.volume";t.on(`+${f}`,function(C){ct.call(i,f,z2,C,i),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()});var f="se2.volume";t.on(`+${f}`,function(C){ct.call(i,f,U2,C,i),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},z2=function(i){this.soundManager.setSoundEffectVolume(i,!0)},U2=function(i){this.soundManager.setSoundEffectVolume2(i,!0)},Y2=function(i,t,s){var f="bgm";t.on(`+${f}`,function(C,S){ct.call(i,f,k2,[C,S],i),t.skipEvent()}).on(`-${f}`,function(){ct.call(i,"bgm.stop",X2,void 0,i),t.skipEvent()});var f="bgm2";t.on(`+${f}`,function(C,S){ct.call(i,f,W2,[C,S],i),t.skipEvent()}).on(`-${f}`,function(){ct.call(i,"bgm2.stop",H2,void 0,i),t.skipEvent()})},k2=function(i){var t=i[0],s=i[1];this.soundManager.playBackgroundMusic(t),s&&this.soundManager.fadeInBackgroundMusic(s)},X2=function(){this.soundManager.stopBackgroundMusic()},W2=function(i){var t=i[0],s=i[1];this.soundManager.playBackgroundMusic2(t),s&&this.soundManager.fadeInBackgroundMusic2(s)},H2=function(){this.soundManager.stopBackgroundMusic2()},$2=function(i,t,s){var f="bgm.fadein";t.on(`+${f}`,function(C){ct.call(i,f,K2,C,i),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()});var f="bgm2.fadein";t.on(`+${f}`,function(C){ct.call(i,f,j2,C,i),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},K2=function(i){this.soundManager.fadeInBackgroundMusic(i)},j2=function(i){this.soundManager.fadeInBackgroundMusic2(i)},Z2=function(i,t,s){var f="bgm.fadeout";t.on(`+${f}`,function(C,S){S=S==="stop",ct.call(i,f,J2,[C,S],i),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()});var f="bgm2.fadeout";t.on(`+${f}`,function(C,S){S=S==="stop",ct.call(i,f,Q2,[C,S],i),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},J2=function(i){this.soundManager.fadeOutBackgroundMusic(...i)},Q2=function(i){this.soundManager.fadeOutBackgroundMusic2(...i)},q2=function(i,t,s){var f="bgm.cross";t.on(`+${f}`,function(C,S){ct.call(i,f,_2,[C,S],i),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()});var f="bgm2.cross";t.on(`+${f}`,function(C,S){ct.call(i,f,tE,[C,S],i),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},_2=function(i){this.soundManager.crossFadeBackgroundMusic(...i)},tE=function(i){this.soundManager.crossFadeBackgroundMusic2(...i)},eE=function(i,t,s){var f="bgm.pause";t.on(`+${f}`,function(){ct.call(i,f,iE,void 0,i),t.skipEvent()}).on(`-${f}`,function(){ct.call(i,"bgm.resume",sE,void 0,i),t.skipEvent()});var f="bgm2.pause";t.on(`+${f}`,function(){ct.call(i,f,nE,void 0,i),t.skipEvent()}).on(`-${f}`,function(){ct.call(i,"bgm2.resume",rE,void 0,i),t.skipEvent()})},iE=function(){this.soundManager.pauseBackgroundMusic()},sE=function(){this.soundManager.resumeBackgroundMusic()},nE=function(){this.soundManager.pauseBackgroundMusic2()},rE=function(){this.soundManager.resumeBackgroundMusic2()},aE=function(i,t,s){var f="camera.fadein";t.on(`+${f}`,function(C,S,r,y){ct.call(i,f,oE,[C,S,r,y],i),t.skipEvent()})},oE=function(i){this.targetCamera.fadeIn(...i)},hE=function(i,t,s){var f="camera.fadeout";t.on(`+${f}`,function(C,S,r,y){ct.call(i,f,lE,[C,S,r,y],i),t.skipEvent()})},lE=function(i){this.targetCamera.fadeOut(...i)},uE=function(i,t,s){var f="camera.shake";t.on(`+${f}`,function(C,S){ct.call(i,f,dE,[C,S],i),t.skipEvent()})},dE=function(i){this.targetCamera.shake(...i)},fE=function(i,t,s){var f="camera.flash";t.on(`+${f}`,function(C,S,r,y){ct.call(i,f,cE,[C,S,r,y],i),t.skipEvent()})},cE=function(i){this.targetCamera.flash(...i)},vE=function(i,t,s){var f="camera.zoom";t.on(`+${f}`,function(C){ct.call(i,f,pE,C,i),t.skipEvent()}).on(`+${f}.to`,function(C,S,r){ct.call(i,"camera.zoom.to",gE,[C,S,r],i),t.skipEvent()})},pE=function(i){this.targetCamera.setZoom(i)},gE=function(i){this.targetCamera.zoomTo(...i)};const Xf=Phaser.Math.DegToRad;var mE=function(i,t,s){var f="camera.rotate";t.on(`+${f}`,function(C){C=Xf(C),ct.call(i,f,xE,C,i),t.skipEvent()}).on(`+${f}.to`,function(C,S,r){C=Xf(C),ct.call(i,"camera.rotate.to",yE,[C,S,r],i),t.skipEvent()})},xE=function(i){this.targetCamera.setRotation(i)},yE=function(i){var t=i[0],s=i[1],f=i[2];this.targetCamera.rotateTo(t,!1,s,f)},TE=function(i,t,s){var f="camera.scroll";t.on(`+${f}`,function(C,S){ct.call(i,f,CE,[C,S],i),t.skipEvent()}).on(`+${f}.to`,function(C,S,r,y){ct.call(i,"camera.scroll.to",SE,[C,S,r,y],i),t.skipEvent()})},CE=function(i){this.targetCamera.setScroll(...i)},SE=function(i){var t=i[0],s=i[1],f=i[2],C=i[3],S=this.targetCamera,r=S.scrollX,y=S.scrollY;S.setScroll(t,s),t+=S.centerX,s+=S.centerY,S.setScroll(r,y),S.pan(t,s,f,C)},PE=function(i,t,s){var f="wait",C="click";t.on(`+${f}`,function(S){Wf(i,S),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()}).on(`+${C}`,function(){Wf(i,"click"),t.skipEvent()}).on(`-${C}`,function(){t.skipEvent()})},EE=function(i){this.typeWriter.wait(i)},Wf=function(i,t){ct.call(i,"wait",EE,t,i)},ME=function(i,t,s){var f="r";t.on(`+${f}`,function(){Pr.call(i,`
`),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},wE=function(i,t,s){for(var f=["pagebreak","pb"],C=0,S=f.length;C<S;C++){var r=f[C];t.on(`+${r}`,function(){Pr.call(i,"\f"),t.skipEvent()}).on(`-${r}`,function(){t.skipEvent()})}},RE=function(i,t,s){var f="content.off";t.on(`+${f}`,function(){t.setContentOutputEnable(!1),t.skipEvent()})},AE=function(i,t,s){var f="content.on";t.on(`+${f}`,function(){t.setContentOutputEnable(),t.skipEvent()})},OE=function(i,t,s){t.on("content",function(f){if(t.contentOutputEnable)Pr.call(i,f);else{var C=`+${t.lastTagStart}`;i.emit(`parser.${C}#content`,t,f)}})},bE=function(i,t,s){t.on("start",function(){i.emit("parser.start",t)}).on("+",function(f,...C){if(!t.skipEventFlag){var S=`+${f}`,r=C;i.emit(`parser.${S}`,t,...C,r),Hf(i,S,r)}}).on("-",function(f){if(!t.skipEventFlag){var C=`-${f}`,S=[];i.emit(`parser.${C}`,t,S),Hf(i,C,S)}}).on("complete",function(){i.emit("parser.complete",t)})},FE=function(i,t){var s=`tag.${t}`;i==null?this.emit(s):this.emit(s,...i)},Hf=function(i,t,s){ct.call(i,t,FE,s,i)};const $f=[v2,p2,g2,m2,x2,P2,E2,y2,T2,C2,S2,M2,w2,R2,O2,L2,B2,V2,Y2,$2,Z2,q2,eE,aE,hE,uE,fE,vE,mE,TE,PE,ME,wE,RE,AE,OE,bE];var LE=function(i,t,s){for(var f=0,C=$f.length;f<C;f++)$f[f](i,t,s)},DE=function(i,t){for(var s=i.commentLineStart,f=t.split(`
`),C=0,S=f.length;C<S;C++){var r=f[C];r===""||(r.trim().length===0||s&&r.startsWith(s))&&(f[C]="")}return f.join("")};const IE=Phaser.Utils.Objects.GetValue;class BE extends c2{constructor(t,s){s===void 0&&(s={}),s.hasOwnProperty("delimiters")||(s.delimiters="[]"),super(s),LE(t,this,s),this.setCommentLineStartSymbol(IE(s,"comment","//")),this.setContentOutputEnable()}setCommentLineStartSymbol(t){return this.commentLineStart=t,this}setContentOutputEnable(t){return t===void 0&&(t=!0),this.contentOutputEnable=t,this}start(t){return super.start(DE(this,t)),this}}const GE={setDefaultTypingSpeed(i){return this.defaultSpeed=i,this},setTypingSpeed(i){return i===void 0&&(i=this.defaultSpeed),this.speed=i,this}},Hn="page.fadeout";var NE=function(){if(!this.fadeOutPageCallback||!this.children)return this.emit(Hn),this;var i=this.children.filter(function(f){return f.renderable}),t=this.fadeOutPageCallback(i,this.fadeOutPageDuration);if(!t)this.emit(Hn);else if(t.once)t.once("complete",function(){this.emit(Hn)},this);else if(t.then){var s=this;t.then(function(){s.emit(Hn)})}else this.emit(Hn);return this},uo=function(i,t){return new Promise(function(s,f){i.once(t,function(){s()})})},se=function(i){return uo(i,"complete")},VE=function(i){return this.children=i,this.index=0,this.isPageTyping=!0,this.onTypeStart&&this.onTypeStart(i),this.typing(),se(this)};const zE="delay",w0="anim";var R0=function(i){i===void 0&&(i=0);var t=0;for(this.inTypingProcessLoop=!0;this.inTypingProcessLoop;){var s=this.getNextChild();if(!s){this.timeline.isRunning?this.timeline.once("complete",function(){this.isPageTyping=!1,this.emit("complete")},this):(this.isPageTyping=!1,this.emit("complete"));break}if(s.renderable){var f=this.animationConfig;if(f.duration>0){var C=this.timeline.addTimer({name:w0,target:s,duration:f.duration,yoyo:f.yoyo,onStart:f.onStart,onProgress:f.onProgress,onComplete:f.onComplete});this.skipTypingAnimation&&C.seek(1)}else f.onStart&&f.onStart(s,0);this.minSizeEnable&&this.textPlayer.setToMinSize(),this.textPlayer.emit("typing",s);var S=this.nextChild;if(S&&!(this.skipSpaceEnable&&$C(S))){if(t+=this.speed+i,i=0,t>0){this.typingTimer=this.timeline.addTimer({name:zE,target:this,duration:t,onComplete:function(r,y,e){r.typingTimer=void 0,R0.call(r,e.remainder)}});break}}}else KC(s)&&s.exec()}this.minSizeEnable&&this.textPlayer.setToMinSize(),this.inTypingProcessLoop=!1},UE=function(){return this.timeline.pause(),this},YE=function(){return this.timeline.resume(),this},kE=function(){return this.isTypingPaused?this:(this.typingTimer?(this.typingTimer.pause(),this.isTypingPaused=!0):this.inTypingProcessLoop&&(this.inTypingProcessLoop=!1,this.isTypingPaused=!0),this)},XE=function(i){return this.isTypingPaused?(i===void 0&&(i=0),this.typingTimer?(this.isTypingPaused=!1,this.typingTimer.resume(),this.typingTimer.remainder+=i):this.isTypingPaused&&(this.isTypingPaused=!1,this.typing(i)),this):this};const Je="_remove.wait",Il="_remove.play",Kf=[Je,Il];var ns=function(i,t,s,f,C){return function(){i.emit(Je,C),t.apply(f,s)}},jf=function(i,t,s,f,C){var S=ns(i,s,f,C,"custom"),r=t?`wait.${t}`:"wait";i.emit(r,S)},WE=function(i,t,s,f,C){var S=ns(i,s,f,C,"time"),r;i.once(Je,function(){r&&(r.remove(),r=void 0)}),r=i.timeline.delayCall(t,S),i.emit("wait.time",t)},HE=function(i,t,s,f){var C=i.clickEE;if(C){var S=ns(i,t,s,f,"click");i.once(Je,function(){C.off("pointerdown",S,i)}),C.once("pointerdown",S,i),i.emit("wait.click")}},ea=function(i,t,s,f,C){var S=ns(i,s,f,C,"music");t&&(i.once(Je,function(){t.off("complete",S,i)}),t.once("complete",S,i)),i.emit("wait.music",t),t||S()},$E=function(i){switch(i){case"camera.fadein":case"camera.fadeout":case"camera.flash":case"camera.shake":case"camera.zoom":case"camera.rotate":case"camera.scroll":return!0;default:return!1}},KE=function(i,t,s,f,C){var S=ns(i,s,f,C,`camera.${t}`),r=i.targetCamera,y,e;switch(t){case"camera.fadein":y=r.fadeEffect,e="camerafadeincomplete";break;case"camera.fadeout":y=r.fadeEffect,e="camerafadeoutcomplete";break;case"camera.flash":y=r.flashEffect,e="cameraflashcomplete";break;case"camera.shake":y=r.shakeEffect,e="camerashakecomplete";break;case"camera.zoom":y=r.zoomEffect,e="camerazoomcomplete";break;case"camera.rotate":y=r.rotateToEffect,e="camerarotatecomplete";break;case"camera.scroll":y=r.panEffect,e="camerapancomplete";break}y.isRunning?(i.once(Je,function(u){r.off(e,S,i)}),r.once(e,S,i),i.emit("wait.camera",t)):(i.emit("wait.camera",t),S())},jE=function(i,t,s,f,C){var S=ns(i,s,f,C,"keydown"),r=`keydown-${t.toUpperCase()}`,y=i.scene.input.keyboard;i.once(Je,function(){y.off(r,S,i)}),y.once(r,S,i),i.emit("wait.keydown",t)},ZE=function(i,t){var s=t.split(".");return i.gameObjectManagers.hasOwnProperty(s[0])},JE=function(i,t,s,f,C){var S=ns(i,s,f,C),r=t.split("."),y=r[0],e=i.getGameObjectManager(y),u=`wait.${y}`;switch(r.length){case 1:e.isEmpty?(i.emit(u),S()):(i.once(Je,function(x){e.off("empty",S,i)}),e.once("empty",S,i),i.emit(u));return;case 2:var l=r[1];if(!e.has(l))i.emit(u,l),S();else{var m=e.get(l),d=m.gameObject;i.once(Je,function(){d.off("destroy",S,i)}),d.once("destroy",S,i),i.emit(u,l)}return;case 3:var l=r[1],h=r[2],n=e.getProperty(l,h);if(typeof n=="number"){var a=e.getTweenTask(l,h);a?(i.once(Je,function(){a.off("complete",S,i)}),a.once("complete",S,i),i.emit(u,l,h)):(i.emit(u,l,h),S());return}var c=h,o=c.startsWith("!");if(o&&(c=c.substring(1)),e.hasData(l,c)){var d=e.getGO(l),v=d.getData(c),g=!o;if(v===g)i.emit(u,l,h),S();else{var p=`changedata-${c}`,s=function(E,M,P){M=!!M,M===g&&S.call(i)};i.once(Je,function(){d.off(p,s)}),d.on(p,s),i.emit(u,l,h)}return}}};const QE=Phaser.Input.Keyboard.KeyCodes;var A0=function(i,t,s,f,C){typeof t=="string"&&t.length>1&&t.indexOf("|")!==-1?t=t.split("|"):t=[t];for(var S=0,r=t.length;S<r;S++){var y=t[S];if(y==null||y==="wait")jf(i,void 0,s,f,C);else if(typeof y=="number"||!isNaN(y))WE(i,parseFloat(y),s,f,C);else if(y==="click")HE(i,s,f,C);else if(y==="se"){var e=i.soundManager.getLastSoundEffect();ea(i,e,s,f,C)}else if(y==="se2"){var e=i.soundManager.getLastSoundEffect2();ea(i,e,s,f,C)}else if(y==="bgm"){var e=i.soundManager.getBackgroundMusic();ea(i,e,s,f,C)}else if(y==="bgm2"){var e=i.soundManager.getBackgroundMusic2();ea(i,e,s,f,C)}else QE.hasOwnProperty(y.toUpperCase())?jE(i,y,s,f,C):$E(y)?KE(i,y,s,f,C):ZE(i,y)?JE(i,y,s,f,C):jf(i,y,s,f,C)}},qE=function(i){return this.ignoreWait?this:(this.pauseTyping(),A0(this.textPlayer,i,this.resumeTyping,[],this),this)},_E=function(i){return i===void 0&&(i=!0),this.ignoreWait=i,this},tM=function(i){return i===void 0&&(i=!0),this.skipSpaceEnable=i,this},eM=function(i){if(i===void 0&&(i=!0),this.skipTypingAnimation=i,i)for(var t=this.timeline.getTimers(w0),s=0,f=t.length;s<f;s++)t[s].seek(1);return this},iM=function(i){if(i===void 0&&(i=!0),this.skipSoundEffect=i,i){var t=this.textPlayer._soundManager;t&&t.fadeOutAllSoundEffects(100,!0)}return this},sM=function(){return this.typingTimer&&this.typingTimer.seek(1),this},O0={fadeOutPage:NE,start:VE,typing:R0,pause:UE,resume:YE,pauseTyping:kE,resumeTyping:XE,wait:qE,setIgnoreWait:_E,setSkipSpaceEnable:tM,setSkipTypingAnimation:eM,setSkipSoundEffect:iM,skipCurrentTypingDelay:sM};Object.assign(O0,GE);const $s=Phaser.Utils.Objects.GetValue;class b0{constructor(t,s){this.setEventEmitter(),this.textPlayer=t,this.isPageTyping=!1,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.inTypingProcessLoop=!1,this.isTypingPaused=!1,this.setIgnoreWait(!1),this.setSkipTypingAnimation(!1),this.setTypingStartCallback($s(s,"onTypingStart",rM)),this.setDefaultTypingSpeed($s(s,"speed",250)),this.setTypingSpeed(),this.setSkipSpaceEnable($s(s,"skipSpace",!1)),this.setAnimationConfig($s(s,"animation",void 0)),this.setMinSizeEnable($s(s,"minSizeEnable",!1)),this.setFadeOutPageCallback($s(s,"fadeOutPage"))}destroy(){this.destroyEventEmitter(),this.textPlayer=void 0,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.onTypeStart=void 0,this.animationConfig=void 0}get timeline(){return this.textPlayer.timeline}setTypingStartCallback(t){return this.onTypeStart=t,this}setAnimationConfig(t){return t||(t={}),t.hasOwnProperty("duration")||(t.duration=0),t.hasOwnProperty("onStart")||(t.onStart=nM),this.animationConfig=t,this}setFadeOutPageCallback(t){return this.fadeOutPageCallback=t,this}setMinSizeEnable(t){return t===void 0&&(t=!0),this.minSizeEnable=t,this}getNextChild(){var t=this.nextChild;return this.index=Math.min(this.index+1,this.children.length),this._nextChild=void 0,t}get nextChild(){return this._nextChild||(this._nextChild=this.children[this.index]),this._nextChild}}var nM=function(i){i.setVisible&&i.setVisible()},rM=function(i){for(var t=0,s=i.length;t<s;t++){var f=i[t];f.setVisible&&f.setVisible(!1)}};Object.assign(b0.prototype,Ln,O0);class aM extends vu{playAnimation(t){return this.gameObject.anims.timeScale=this.timeScale,this.gameObject.play(t),this}stopAnimation(){return this.gameObject.stop(),this}chainAnimation(t){return this.gameObject.chain(t),this}pauseAnimation(){return this.gameObject.anims.pause(),this}setTimeScale(t){return super.setTimeScale(t),this.gameObject.anims&&(this.gameObject.anims.timeScale=t),this}}const oM={playAnimation(i,t){return this.has(i)||this.add(i),this.get(i).playAnimation(t),this},stopAnimation(i){return this.has(i)?(this.get(i).stopAnimation(),this):this},chainAnimation(i,t){return this.has(i)?(this.get(i).chainAnimation(t),this):this},pauseAnimation(i){return this.has(i)?(this.get(i).pauseAnimation(),this):this}};var F0={};Object.assign(F0,oM);class L0 extends mu{constructor(t,s){s===void 0&&(s={}),s.BobClass=aM,super(t,s)}setCreateGameObjectCallback(t,s){return!t||t==="sprite"?t=hM:t==="image"&&(t=lM),super.setCreateGameObjectCallback(t,s),this}}var hM=function(i,t,s){return typeof s!="string"&&typeof s!="number"&&(s=void 0),i.add.sprite(0,0,t,s)},lM=function(i,t,s){return typeof s!="string"&&typeof s!="number"&&(s=void 0),i.add.image(0,0,t,s)};Object.assign(L0.prototype,F0);var Zf=function(i,t){return i.length===3&&i[0]===t&&i[2]==="play"},uM=function(i,t){return i.length===3&&i[0]===t&&i[2]==="stop"},dM=function(i,t,s){var f=s.name;t.on("+",function(C,...S){if(!t.skipEventFlag){var r=C.split("."),y;if(Zf(r,f))y=r[1];else return;ct.call(i,`${f}.play`,fM,[f,y,S],i),t.skipEvent()}}).on("+",function(C){if(!t.skipEventFlag){var S=C.split("."),r;if(uM(S,f))r=S[1];else return;ct.call(i,`${f}.stop`,Jf,[f,r],i),t.skipEvent()}}).on("-",function(C){if(!t.skipEventFlag){var S=C.split("."),r;if(Zf(S,f))r=S[1];else return;ct.call(i,`${f}.stop`,Jf,[f,r],i),t.skipEvent()}})},fM=function(i){var t,s,f;[t,s,f]=i;var C=f.shift(),S=this.getGameObjectManager(t);S.playAnimation(s,C),f.length>0&&S.chainAnimation(s,f)},Jf=function(i){var t,s;[t,...s]=i;var f=this.getGameObjectManager(t);f.stopAnimation(...s)},cM=function(i,t){return i.length===3&&i[0]===t&&i[2]==="pause"},vM=function(i,t,s){var f=s.name;t.on("+",function(C){if(!t.skipEventFlag){var S=C.split("."),r;if(cM(S,f))r=S[1];else return;ct.call(i,`${f}.pause`,pM,[f,r],i),t.skipEvent()}})},pM=function(i){var t,s;[t,...s]=i;var f=this.getGameObjectManager(t);f.pauseAnimation(...s)},gM=function(i,t){return i.length===3&&i[0]===t&&i[2]==="chain"},mM=function(i,t,s){var f=s.name;t.on("+",function(C){if(!t.skipEventFlag){var S=C.split("."),r;if(gM(S,f))r=S[1];else return;var y=Array.prototype.slice.call(arguments,1);ct.call(i,`${f}.chain`,xM,[f,r,y],i),t.skipEvent()}})},xM=function(i){var t,s;[t,...s]=i;var f=this.getGameObjectManager(t);f.chainAnimation(...s)};const yM=[dM,vM,mM];var TM=function(i){i===void 0&&(i={}),i.name="sprite",i.parseCallbacks=yM,this.addGameObjectManager(i,L0)},Qf=function(i,t){return i.length===2&&i[0]===t},CM=function(i,t,s){var f=s.name;t.on("+",function(C,...S){if(!t.skipEventFlag){var r=C.split("."),y;if(Qf(r,f))y=r[1];else return;ct.call(i,`${f}.add`,SM,[f,y,...S],i),t.skipEvent()}}).on("-",function(C){if(!t.skipEventFlag){var S=C.split("."),r;if(Qf(S,f))r=S[1];else return;ct.call(i,`${f}.remove`,PM,[f,r],i),t.skipEvent()}})},SM=function(i){var t,s;[t,...s]=i;var f=this.getGameObjectManager(t);f.add(...s)},PM=function(i){var t,s;[t,...s]=i;var f=this.getGameObjectManager(t);f.remove(...s)},EM=function(i,t,s){var f=s.name;t.on("-",function(C){t.skipEventFlag||C===f&&(ct.call(i,`${f}.removeall`,MM,f,i),t.skipEvent())})},MM=function(i){var t=this.getGameObjectManager(i);t.removeAll()},wM=function(i,t){return i.length===3&&i[0]===t},RM=function(i,t,s){var f=s.name;t.on("+",function(C,...S){if(!t.skipEventFlag){var r=C.split("."),y,e;if(wM(r,f))y=r[1],e=r[2];else return;ct.call(i,`${f}.call`,AM,[f,y,e,...S],i),t.skipEvent()}})},AM=function(i){var t,s,f,C;[t,s,f,...C]=i;var S=`${t}.${f}`;if(this.emit(S,s,...C),!(this.listenerCount(S)>0)){var r=this.getGameObjectManager(t);r.hasMethod(s,f)?r.call(s,f,...C):r.setProperty(s,f,C[0])}},OM={to:!0,yoyo:!0,from:!0,toLeft:!0,toRight:!0,toUp:!0,toDown:!0,yoyoLeft:!0,yoyoRight:!0,yoyoUp:!0,yoyoDown:!0,fromLeft:!0,fromRight:!0,fromUp:!0,fromDown:!0},bM=function(i,t){return i.length===4&&i[0]===t&&OM[i[3]]},FM=function(i,t,s){var f=s.name;i.getGameObjectManager(f),t.on("+",function(C,S,r,y,e){if(!t.skipEventFlag){var u=C.split("."),m,d,l;if(bM(u,f))m=u[1],d=u[2],l=u[3];else return;typeof y=="number"&&(e=y,y=void 0),ct.call(i,`${f}.ease`,LM,[f,m,d,S,r,y,e,l],i),t.skipEvent()}})},LM=function(i){var t,s,f,C,S,r,y,e;[t,s,f,C,S,r,y,e]=i;var u=this.getGameObjectManager(t),m=u.getProperty(s,f);if(typeof m=="number"){e.endsWith("Left")||e.endsWith("Up")?e.startsWith("to")||e.startsWith("yoyo")?C=m-C:e.startsWith("from")&&(u.setProperty(s,f,m-C),C=m):e.endsWith("Right")||e.endsWith("Down")?e.startsWith("to")||e.startsWith("yoyo")?C=m+C:e.startsWith("from")&&(u.setProperty(s,f,m+C),C=m):e==="from"&&(u.setProperty(s,f,C),C=m);var d=e.startsWith("yoyo");u.easeProperty(s,f,C,S,r,y,d)}};const qf=[CM,EM,RM,FM],DM=P0.addGameObjectManager,IM={addGameObjectManager(i,t){i===void 0&&(i={});var s=i.name;s||console.warn("Parameter 'name' is required in TextPlayer.addGameObjectManager(config) method"),DM.call(this,i,t);var f=i.parseCallbacks;f?f=[...f,...qf]:f=qf;for(var C=0,S=f.length;C<S;C++)f[C](this,this.parser,i);return this}};var BM=function(i){return this.clickTarget=i,i?Os(i)?this.clickEE=i.input:this.clickEE=i.setInteractive():this.clickEE=null,this},GM=function(i){return this.targetCamera=i,this},NM=function(i){var t=this;i?typeof i=="function"?this.nextPageInput=function(s,f,C){var S=ns(t,s,f,C);i.call(t,S)}:this.nextPageInput=function(s,f,C){A0(t,i,s,f,C)}:this.nextPageInput=null},VM=function(i,t){return this.imageManager.add(i,t),this};const zM={play(i){return this.isPlaying?this:(this.removeChildren(),this.parser.start(i),this.isPlaying=!0,this.once("complete",function(){this.isPlaying=!1},this),this.lastWrapResult=void 0,this.typingNextPage(),this)},playPromise(i){var t=se(this);return this.play(i),t}};Phaser.Utils.Objects.GetValue;var Bl=function(){return!this.isPlaying||this.isPageTyping?this:(this.typeWriter.once("page.fadeout",UM,this).fadeOutPage(),this)},UM=function(){var i=this.runWrap(this.lastWrapResult);this.lastWrapResult=i,this.emit("page.start");var t=function(){this.emit(Il),i.isLastPage?this.emit("complete"):(this.emit("page.complete"),this.ignoreNextPageInput?Bl.call(this):this.nextPageInput&&this.nextPageInput(Bl,[],this))};this.once(Il,function(){this.typeWriter.off("complete",t,this)}),this.typeWriter.once("complete",t,this).start(i.children)};const YM={pause(){return this.timeline.pause(),this},pauseTyping(){return this.typeWriter.pauseTyping(),this}},kM={resume(){return this.timeline.resume(),this},resumeTyping(i){return this.typeWriter.resumeTyping(i),this}};var XM=function(i){return this.typeWriter.wait(i),this};const WM={setDefaultTypingSpeed(i){return this.defaultTypingSpeed=i,this},setTypingSpeed(i){return this.typingSpeed=i,this}};var HM=function(i){return this.typeWriter.setIgnoreWait(i),this},$M=function(i){return i===void 0&&(i=!0),this.ignoreNextPageInput=i,this},KM=function(){if(!this.isPlaying||!this.isPageTyping)return this;var i=this.typeWriter.speed,t=this.typeWriter.ignoreWait,s=this.typeWriter.skipTypingAnimation,f=this.typeWriter.skipSoundEffect;return this.typeWriter.once("complete",function(){this.typeWriter.setTypingSpeed(i).setIgnoreWait(t).setSkipTypingAnimation(s).setSkipSoundEffect(f)},this).setTypingSpeed(0).skipCurrentTypingDelay().setIgnoreWait(!0).setSkipTypingAnimation(!0).setSkipSoundEffect(!0),this};const jM={getSprite(i){return this.getGameObject("sprite",i)},addSprite(i,t){return this.addGameObject("sprite",i,t),this}},ZM={setContentOutputEnable(i){return this.parser.setContentOutputEnable(i),this},setContentCallback(i,t){return this.contentCallback=i,this.contentCallbackScope=t,this}};var D0={setClickTarget:BM,setTargetCamera:GM,setNextPageInput:NM,addImage:VM,typingNextPage:Bl,wait:XM,setIgnoreWait:HM,setIgnoreNextPageInput:$M,showPage:KM};Object.assign(D0,IM,zM,YM,kM,WM,jM,ZM);var JM=function(i){for(var t=0,s=Kf.length;t<s;t++)i.emit(Kf[t])};const _f=Phaser.Utils.Objects.IsPlainObject,Vi=Phaser.Utils.Objects.GetValue;class xu extends a2(Fn){constructor(t,s,f,C,S,r){_f(s)?r=s:_f(C)&&(r=C),r===void 0&&(r={});var y=r.text;delete r.text,super(t,s,f,C,S,r),this.type="rexTextPlayer",this.parser=new BE(this,Vi(r,"parser",void 0)),this.typeWriter=new b0(this,Vi(r,"typing",void 0)),this._imageManager=void 0;var e=Vi(r,"images",void 0);e&&this.addImage(e),this.setTargetCamera(Vi(r,"camera",this.scene.sys.cameras.main)),this.initManagers(t,r);var u=Vi(r,"sprites");u!==!1&&u!==null&&TM.call(this,u),this.setIgnoreNextPageInput(Vi(r,"ignoreNextPageInput",!1)),this.setClickTarget(Vi(r,"clickTarget",this)),this.setNextPageInput(Vi(r,"nextPageInput",null)),this.isPlaying=!1,y&&this.play(y)}get imageManager(){return this._imageManager===void 0&&(this._imageManager=new ru(this.scene)),this._imageManager}get spriteManager(){return this.getGameObjectManager("sprite")}destroy(t){this.scene&&(JM(this),this.parser.destroy(),this.parser=void 0,this.typeWriter.destroy(t),this.typeWriter=void 0,this._imageManager&&this._imageManager.destroy(t),this._imageManager=void 0,this.targetCamera=void 0,this.clickEE=void 0,this.destroyManagers(t),super.destroy(t))}get isPageTyping(){return this.typeWriter.isPageTyping}set defaultTypingSpeed(t){this.typeWriter.setDefaultTypingSpeed(t)}get defaultTypingSpeed(){return this.typeWriter.defaultTypingSpeed}set typingSpeed(t){this.typeWriter.setTypingSpeed(t)}get typingSpeed(){return this.typeWriter.speed}set timeScale(t){this.setTimeScale(t)}get timeScale(){return this.getTimeScale()}}Object.assign(xu.prototype,D0);st.register("textPlayer",function(i,t,s,f,C){var S=new xu(this.scene,i,t,s,f,C);return this.scene.add.existing(S),S});it(window,"RexPlugins.UI.TextPlayer",xu);const I0={maxLength:["maxLength",void 0],minLength:["minLength",void 0],readOnly:["readOnly",!1]},B0={direction:["direction",void 0]};var Hi=function(i,t,s){if(typeof s=="string")i.hasOwnProperty(s)&&(t[s]=i[s]);else{var f=s;if(Array.isArray(f))for(var C=0,S=f.length;C<S;C++)Hi(i,t,f[C]);else for(var s in f)Hi(i,t,s)}},QM=function(i){i===void 0&&(i={});var t={};return Hi(i,t,"inputType"),Hi(i,t,"type"),Hi(i,t,"style"),Hi(i,t,B0),Hi(i,t,I0),t},yu=function(i,t,s,f){if(t)return!(s&&!s(i,t)||!tc(i,t)||f&&!f(i,t));for(var C=i.scene.input.manager,S=C.pointersTotal,r=C.pointers,t,y=0;y<S;y++)if(t=r[y],!(s&&!s(i,t))&&tc(i,t)&&!(f&&!f(i,t)))return!0;return!1},tc=function(i,t){for(var s=i.scene,f=s.input.cameras.getCamerasBelowPointer(t),C=s.input.manager,S=[i],r,y=0,e=f.length;y<e;y++)if(r=C.hitTest(t,S,f[y]),r.length>0)return!0;return!1},gn=void 0,qM=function(i){i!==gn&&(gn!==void 0&&gn.close(),gn=i)},_M=function(i){i===gn&&(gn=void 0)};const tw=Phaser.Utils.Objects.GetValue;var ka=function(i,t,s){s===void 0&&(s={});var f,C;for(var S in i)f=i[S],C=tw(t,S,f[1]),C!==void 0&&(s[f[0]]=C);return s},G0=function(i){i.addEventListener("touchstart",Ks,!1),i.addEventListener("touchmove",Ks,!1),i.addEventListener("touchend",Ks,!1),i.addEventListener("mousedown",Ks,!1),i.addEventListener("mouseup",Ks,!1),i.addEventListener("mousemove",Ks,!1)},Ks=function(i){i.stopPropagation()};const ch=Phaser.Utils.Objects.GetValue;var ew=function(i,t){var s,f=ch(t,"inputType",void 0);f===void 0&&(f=ch(t,"type","text")),f==="textarea"?(s=document.createElement("textarea"),s.style.resize="none"):(s=document.createElement("input"),s.type=f);var C=ch(t,"style",void 0),S=s.style;ka(B0,C,S),S.position="absolute",S.opacity=0,S.pointerEvents="none",S.zIndex=0,S.transform="scale(0)",ka(I0,t,s),G0(s);var r=i.scene.sys.scale,y=r.isFullscreen?r.fullscreenTarget:document.body;return y.appendChild(s),s},iw=function(){return this.isOpened?this:this.readOnly?this:(qM(this),this.isOpened=!0,this.node||(this.node=ew(this,this.nodeConfig)),this.setFocus(),this.initText(),this.enterCloseEnable&&this.scene.input.keyboard.once("keydown-ENTER",this.close,this),this.scene.sys.events.on("postupdate",this.updateText,this),this.scene.input.on("pointerdown",this.onClickOutside,this),this.onOpenCallback&&this.onOpenCallback(this.parent,this),this.emit("open",this),this)},sw=function(i){if(i){var t=i.parentElement;t&&t.removeChild(i)}},nw=function(){return this.isOpened?(_M(this),this.setBlur(),this.isOpened=!1,this.updateText(),this.scene.sys.events.off("postupdate",this.updateText,this),this.scene.input.off("pointerdown",this.onClickOutside,this),this.onCloseCallback&&this.onCloseCallback(this.parent,this),sw(this.node),this.node=void 0,this.emit("close",this),this):this},rw={open:iw,close:nw};const zi=Phaser.Utils.Objects.GetValue;class Tu extends _t{constructor(t,s){super(t);var f=zi(s,"inputType",void 0);f===void 0&&(f=zi(s,"type","text")),this.setEnterCloseEnable(zi(s,"enterClose",f!=="textarea"));var C=zi(s,"onOpen",void 0);C||(C=zi(s,"onFocus",void 0)),this.onOpenCallback=C;var S=zi(s,"onClose",void 0);S||(S=zi(s,"onBlur",void 0)),this.onCloseCallback=S,this.onUpdateCallback=zi(s,"onUpdate",void 0),this.isOpened=!1,t.on("pointerdown",function(){this.open()},this).setInteractive(),this.nodeConfig=QM(s),this.node=void 0}destroy(){this.close(),super.destroy()}onClickOutside(t){yu(this.parent,t)||this.close()}setEnterCloseEnable(t){return t===void 0&&(t=!0),this.enterCloseEnable=t,this}initText(){}updateText(){}get text(){return this.node?this.node.value:""}set text(t){this.node&&(this.node.value=t)}setText(t){return this.text=t,this}get maxLength(){return this.nodeConfig.maxLength}set maxLength(t){this.nodeConfig.maxLength=t,this.node&&(this.node.maxLength=t)}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.nodeConfig.minLength}set minLength(t){this.nodeConfig.minLength=t,this.node&&(this.node.minLength=t)}setMinLength(t){return this.minLength=t,this}get placeholder(){return this.node.placeholder}set placeholder(t){this.node&&(this.node.placeholder=t)}setPlaceholder(t){return this.placeholder=t,this}selectText(t,s){return this.node?(t===void 0?this.node.select():this.node.setSelectionRange(t,s),this):this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node?this.node.selectionStart:0}get selectionEnd(){return this.node?this.node.selectionEnd:0}get selectedText(){if(!this.node)return"";var t=this.node;return t.value.substring(t.selectionStart,t.selectionEnd)}get cursorPosition(){return this.node?this.node.selectionStart:0}set cursorPosition(t){this.node&&this.node.setSelectionRange(t,t)}setCursorPosition(t){return t===void 0?t=this.text.length:t<0&&(t=this.text.length+t),this.cursorPosition=t,this}get tooltip(){return this.node?this.node.title:""}set tooltip(t){if(!this.node)return this;this.node.title=t}setTooltip(t){return this.tooltip=t,this}setTextChangedCallback(t){return this.onTextChanged=t,this}get readOnly(){return this.nodeConfig.readOnly}set readOnly(t){this.nodeConfig.readOnly=t,this.node&&(this.node.readOnly=t)}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}get spellCheck(){return this.node?this.node.spellcheck:""}set spellCheck(t){this.node&&(this.node.spellcheck=t)}setSpellCheck(t){return this.spellCheck=t,this}get fontColor(){if(this.node)return this.node.style.color}set fontColor(t){this.node&&(this.node.style.color=t)}setFontColor(t){return this.fontColor=t,this}setStyle(t,s){return this.node?(this.node.style[t]=s,this):this}getStyle(t){if(this.node)return this.node.style[t]}scrollToBottom(){return this.node?(this.node.scrollTop=this.node.scrollHeight,this):this}setEnabled(t){return this.node?(t===void 0&&(t=!0),this.node.disabled=!t,this):this}setBlur(){return this.node?(this.node.blur(),this):this}setFocus(){return this.node?(this.node.focus(),this):this}get isFocused(){return this.isOpened}}Object.assign(Tu.prototype,rw);var N0=function(i,t,s){i=i.replace(" ","");var f=s.previousText;if(i===f)return i;if(isNaN(i)){s.emit("nan",i,s),i=f;var C=s.cursorPosition-1;s.setText(i),s.setCursorPosition(C)}else s.previousText=i;return i},aw=function(i){var t=i.parent,s=i.isOpened?i.selectionStart:null,f=i.isOpened?i.selectionEnd:null,C=i.prevSelectionStart,S=i.prevSelectionEnd;if(!(C===s&&S===f)){var r,y;C===null?(r=s,y=f):(r=Math.min(C,s),y=Math.max(S,f));for(var e=r;e<y;e++){var u=C===null?!1:e>=C&&e<S,m=e>=s&&e<f;if(!(u&&m)){var d=t.getCharChild(e);d&&(u?t.emit("cursorout",d,e,t):t.emit("cursorin",d,e,t))}}i.prevSelectionStart=s,i.prevSelectionEnd=f}},ow=function(i){var t=i.parent,s=t.text,f=i.cursorPosition;if(i.prevCursorPosition!==f){if(i.prevCursorPosition!==null&&i.prevCursorPosition>s.length&&(i.prevCursorPosition=null),i.prevCursorPosition!==null){var C=t.getCharChild(i.prevCursorPosition);C&&t.emit("cursorout",C,i.prevCursorPosition,t)}if(f!=null){var C=t.getCharChild(f);C&&t.emit("cursorin",C,f,t)}t.emit("movecursor",f,i.prevCursorPosition,t),i.prevCursorPosition=f}},ec=function(i){var t=i.prevSelectionStart;if(t!==null){for(var s=i.prevSelectionEnd,f=i.parent,C=t;C<s;C++){var S=f.getCharChild(C);S&&f.emit("cursorout",S,C,f)}i.prevSelectionStart=null,i.prevSelectionEnd=null}},ic=function(i){var t=i.prevCursorPosition;if(t!==null){var s=i.parent,f=s.getCharChild(t);f&&s.emit("cursorout",f,t,s),i.prevCursorPosition=null}};const hw=Phaser.Utils.Objects.GetValue;let lw=class extends Tu{constructor(t,s){super(t,s),this.setSelectAllWhenFocusEnable(hw(s,"selectAll",!1)),this.cursorMoveStartIndex=null,this.prevCursorPosition=null,this.prevSelectionStart=null,this.prevSelectionEnd=null,this.firstClickAfterOpen=!1,t.on("pointerdown",function(f,C,S,r){var y=t.getNearestChild(C,S),e=t.getCharIndex(y);(!this.selectAllWhenFocus||!this.firstClickAfterOpen)&&this.setCursorPosition(e),this.cursorMoveStartIndex=e,this.firstClickAfterOpen=!1},this).on("pointermove",function(f,C,S,r){if(f.isDown){var y=t.getNearestChild(C,S),e=t.getCharIndex(y);this.cursorMoveStartIndex<e?this.selectText(this.cursorMoveStartIndex,e+1):this.selectText(e,this.cursorMoveStartIndex+1)}},this),this.on("open",function(){this.selectAllWhenFocus&&this.selectAll(),this.firstClickAfterOpen=!0,t.emit("open")},this).on("close",function(){t.emit("close")},this)}initText(){var t=this.parent;return this.prevCursorPosition=null,this.setText(t.text),this}updateText(){var t=this.parent,s=this.text;if(this.onUpdateCallback){var f=this.onUpdateCallback(s,t,this);f!=null&&(s=f)}return t.text!==s&&(t.setText(s),t.emit("textchange",s,t,this)),this.isOpened?this.selectionStart!==this.selectionEnd?(ic(this),aw(this)):(ec(this),ow(this)):(ec(this),ic(this)),this}setNumberInput(){return this.onUpdateCallback=N0,this}setSelectAllWhenFocusEnable(t){return t===void 0&&(t=!0),this.selectAllWhenFocus=t,this}};const uw=Phaser.Utils.Objects.GetValue,dw=["inputType","onOpen","onFocus","onClose","onBlur","onUpdate","enterClose","readOnly","maxLength","minLength","selectAll"];var fw=function(i,t){var s=uw(t,"edit");return s===void 0&&(s={}),Hi(t,s,dw),new lw(i,s)},Ei=function(i,t){if(!i||typeof i=="number")return!1;if(i.hasOwnProperty(t))return!0;if(t.indexOf(".")!==-1){for(var s=t.split("."),f=i,C=0;C<s.length;C++)if(f.hasOwnProperty(s[C]))f=f[s[C]];else return!1;return!0}else return!1},cw=function(i){var t=!i.textArea;if(!Ei(i,"wrap.vAlign")){var s=t?"center":"top";it(i,"wrap.vAlign",s)}if(Ei(i,"wrap.charWrap")||it(i,"wrap.charWrap",!0),!Ei(i,"wrap.maxLines")){var s=t?1:void 0;it(i,"wrap.maxLines",s)}if(Ei(i,"wrap.useDefaultTextHeight")||it(i,"wrap.useDefaultTextHeight",!0),i.edit||(i.edit={}),!Ei(i.edit,"inputType")){var s=t?"text":"textarea";it(i.edit,"inputType",s)}return i},vw=function(i){pu(i)||this.setCursorStyle(i).on("cursorin",function(t){var s=this.cursorStyle,f=tu(t.style,s);eu(s,f)||(t.styleSave=f,t.modifyStyle(s))},this).on("cursorout",function(t){t.styleSave&&(t.modifyStyle(t.styleSave),t.styleSave=void 0)},this)},pw=function(i){pu(i)||this.setFocusStyle(i).on("open",function(){var t=this.background,s=this.focusStyle,f=tu(t,s);eu(s,f)||(t.styleSave=f,t.modifyStyle(s))},this).on("close",function(){var t=this.background;t.styleSave&&(t.modifyStyle(t.styleSave),t.styleSave=void 0)},this)},gw=function(i){var t=i.createCharChild("|");return t.text="",i0.call(i,t),t};function Fi(){}Fi.prototype={diff(i,t,s={}){let f=s.callback;typeof s=="function"&&(f=s,s={}),this.options=s;let C=this;function S(h){return f?(setTimeout(function(){f(void 0,h)},0),!0):h}i=this.castInput(i),t=this.castInput(t),i=this.removeEmpty(this.tokenize(i)),t=this.removeEmpty(this.tokenize(t));let r=t.length,y=i.length,e=1,u=r+y;s.maxEditLength&&(u=Math.min(u,s.maxEditLength));let m=[{newPos:-1,components:[]}],d=this.extractCommon(m[0],t,i,0);if(m[0].newPos+1>=r&&d+1>=y)return S([{value:this.join(t),count:t.length}]);function l(){for(let h=-1*e;h<=e;h+=2){let n,a=m[h-1],c=m[h+1],o=(c?c.newPos:0)-h;a&&(m[h-1]=void 0);let v=a&&a.newPos+1<r,g=c&&0<=o&&o<y;if(!v&&!g){m[h]=void 0;continue}if(!v||g&&a.newPos<c.newPos?(n=xw(c),C.pushComponent(n.components,void 0,!0)):(n=a,n.newPos++,C.pushComponent(n.components,!0,void 0)),o=C.extractCommon(n,t,i,h),n.newPos+1>=r&&o+1>=y)return S(mw(C,n.components,t,i,C.useLongestToken));m[h]=n}e++}if(f)(function h(){setTimeout(function(){if(e>u)return f();l()||h()},0)})();else for(;e<=u;){let h=l();if(h)return h}},pushComponent(i,t,s){let f=i[i.length-1];f&&f.added===t&&f.removed===s?i[i.length-1]={count:f.count+1,added:t,removed:s}:i.push({count:1,added:t,removed:s})},extractCommon(i,t,s,f){let C=t.length,S=s.length,r=i.newPos,y=r-f,e=0;for(;r+1<C&&y+1<S&&this.equals(t[r+1],s[y+1]);)r++,y++,e++;return e&&i.components.push({count:e}),i.newPos=r,y},equals(i,t){return this.options.comparator?this.options.comparator(i,t):i===t||this.options.ignoreCase&&i.toLowerCase()===t.toLowerCase()},removeEmpty(i){let t=[];for(let s=0;s<i.length;s++)i[s]&&t.push(i[s]);return t},castInput(i){return i},tokenize(i){return i.split("")},join(i){return i.join("")}};function mw(i,t,s,f,C){let S=0,r=t.length,y=0,e=0;for(;S<r;S++){let m=t[S];if(m.removed){if(m.value=i.join(f.slice(e,e+m.count)),e+=m.count,S&&t[S-1].added){let d=t[S-1];t[S-1]=t[S],t[S]=d}}else{if(!m.added&&C){let d=s.slice(y,y+m.count);d=d.map(function(l,h){let n=f[e+h];return n.length>l.length?n:l}),m.value=i.join(d)}else m.value=i.join(s.slice(y,y+m.count));y+=m.count,m.added||(e+=m.count)}}let u=t[r-1];return r>1&&typeof u.value=="string"&&(u.added||u.removed)&&i.equals("",u.value)&&(t[r-2].value+=u.value,t.pop()),t}function xw(i){return{newPos:i.newPos,components:i.components.slice(0)}}const yw=new Fi;function Tw(i,t,s){return yw.diff(i,t,s)}const sc=/^[a-zA-Z\u{C0}-\u{FF}\u{D8}-\u{F6}\u{F8}-\u{2C6}\u{2C8}-\u{2D7}\u{2DE}-\u{2FF}\u{1E00}-\u{1EFF}]+$/u,nc=/\S/,V0=new Fi;V0.equals=function(i,t){return this.options.ignoreCase&&(i=i.toLowerCase(),t=t.toLowerCase()),i===t||this.options.ignoreWhitespace&&!nc.test(i)&&!nc.test(t)};V0.tokenize=function(i){let t=i.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/);for(let s=0;s<t.length-1;s++)!t[s+1]&&t[s+2]&&sc.test(t[s])&&sc.test(t[s+2])&&(t[s]+=t[s+2],t.splice(s+1,2),s--);return t};const z0=new Fi;z0.tokenize=function(i){let t=[],s=i.split(/(\n|\r\n)/);s[s.length-1]||s.pop();for(let f=0;f<s.length;f++){let C=s[f];f%2&&!this.options.newlineIsToken?t[t.length-1]+=C:(this.options.ignoreWhitespace&&(C=C.trim()),t.push(C))}return t};const Cw=new Fi;Cw.tokenize=function(i){return i.split(/(\S.+?[.!?])(?=\s+|$)/)};const Sw=new Fi;Sw.tokenize=function(i){return i.split(/([{}:;,]|\s+)/)};const Pw=Object.prototype.toString,cr=new Fi;cr.useLongestToken=!0;cr.tokenize=z0.tokenize;cr.castInput=function(i){const{undefinedReplacement:t,stringifyReplacer:s=(f,C)=>typeof C>"u"?t:C}=this.options;return typeof i=="string"?i:JSON.stringify(Gl(i,null,null,s),s,"  ")};cr.equals=function(i,t){return Fi.prototype.equals.call(cr,i.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};function Gl(i,t,s,f,C){t=t||[],s=s||[],f&&(i=f(C,i));let S;for(S=0;S<t.length;S+=1)if(t[S]===i)return s[S];let r;if(Pw.call(i)==="[object Array]"){for(t.push(i),r=new Array(i.length),s.push(r),S=0;S<i.length;S+=1)r[S]=Gl(i[S],t,s,f,C);return t.pop(),s.pop(),r}if(i&&i.toJSON&&(i=i.toJSON()),typeof i=="object"&&i!==null){t.push(i),r={},s.push(r);let y=[],e;for(e in i)i.hasOwnProperty(e)&&y.push(e);for(y.sort(),S=0;S<y.length;S+=1)e=y[S],r[e]=Gl(i[e],t,s,f,e);t.pop(),s.pop()}else r=i;return r}const Nl=new Fi;Nl.tokenize=function(i){return i.slice()};Nl.join=Nl.removeEmpty=function(i){return i};const Ew=Phaser.Utils.Array.Remove;var Mw=function(i,t){var s=i.text;if(t!==s){if(Ew(i.children,i.lastInsertCursor),t==="")i.removeChildren();else for(var f=Tw(s,t),C=0,S=0,r=f.length;S<r;S++){var y=f[S];y.removed?i.removeText(C,y.count):(y.added&&i.insertText(C,y.value),C+=y.count)}i.children.push(i.lastInsertCursor),i.runWordWrap()}};const rc=Phaser.Utils.Objects.IsPlainObject;class Cu extends Fn{constructor(t,s,f,C,S,r){rc(s)?r=s:rc(C)&&(r=C),r===void 0&&(r={}),cw(r);var y=r.text;y&&delete r.text;var e=Rl(r.background,"focus"),u=Rl(r.style,"cursor");super(t,s,f,C,S,r),this.type="rexCanvasInput",this._text="",this.textEdit=fw(this,r),r.focusStyle&&Object.assign(e,r.focusStyle),pw.call(this,e),r.cursorStyle&&Object.assign(u,r.cursorStyle),vw.call(this,u);var m=r.onAddChar;m&&this.on("addchar",m);var d=r.onCursorOut;d&&this.on("cursorout",d);var l=r.onCursorIn;l&&this.on("cursorin",l);var h=r.onMoveCursor;h&&this.on("movecursor",h),this.setParseTextCallback(r.parseTextCallback),this.lastInsertCursor=gw(this),y?this.setText(y):this.runWordWrap()}addChild(t,s){if(super.addChild(t,s),Array.isArray(t))for(var f=t,C=0,S=f.length;C<S;C++){var t=f[C];wn(t)&&this.emit("addchar",t,s+C,this)}else wn(t)&&this.emit("addchar",t,s,this);return this}get text(){return this._text}set text(t){t==null?t="":t=t.toString(),this._text!==t&&(Mw(this,t),this._text=t)}setText(t){return this.text=t,this}appendText(t){return this.setText(this.text+t),this}setSize(t,s){return this.width===t&&this.height===s?this:(super.setSize(t,s),this.runWrap(),this)}get displayText(){return this.text}set displayText(t){this.text=t}setDisplayText(t){return this.displayText=t,this}get inputText(){return this.textEdit.text}set inputText(t){this.textEdit.text=t}setInputText(t){return this.inputText=t,this}setParseTextCallback(t){return t||(t=ww),this.parseTextCallback=t,this}get value(){return this.parseTextCallback(this.text)}set value(t){this.setText(t)}getValue(){return this.value}setValue(t){return this.value=t,this}get readOnly(){return this.textEdit.readOnly}set readOnly(t){this.textEdit.readOnly=t}setReadOnly(t){return this.textEdit.setReadOnly(t),this}open(t){return t&&this.textEdit.once("close",t),this.textEdit.open(),this}close(){return this.textEdit.close(),this}get isOpened(){return this.textEdit.isOpened}setFocusStyle(t){return this.focusStyle=t,this}setCursorStyle(t){return this.cursorStyle=t,this}setNumberInput(){return this.textEdit.setNumberInput(),this.parseTextCallback=Number,this}get maxLength(){return this.textEdit.maxLength}set maxLength(t){this.textEdit.maxLength=t}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.textEdit.minLength}set minLength(t){this.textEdit.minLength=t}setMinLength(t){return this.minLength=t,this}}var ww=function(i){return i};st.register("canvasInput",function(i,t,s,f,C){var S=new Cu(this.scene,i,t,s,f,C);return this.scene.add.existing(S),S});it(window,"RexPlugins.UI.CanvasInput",Cu);var Su=function(i){return Mn(i).loop.delta};const ac=Phaser.Utils.Objects.GetValue,Rw=Phaser.Math.Wrap;class U0 extends Tu{constructor(t,s){s===void 0&&(s={}),s.onUpdate==="number"&&(s.onUpdate=N0),super(t,s),this.setCursor(ac(s,"cursor","|")),this.setCursorFlashDuration(ac(s,"cursorFlashDuration",1e3)),this.cursorFlashTimer=0}initText(){return this.cursorFlashTimer=0,this.prevCursorPosition=void 0,this.setText(this.parent.text),this.setCursorPosition(),this}updateText(){var t=this.parent,s=this.text;if(this.onUpdateCallback){var f=this.onUpdateCallback(s,t,this);f!=null&&(s=f)}if(this.isOpened&&this.hasCursor){var C=this.cursorPosition;s=s.substring(0,C)+this.cursor+s.substring(C),this.prevCursorPosition!==C&&(this.prevCursorPosition=C)}return t.text!==s&&(t.setText(s),this.emit("textchange",s,t,this)),this}setCursor(t){return this._cursor=t,this.hasCursor=t&&t!=="",t}setCursorFlashDuration(t){return this.cursorFlashDuration=t,this}get cursor(){if(!this._isFocused)return this._cursor;var t;this.cursorFlashTimer<this.cursorFlashDuration/2?t=this._cursor:t=" ";var s=this.cursorFlashTimer+Su(this.scene);return this.cursorFlashTimer=Rw(s,0,this.cursorFlashDuration),t}}st.register("hiddenEdit",function(i,t){var s=new U0(i,t);return s});it(window,"RexPlugins.UI.HiddenEdit",U0);const Aw=Phaser.GameObjects.GetCalcMatrix;var Ow=function(i,t,s,f){t.updateData(),s.addToRenderList(t);var C=i.pipelines.set(t.pipeline),S=Aw(t,s,f),r=C.calcMatrix.copyFrom(S.calc),y=t._displayOriginX,e=t._displayOriginY,u=s.alpha*t.alpha;i.pipelines.preBatch(t);for(var m=t.geom,d=0,l=m.length;d<l;d++)m[d].webglRender(C,r,u,y,e);i.pipelines.postBatch(t)};const bw=Phaser.Renderer.Canvas.SetTransform;var Fw=function(i,t,s,f){t.updateData(),s.addToRenderList(t);var C=i.currentContext;if(bw(i,C,t,s,f)){for(var S=t._displayOriginX,r=t._displayOriginY,y=t.geom,e=0,u=y.length;e<u;e++)y[e].canvasRender(C,S,r);C.restore()}};const Lw={renderWebGL:Ow,renderCanvas:Fw},Dw=Phaser.GameObjects.Shape,Iw=Phaser.Utils.Array.Remove;class Is extends Dw{constructor(t,s,f,C,S){s===void 0&&(s=0),f===void 0&&(f=0),C===void 0&&(C=2),S===void 0&&(S=C),super(t,"rexShapes",[]),this._width=-1,this._height=-1,this.dirty=!0,this.isSizeChanged=!0,this.shapes={},this.setPosition(s,f),this.setSize(C,S),this.updateDisplayOrigin()}get width(){return this._width}set width(t){this.setSize(t,this._height)}get height(){return this._height}set height(t){this.setSize(this._width,t)}setDirty(t){return t===void 0&&(t=!0),this.dirty=t,this}setSize(t,s){this.isSizeChanged=this.isSizeChanged||this._width!==t||this._height!==s,this.dirty=this.dirty||this.isSizeChanged,this._width=t,this._height=s,this.updateDisplayOrigin();var f=this.input;return f&&!f.customHitArea&&(f.hitArea.width=t,f.hitArea.height=s),this}resize(t,s){return this.setSize(t,s),this}get fillColor(){return this._fillColor}set fillColor(t){this.setFillStyle(t,this._fillAlpha)}get fillAlpha(){return this._fillAlpha}set fillAlpha(t){this.setFillStyle(this._fillColor,t)}setFillStyle(t,s){return s===void 0&&(s=1),this.dirty=this.dirty||this.fillColor!==t||this.fillAlpha!==s,this._fillColor=t,this._fillAlpha=s,this}get lineWidth(){return this._lineWidth}set lineWidth(t){this.setStrokeStyle(t,this._strokeColor,this._strokeAlpha)}get strokeColor(){return this._strokeColor}set strokeColor(t){this.setStrokeStyle(this._lineWidth,t,this._strokeAlpha)}get strokeAlpha(){return this._strokeAlpha}set strokeAlpha(t){this.setStrokeStyle(this._lineWidth,this._strokeColor,t)}setStrokeStyle(t,s,f){return f===void 0&&(f=1),this.dirty=this.dirty||this.lineWidth!==t||this.strokeColor!==s||this.strokeAlpha!==f,this._lineWidth=t,this._strokeColor=s,this._strokeAlpha=f,this}updateShapes(){}updateData(){if(!this.dirty)return this;this.updateShapes();for(var t=this.geom,s=0,f=t.length;s<f;s++){var C=t[s];C.dirty&&C.updateData()}return this.isSizeChanged=!1,this.dirty=!1,this}clear(){return this.geom.length=0,Mi(this.shapes),this}getShape(t){return this.shapes[t]}getShapes(){return this.geom}addShape(t){this.geom.push(t);var s=t.name;return s&&(this.shapes[s]=t),this.dirty=!0,this}deleteShape(t){var s=this.getShape(t);return s&&(delete this.shapes[t],Iw(this.geom,s)),this}}Object.assign(Is.prototype,Lw);const Bw={setBoxFillStyle(i,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.boxFillColor!==i||this.boxFillAlpha!==t,this.boxFillColor=i,this.boxFillAlpha=t,this},setUncheckedBoxFillStyle(i,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.uncheckedBoxFillColor!==i||this.uncheckedBoxFillAlpha!==t,this.uncheckedBoxFillColor=i,this.uncheckedBoxFillAlpha=t,this},setBoxStrokeStyle(i,t,s){return s===void 0&&(s=1),this.dirty=this.dirty||this.boxLineWidth!==i||this.boxStrokeColor!==t||this.boxStrokeAlpha!==s,this.boxLineWidth=i,this.boxStrokeColor=t,this.boxStrokeAlpha=s,this},setUncheckedBoxStrokeStyle(i,t,s){return s===void 0&&(s=1),this.dirty=this.dirty||this.uncheckedBoxLineWidth!==i||this.uncheckedBoxStrokeColor!==t||this.uncheckedBoxStrokeAlpha!==s,this.uncheckedBoxLineWidth=i,this.uncheckedBoxStrokeColor=t,this.uncheckedBoxStrokeAlpha=s,this},setCheckerStyle(i,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.checkerColor!==i||this.checkAlpha!==t,this.checkerColor=i,this.checkAlpha=t,this},setBoxShape(i){return i===void 0&&(i=!1),this.isCircleShape===i?this:(this.isCircleShape=i,this.isSizeChanged=!0,this.dirty=!0,this)}},Gw={setBoxSize(i){return this.dirty=this.dirty||this.boxSize!==i,this.boxSize=i,this},setCheckerSize(i){return this.dirty=this.dirty||this.checkerSize!==i,this.checkerSize=i,this}};var Nw=function(i,t){return i==null?this.isFilled=!1:(t===void 0&&(t=1),this.isFilled=!0,this.fillColor=i,this.fillAlpha=t),this},Vw=function(i,t,s){return i==null||t==null?this.isStroked=!1:(s===void 0&&(s=1),this.isStroked=!0,this.lineWidth=i,this.strokeColor=t,this.strokeAlpha=s),this};const zw={fillStyle:Nw,lineStyle:Vw};class fo{constructor(){this.name=void 0,this.dirty=!0,this.data=void 0,this.isFilled=!1,this.fillColor=void 0,this.fillAlpha=1,this.isStroked=!1,this.lineWidth=1,this.strokeColor=void 0,this.strokeAlpha=1}setName(t){return this.name=t,this}reset(){return this.fillStyle().lineStyle(),this}webglRender(t,s,f,C,S){}canvasRender(t,s,f){}updateData(){this.dirty=!1}}Object.assign(fo.prototype,zw,to);const Uw=Phaser.Geom.Polygon.Earcut;class Er extends fo{constructor(){super(),this.pathData=[],this.pathIndexes=[],this.closePath=!1}updateData(){return this.pathIndexes=Uw(this.pathData),super.updateData(),this}webglRender(t,s,f,C,S){this.isFilled&&Jp(t,s,this,f,C,S),this.isStroked&&io(t,this,f,C,S)}canvasRender(t,s,f){var C=this.pathData,S=C.length-1,r=C[0]-s,y=C[1]-f;t.beginPath(),t.moveTo(r,y),this.closePath||(S-=2);for(var e=2;e<S;e+=2){var u=C[e]-s,m=C[e+1]-f;t.lineTo(u,m)}this.closePath&&t.closePath(),this.isFilled&&(Cr(t,this),t.fill()),this.isStroked&&(Sr(t,this),t.stroke())}}const oc=Phaser.Math.DegToRad;class co extends Er{constructor(t,s,f,C,S,r,y,e){t===void 0&&(t=0),s===void 0&&(s=0),f===void 0&&(f=0),C===void 0&&(C=0),S===void 0&&(S=0),r===void 0&&(r=360),y===void 0&&(y=!1),e===void 0&&(e=!1),super(),this.setCenterPosition(t,s),this.setRadius(f,C),this.setAngle(S,r,y),this.setPie(e),this.setIterations(32)}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setCenterPosition(t,s){return s===void 0&&(s=t),this.x=t,this.y=s,this}get radiusX(){return this._radiusX}set radiusX(t){this.dirty=this.dirty||this._radiusX!==t,this._radiusX=t}get radiusY(){return this._radiusY}set radiusY(t){this.dirty=this.dirty||this._radiusY!==t,this._radiusY=t}setRadius(t,s){return s===void 0&&(s=t),this.radiusX=t,this.radiusY=s,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!==t,this._startAngle=t}get endAngle(){return this._endAngle}set endAngle(t){this.dirty=this.dirty||this._endAngle!==t,this._endAngle=t}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!==t,this._anticlockwise=t}setAngle(t,s,f){return f===void 0&&(f=!1),this.startAngle=t,this.endAngle=s,this.anticlockwise=f,this}get pie(){return this._pie}set pie(t){this.dirty=this.dirty||this._pie!==t,this._pie=t}setPie(t){return t===void 0&&(t=!0),this.pie=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){return this.pathData.length=0,this.pie&&this.pathData.push(this.x,this.y),Qt(this.x,this.y,this.radiusX,this.radiusY,this.startAngle,this.endAngle,this.anticlockwise,this.iterations,this.pathData),this.pie&&this.pathData.push(this.x,this.y),this.pathData.push(this.pathData[0],this.pathData[1]),super.updateData(),this}canvasRender(t,s,f){t.beginPath();var C=this.x-s,S=this.y-f,r=oc(this.startAngle),y=oc(this.endAngle);this.pie&&(t.moveTo(C,S),t.lineTo(C+Math.cos(r)*this.radiusX,S+Math.sin(r)*this.radiusY)),t.ellipse(C,S,this.radiusX,this.radiusY,0,r,y,this.anticlockwise),this.pie&&t.lineTo(C,S),this.isFilled&&(Cr(t,this),t.fill()),this.isStroked&&(Sr(t,this),t.stroke())}}class Vl extends co{constructor(t,s,f){super(t,s,f,f,0,360)}}class Yw extends Er{constructor(t){super(),this.setCurve(t),this.setIterations(32)}get curve(){return this._curve}set curve(t){this.dirty=this.dirty||this._curve!==t,this._curve=t}setCurve(t){return this.curve=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){this.pathData.length=0;for(var t=this.curve.getPoints(this.iterations),s=0,f=t.length;s<f;s++)this.pathData.push(t[s].x,t[s].y);return this.pathData.push(t[0].x,t[0].y),super.updateData(),this}}class kw extends co{constructor(t,s,f,C){super(t,s,f,C,0,360)}}class Xw extends Er{constructor(t,s,f,C){t===void 0&&(t=0),s===void 0&&(s=0),f===void 0&&(f=0),C===void 0&&(C=0),super(),this.setP0(t,s),this.setP1(f,C)}get x0(){return this._x0}set x0(t){this.dirty=this.dirty||this._x0!==t,this._x0=t}get y0(){return this._y0}set y0(t){this.dirty=this.dirty||this._y0!==t,this._y0=t}setP0(t,s){return this.x0=t,this.y0=s,this}get x1(){return this._x1}set x1(t){this.dirty=this.dirty||this._x1!==t,this._x1=t}get y1(){return this._y1}set y1(t){this.dirty=this.dirty||this._y1!==t,this._y1=t}setP1(t,s){return this.x1=t,this.y1=s,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x0,this.y0),super.updateData(),this}}var Ww=function(i,t,s){return s.length=0,i!=null&&s.push(i,t),s};const hc=Phaser.Math.Interpolation.QuadraticBezier;var Hw=function(i,t,s,f,C,S){for(var r=S.length,y=S[r-2],e=S[r-1],u=1,m=C-1;u<=m;u++){var d=u/m;S.push(hc(d,y,i,s),hc(d,e,t,f))}return S};const lc=Phaser.Math.Interpolation.CubicBezier;var $w=function(i,t,s,f,C,S,r,y){for(var e=y.length,u=y[e-2],m=y[e-1],d=1,l=r-1;d<=l;d++){var h=d/l;y.push(lc(h,u,i,s,C),lc(h,m,t,f,S))}return y},Y0=function(i){var t=i.length;if(t<2)return i;var s=i[t-2],f=i[t-1];return i.push(s),i.push(f),i};const Kw={clear(){return this.start(),this},start(){return this.startAt(),this},startAt(i,t){return this.restorePathData(),this.accumulationLengths=void 0,Ww(i,t,this.pathData),this.firstPointX=i,this.firstPointY=t,this.lastPointX=i,this.lastPointY=t,this},lineTo(i,t,s){return s===void 0&&(s=!1),s&&(i+=this.lastPointX,t+=this.lastPointY),di(i,t,this.pathData),this.lastPointX=i,this.lastPointY=t,this},verticalLineTo(i,t){return this.lineTo(i,this.lastPointY,t),this},horizontalLineTo(i,t){return this.lineTo(this.lastPointX,i,t),this},ellipticalArc(i,t,s,f,C,S,r){return r===void 0&&(r=!1),Qt(i,t,s,f,C,S,r,this.iterations,this.pathData),this.lastPointX=this.pathData[this.pathData.length-2],this.lastPointY=this.pathData[this.pathData.length-1],this},arc(i,t,s,f,C,S){return this.ellipticalArc(i,t,s,s,f,C,S),this},quadraticBezierTo(i,t,s,f){return Hw(i,t,s,f,this.iterations,this.pathData),this.lastPointX=s,this.lastPointY=f,this.lastCX=i,this.lastCY=t,this},smoothQuadraticBezierTo(i,t){var s=this.lastPointX*2-this.lastCX,f=this.lastPointY*2-this.lastCY;return this.quadraticBezierTo(s,f,i,t),this},cubicBezierCurveTo(i,t,s,f,C,S){return $w(i,t,s,f,C,S,this.iterations,this.pathData),this.lastPointX=C,this.lastPointY=S,this.lastCX=s,this.lastCY=f,this},smoothCubicBezierCurveTo(i,t,s,f){var C=this.lastPointX*2-this.lastCX,S=this.lastPointY*2-this.lastCY;return this.cubicBezierCurveTo(C,S,i,t,s,f),this},close(){return this.closePath=!0,this},end(){return Y0(this.pathData),this}},jw=Phaser.Math.RotateAround;var Zw=function(i,t,s,f){for(var C={x:0,y:0},S=0,r=f.length-1;S<r;S+=2)C.x=f[S],C.y=f[S+1],jw(C,i,t,s),f[S]=C.x,f[S+1]=C.y;return f},Jw=function(i,t,s,f,C){for(var S=0,r=C.length-1;S<r;S+=2){var y=C[S]-i,e=C[S+1]-t;y*=s,e*=f,C[S]=y+i,C[S+1]=e+t}return C},k0=function(i,t,s){for(var f=0,C=s.length-1;f<C;f+=2)s[f]+=i,s[f+1]+=t;return s};const Qw=Phaser.Math.DegToRad,qw=Phaser.Math.RotateAround,_w={rotateAround(i,t,s){if(this.pathData.length===0)return this;s=Qw(s),Zw(i,t,s,this.pathData);var f=this.pathData.length;if(this.lastPointX=this.pathData[f-2],this.lastPointY=this.pathData[f-1],this.lastCX!==void 0){var C={x:this.lastCX,y:this.lastCY};qw(C,i,t,s),this.lastCX=C.x,this.lastCY=C.y}return this},scale(i,t,s,f){if(this.pathData.length===0)return this;if(Jw(i,t,s,f,this.pathData),this.lastPointX=this.pathData[pathDataCnt-2],this.lastPointY=this.pathData[pathDataCnt-1],this.lastCX!==void 0){var C=this.lastCX-i,S=this.lastCY-t;C*=s,S*=f,this.lastCX=C+i,this.lastCY=S+t}return this},offset(i,t){return k0(i,t,this.pathData),this}};var Pu=function(i,t,s,f){s===void 0&&(s=0),f===void 0&&(f=t.length),i.length=f-s;for(var C=0,S=i.length;C<S;C++)i[C]=t[C+s];return i};const tR={savePathData(){return this.pathDataSaved?this:(this.pathDataSave=[...this.pathData],this.pathData.length=0,this.pathDataSaved=!0,this)},restorePathData(){return this.pathDataSaved?(Pu(this.pathData,this.pathDataSave),this.pathDataSave=void 0,this.pathDataSaved=!1,this):this}},eR=Phaser.Math.Distance.Between,iR=Phaser.Math.Wrap,sR=Phaser.Math.Linear;var uc=function(i,t,s,f,C){if(f===void 0&&(f=s,s=0),s=dc(s),f=dc(f),s!==f){var S=t[t.length-1],r=S*s,y=S*f;s<f?vh(i,t,r,y,C):(vh(i,t,r,S,C),vh(i,t,0,y,C)),Y0(C)}},vh=function(i,t,s,f,C){for(var S=s>0,r=0,y=t.length;r<y;r++){var e=r*2,u=t[r];if(S){if(u<s)continue;if(u==s)S=!1;else{var m=u-t[r-1],d=1-(u-s)/m;C.push(ia(i,e-2,e,d)),C.push(ia(i,e-1,e+1,d)),S=!1}}if(u<=f){if(C.push(i[e]),C.push(i[e+1]),u===f)break}else{var m=u-t[r-1],d=1-(u-f)/m;C.push(ia(i,e-2,e,d)),C.push(ia(i,e-1,e+1,d));break}}},ia=function(i,t,s,f){var C=i[t],S=i[s];return sR(C,S,f)},dc=function(i){return i===0?0:i%1===0?1:iR(i,0,1)};const nR={updateAccumulationLengths(){if(this.accumulationLengths==null)this.accumulationLengths=[];else if(this.accumulationLengths.length===this.pathData.length/2)return this;for(var i=this.accumulationLengths,t=this.pathData,s,f,C,S,r,y=0,e=0,u=t.length;e<u;e+=2)C=t[e],S=t[e+1],r=s===void 0?0:eR(s,f,C,S),y+=r,i.push(y),s=C,f=S;return this.totalPathLength=y,this},setDisplayPathSegment(i,t){return this.pathDataSaved||(this.updateAccumulationLengths(),this.savePathData()),this.pathData.length=0,uc(this.pathDataSave,this.accumulationLengths,i,t,this.pathData),this},appendFromPathSegment(i,t,s){return t===void 0?this.pathData.push(...i.pathData):(i.updateAccumulationLengths(),uc(i.pathData,i.accumulationLengths,t,s,this.pathData)),this.firstPointX=this.pathData[0],this.firstPointY=this.pathData[1],this.lastPointX=this.pathData[this.pathData.length-2],this.lastPointY=this.pathData[this.pathData.length-1],this}},rR={draw(i,t,s){var f=this.toPoints();return t&&i.fillPoints(f,this.closePath,this.closePath),s&&i.strokePoints(f,this.closePath,this.closePath),this}};var aR=function(i,t){t===void 0&&(t=[]);for(var s=0,f=i.length-1;s<f;s+=2)t.push({x:i[s],y:i[s+1]});return t};const oR=Phaser.Geom.Polygon;var hR=function(i,t){return t===void 0&&(t=new oR),t.setTo(i),t};class X0{constructor(t){t===void 0&&(t=[]),this.pathData=t,this.closePath=!1,this.setIterations(32),this.firstPointX=void 0,this.firstPointY=void 0,this.lastPointX=void 0,this.lastPointY=void 0,this.accumulationLengths=void 0}setIterations(t){return this.iterations=t,this}toPoints(){return aR(this.pathData)}toPolygon(t){return hR(this.pathData,t)}}Object.assign(X0.prototype,Kw,_w,tR,nR,rR);class Cn extends Er{constructor(){super(),this.builder=new X0(this.pathData)}get iterations(){return this.builder.iterations}set iterations(t){this.dirty=this.dirty||this.builder.iterations!==t,this.builder.setIterations(t)}setIterations(t){return this.iterations=t,this}get lastPointX(){return this.builder.lastPointX}get lastPointY(){return this.builder.lastPointY}start(){return this.builder.start(),this.dirty=!0,this}startAt(t,s){return this.builder.startAt(t,s),this.dirty=!0,this}lineTo(t,s,f){return this.builder.lineTo(t,s,f),this.dirty=!0,this}verticalLineTo(t,s){return this.builder.verticalLineTo(t,s),this.dirty=!0,this}horizontalLineTo(t,s){return this.builder.horizontalLineTo(t,s),this.dirty=!0,this}ellipticalArc(t,s,f,C,S,r,y){return this.builder.ellipticalArc(t,s,f,C,S,r,y),this.dirty=!0,this}arc(t,s,f,C,S,r){return this.builder.arc(t,s,f,C,S,r),this.dirty=!0,this}quadraticBezierTo(t,s,f,C){return this.builder.quadraticBezierTo(t,s,f,C),this.dirty=!0,this}smoothQuadraticBezierTo(t,s){return this.builder.smoothQuadraticBezierTo(t,s),this.dirty=!0,this}cubicBezierCurveTo(t,s,f,C,S,r){return this.builder.cubicBezierCurveTo(t,s,f,C,S,r),this.dirty=!0,this}smoothCubicBezierCurveTo(t,s,f,C){return this.builder.smoothCubicBezierCurveTo(t,s,f,C),this.dirty=!0,this}close(){return this.builder.close(),this.closePath=this.builder.closePath,this.dirty=!0,this}end(){return this.builder.end(),this.dirty=!0,this}rotateAround(t,s,f){return this.builder.rotateAround(t,s,f),this.dirty=!0,this}scale(t,s,f,C){return this.builder.scale(t,s,f,C),this.dirty=!0,this}offset(t,s){return this.builder.offset(t,s),this.dirty=!0,this}toPolygon(t){return this.builder.toPolygon(t)}appendPathFrom(t,s,f){return this.builder.appendFromPathSegment(t.builder,s,f),this}copyPathFrom(t,s,f){return this.builder.clear().appendFromPathSegment(t.builder,s,f),this}setDisplayPathSegment(t,s){return this.builder.setDisplayPathSegment(t,s),this}}const lR=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;let uR=class extends fo{constructor(t,s,f,C){t===void 0&&(t=0),s===void 0&&(s=0),f===void 0&&(f=0),C===void 0&&(C=f),super(),this.pathData=[],this.closePath=!0,this.setTopLeftPosition(t,s),this.setSize(f,C)}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setTopLeftPosition(t,s){return this.x=t,this.y=s,this}get width(){return this._width}set width(t){this.dirty=this.dirty||this._width!==t,this._width=t}get height(){return this._height}set height(t){this.dirty=this.dirty||this._height!==t,this._height=t}setSize(t,s){return this.width=t,this.height=s,this}get centerX(){return this.x+this.width/2}set centerX(t){this.x=t-this.width/2}get centerY(){return this.y+this.height/2}set centerY(t){this.y=t-this.height/2}setCenterPosition(t,s){return this.centerX=t,this.centerY=s,this}updateData(){this.pathData.length=0;var t=this.x,s=t+this.width,f=this.y,C=f+this.height;return this.pathData.push(t,f),this.pathData.push(s,f),this.pathData.push(s,C),this.pathData.push(t,C),this.pathData.push(t,f),super.updateData(),this}webglRender(t,s,f,C,S){if(this.isFilled){var r=t.fillTint,y=lR(this.fillColor,this.fillAlpha*f);r.TL=y,r.TR=y,r.BL=y,r.BR=y,t.batchFillRect(-C+this.x,-S+this.y,this.width,this.height)}this.isStroked&&io(t,this,f,C,S)}canvasRender(t,s,f){this.isFilled&&(Cr(t,this),t.fillRect(-s,-f,this.width,this.height)),this.isStroked&&(Sr(t,this),t.beginPath(),t.rect(-s,-f,this.width,this.height),t.stroke())}};const sa=Phaser.Utils.Objects.GetValue;class Xa extends Er{constructor(t,s,f,C,S,r){t===void 0&&(t=0),s===void 0&&(s=0),f===void 0&&(f=0),C===void 0&&(C=f),S===void 0&&(S=0),r===void 0&&(r=6),super(),this.setTopLeftPosition(t,s),this.setSize(f,C),this.setRadius(S),this.setIterations(r),this.closePath=!0}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setTopLeftPosition(t,s){return this.x=t,this.y=s,this}get width(){return this._width}set width(t){this.dirty=this.dirty||this._width!==t,this._width=t}get height(){return this._height}set height(t){this.dirty=this.dirty||this._height!==t,this._height=t}setSize(t,s){return this.width=t,this.height=s,this}get centerX(){return this.x+this.width/2}set centerX(t){this.x=t-this.width/2}get centerY(){return this.y+this.height/2}set centerY(t){this.y=t-this.height/2}setCenterPosition(t,s){return this.centerX=t,this.centerY=s,this}get radiusTL(){return this._radiusTL}set radiusTL(t){var s=t>0;this.dirty=this.dirty||this._radiusTL!==t||this._convexTL!==s,this._convexTL=s,this._radiusTL=Math.abs(t)}get radiusTR(){return this._radiusTR}set radiusTR(t){var s=t>0;this.dirty=this.dirty||this._radiusTR!==t||this._convexTR!==s,this._convexTR=s,this._radiusTR=Math.abs(t)}get radiusBL(){return this._radiusBL}set radiusBL(t){var s=t>0;this.dirty=this.dirty||this._radiusBL!==t||this._convexBL!==s,this._convexBL=s,this._radiusBL=Math.abs(t)}get radiusBR(){return this._radiusBR}set radiusBR(t){var s=t>0;this.dirty=this.dirty||this._radiusBR!==t||this._convexBR!==s,this._convexBR=s,this._radiusBR=Math.abs(t)}get radius(){return Math.max(this.radiusTL,this.radiusTR,this.radiusBL,this.radiusBR)}set radius(t){typeof t=="number"?(this.radiusTL=t,this.radiusTR=t,this.radiusBL=t,this.radiusBR=t):(this.radiusTL=sa(t,"tl",0),this.radiusTR=sa(t,"tr",0),this.radiusBL=sa(t,"bl",0),this.radiusBR=sa(t,"br",0))}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){var t=this.pathData;t.length=0;var s=this.width,f=this.height,C,S=this.iterations+1;if(C=this.radiusTL,C>0)if(this._convexTL){var r=C,y=C;Qt(r,y,C,C,180,270,!1,S,t)}else{var r=0,y=0;Qt(r,y,C,C,90,0,!0,S,t)}else di(0,0,t);if(C=this.radiusTR,C>0)if(this._convexTR){var r=s-C,y=C;Qt(r,y,C,C,270,360,!1,S,t)}else{var r=s,y=0;Qt(r,y,C,C,180,90,!0,S,t)}else di(s,0,t);if(C=this.radiusBR,C>0)if(this._convexBR){var r=s-C,y=f-C;Qt(r,y,C,C,0,90,!1,S,t)}else{var r=s,y=f;Qt(r,y,C,C,270,180,!0,S,t)}else di(s,f,t);if(C=this.radiusBL,C>0)if(this._convexBL){var r=C,y=f-C;Qt(r,y,C,C,90,180,!1,S,t)}else{var r=0,y=f;Qt(r,y,C,C,360,270,!0,S,t)}else di(0,f,t);return t.push(t[0],t[1]),k0(this.x,this.y,t),super.updateData(),this}}const dR=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;let fR=class extends fo{constructor(t,s,f,C,S,r){t===void 0&&(t=0),s===void 0&&(s=0),f===void 0&&(f=0),C===void 0&&(C=0),S===void 0&&(S=0),r===void 0&&(r=0),super(),this.pathData=[],this.closePath=!0,this.setP0(t,s),this.setP1(f,C),this.setP2(S,r)}get x0(){return this._x0}set x0(t){this.dirty=this.dirty||this._x0!==t,this._x0=t}get y0(){return this._y0}set y0(t){this.dirty=this.dirty||this._y0!==t,this._y0=t}setP0(t,s){return this.x0=t,this.y0=s,this}get x1(){return this._x1}set x1(t){this.dirty=this.dirty||this._x1!==t,this._x1=t}get y1(){return this._y1}set y1(t){this.dirty=this.dirty||this._y1!==t,this._y1=t}setP1(t,s){return this.x1=t,this.y1=s,this}get x2(){return this._x2}set x2(t){this.dirty=this.dirty||this._x2!==t,this._x2=t}get y2(){return this._y2}set y2(t){this.dirty=this.dirty||this._y2!==t,this._y2=t}setP2(t,s){return this.dirty=this.dirty||this.x2!==t||this.y2!==s,this.x2=t,this.y2=s,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x2,this.y2),this.pathData.push(this.x0,this.y0),super.updateData(),this}webglRender(t,s,f,C,S){if(this.isFilled){var r=dR(this.fillColor,this.fillAlpha*f),y=this.x0-C,e=this.y0-S,u=this.x1-C,m=this.y1-S,d=this.x2-C,l=this.y2-S,h=s.getX(y,e),n=s.getY(y,e),a=s.getX(u,m),c=s.getY(u,m),o=s.getX(d,l),v=s.getY(d,l);t.batchTri(h,n,a,c,o,v,r,r,r)}this.isStroked&&io(t,this,f,C,S)}canvasRender(t,s,f){var C=this.x1-s,S=this.y1-f,r=this.x2-s,y=this.y2-f,e=this.x3-s,u=this.y3-f;t.beginPath(),t.moveTo(C,S),t.lineTo(r,y),t.lineTo(e,u),t.closePath(),this.isFilled&&(Cr(t,this),t.fill()),this.isStroked&&(Sr(t,this),t.stroke())}};const cR={buildShapes(){this.addShape(new Xa().setName("box")).addShape(new Cn().setName("checker"))},updateShapes(){var i=this.width/2,t=this.height/2,s=Math.min(i,t),f=s*2,C=i-s,S=t-s,r=this.boxLineWidth,y=Math.max(f/10,2),e=this.getShape("box"),u=this.getShape("checker");if(this.isSizeChanged){var l=f*(1-this.boxSize)/2,m=r/2,d=f*this.boxSize-r;e.setTopLeftPosition(C+m+l,S+m+l).setSize(d,d),this.isCircleShape?e.setRadius(d/2):e.setRadius(0);var l=f*(1-this.checkerSize)/2,h=f*this.checkerSize/4,n=h*1,a=h*2,c=h*3;u.startAt(n,a).lineTo(a,c).lineTo(c,n).offset(C+l,S+l).end()}this.checked?(e.fillStyle(this.boxFillColor,this.boxFillAlpha).lineStyle(r,this.boxStrokeColor,this.boxStrokeAlpha),u.lineStyle(y,this.checkerColor)):(e.fillStyle(this.uncheckedBoxFillColor,this.uncheckedBoxFillAlpha).lineStyle(r,this.uncheckedBoxStrokeColor,this.uncheckedBoxStrokeAlpha),u.lineStyle()),this.checked&&u.setDisplayPathSegment(this.checkerAnimProgress)}},Ui=Phaser.Utils.Objects.GetValue,vR=Phaser.Math.Linear;class Bs extends Ds{constructor(t,s){super(t,s),this.resetFromJSON(),this.boot()}start(t){if(this.timer.isRunning)return this;var s=this.target;this.propertyKey=Ui(t,"key","value");var f=s[this.propertyKey];return this.fromValue=Ui(t,"from",f),this.toValue=Ui(t,"to",f),this.setEase(Ui(t,"ease",this.ease)),this.setDuration(Ui(t,"duration",this.duration)),this.setRepeat(Ui(t,"repeat",0)),this.setDelay(Ui(t,"delay",0)),this.setRepeatDelay(Ui(t,"repeatDelay",0)),this.timer.setDuration(this.duration).setRepeat(this.repeat).setDelay(this.delay).setRepeatDelay(this.repeatDelay),s[this.propertyKey]=this.fromValue,super.start(),this}updateGameObject(t,s){var f=s.t;f=this.easeFn(f),t[this.propertyKey]=vR(this.fromValue,this.toValue,f)}}const pR={setCheckerAnimationDuration(i){return i===void 0&&(i=0),this.checkerAnimDuration=i,this},playCheckerAnimation(){return this.checkerAnimProgressTask===void 0&&(this.checkerAnimProgressTask=new Bs(this,{eventEmitter:null})),this.checkerAnimProgressTask.restart({key:"checkerAnimProgress",from:0,to:1,duration:this.checkerAnimDuration}),this},stopCheckerAnimation(){return this.checkerAnimProgressTask===void 0?this:(this.checkerAnimProgressTask.stop(),this)}};var W0={};Object.assign(W0,Bw,Gw,cR,pR);const Bt=Phaser.Utils.Objects.GetValue,fc=Phaser.Utils.Objects.IsPlainObject,ph=23730,gR=16777215;class H0 extends Is{constructor(t,s,f,C,S,r,y){fc(s)?(y=s,s=Bt(y,"x",0),f=Bt(y,"y",0),C=Bt(y,"width",2),S=Bt(y,"height",2),r=Bt(y,"color",ph)):fc(r)&&(y=r,r=Bt(y,"color",ph)),super(t,s,f,C,S),this.type="rexCheckbox",r===void 0&&(r=ph),this.setBoxShape(Bt(y,"circleBox",!1)),this.setBoxFillStyle(r,Bt(y,"boxFillAlpha",1)),this.setUncheckedBoxFillStyle(Bt(y,"uncheckedColor",null),Bt(y,"uncheckedBoxFillAlpha",1)),this.setBoxStrokeStyle(Bt(y,"boxLineWidth",4),Bt(y,"boxStrokeColor",r),Bt(y,"boxStrokeAlpha",1)),this.setUncheckedBoxStrokeStyle(this.boxLineWidth,Bt(y,"uncheckedBoxStrokeColor",this.boxStrokeColor),Bt(y,"uncheckedBoxStrokeAlpha",this.boxStrokeAlpha)),this.setCheckerStyle(Bt(y,"checkerColor",gR),Bt(y,"checkerAlpha",1)),this.setBoxSize(Bt(y,"boxSize",1)),this.setCheckerSize(Bt(y,"checkerSize",1)),this.setCheckerAnimationDuration(Bt(y,"animationDuration",150)),this.buildShapes();var e=Bt(y,"checked");e===void 0&&(e=Bt(y,"value",!1)),this.setValue(e)}get value(){return this._value}set value(t){t=!!t,this._value!==t&&(this.dirty=!0,this._value=t,t?this.playCheckerAnimation():this.stopCheckerAnimation(),this.emit("valuechange",t))}setValue(t){return this.value=t,this}toggleValue(){return this.setValue(!this.value),this}get checked(){return this.value}set checked(t){this.value=t}setChecked(t){return t===void 0&&(t=!0),this.setValue(t),this}toggleChecked(){return this.toggleValue(),this}get checkerAnimProgress(){return this._checkerAnimProgress}set checkerAnimProgress(t){this._checkerAnimProgress!==t&&(this._checkerAnimProgress=t,this.dirty=!0)}}Object.assign(H0.prototype,W0);const $n=Phaser.Utils.Objects.GetValue;class rs extends _t{constructor(t,s){super(t,s),this._enable=void 0,t.setInteractive($n(s,"inputConfig",void 0)),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.lastClickTime=void 0,this.setEnable($n(t,"enable",!0)),this.setMode($n(t,"mode",1)),this.setClickInterval($n(t,"clickInterval",100)),this.setDragThreshold($n(t,"threshold",void 0)),this}boot(){var t=this.parent;t.on("pointerdown",this.onPress,this),t.on("pointerup",this.onRelease,this),t.on("pointerout",this.onPointOut,this),t.on("pointermove",this.onMove,this),t.on("pointerover",this.onOver,this),t.on("pointerout",this.onOut,this)}shutdown(t){this.isShutdown||(this.pointer=null,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t){t||this.cancel(),this._enable=t;var s=t?"enable":"disable";this.emit(s,this,this.parent)}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(t){return typeof t=="string"&&(t=mR[t]),this.mode=t,this}setClickInterval(t){return this.clickInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}onPress(t,s,f,C){this.pointer===void 0&&(this.pointer=t,this.mode===0&&this.click(t.downTime,t,C))}onRelease(t,s,f,C){this.pointer===t&&(this.mode===1&&this.click(t.upTime,t,C),this.pointer=void 0)}onPointOut(t,s){this.pointer===t&&this.cancel()}onMove(t,s,f,C){this.pointer===t&&this.dragThreshold!==void 0&&t.getDistance()>=this.dragThreshold&&this.cancel()}click(t,s,f){if(!this.enable)return this;if(t===void 0)return this.emit("click",this,this.parent,s,f),this;this.pointer=void 0;var C=this.lastClickTime;return C!==void 0&&t-C<=this.clickInterval?this:(this.lastClickTime=t,this.emit("click",this,this.parent,s,f),this)}cancel(){return this.pointer=void 0,this}onOver(t,s,f,C){return this.enable?(this.emit("over",this,this.parent,t,C),this):this}onOut(t,s){return this.enable?(this.emit("out",this,this.parent,t,s),this):this}}const mR={press:0,pointerdown:0,release:1,pointerup:1},cc=Phaser.Utils.Objects.GetValue;class Eu extends H0{constructor(t,s,f,C,S,r,y){super(t,s,f,C,S,r,y),this._click=new rs(this,cc(y,"click")),this._click.on("click",function(){this.toggleValue()},this),this.setReadOnly(cc(y,"readOnly",!1))}get readOnly(){return!this._click.enable}set readOnly(t){this._click.enable=!t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}}st.register("checkbox",function(i,t,s,f,C,S){var r=new Eu(this.scene,i,t,s,f,C,S);return this.scene.add.existing(r),r});it(window,"RexPlugins.UI.Checkbox",Eu);const xR={setTrackFillStyle(i,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.trackFillColor!==i||this.trackFillAlpha!==t,this.trackFillColor=i,this.trackFillAlpha=t,this},setFalseValueTrackFillStyle(i,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.falseValueTrackColor!==i||this.uncheckedTrackFillAlpha!==t,this.falseValueTrackColor=i,this.falseValueTrackFillAlpha=t,this},setThumbStyle(i,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.thumbColor!==i||this.checkAlpha!==t,this.thumbColor=i,this.thumbAlpha=t,this}},yR={setTrackSize(i,t){return this.dirty=this.dirty||this.trackWidth!==i||this.trackHeight!==t,this.trackWidth=i,this.trackHeight=t,this},setTrackRadius(i){return this.dirty=this.dirty||this.trackRadius!==i,this.trackRadius=i,this},setThumbSize(i,t){return t===void 0&&(t=i),this.dirty=this.dirty||this.thumbWidth!==i||this.thumbHeight!==t,this.thumbWidth=i,this.thumbHeight=t,this},setThumbRadius(i){return this.dirty=this.dirty||this.thumbRadius!==i,this.thumbRadius=i,this}},TR={setThumbPosition(i,t){return t===void 0&&(t=1-i),this.thumbLeftX=i,this.thumbRightX=t,this},setRTL(i){return i===void 0&&(i=!0),this.rtl=i,this}};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var gh=function(i,t,s){return(t-i)*s+i},CR=function(i,t,s){var f=gh(ur(i),ur(t),s),C=gh(dr(i),dr(t),s),S=gh(fr(i),fr(t),s);return(f&255)<<16|(C&255)<<8|S&255};const vc=Phaser.Math.Linear,SR={buildShapes(){this.addShape(new Xa().setName("track")).addShape(new Xa().setName("thumb"))},updateShapes(){var i=this.width,t=this.height,s=this.value?this.toggleAnimProgress:1-this.toggleAnimProgress,f=this.getShape("track");if(this.isSizeChanged){var C=i*this.trackWidth,S=t*this.trackHeight,r=(i-C)/2,y=(t-S)/2,e=t*this.trackRadius;f.setTopLeftPosition(r,y).setSize(C,S).setRadius(e)}var u=CR(this.falseValueTrackColor,this.trackFillColor,s),m=vc(this.falseValueTrackFillAlpha,this.trackFillAlpha,s);f.fillStyle(u,m);var d=this.getShape("thumb");if(this.isSizeChanged){var l=i*this.thumbWidth,h=t*this.thumbHeight,n=t*this.thumbRadius;d.setSize(l,h).setRadius(n)}var a=vc(this.thumbLeftX,this.thumbRightX,s)*i;this.rtl&&(a=i-a);var c=t/2;d.setCenterPosition(a,c),d.fillStyle(this.thumbColor,this.thumbAlpha)}},PR={setToggleAnimationDuration(i){return i===void 0&&(i=0),this.toggleAnimDuration=i,this},playToggleAnimation(){return this.toggleAnimProgressTask===void 0&&(this.toggleAnimProgressTask=new Bs(this,{eventEmitter:null})),this.toggleAnimProgressTask.restart({key:"toggleAnimProgress",from:0,to:1,duration:this.toggleAnimDuration}),this},stopToggleAnimation(){return this.toggleAnimProgressTask===void 0?this:(this.toggleAnimProgressTask.stop(),this)}};var $0={};Object.assign($0,xR,yR,TR,SR,PR);var ER=function(i){var t=.3*ur(i)+.59*dr(i)+.11*fr(i);return(t&255)<<16|(t&255)<<8|t&255};const Gt=Phaser.Utils.Objects.GetValue,pc=Phaser.Utils.Objects.IsPlainObject,mh=23730,MR=16777215;class K0 extends Is{constructor(t,s,f,C,S,r,y){pc(s)?(y=s,s=Gt(y,"x",0),f=Gt(y,"y",0),C=Gt(y,"width",2),S=Gt(y,"height",2),r=Gt(y,"color",mh)):pc(r)&&(y=r,r=Gt(y,"color",mh)),super(t,s,f,C,S),this.type="rexToggleSwitch",r===void 0&&(r=mh),this.setTrackFillStyle(r,Gt(y,"trackFillAlpha",1)),this.setFalseValueTrackFillStyle(Gt(y,"falseValueTrackColor",ER(r)),Gt(y,"falseValueTrackFillAlpha",1)),this.setThumbStyle(Gt(y,"thumbColor",MR),Gt(y,"thumbAlpha",1)),this.setTrackSize(Gt(y,"trackWidth",.9),Gt(y,"trackHeight",.5)),this.setTrackRadius(Gt(y,"trackRadius",this.trackHeight*.5));var e=Gt(y,"thumbHeight",void 0),u=Gt(y,"thumbWidth",e);u===void 0&&(u=this.trackHeight*.9),this.setThumbSize(u,e),this.setThumbRadius(Gt(y,"thumbRadius",this.thumbHeight*.5)),this.setThumbPosition(Gt(y,"thumbLeft",.3),Gt(y,"thumbRight",void 0)),this.setRTL(Gt(y,"rtl",!1)),this.setToggleAnimationDuration(Gt(y,"animationDuration",150)),this.buildShapes(),this.setValue(Gt(y,"value",!1),0)}get value(){return this._value}set value(t){t=!!t,this._value!==t&&(this.dirty=!0,this._value=t,this.playToggleAnimation(),this.emit("valuechange",t))}setValue(t,s){s===void 0&&(s=this.toggleAnimDuration);var f=this.toggleAnimDuration;return this.toggleAnimDuration=s,this.value=t,this.toggleAnimDuration=f,this}toggleValue(t){return this.setValue(!this.value,t),this}get toggleAnimProgress(){return this._toggleAnimProgress}set toggleAnimProgress(t){this._toggleAnimProgress!==t&&(this._toggleAnimProgress=t,this.dirty=!0)}}Object.assign(K0.prototype,$0);const gc=Phaser.Utils.Objects.GetValue;class Mu extends K0{constructor(t,s,f,C,S,r,y){super(t,s,f,C,S,r,y),this._click=new rs(this,gc(y,"click")),this._click.on("click",function(){this.toggleValue()},this),this.setReadOnly(gc(y,"readOnly",!1))}get readOnly(){return!this._click.enable}set readOnly(t){this._click.enable=!t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}}st.register("toggleSwitch",function(i,t,s,f,C,S){var r=new Mu(this.scene,i,t,s,f,C,S);return this.scene.add.existing(r),r});it(window,"RexPlugins.UI.ToggleSwitch",Mu);const wR={loadFromURL(i,t){var s=this,f=new Image;return f.onload=function(){s.width!==f.width||s.height!==f.height?s.resize(f.width,f.height):s.clear(),s.context.drawImage(f,0,0),s.updateTexture(),t&&t(),f.onload=null,f.src="",f.remove()},f.src=i,this},loadFromURLPromise(i){var t=this;return new Promise(function(s,f){t.loadFromURL(i,s)})},loadFromFile(i,t){var s=URL.createObjectURL(i);return this.loadFromURL(s,function(){URL.revokeObjectURL(s),t&&t()}),this},loadFromFilePromise(i){var t=this;return new Promise(function(s,f){t.loadFromFile(i,s)})}};class Gs extends is{}Object.assign(Gs.prototype,wR);st.register("canvas",function(i,t,s,f){var C=new Gs(this.scene,i,t,s,f);return this.scene.add.existing(C),C});it(window,"RexPlugins.UI.Canvas",Gs);const js=Phaser.Utils.Objects.GetValue;class wu extends is{constructor(t,s,f,C,S,r){super(t,s,f),this.type="rexCircleMaskImage",this.setTexture(C,S,r)}setTexture(t,s,f){typeof s=="object"&&(f=s,s=void 0),typeof f=="string"&&(f={maskType:f});var C=js(f,"maskType",0),S=js(f,"backgroundColor",void 0),r=js(f,"strokeColor",void 0),y=r!=null?10:0,e=js(f,"strokeWidth",y);if(C===void 0?C=0:typeof C=="string"&&(C=RR[C]),this._textureKey=t,this._frameName=s,C===null)return this.loadTexture(t,s),this.dirty=!0,this;var u=this.scene.sys.textures.getFrame(t,s);if(!u)return this;u.cutWidth!==this.width||u.cutHeight!==this.height?this.setCanvasSize(u.cutWidth,u.cutHeight):this.clear();var m=this.canvas,d=this.context,l=m.width,h=m.height;S!=null&&(d.fillStyle=S,d.fillRect(0,0,l,h)),d.save(),d.beginPath();var n=e/2;switch(C){case 1:var g=Math.floor(l/2),p=Math.floor(h/2),a=g-n,c=p-n;d.ellipse(g,p,a,c,0,0,2*Math.PI);break;case 2:var o=js(f,"radius",0),v=js(f,"iteration",void 0);qp(d,n,n,l-e,h-e,o,v);break;default:var g=Math.floor(l/2),p=Math.floor(h/2),x=Math.min(g,p)-n;d.arc(g,p,x,0,2*Math.PI);break}return r!=null&&(d.strokeStyle=r,d.lineWidth=e,d.stroke()),d.clip(),this.loadTexture(t,s),d.restore(),this.dirty=!0,this}resize(t,s){return this.setDisplaySize(t,s),this}}const RR={circle:0,ellipse:1,roundRectangle:2};st.register("circleMaskImage",function(i,t,s,f,C){var S=new wu(this.scene,i,t,s,f,C);return this.scene.add.existing(S),S});it(window,"RexPlugins.UI.CircleMaskImage",wu);const Kn=Phaser.Utils.Objects.GetValue;class j0 extends is{constructor(t,s,f,C,S,r){super(t,s,f),this.type="rexAlphaMaskImage",this.maskFrame=null,this.setTexture(C,S,r)}setTexture(t,s,f){typeof s=="object"&&(f=s,s=void 0),typeof f=="string"&&(f={mask:{key:f}});var C=Kn(f,"mask.key"),S=Kn(f,"mask.frame"),r=Kn(f,"mask.invertAlpha",!1),y=Kn(f,"mask.scale"),e=Kn(f,"backgroundColor");if(C){this._maskKey=C,this._maskFrame=S,this._maskScale=y;var u=C?this.scene.sys.textures.get(C):null;this.maskFrame=u?u.get(S):null}this._textureKey=t,this._frameName=s;var m=this.maskFrame;if(m===null)return this.loadTexture(t,s),this.dirty=!0,this;var d=e!=null;this.loadTexture(t,s);var l=this.canvas,h=this.context,n=l.width,a=l.height;h.save(),h.globalCompositeOperation=r?"destination-out":"destination-in";var c,o;this._maskScale!=null?(c=m.cutWidth*this._maskScale,o=m.cutHeight*this._maskScale):(c=n,o=a);var v=(n-c)/2,g=(a-o)/2;return this.drawFrame(this._maskKey,this._maskFrame,v,g,c,o),h.restore(),d&&(h.save(),h.globalCompositeOperation="destination-over",h.fillStyle=e,h.fillRect(0,0,n,a),h.restore()),this.dirty=!0,this}resize(t,s){return this.setDisplaySize(t,s),this}}st.register("alphaMaskImage",function(i,t,s,f,C){var S=new j0(this.scene,i,t,s,f,C);return this.scene.add.existing(S),S});it(window,"RexPlugins.UI.AlphaMaskImage",j0);const AR=Phaser.Math.Linear,mc=Phaser.Math.Percent,OR={setValue(i,t,s){return i==null?this:(t!==void 0&&(i=mc(i,t,s)),this.value=i,this)},addValue(i,t,s){return t!==void 0&&(i=mc(i,t,s)),this.value+=i,this},getValue(i,t){var s=this.value;return i!==void 0&&(s=AR(i,t,s)),s}},bR=Phaser.Math.Percent;var FR=function(i){return this.easeValuePropName=i,this},LR=function(i){return this.easeValueDuration=i,this},DR=function(i){return this.easeFunction=i,this},IR=function(){return this.easeValueTask&&this.easeValueTask.stop(),this},BR=function(i,t,s){return i==null?this:(t!==void 0&&(i=bR(i,t,s)),this.easeValueTask===void 0&&(this.easeValueTask=new Bs(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,to:i,duration:this.easeValueDuration,ease:this.easeFunction}),this)},GR=function(i,t,s,f){return s===void 0&&(s=-1),f===void 0&&(f=0),this.easeValueTask===void 0&&(this.easeValueTask=new Bs(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,from:i,to:t,duration:this.easeValueDuration,ease:this.easeFunction,repeat:s,repeatDelay:f}),this};const NR={setEaseValuePropName:FR,setEaseValueDuration:LR,setEaseValueFunction:DR,stopEaseValue:IR,easeValueTo:BR,easeValueRepeat:GR},jn=Phaser.Utils.Objects.GetValue,VR=Phaser.Math.Clamp;function Ns(i){class t extends i{bootProgressBase(f){this.eventEmitter=jn(f,"eventEmitter",this);var C=jn(f,"valuechangeCallback",null);if(C!==null){var S=jn(f,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",C,S)}return this.setEaseValuePropName("value").setEaseValueDuration(jn(f,"easeValue.duration",0)).setEaseValueFunction(jn(f,"easeValue.ease","Linear")),this}get value(){return this._value}set value(f){f=VR(f,0,1);var C=this._value,S=C!=f;this.dirty=this.dirty||S,this._value=f,S&&this.eventEmitter.emit("valuechange",this._value,C,this.eventEmitter)}}return Object.assign(t.prototype,OR,NR),t}const zR=Phaser.Math.RadToDeg,UR={buildShapes(){this.addShape(new Vl().setName("track")).addShape(new co().setName("bar")).addShape(new Vl().setName("center"))},updateShapes(){var i=this.radius,t=this.thickness*this.radius,s=this.radius-t/2,f=this.radius-t,C=this.getShape("track");this.trackColor!=null&&t>0?C.setCenterPosition(i,i).setRadius(s).lineStyle(t,this.trackColor):C.reset();var S=this.getShape("bar");if(this.barColor!=null&&s>0){var r,y,e;if(this.value===1)r=!1,y=0,e=361;else{r=this.anticlockwise,y=zR(this.startAngle);var u=360*(r?1-this.value:this.value);e=u+y}S.setCenterPosition(i,i).setRadius(s).setAngle(y,e,r).lineStyle(t,this.barColor)}else S.reset();var m=this.getShape("center");this.centerColor&&f>0?m.setCenterPosition(i,i).setRadius(f).fillStyle(this.centerColor):m.reset()}},ti=Phaser.Utils.Objects.GetValue,YR=Phaser.Utils.Objects.IsPlainObject,kR=Phaser.Math.Clamp,XR=Phaser.Math.DegToRad(270);let vo=class extends Ns(Is){constructor(t,s,f,C,S,r,y){YR(s)&&(y=s,s=ti(y,"x",0),f=ti(y,"y",0),C=ti(y,"radius",1),S=ti(y,"barColor",void 0),r=ti(y,"value",0)),C===void 0&&(C=1);var e=C*2;super(t,s,f,e,e),this.type="rexCircularProgress",this.bootProgressBase(y),this.setRadius(C),this.setTrackColor(ti(y,"trackColor",void 0)),this.setBarColor(S),this.setCenterColor(ti(y,"centerColor",void 0)),this.setThickness(ti(y,"thickness",.2)),this.setStartAngle(ti(y,"startAngle",XR)),this.setAnticlockwise(ti(y,"anticlockwise",!1)),this.buildShapes(),this.setValue(r)}resize(t,s){return t=Math.floor(Math.min(t,s)),t===this.width?this:(super.resize(t,t),this.setRadius(t/2),this)}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t;var s=t*2;this.resize(s,s)}setRadius(t){return this.radius=t,this}get trackColor(){return this._trackColor}set trackColor(t){this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get barColor(){return this._barColor}set barColor(t){this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!=t,this._startAngle=t}setStartAngle(t){return this.startAngle=t,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!=t,this._anticlockwise=t}setAnticlockwise(t){return t===void 0&&(t=!0),this.anticlockwise=t,this}get thickness(){return this._thickness}set thickness(t){t=kR(t,0,1),this.dirty=this.dirty||this._thickness!=t,this._thickness=t}setThickness(t){return this.thickness=t,this}get centerColor(){return this._centerColor}set centerColor(t){this.dirty=this.dirty||this._centerColor!=t,this._centerColor=t}setCenterColor(t){return this.centerColor=t,this}};Object.assign(vo.prototype,UR);st.register("circularProgress",function(i,t,s,f,C,S){var r=new vo(this.scene,i,t,s,f,C,S);return this.scene.add.existing(r),r});it(window,"RexPlugins.UI.CircularProgress",vo);var xh=function(i,t,s,f,C,S,r,y,e,u,m,d){u===void 0&&(u=0),m===void 0&&(m=2*Math.PI),d===void 0&&(d=!1),t.beginPath(),t.ellipse(s,f,C,S,0,u,m,d),r!=null&&(t.fillStyle=r,t.fill()),y!=null&&(t.strokeStyle=y,t.lineWidth=e,t.stroke())},WR=function(i,t,s,f,C,S,r,y,e,u,m){e===void 0&&y!=null&&(e=2),t.font=S,t.textAlign=u,t.textBaseline=m,t.fillStyle=r,t.strokeStyle=y,t.lineWidth=e,t.lineCap="round",t.lineJoin="round",y!=null&&y!=="none"&&e>0&&t.strokeText(C,s,f),r!=null&&r!=="none"&&t.fillText(C,s,f)},HR=function(){var i=this.radius,t=this.thickness*this.radius,s=this.radius-t/2,f=this.radius-t,C=this.canvas,S=this.context;if(this.trackColor&&t>0&&(S.save(),xh(C,S,i,i,s,s,void 0,this.trackColor,t),S.restore()),this.barColor&&s>0){var r,y,e;if(this.value===1)r=!1,y=0,e=2*Math.PI;else{r=this.anticlockwise,y=this.startAngle;var u=2*Math.PI*(r?1-this.value:this.value);e=u+y}S.save(),xh(C,S,i,i,s,s,void 0,this.barColor,t,y,e,r),S.restore()}if(this.centerColor&&f>0){var m;this.centerColor2?(m=this.context.createRadialGradient(i,i,0,i,i,f),m.addColorStop(0,this.centerColor),m.addColorStop(1,this.centerColor2)):m=this.centerColor,S.save(),xh(C,S,i,i,f,f,m),S.restore()}this.textFormatCallback&&(this.textColor||this.textStrokeColor)&&(S.save(),WR(C,S,i,i,this.getFormatText(),this.textFont,this.textColor,this.textStrokeColor,this.textStrokeThickness,"center","middle"),S.restore())};const kt=Phaser.Utils.Objects.GetValue,$R=Phaser.Utils.Objects.IsPlainObject,KR=Phaser.Math.Clamp,jR=Phaser.Math.DegToRad(270);class Z0 extends Ns(is){constructor(t,s,f,C,S,r,y){$R(s)&&(y=s,s=kt(y,"x",0),f=kt(y,"y",0),C=kt(y,"radius",1),S=kt(y,"barColor",void 0),r=kt(y,"value",0));var e=C*2;super(t,s,f,e,e),this.type="rexCircularProgressCanvas",this.bootProgressBase(y),this.setRadius(C),this.setTrackColor(kt(y,"trackColor",void 0)),this.setBarColor(S),this.setCenterColor(kt(y,"centerColor",void 0)),this.setThickness(kt(y,"thickness",.2)),this.setStartAngle(kt(y,"startAngle",jR)),this.setAnticlockwise(kt(y,"anticlockwise",!1)),this.setTextColor(kt(y,"textColor",void 0)),this.setTextStrokeColor(kt(y,"textStrokeColor",void 0),kt(y,"textStrokeThickness",void 0));var u=kt(y,"textFont",void 0);u?this.setTextFont(u):this.setTextFont(kt(y,"textSize","16px"),kt(y,"textFamily","Courier"),kt(y,"textStyle","")),this.setTextFormatCallback(kt(y,"textFormatCallback",void 0),kt(y,"textFormatCallbackScope",void 0)),this.setValue(r)}resize(t,s){return t=Math.floor(Math.min(t,s)),t===this.width?this:(super.resize(t,t),this.setRadius(t/2),this)}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t;var s=t*2;this.resize(s,s)}setRadius(t){return this.radius=t,this}get trackColor(){return this._trackColor}set trackColor(t){t=gt(t,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get barColor(){return this._barColor}set barColor(t){t=gt(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!=t,this._startAngle=t}setStartAngle(t){return this.startAngle=t,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!=t,this._anticlockwise=t}setAnticlockwise(t){return t===void 0&&(t=!0),this.anticlockwise=t,this}get thickness(){return this._thickness}set thickness(t){t=KR(t,0,1),this.dirty=this.dirty||this._thickness!=t,this._thickness=t}setThickness(t){return this.thickness=t,this}get centerColor(){return this._centerColor}set centerColor(t){t=gt(t,this.canvas,this.context),this.dirty=this.dirty||this._centerColor!=t,this._centerColor=t}get centerColor2(){return this._centerColor2}set centerColor2(t){t=gt(t,this.canvas,this.context),this.dirty=this.dirty||this._centerColor2!=t,this._centerColor2=t}setCenterColor(t,s){return this.centerColor=t,this.centerColor2=s,this}get textColor(){return this._textColor}set textColor(t){t=gt(t,this.canvas,this.context),this.dirty=this.dirty||this._textColor!=t,this._textColor=t}setTextColor(t){return this.textColor=t,this}get textStrokeColor(){return this._textStrokeColor}set textStrokeColor(t){t=gt(t,this.canvas,this.context),this.dirty=this.dirty||this._textStrokeColor!=t,this._textStrokeColor=t}get textStrokeThickness(){return this._textStrokeThickness}set textStrokeThickness(t){this.dirty=this.dirty||this._textStrokeThickness!=t,this._textStrokeThickness=t}setTextStrokeColor(t,s){return s===void 0&&(s=2),this.textStrokeColor=t,this.textStrokeThickness=s,this}get textFont(){return this._textFont}set textFont(t){this.dirty=this.dirty||this._textFont!=t,this._textFont=t}setTextFont(t,s,f){var C;return s===void 0?C=t:C=f+" "+t+" "+s,this.textFont=C,this}setTextFormatCallback(t,s){return this.textFormatCallback=t,this.textFormatCallbackScope=s,this}updateTexture(){return this.clear(),HR.call(this),super.updateTexture(),this}getFormatText(t){t===void 0&&(t=this.value);var s;return this.textFormatCallbackScope?s=this.textFormatCallback(t):s=this.textFormatCallback.call(this.textFormatCallbackScope,t),s}}st.register("circularProgressCanvas",function(i,t,s,f,C,S){var r=new Z0(this.scene,i,t,s,f,C,S);return this.scene.add.existing(r),r});it(window,"RexPlugins.UI.CircularProgressCanvas",Z0);var ZR=function(){var i=this.skewX,t=this.width-Math.abs(i),s=this.height,f=this.getShape("trackFill");f.fillStyle(this.trackColor),f.isFilled&&yh(f,0,0,t,s,i).close();var C=this.getShape("bar");if(C.fillStyle(this.barColor),C.isFilled){var S,r;this.rtl?(S=t*(1-this.value),r=t):(S=0,r=t*this.value),yh(C,S,0,r,s,i).close()}var y=this.getShape("trackStroke");y.lineStyle(this.trackStrokeThickness,this.trackStrokeColor),y.isStroked&&yh(y,0,0,t,s,i).end()},yh=function(i,t,s,f,C,S){return S>=0?i.startAt(t+S,s).lineTo(f+S,s).lineTo(f,C).lineTo(t,C).lineTo(t+S,s):i.startAt(t,s).lineTo(f,s).lineTo(f-S,C).lineTo(t-S,C).lineTo(t,s),i};const ee=Phaser.Utils.Objects.GetValue,Th=Phaser.Utils.Objects.IsPlainObject;let Ru=class extends Ns(Is){constructor(t,s,f,C,S,r,y,e){Th(s)?(e=s,s=ee(e,"x",0),f=ee(e,"y",0),C=ee(e,"width",2),S=ee(e,"height",2),r=ee(e,"barColor",void 0),y=ee(e,"value",0)):Th(C)?(e=C,C=ee(e,"width",2),S=ee(e,"height",2),r=ee(e,"barColor",void 0),y=ee(e,"value",0)):Th(r)&&(e=r,r=ee(e,"barColor",void 0),y=ee(e,"value",0)),super(t,s,f,C,S,e),this.type="rexLineProgress",this.bootProgressBase(e),this.addShape(new Cn().setName("trackFill")).addShape(new Cn().setName("bar")).addShape(new Cn().setName("trackStroke")),this.setTrackColor(ee(e,"trackColor",void 0)),this.setBarColor(r),this.setTrackStroke(ee(e,"trackStrokeThickness",2),ee(e,"trackStrokeColor",void 0)),this.setSkewX(ee(e,"skewX",0)),this.setRTL(ee(e,"rtl",!1)),this.setValue(y)}get trackColor(){return this._trackColor}set trackColor(t){this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get trackStrokeColor(){return this._trackStrokeColor}set trackStrokeColor(t){this.dirty=this.dirty||this._trackStrokeColor!=t,this._trackStrokeColor=t}get trackStrokeThickness(){return this._trackStrokeThickness}set trackStrokeThickness(t){this.dirty=this.dirty||this._trackStrokeThickness!=t,this._trackStrokeThickness=t}setTrackStroke(t,s){return this.trackStrokeThickness=t,this.trackStrokeColor=s,this}get barColor(){return this._barColor}set barColor(t){this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get skewX(){return this._skewX}set skewX(t){this.dirty=this.dirty||this._skewX!=t,this._skewX=t}setSkewX(t){return this.skewX=t,this}get rtl(){return this._rtl}set rtl(t){t=!!t,this.dirty=this.dirty||this._rtl!=t,this._rtl=t}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}};var JR={updateShapes:ZR};Object.assign(Ru.prototype,JR);st.register("lineProgress",function(i,t,s,f,C,S,r){var y=new Ru(this.scene,i,t,s,f,C,S,r);return this.scene.add.existing(y),y});it(window,"RexPlugins.UI.LineProgress",Ru);var QR=function(i,t){i.save(),i.beginPath();var s=t[0];i.moveTo(s.x,s.y);for(var f=1,C=t.length;f<C;f++)s=t[f],i.lineTo(s.x,s.y);i.closePath(),i.restore()},Ch=function(i,t,s,f,C,S,r){r===void 0&&(r="round"),QR(t,s),t.lineJoin=r,f!=null&&(t.fillStyle=f,t.fill()),C!=null&&(t.strokeStyle=C,t.lineWidth=S,t.stroke())},qR=function(){var i=this.skewX,t=this.width-Math.abs(i),s=this.height,f=this.canvas,C=this.context;(this.trackColor||this.trackStrokeColor)&&xc(0,0,t,s,i,this.trackPoints);var S,r;if(this.barColor&&(this.rtl?(S=t*(1-this.value),r=t):(S=0,r=t*this.value),xc(S,0,r,s,i,this.barPoints)),this.trackColor&&(C.save(),Ch(f,C,this.trackPoints,this.trackColor),C.restore()),this.barColor){C.save();var y;if(this.barColor2){var e;if(this.isHorizontalGradient){var u=s/2;e=C.createLinearGradient(S,u,r,u)}else{var m=t/2;e=C.createLinearGradient(m,0,m,s)}e.addColorStop(0,this.rtl?this.barColor:this.barColor2),e.addColorStop(1,this.rtl?this.barColor2:this.barColor),y=e}else y=this.barColor;Ch(f,C,this.barPoints,y),C.restore()}this.trackStrokeColor&&this.trackStrokeThickness>0&&(C.save(),Ch(f,C,this.trackPoints,void 0,this.trackStrokeColor,this.trackStrokeThickness),C.restore())},xc=function(i,t,s,f,C,S){S===void 0&&(S=[]),S.length=4;for(var r=0;r<4;r++)S[r]||(S[r]={});var y;return C>=0?(y=S[0],y.x=i+C,y.y=t,y=S[1],y.x=s+C,y.y=t,y=S[2],y.x=s,y.y=f,y=S[3],y.x=i,y.y=f):(y=S[0],y.x=i,y.y=t,y=S[1],y.x=s,y.y=t,y=S[2],y.x=s-C,y.y=f,y=S[3],y.x=i-C,y.y=f),S};const Xt=Phaser.Utils.Objects.GetValue,Sh=Phaser.Utils.Objects.IsPlainObject;class Au extends Ns(is){constructor(t,s,f,C,S,r,y,e){Sh(s)?(e=s,s=Xt(e,"x",0),f=Xt(e,"y",0),C=Xt(e,"width",2),S=Xt(e,"height",2),r=Xt(e,"barColor",void 0),y=Xt(e,"value",0)):Sh(C)?(e=C,C=Xt(e,"width",2),S=Xt(e,"height",2),r=Xt(e,"barColor",void 0),y=Xt(e,"value",0)):Sh(r)&&(e=r,r=Xt(e,"barColor",void 0),y=Xt(e,"value",0)),super(t,s,f,C,S),this.type="rexLineProgressCanvas",this.trackPoints=[],this.barPoints=[],this.bootProgressBase(e),this.setTrackColor(Xt(e,"trackColor",void 0)),this.setBarColor(r,Xt(e,"barColor2",void 0),Xt(e,"isHorizontalGradient",void 0)),this.setTrackStroke(Xt(e,"trackStrokeThickness",2),Xt(e,"trackStrokeColor",void 0)),this.setSkewX(Xt(e,"skewX",0)),this.setRTL(Xt(e,"rtl",!1)),this.setValue(y)}get trackColor(){return this._trackColor}set trackColor(t){t=gt(t,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get trackStrokeColor(){return this._trackStrokeColor}set trackStrokeColor(t){t=gt(t,this.canvas,this.context),this.dirty=this.dirty||this._trackStrokeColor!=t,this._trackStrokeColor=t}get trackStrokeThickness(){return this._trackStrokeThickness}set trackStrokeThickness(t){this.dirty=this.dirty||this._trackStrokeThickness!=t,this._trackStrokeThickness=t}setTrackStroke(t,s){return this.trackStrokeThickness=t,this.trackStrokeColor=s,this}get barColor(){return this._barColor}set barColor(t){t=gt(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=t,this._barColor=t}get barColor2(){return this._barColor2}set barColor2(t){t=gt(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor2!=t,this._barColor2=t}get isHorizontalGradient(){return this._isHorizontalGradient}set isHorizontalGradient(t){this.dirty|=this._isHorizontalGradient!=t,this._isHorizontalGradient=t}setBarColor(t,s,f){return f===void 0&&(f=!0),this.barColor=t,this.barColor2=s,this.isHorizontalGradient=f,this}get skewX(){return this._skewX}set skewX(t){this.dirty=this.dirty||this._skewX!=t,this._skewX=t}setSkewX(t){return this.skewX=t,this}get rtl(){return this._rtl}set rtl(t){t=!!t,this.dirty=this.dirty||this._rtl!=t,this._rtl=t}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}updateTexture(){return this.clear(),qR.call(this),super.updateTexture(),this}}st.register("circularProgressCanvas",function(i,t,s,f,C,S,r){var y=new Au(this.scene,i,t,s,f,C,S,r);return this.scene.add.existing(y),y});it(window,"RexPlugins.UI.LineProgressCanvas",Au);Phaser.Math.Wrap;const Zs=Phaser.Math.Linear;var _R=function(){var i=this.getShape("triangle"),t=this.padding,s=this.width-t.right,f=0+t.left,C=this.height-t.bottom,S=0+t.top,r=(f+s)/2,y=(S+C)/2,e={0:{a:{x:f,y:S},b:{x:s,y},c:{x:f,y:C}},1:{a:{x:f,y:S},b:{x:r,y:C},c:{x:s,y:S}},2:{a:{x:s,y:S},b:{x:f,y},c:{x:s,y:C}},3:{a:{x:f,y:C},b:{x:r,y:S},c:{x:s,y:C}}},u,m,d,l,h,n;if(this.previousDirection===void 0){var a=e[this.direction],c=a.a,o=a.b,v=a.c;u=c.x,m=c.y,d=o.x,l=o.y,h=v.x,n=v.y}else{var g=e[this.previousDirection],p=e[this.direction],x=this.easeDirectionProgress;u=Zs(g.a.x,p.a.x,x),m=Zs(g.a.y,p.a.y,x),d=Zs(g.b.x,p.b.x,x),l=Zs(g.b.y,p.b.y,x),h=Zs(g.c.x,p.c.x,x),n=Zs(g.c.y,p.c.y,x)}i.startAt(u,m).lineTo(d,l).lineTo(h,n),this.arrowOnly?i.end():i.close()};const tA=Phaser.Math.DegToRad,na=tA(120);var eA=function(t){var t=this.getShape("triangle"),s=this.width/2,f=this.height/2,C=Math.min(s,f)*this.radius,S=this.verticeRotation;t.startAt(s+C*Math.cos(S+na),f+C*Math.sin(S+na)).lineTo(s+C*Math.cos(S),f+C*Math.sin(S)).lineTo(s+C*Math.cos(S-na),f+C*Math.sin(S-na)),this.arrowOnly?t.end():t.close()};const iA={buildShapes(){this.addShape(new Cn().setName("triangle"))},updateShapes(){var i=this.getShape("triangle");this.arrowOnly?i.fillStyle().lineStyle(this.lineWidth,this.strokeColor,this.strokeAlpha):i.fillStyle(this.fillColor,this.fillAlpha).lineStyle(this.lineWidth,this.strokeColor,this.strokeAlpha),this.shapeMode===0?_R.call(this):eA.call(this)}},sA={setEaseDuration(i){return i===void 0&&(i=0),this.easeDuration=i,this},playEaseDirectionation(){return this.easeDirectionProgressTask===void 0&&(this.easeDirectionProgressTask=new Bs(this,{eventEmitter:null})),this.easeDirectionProgressTask.restart({key:"easeDirectionProgress",from:0,to:1,duration:this.easeDuration}),this},stopEaseDirection(){return this.easeDirectionProgressTask===void 0?this:(this.easeDirectionProgressTask.stop(),this)}},Js=Phaser.Utils.Objects.GetValue,nA=Phaser.Utils.Objects.IsPlainObject,rA=Phaser.Math.DegToRad,aA=Phaser.Math.RadToDeg;class po extends Is{constructor(t,s,f,C,S,r,y){var e,u,m,d,l,h,n,a;if(nA(s)){var c=s;s=c.x,f=c.y,C=c.width,S=c.height,r=c.color,y=c.alpha,e=c.strokeColor,u=c.strokeAlpha,m=c.strokeWidth,d=c.arrowOnly,l=c.direction,h=c.easeDuration,n=c.padding,a=c.radius}s===void 0&&(s=0),f===void 0&&(f=0),C===void 0&&(C=1),S===void 0&&(S=C),d===void 0&&(d=!1),l===void 0&&(l=0),h===void 0&&(h=0),n===void 0&&(n=0),a===void 0&&(a=void 0),super(t,s,f,C,S),this.type="rexTriangle",this.setFillStyle(r,y),e!==void 0&&m===void 0&&(m=2),this.setStrokeStyle(m,e,u),this.setArrowOnly(d),this.setDirection(l,h),this.setPadding(n),this.setRadius(a),this.buildShapes()}get arrowOnly(){return this._arrowOnly}set arrowOnly(t){this.dirty=this.dirty||this._arrowOnly!=t,this._arrowOnly=t}setArrowOnly(t){return t===void 0&&(t=!0),this.arrowOnly=t,this}get direction(){return this._direction}set direction(t){t=hA(t),this._direction!==t&&(this.easeDuration>0&&this._direction!==void 0?this.previousDirection=this._direction:this.previousDirection=void 0,this._direction=t,this.verticeAngle=t*90,this.dirty=!0,this.previousDirection!==void 0?this.playEaseDirectionation():this.stopEaseDirection())}setDirection(t,s){return s!==void 0&&this.setEaseDuration(s),this.direction=t,this}toggleDirection(t){return this.setDirection(this.direction+2,t),this}get easeDirectionProgress(){return this._easeDirectionProgress}set easeDirectionProgress(t){this._easeDirectionProgress!==t&&(this._easeDirectionProgress=t,this.dirty=!0)}setPadding(t,s,f,C){if(typeof t=="object"){var S=t,r=Js(S,"x",null);r!==null?(t=r,f=r):(t=Js(S,"left",0),f=Js(S,"right",t));var y=Js(S,"y",null);y!==null?(s=y,C=y):(s=Js(S,"top",0),C=Js(S,"bottom",s))}else t===void 0&&(t=0),s===void 0&&(s=t),f===void 0&&(f=t),C===void 0&&(C=s);return this.padding===void 0&&(this.padding={}),this.dirty=this.dirty||this.padding.left!=t||this.padding.top!=s||this.padding.right!=f||this.padding.bottom!=C,this.padding.left=t,this.padding.top=s,this.padding.right=f,this.padding.bottom=C,this.setRadius(),this}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t}setRadius(t){return this.radius=t,this.shapeMode=t==null?0:1,this}get verticeRotation(){return this._verticeRotation}set verticeRotation(t){this.dirty=this.dirty||this._verticeRotation!=t,this._verticeRotation=t}setVerticeRotation(t){return this.verticeRotation=t,this}get verticeAngle(){return aA(this.verticeRotation)}set verticeAngle(t){this.verticeRotation=rA(t)}setVerticeAngle(t){return this.verticeAngle=t,this}}const oA={right:0,down:1,left:2,up:3};var hA=function(i){return typeof i=="string"&&(i=oA[i]),i=i%4,i};Object.assign(po.prototype,iA,sA);st.register("triangle",function(i,t,s,f,C,S){var r=new po(this.scene,i,t,s,f,C,S);return this.scene.add.existing(r),r});it(window,"RexPlugins.UI.Triangle",po);const lA=Phaser.GameObjects.Zone,uA=Phaser.Utils.Array.Add,dA=Phaser.Utils.Array.Remove;let Mr=class extends lA{constructor(t,s,f,C,S){s===void 0&&(s=0),f===void 0&&(f=0),C===void 0&&(C=1),S===void 0&&(S=1),super(t,s,f,C,S),this.children=[]}destroy(t){if(this.scene){if(t)for(var s,f=this.children.length-1;f>=0;f--)s=this.children[f],!s.parentContainer&&!s.displayList&&s.destroy(t);this.clear(!t),super.destroy(t)}}contains(t){return this.children.indexOf(t)!==-1}add(t){var s=this;return uA(this.children,t,0,function(f){f.once("destroy",s.onChildDestroy,s)},this),this}remove(t,s){var f=this;return dA(this.children,t,function(C){C.off("destroy",f.onChildDestroy,f),s&&C.destroy()}),this}onChildDestroy(t,s){this.remove(t,!1)}clear(t){for(var s=this,f,C=0,S=this.children.length;C<S;C++)f=this.children[C],f.off("destroy",s.onChildDestroy,s),t&&f.destroy();return this.children.length=0,this}};const yc=Phaser.GameObjects.Components;Phaser.Class.mixin(Mr,[yc.Alpha,yc.Flip]);var Ue=function(i,t){var s;if(t===void 0)i.hasOwnProperty("rexContainer")&&(s=i.rexContainer.parent);else for(s=Ue(i);s&&s.name!==t;)s=Ue(s);return s},J0=function(i){for(var t=Ue(i);t;)i=t,t=Ue(t);return i};const fA=Phaser.Math.DegToRad,cA=Phaser.Math.RadToDeg;var Ct=function(i){if(!i.hasOwnProperty("rexContainer")){var t={parent:null,self:null,layer:null,x:0,y:0,syncPosition:!0,rotation:0,syncRotation:!0,scaleX:0,scaleY:0,syncScale:!0,alpha:0,syncAlpha:!0,visible:!0,active:!0};Object.defineProperty(t,"angle",{get:function(){return cA(this.rotation)},set:function(s){this.rotation=fA(s)}}),Object.defineProperty(t,"displayWidth",{get:function(){return i.width*this.scaleX},set:function(s){this.scaleX=s/i.width}}),Object.defineProperty(t,"displayHeight",{get:function(){return i.height*this.scaleY},set:function(s){this.scaleY=s/i.height}}),i.rexContainer=t}return i.rexContainer};const vA={setParent(i,t){t===void 0&&(t=this);var s=Ct(i);return t?(s.parent=t,s.self=i):(s.parent=null,s.self=null),this},getParent(i,t){return typeof i=="string"&&(t=i,i=void 0),i===void 0&&(i=this),Ue(i,t)},getTopmostParent(i){return i===void 0&&(i=this),J0(i)}},Zn=Phaser.Utils.Objects.GetValue,Q0=Mr.prototype.add;var Ph=function(i,t){this.setParent(i);var s=Ct(i);return q0(s,t),this.resetChildState(i).updateChildVisible(i).updateChildActive(i).updateChildScrollFactor(i).updateChildMask(i),Q0.call(this,i),this.addToParentContainer(i),this.addToRenderLayer(i),this},Eh=function(i,t){this.setParent(i);var s=Ct(i);return q0(s,t),s.x=i.x,s.y=i.y,s.rotation=i.rotation,s.scaleX=i.scaleX,s.scaleY=i.scaleY,s.alpha=i.alpha,s.visible=i.visible,s.active=i.active,this.updateChildPosition(i).updateChildAlpha(i).updateChildVisible(i).updateChildActive(i).updateChildScrollFactor(i).updateChildMask(i),Q0.call(this,i),this.addToRenderLayer(i),this},q0=function(i,t){t===void 0&&(t=!0),typeof t=="boolean"?(i.syncPosition=t,i.syncRotation=t,i.syncScale=t,i.syncAlpha=t,i.syncScrollFactor=t):(i.syncPosition=Zn(t,"syncPosition",!0),i.syncRotation=Zn(t,"syncRotation",!0),i.syncScale=Zn(t,"syncScale",!0),i.syncAlpha=Zn(t,"syncAlpha",!0),i.syncScrollFactor=Zn(t,"syncScrollFactor",!0))};const pA={add(i){return Array.isArray(i)?this.addMultiple(i):Ph.call(this,i),this},pin(i,t){return Array.isArray(i)?this.addMultiple(i,t):Ph.call(this,i,t),this},addMultiple(i){for(var t=0,s=i.length;t<s;t++)Ph.call(this,i[t]);return this},addLocal(i){return Array.isArray(i)?this.addMultiple(i):Eh.call(this,i),this},pinLocal(i,t){return Array.isArray(i)?this.addMultiple(i,t):Eh.call(this,i,t),this},addLocalMultiple(i){for(var t=0,s=i.length;t<s;t++)Eh.call(this,i[t]);return this}},Tc=Mr.prototype.remove,gA=Mr.prototype.clear,mA={remove(i,t){return Ue(i)!==this?this:(this.setParent(i,null),t||this.removeFromRenderLayer(i),Tc.call(this,i,t),this)},unpin(i,t){return Ue(i)!==this?this:(this.setParent(i,null),t||this.removeFromRenderLayer(i),Tc.call(this,i,t),this)},clear(i){for(var t=this.children,s=0,f=t.length;s<f;s++){var C=t[s];this.setParent(C,null),i||this.removeFromRenderLayer(C)}return gA.call(this,i),this}},xA={getLocalState(i){return Ct(i)},resetChildState(i){return this.resetChildPositionState(i).resetChildVisibleState(i).resetChildAlphaState(i).resetChildActiveState(i),this},resetChildrenState(i){for(var t=0,s=i.length;t<s;t++)this.resetChildState(i[t]);return this},syncProperties(){return this.syncPosition().syncVisible().syncAlpha().syncActive().syncScrollFactor().syncMask(),this}},Cc=Phaser.Math.RotateAround,yA={worldToLocal(i){return i.x-=this.x,i.y-=this.y,Cc(i,0,0,-this.rotation),i.x/=this.scaleX,i.y/=this.scaleY,i},localToWorld(i){return i.x*=this.scaleX,i.y*=this.scaleY,Cc(i,0,0,this.rotation),i.x+=this.x,i.y+=this.y,i}};var vr=function(i,t){return i===t?1:i/t};const TA={updateChildPosition(i){i.isRexContainerLite&&(i.syncChildrenEnable=!1);var t=Ct(i),s=t.parent;return t.syncPosition&&(i.x=t.x,i.y=t.y,s.localToWorld(i)),t.syncRotation&&(i.rotation=t.rotation+s.rotation),t.syncScale&&(i.scaleX=t.scaleX*s.scaleX,i.scaleY=t.scaleY*s.scaleY),i.isRexContainerLite&&(i.syncChildrenEnable=!0,i.syncPosition()),this},syncPosition(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildPosition,this),this},resetChildPositionState(i){var t=Ct(i),s=t.parent;return t.x=i.x,t.y=i.y,s.worldToLocal(t),t.scaleX=vr(i.scaleX,s.scaleX),t.scaleY=vr(i.scaleY,s.scaleY),t.rotation=i.rotation-s.rotation,this},setChildPosition(i,t,s){return i.x=t,i.y=s,this.resetChildPositionState(i),this},setChildLocalPosition(i,t,s){var f=Ct(i);return f.x=t,f.y=s,this.updateChildPosition(i),this},resetLocalPositionState(){var i=Ct(this).parent;return i&&i.resetChildPositionState(this),this}},CA=Phaser.Math.DegToRad,SA={updateChildRotation(i){var t=Ct(i),s=t.parent;return t.syncRotation&&(i.rotation=s.rotation+t.rotation),this},syncRotation(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildRotation,this),this},resetChildRotationState(i){var t=Ct(i),s=t.parent;return t.rotation=i.rotation-s.rotation,this},setChildRotation(i,t){return i.rotation=t,this.resetChildRotationState(i),this},setChildAngle(i,t){return i.angle=t,this.resetChildRotationState(i),this},setChildLocalRotation(i,t){var s=Ct(i);return s.rotation=t,this.updateChildRotation(i),this},setChildLocalAngle(i,t){var s=Ct(i);return s.rotation=CA(t),this.updateChildRotation(i),this},resetLocalRotationState(){var i=Ct(this).parent;return i&&i.resetChildRotationState(this),this}},PA={updateChildScale(i){var t=Ct(i),s=t.parent;return t.syncScale&&(i.scaleX=s.scaleX*t.scaleX,i.scaleY=s.scaleY*t.scaleY),this},syncScale(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScale,this),this},resetChildScaleState(i){var t=Ct(i),s=t.parent;return t.scaleX=vr(i.scaleX,s.scaleX),t.scaleY=vr(i.scaleY,s.scaleY),this},setChildScale(i,t,s){return s===void 0&&(s=t),i.scaleX=t,i.scaleY=s,this.resetChildScaleState(i),this},setChildLocalScale(i,t,s){s===void 0&&(s=t);var f=Ct(i);return f.scaleX=t,f.scaleY=s,this.updateChildScale(i),this},setChildDisplaySize(i,t,s){return i.setDisplaySize(t,s),this.resetChildScaleState(i),this},resetLocalScaleState(){var i=Ct(this).parent;return i&&i.resetChildScaleState(this),this}},EA={updateChildVisible(i){var t=Ct(i),s=t.parent,f=t.hasOwnProperty("maskVisible")?t.maskVisible:!0;return i.visible=s.visible&&t.visible&&f,this},syncVisible(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildVisible,this),this},resetChildVisibleState(i){var t=Ct(i);return t.hasOwnProperty("maskVisible")&&delete t.maskVisible,t.visible=i.visible,this},setChildVisible(i,t){return this.setChildLocalVisible(i,t),this},setChildLocalVisible(i,t){t===void 0&&(t=!0);var s=Ct(i);return s.visible=t,this.updateChildVisible(i),this},setChildMaskVisible(i,t){t===void 0&&(t=!0);var s=Ct(i);return s.maskVisible=t,this.updateChildVisible(i),this},resetLocalVisibleState(){var i=Ct(this).parent;return i&&i.resetChildVisibleState(this),this}},MA={updateChildAlpha(i){var t=Ct(i),s=t.parent;return t.syncAlpha&&(i.alpha=s.alpha*t.alpha),this},syncAlpha(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildAlpha,this),this},resetChildAlphaState(i){var t=Ct(i),s=t.parent;return t.alpha=vr(i.alpha,s.alpha),this},setChildAlpha(i,t){return i.alpha=t,this.resetChildAlphaState(i),this},setChildLocalAlpha(i,t){var s=Ct(i);return s.alpha=t,this.updateChildAlpha(i),this},resetLocalAlphaState(){var i=Ct(this).parent;return i&&i.resetChildAlphaState(this),this}},wA={updateChildActive(i){var t=Ct(i),s=t.parent;return i.active=s.active&&t.active,this},syncActive(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildActive,this),this},resetChildActiveState(i){var t=Ct(i);return t.active=i.active,this},setChildActive(i,t){return i.active=t,this.resetChildActiveState(i),this},setChildLocalActive(i,t){t===void 0&&(t=!0);var s=Ct(i);return s.active=t,this.updateChildActive(i),this},resetLocalActiveState(){var i=Ct(this).parent;return i&&i.resetChildActiveState(this),this}},RA={updateChildScrollFactor(i){var t=Ct(i),s=t.parent;return t.syncScrollFactor&&i.setScrollFactor(s.scrollFactorX,s.scrollFactorY),this},syncScrollFactor(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScrollFactor,this),this}},AA={updateChildMask(i){if(this.mask==null)return this;var t=this.mask.hasOwnProperty("geometryMask")?this.mask.geometryMask:this.mask.bitmapMask;return t!==i&&(i.mask=this.mask),this},syncMask(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildMask,this),this},setMask(i){return this.mask=i,this},clearMask(i){return i===void 0&&(i=!1),this._mask=null,this.children.forEach(function(t){t.clearMask(!1)}),i&&this.mask&&this.mask.destroy(),this}};var Sn=function(i,t){if(i.length<=1)return i;t===void 0&&(t=!1);var s=i[0].scene,f=s.sys.displayList;return f.depthSort(),t?i.sort(function(C,S){return f.getIndex(S)-f.getIndex(C)}):i.sort(function(C,S){return f.getIndex(C)-f.getIndex(S)}),i};const OA={setDepth(i,t){if(this.depth=i,!t&&this.children)for(var s=this.getAllChildren(),f=0,C=s.length;f<C;f++)s[f].depth=i;return this},swapDepth(i){var t=this.depth,s=i.depth;return this.setDepth(s),i.setDepth(t),this},incDepth(i){if(this.depth+=i,this.children)for(var t=this.getAllChildren(),s=0,f=t.length;s<f;s++)t[s].depth+=i;return this},bringToTop(){var i=this.displayList,t=this.getAllChildren([this]);Sn(t,!1);for(var s=0,f=t.length;s<f;s++){var C=t[s];i.exists(C)&&i.bringToTop(C)}return this},moveDepthBelow(i){var t=this.displayList;if(i.displayList!==t)return this;var s=this.getAllChildren([this]);Sn(s,!1);for(var f=0,C=s.length;f<C;f++){var S=s[f];if(t.exists(S)){t.moveBelow(i,S);break}}return this},moveDepthAbove(i){var t=this.displayList;if(i.displayList!==t)return this;var s=this.getAllChildren([this]);Sn(s,!0);for(var f=0,C=s.length;f<C;f++){var S=s[f];if(t.exists(S)){t.moveAbove(i,S);break}}return this}};var _0=function(i,t){var s=t(i);if(!s&&i.isRexContainerLite)for(var f=i.children,C=0,S=f.length;C<S;C++)_0(f[C],t)},Mh=function(i,t){for(var s=[i];s.length>0;){var f=s.shift(),C=t(f);!C&&f.isRexContainerLite&&s.push(...f.children)}};const ms=Phaser.Utils.Array,bA={getChildren(i){if(!i)i=this.children;else for(var t=0,s=this.children.length;t<s;t++)i.push(this.children[t]);return i},getAllChildren(i){i===void 0&&(i=[]);var t=this;return Mh(t,function(s){s!==t&&i.push(s)}),i},getAllVisibleChildren(i){i===void 0&&(i=[]);var t=this;return Mh(t,function(s){if(s!==t){if(!s.visible)return!0;i.push(s)}}),i},bfs(i,t){return t===void 0&&(t=this),Mh(t,i),this},dfs(i,t){return t===void 0&&(t=this),_0(t,i),this},contains(i){var t=Ue(i);return t?t===this?!0:this.contains(t):!1},getByName(i,t){if(t){for(var s=[this],f,C;s.length;){f=s.shift();for(var S=0,r=f.children.length;S<r;S++){if(C=f.children[S],C.name===i)return C;C.isRexContainerLite&&s.push(C)}}return null}else return ms.GetFirst(this.children,"name",i)},getRandom(i,t){return ms.GetRandom(this.children,i,t)},getFirst(i,t,s,f){return ms.GetFirstElement(this.children,i,t,s,f)},getAll(i,t,s,f){return ms.GetAll(this.children,i,t,s,f)},count(i,t,s,f){return ms.CountAllMatching(this.children,i,t,s,f)},swap(i,t){return ms.Swap(this.children,i,t),this},setAll(i,t,s,f){return ms.SetAll(this.children,i,t,s,f),this}};var wh=function(i){for(var t=[],s=0,f=i.length;s<f;s++){var C=i[s];C.hasOwnProperty("rexContainer")&&t.push(C.rexContainer)}return t},FA=function(i){for(var t=0,s=i.length;t<s;t++){var f=i[t].scene;if(f)return f}return null},Sc=function(i,t,s){if(!s.parent){i.remove();return}var f=s.parent,C=s.self;switch(t){case"x":case"y":f.updateChildPosition(C);break;case"angle":case"rotation":f.updateChildRotation(C);break;case"scaleX":case"scaleY":case"displayWidth":case"displayHeight":f.updateChildScale(C);break;case"alpha":f.updateChildAlpha(C);break;default:f.updateChildPosition(C),f.updateChildRotation(C),f.updateChildScale(C),f.updateChildAlpha(C);break}};const LA={tweenChild(i){var t=i.targets;Array.isArray(t)||(t=[t]);var s=this.scene||FA(t);if(s){i.targets=wh(t);var f=s.tweens.add(i);return f.on("update",Sc),f}},tweenSelf(i){return i.targets=[this],this.tweenChild(i)},createTweenChildConfig(i){var t=i.targets;t&&(Array.isArray(t)||(t=[t]),i.targets=wh(t));var s=i.onUpdate;return i.onUpdate=function(f,C){s&&s(f,C),Sc(f,void 0,C)},i},tween(i){var t=this.scene;return i.targets||(i.targets=this),t.tweens.add(i)},timelineChild(i){var t=i.targets;t&&(Array.isArray(t)||(t=[t]),i.targets=wh(t));for(var s=i.tweens,f=0,C=s.length;f<C;f++)s[f]=this.createTweenChildConfig(s[f]);var S=this.scene.tweens.timeline(i);return S}},DA={addToContainer(i){this._setParentContainerFlag=!0;var t=this.getAllChildren([this]);return Sn(t),i.add(t),this._setParentContainerFlag=!1,this},addToLayer(i){return this.addToContainer(i),this},removeFromContainer(){if(!this.parentContainer)return this;var i=this.getAllChildren([this]).filter(function(t){return!!t.scene});return i.length===0?this:(this._setParentContainerFlag=!0,i.length>1&&(Sn(i),i.reverse()),this.parentContainer.remove(i),this._setParentContainerFlag=!1,this)},getParentContainer(){if(this.parentContainer)return this.parentContainer;for(var i=this.getParent();i;){var t=i.parentContainer;if(t)return t;i=i.getParent()}return null},addToParentContainer(i){if(!i.displayList)return this;var t=this.getParentContainer();return t?(i.isRexContainerLite?i.addToContainer(t):t.add(i),this):this}},IA={enableLayer(){if(this.privateRenderLayer)return this;var i=this.scene.add.layer();return this.moveDepthBelow(i),this.addToLayer(i),this.privateRenderLayer=i,this},getLayer(){return this.privateRenderLayer||this.enableLayer(),this.privateRenderLayer},getRenderLayer(){if(this.privateRenderLayer)return this.privateRenderLayer;for(var i=this.getParent();i;){var t=i.privateRenderLayer;if(t)return t;i=i.getParent()}return null},addToRenderLayer(i){if(!i.displayList)return this;var t=this.getRenderLayer();if(!t)return this;i.isRexContainerLite?i.addToLayer(t):t.add(i);var s=Ct(i);return s.layer=t,this},removeFromRenderLayer(i){var t=Ct(i),s=t.layer;return s?(s.remove(i),t.layer=null,this):this}},Pc=Phaser.Geom.Rectangle,BA=Phaser.Geom.Rectangle.Union;var GA=function(i,t){t===void 0?t=new Pc:t===!0&&(Rh===void 0&&(Rh=new Pc),t=Rh),t.setTo(0,0,0,0);for(var s,f=!0,C=0,S=i.length;C<S;C++)if(s=i[C],!!s.getBounds){var r=gu(s,!0);f?(t.setTo(r.x,r.y,r.width,r.height),f=!1):BA(r,t,t)}return t},Rh;const NA=Phaser.GameObjects.GameObject;var as=function(i){return i instanceof NA},xs=Phaser.Utils.Objects.GetValue,VA=Phaser.Textures.DynamicTexture,zA=Phaser.Utils.String.UUID,Ou=function(i){if(i){var t=i.gameObjects,s=i.renderTexture,f=xs(i,"x",void 0),C=xs(i,"y",void 0),S=xs(i,"width",void 0),r=xs(i,"height",void 0),y=xs(i,"originX",0),e=xs(i,"originY",0),u=xs(i,"padding",0),m,d;if(S===void 0||r===void 0||f===void 0||C===void 0){var l=GA(t,!0),h=f!==void 0&&C!==void 0;h?(S=Math.max(f-l.left,l.right-f)*2,r=Math.max(C-l.top,l.bottom-C)*2,y=.5,e=.5):(f=l.x,C=l.y,S=l.width,r=l.height,y=0,e=0),m=l.x,d=l.y}else m=f+(0-y)*S,d=C+(0-e)*r;m-=u,d-=u,S+=u*2,r+=u*2;var n=t[0].scene;a&&!s&&(s=new VA(n.sys.textures,zA(),S,r)),s||(s=n.add.renderTexture(0,0,S,r)),s.setPosition&&s.setPosition(f,C),(s.width!==S||s.height!==r)&&s.setSize(S,r),s.setOrigin&&s.setOrigin(y,e),s.camera.setScroll(m,d),t=Sn(Fs(t)),s.draw(t);var a=i.saveTexture;if(a)if(as(s))s.saveTexture(a);else{var c=s,o=c.manager;o.exists(c.key)?o.renameTexture(c.key,key):(c.key=key,o.list[key]=c,o.emit("addtexture",key,c),o.emit(`addtexture-${key}`,c))}return s}};const UA={snapshot(i){var t=this.scaleX,s=this.scaleY,f=t===1&&s===1;f||this.setScale(1),i===void 0&&(i={}),i.gameObjects=this.getAllVisibleChildren(),i.x=this.x,i.y=this.y,i.originX=this.originX,i.originY=this.originY;var C=Ou(i),S=!!C.scene;return f||(this.setScale(t,s),S&&C.setScale(t,s)),S?C:this}},Ec=Phaser.Utils.Objects.GetValue;var YA=function(i,t){var s=Ec(t,"drawContainer",!0),f=Ec(t,"children");return f===void 0&&(f=this.getAllVisibleChildren([this])),s||(f=f.filter(function(C){return!C.isRexContainerLite})),T0(f,i,t),this};const kA=Phaser.Math.RotateAround;var XA=function(i,t,s){s===void 0&&(s=t);var f={x:(t-i.originX)*i.displayWidth,y:(s-i.originY)*i.displayHeight};return kA(f,0,0,i.rotation),i.originX=t,i.originY=s,i.x=i.x+f.x,i.y=i.y+f.y,i},WA=function(i,t){this.syncChildrenEnable=!1,XA(this,i,t),this.syncChildrenEnable=!0;for(var s=this.getAllChildren(),f=0,C=s.length;f<C;f++)this.resetChildPositionState(s[f]);return this},tm={changeOrigin:WA,drawBounds:YA};Object.assign(tm,vA,pA,mA,xA,yA,TA,SA,PA,EA,MA,wA,RA,AA,OA,bA,LA,DA,IA,UA);class Oe extends Mr{constructor(t,s,f,C,S,r){Array.isArray(C)&&(r=C,C=void 0,S=void 0),super(t,s,f,C,S),this.type="rexContainerLite",this.isRexContainerLite=!0,this.syncChildrenEnable=!0,this._active=!0,this._mask=null,this._scrollFactorX=1,this._scrollFactorY=1,this.privateRenderLayer=void 0,r&&this.add(r)}destroy(t){this.scene&&(this.syncChildrenEnable=!1,super.destroy(t),this.privateRenderLayer&&(this.privateRenderLayer.list.length=0,this.privateRenderLayer.destroy()))}resize(t,s){return this.setSize(t,s),this}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.syncPosition())}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.syncPosition())}get rotation(){return super.rotation}set rotation(t){this.rotation!==t&&(super.rotation=t,this.syncPosition())}get scaleX(){return super.scaleX}set scaleX(t){this.scaleX!==t&&(super.scaleX=t,this.syncPosition())}get scaleY(){return super.scaleY}set scaleY(t){this.scaleY!==t&&(super.scaleY=t,this.syncPosition())}get scale(){return super.scale}set scale(t){this.scale!==t&&(super.scale=t,this.syncPosition())}get visible(){return super.visible}set visible(t){super.visible!==t&&(super.visible=t,this.syncVisible())}get alpha(){return super.alpha}set alpha(t){super.alpha!==t&&(super.alpha=t,this.syncAlpha())}get active(){return this._active}set active(t){this._active!==t&&(this._active=t,this.syncActive())}get mask(){return this._mask}set mask(t){this._mask!==t&&(this._mask=t,this.syncMask())}get scrollFactorX(){return this._scrollFactorX}set scrollFactorX(t){this._scrollFactorX!==t&&(this._scrollFactorX=t,this.syncScrollFactor())}get scrollFactorY(){return this._scrollFactorY}set scrollFactorY(t){this._scrollFactorY!==t&&(this._scrollFactorY=t,this.syncScrollFactor())}get list(){return this.children}static GetParent(t){return Ue(t)}get parentContainer(){return this._parentContainer}set parentContainer(t){if(!this._parentContainer&&!t){this._parentContainer=t;return}if(this.setParentContainerFlag){this._parentContainer=t;return}this._parentContainer&&!t?(this.removeFromContainer(),this._parentContainer=t):t?(this._parentContainer=t,this.addToContainer(t)):this._parentContainer=t}get setParentContainerFlag(){if(this._setParentContainerFlag)return!0;var t=Ue(this);return t?t.setParentContainerFlag:!1}}Object.assign(Oe.prototype,tm);var go=function(i){return i.hasOwnProperty("rexSizer")||(i.rexSizer={}),i.rexSizer};function HA(i){return i===void 0&&(i=this),go(i)}var $A=function(i){var t=go(i);return t.hasOwnProperty("prevState")||(t.prevState={}),t.prevState},KA=function(i){return i===void 0&&(i=Dn(this.scene)),this.left=Math.max(this.left,i.left),this.right=Math.min(this.right,i.right),this.top=Math.max(this.top,i.top),this.bottom=Math.min(this.bottom,i.bottom),this};const me=Phaser.Display.Align,In={center:me.CENTER,left:me.LEFT_CENTER,right:me.RIGHT_CENTER,top:me.TOP_CENTER,bottom:me.BOTTOM_CENTER,"left-top":me.TOP_LEFT,"left-center":me.LEFT_CENTER,"left-bottom":me.BOTTOM_LEFT,"center-top":me.TOP_CENTER,"center-center":me.CENTER,"center-bottom":me.BOTTOM_CENTER,"right-top":me.TOP_RIGHT,"right-center":me.RIGHT_CENTER,"right-bottom":me.BOTTOM_RIGHT};var zl=new Phaser.GameObjects.Zone({sys:{queueDepthSort:he,events:{once:he}}},0,0,1,1);zl.setOrigin(0);var Li={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_CENTER:4,CENTER:6,RIGHT_CENTER:8,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12},bu=function(i){var t=St(i);return i.y+t-t*i.originY},Fu=function(i){var t=Mt(i);return i.x-t*i.originX+t*.5},Lu=function(i,t){var s=St(i);return i.y=t-s+s*i.originY,i},Du=function(i,t){var s=Mt(i),f=s*i.originX;return i.x=t+f-s*.5,i},jA=function(i,t,s,f){return s===void 0&&(s=0),f===void 0&&(f=0),Du(i,Fu(t)+s),Lu(i,bu(t)+f),i},Iu=function(i){var t=Mt(i);return i.x-t*i.originX},Bu=function(i,t){var s=Mt(i);return i.x=t+s*i.originX,i},ZA=function(i,t,s,f){return s===void 0&&(s=0),f===void 0&&(f=0),Bu(i,Iu(t)-s),Lu(i,bu(t)+f),i},Gu=function(i){var t=Mt(i);return i.x+t-t*i.originX},Nu=function(i,t){var s=Mt(i);return i.x=t-s+s*i.originX,i},JA=function(i,t,s,f){return s===void 0&&(s=0),f===void 0&&(f=0),Nu(i,Gu(t)+s),Lu(i,bu(t)+f),i},Vu=function(i,t){var s=St(i),f=s*i.originY;return i.y=t+f-s*.5,i},QA=function(i,t,s){return Du(i,t),Vu(i,s)},zu=function(i){var t=St(i);return i.y-t*i.originY+t*.5},qA=function(i,t,s,f){return s===void 0&&(s=0),f===void 0&&(f=0),QA(i,Fu(t)+s,zu(t)+f),i},_A=function(i,t,s,f){return s===void 0&&(s=0),f===void 0&&(f=0),Bu(i,Iu(t)-s),Vu(i,zu(t)+f),i},tO=function(i,t,s,f){return s===void 0&&(s=0),f===void 0&&(f=0),Nu(i,Gu(t)+s),Vu(i,zu(t)+f),i},Uu=function(i){var t=St(i);return i.y-t*i.originY},Yu=function(i,t){var s=St(i);return i.y=t+s*i.originY,i},eO=function(i,t,s,f){return s===void 0&&(s=0),f===void 0&&(f=0),Du(i,Fu(t)+s),Yu(i,Uu(t)-f),i},iO=function(i,t,s,f){return s===void 0&&(s=0),f===void 0&&(f=0),Bu(i,Iu(t)-s),Yu(i,Uu(t)-f),i},sO=function(i,t,s,f){return s===void 0&&(s=0),f===void 0&&(f=0),Nu(i,Gu(t)+s),Yu(i,Uu(t)-f),i},pi=[];pi[Li.BOTTOM_CENTER]=jA;pi[Li.BOTTOM_LEFT]=ZA;pi[Li.BOTTOM_RIGHT]=JA;pi[Li.CENTER]=qA;pi[Li.LEFT_CENTER]=_A;pi[Li.RIGHT_CENTER]=tO;pi[Li.TOP_CENTER]=eO;pi[Li.TOP_LEFT]=iO;pi[Li.TOP_RIGHT]=sO;var em=function(i,t,s,f,C){return pi[s](i,t,f,C)},wr=function(i,t,s,f,C,S){zl.setPosition(t,s).setSize(f,C),em(i,zl,S)};const Qs=Phaser.Utils.Objects.GetValue,nO=Phaser.GameObjects.Group;var rO=function(i,t){var s=i.scene,f,C,S,r,y;if(typeof t=="number")f=t;else{f=Qs(t,"color"),C=Qs(t,"lineWidth");var e=Qs(t,"name",!1);e&&(S=Qs(e,"createTextCallback",aO),r=Qs(e,"createTextCallbackScope",void 0),y=Qs(e,"align","left-top"),typeof y=="string"&&(y=In[y]))}if(f===void 0&&(f=16777215),C===void 0&&(C=1),S&&!i.children){i.children=new nO(s),i.once("destroy",function(a,c){a.children.destroy(!c),a.children=void 0});var u=i.clear.bind(i);i.clear=function(){u(),i.children.clear(!1,!0)}}for(var m=this.getAllShownChildren([this]),d,l,h=0,n=m.length;h<n;h++){if(d=m[h],d.getBounds||d.width!==void 0&&d.height!==void 0)ys=gu(d,ys);else continue;f!=null&&i.lineStyle(C,f).strokeRectShape(ys),d.name&&S&&(r?l=S.call(r,s):l=S(s),l&&(l.setText(d.name),i.children.add(l),wr(l,ys.x,ys.y,ys.width,ys.height,y)))}return this},aO=function(i,t,s){return i.add.text(0,0,"")},ys=void 0;const ra=Phaser.Utils.Objects.GetValue;var Bn=function(i,t){return t===void 0&&(t={}),typeof i=="number"?(t.left=i,t.right=i,t.top=i,t.bottom=i):(t.left=ra(i,"left",0),t.right=ra(i,"right",0),t.top=ra(i,"top",0),t.bottom=ra(i,"bottom",0)),t};const oO=Oe.prototype.add;var Rr=function(i){return oO.call(this,i),this.sizerEventsEnable&&(i.emit("sizer.add",i,this),this.emit("add",i,this)),this};const hO={addBackground(i,t,s){this.backgroundChildren===void 0&&(this.backgroundChildren=[]),typeof t=="string"&&(s=t,t=void 0),t===void 0&&(t=0),Rr.call(this,i),this.backgroundChildren.push(i);var f=this.getSizerConfig(i);return f.padding=Bn(t),s!==void 0&&this.addChildrenMap(s,i),this},isBackground(i){return this.backgroundChildren===void 0?!1:this.backgroundChildren.indexOf(i)!==-1}},lO=Phaser.Utils.Array.Remove,uO=Oe.prototype.remove;var Ar=function(i,t){return this.isBackground(i)&&lO(this.backgroundChildren,i),uO.call(this,i,t),!t&&this.sizerEventsEnable&&(i.emit("sizer.remove",i,this),this.emit("remove",i,this)),this},Pn=function(i,t){var s=null;if(t===void 0)i.hasOwnProperty("rexContainer")&&(s=i.rexContainer.parent,s?s.isRexSizer||(s=Pn(s)):s=null);else for(s=Pn(i);s&&s.name!==t;)s=Pn(s);return s},dO=function(i){for(var t=Pn(i);t;)i=t,t=Pn(t);return i};const Or={getParentSizer(i,t){return typeof i=="string"&&(t=i,i=void 0),i===void 0&&(i=this),Pn(i,t)},getTopmostSizer(i){return i===void 0&&(i=this),dO(i)}},fO=Phaser.Utils.Array.Remove,cO={removeFromParentSizer(){var i=Or.getParentSizer(gameObject);return i&&i.remove(this),this},removeBackground(i,t){return this.backgroundChildren===void 0?this:this.getParentSizer(i)!==this?this:(fO(this.backgroundChildren,i),Ar.call(this,i,t),this)},removeAllBackgrounds(i){if(this.backgroundChildren===void 0)return this;for(var t=this.backgroundChildren.length-1;t>=0;t--)this.remove(this.backgroundChildren[t],i);return this}};var Mc=function(i,t){return this.childrenMap[i]=t,this},vO=function(i){if(typeof i=="object"){var t=i;for(var i in this.childrenMap)if(this.childrenMap[i]===t)return delete this.childrenMap[i],this}return delete this.childrenMap[i],this},pO=function(i,t){if(typeof i=="string"&&(i=i.split(".")),i.length!==0){var s=i.shift(),f=null;if(s.charAt(0)==="#")s=s.substring(1),f=this.getByName(s,t);else if(s.indexOf("[")===-1)this.childrenMap&&(f=this.childrenMap[s]);else{var C=s.match(gO);if(C!=null&&this.childrenMap){var S=this.childrenMap[C[1]];S&&(f=S[C[2]])}}return i.length===0?f:f&&f.childrenMap?f.getElement(i):null}};const gO=/(\S+)\[(\d+)\]/i,mO={getInnerPadding(i){return Ba(this.space,i)},setInnerPadding(i,t){return Ji(this.space,i,t),this},getOuterPadding(i){return Ba(this.getSizerConfig(this).padding,i)},setOuterPadding(i,t){return Ji(this.getSizerConfig(this).padding,i,t),this},getChildOuterPadding(i,t){return typeof i=="string"&&(i=this.getElement(i)),Ba(this.getSizerConfig(i).padding,t)},setChildOuterPadding(i,t,s){return typeof i=="string"&&(i=this.getElement(i)),Ji(this.getSizerConfig(i).padding,t,s),this}};var ku=function(i){return i===void 0&&(i=Math.max(this.childrenWidth,this.minWidth)),i},xO=function(i){var t,s;for(var f in this.sizerChildren)t=this.sizerChildren[f],t&&t.isRexSizer&&!t.ignoreLayout&&(s=this.getExpandedChildWidth(t,i),s=t.resolveWidth(s),t.resolveChildrenWidth(s))},Xu=function(i){var t=Math.max(this.childrenHeight,this.minHeight);return i===void 0&&(i=t),i},yO=function(i,t){},TO=function(i){var t;return i.isRexSizer?t=Math.max(i.minWidth,i.childrenWidth):i.minWidth!==void 0?t=i.minWidth:t=Mt(i),t},CO=function(i){var t;return i.isRexSizer?t=Math.max(i.minHeight,i.childrenHeight):i.minHeight!==void 0?t=i.minHeight:t=St(i),t},SO=function(i,t){return t},PO=function(i,t){return t},EO=function(){return 0},MO=function(){return 0},wO=function(i){i===void 0&&(i=[]);for(var t=i.length,s=this.getChildrenSizers(i),f=i.length,C=t;C<f;C++)s[C].getAllChildrenSizers(i);return i},RO=function(i){return i===void 0&&(i=[]),i};const AO={getShownChildren(i){i===void 0&&(i=[]);for(var t=this.children,s,f=0,C=t.length;f<C;f++)s=t[f],!(s.rexSizer&&s.rexSizer.hidden)&&i.push(s);return i},getAllShownChildren(i){i===void 0&&(i=[]);for(var t=[this];t.length>0;){var s=t.shift();s.rexSizer&&s.rexSizer.hidden||(s!==this&&i.push(s),s.isRexContainerLite&&t.push(...s.children))}return i}};var br=function(){this._childrenWidth=void 0,this._childrenHeight=void 0;for(var i=this.getChildrenSizers(),t,s=0,f=i.length;s<f;s++)t=i[s],!t.ignoreLayout&&t.preLayout()},OO=function(){var i=this.scaleX,t=this.scaleY,s=i===1&&t===1;return s||this.setScale(1),this.runLayout(),s||this.setScale(i,t),this},bO=function(i,t,s){if(this.ignoreLayout)return this;var f=!i;return f&&this.preLayout(),t=this.resolveWidth(t),f&&(this.resolveChildrenWidth(t),this.runWidthWrap(t)),s=this.resolveHeight(s),this.postResolveSize(t,s),this.resize(t,s),this.sizerEventsEnable&&this.layoutedChildren===void 0&&(this.layoutedChildren=[]),this.layoutChildren(),this.layoutBackgrounds(),this.sizerEventsEnable&&(this.emit("postlayout",this.layoutedChildren,this),this.layoutedChildren.length=0),this.postLayout()},FO=function(){},LO=function(i,t,s){return this._anchor&&this._anchor.updatePosition(),this},im=function(i){var t,s;for(var f in this.sizerChildren)t=this.sizerChildren[f],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runWidthWrap)&&(s=this.getExpandedChildWidth(t,i),t.isRexSizer&&(s=t.resolveWidth(s)),t.runWidthWrap(s));return this};class Wu extends _t{constructor(t,s){super(t,{eventEmitter:!1}),this.viewport=void 0,this.resetFromJSON(s)}shutdown(t){this.isShutdown||(this.autoAnchor(!1),this.viewport=void 0,this.onUpdateViewportCallback=void 0,this.onUpdateViewportCallbackScope=void 0,this.onResizeCallback=void 0,this.onResizeCallbackScope=void 0,super.shutdown(t))}resetFromJSON(t){t===void 0&&(t={});var s,f;t.x!==void 0?(s=null,f=t.x):t.left!==void 0?(s=0,f=t.left):t.right!==void 0?(s=1,f=t.right):t.centerX!==void 0&&(s=.5,f=t.centerX);var C,S;t.y!==void 0?(C=null,S=t.y):t.top!==void 0?(C=0,S=t.top):t.bottom!==void 0?(C=1,S=t.bottom):t.centerY!==void 0&&(C=.5,S=t.centerY);var r,y;f!==void 0&&(f=f.replace("left","0%").replace("right","100%").replace("center","50%").split("%"),r=parseFloat(f[0])/100,y=f[1]===""?0:parseFloat(f[1]));var e,u;S!==void 0&&(S=S.replace("top","0%").replace("bottom","100%").replace("center","50%").split("%"),e=parseFloat(S[0])/100,u=S[1]===""?0:parseFloat(S[1]));var m=t.width,d,l;m!==void 0&&(m=m.split("%"),d=parseFloat(m[0])/100,l=m[1]===""?0:parseFloat(m[1]));var h=t.height,n,a;h!==void 0&&(h=h.split("%"),n=parseFloat(h[0])/100,a=h[1]===""?0:parseFloat(h[1])),this.setAlign(s,C),this.setPercentage(r,e),this.setOffset(y,u),this.setSizePercentage(d,n),this.setSizePadding(l,a);var c=t.onResizeCallback,o=t.onResizeCallbackScope;c!==void 0&&this.setResizeCallback(c,o);var v=t.onUpdateViewportCallback,g=t.onUpdateViewportCallbackScope;return v!==void 0&&this.setUpdateViewportCallback(v,g),this.autoAnchor(t.enable),this}autoAnchor(t){return t===void 0&&(t=!0),t=!!t,this.autoAnchorEnable===t?this:(t?(this.scene.sys.scale.on("resize",this.anchor,this),this.anchor()):this.scene.sys.scale.off("resize",this.anchor,this),this.autoAnchorEnable=t,this)}setAlign(t,s){return this.alignX=t,this.alignY=s,this}setPercentage(t,s){return this.percentageX=t,this.percentageY=s,this}setOffset(t,s){return this.offsetX=t,this.offsetY=s,this}setSizePercentage(t,s){return this.percentageWidth=t,this.percentageHeight=s,this}setSizePadding(t,s){return this.paddingWidth=t,this.paddingHeight=s,this}setResizeCallback(t,s){return this.onResizeCallback=t,this.onResizeCallbackScope=s,this}setUpdateViewportCallback(t,s){return this.onUpdateViewportCallback=t,this.onUpdateViewportCallbackScope=s,this}anchor(){return this.updateViewport(),this.updateSize(),this.updatePosition(),this}updateSize(){var t=this.onResizeCallback,s=this.onResizeCallbackScope,f=this.anchorWidth,C=this.anchorHeight;if(!(f===void 0&&C===void 0||!t)){var S=this.parent;f===void 0&&(f=S.width),C===void 0&&(C=S.height),s?t.call(s,f,C,S,this):t(f,C,S,this)}}updatePosition(){var t=this.parent;return this.alignX===null?t.x=this.anchorX:this.alignX!==void 0&&(t.x=this.anchorX+t.displayWidth*(t.originX-this.alignX)),this.alignY===null?t.y=this.anchorY:this.alignY!==void 0&&(t.y=this.anchorY+t.displayHeight*(t.originY-this.alignY)),this}get anchorX(){return this.viewport.x+this.viewport.width*this.percentageX+this.offsetX}get anchorY(){return this.viewport.y+this.viewport.height*this.percentageY+this.offsetY}get anchorWidth(){if(this.percentageWidth!==void 0)return this.viewport.width*this.percentageWidth+this.paddingWidth}get anchorHeight(){if(this.percentageHeight!==void 0)return this.viewport.height*this.percentageHeight+this.paddingHeight}updateViewport(){var t=this.parent.scene.cameras.main;this.viewport=Dn(this.scene,t,this.viewport);var s=this.viewport,f=this.onUpdateViewportCallback,C=this.onUpdateViewportCallbackScope;f&&(C?f.call(C,s,this.parent,this):f(s,this.parent,this))}}var DO=function(i){i===void 0&&(i={});var t=i.hasOwnProperty("width"),s=i.hasOwnProperty("height"),f=i.hasOwnProperty("onResizeCallback");return(t||s)&&!f&&(i.onResizeCallback=function(C,S,r){t&&r.setMinWidth(C),s&&r.setMinHeight(S),r.layout()}),this._anchor===void 0?this._anchor=new Wu(this,i):this._anchor.resetFromJSON(i),this};const IO=Phaser.Utils.Objects.GetValue,qs=Phaser.Utils.Objects.GetAdvancedValue,wc=Phaser.Math.Linear;class pr extends Ds{constructor(t,s){super(t,s),this.scaleStart={},this.scaleEnd={},this.resetFromJSON(s),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(IO(t,"mode",0)),this.setScaleRange(qs(t,"start",void 0),qs(t,"end",0)),this}setMode(t){return typeof t=="string"&&(t=BO[t]),this.mode=t,this}setScaleRange(t,s){return typeof t=="number"?(this.startX=t,this.startY=t):(this.startX=qs(t,"x",this.parent.scaleX),this.startY=qs(t,"y",this.parent.scaleY)),typeof s=="number"?(this.endX=s,this.endY=s):(this.endX=qs(s,"x",void 0),this.endY=qs(s,"y",void 0)),this.hasScaleX=this.startX!==void 0&&this.endX!==void 0,this.hasScaleY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var t=this.parent;this.hasScaleX&&(t.scaleX=this.startX),this.hasScaleY&&(t.scaleY=this.startY);var s=this.repeat;return this.mode===2&&s!==-1&&(s=(s+1)*2-1),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(s),super.start(),this}updateGameObject(t,s){var f=s.t;s.isOddIteration&&(f=1-f),f=this.easeFn(f),this.hasScaleX&&(t.scaleX=wc(this.startX,this.endX,f)),this.hasScaleY&&(t.scaleY=wc(this.startY,this.endY,f))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const BO={stop:0,destroy:1,yoyo:2};var Hu=function(i,t,s,f,C){f===void 0&&(f="Cubic");var S,r;switch(s){case 0:case"x":S={x:0},r={x:i.scaleX};break;case 1:case"y":S={y:0},r={y:i.scaleY};break;default:S=0,r=i.scale;break}var y={mode:0,start:S,end:r,duration:t,ease:f};return C===void 0?C=new pr(i,y):C.resetFromJSON(y),C.restart(),C},sm=function(i,t,s,f,C,S){f===void 0&&(f="Linear"),C instanceof pr&&(S=C,C=void 0),C===void 0&&(C=!0);var r={};switch(r.mode=C?1:0,s){case 0:case"x":r.end={x:0};break;case 1:case"y":r.end={y:0};break;default:r.end=0;break}return r.duration=t,r.ease=f,S===void 0?S=new pr(i,r):S.resetFromJSON(r),S.restart(),S},GO=function(i,t,s,f,C,S,r){s===void 0&&(s=1.2),f===void 0&&(f=0),S===void 0&&(S="Cubic");var y,e;switch(C){case 0:case"x":y={x:i.scaleX},e={x:s};break;case 1:case"y":y={y:i.scaleX},e={y:s};break;default:y=i.scaleX,e=s;break}var u={mode:2,start:y,end:e,duration:t/2,ease:S,repeat:f};return r===void 0?r=new pr(i,u):r.resetFromJSON(u),r.restart(),r};const Ah=Phaser.Utils.Objects.IsPlainObject;var Oh=function(i,t){t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(i.emit(t.completeEventName,i),t.completeEventName=void 0)}),t.on("update",function(){var s=Or.getParentSizer(i);s&&s.resetChildPositionState(i)})};const $u={popUp(i,t,s){if(Ah(i)){var f=i;i=f.duration,t=f.orientation,s=f.ease}var C=this._scaleBehavior===void 0;return this._scaleBehavior=Hu(this,i,t,s,this._scaleBehavior),C&&Oh(this,this._scaleBehavior),this._scaleBehavior.completeEventName="popup.complete",this},popUpPromise(i,t,s){return this.popUp(i,t,s),se(this._scaleBehavior)},scaleDownDestroy(i,t,s,f){if(Ah(i)){var C=i;i=C.duration,t=C.orientation,s=C.ease,f=C.destroy}var S=this._scaleBehavior===void 0;return this._scaleBehavior=sm(this,i,t,s,f,this._scaleBehavior),S&&Oh(this,this._scaleBehavior),this._scaleBehavior.completeEventName="scaledown.complete",this},scaleDownDestroyPromise(i,t,s,f){return this.scaleDownDestroy(i,t,s,f),se(this._scaleBehavior)},scaleDown(i,t,s){return this.scaleDownDestroy(i,t,s,!1),this},scaleDownPromise(i,t,s){return this.scaleDown(i,t,s),se(this._scaleBehavior)},scaleYoyo(i,t,s,f,C){if(Ah(i)){var S=i;i=S.duration,t=S.peakValue,s=S.repeat,f=S.orientation,C=S.ease}var r=this._scaleBehavior===void 0;return this._scaleBehavior=GO(this,i,t,s,f,C,this._scaleBehavior),r&&Oh(this,this._scaleBehavior),this._scaleBehavior.completeEventName="scaleyoyo.complete",this},scaleYoyoPromise(i,t,s,f,C){return this.scaleYoyo(i,t,s,f,C),se(this._scaleBehavior)}},NO=Phaser.Utils.Objects.GetValue,Rc=Phaser.Utils.Objects.GetAdvancedValue,VO=Phaser.Math.Linear;let Ul=class extends Ds{constructor(t,s){super(t,s),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(NO(t,"mode",0)),this.setAlphaRange(Rc(t,"start",this.parent.alpha),Rc(t,"end",0)),this}setMode(t){return typeof t=="string"&&(t=zO[t]),this.mode=t,this}setAlphaRange(t,s){return this.alphaStart=t,this.alphaEnd=s,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return t.setAlpha(this.alphaStart),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateGameObject(t,s){var f=s.t;s.isOddIteration&&(f=1-f),t.alpha=VO(this.alphaStart,this.alphaEnd,f)}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}};const zO={stop:0,destroy:1,yoyo:2},UO=Phaser.Utils.Objects.IsPlainObject;var mo=function(i,t,s,f){var C,S;UO(s)?(C=s.start,S=s.end):S=s,C===void 0&&(C=0),S===void 0&&(S=1);var r={mode:0,start:C,end:S,duration:t};return f===void 0?f=new Ul(i,r):f.resetFromJSON(r),f.restart(),f},xo=function(i,t,s,f){s instanceof Ul&&(f=s,s=void 0),s===void 0&&(s=!0);var C={mode:s?1:0,end:0,duration:t};return f===void 0?f=new Ul(i,C):f.resetFromJSON(C),f.restart(),f};const Ac=Phaser.Utils.Objects.IsPlainObject;var Oc=function(i,t){t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(i.emit(t.completeEventName,i),t.completeEventName=void 0)}),t.on("update",function(){var s=Or.getParentSizer(i);s&&s.resetChildAlphaState(i)})};const YO={fadeIn(i,t){if(Ac(i)){var s=i;i=s.duration,t=s.alpha}var f=this._fade===void 0;return this._fade=mo(this,i,t,this._fade),f&&Oc(this,this._fade),this._fade.completeEventName="fadein.complete",this},fadeInPromise(i,t){return this.fadeIn(i,t),se(this._fade)},fadeOutDestroy(i,t){if(Ac(i)){var s=i;i=s.duration,t=s.destroy}var f=this._fade===void 0;return this._fade=xo(this,i,t,this._fade),f&&Oc(this,this._fade),this._fade.completeEventName="fadeout.complete",this},fadeOutDestroyPromise(i,t){return this.fadeOutDestroy(i,t),se(this._fade)},fadeOut(i){return this.fadeOutDestroy(i,!1),this},fadeOutPromise(i){return this.fadeOut(i),se(this._fade)}},kO=Phaser.Utils.Objects.GetValue,_s=Phaser.Utils.Objects.GetAdvancedValue,bc=Phaser.Math.Linear;class Wa extends Ds{constructor(t,s){super(t,s),this.resetFromJSON(s),this.boot()}resetFromJSON(t){if(super.resetFromJSON(t),this.setMode(kO(t,"mode",0)),t&&(t.hasOwnProperty("x")||t.hasOwnProperty("y"))){var s=_s(t,"x",void 0),f=_s(t,"y",void 0);this.setTargetPosition(s,f)}else this.setTargetPosition(t);return this}setMode(t){return typeof t=="string"&&(t=XO[t]),this.mode=t,this}setTargetPosition(t,s){if(typeof t=="number"||typeof s=="number")this.startX=this.parent.x,this.startY=this.parent.y,this.endX=t,this.endY=s;else{var f=t;this.startX=_s(f,"startX",void 0),this.startY=_s(f,"startY",void 0),this.endX=_s(f,"endX",void 0),this.endY=_s(f,"endY",void 0)}return this.hasMoveX=this.startX!==void 0&&this.endX!==void 0,this.hasMoveY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return this.hasMoveX&&(t.x=this.startX),this.hasMoveY&&(t.y=this.startY),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateGameObject(t,s){var f=s.t;s.isOddIteration&&(f=1-f),f=this.easeFn(f),this.hasMoveX&&(t.x=bc(this.startX,this.endX,f)),this.hasMoveY&&(t.y=bc(this.startY,this.endY,f))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const XO={stop:0,destroy:1,yoyo:2};var Ha=function(i,t){if(typeof i=="number")return i;var s=i[0],f=parseFloat(i.substr(2));switch(s){case"+":return t+f;case"-":return t-f;case"*":return t*f;case"/":return t/f}},nm=function(i,t,s,f,C,S,r){S instanceof Wa&&(r=S,S=void 0),S===void 0&&(S=!1);var y={};return y.mode=S?1:0,s!==void 0&&(y.startX=i.x,y.endX=Ha(s,i.x)),f!==void 0&&(y.startY=i.y,y.endY=Ha(f,i.y)),y.duration=t,y.ease=C===void 0?"Linear":C,r===void 0?r=new Wa(i,y):r.resetFromJSON(y),r.restart(),r},rm=function(i,t,s,f,C,S,r){S instanceof Wa&&(r=S,S=void 0),S===void 0&&(S=!1);var y={};return y.mode=S?1:0,s!==void 0&&(y.startX=Ha(s,i.x),y.endX=i.x),f!==void 0&&(y.startY=Ha(f,i.y),y.endY=i.y),y.duration=t,y.ease=C===void 0?"Linear":C,r===void 0?r=new Wa(i,y):r.resetFromJSON(y),r.restart(),r};const Fc=Phaser.Utils.Objects.IsPlainObject,Lc=Phaser.Math.Distance.Between;var Dc=function(i,t){t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(i.emit(t.completeEventName,i),t.completeEventName=void 0)}),t.on("update",function(){var s=Or.getParentSizer(i);s&&s.resetChildPositionState(i)})};const WO={moveFrom(i,t,s,f,C){if(Fc(i)){var S=i;t=S.x,s=S.y,S.hasOwnProperty("speed")?i=Lc(t,s,this.x,this.y)*1e3/S.speed:i=S.duration,f=S.ease}var r=this._easeMove===void 0;return this._easeMove=rm(this,i,t,s,f,C,this._easeMove),r&&Dc(this,this._easeMove),this._easeMove.completeEventName="movefrom.complete",this},moveFromPromise(i,t,s,f,C){return this.moveFrom(i,t,s,f,C),se(this._easeMove)},moveFromDestroy(i,t,s,f){return this.moveFrom(i,t,s,f,!0),this},moveFromDestroyPromise(i,t,s,f){return this.moveFromDestroy(i,t,s,f),se(this._easeMove)},moveTo(i,t,s,f,C){if(Fc(i)){var S=i;t=S.x,s=S.y,S.hasOwnProperty("speed")?i=Lc(t,s,this.x,this.y)*1e3/S.speed:i=S.duration,f=S.ease}var r=this._easeMove===void 0;return this._easeMove=nm(this,i,t,s,f,C,this._easeMove),r&&Dc(this,this._easeMove),this._easeMove.completeEventName="moveto.complete",this},moveToPromise(i,t,s,f,C){return this.moveTo(i,t,s,f,C),se(this._easeMove)},moveToDestroy(i,t,s,f){return this.moveTo(i,t,s,f,!0),this},moveToDestroyPromise(i,t,s,f){return this.moveToDestroy(i,t,s,f,!0),se(this._easeMove)},moveStop(i){return this._easeMove?(this._easeMove.stop(i),this):this}},Fe=Phaser.Utils.Objects.GetValue;class Ku extends oo{constructor(t,s){super(t,s),this.timer=new p0,this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.timer.resetFromJSON(Fe(t,"timer")),this.setEnable(Fe(t,"enable",!0)),this.setMode(Fe(t,"mode",1)),this.isRunning=Fe(t,"isRunning",!1),this.setMagnitudeMode(Fe(t,"magnitudeMode",1)),this.setAxisMode(Fe(t,"axis",0)),this.setDuration(Fe(t,"duration",500)),this.setMagnitude(Fe(t,"magnitude",10)),this.ox=Fe(t,"ox",void 0),this.oy=Fe(t,"oy",void 0),this}toJSON(){return{timer:this.timer.toJSON(),enable:this.enable,mode:this.mode,isRunning:this.isRunning,magnitudeMode,duration:this.duration,magnitude:this.magnitude,ox:this.ox,oy:this.oy}}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}startTicking(){super.startTicking(),this.mode===0?(this.scene.game.events.on("poststep",this.update,this),this.scene.game.events.on("prestep",this.backToOrigin,this)):this.scene.sys.events.on("preupdate",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&(this.mode===0?(this.scene.game.events.off("poststep",this.update,this),this.scene.game.events.off("prestep",this.backToOrigin,this)):this.scene.sys.events.off("preupdate",this.update,this))}setEnable(t){return t==null&&(t=!0),this.enable=t,this}setMode(t){return typeof t=="string"&&(t=HO[t]),this.mode=t,this}setMagnitudeMode(t){return typeof t=="string"&&(t=KO[t]),this.magnitudeMode=t,this}setAxisMode(t){return typeof t=="string"&&(t=$O[t]),this.axisMode=t,this}setDuration(t){return this.duration=t,this}setMagnitude(t){return this.magnitude=t,this}start(t,s){if(typeof t!="number"){var f=t;s=Fe(f,"magnitude",void 0),t=Fe(f,"duration",void 0)}return s!==void 0&&this.setMagnitude(s),t!==void 0&&this.setDuration(t),this.timer.setDuration(this.duration).start(),super.start(),this}shake(t,s){return this.start(t,s),this}update(t,s){if(!this.isRunning||!this.enable)return this;var f=this.parent;if(!f.active)return this;if(this.timer.update(t,s),this.timer.isDone)this.backToOrigin(),this.complete();else{this.ox===void 0&&(this.ox=f.x,this.oy=f.y);var C=this.magnitude;this.magnitudeMode===1&&(C*=1-this.timer.t);var S=Math.random()*Math.PI*2,r=this.ox+Math.cos(S)*C,y=this.oy+Math.sin(S)*C;switch(this.axisMode){case 1:f.x=r;break;case 2:f.y=y;break;default:f.x=r,f.y=y;break}}return this}backToOrigin(){if(!this.isRunning||!this.enable)return this;if(this.ox===void 0)return this;var t=this.parent;switch(this.axisMode){case 1:t.x=this.ox;break;case 2:t.y=this.oy;break;default:t.x=this.ox,t.y=this.oy;break}return this.ox=void 0,this.oy=void 0,this}}const HO={effect:0,behavior:1},$O={both:0,"h&v":0,"x&y":0,horizontal:1,h:1,x:1,vertical:2,v:2,y:2},KO={constant:0,decay:1},jO=Phaser.Utils.Objects.IsPlainObject;var ZO=function(i,t){t.on("complete",function(){i.emit("shake.complete",i)})};const JO={shake(i,t,s){if(jO(i)){var f=i;i=f.duration,t=f.magnitude,s=f.magnitudeMode}return this._shake===void 0&&(this._shake=new Ku(this,{mode:0,magnitudeMode:1}),ZO(this,this._shake)),i!==void 0&&this._shake.setDuration(i),t!==void 0&&this._shake.setMagnitude(t),s!==void 0&&this._shake.setMagnitudeMode(s),this._shake.shake(),this},shakePromise(i,t){return this.shake(i,t),se(this._shake)}},Ic=Phaser.Utils.Objects.IsPlainObject;class QO extends _t{constructor(t,s){super(t,s),this.parent.setDataEnabled(),this.easeTasks={}}complete(t){this.emit(`complete-${t}`,this.parent,this),this.emit("complete",t,this.parent,this)}getEaseTask(t){var s=this.easeTasks[t];return s===void 0&&(s=new Bs(this.parent),this.easeTasks[t]=s,s.setTarget(this.parent.data.values).on("complete",function(){this.complete(t)},this)),s}easeTo(t,s,f,C){if(Ic(t)){var S=t;t=S.key,s=S.value,f=S.duration,C=S.ease;var r=S.speed;f===void 0&&r!==void 0&&(f=Math.abs(s-this.parent.data.values[t])/r*1e3)}f===void 0&&(f=1e3),C===void 0&&(C="Linear");var y=this.getEaseTask(t);return y.restart({key:t,to:s,duration:f,ease:C}),this}easeFrom(t,s,f,C){if(Ic(t)){var S=t;t=S.key,s=S.value,f=S.duration,C=S.ease;var r=S.speed;f===void 0&&r!==void 0&&(f=Math.abs(s-this.parent.data.values[t])/r*1e3)}f===void 0&&(f=1e3),C===void 0&&(C="Linear");var y=this.getEaseTask(t);return y.restart({key:t,from:s,duration:f,ease:C}),this}stopEase(t,s){s===void 0&&(s=!0);var f=this.easeTasks[t];return f&&f.stop(s),this}stopAll(t){t===void 0&&(t=!0);for(var s in this.easeTasks)this.stopEase(s,t);return this}}var qO=function(i,t){t.on("complete",function(s){i.emit(`easedata.${s}.complete`,i),i.emit("easedata.complete",s,i)})};const _O={easeDataTo(i,t,s,f){return this._easeData||(this._easeData=new QO(this),qO(this,this._easeData)),this._easeData.easeTo(i,t,s,f),this},easeDataToPromise(i,t,s,f){return this.easeDataTo(i,t,s,f),uo(this._easeData,`complete-${i}`)},stopEaseData(i,t){return this._easeData?(this._easeData.stopEase(i,t),this):this},stopAllEaseData(i){return this._easeData?(this._easeData.stopAll(i),this):this}};var $i=function(i){am(i,!1)},Ki=function(i){am(i,!0)},ju=function(i){if(!i)return!1;var t=go(i);return!t.hidden},am=function(i,t){if(i){var s=go(i);s.hidden=t;var f=Ue(i);f?f.setChildVisible(i,!t):i.setVisible(!t)}};const tb={show(i){return i===void 0&&(i=this),$i(i),this},hide(i){return i===void 0&&(i=this),Ki(i),this},isShow(i){return i===void 0&&(i=this),ju(i)}},eb=["next","exit","enter"];let om=class{constructor(t){var s=Ft(t,"states",void 0);s&&this.addStates(s);var f=Ft(t,"extend",void 0);if(f)for(var C in f)(!this.hasOwnProperty(C)||this[C]===void 0)&&(this[C]=f[C]);var S=Ft(t,"eventEmitter",void 0),r=Ft(t,"EventEmitterClass",void 0);this.setEventEmitter(S,r),this._stateLock=!1,this.resetFromJSON(t)}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}resetFromJSON(t){this.setEnable(Ft(t,"enable",!0)),this.start(Ft(t,"start",void 0));var s=Ft(t,"init",void 0);return s&&s.call(this),this}toJSON(){return{curState:this.state,prevState:this.prevState,enable:this.enable,start:this._start}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}set state(t){if(!(!this.enable||this._stateLock)&&this._state!==t){if(this._prevState=this._state,this._state=t,this._stateLock=!0,this.emit("statechange",this),this._prevState!=null){var s="exit_"+this._prevState,f=this[s];f&&f.call(this),this.emit(s,this)}if(this._stateLock=!1,this._state!=null){var C="enter_"+this._state,S=this[C];S&&S.call(this),this.emit(C,this)}}}get state(){return this._state}get prevState(){return this._prevState}start(t){return this._start=t,this._prevState=void 0,this._state=t,this}goto(t){return t!=null&&(this.state=t),this}next(){var t,s=this["next_"+this.state];return s&&(typeof s=="string"?t=s:t=s.call(this)),this.goto(t),this}get stateProperties(){return eb}addState(t,s){typeof t!="string"&&(s=t,t=s.name);for(var f=this.stateProperties,C=0,S=f.length;C<S;C++){var r=f[C],y=s[r];y&&(this[`${r}_${t}`]=y)}return this}addStates(t){if(Array.isArray(t))for(var s=0,f=t.length;s<f;s++)this.addState(t[s]);else for(var C in t)this.addState(C,t[C]);return this}runMethod(t,s,f,C,S,r){var y=this[t+"_"+this.state];if(y){var e=arguments.length;switch(e){case 1:return y.call(this);case 2:return y.call(this,s);case 3:return y.call(this,s,f);case 4:return y.call(this,s,f,C);case 5:return y.call(this,s,f,C,S);case 6:return y.call(this,s,f,C,S,r)}for(var u=new Array(e-1),m=1;m<e;m++)u[m-1]=arguments[m];return y.apply(this,u)}}};Object.assign(om.prototype,Ln);var bh=function(i,t,s,f,C){C===void 0&&(C=!1);var S=i._events[t];if(!S)return!1;for(var r=0,y=S.length;r<y;r++){var e=S[r];if(e.fn===s&&e.context===f&&e.once===C)return!0}return!1};const ib=["next","exit","enter","update","preupdate","postupdate"];class Di extends om{shutdown(){this.stopUpdate(),this.stopPreUpdate(),this.stopPostUpdate(),this._scene=void 0,super.shutdown()}resetFromJSON(t){return super.resetFromJSON(t),this._scene=Ft(t,"scene",void 0),this}get stateProperties(){return ib}update(t,s){this.runMethod("update",t,s)}preupdate(t,s){this.runMethod("preupdate",t,s)}postupdate(t,s){this.runMethod("postupdate",t,s)}startUpdate(t){t||(t=this._scene);var s=t.sys.events;return bh(s,"update",this.update,this)?this:(this._scene=t,s.on("update",this.update,this),this)}stopUpdate(){return this._scene?(this._scene.sys.events.off("update",this.update,this),this):this}startPreUpdate(t){t||(t=this._scene);var s=t.sys.events;return bh(s,"preupdate",this.preupdate,this)?this:(this._scene=t,s.on("preupdate",this.preupdate,this),this)}stopPreUpdate(){return this._scene?(this._scene.sys.events.off("preupdate",this.preupdate,this),this):this}startPostUpdate(t){t||(t=this._scene);var s=t.sys.events;return bh(s,"postupdate",this.postupdate,this)?this:(this._scene=t,s.on("postupdate",this.postupdate,this),this)}stopPostUpdate(){return this._scene?(this._scene.sys.events.off("postupdate",this.postupdate,this),this):this}}let sb=class extends Di{constructor(t,s){super(s),this.parent=t;var f=s.initState||"IDLE";this.start(f)}init(){this.start("IDLE")}next_IDLE(){return"TRANS_OPNE"}next_TRANS_OPNE(){return"OPEN"}enter_TRANS_OPNE(){var t=this.parent;if(t.transitInTime>0){var s=t.runTransitionInCallback();t.delayCall(s,this.next,this)}else this.next()}exit_TRANS_OPNE(){var t=this.parent;t.removeDelayCall()}next_OPEN(){return"TRANS_CLOSE"}enter_OPEN(){var t=this.parent;t.onOpen()}exit_OPEN(){var t=this.parent;t.removeDelayCall()}next_TRANS_CLOSE(){return"CLOSE"}enter_TRANS_CLOSE(){var t=this.parent;if(t.transitOutTime>0){var s=t.runTransitionOutCallback();t.delayCall(s,this.next,this)}else this.next()}exit_TRANS_CLOSE(){var t=this.parent;t.removeDelayCall()}next_CLOSE(){return"TRANS_OPNE"}enter_CLOSE(){var t=this.parent;t.onClose()}exit_CLOSE(){}canOpen(){return this.state==="IDLE"||this.state==="CLOSE"}canClose(){return this.state==="IDLE"||this.state==="OPEN"}};var nb=function(i,t,s,f,C){var S=i.scene,r=S.time.delayedCall(t,function(){S.game.events.once("poststep",function(){s.call(f,C)})});return r};const rb={delayCall(i,t,s){return this.delayCallTimer=nb(this,i,t,s),this},removeDelayCall(){return this.delayCallTimer&&(this.delayCallTimer.remove(!1),this.delayCallTimer=void 0),this}},ab={setTransitInTime(i){return this.transitInTime=i,this},setTransitOutTime(i){return this.transitOutTime=i,this},setTransitInCallback(i){return i||(i=he),this.transitInCallback=i,this},setTransitOutCallback(i){return i||(i=he),this.transitOutCallback=i,this}},ob={runTransitionInCallback(){return this.transitInCallback(this.parent,this.transitInTime),this.transitInTime},onOpen(){},requestOpen(i,t){if(!this._state.canOpen())return this;this.openEventData=arguments.length>0?i:this.parent;var s=this.transitInTime;return t!==void 0&&(this.transitInTime=t),this._state.goto("TRANS_OPNE"),this.transitInTime=s,this}},hb={runTransitionOutCallback(){return this.transitOutCallback(this.parent,this.transitOutTime),this.transitOutTime},onClose(){this.oneShotMode&&this.parent.destroy()},requestClose(i,t){if(!this._state.canClose)return this;this.closeEventData=arguments.length>0?i:this.parent;var s=this.transitOutTime;return t!==void 0&&(this.transitOutTime=t),this._state.goto("TRANS_CLOSE"),this.transitOutTime=s,this}};var hm={};Object.assign(hm,rb,ab,ob,hb);const tn=Phaser.Utils.Objects.GetValue;class yo extends _t{constructor(t,s){super(t,s),this.setTransitInTime(tn(s,"duration.in",200)),this.setTransitOutTime(tn(s,"duration.out",200)),this.setTransitInCallback(tn(s,"transitIn")),this.setTransitOutCallback(tn(s,"transitOut")),this.oneShotMode=tn(s,"destroy",!1),this.delayCallTimer=void 0,this._state=new sb(this,{eventEmitter:!1,initState:tn(s,"initState","IDLE")}),this.openEventData=void 0,this.closeEventData=void 0}get state(){return this._state.state}shutdown(t){this.isShutdown||(this.transitInCallback=void 0,this.transitOutCallback=void 0,this.openEventData=void 0,this.closeEventData=void 0,this.removeDelayCall(),super.shutdown(t))}}Object.assign(yo.prototype,hm);const lb=Phaser.GameObjects.Rectangle;class Zu extends lb{constructor(t,s,f){super(t,0,0,2,2,s,1),this.setAlpha(f),this.setScrollFactor(0),this.boot()}boot(){var t=this.scene;t.sys.events.on("prerender",this.resize,this)}destroy(t){this.scene&&(this.scene.sys.events.off("prerender",this.resize,this),super.destroy(t))}get tint(){return this.fillColor}set tint(t){this.setFillStyle(t,this.fillAlpha)}resize(){var t=this.scene,s=t.sys.scale.gameSize,f=t.sys.cameras.main,C=s.width,S=s.height,r=1/f.zoom,y=C/2,e=S/2,u=C*r,m=S*r;(this.x!==y||this.y!==e)&&this.setPosition(y,e),(this.width!==u||this.height!==m)&&this.setSize(u,m).setOrigin(.5)}}const Fh=Phaser.Utils.Objects.GetValue;class To extends _t{constructor(t,s){super(t,{eventEmitter:!1}),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.setHitAreaMode(Fh(t,"hitAreaMode",0)),this.setEnable(Fh(t,"enable",!0)),this.setStopMode(Fh(t,"stopAllLevels",!0)),this}boot(){this.parent.on("pointerdown",function(t,s,f,C){this.stopAllLevels&&C.stopPropagation()},this).on("pointerup",function(t,s,f,C){this.stopAllLevels&&C.stopPropagation()},this).on("pointermove",function(t,s,f,C){this.stopAllLevels&&C.stopPropagation()},this).on("pointerover",function(t,s,f,C){this.stopAllLevels&&C.stopPropagation()},this).on("pointerout",function(t,s){this.stopAllLevels&&s.stopPropagation()},this)}setHitAreaMode(t){typeof t=="string"&&(t=ub[t]);var s=this.parent;return s.input&&s.removeInteractive(),t===0?s.setInteractive():s.setInteractive({hitArea:{},hitAreaCallback:function(){return!0}}),this}setEnable(t){return t===void 0&&(t=!0),t?this.parent.setInteractive():this.parent.disableInteractive(),this.enable=t,this}setStopMode(t){return t===void 0&&(t=!0),this.stopAllLevels=t,this}toggleEnable(){return this.setEnable(!this.enable),this}}var ub={default:0,fullWindow:1};const Bc=Phaser.Utils.Objects.GetValue;class Ju extends Zu{constructor(t,s){var f=Bc(s,"color",0),C=Bc(s,"alpha",.8);super(t,f,C),this.touchEventStop=new To(this,{hitAreaMode:1})}}var db=function(i,t){var s=i.scene,f=new Ju(s,t);return s.add.existing(f),i.isRexContainerLite?(i.moveDepthBelow(f),i.pin(f,{syncPosition:!1,syncRotation:!1,syncScale:!1,syncAlpha:!1,syncScrollFactor:!1})):s.children.moveBelow(f,i),f};const aa={popUp(i,t){i._modalScaleSave!==void 0?(i.scaleX=i._modalScaleSave,i.scaleY=i._modalScaleSave):i._modalScaleSave=i.scaleX,Hu(i,t)},scaleDown(i,t){sm(i,t,void 0,void 0,!1)},fadeIn(i,t){i._modalAlphaSave!==void 0?i.alpha=i._modalAlphaSave:i._modalAlphaSave=i.alpha,mo(i,t)},fadeOut(i,t){xo(i,t,!1)}};var fb=function(i,t){i._modalAlphaSave!==void 0?i.alpha=i._modalAlphaSave:i._modalAlphaSave=i.alpha,mo(i,t,i.alpha)},cb=function(i,t){xo(i,t,!1)},gr=function(i,t,s,f,C){if(!i||f&&!f(i,t,s))return!1;var S=gu(i,!0);return!(!S.contains(t,s)||C&&!C(i,t,s))};const ei=Phaser.Utils.Objects.GetValue;let vb=class extends yo{constructor(t,s){s===void 0&&(s={}),s.transitIn==null&&(s.transitIn=Yi.popUp),s.transitOut==null&&(s.transitOut=Yi.scaleDown),s.destroy=ei(s,"destroy",!0),super(t,s);var f=ei(s,"cover");this.cover=f!==!1?db(t,f):void 0,this.cover&&(this.setCoverTransitInCallback(ei(f,"transitIn",fb)),this.setCoverTransitOutCallback(ei(f,"transitOut",cb)));var C=ei(s,"touchOutsideClose",!1),S=ei(s,"duration.hold",-1),r=ei(s,"timeOutClose",S>=0),y=ei(s,"anyTouchClose",!1),e=ei(s,"manualClose",!1);e&&(C=!1,y=!1,r=!1),y&&(C=!1),r?this.setDisplayTime(S):this.setDisplayTime(-1),y?this.once("open",this.anyTouchClose,this):C&&this.once("open",this.touchOutsideClose,this),ei(s,"openOnStart",!0)&&this.delayCall(0,this.requestOpen,this)}shutdown(t){this.isShutdown||(this.cover||this.scene.input.off("pointerup",this.touchCloseCallback,this),this.cover&&!t&&(this.cover.destroy(),this.cover=void 0),super.shutdown(t))}touchOutsideClose(){return this.cover?this.cover.on("pointerup",this.touchCloseCallback,this):this.scene.input.on("pointerup",this.touchCloseCallback,this),this.clickOutsideTest=!0,this}anyTouchClose(){return this.cover?this.cover.once("pointerup",this.touchCloseCallback,this):this.scene.input.once("pointerup",this.touchCloseCallback,this),this}touchCloseCallback(t){this.clickOutsideTest&&gr(this.parent,t.worldX,t.worldY)||this.requestClose()}runTransitionInCallback(){var t=super.runTransitionInCallback(),s=this.cover;return s&&this.coverTransitInCallback&&this.coverTransitInCallback(s,t),t}runTransitionOutCallback(){var t=super.runTransitionOutCallback(),s=this.cover;return s&&this.coverTransitOutCallback&&this.coverTransitOutCallback(s,t),t}onOpen(){var t=this.displayTime;t>=0&&this.delayCall(t,this.requestClose,this),this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.closeEventData),super.onClose()}setDisplayTime(t){return this.displayTime=t,this}setTransitInCallback(t){switch(typeof t=="string"&&(t=Yi[t]),t){case Yi.popUp:t=aa.popUp;break;case Yi.fadeIn:t=aa.fadeIn;break}return super.setTransitInCallback(t),this}setTransitOutCallback(t){switch(typeof t=="string"&&(t=Yi[t]),t){case Yi.scaleDown:t=aa.scaleDown;break;case Yi.fadeOut:t=aa.fadeOut;break}return super.setTransitOutCallback(t),this}setCoverTransitInCallback(t){return this.coverTransitInCallback=t,this}setCoverTransitOutCallback(t){return this.coverTransitOutCallback=t,this}};const Yi={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1};var Qu=function(i,t){var s=new vb(i,t);return s.on("open",function(){i.emit("modal.open",s)}),s.on("close",function(f){i.emit("modal.close",f,s)}),i.on("modal.requestClose",s.requestClose,s),s},pb=function(i,t){var s=Qu(i,t);return new Promise(function(f,C){s.once("close",function(S){f(S)})})},lm=function(i,t){i.emit("modal.requestClose",t)},_i=function(i){return i&&typeof i=="function"};const qu={modal(i,t){return _i(i)&&(t=i,i=void 0),this._modalBehavior===void 0&&(this.onCreateModalBehavior&&this.onCreateModalBehavior(this,i),this._modalBehavior=Qu(this,i)),t&&this._modalBehavior.once("close",t),this._modalBehavior.requestOpen(),this},modalPromise(i){var t=this;return new Promise(function(s,f){t.modal(i,s)})},modalClose(i){return lm(this,i),this}};var Co=function(i,t,s,f){if(t)return gr(i,t.worldX,t.worldY,s,f);for(var C=i.scene.input.manager,S=C.pointersTotal,r=C.pointers,y=0;y<S;y++)if(t=r[y],gr(i,t.worldX,t.worldY,s,f))return!0;return!1},gb=function(i,t){return(as(i)||typeof i=="string")&&(t=i,i=void 0),t===void 0?t=this:typeof t=="string"&&(t=this.getElement(t)),Co(t,i)},Qe=function(i){return Object.prototype.toString.call(i)==="[object Array]"},Yl=function(i,t,s,f,C){return gr(i,t,s,mb(f),xb(C))},Gc=function(i){var t=i.rexSizer&&i.rexSizer.hidden;return!t},mb=function(i){return i?function(t,s,f){return Gc(t)?(i(t,s,f),!0):!1}:Gc},xb=function(i){return i},yb=function(i,t,s,f,C){if(_i(s)||(C=s,s=void 0,f=void 0),C===void 0&&(this.sizerChildren?C=this.sizerChildren:C=this.children),Qe(C)){for(var S,r=0,y=C.length;r<y;r++)if(S=C[r],Yl(S,i,t,s,f))return S}else{var S;for(var e in C)if(S=C[e],Yl(S,i,t,s,f))return S}return null},qe=function(i,t,s){!i||t===void 0&&s===void 0||(i.resize?(t===void 0&&(t=i.width),s===void 0&&(s=i.height),i.resize(t,s)):(t!==void 0&&(i.displayWidth=t),s!==void 0&&(i.displayHeight=s)))},Tb=function(i,t){return t===void 0?t={}:t===!0&&(t=Cb),t.x=i.x,t.y=i.y,t.scaleX=i.scaleX,t.scaleY=i.scaleY,t.width=i.width,t.height=i.height,t.displayWidth=i.displayWidth,t.displayHeight=i.displayHeight,t},Cb={},Fr=function(i){this.sizerEventsEnable&&(Tb(i,this.getChildPrevState(i)),this.layoutedChildren.push(i))},Lr=function(i,t,s,f,C,S,r,y){wr(i,t,s,f,C,S),r!==void 0&&(i.x+=r),y!==void 0&&(i.y+=y),this.resetChildPositionState(i),this.sizerEventsEnable&&i.emit("sizer.postlayout",i,this)};const Sb=Phaser.Display.Align.CENTER;var Pb=function(){if(this.backgroundChildren!==void 0)for(var i=this.backgroundChildren,t=this.left,s=this.top,f=this.width,C=this.height,S,r,y,e,u,m,d,l=0,h=i.length;l<h;l++)S=i[l],r=S.rexSizer,!r.hidden&&(y=r.padding,Fr.call(this,S),e=t+y.left,u=s+y.top,m=f-y.left-y.right,d=C-y.top-y.bottom,qe(S,m,d),Lr.call(this,S,e,u,m,d,Sb))},Eb=function(i,t){var s=typeof i;if(s==="string"){var f=i;if(i=this.getElement(f),!i)return console.error(`Can get element '${f}'`),this}else(i===void 0||s!="object")&&(t=i,i=this);return t===void 0&&(t=!0),i.input&&i.input._dragTopmostSizer?i.input.draggable=t:t&&(i.setInteractive(),i.scene.input.setDraggable(i),i.on("drag",function(C,S,r){var y=this.getTopmostSizer();y.x+=S-i.x,y.y+=r-i.y,y.emit("sizer.drag",C,S,r)},this).on("dragstart",function(C,S,r){var y=this.getTopmostSizer();y.emit("sizer.dragstart",C,S,r)},this).on("dragend",function(C,S,r,y){var e=this.getTopmostSizer();e.emit("sizer.dragend",C,S,r,y)},this),i.input._dragTopmostSizer=!0),this};const um={onClick(i,t,s,f){return i?(typeof i=="function"&&(f=s,s=t,t=i,i=this),i._click===void 0&&(i._click=new rs(i,f)),i._click.on("click",t,s),this):this},offClick(i,t,s){return typeof i=="function"&&(s=t,t=i,i=this),i._click===void 0?this:(i._click.off("click",t,s),this)},enableClick(i,t){return i&&typeof i!="object"&&(t=i,i=this),i._click===void 0?this:(i._click.setEnable(t),this)},disableClick(i){return i&&typeof i!="object"&&(i=this),i._click===void 0?this:(i._click.setEnable(!1),this)}},oa=Phaser.Utils.Objects.GetValue;class _u extends _t{constructor(t,s){super(t,s),this._enable=void 0;var f=oa(s,"inputConfig",void 0);f&&t.setInteractive(f),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.setEnable(oa(t,"enable",!0)),this.setMode(oa(t,"mode",1)),this.setClickInterval(oa(t,"clickInterval",100)),this}boot(){var t=this.parent.scene;t.input.on("pointerdown",this.onPress,this),t.input.on("pointerup",this.onRelease,this)}shutdown(t){if(!this.isShutdown){var s=this.parent.scene;s.input.off("pointerdown",this.onPress,this),s.input.off("pointerup",this.onRelease,this),super.shutdown(t)}}get enable(){return this._enable}set enable(t){if(this._enable!==t){this._enable=t;var s=t?"enable":"disable";this.emit(s,this,this.parent)}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(t){return typeof t=="string"&&(t=Mb[t]),this.mode=t,this}setClickInterval(t){return this.clickInterval=t,this}isPointerInside(t){var s=this.parent,f=s.input?yu:Co;return f(s,t)}onPress(t){if(this.mode===0){if(!this.parent.willRender(t.camera))return;this.isPointerInside(t)||this.click(t.downTime,t)}}onRelease(t){if(this.mode===1){if(!this.parent.willRender(t.camera))return;this.isPointerInside(t)||this.click(t.upTime,t)}}click(t,s){if(!this.enable)return this;if(t===void 0)return this.emit("clickoutside",this,this.parent,s),this;var f=this.lastClickTime;return f!==void 0&&t-f<=this.clickInterval?this:(this.lastClickTime=t,this.emit("clickoutside",this,this.parent,s),this)}}const Mb={press:0,pointerdown:0,release:1,pointerup:1},wb={onClickOutside(i,t,s,f){return i?(typeof i=="function"&&(f=s,s=t,t=i,i=this),i._clickOutside===void 0&&(i._clickOutside=new _u(i,f)),i._clickOutside.on("clickoutside",t,s),this):this},offClickOutside(i,t,s){return typeof i=="function"&&(s=t,t=i,i=this),i._clickOutside===void 0?this:(i._clickOutside.off("clickoutside",t,s),this)},enableClickOutside(i,t){return i&&typeof i!="object"&&(t=i,i=this),i._clickOutside===void 0?this:(i._clickOutside.setEnable(t),this)},disableClickOutside(i){return i&&typeof i!="object"&&(i=this),i._clickOutside===void 0?this:(i._clickOutside.setEnable(!1),this)}};class Rb extends Di{constructor(){super({eventEmitter:!1}),this.goto("IDLE")}setCooldownTime(t){return this.cooldownTime=t,this.cooldownMode=t!==void 0,this}request(){return this.runMethod("request")}update_IDLE(){this.compensationTime=0}request_IDLE(){return this.next(),!0}next_IDLE(){if(this.cooldownMode)return"COOLDOWN"}enter_COOLDOWN(){this.remainderTime=this.cooldownTime+this.compensationTime}update_COOLDOWN(t,s){this.remainderTime-=s,this.remainderTime<0&&(this.compensationTime=this.cooldownTime>s?-this.remainderTime:0,this.goto("IDLE"))}request_COOLDOWN(){return!1}}const Lh=Phaser.Utils.Objects.GetValue;class An extends _t{constructor(t,s){super(t,s),this._enable=void 0,this.cooldown=new Rb,this.parent.setInteractive(Lh(s,"inputConfig",void 0)),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.prevIsInTouch=!1,this.isInTouching=!1,this.setEnable(Lh(t,"enable",!0)),this.setCooldown(Lh(t,"cooldown",void 0)),this}boot(){var t=this.parent;t.on("pointerdown",this.onPointIn,this),t.on("pointerover",this.onPointIn,this),t.on("pointerup",this.onPointOut,this),t.on("pointerout",this.onPointOut,this),this.scene.sys.events.on("preupdate",this.preupdate,this)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||(this.prevIsInTouch=!1,this.isInTouching=!1,this.pointer=void 0),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get cooldownTime(){return this.cooldown.cooldownTime}set cooldownTime(t){this.cooldown.setCooldownTime(t)}setCooldown(t){return this.cooldownTime=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointIn(t,s,f){!this.enable||!t.isDown||this.pointer!==void 0||(this.pointer=t,this.isInTouching=!0)}onPointOut(t){!this.enable||this.pointer!==t||(this.pointer=void 0,this.isInTouching=!1)}preupdate(t,s){this.cooldown.update(t,s),!this.prevIsInTouch&&this.isInTouching&&this.emit("touchstart",this,this.parent),this.isInTouching&&this.cooldown.request()&&this.emit("intouch",this,this.parent,this.pointer),this.prevIsInTouch&&!this.isInTouching&&this.emit("touchend",this,this.parent),this.prevIsInTouch=this.isInTouching}}const Ab={isPointerInBounds(i){return i===void 0?i=this:typeof i=="string"&&(i=this.getElement(i)),i?Co(i):!1},onTouching(i,t,s,f){return i?(typeof i=="function"&&(f=s,s=t,t=i,i=this),i._inTouching===void 0&&(i._inTouching=new An(i,f)),i._inTouching.on("intouch",t,s),this):this},offTouching(i,t,s){return typeof i=="function"&&(s=t,t=i,i=this),i._inTouching===void 0?this:(i._inTouching.off("intouch",t,s),this)},onTouchingEnd(i,t,s,f){return i?(typeof i=="function"&&(f=s,s=t,t=i,i=this),i._inTouching===void 0&&(i._inTouching=new An(i,f)),i._inTouching.on("touchend",t,s),this):this},offTouchingEnd(i,t,s){return typeof i=="function"&&(s=t,t=i,i=this),i._inTouching===void 0?this:(i._inTouching.off("touchend",t,s),this)},enableTouching(i,t){return i&&typeof i!="object"&&(t=i,i=this),i._inTouching===void 0?this:(i._inTouching.setEnable(t),this)},disableTouching(i){return i&&typeof i!="object"&&(i=this),i._inTouching===void 0?this:(i._inTouching.setEnable(!1),this)}};var dm=function(i,t,s){for(var f,C=0,S=i.length;C<S;C++)if(f=i[C],!!Yl(f,t,s))return f.pointToChild(t,s);return null},ci=function(i,t,s,f,C,S,r){var y;C===void 0?y=f:y=dm(s,f,C),y&&i.emit(t,y,S,r)};const Ob=Phaser.Utils.Objects.GetValue;var bb=function(i){var t=Ob(i,"down",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointerdown",Fb,this))},Fb=function(i,t,s,f){var C=this._childrenInteractive;ci(C.eventEmitter,`${C.eventNamePrefix}down`,C.targetSizers,i.worldX,i.worldY,i,f)};const Lb=Phaser.Utils.Objects.GetValue;var Db=function(i){var t=Lb(i,"up",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointerup",Ib,this))},Ib=function(i,t,s,f){var C=this._childrenInteractive;ci(C.eventEmitter,`${C.eventNamePrefix}up`,C.targetSizers,i.worldX,i.worldY,i,f)};const Bb=Phaser.Utils.Objects.GetValue;var Gb=function(i){var t=Bb(i,"over",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointermove",Nc,this).on("pointerover",Nc,this).on("pointerout",Nb,this))},Nc=function(i,t,s,f){var C=this._childrenInteractive,S=dm(C.targetSizers,i.worldX,i.worldY),r=C.lastOverChild;S&&r&&S===r||(C.lastOverChild=S,ci(C.eventEmitter,`${C.eventNamePrefix}out`,C.targetSizers,r,void 0,i,f),ci(C.eventEmitter,`${C.eventNamePrefix}over`,C.targetSizers,S,void 0,i,f))},Nb=function(i,t){var s=this._childrenInteractive,f=s.lastOverChild;s.lastOverChild=null,ci(s.eventEmitter,`${s.eventNamePrefix}out`,s.targetSizers,f,void 0,i,t)};const Vb=Phaser.Utils.Objects.GetValue;var zb=function(i){var t=Vb(i,"click",void 0);if(t!==!1){t===!0&&(t=void 0),t===void 0&&(t={}),t.hasOwnProperty("threshold")||(t.threshold=10);var s=this._childrenInteractive;this._click=new rs(this,t),this._click.on("click",function(f,C,S,r){ci(s.eventEmitter,`${s.eventNamePrefix}click`,s.targetSizers,S.worldX,S.worldY,S,r)},this)}};const Dh=Phaser.Utils.Objects.GetValue;class So extends oo{constructor(t,s){var f=v0(t);f===t&&(t=void 0),super(f,s),this.gameObject=t,t&&t.setInteractive(Dh(s,"inputConfig",void 0)),this._enable=void 0,this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.setEnable(Dh(t,"enable",!0)),this.setDetectBounds(),this.gameObject===void 0?this.setDetectBounds(Dh(t,"bounds",void 0)):this.setDetectBounds(),this.tracerState=Ih,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,this.isTouchingAnyObject=!1,this}boot(){super.boot(),this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(t){this.scene&&(this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.gameObject=void 0,this.bounds=void 0,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setDetectBounds(t){return this.bounds=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t,s){if(this.enable&&this.pointer===void 0){var f=this.bounds?this.bounds.contains(t.x,t.y):!0;f&&this.pointer!==t&&(this.pointer=t,this.lastPointer=t,this.movedState=!1,this.tracerState=Vc,this.gameObject===void 0&&(this.isTouchingAnyObject=s.length>0),this.onDragStart())}}onPointerUp(t){if(this.enable){var s=this.bounds?this.bounds.contains(t.x,t.y):!0;s&&this.pointer===t&&(this.pointer=void 0,this.movedState=!1,this.tracerState=Ih,this.onDragEnd())}}onPointerMove(t){if(this.enable&&t.isDown){var s=this.bounds?this.bounds.contains(t.x,t.y):!0,f=this.pointer===t;!f&&s||(f&&!s?this.onPointerUp(t):(this.movedState||(this.movedState=t.x!==t.downX||t.y!==t.downY),this.movedState&&this.onDrag()))}}dragCancel(){return this.tracerState===Vc&&this.onDragEnd(),this.pointer=void 0,this.tracerState=Ih,this}onDragStart(){this.emit("dragstart",this)}onDragEnd(){this.emit("dragend",this)}onDrag(){this.emit("drag",this)}preUpdate(t,s){}postUpdate(t,s){}startTicking(){super.startTicking(),this.scene.sys.events.on("preupdate",this.preUpdate,this),this.scene.sys.events.on("postupdate",this.postUpdate,this)}stopTicking(){super.stopTicking(),this.scene&&(this.scene.sys.events.off("preupdate",this.preUpdate,this),this.scene.sys.events.off("postupdate",this.postUpdate,this))}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=Ub,this}}const Ih=0,Vc=1,Ub="IDLE",Ts=Phaser.Utils.Objects.GetValue,Yb=Phaser.Math.Distance.Between;class Po extends So{constructor(t,s){super(t,s);var f=this,C={states:{IDLE:{enter:function(){f.stop(),f.tapsCount=0,f.x=0,f.y=0,f.worldX=0,f.worldY=0},exit:function(){var S=f.lastPointer;f.x=S.x,f.y=S.y,f.worldX=S.worldX,f.worldY=S.worldY}},BEGIN:{enter:function(){f.start(),f.tapsCount=0,f.emit("tappingstart",f,f.gameObject,f.lastPointer)}},RECOGNIZED:{enter:function(){f.start(),f.emit("tap",f,f.gameObject,f.lastPointer),f.emit(`${f.tapsCount}tap`,f,f.gameObject,f.lastPointer)}}},init:function(){this.state=Cs},eventEmitter:!1};this.setRecongizedStateObject(new Di(C))}resetFromJSON(t){super.resetFromJSON(t),this.setHoldTime(Ts(t,"time",250)),this.setTapInterval(Ts(t,"tapInterval",200)),this.setDragThreshold(Ts(t,"threshold",9)),this.setTapOffset(Ts(t,"tapOffset",10));var s=Ts(t,"taps",void 0);return s!==void 0?this.setTaps(s):(this.setMaxTaps(Ts(t,"maxTaps",void 0)),this.setMinTaps(Ts(t,"minTaps",void 0))),this}onDragStart(){switch(this.state){case Cs:this.state=en;break;case en:var t=this.lastPointer,s=Yb(t.upX,t.upY,t.x,t.y);s>this.tapOffset&&(this.state=sn,this.state=en);break;case sn:this.state=en;break}}onDragEnd(){this.state===en&&(this.tapsCount++,this.emit("tapping",this,this.gameObject,this.lastPointer),this.maxTaps!==void 0&&this.tapsCount===this.maxTaps&&(this.state=sn))}onDrag(){this.state!==Cs&&this.pointer.getDistance()>this.dragThreshold&&(this.state=Cs)}preUpdate(t,s){if(!(!this.isRunning||!this.enable)&&this.state===en){var f=this.lastPointer;if(f.isDown){var C=t-f.downTime;C>this.holdTime&&(this.state=Cs)}else{var S=t-f.upTime;S>this.tapInterval&&(this.minTaps===void 0||this.tapsCount>=this.minTaps?this.state=sn:this.state=Cs)}}}postUpdate(t,s){!this.isRunning||!this.enable||this.state===sn&&(this.state=Cs)}get isTapped(){return this.state===sn}setHoldTime(t){return this.holdTime=t,this}setTapInterval(t){return this.tapInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setTapOffset(t){return this.tapOffset=t,this}setMaxTaps(t){return this.maxTaps=t,this}setMinTaps(t){return this.minTaps=t,this}setTaps(t,s){return s===void 0&&(s=t),this.setMinTaps(t).setMaxTaps(s),this}}const Cs="IDLE",en="BEGIN",sn="RECOGNIZED",zc=Phaser.Utils.Objects.GetValue;class Eo extends So{constructor(t,s){super(t,s);var f=this,C={states:{IDLE:{enter:function(){f.x=0,f.y=0,f.worldX=0,f.worldY=0},exit:function(){var S=f.lastPointer;f.x=S.x,f.y=S.y,f.worldX=S.worldX,f.worldY=S.worldY}},BEGIN:{enter:function(){f.start()},exit:function(){f.stop()}},RECOGNIZED:{enter:function(){f.emit("pressstart",f,f.gameObject,f.lastPointer)},exit:function(){f.emit("pressend",f,f.gameObject,f.lastPointer)}}},init:function(){this.state=ha},eventEmitter:!1};this.setRecongizedStateObject(new Di(C))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(zc(t,"threshold",9)),this.setHoldTime(zc(t,"time",251)),this}onDragStart(){this.state=Uc,this.holdTime===0&&(this.state=Bh)}onDragEnd(){this.state=ha}onDrag(){this.state!==ha&&this.pointer.getDistance()>this.dragThreshold&&(this.state=ha)}preUpdate(t,s){if(!(!this.isRunning||!this.enable)&&this.state===Uc){var f=t-this.pointer.downTime;f>=this.holdTime&&(this.state=Bh)}}get isPressed(){return this.state===Bh}setHoldTime(t){return this.holdTime=t,this}setDragThreshold(t){return this.dragThreshold=t,this}}const ha="IDLE",Uc="BEGIN",Bh="RECOGNIZED",kb=Phaser.Utils.Objects.GetValue;class fm extends So{constructor(t,s){super(t,s);var f=this,C={states:{IDLE:{},BEGIN:{enter:function(){var S=f.pointer;f.startX=S.x,f.startY=S.y,f.startWorldX=S.worldX,f.startWorldY=S.worldY}},RECOGNIZED:{enter:function(){f.emit("panstart",f,f.gameObject,f.lastPointer)},exit:function(){var S=f.lastPointer;f.endX=S.x,f.endY=S.y,f.endWorldX=S.worldX,f.endWorldY=S.worldY,f.emit("panend",f,f.gameObject,f.lastPointer)}}},init:function(){this.state=Yc},eventEmitter:!1};this.setRecongizedStateObject(new Di(C))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(kb(t,"threshold",10)),this}onDragStart(){this.state=kc,this.dragThreshold===0&&(this.state=la)}onDragEnd(){this.state=Yc}onDrag(){switch(this.state){case kc:this.pointer.getDistance()>=this.dragThreshold&&(this.state=la);break;case la:var t=this.pointer.position,s=this.pointer.prevPosition;this.dx=t.x-s.x,this.dy=t.y-s.y;var f=this.pointer;this.x=f.x,this.y=f.y,this.worldX=f.worldX,this.worldY=f.worldY,this.emit("pan",this,this.gameObject,this.lastPointer);break}}get isPanned(){return this.state===la}setDragThreshold(t){return this.dragThreshold=t,this}}const Yc="IDLE",kc="BEGIN",la="RECOGNIZED",Xb=Phaser.Math.Distance.Between,Wb=Phaser.Math.Angle.Between,Hb={getDt:function(){var i=Su(this.scene);return i},getVelocity:function(){var i=this.pointer.position,t=this.pointer.prevPosition,s=Xb(t.x,t.y,i.x,i.y),f=s/(this.getDt()*.001);return f},getVelocityX:function(){var i=this.pointer.position,t=this.pointer.prevPosition,s=Math.abs(i.x-t.x),f=s/(this.getDt()*.001);return f},getVelocityY:function(){var i=this.pointer.position,t=this.pointer.prevPosition,s=Math.abs(i.y-t.y),f=s/(this.getDt()*.001);return f},getVelocityAngle:function(){var i=this.pointer.position,t=this.pointer.prevPosition,s=Wb(t.x,t.y,i.x,i.y);return s}},$b={"up&down":0,"left&right":1,"4dir":2,"8dir":3};var Kb=function(i,t,s){switch(s===void 0?s={}:s===!0&&(s=jb),s.left=!1,s.right=!1,s.up=!1,s.down=!1,i=(i+360)%360,t){case 0:i<180?s.down=!0:s.up=!0;break;case 1:i>90&&i<=270?s.left=!0:s.right=!0;break;case 2:i>45&&i<=135?s.down=!0:i>135&&i<=225?s.left=!0:i>225&&i<=315?s.up=!0:s.right=!0;break;case 3:i>22.5&&i<=67.5?(s.down=!0,s.right=!0):i>67.5&&i<=112.5?s.down=!0:i>112.5&&i<=157.5?(s.down=!0,s.left=!0):i>157.5&&i<=202.5?s.left=!0:i>202.5&&i<=247.5?(s.left=!0,s.up=!0):i>247.5&&i<=292.5?s.up=!0:(i>292.5&&i<=337.5&&(s.up=!0),s.right=!0);break}return s},jb={};const Gh=Phaser.Utils.Objects.GetValue,Zb=Phaser.Math.RadToDeg;class Dr extends So{constructor(t,s){super(t,s);var f=this,C={states:{IDLE:{enter:function(){f.x=0,f.y=0,f.worldX=0,f.worldY=0},exit:function(){var S=f.lastPointer;f.x=S.x,f.y=S.y,f.worldX=S.worldX,f.worldY=S.worldY}},BEGIN:{enter:function(){f.validDrag=!1}},RECOGNIZED:{enter:function(){f.start(),f.updateDirectionStates(),f.emit("swipe",f,f.gameObject,f.lastPointer)},exit:function(){f.stop(),f.clearDirectionStates()}}},init:function(){this.state=Nh},eventEmitter:!1};this.setRecongizedStateObject(new Di(C)),this.clearDirectionStates()}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(Gh(t,"threshold",10)),this.setVelocityThreshold(Gh(t,"velocityThreshold",1e3)),this.setDirectionMode(Gh(t,"dir","8dir")),this}onDragStart(){this.state=Xc}onDragEnd(){this.state=Nh}onDrag(){this.state===Xc&&(this.validDrag||(this.validDrag=this.dragThreshold===0||this.pointer.getDistance()>=this.dragThreshold),this.validDrag&&this.dragVelocity>this.velocityThreshold&&(this.state=Vh))}postUpdate(t,s){!this.isRunning||!this.enable||this.state===Vh&&(this.state=Nh)}get isSwiped(){return this.state===Vh}get dragVelocity(){var t;switch(this.dirMode){case 0:t=this.getVelocityY();break;case 1:t=this.getVelocityX();break;default:t=this.getVelocity();break}return t}setDragThreshold(t){return this.dragThreshold=t,this}setVelocityThreshold(t){return this.velocityThreshold=t,this}setDirectionMode(t){return typeof t=="string"&&(t=$b[t]),this.dirMode=t,this}updateDirectionStates(){var t=Zb(this.getVelocityAngle());return Kb(t,this.dirMode,this),this}clearDirectionStates(){return this.left=!1,this.right=!1,this.up=!1,this.down=!1,this}}Object.assign(Dr.prototype,Hb);const Nh="IDLE",Xc="BEGIN",Vh="RECOGNIZED",zh=Phaser.Utils.Objects.GetValue,Jb=Phaser.Utils.Array.SpliceOne,Qb=Phaser.Math.Distance.Between,qb=Phaser.Math.Angle.Between;class td{constructor(t,s){var f=t.input.manager.pointersTotal-1;f<2&&t.input.addPointer(2-f),this.scene=t,this.setEventEmitter(zh(s,"eventEmitter",void 0)),this._enable=void 0,this.pointers=[],this.movedState={},this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.setEnable(zh(t,"enable",!0)),this.bounds=zh(t,"bounds",void 0),this.tracerState=ua,this.pointers.length=0,Mi(this.movedState),this}boot(){this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(){this.scene&&(this.destroyEventEmitter(),this.pointers.length=0,Mi(this.movedState),this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.scene=void 0)}destroy(){this.shutdown()}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t){if(this.enable&&this.pointers.length!==2){var s=this.bounds?this.bounds.contains(t.x,t.y):!0;if(s){var f=this.pointers.indexOf(t);if(f===-1)switch(this.movedState[t.id]=!1,this.pointers.push(t),this.tracerState){case ua:this.tracerState=Qn,this.onDrag1Start();break;case Qn:this.tracerState=ii,this.onDrag2Start();break}}}}onPointerUp(t){if(this.enable){var s=this.bounds?this.bounds.contains(t.x,t.y):!0;if(s){var f=this.pointers.indexOf(t);if(f!==-1)switch(delete this.movedState[t.id],Jb(this.pointers,f),this.tracerState){case Qn:this.tracerState=ua,this.onDrag1End();break;case ii:this.tracerState=Qn,this.onDrag2End(),this.onDrag1Start();break}}}}onPointerMove(t){if(this.enable&&t.isDown){var s=this.bounds?this.bounds.contains(t.x,t.y):!0,f=this.pointers.indexOf(t)!==-1;if(!(!f&&s)){if(f&&!s)this.onPointerUp(t);else if(this.movedState[t.id]||(this.movedState[t.id]=t.x!==t.downX||t.y!==t.downY),this.movedState[t.id])switch(this.tracerState){case Qn:this.onDrag1();break;case ii:this.onDrag2();break}}}}dragCancel(){return this.tracerState===ii&&this.onDrag2End(),this.pointers.length=0,Mi(this.movedState),this.tracerState=ua,this}onDrag1Start(){this.emit("drag1start",this)}onDrag1End(){this.emit("drag1end",this)}onDrag1(){this.emit("drag1",this)}onDrag2Start(){this.emit("drag2start",this)}onDrag2End(){this.emit("drag2end",this)}onDrag2(){this.emit("drag2",this)}get distanceBetween(){if(this.tracerState!==ii)return 0;var t=this.pointers[0],s=this.pointers[1];return Qb(t.x,t.y,s.x,s.y)}get angleBetween(){if(this.tracerState!==ii)return 0;var t=this.pointers[0],s=this.pointers[1];return qb(t.x,t.y,s.x,s.y)}get drag1Vector(){var t=this.pointers[0];if(t&&this.movedState[t.id]){var s=t.position,f=t.prevPosition;Jn.x=s.x-f.x,Jn.y=s.y-f.y}else Jn.x=0,Jn.y=0;return Jn}get centerX(){if(this.tracerState!==ii)return 0;var t=this.pointers[0].position,s=this.pointers[1].position;return(t.x+s.x)/2}get centerY(){if(this.tracerState!==ii)return 0;var t=this.pointers[0].position,s=this.pointers[1].position;return(t.y+s.y)/2}get prevCenterX(){if(this.tracerState!==ii)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,s=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.x+s.x)/2}get prevCenterY(){if(this.tracerState!==ii)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,s=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.y+s.y)/2}get movementCenterX(){return this.centerX-this.prevCenterX}get movementCenterY(){return this.centerY-this.prevCenterY}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=_b,this}}Object.assign(td.prototype,Ln);var Jn={};const ua=0,Qn=1,ii=2,_b="IDLE",tF=Phaser.Utils.Objects.GetValue;class cm extends td{constructor(t,s){super(t,s);var f=this,C={states:{IDLE:{enter:function(){f.prevDistance=void 0,f.scaleFactor=1}},BEGIN:{},RECOGNIZED:{enter:function(){f.emit("pinchstart",f)},exit:function(){f.emit("pinchend",f)}}},init:function(){this.state=Wc},eventEmitter:!1};this.setRecongizedStateObject(new Di(C))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(tF(t,"threshold",0)),this}onDrag2Start(){this.scaleFactor=1,this.prevDistance=this.distanceBetween,this.state=Hc,this.dragThreshold===0&&(this.state=da)}onDrag2End(){this.state=Wc}onDrag2(){switch(this.state){case Hc:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.prevDistance=t,this.state=da}break;case da:var t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.emit("pinch",this),this.prevDistance=t;break}}get isPinched(){return this.state===da}setDragThreshold(t){return this.dragThreshold=t,this}}const Wc="IDLE",Hc="BEGIN",da="RECOGNIZED",eF=Phaser.Math.RotateAround;var $c=function(i,t,s,f){return eF(i,t,s,f),i.rotation+=f,i},iF=function(i,t,s,f){return f===void 0?f={}:f===!0&&(f=sF),s.getWorldPoint(i,t,f),f},sF={},nF=function(i,t){if(!this.isRotation)return this;t===void 0&&(t=this.pointers[0].camera);var s=this.movementCenterX,f=this.movementCenterY,C=iF(this.centerX,this.centerY,t,!0),S=C.x,r=C.y,y=this.rotation;if(Array.isArray(i))for(var e=i,u=0,m=e.length;u<m;u++)i=e[u],i.x+=s,i.y+=f,$c(i,S,r,y);else i.x+=s,i.y+=f,$c(i,S,r,y);return this};const rF=Phaser.Utils.Objects.GetValue,Uh=Phaser.Math.Angle.WrapDegrees,Kc=Phaser.Math.Angle.ShortestBetween,Yh=Phaser.Math.RadToDeg,aF=Phaser.Math.DegToRad;class ed extends td{constructor(t,s){super(t,s);var f=this,C={states:{IDLE:{enter:function(){f.prevAngle=void 0,f.angle=0}},BEGIN:{},RECOGNIZED:{enter:function(){f.emit("rotatestart",f)},exit:function(){f.emit("rotateend",f)}}},init:function(){this.state=jc},eventEmitter:!1};this.setRecongizedStateObject(new Di(C))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(rF(t,"threshold",0)),this}onDrag2Start(){this.prevAngle=Uh(Yh(this.angleBetween)),this.state=Zc,this.dragThreshold===0&&(this.state=fa)}onDrag2End(){this.state=jc}onDrag2(){switch(this.state){case Zc:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=Uh(Yh(this.angleBetween));this.angle=Kc(this.prevAngle,t),this.prevAngle=t,this.state=fa}break;case fa:var t=Uh(Yh(this.angleBetween));this.angle=Kc(this.prevAngle,t),this.prevAngle=t,this.emit("rotate",this);break}}get isRotated(){return this.state===fa}get rotation(){return aF(this.angle)}setDragThreshold(t){return this.dragThreshold=t,this}}var oF={spinObject:nF};Object.assign(ed.prototype,oF);const jc="IDLE",Zc="BEGIN",fa="RECOGNIZED",hF=Phaser.Utils.Objects.GetValue;var lF=function(i){var t=hF(i,"tap",void 0);if(t!==!1){t===!0&&(t=void 0);var s=this._childrenInteractive;this._tap=new Po(this,t),this._tap.on("tap",function(f,C,S){ci(s.eventEmitter,`${s.eventNamePrefix}${f.tapsCount}tap`,s.targetSizers,f.worldX,f.worldY,S)},this)}};const uF=Phaser.Utils.Objects.GetValue;var dF=function(i){var t=uF(i,"press",void 0);if(t!==!1){t===!0&&(t=void 0);var s=this._childrenInteractive;this._press=new Eo(this,t),this._press.on("pressstart",function(f,C,S){ci(s.eventEmitter,`${s.eventNamePrefix}pressstart`,s.targetSizers,f.worldX,f.worldY,S)},this).on("pressend",function(f,C,S){ci(s.eventEmitter,`${s.eventNamePrefix}pressend`,s.targetSizers,f.worldX,f.worldY,S)},this)}};const fF=Phaser.Utils.Objects.GetValue;var cF=function(i){var t=fF(i,"swipe",void 0);if(t!==!1){t===!0&&(t=void 0),t===void 0&&(t={}),t.hasOwnProperty("dir")||(t.dir="4dir");var s=this._childrenInteractive;this._swipe=new Dr(this,t),this._swipe.on("swipe",function(f,C,S){var r=f.left?"left":f.right?"right":f.up?"up":"down";ci(s.eventEmitter,`${s.eventNamePrefix}swipe${r}`,s.targetSizers,f.worldX,f.worldY,S)},this)}};const kh=Phaser.Utils.Objects.GetValue;var id=function(i,t){return i.setInteractive(),i._childrenInteractive={targetSizers:kh(t,"targets",[i]),eventEmitter:kh(t,"eventEmitter",i),eventNamePrefix:kh(t,"inputEventPrefix","child.")},bb.call(i,t),Db.call(i,t),Gb.call(i,t),zb.call(i,t),lF.call(i,t),dF.call(i,t),cF.call(i,t),i},vF=function(i){return id(this,i),this},pF=function(){for(var i=this.getAllChildren([this]),t=0,s=i.length;t<s;t++){var f=i[t];f.emit.apply(f,arguments)}return this},vm={getSizerConfig:HA,getChildPrevState:$A,pushIntoBounds:KA,drawBounds:rO,resolveWidth:ku,resolveChildrenWidth:xO,resolveHeight:Xu,postResolveSize:yO,getChildWidth:TO,getChildHeight:CO,getExpandedChildWidth:SO,getExpandedChildHeight:PO,getChildrenWidth:EO,getChildrenHeight:MO,addChildrenMap:Mc,addElement:Mc,removeChildrenMap:vO,getElement:pO,getAllChildrenSizers:wO,getChildrenSizers:RO,preLayout:br,layout:OO,runLayout:bO,layoutChildren:FO,runWidthWrap:im,layoutBackgrounds:Pb,postLayout:LO,setAnchor:DO,isInTouching:gb,pointToChild:yb,setDraggable:Eb,setChildrenInteractive:vF,broadcastEvent:pF};Object.assign(vm,mO,hO,cO,Or,$u,YO,WO,JO,_O,um,wb,Ab,tb,qu,AO);const nn=Phaser.Utils.Objects.GetValue;class Vs extends Oe{constructor(t,s,f,C,S,r){super(t,s,f,1,1),this.isRexSizer=!0,this.setMinSize(C,S),this.setName(nn(r,"name","")),this.rexSizer={},this.space={},this.backgroundChildren=void 0,this.sizerChildren=void 0,this.childrenMap={},this.layoutedChildren=void 0;var y=nn(r,"anchor",void 0);y&&this.setAnchor(y),this.setInnerPadding(nn(r,"space",0));var e=nn(r,"draggable",!1);e&&this.setDraggable(e),this.setSizerEventsEnable(nn(r,"sizerEvents",!1)),this.setDirty(!0),nn(r,"enableLayer",!1)&&this.enableLayer()}destroy(t){if(this.scene){if(t)for(var s=this.getAllChildrenSizers([this]),f=0,C=s.length;f<C;f++)s[f].sizerEventsEnable=!1;super.destroy(t),Mi(this.backgroundChildren),Mi(this.sizerChildren),this.childrenMap=void 0,this.space=void 0,this.rexSizer=void 0,this.layoutedChildren=void 0}}setMinSize(t,s){return this.setMinWidth(t).setMinHeight(s),this}setMinWidth(t){return t==null&&(t=0),this.minWidth=t,this}setMinHeight(t){return t==null&&(t=0),this.minHeight=t,this}setDirty(t){return t===void 0&&(t=!0),this.dirty=t,this}setSizerEventsEnable(t){return t===void 0&&(t=!0),this.sizerEventsEnable=t,this}get ignoreLayout(){return this.rexSizer.hidden||!this.dirty}get childrenWidth(){return this._childrenWidth===void 0&&(this._childrenWidth=this.getChildrenWidth()),this._childrenWidth}get childrenHeight(){return this._childrenHeight===void 0&&(this._childrenHeight=this.getChildrenHeight()),this._childrenHeight}get left(){return this.x-Mt(this)*this.originX}set left(t){this.x+=t-this.left}alignLeft(t){return this.left=t,this}get right(){return this.left+Mt(this)}set right(t){this.x+=t-this.right}alignRight(t){return this.right=t,this}get centerX(){return this.left+Mt(this)/2}set centerX(t){this.x+=t-this.centerX}alignCenterX(t){return this.centerX=t,this}get top(){return this.y-St(this)*this.originY}set top(t){this.y+=t-this.top}alignTop(t){return this.top=t,this}get bottom(){return this.top+St(this)}set bottom(t){this.y+=t-this.bottom}alignBottom(t){return this.bottom=t,this}get centerY(){return this.top+St(this)/2}set centerY(t){this.y+=t-this.centerY}alignCenterY(t){return this.centerY=t,this}get innerLeft(){return this.left+this.space.left}get innerRight(){return this.right-this.space.right}get innerTop(){return this.top+this.space.top}get innerBottom(){return this.bottom-this.space.bottom}get innerWidth(){return this.width-this.space.left-this.space.right}get innerHeight(){return this.height-this.space.top-this.space.bottom}get minInnerWidth(){var t=this.minWidth-this.space.left-this.space.right;return Math.max(t,0)}get minInnerHeight(){var t=this.minHeight-this.space.top-this.space.bottom;return Math.max(t,0)}}Object.assign(Vs.prototype,vm);var gF=function(){if(this.rexSizer.hidden)return 0;var i=0,t=this.sizerChildren,s,f,C;for(var S in t)s=t[S],f=s.rexSizer.padding,C=this.getChildWidth(s)+f.left+f.right,i=Math.max(C,i);return i+this.space.left+this.space.right},mF=function(){if(this.rexSizer.hidden)return 0;var i=0,t=this.sizerChildren,s,f,C;for(var S in t)s=t[S],C=s.isRexSizer?Math.max(s.minHeight,s.childrenHeight):s.minHeight!==void 0?s.minHeight:St(s),f=s.rexSizer.padding,C+=f.top+f.bottom,i=Math.max(C,i);return i+this.space.top+this.space.bottom},xF=function(i,t){t===void 0&&(t=this.width);var s,f=i.rexSizer;if(f.expandWidth){var C=t-this.space.left-this.space.right,S=f.padding;s=C-S.left-S.right}return s},yF=function(i,t){t===void 0&&(t=this.height);var s,f=i.rexSizer;if(f.expandHeight){var C=t-this.space.top-this.space.bottom,S=f.padding;s=C-S.top-S.bottom}return s},TF=function(i){i===void 0&&(i=[]);var t=this.sizerChildren,s;for(var f in t)s=t[f],s.isRexSizer&&i.push(s);return i},sd=function(i,t){i.width<i.childrenWidth&&console.warn(`Layout width error: Parent=${t.constructor.name}, Child=${i.constructor.name}`),i.height<i.childrenHeight&&console.warn(`Layout height error: Parent=${t.constructor.name}, Child=${i.constructor.name}`)},CF=function(){var i,t,s,f=this.innerLeft,C=this.innerTop,S=this.innerWidth,r=this.innerHeight,y,e,u,m,d,l,h=this.sizerChildren;for(var n in h)i=h[n],!i.rexSizer.hidden&&(t=i.rexSizer,s=t.padding,Fr.call(this,i),i.isRexSizer?(i.runLayout(this,this.getExpandedChildWidth(i),this.getExpandedChildHeight(i)),sd(i,this)):(d=void 0,l=void 0,t.expandWidth&&(d=S-s.left-s.right),t.expandHeight&&(l=r-s.top-s.bottom),qe(i,d,l)),y=f+s.left,u=S-s.left-s.right,e=C+s.top,m=r-s.top-s.bottom,Lr.call(this,i,y,e,u,m,t.align,t.alignOffsetX,t.alignOffsetY))};const Jc=Phaser.Utils.Objects.IsPlainObject,si=Phaser.Utils.Objects.GetValue,Qc=Phaser.Display.Align.CENTER,SF=Phaser.Utils.String.UUID;var PF=function(i,t,s,f,C,S,r,y,e){if(Rr.call(this,i),Jc(t)){var m=t;t=si(m,"key",void 0),s=si(m,"align",Qc),y=si(m,"offsetX",0),e=si(m,"offsetY",0),f=si(m,"padding",0),C=si(m,"expand",!0),i.isRexSizer||(S=si(m,"minWidth",i._minWidth),r=si(m,"minHeight",i._minHeighted))}var u=t!==void 0;u||(t=SF()),typeof s=="string"&&(s=In[s]),s===void 0&&(s=Qc),y===void 0&&(y=0),e===void 0&&(e=0),f===void 0&&(f=0),C===void 0&&(C=!0),i.isRexSizer||(S===void 0&&(S=i._minWidth),r===void 0&&(r=i._minHeight));var m=this.getSizerConfig(i);return m.align=s,m.alignOffsetX=y,m.alignOffsetY=e,m.padding=Bn(f),Jc(C)?(m.expandWidth=si(C,"width",!1),m.expandHeight=si(C,"height",!1)):(m.expandWidth=C,m.expandHeight=C),i.isRexSizer||(m.expandWidth&&(i.minWidth=S===void 0?Mt(i):S),m.expandHeight&&(i.minHeight=r===void 0?St(i):r)),this.sizerChildren.hasOwnProperty(t)&&this.sizerChildren[t].destroy(),this.sizerChildren[t]=i,u&&this.addChildrenMap(t,i),this};const EF={add:PF},MF=Oe.prototype.clear;var Mo=function(i){this.backgroundChildren&&(this.backgroundChildren.length=0);var t=!i&&this.sizerEventsEnable,s;if(t&&(s=this.getChildren([])),MF.call(this,i),t)for(var f,C=0,S=s.length;C<S;C++)f=s[C],f.emit("sizer.remove",f,this),this.emit("remove",f,this);return this};const wF={remove(i,t){var s;if(typeof i=="string"){if(s=i,i=this.sizerChildren[s],!i)return this}else{if(this.getParentSizer(i)!==this)return this;s=this.childToKey(i)}return s&&(delete this.sizerChildren[s],this.childrenMap.hasOwnProperty(s)&&delete this.childrenMap[s]),Ar.call(this,i,t),this},removeAll(i){for(var t in this.sizerChildren)this.remove(t,i);return this},clear(i){for(var t in this.sizerChildren)delete this.sizerChildren[t],this.childrenMap.hasOwnProperty(t)&&delete this.childrenMap[t];return Mo.call(this,i),this}};var pm={getChildrenWidth:gF,getChildrenHeight:mF,getExpandedChildWidth:xF,getExpandedChildHeight:yF,getChildrenSizers:TF,layoutChildren:CF};Object.assign(pm,EF,wF);var wo=function(i,t){if(Array.isArray(i))return i.indexOf(t);for(var s in i)if(i[s]===t)return s;return null};const qc=Phaser.Utils.Objects.IsPlainObject,rn=Phaser.Utils.Objects.GetValue;class be extends Vs{constructor(t,s,f,C,S,r){qc(s)?(r=s,s=rn(r,"x",0),f=rn(r,"y",0),C=rn(r,"width",void 0),S=rn(r,"height",void 0)):qc(C)&&(r=C,C=rn(r,"width",void 0),S=rn(r,"height",void 0)),super(t,s,f,C,S,r),this.type="rexOverlapSizer",this.sizerChildren={},this.addChildrenMap("items",this.sizerChildren)}childToKey(t){if(typeof t=="string"){var s=t;if(this.sizerChildren.hasOwnPropery(s))return s}else return wo(this.sizerChildren,t);return null}}Object.assign(be.prototype,pm);var RF=Phaser.Math.Distance.Between,$a=function(i,t,s){var f=i.width/2;return RF(f,f,t,s)<=f};const AF=Phaser.Math.Angle.Between,OF=Phaser.Math.Angle.Normalize;var _c=function(i,t,s){if(this.enable&&i.isDown){var f=this.sizerChildren.knob;if($a(f,t,s)){var C=f.width/2,S=f.startAngle,r=AF(C,C,t,s),y=f.anticlockwise?S-r:r-S,e=OF(y)/(2*Math.PI);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-e)<.1?this.value=e:this.easeValueTo(e)}}},bF=function(){var i=this.sizerChildren.knob;i.on("pointerdown",_c,this).on("pointermove",_c,this).setInteractive()};const tv=Phaser.Math.Angle.Between,FF=Phaser.Math.Angle.Wrap;var LF=function(i,t,s){if(!(!this.enable||this.panPointer)){var f=this.sizerChildren.knob;$a(f,t,s)&&gm.call(this,i)}},DF=function(i,t,s){if(this.enable&&i.isDown){var f=this.sizerChildren.knob;switch(this.panState){case nd:$a(f,t,s)&&gm.call(this,i);break;case xm:$a(f,t,s)?BF.call(this):mm.call(this);break}}},IF=function(i,t,s){!this.enable||this.panPointer!==i||mm.call(this)},gm=function(i){this.panPointer=i,this.panState=xm},mm=function(){this.panPointer=void 0,this.panState=nd},BF=function(){var i=this.panPointer.prevPosition,t=this.panPointer.position,s=this.sizerChildren.knob,f=tv(s.x,s.y,i.x,i.y),C=tv(s.x,s.y,t.x,t.y),S=s.anticlockwise?f-C:C-f,r=FF(S)/(Math.PI*2);this.stopEaseValue(),this.value+=r};const nd=0,xm=1;var GF=function(){var i=this.sizerChildren.knob;i.on("pointerdown",LF,this).on("pointermove",DF,this).on("pointerup",IF,this).setInteractive(),this.panPointer=void 0,this.panState=nd},NF=function(i,t){return this.textFormatCallback=i,this.textFormatCallbackScope=t,this},ym=function(i){i===void 0&&(i=this.value);var t;return this.textFormatCallbackScope?t=this.textFormatCallback(i):t=this.textFormatCallback.call(this.textFormatCallbackScope,i),t},VF=function(i){var t=this.sizerChildren.text;return t&&this.textFormatCallback&&(t.setText(ym.call(this,i)),t.layout&&t.layout()),this};const zF={setTextFormatCallback:NF,getFormatText:ym,updateText:VF},Xe=Phaser.Utils.Objects.GetValue,UF=Phaser.Math.Snap.To;class Ro extends Ns(be){constructor(t,s){s===void 0&&(s={}),super(t,s),this.type="rexKnob",this.bootProgressBase(s);var f=Xe(s,"background",void 0),C=Xe(s,"text",void 0);f&&this.addBackground(f),C&&(s.textColor=void 0,s.textStrokeColor=void 0,this.setTextFormatCallback(Xe(s,"textFormatCallback",void 0),Xe(s,"textFormatCallbackScope",void 0)));var S=new vo(t,s);S.setDepth(Xe(s,"knobDepth",0)),S._value=-1,t.add.existing(S),this.add(S,"knob"),C&&(this.add(C,"text","center",0,!1),t.children.moveBelow(S,C)),this.addChildrenMap("background",f),this.addChildrenMap("knob",S),this.addChildrenMap("text",C),this.setEnable(Xe(s,"enable",void 0)),this.setGap(Xe(s,"gap",void 0)),this.setValue(Xe(s,"value",0),Xe(s,"min",void 0),Xe(s,"max",void 0));var r=Xe(s,"input",0);switch(typeof r=="string"&&(r=YF[r]),r){case 0:GF.call(this);break;case 1:bF.call(this);break}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setGap(t){return this.gap=t,this}get value(){return this.sizerChildren.knob.value}set value(t){this.gap!==void 0&&(t=UF(t,this.gap));var s=this.value;this.sizerChildren.knob.value=t;var f=this.value;s!==f&&(this.updateText(),this.eventEmitter.emit("valuechange",f,s,this.eventEmitter))}}const YF={pan:0,drag:0,click:1,none:-1};Object.assign(Ro.prototype,zF);st.register("knob",function(i){var t=new Ro(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.Knob",Ro);const kF={arc:co,circle:Vl,curve:Yw,ellipse:kw,line:Xw,lines:Cn,rectangle:uR,roundRectangle:Xa,triangle:fR},ev=Phaser.Utils.Objects.GetValue,XF=Phaser.Utils.Objects.IsPlainObject,WF=function(){for(var i=this.getShapes(),t=0,s=i.length;t<s;t++)i[t].lineStyle().fillStyle()},HF={createShape(i,t){var s=kF[i],f=new s;return t&&f.setName(t),f},buildShapes(i){var t=ev(i,"create",void 0);if(XF(t)){var s=t;for(var f in s){var C=s[f];switch(typeof C){case"number":for(var S=0;S<C;S++)this.addShape(this.createShape(f));break;case"string":this.addShape(this.createShape(f,C));break;default:for(var r=C,S=0,y=r.length;S<y;S++)this.addShape(this.createShape(f,r[S]));break}}}else if(Array.isArray(t))for(var s=t,S=0,y=s.length;S<y;S++){var e=s[S];this.addShape(this.createShape(e.type,e.name))}else typeof t=="function"&&t.call(this);this.setUpdateShapesCallback(ev(i,"update"))},setUpdateShapesCallback(i){return i===void 0&&(i=WF),this.dirty=this.dirty||this.updateCallback!==i,this.updateCallback=i,this},updateShapes(){this.updateCallback.call(this)}},iv=Phaser.GameObjects.Components.TransformMatrix,$F=Phaser.Math.TransformXY;var KF=function(i,t,s,f,C){f===void 0&&(f=i.scene.cameras.main),C===void 0?C={}:C===!0&&(C=jF);var S=f.scrollX,r=f.scrollY,y=t+S*i.scrollFactorX-S,e=s+r*i.scrollFactorY-r;return i.parentContainer?(ca===void 0&&(ca=new iv,sv=new iv),i.getWorldTransformMatrix(ca,sv),ca.applyInverse(y,e,C)):$F(y,e,i.x,i.y,i.rotation,i.scaleX,i.scaleY,C),C.x+=i.displayOriginX,C.y+=i.displayOriginY,C},ca,sv,jF={};const qn=Phaser.Utils.Objects.GetValue,ZF=Phaser.Utils.Objects.IsPlainObject;class Ao extends Is{constructor(t,s,f,C,S,r){ZF(s)&&(r=s,s=qn(r,"x",0),f=qn(r,"y",0),C=qn(r,"width",2),S=qn(r,"height",2)),super(t,s,f,C,S),this.type=qn(r,"type","rexCustomShapes"),this.buildShapes(r)}get centerX(){return this.width/2}get centerY(){return this.height/2}worldToLocalXY(t,s,f,C){return typeof f=="boolean"&&(C=f,f=void 0),KF(this,t,s,f,C)}}Object.assign(Ao.prototype,HF);st.register("customShapes",function(i,t,s,f,C){var S=new Ao(this.scene,i,t,s,f,C);return this.scene.add.existing(S),S});it(window,"RexPlugins.UI.CustomShapes",Ao);const _n=Phaser.Utils.Objects.GetValue,JF=Phaser.Utils.Objects.IsPlainObject;class Tm extends Ns(Ao){constructor(t,s,f,C,S,r){JF(s)&&(r=s,s=_n(r,"x",0),f=_n(r,"y",0),C=_n(r,"width",2),S=_n(r,"height",2)),r===void 0&&(r={}),r.type||(r.type="rexCustomProgress"),super(t,s,f,C,S,r),this.bootProgressBase(r),this.setValue(_n(r,"value",0))}get centerX(){return this.width/2}get centerY(){return this.height/2}get radius(){return Math.min(this.centerX,this.centerY)}}st.register("customProgress",function(i,t,s,f,C){var S=new Tm(this.scene,i,t,s,f,C);return this.scene.add.existing(S),S});it(window,"RexPlugins.UI.CustomProgress",Tm);const QF={setTransitionStartCallback(i,t){return this.onStartCallback=i,this.onStartCallbackScope=t,this},setTransitionProgressCallback(i,t){return this.onProgressCallback=i,this.onProgressCallbackScope=t,this},setTransitionCompleteCallback(i,t){return this.onCompleteCallback=i,this.onCompleteCallbackScope=t,this}},qF=Phaser.Utils.Objects.IsPlainObject,Le=Phaser.Utils.Objects.GetValue;var _F={out:0,in:1};const tL={setTransitionDirection(i){return typeof i=="string"&&(i=_F[i]),this.dir=i,this},setDuration(i){return this.duration=i,this},setEaseFunction(i){return this.easeFunction=i,this},setNextTexture(i,t){return this.nextImage.setTexture(i,t),this},transit(i,t){if(this.isRunning&&(this.ignoreCompleteEvent=!0,this.stop(),this.ignoreCompleteEvent=!1),qF(i)){var s=i;i=Le(s,"key",void 0),t=Le(s,"frame",void 0),this.setDuration(Le(s,"duration",this.duration)).setEaseFunction(Le(s,"ease",this.easeFunction)).setTransitionDirection(Le(s,"dir",this.dir));var f=Le(s,"mask",void 0);f&&this.setMaskGameObject(f),this.setMaskEnable(f===!0);var C=Le(s,"onStart",void 0),S=Le(s,"onProgress",void 0),r=Le(s,"onComplete",void 0);(C!==void 0||S!==void 0||r!==void 0)&&this.setTransitionStartCallback(C,Le(s,"onStartScope",void 0)).setTransitionProgressCallback(S,Le(s,"onProgressScope",void 0)).setTransitionCompleteCallback(r,Le(s,"onCompleteScope",void 0))}return this.setNextTexture(i,t),this.start(),this},start(){return this.easeValueTask===void 0&&(this.easeValueTask=new Bs(this,{eventEmitter:null})),this.easeValueTask.restart({key:"t",from:0,to:1,duration:this.duration,ease:this.easeFunction}),this},pause(){return this.easeValueTask&&this.easeValueTask.pause(),this},resume(){return this.easeValueTask&&this.easeValueTask.resume(),this},stop(){return this.easeValueTask&&this.easeValueTask.stop(),this.setT(1),this}};var nv=function(i,t,s,f,C){switch(this.clear().fillStyle(16777215),this.shape){case 1:var S=Math.min(i,t)/2;this.fillCircle(-i*(f-.5),-t*(C-.5),S+s);break;default:this.fillRect(-(i*f)-s,-(t*C)-s,i+2*s,t+2*s);break}};const eL=Phaser.GameObjects.Graphics;class kl extends eL{constructor(t,s,f){s===void 0&&(s=0),typeof s=="string"&&(s=iL[s]),f===void 0&&(f=0),super(t.scene),this.parent=t,this.shape=s,this.padding=f,this.setPosition().resize().setVisible(!1)}destroy(){return this.parent=void 0,super.destroy(),this}setPosition(t,s){var f=this.parent;return t===void 0&&(t=f.x),s===void 0&&(s=f.y),super.setPosition(t,s),this}resize(t,s,f){var C=this.parent;return t===void 0&&(t=C.width),s===void 0&&(s=C.height),f===void 0&&(f=this.padding),this.width===t&&this.height===s&&this.paddingSave===f?this:(this.width=t,this.height=s,this.originX=C.originX,this.originY=C.originY,this.paddingSave=f,nv.call(this,t,s,f,C.originX,C.originY),this)}setOrigin(t,s){s===void 0&&(s=t);var f=this.parent;return t===void 0&&(t=f.originX),s===void 0&&(s=f.originY),this.originX===t&&this.originY===s?this:(this.originX=t,this.originY=s,nv.call(this,this.width,this.height,this.paddingSave,t,s),this)}}const iL={rectangle:0,circle:1},sL={setMaskGameObject(i){if(!i)return this.removeMaskGameObject(),this;if(this.maskGameObject){if(i===!0&&this.maskGameObject instanceof kl)return this;if(this.maskGameObject===i)return this;this.removeMaskGameObject()}return i===!0&&(i=new kl(this)),this.maskGameObject=i,this.maskGameObject.resize(this.width,this.height).setOrigin(this.originX,this.originY).setPosition(0,0).setScale(1).setVisible(!1),this.addLocal(this.maskGameObject),this.childrenMask=this.maskGameObject.createGeometryMask(),this},removeMaskGameObject(){return this.backImage.clearMask(),this.frontImage.clearMask(),this.childrenMask=void 0,this.remove(this.maskGameObject,!0),this.maskGameObject=void 0,this},setImageMaskEnable(i,t,s){return t===void 0&&(t=!0),this.childrenMask||this.setMaskGameObject(!0),t?(i.setMask(this.childrenMask),s&&this.childrenMask.setInvertAlpha()):i.clearMask(),this},setCurrentImageMaskEnable(i,t){return this.setImageMaskEnable(this.currentImage,i,t),this},setNextImageMaskEnable(i,t){return this.setImageMaskEnable(this.nextImage,i,t),this},setCellImagesMaskEnable(i,t){for(var s=this.getCellImages(),f=0,C=s.length;f<C;f++)this.setImageMaskEnable(s[f],i,t);return this},setMaskEnable(i,t){return this.setImageMaskEnable(this.backImage,i,t),this.setImageMaskEnable(this.frontImage,i,t),this.setCellImagesMaskEnable(i,t),this}};var nL=function(i,t){t===void 0&&(t=",");var s;return i==="__BASE"?s=function(f,C){return`${f}${t}${C}`}:s=function(f,C){return`${i}_${f}${t}${C}`},s},rL=function(i,t,s,f,C,S){s==null&&(s="__BASE"),S||(S=nL(s,S));for(var r=i.sys.textures.get(t),y=typeof s=="object"?s:r.get(s),e=y.width,u=y.height,m,d,l,h=e/f,n=u/C,a=0,c=0,o=0;o<C;o++){a=0;for(var v=0;v<f;v++)l=S(v,o),m=a+y.cutX,d=c+y.cutY,r.add(l,0,m,d,h,n),a+=h;c+=n}return{getFrameNameCallback:S,cellWidth:h,cellHeight:n,columns:f,rows:C}};const xi=Phaser.Utils.Objects.GetValue,aL=Phaser.GameObjects.Image,oL=Phaser.Utils.Objects.IsPlainObject,hL=Phaser.Math.RotateAround;var lL=function(i,t,s,f){oL(t)&&(f=t,t=xi(f,"columns",1),s=xi(f,"rows",1));var C=xi(f,"onCreateImage");if(!C){var S=xi(f,"ImageClass",aL);C=function(I,B,z){return new S(I,0,0,B,z)}}for(var r=xi(f,"originX",.5),y=xi(f,"originY",.5),e=xi(f,"add",!0),u=xi(f,"align",e),m=xi(f,"objectPool",void 0),d=i.scene,l=i.texture,h=i.frame,n=rL(d,l,h,t,s),a=n.getFrameNameCallback,c=i.scaleX,o=i.scaleY,v=i.rotation,g=i.getTopLeft(),p=g.x,x=g.y,T=[],E=n.cellWidth*c,M=n.cellHeight*o,P=0;P<s;P++)for(var w=0;w<t;w++){var R,A=a(w,P);m&&m.length>0?R=m.pop().setTexture(l,A):R=C(d,l,A),e&&d.add.existing(R);var O=p+E*w,F=x+M*P,b=O+r*E,D=F+y*M;u&&(R.setOrigin(r,y).setPosition(b,D).setScale(c,o).setRotation(v),hL(R,p,x,v)),T.push(R)}return T};const uL={gridCutImage(i,t,s,f){f===void 0&&(f={}),f.objectPool=this.imagesPool;for(var C=lL(i,t,s,f),S,r=0,y=C.length;r<y;r++)S=C[r],S.setVisible(!0),this.add(S);return this.cellImages=C,this.setChildLocalVisible(i,!1),C},gridCutCurrentImage(i,t,s){return this.gridCutImage(this.currentImage,i,t,s)},gridCutNextImage(i,t,s){return this.gridCutImage(this.nextImage,i,t,s)},getCellImages(){return this.cellImages},freeCellImages(){if(this.cellImages.length===0)return this;for(var i=this.cellImages[0].texture,t=this.cellImages,s,f,C=0,S=t.length;C<S;C++)s=t[C],this.setChildLocalAlpha(s,1).setChildLocalScale(s,1).setChildLocalVisible(s,!1),s.clearMask(),f=s.frame.name,s.setTexture(),i.remove(f);return this.imagesPool.push(...t),t.length=0,this}},Cm={setFlipX(i){return this.flipX=i,this},setFlipY(i){return this.flipY=i,this},toggleFlipX(){return this.flipX=!this.flipX,this},toggleFlipY(){return this.flipY=!this.flipY,this},setFlip(i,t){return this.flipX=i,this.flipY=t,this},resetFlip(){return this.flipX=!1,this.flipY=!1,this}};var Sm={};Object.assign(Sm,QF,tL,sL,uL,Cm);var dL=function(i,t,s,f){},fL=function(i,t,s,f){i.setChildLocalAlpha(t,1-f).setChildLocalAlpha(s,f)},cL=function(i,t,s,f){i.setChildLocalAlpha(t,1)};const rv=Phaser.Utils.Objects.IsPlainObject,Zt=Phaser.Utils.Objects.GetValue,vL=Phaser.Math.Clamp;class rd extends Oe{constructor(t,s,f,C,S,r){rv(s)?(r=s,s=Zt(r,"x",0),f=Zt(r,"y",0),C=Zt(r,"key",void 0),S=Zt(r,"frame",void 0)):rv(S)&&(r=S,S=void 0);var y=Zt(r,"back",void 0),e=Zt(r,"front",void 0);y||(y=t.add.image(s,f,C,S)),e||(e=t.add.image(s,f,C,S));var u=Zt(r,"width",e.width),m=Zt(r,"height",e.height);super(t,s,f,u,m),this.type="rexTransitionImage",y.setVisible(!1),this.addMultiple([y,e]),this.backImage=y,this.frontImage=e,this.maskGameObject=void 0,this.cellImages=[],this.imagesPool=[];var d=Zt(r,"onStart",void 0),l=Zt(r,"onProgress",void 0),h=Zt(r,"onComplete",void 0),n=Zt(r,"dir",0);d===void 0&&l===void 0&&h===void 0&&(d=dL,l=fL,h=cL,n=0),this.setTransitionStartCallback(d,Zt(r,"onStartScope",void 0)).setTransitionProgressCallback(l,Zt(r,"onProgressScope",void 0)).setTransitionCompleteCallback(h,Zt(r,"onCompleteScope",void 0)).setTransitionDirection(n).setDuration(Zt(r,"duration",1e3)).setEaseFunction(Zt(r,"ease","Linear"));var a=Zt(r,"mask",void 0);a&&this.setMaskGameObject(a),this.setMaskEnable(!1),this.ignoreCompleteEvent=!1}destroy(t){this.scene&&(this.childrenMask&&(this.childrenMask.destroy(),this.childrenMask=void 0),this.backImage=void 0,this.frontImage=void 0,this.maskGameObject=void 0,this.cellImages.length=0,this.imagesPool.length=0,super.destroy(t),this.onStartCallback=void 0,this.onStartCallbackScope=void 0,this.onProgressCallback=void 0,this.onProgressCallbackScope=void 0,this.onCompleteCallback=void 0,this.onCompleteCallbackScope=void 0,this.easeValueTask=void 0)}get currentImage(){return this.dir===0?this.frontImage:this.backImage}get nextImage(){return this.dir===0?this.backImage:this.frontImage}get texture(){return this.nextImage.texture}get frame(){return this.nextImage.frame}get flipX(){return this._flipX}set flipX(t){this._flipX!==t&&(this._flipX=t,this.backImage.setFlipX(t),this.frontImage.setFlipX(t))}get flipY(){return this._flipY}set flipY(t){this._flipY!==t&&(this._flipY=t,this.backImage.setFlipY(t),this.frontImage.setFlipY(t))}get t(){return this._t}set t(t){if(t=vL(t,0,1),this._t!==t){this._t=t;var s=this.currentImage,f=this.nextImage;if(t===0&&(this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!0),Xh(this.onStartCallback,this.onStartCallbackScope,this,s,f,t)),Xh(this.onProgressCallback,this.onProgressCallbackScope,this,s,f,t),t===1){Xh(this.onCompleteCallback,this.onCompleteCallbackScope,this,s,f,t);var C=f.texture.key,S=f.frame.name;this.frontImage.setTexture(C,S),this.backImage.setTexture(C,S),this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!1).setMaskEnable(!1).freeCellImages()}t===1&&!this.ignoreCompleteEvent&&this.emit("complete")}}setT(t){return this.t=t,this}get isRunning(){return this.easeValueTask?this.easeValueTask.isRunning:!1}setOrigin(t,s){return super.setOrigin(t,s),this.backImage.setOrigin(t,s),this.frontImage.setOrigin(t,s),this.maskGameObject&&this.maskGameObject.setOrigin(t,s),this}setTexture(t,s){return this.frontImage.setTexture(t,s),this.backImage.setTexture(t,s).setVisible(!1),this}}var Xh=function(i,t,s,f,C,S){i&&(t?i.call(t,s,f,C,S):i(s,f,C,S))};Object.assign(rd.prototype,Sm);st.register("transitionImage",function(i,t,s,f,C){var S=new rd(this.scene,i,t,s,f,C);return this.scene.add.existing(S),S});it(window,"RexPlugins.UI.TransitionImage",rd);var pL=function(i,t,s){if(s===void 0?s={}:s===!0&&(s=gL),i.width<=t.width&&i.height<=t.height)return s.width=i.width,s.height=i.height,s;var f=i.width/i.height;s.width=Math.min(i.width,t.width),s.height=Math.min(i.height,t.height);var C=s.width/s.height;return C<f?s.height=s.width/f:C>f&&(s.width=s.height*f),s},gL={};const av=Phaser.Utils.Objects.IsPlainObject,Ss=Phaser.Utils.Objects.GetValue;class ad extends Oe{constructor(t,s,f,C,S,r){av(s)?(r=s,s=Ss(r,"x",0),f=Ss(r,"y",0),C=Ss(r,"key",void 0),S=Ss(r,"frame",void 0)):av(S)&&(r=S,S=void 0);var y=Ss(r,"image");y?y.setPosition(s,f).setOrigin(.5):(y=t.add.image(s,f,C,S),C===void 0&&y.setVisible(!1)),super(t,s,f,1,1),this.type="rexImageBox",this.add(y),this.image=y;var e=Ss(r,"width",y.width),u=Ss(r,"height",y.height);this.resize(e,u)}get texture(){return this.image.texture}get frame(){return this.image.frame}get flipX(){return this._flipX}set flipX(t){this._flipX!==t&&(this._flipX=t,this.image.setFlipX(t))}get flipY(){return this._flipY}set flipY(t){this._flipY!==t&&(this._flipY=t,this.image.setFlipY(t))}scaleImage(){var t=this.image,s=pL(t,{width:this.width,height:this.height},!0);return t.setDisplaySize(s.width,s.height),this.resetChildScaleState(t),this}resize(t,s){return super.resize(t,s),this.scaleImage(),this}setTexture(t,s){var f=this.image;return f.setTexture(t,s),t!==null?(this.setChildVisible(f,!0),this.scaleImage()):this.setChildVisible(f,!1),this}}Object.assign(ad.prototype,Cm);st.register("imageBox",function(i,t,s,f,C){var S=new ad(this.scene,i,t,s,f,C);return this.scene.add.existing(S),S});it(window,"RexPlugins.UI.ImageBox",ad);st.register("fullWindowRectangle",function(i,t){var s=new Zu(this.scene,i,t);return this.scene.add.existing(s),s});it(window,"RexPlugins.UI.FullWindowRectangle",Zu);st.register("cover",function(i){var t=new Ju(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.Cover",Ju);var od=function(i,t){if(this.scene.sys.scale.autoRound&&(i=Math.floor(i),t=Math.floor(t)),this.width===i&&this.height===t)return this;var s=this.node.style;return s.width=`${i}px`,s.height=`${t}px`,this.updateSize(),this};const ov={id:["id",void 0],text:["value",void 0],maxLength:["maxLength",void 0],minLength:["minLength",void 0],placeholder:["placeholder",void 0],tooltip:["title",void 0],readOnly:["readOnly",!1],spellCheck:["spellcheck",!1],autoComplete:["autocomplete","off"]},hv={align:["textAlign",void 0],paddingLeft:["padding-left",void 0],paddingRight:["padding-right",void 0],paddingTop:["padding-top",void 0],paddingBottom:["padding-bottom",void 0],fontFamily:["fontFamily",void 0],fontSize:["font-size",void 0],color:["color","#ffffff"],backgroundColor:["backgroundColor","transparent"],border:["border",0],borderColor:["borderColor","transparent"],outline:["outline","none"],direction:["direction",void 0]},mL={input:"textchange",click:"click",dblclick:"dblclick",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",keydown:"keydown",keyup:"keyup",keypress:"keypress",compositionstart:"compositionStart",compositionend:"compositionEnd",compositionupdate:"compositionUpdate",focus:"focus",blur:"blur",select:"select"},lv=Phaser.Utils.Objects.GetValue;var Pm=function(i,t,s,f){var C=lv(f,"preventDefault",!1),S=lv(f,"preTest");for(let r in s)t.addEventListener(r,function(y){(!S||S(i,r))&&i.emit(s[r],i,y),C&&y.preventDefault()})};const xL=Phaser.GameObjects.DOMElement,uv=Phaser.Utils.Objects.IsPlainObject,yi=Phaser.Utils.Objects.GetValue;class Oo extends xL{constructor(t,s,f,C,S,r){uv(s)?(r=s,s=yi(r,"x",0),f=yi(r,"y",0),C=yi(r,"width",0),S=yi(r,"height",0)):uv(C)&&(r=C,C=yi(r,"width",0),S=yi(r,"height",0)),r===void 0&&(r={});var y,e=yi(r,"type","text");e==="textarea"?(y=document.createElement("textarea"),y.style.resize="none"):(y=document.createElement("input"),y.type=e),ka(ov,r,y);var u=yi(r,"style",void 0);u=ka(hv,r,u);var m=y.style;for(var d in r)d in ov||d in hv||d in m&&(u[d]=r[d]);u["box-sizing"]="border-box",super(t,s,f,y,u),this.type="rexInputText",this.resize(C,S),Pm(this,y,mL),G0(y),yi(r,"selectAll",!1)&&this.selectAll(),this._isFocused=!1,this.on("focus",function(){this._isFocused=!0},this).on("blur",function(){this._isFocused=!1},this)}get text(){return this.node.value}set text(t){this.node.value=t}setText(t){return this.text=t,this}get maxLength(){return this.node.maxLength}set maxLength(t){this.node.maxLength=t}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.node.minLength}set minLength(t){this.node.minLength=t}setMinLength(t){return this.minLength=t,this}get placeholder(){return this.node.placeholder}set placeholder(t){this.node.placeholder=t}setPlaceholder(t){return this.placeholder=t,this}selectText(t,s){return t===void 0?this.node.select():this.node.setSelectionRange(t,s),this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node.selectionStart}get selectionEnd(){return this.node.selectionEnd}get selectedText(){var t=this.node;return t.value.substring(t.selectionStart,t.selectionEnd)}get cursorPosition(){return this.node.selectionStart}set cursorPosition(t){this.node.setSelectionRange(t,t)}setCursorPosition(t){return t===void 0?t=this.text.length:t<0&&(t=this.text.length+t),this.cursorPosition=t,this}get tooltip(){return this.node.title}set tooltip(t){this.node.title=t}setTooltip(t){return this.tooltip=t,this}setTextChangedCallback(t){return this.onTextChanged=t,this}get readOnly(){return this.node.readOnly}set readOnly(t){this.node.readOnly=t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}get spellCheck(){return this.node.spellcheck}set spellCheck(t){this.node.spellcheck=t}setSpellCheck(t){return this.spellCheck=t,this}get fontColor(){return this.node.style.color}set fontColor(t){this.node.style.color=t}setFontColor(t){return this.fontColor=t,this}setStyle(t,s){return this.node.style[t]=s,this}getStyle(t){return this.node.style[t]}scrollToBottom(){return this.node.scrollTop=this.node.scrollHeight,this}setEnabled(t){return t===void 0&&(t=!0),this.node.disabled=!t,this}setBlur(){return this.node.blur(),this}setFocus(){return this.node.focus(),this}get isFocused(){return this._isFocused}}var yL={resize:od};Object.assign(Oo.prototype,yL);st.register("inputText",function(i){var t=new Oo(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.InputText",Oo);const dv=Phaser.Utils.Objects.GetValue;var TL=function(i){var t=document.createElement("input");t.type="file";var s=dv(i,"accept",""),f=dv(i,"multiple",!1);return t.setAttribute("accept",s),f?t.setAttribute("multiple",""):t.removeAttribute("multiple"),t},Em=function(i,t){return i===void 0&&(i=0),new Promise(function(s,f){setTimeout(function(){s(t)},i)})},Mm=function({game:i,fileInput:t,closeDelay:s}){return uo(Mn(i).events,"focus").then(function(){return Em(s)}).then(function(){var f={files:t.files};return Promise.resolve(f)})};const CL=Phaser.Utils.Objects.GetValue;var SL=function(i,t){var s=CL(t,"closeDelay",200),f=TL(t);return f.click(),Mm({game:i,fileInput:f,closeDelay:s}).then(function(C){return f.remove(),Promise.resolve(C)})},wm=function(i){return this.setOrigin(i.originX,i.originY),this.setPosition(i.x,i.y),this.resize(i.displayWidth,i.displayHeight),this},PL=function(i,t,s){if(s===void 0)switch(t){case"image":case"svg":s="textures";break;case"animation":s="json";break;case"tilemapTiledJSON":case"tilemapCSV":s="tilemap";break;case"glsl":s="shader";break;default:s=t;break}i=Mn(i);var f;return s==="textures"?f=i.textures:f=i.cache[s],f},Rm=function(i,t,s,f,C,S){if(!(C===null||C===!1))if(_i(C))C();else{var r=PL(i,s,C);r.exists(f)&&r.remove(f)}var y=i.load;if(S&&y.once(`filecomplete-${s}-${f}`,function(u,m,d){S(d)}),_i(t))t();else{var e=window.URL.createObjectURL(t);y[s](f,e)}y.start()},EL=function(i,t,s,f,C){var S=this.scene;return Rm(S,i,t,s,f,C),this},ML=function(i,t,s,f){var C=this.scene;return new Promise(function(S,r){var y=function(e){S(e)};Rm(C,i,t,s,f,y)})};const Am={loadFile:EL,loadFilePromise:ML},wL=Phaser.GameObjects.DOMElement,fv=Phaser.Utils.Objects.IsPlainObject,ni=Phaser.Utils.Objects.GetValue;class bo extends wL{constructor(t,s,f,C,S,r){fv(s)?(r=s,s=ni(r,"x",0),f=ni(r,"y",0),C=ni(r,"width",0),S=ni(r,"height",0)):fv(C)&&(r=C,C=ni(r,"width",0),S=ni(r,"height",0));var y=document.createElement("input");y.type="file";var e=y.style;e.display="none";var u=document.createElement("label");u.appendChild(y);var m=ni(r,"style",void 0);super(t,s,f,u,m),this.type="rexFileChooser",this.resetFromJSON(r),this.resize(C,S);var d=this;y.onchange=function(){d.emit("change",d)},this.setCloseDelay(ni(r,"closeDelay",200)),y.onclick=function(){Mm({game:t,fileInput:y,closeDelay:d.closeDelay}).then(function(){d.emit("select",d)})}}resetFromJSON(t){return this.setAccept(ni(t,"accept","")),this.setMultiple(ni(t,"multiple",!1)),this}setAccept(t){return t===void 0&&(t=""),this.fileInput.setAttribute("accept",t),this}setMultiple(t){return t===void 0&&(t=!0),t?this.fileInput.setAttribute("multiple",""):this.fileInput.removeAttribute("multiple"),this}setCloseDelay(t){return t===void 0&&(t=200),this.closeDelay=t,this}get fileInput(){return this.node.children[0]}open(){return this.fileInput.click(),this}get files(){return this.fileInput.files}}var RL={resize:od,syncTo:wm};Object.assign(bo.prototype,RL,Am);st.register("fileChooser",function(i){var t=new bo(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.FileChooser",bo);const AL={setDropEnable(i){return i===void 0&&(i=!0),this.dropEnable=i,this},toggleDropEnable(){return this.dropEnable=!this.dropEnable,this}},OL={addFilter(i,t){return this.filters||(this.filters={}),this.filters[i]=t,this},addFilters(i){this.filters||(this.filters={});for(var t in i)this.filters[t]=i[t];return this}};var Om={resize:od,syncTo:wm};Object.assign(Om,AL,OL,Am);const bL={dragenter:"dragenter",dragleave:"dragleave",dragover:"dragover",drop:"drop"},FL=Phaser.GameObjects.DOMElement,cv=Phaser.Utils.Objects.IsPlainObject,Ti=Phaser.Utils.Objects.GetValue;class hd extends FL{constructor(t,s,f,C,S,r){cv(s)?(r=s,s=Ti(r,"x",0),f=Ti(r,"y",0),C=Ti(r,"width",0),S=Ti(r,"height",0)):cv(C)&&(r=C,C=Ti(r,"width",0),S=Ti(r,"height",0)),r===void 0&&(r={});var y=document.createElement("div"),e=Ti(r,"style",void 0);super(t,s,f,y,e),this.type="rexFileDropZone",this.resize(C,S),this._files=[],this.setDropEnable(Ti(r,"dropEnable",!0));var u=Ti(r,"filters");u&&this.addFilters(u),Pm(this,y,bL,{preventDefault:!0,preTest(m){return m.dropEnable}}),this.on("drop",function(m,d){this._files=d.dataTransfer.files;var l=this._files;if(l&&this.filters)for(var h in this.filters){for(var n=this.filters[h],a=[],c=0,o=l.length;c<o;c++){var v=l[c];n(v,l)&&a.push(v)}a.length>0&&this.emit(`drop.${h}`,a)}},this)}get files(){return this._files}}Object.assign(hd.prototype,Om);st.register("fileDropZone",function(i){var t=new hd(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.FileDropZone",hd);var LL=function(i){if(!window.Chart){var t=`Can not find chartjs! Load chartjs in preload stage.
scene.load.script('chartjs', 'https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.8.0/Chart.min.js');`;return console.error(t),this}return this.chart&&this.chart.destroy(),this.chart=new Chart(this.context,DL(this,i)),this},DL=function(i,t){t===void 0&&(t={}),t.options===void 0&&(t.options={});var s=t.options;s.responsive=!1,s.maintainAspectRatio=!1,s.hasOwnProperty("devicePixelRatio")||(s.devicePixelRatio=1);var f=!1;s.animation===void 0?s.animation={}:s.animation===!1&&(f=!0,s.animation={});var C=s.animation;f&&(C.duration=0);var S=C.onProgress;C.onProgress=function(y){S&&S(y),i.needRedraw()};var r=C.onComplete;return C.onComplete=function(y){r&&r(y),i.needRedraw()},t},IL=function(i){if(this.chart!==void 0)if(typeof i=="string"){for(var t=this.chart.data.datasets,s,f=0,C=t.length;f<C;f++)if(s=t[f],s.label===i)return s}else return this.chart.data.datasets[i]},BL=function(i,t){var s=this.getChartDataset(i);if(s!==void 0){if(typeof t=="string"){var f=this.chart.data.labels;if(t=f.indexOf(t),t===-1)return}return s.data[t]}},GL=function(i,t,s){if(this.chart===void 0)return this;var f=this.getChartDataset(i);if(typeof t=="string"){var C=this.chart.data.labels;if(t=C.indexOf(t),t===-1)return this}return f.data[t]=s,this},NL=function(){return this.chart===void 0?this:(this.chart.update(),this)};let ld=class extends Gs{constructor(t,s,f,C,S,r){super(t,s,f,C,S),this.type="rexChart",this.chart=void 0,r!==void 0&&this.setChart(r)}destroy(t){this.scene&&(this.chart&&(this.chart.destroy(),this.chart=void 0),super.destroy(t))}resize(t,s){if(t===this.width&&s===this.height)return this;if(super.resize(t,s),this.chart){var f=this.chart;f.height=this.canvas.height,f.width=this.canvas.width,f.aspectRatio=f.height?f.width/f.height:null,f.update()}return this}};var VL={setChart:LL,getChartDataset:IL,getChartData:BL,setChartData:GL,updateChart:NL};Object.assign(ld.prototype,VL);st.register("chart",function(i,t,s,f,C){var S=new ld(this.scene,i,t,s,f,C);return this.scene.add.existing(S),S});it(window,"RexPlugins.UI.Chart",ld);st.register("container",function(i,t,s,f,C){var S=new Oe(this.scene,i,t,s,f,C);return this.scene.add.existing(S),S});it(window,"RexPlugins.UI.Container",Oe);var zL=function(i){if(this.rexSizer.hidden)return 0;i===void 0&&(i=!0);var t=0,s=this.sizerChildren,f,C,S;if(this.orientation===0)for(var r=this.space.item,y=!0,e=0,u=s.length;e<u;e++)f=s[e],!f.rexSizer.hidden&&(f.rexSizer.proportion===0||i?S=this.getChildWidth(f):S=0,C=f.rexSizer.padding,S+=C.left+C.right,y?y=!1:S+=r,t+=S);else for(var e=0,u=s.length;e<u;e++)f=s[e],f.hasOwnProperty("rexSizer")&&(f.rexSizer.hidden||(C=f.rexSizer.padding,S=this.getChildWidth(f)+C.left+C.right,t=Math.max(S,t)));return t+this.space.left+this.space.right},UL=function(i){if(this.rexSizer.hidden)return 0;i===void 0&&(i=!0);var t=0,s=this.sizerChildren,f,C,S;if(this.orientation===0)for(var r=0,y=s.length;r<y;r++)f=s[r],!f.rexSizer.hidden&&(C=f.rexSizer.padding,S=this.getChildHeight(f)+C.top+C.bottom,t=Math.max(S,t));else for(var e=this.space.item,u=!0,r=0,y=s.length;r<y;r++)f=s[r],f.hasOwnProperty("rexSizer")&&(f.rexSizer.hidden||(f.rexSizer.proportion===0||i?S=this.getChildHeight(f):S=0,C=f.rexSizer.padding,S+=C.top+C.bottom,u?u=!1:S+=e,t+=S));return t+this.space.top+this.space.bottom},YL=function(i,t){t===void 0&&(t=this.width);var s,f=i.rexSizer,C=f.padding;if(this.orientation===0)f.proportion>0&&this.proportionLength>0&&(s=f.proportion*this.proportionLength);else if(f.expand){var S=t-this.space.left-this.space.right;s=S-C.left-C.right}return s},kL=function(i,t){t===void 0&&(t=this.height);var s,f=i.rexSizer,C=f.padding;if(this.orientation===0){if(f.expand){var S=t-this.space.top-this.space.bottom;s=S-C.top-C.bottom}}else f.proportion>0&&this.proportionLength>0&&(s=f.proportion*this.proportionLength);return s},XL=function(i){i===void 0&&(i=[]);for(var t=this.sizerChildren,s,f=0,C=t.length;f<C;f++)s=t[f],s.isRexSizer&&i.push(s);return i},WL=function(){this.hasRatioFitChild=!1;for(var i=this.sizerChildren,t=0,s=i.length;t<s;t++){var f=i[t];f.rexSizer.hidden||f.rexSizer.fitRatio&&(qe(f,1,1),this.hasRatioFitChild=!0)}return this._childrenProportion=void 0,this.proportionLength=void 0,br.call(this),this},HL=function(i,t){if(this.hasRatioFitChild){var s;this.orientation===0?s=t-this.getInnerPadding("top")-this.getInnerPadding("bottom"):i-this.getInnerPadding("left")-this.getInnerPadding("right");for(var f=this.sizerChildren,C,S,r=0,y=f.length;r<y;r++){var e=f[r];if(!e.rexSizer.hidden){var u=e.rexSizer.fitRatio;u&&(this.orientation===0?(S=s-this.getChildOuterPadding(e,"top")-this.getChildOuterPadding(e,"bottom"),C=S*u):(C=s-this.getChildOuterPadding(e,"top")-this.getChildOuterPadding(e,"bottom"),S=C/u),qe(e,C,S),e.isRexSizer&&e.setMinSize(C,S))}}this.proportionLength=void 0,this._childrenWidth=void 0,this.resolveWidth(i,!0)}};const $L=Phaser.Math.Wrap;var KL=function(){for(var i=this.sizerChildren,t,s,f,C=this.innerLeft,S=this.innerTop,r=this.innerWidth,y=this.innerHeight,e=C,u=S,m,d,l,h,n,a,c,o=this.startChildIndex,v=0,g=i.length;v<g;v++)o===0?c=v:c=$L(v+o,0,g),this.rtl&&(c=g-c-1),t=i[c],!t.rexSizer.hidden&&(s=t.rexSizer,f=s.padding,Fr.call(this,t),t.isRexSpace?(n=0,a=0):(n=this.getExpandedChildWidth(t),a=this.getExpandedChildHeight(t)),t.isRexSizer?(t.runLayout(this,n,a),sd(t,this)):qe(t,n,a),n===void 0&&(n=Mt(t)),a===void 0&&(a=St(t)),this.orientation===0?(m=e+f.left,s.proportion===0||this.proportionLength===0?l=n:l=s.proportion*this.proportionLength,d=u+f.top,h=y-f.top-f.bottom):(m=e+f.left,l=r-f.left-f.right,d=u+f.top,s.proportion===0||this.proportionLength===0?h=a:h=s.proportion*this.proportionLength),Lr.call(this,t,m,d,l,h,s.align),this.orientation===0?e+=l+f.left+f.right+this.space.item:u+=h+f.top+f.bottom+this.space.item)},jL=function(t){var t=ku.call(this,t);if(this.proportionLength===void 0&&this.orientation===0){var s=t-this.childrenWidth;s>0?(s=t-this.getChildrenWidth(!1),this.proportionLength=s/this.childrenProportion):this.proportionLength=0}return t},ZL=function(t){var t=Xu.call(this,t);if(this.proportionLength===void 0&&this.orientation===1){var s=t-this.childrenHeight;s>0?(s=t-this.getChildrenHeight(!1),this.proportionLength=s/this.childrenProportion):this.proportionLength=0}return t};const JL=Phaser.GameObjects.Zone;class Fo extends JL{constructor(t){super(t,0,0,1,1),this.isRexSpace=!0}}var QL=function(i,t){var s=this.sizerChildren;if(s.length===0)return-1;for(var f=-1,C=1/0,S=0,r=s.length;S<r;S++){var y=s[S],e;this.orientation===0?e=Math.abs(y.left-i):e=Math.abs(y.top-t),C>e&&(C=e,f=S)}var y=s[s.length-1],e;return this.orientation===0?e=Math.abs(y.right-i):e=Math.abs(y.bottom-t),C>e&&(C=e,f=S+1),f};const bm=Phaser.Utils.Objects.IsPlainObject,Ci=Phaser.Utils.Objects.GetValue,vv=Phaser.Display.Align.CENTER,qL={min:0,full:-1};var Wh=function(i,t,s,f,C,S,r,y,e,u){Rr.call(this,i);var m=i.isRexSpace,d=typeof t;if(t===null)return this;if(d!=="number"){if(d==="string")t=qL[t];else if(bm(t)){var l=t;t=Ci(l,"proportion",void 0),s=Ci(l,"align",vv),f=Ci(l,"padding",0),C=Ci(l,"expand",!1),S=Ci(l,"key",void 0),r=Ci(l,"index",void 0),i.isRexSizer||(y=Ci(l,"minWidth",void 0),e=Ci(l,"minHeight",void 0)),u=Ci(l,"fitRatio",0)}}typeof s=="string"&&(s=In[s]),t===void 0&&(t=m?1:0),s===void 0&&(s=vv),f===void 0&&(f=0),C===void 0&&(C=!1),y===void 0&&(m?y=0:i.isRexSizer||(y=i._minWidth)),e===void 0&&(m?e=0:i.isRexSizer||(e=i._minHeight)),u===void 0&&(u=0);var l=this.getSizerConfig(i);return l.proportion=t,l.align=s,l.padding=Bn(f),l.expand=C,l.fitRatio=t===0?u:0,r===void 0||r>=this.sizerChildren.length?this.sizerChildren.push(i):this.sizerChildren.splice(r,0,i),i.isRexSizer||(t>0&&(this.orientation===0?i.minWidth=y===void 0?Mt(i):y:i.minHeight=e===void 0?St(i):e),C&&(this.orientation===0?i.minHeight=e:i.minWidth=y)),S!==void 0&&this.addChildrenMap(S,i),this};const _L={add:Wh,addSpace(i){return this.insertSpace(void 0,i),this},insertSpace(i,t){return t===void 0&&(t=1),Wh.call(this,new Fo(this.scene),{proportion:t,minWidth:0,minHeight:0,index:i}),this},insert(i,t,s,f,C,S,r,y){return bm(s)&&(s.index=i),Wh.call(this,t,s,f,C,S,r,i,y),this},insertAtPosition(i,t,s,f,C,S,r,y,e){var u=QL.call(this,i,t);return u===-1&&(u=void 0),this.insert(u,s,f,C,S,r,y,e),this}},t5=Phaser.Utils.Array.Remove,e5={remove(i,t){return this.getParentSizer(i)!==this?this:(t5(this.sizerChildren,i),Ar.call(this,i,t),this)},removeAll(i){for(var t=this.sizerChildren.length-1;t>=0;t--)this.remove(this.sizerChildren[t],i);return this},clear(i){return this.sizerChildren.length=0,Mo.call(this,i),this}},i5={getChildAlign(i){return this.getSizerConfig(i).align},setChildAlign(i,t){return typeof t=="string"&&(t=In[t]),this.getSizerConfig(i).align=t,this}},s5={getChildProportion(i){return this.getSizerConfig(i).proportion},setChildProportion(i,t){return this.getSizerConfig(i).proportion=t,this}},n5={getChildExpand(i){return this.getSizerConfig(i).expand},setChildExpand(i,t){return this.getSizerConfig(i).expand=t,this}};var Fm={getChildrenWidth:zL,getChildrenHeight:UL,getExpandedChildWidth:YL,getExpandedChildHeight:kL,getChildrenSizers:XL,preLayout:WL,postResolveSize:HL,layoutChildren:KL,resolveWidth:jL,resolveHeight:ZL};Object.assign(Fm,_L,e5,i5,s5,n5);var r5=function(){for(var i=0,t=this.sizerChildren,s,f,C=0,S=t.length;C<S;C++)s=t[C],!s.rexSizer.hidden&&(f=s.rexSizer.proportion,f>0&&(i+=f));return i},a5={x:0,h:0,horizontal:0,"left-to-right":0,y:1,v:1,vertical:1,"top-to-bottom":1},Lo=function(i){return typeof i=="string"&&(i=a5[i]),i};const Hh=Phaser.Utils.Objects.IsPlainObject,De=Phaser.Utils.Objects.GetValue;class yt extends Vs{constructor(t,s,f,C,S,r,y){Hh(s)?(y=s,s=De(y,"x",0),f=De(y,"y",0),C=De(y,"width",void 0),S=De(y,"height",void 0),r=De(y,"orientation",0)):Hh(C)?(y=C,C=De(y,"width",void 0),S=De(y,"height",void 0),r=De(y,"orientation",0)):Hh(r)&&(y=r,r=De(y,"orientation",0)),r===void 0&&(r=0),super(t,s,f,C,S,y),this.type="rexSizer",this.sizerChildren=[],this.setOrientation(r),this.setItemSpacing(De(y,"space.item",0)),this.setStartChildIndex(De(y,"startChildIndex",0)),this.setRTL(De(y,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(t){return this.orientation=Lo(t),this}setItemSpacing(t){return this.space.item=t,this}setStartChildIndex(t){return this.startChildIndex=t,this}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get childrenProportion(){return this._childrenProportion===void 0&&(this._childrenProportion=r5.call(this)),this._childrenProportion}}Object.assign(yt.prototype,Fm);st.register("sizer",function(i,t,s,f,C,S){var r=new yt(this.scene,i,t,s,f,C,S);return this.scene.add.existing(r),r});it(window,"RexPlugins.UI.Sizer",yt);var Lm=function(){return Array.prototype.reduce.call(arguments,o5,0)},o5=function(i,t){return i+t},h5=function(i){if(this.rexSizer.hidden)return 0;i===void 0&&(i=!0);for(var t=0,s,f=this.sizerChildren,C,S,r,y,e=0;e<this.columnCount;e++){if(y=this.columnProportions[e],s=0,y===0||i){for(var u=0;u<this.rowCount;u++)C=f[u*this.columnCount+e],C&&(C.rexSizer.hidden||(S=C.rexSizer.padding,r=this.getChildWidth(C)+S.left+S.right,s=Math.max(s,r)));t+=s}this.columnWidth[e]=s}var m=this.space,d=Math.max(m.indentLeftOdd,m.indentLeftEven);return t+Lm(m.left,d,...m.column,m.right)},l5=function(i){if(this.rexSizer.hidden)return 0;i===void 0&&(i=!0);for(var t=0,s,f=this.sizerChildren,C,S,r,y,e=0;e<this.rowCount;e++){if(y=this.rowProportions[e],s=0,y===0||i){for(var u=0;u<this.columnCount;u++)C=f[e*this.columnCount+u],C&&(C.rexSizer.hidden||(r=C.isRexSizer?Math.max(C.minHeight,C.childrenHeight):C.hasOwnProperty("minHeight")?C.minHeight:St(C),S=C.rexSizer.padding,r+=S.top+S.bottom,s=Math.max(s,r)));t+=s}this.rowHeight[e]=s}var m=this.space,d=Math.max(m.indentTopOdd,m.indentTopEven);return t+Lm(m.top,d,...m.row,m.bottom)},u5=function(i,t){var s,f=i.rexSizer;if(f.expand){var C=f.padding;s=t-C.left-C.right}return s},d5=function(i,t){var s,f=i.rexSizer;if(f.expand){var C=f.padding;s=t-C.top-C.bottom}return s},f5=function(i){i===void 0&&(i=[]);for(var t=this.sizerChildren,s,f=0,C=t.length;f<C;f++)s=t[f],s&&s.isRexSizer&&i.push(s);return i},c5=function(){return this._totalColumnProportions=void 0,this._totalRowProportions=void 0,this.proportionWidthLength=void 0,this.proportionHeightLength=void 0,br.call(this),this},v5=function(){for(var i,t,s,f=this.innerLeft,C=this.innerTop,S,r=C,y,e,u,m,d,l,h=this.space.column,n=this.space.row,a=this.space.indentLeftOdd,c=this.space.indentLeftEven,o=this.space.indentTopOdd,v=this.space.indentTopEven,g,p,x,T,E=0;E<this.rowCount;E++){p=this.getRowHeight(E),x=E%2?c:a,S=f+x;for(var M=0;M<this.columnCount;M++){if(g=this.getColumnWidth(M),i=this.getChildAt(M,E),!i||i.rexSizer.hidden){S+=g+h[M];continue}Fr.call(this,i),d=this.getExpandedChildWidth(i,g),l=this.getExpandedChildHeight(i,p),i.isRexSizer?(i.runLayout(this,d,l),sd(i,this)):qe(i,d,l),t=i.rexSizer,s=t.padding,y=S+s.left,u=g-s.left-s.right,T=M%2?v:o,e=r+T+s.top,m=p-s.top-s.bottom,Lr.call(this,i,y,e,u,m,t.align),S+=g+h[M]}r+=p+n[E]}},p5=function(t){var t=ku.call(this,t);if(this.proportionWidthLength===void 0){var s=this.totalColumnProportions;if(s>0){var f=t-this.getChildrenWidth(!1);f>=0&&(this.proportionWidthLength=f/s)}else this.proportionWidthLength=0}return t},g5=function(t){var t=Xu.call(this,t);if(this.proportionHeightLength===void 0){var s=this.totalRowProportions;if(s>0){var f=t-this.getChildrenHeight(!1);f>=0&&(this.proportionHeightLength=f/s)}else this.proportionHeightLength=0}return t},m5=function(i){var t,s,f;for(var C in this.sizerChildren)t=this.sizerChildren[C],t&&t.isRexSizer&&!t.ignoreLayout&&(f=this.getColumnWidth(parseInt(C)%this.columnCount),s=this.getExpandedChildWidth(t,f),s=t.resolveWidth(s),t.resolveChildrenWidth(s))},x5=function(i){var t,s,f;for(var C in this.sizerChildren)t=this.sizerChildren[C],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runWidthWrap)&&(f=this.getColumnWidth(parseInt(C)%this.columnCount),s=this.getExpandedChildWidth(t,f),t.isRexSizer&&(s=t.resolveWidth(s)),t.runWidthWrap(s));return this};const y5=Phaser.Utils.Objects.IsPlainObject,an=Phaser.Utils.Objects.GetValue,pv=Phaser.Display.Align.CENTER;var gv=function(i,t,s,f,C){if(typeof i=="number"||typeof t=="number")if(i===void 0){for(var S,r=0;r<f;r++)if(S=t*f+r,!s[S])return S}else if(t===void 0){for(var S,r=0;r<C;r++)if(S=r*f+i,!s[S])return S}else{var S=t*f+i;if(!s[S])return S}else if(t===!0){for(var S,r=0;r<f;r++)for(var y=0;y<C;y++)if(S=y*f+r,!s[S])return S}else for(var r=0,e=s.length;r<e;r++)if(!s[r])return r;return null},T5=function(i,t,s,f,C,S,r){if(Rr.call(this,i),y5(t)){var e=t;t=an(e,"column",void 0),s=an(e,"row",void 0),f=an(e,"align",pv),C=an(e,"padding",0),S=an(e,"expand",!1),r=an(e,"key",void 0)}var y=gv(t,s,this.sizerChildren,this.columnCount,this.rowCount);if(y===null){if(typeof t=="number"&&typeof s=="number")return this;s===!0||typeof s=="number"?this.addEmptyColumn():this.addEmptyRow(),y=gv(t,s,this.sizerChildren,this.columnCount,this.rowCount)}typeof f=="string"&&(f=In[f]),f===void 0&&(f=pv),C===void 0&&(C=0),S===void 0&&(S=!0);var e=this.getSizerConfig(i);return e.align=f,e.padding=Bn(C),e.expand=S,this.sizerChildren[y]=i,r!==void 0&&this.addChildrenMap(r,i),this};const C5={add:T5};var vn=function(i,t,s,f){s===void 0&&(s=0),f===void 0&&(f=i.length-1);for(var C=s;C<=f;C++)i[C]=t;return i};const S5={remove(i,t){if(this.getParentSizer(i)!==this)return this;var s=this.sizerChildren.indexOf(i);return s!==-1&&(this.sizerChildren[s]=null),Ar.call(this,i,t),this},removeAt(i,t,s){var f=this.getChildAt(i,t);return f&&this.remove(f,s),this},removeAll(i){for(var t=this.sizerChildren.length-1;t>=0;t--){var s=this.sizerChildren[t];s&&this.remove(s,i)}return this},clear(i){return vn(this.sizerChildren,null),Mo.call(this,i),this}},mv=Phaser.Utils.Objects.GetValue;var P5=function(i,t,s,f,C){if(s===void 0&&(s=0),f===void 0&&(f=0),this.columnCount=i,this.rowCount=t,this.gridCount=i*t,this.sizerChildren===void 0?this.sizerChildren=[]:this.removeAll(),this.sizerChildren.length=i*t,vn(this.sizerChildren,null),this.columnProportions=[],this.columnProportions.length=i,typeof s=="number")vn(this.columnProportions,s);else for(var S=0;S<i;S++)this.columnProportions[S]=s[S]||0;if(this.rowProportions=[],this.rowProportions.length=t,typeof f=="number")vn(this.rowProportions,f);else for(var S=0;S<t;S++)this.rowProportions[S]=f[S]||0;this.columnWidth=[],this.columnWidth.length=i,this.rowHeight=[],this.rowHeight.length=t,this.space.column=[],this.space.column.length=i-1;var r=mv(C,"column",0);if(typeof r=="number")vn(this.space.column,r);else for(var S=0,y=this.space.column.length;S<y;S++)this.space.column[S]=r[S]||0;this.space.row=[],this.space.row.length=t-1;var e=mv(C,"row",0);if(typeof e=="number")vn(this.space.row,e);else for(var S=0,y=this.space.row.length;S<y;S++)this.space.row[S]=e[S]||0;return this},Dm=function(i,t,s){t===void 0&&(t=this.rowProportions[0]||0),s===void 0&&(s=this.space.row[0]||0),this.rowCount+=1,this.gridCount+=this.columnCount;for(var f=[i*this.columnCount,0],C=0;C<this.columnCount;C++)f.push(null);return this.sizerChildren.splice.apply(this.sizerChildren,f),this.rowProportions.push(t),this.rowHeight.length+=1,this.space.row.splice(i,0,s),this},E5=function(i,t){return Dm.call(this,this.rowCount,i,t),this},Im=function(i,t,s){t===void 0&&(t=this.columnProportions[0]||0),s===void 0&&(s=this.space.column[0]||0),this.columnCount+=1,this.gridCount+=this.rowCount;for(var f=this.rowCount-1;f>=0;f--){var C=f*this.columnCount+i;this.sizerChildren.splice(C,0,null)}return this.columnProportions.push(t),this.columnWidth.length+=1,this.space.column.splice(i,0,s),this},M5=function(i,t){return Im.call(this,this.columnCount,i,t),this},Bm={getChildrenWidth:h5,getChildrenHeight:l5,getExpandedChildWidth:u5,getExpandedChildHeight:d5,getChildrenSizers:f5,preLayout:c5,layoutChildren:v5,resolveWidth:p5,resolveHeight:g5,resolveChildrenWidth:m5,runWidthWrap:x5,resetGrid:P5,inseryEmptyRow:Dm,addEmptyRow:E5,insertEmptyColumn:Im,addEmptyColumn:M5};Object.assign(Bm,C5,S5);var w5=function(){for(var i=0,t,s=0;s<this.columnCount;s++)t=this.columnProportions[s],t>0&&(i+=t);return i},R5=function(){for(var i=0,t,s=0;s<this.rowCount;s++)t=this.rowProportions[s],t>0&&(i+=t);return i};const va=Phaser.Utils.Objects.IsPlainObject,At=Phaser.Utils.Objects.GetValue;class Ii extends Vs{constructor(t,s,f,C,S,r,y,e,u,m){va(s)?(m=s,s=At(m,"x",0),f=At(m,"y",0),C=At(m,"width",void 0),S=At(m,"height",void 0),r=At(m,"column",m.col||0),y=At(m,"row",0),e=At(m,"columnProportions",0),u=At(m,"rowProportions",0)):va(C)?(m=C,C=At(m,"width",void 0),S=At(m,"height",void 0),r=At(m,"column",m.col||0),y=At(m,"row",0),e=At(m,"columnProportions",0),u=At(m,"rowProportions",0)):va(r)?(m=r,r=At(m,"column",m.col||0),y=At(m,"row",0),e=At(m,"columnProportions",0),u=At(m,"rowProportions",0)):va(e)&&(m=e,e=At(m,"columnProportions",0),u=At(m,"rowProportions",0)),super(t,s,f,C,S,m),this.type="rexGridSizer",this.resetGrid(r,y,e,u,At(m,"space",void 0)),this.setIndentLeft(At(m,"space.indentLeftOdd",0),At(m,"space.indentLeftEven",0)),this.setIndentTop(At(m,"space.indentTopOdd",0),At(m,"space.indentTopEven",0)),this.addChildrenMap("items",this.sizerChildren);var d=At(m,"createCellContainerCallback");if(d)for(var f=0,l=this.rowCount;f<l;f++)for(var s=0,h=this.columnCount;s<h;s++){var n={column:s,row:f},a=d(t,s,f,n);a&&this.add(a,n)}}destroy(t){this.scene&&(super.destroy(t),this.columnProportions=void 0,this.rowProportions=void 0,this.columnWidth=void 0,this.rowHeight=void 0)}setIndentLeft(t,s){return this.space.indentLeftOdd=t,this.space.indentLeftEven=s,this}setIndentTop(t,s){return this.space.indentTopOdd=t,this.space.indentTopEven=s,this}setColumnProportion(t,s){return t>=this.columnProportions.length?this:(this.columnProportions[t]=s,this)}setRowProportion(t,s){return t>=this.rowProportions.length?this:(this.rowProportions[t]=s,this)}get totalColumnProportions(){return this._totalColumnProportions===void 0&&(this._totalColumnProportions=w5.call(this)),this._totalColumnProportions}get totalRowProportions(){return this._totalRowProportions===void 0&&(this._totalRowProportions=R5.call(this)),this._totalRowProportions}getChildAt(t,s){return this.sizerChildren[s*this.columnCount+t]}childToGridIndex(t,s){if(!t)return null;var f=this.sizerChildren.indexOf(t);return f===-1?null:(s===void 0&&(s={}),s.x=f%this.columnCount,s.y=Math.floor(f/this.columnCount),s)}getColumnWidth(t){var s=this.columnProportions[t],f=s===0?this.columnWidth[t]:s*this.proportionWidthLength;return f}getRowHeight(t){var s=this.rowProportions[t],f=s===0?this.rowHeight[t]:s*this.proportionHeightLength;return f}}Object.assign(Ii.prototype,Bm);st.register("gridSizer",function(i,t,s,f,C,S,r,y,e){var u=new Ii(this.scene,i,t,s,f,C,S,r,y,e);return this.scene.add.existing(u),u});it(window,"RexPlugins.UI.GridSizer",Ii);var A5=function(){return this.rexSizer.hidden?0:this.maxChildWidth+this.space.left+this.space.right},O5=function(){return this.rexSizer.hidden?0:this.widthWrapResult.height+this.space.top+this.space.bottom},b5=function(i){i===void 0&&(i=[]);for(var t=this.sizerChildren,s,f=0,C=t.length;f<C;f++)s=t[f],s!==`
`&&s.isRexSizer&&i.push(s);return i},F5=function(){return this._maxChildWidth=void 0,this._maxChildHeight=void 0,br.call(this),this},L5=function(){for(var i=this.innerWidth,t=this.justifyPercentage,s=this.space.item,f=this.space.line,C=this.space.indentLeftOdd,S=this.space.indentLeftEven,r=this.space.indentTopOdd,y=this.space.indentTopEven,e,u,m,d=0,l,h,n=this.innerLeft,a=this.innerTop,c,o,v,g,p=this.widthWrapResult.lines,x,T,E,M,P=a,w=0,R=p.length;w<R;w++){switch(x=p[w],T=x.children,this.rtl&&T.reverse(),l=w%2?S:C,M=n+l,E=i-x.width,this.align){case 0:break;case 1:M+=E;break;case 2:M+=E/2;break;case 3:d=$h(i,E,t,T.length);break;case 4:d=$h(i,E,t,T.length),d===0&&(M+=E);break;case 5:d=$h(i,E,t,T.length),d===0&&(M+=E/2);break}for(var A=!0,O=0,F=T.length;O<F;O++)e=T[O],!e.rexSizer.hidden&&(u=e.rexSizer,m=u.padding,Fr.call(this,e),c=M+m.left,A?A=!1:c+=s,h=O%2?y:r,o=P+h+m.top,v=Mt(e),g=St(e),M=c+v+m.right+d,Lr.call(this,e,c,o,v,g,u.align));P+=x.height+f}},$h=function(i,t,s,f){return t/i<=s?t/(f-1):0},D5=function(i,t){t===void 0?t={lines:[],width:0,height:0}:(t.lines.length=0,t.width=0,t.height=0);for(var s=this.sizerChildren,f=this.space.item,C=this.space.line,S=this.space.indentLeftOdd,r=this.space.indentLeftEven,y=this.space.indentTopOdd,e=this.space.indentTopEven,u,m,d,l=0,h,n=t.lines,a=void 0,c,o=0,v=s.length;o<v;o++){if(u=s[o],u===`
`)u=void 0,m=0,c=!0;else{if(u.rexSizer.hidden)continue;u.isRexSizer&&u.layout(),m=I5(u),c=l<m||a===void 0}if(c){a&&(a.width=i-(l+f),t.width=Math.max(t.width,a.width),t.height+=a.height+C),a={children:[],height:0},n.push(a);var h=n.length%2?S:r;l=i-h}l-=m+f,u&&(a.children.push(u),d=B5(u),a.height=Math.max(a.height,d))}return a&&(a.width=i-(l+f),t.width=Math.max(t.width,a.width),t.height+=a.height),t.height+=Math.max(y,e),t},I5=function(i){var t=i.rexSizer.padding;return Mt(i)+t.left+t.right},B5=function(i){var t=i.rexSizer.padding;return St(i)+t.top+t.bottom},G5=function(i){var t=i-this.space.left-this.space.right;this.widthWrapResult=D5.call(this,t,this.widthWrapResult),im.call(this,i)};const xv=Phaser.Math.Distance.Between;var N5=function(i,t){var s=this.sizerChildren;if(s.length===0)return-1;for(var f=-1,C=1/0,S=0,r=s.length;S<r;S++){var y=s[S];if(!(Math.abs(y.centerY-t)>y.height/2)){var u=xv(y.left,y.centerY,i,t);C>u&&(C=u,f=S);var e=s[S+1];if(!(e&&e.y===y.y)){var u=xv(y.right,y.centerY,i,t);C>u&&(C=u,f=S+1)}}}return f};const V5=Phaser.Utils.Objects.IsPlainObject,Kh=Phaser.Utils.Objects.GetValue,z5=Phaser.Display.Align.CENTER;var jh=function(i,t,s,f){if(i===`
`)return this.addNewLine(),this;if(Rr.call(this,i),V5(t)){var C=t;t=Kh(C,"padding",0),s=Kh(C,"key",void 0),f=Kh(C,"index",void 0)}t===void 0&&(t=0);var C=this.getSizerConfig(i);return C.align=z5,C.padding=Bn(t),f===void 0||f>=this.sizerChildren.length?this.sizerChildren.push(i):this.sizerChildren.splice(f,0,i),s!==void 0&&this.addChildrenMap(s,i),this};const U5={add(i,t,s){if(Qe(i))for(var f=i,C=0,S=f.length;C<S;C++)jh.call(this,f[C],t);else jh.call(this,i,t,s);return this},addNewLine(){return this.sizerChildren.push(`
`),this},insert(i,t,s,f){return jh.call(this,t,s,f,i),this},insertAtPosition(i,t,s,f,C){var S=N5.call(this,i,t);return S===-1&&(S=void 0),this.insert(S,s,f,C),this}},Y5=Phaser.Utils.Array.Remove,k5={remove(i,t){return this.getParentSizer(i)!==this?this:(Y5(this.sizerChildren,i),Ar.call(this,i,t),this)},removeAll(i){for(var t=this.sizerChildren.length-1;t>=0;t--)this.remove(this.sizerChildren[t],i);return this},clear(i){return this.sizerChildren.length=0,Mo.call(this,i),this}};var Gm={getChildrenWidth:A5,getChildrenHeight:O5,getChildrenSizers:b5,preLayout:F5,layoutChildren:L5,runWidthWrap:G5};Object.assign(Gm,U5,k5);var X5=function(i){i===void 0&&(i=this.sizerChildren);for(var t=0,s,f,C=0,S=i.length;C<S;C++)s=i[C],s!==`
`&&(f=this.getChildWidth(s),t=Math.max(f,t));return t},W5=function(i){i===void 0&&(i=this.sizerChildren);for(var t=0,s,f,C=0,S=i.length;C<S;C++)s=i[C],s!==`
`&&(f=s.isRexSizer?Math.max(s.minHeight,s.childrenHeight):s.hasOwnProperty("minHeight")?s.minHeight:St(s),t=Math.max(f,t));return t};const yv=Phaser.Utils.Objects.IsPlainObject,ae=Phaser.Utils.Objects.GetValue;class os extends Vs{constructor(t,s,f,C,S,r){yv(s)?(r=s,s=ae(r,"x",0),f=ae(r,"y",0),C=ae(r,"width",void 0),S=ae(r,"height",void 0)):yv(C)&&(r=C,C=ae(r,"width",void 0),S=ae(r,"height",void 0)),super(t,s,f,C,S,r),this.type="rexFixWidthSizer",this.sizerChildren=[],this.setOrientation(ae(r,"orientation",0)),this.setItemSpacing(ae(r,"space.item",0)),this.setLineSpacing(ae(r,"space.line",0)),this.setIntentLeft(ae(r,"space.indentLeftOdd",0),ae(r,"space.indentLeftEven",0)),this.setIntentTop(ae(r,"space.indentTopOdd",0),ae(r,"space.indentTopEven",0)),this.setAlign(ae(r,"align",0)),this.setJustifyPercentage(ae(r,"justifyPercentage",.25)),this.setRTL(ae(r,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(t){return this.orientation=Lo(t),this}setItemSpacing(t){return this.space.item=t,this}setLineSpacing(t){return this.space.line=t,this}setIntentLeft(t,s){return this.space.indentLeftOdd=t,this.space.indentLeftEven=s,this}setIntentTop(t,s){return this.space.indentTopOdd=t,this.space.indentTopEven=s,this}setAlign(t){return typeof t=="string"&&(t=H5[t]),this.align=t,this}setJustifyPercentage(t){return this.justifyPercentage=t,this}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get maxChildWidth(){return this._maxChildWidth===void 0&&(this._maxChildWidth=X5.call(this)),this._maxChildWidth}get maxChildHeight(){return this._maxChildHeight===void 0&&(this._maxChildHeight=W5.call(this)),this._maxChildHeight}}const H5={left:0,top:0,right:1,bottom:1,center:2,justify:3,"justify-left":3,"justify-top":3,"justify-right":4,"justify-bottom":4,"justify-center":5};Object.assign(os.prototype,Gm);st.register("fixWidthSizer",function(i,t,s,f,C){var S=new os(this.scene,i,t,s,f,C);return this.scene.add.existing(S),S});it(window,"RexPlugins.UI.FixWidthSizer",os);st.register("overlapSizer",function(i,t,s,f,C){var S=new be(this.scene,i,t,s,f,C);return this.scene.add.existing(S),S});it(window,"RexPlugins.UI.OverlapSizer",be);st.register("space",function(){var i=new Fo(this.scene);return i});it(window,"RexPlugins.UI.Space",Fo);var Ai=function(i,t,s,f){var C=new kl(t,s,f);if(i&&!i.isRexSizer){var S=C.createGeometryMask();i.setMask(S),this.once("destroy",function(){i.setMask(),S.destroy()})}return this.pin(C),C},pa=function(i,t,s){if(i){var f=t==null,C=s==null;return f&&C||(f||(i.displayWidth=t),C||(i.displayHeight=s),f&&(i.scaleX=i.scaleY),C&&(i.scaleY=i.scaleX)),i}},$5=function(i){i===void 0?i={}:typeof i=="string"&&(i={text:i});var t=i.text||"";this.setText(t);var s=this.childrenMap.icon;if(s){i.icon===void 0?this.hide(s):this.show(s);var f=i.iconSize;f&&(this.setChildDisplaySize(s,f,f),this.iconWidth!==void 0&&this.setIconSize(f)),this.setIconTexture(i.icon,i.iconFrame)}var C=this.childrenMap.action;if(C){i.action===void 0?this.hide(C):this.show(C);var S=i.actionSize;S&&(this.setChildDisplaySize(C,S,S),this.actionWidth!==void 0&&this.setActionSize(S)),this.setActionTexture(i.action,i.actionFrame)}return this},K5={resetDisplayContent:$5};const Wt=Phaser.Utils.Objects.GetValue;class gi extends yt{constructor(t,s){super(t,s),this.type="rexLabel";var f=Wt(s,"background",void 0),C=Wt(s,"icon",void 0),S=Wt(s,"iconMask",void 0),r=Wt(s,"text",void 0),y=Wt(s,"action",void 0),e=Wt(s,"actionMask",void 0),u=Wt(s,"align",void 0);if(f&&this.addBackground(f),(u==="right"||u==="bottom"||u==="center")&&this.addSpace(),C){var m=Wt(s,"space.icon",0),d;this.orientation===0?(r||y)&&(d={right:m}):(r||y)&&(d={bottom:m});var l=Wt(s,"squareFitIcon",!1)?1:0;if(this.add(C,{proportion:0,padding:d,fitRatio:l}),S&&(S=Ai.call(this,C,C,1)),!l){var h=Wt(s,"iconSize",void 0);this.setIconSize(Wt(s,"iconWidth",h),Wt(s,"iconHeight",h))}}if(r){var n=Wt(s,"space.text",0),a=Wt(s,"expandTextWidth",!1),c=Wt(s,"expandTextHeight",!1),o,d,v;this.orientation===0?(o=a?1:0,y&&(d={right:n}),v=c):(o=c?1:0,y&&(d={bottom:n}),v=a),this.add(r,{proportion:o,expand:v,padding:d})}if(y){var l=Wt(s,"squareFitAction",!1)?1:0;if(this.add(y,{proportion:0,fitRatio:l}),e&&(e=Ai.call(this,y,y,1)),!l){var g=Wt(s,"actionSize");this.setActionSize(Wt(s,"actionWidth",g),Wt(s,"actionHeight",g))}}u==="center"&&this.addSpace(),this.addChildrenMap("background",f),this.addChildrenMap("icon",C),this.addChildrenMap("iconMask",S),this.addChildrenMap("text",r),this.addChildrenMap("action",y),this.addChildrenMap("actionMask",e)}get text(){var t=this.childrenMap.text;return t===void 0?"":t.text}set text(t){var s=this.childrenMap.text;s!==void 0&&s.setText(t)}setText(t){return this.text=t,this}appendText(t){return this.text+=t,this}setIconTexture(t,s){var f=this.childrenMap.icon;return f===void 0?this:(f.setTexture(t,s),this.iconWidth!==void 0&&(pa(f,this.iconWidth,this.iconHeight),this.resetChildScaleState(f)),this)}setTexture(t,s){return this.setIconTexture(t,s),this}setIconSize(t,s){return s===void 0&&(s=t),this.iconWidth=t,this.iconHeight=s,this}get texture(){var t=this.childrenMap.icon;if(t!==void 0)return t.texture}get frame(){var t=this.childrenMap.icon;if(t!==void 0)return t.frame}setActionTexture(t,s){var f=this.childrenMap.action;return f===void 0?this:(f.setTexture(t,s),this.actionWidth!==void 0&&(pa(f,this.actionWidth,this.actionHeight),this.resetChildScaleState(f)),this)}get actionTexture(){var t=this.childrenMap.action;if(t!==void 0)return t.texture}get actionFrame(){var t=this.childrenMap.action;if(t!==void 0)return t.frame}setActionSize(t,s){return s===void 0&&(s=t),this.actionWidth=t,this.actionHeight=s,this}preLayout(){var t=this.childrenMap.icon;t&&this.iconWidth!==void 0&&pa(t,this.iconWidth,this.iconHeight);var s=this.childrenMap.action;s&&this.actionWidth!==void 0&&pa(s,this.actionWidth,this.actionHeight),super.preLayout()}runLayout(t,s,f){if(this.ignoreLayout)return this;super.runLayout(t,s,f);var C=this.childrenMap.iconMask;C&&(C.setPosition(),this.resetChildPositionState(C));var S=this.childrenMap.actionMask;return S&&(S.setPosition(),this.resetChildPositionState(S)),this}resize(t,s){super.resize(t,s);var f=this.childrenMap.iconMask;f&&f.resize();var C=this.childrenMap.actionMask;return C&&C.resize(),this}}Object.assign(gi.prototype,K5);st.register("label",function(i){var t=new gi(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.Label",gi);var Be=function(i,t){var s=new so(i,t);return i.add.existing(s),s};const on=Phaser.Utils.Objects.GetValue,j5=Phaser.GameObjects.Text,Z5=Phaser.GameObjects.BitmapText;var Nm=function(i,t){var s=on(t,"$type");s===void 0&&on(t,"key")&&(s="bitmaptext");var f;switch(s){case"bitmaptext":var C=on(t,"key"),S=on(t,"size");S===void 0&&(S=on(t,"fontSize")),f=new Z5(i,0,0,C,"",S);var r=on(t,"color");r!==void 0&&f.setTint(r);break;case"text":f=new j5(i,0,0,"",t);break;default:f=new ro(i,0,0,"",t);break}return i.add.existing(f),f};const J5=Phaser.GameObjects.BitmapText;var Vm=function(i){return i instanceof J5};const Q5=Phaser.GameObjects.Text;var ud=function(i){return i instanceof Q5},q5=function(i){var t=function(s){var f=i.padding,C=s-f.left-f.right,S=i.style;return ud(i)?(S.wordWrapWidth=C,S.maxLines=0):(S.wrapMode===0&&(S.wrapMode=1),S.wrapWidth=C,S.maxLines=0),S.fixedWidth=s,S.fixedHeight=0,i.updateText(),i.minHeight=i.height,i};return t},_5=function(i){var t=function(s){return i.setFixedSize(s,0).runWordWrap(),i.minHeight=i.height,i};return t},t3=function(i){var t=function(s){return i.setMaxWidth(s),i.minHeight=i.height,i};return t},e3=function(i){return i instanceof Fn},zm=function(i,t){return t===void 0&&(t=0),i._minWidth=t,i.runWidthWrap=e3(i)?_5(i):Vm(i)?t3(i):q5(i),i};const i3=Phaser.GameObjects.Image;var Tv=function(i,t){var s=new i3(i,0,0,"");return i.add.existing(s),s};const tr=Phaser.Utils.Objects.GetValue;var dd=function(i,t,s){t=t?fe(t):{};var f=tr(s,"background",Be),C=tr(s,"text",Nm),S=tr(s,"icon",Tv),r=tr(s,"action",Tv);if(f?t.background=f(i,t.background):delete t.background,C){var y=tr(t,"wrapText",!1);y&&(y===!0&&(y="word"),it(t,"text.wrap.mode",y),t.expandTextWidth=!0),t.text=C(i,t.text),y&&(t.text=zm(t.text))}else delete t.text;return S&&t.icon!==null?t.icon=S(i,t.icon):delete t.icon,r&&t.action!==null?t.action=r(i,t.action):delete t.action,t};class fd extends gi{constructor(t,s,f){s=dd(t,s,f),super(t,s),this.type="rexSimpleLabel"}setActiveState(t){var s=this.childrenMap.background;return s&&s.setActiveState&&s.setActiveState(t),this}setHoverState(t){var s=this.childrenMap.background;return s&&s.setHoverState&&s.setHoverState(t),this}setDisableState(t){var s=this.childrenMap.background;return s&&s.setDisableState&&s.setDisableState(t),this}}st.register("simpleLabel",function(i,t){var s=new fd(this.scene,i,t);return this.scene.add.existing(s),s});it(window,"RexPlugins.UI.SimpleLabel",fd);const Ot=Phaser.Utils.Objects.GetValue;class Um extends yt{constructor(t,s){super(t,s),this.type="rexTitleLabel";var f=Ot(s,"background",void 0),C=Ot(s,"icon",void 0),S=Ot(s,"iconMask",void 0),r=Ot(s,"title",void 0),y=Ot(s,"separator",void 0),e=Ot(s,"text",void 0),u=Ot(s,"action",void 0),m=Ot(s,"actionMask",void 0),d=e||r||y;if(f&&this.addBackground(f),C){var l=void 0;this.orientation===0?(d||u)&&(l={right:Ot(s,"space.icon",0),top:Ot(s,"space.iconTop",0),bottom:Ot(s,"space.iconBottom",0)}):(d||u)&&(l={bottom:Ot(s,"space.icon",0),left:Ot(s,"space.iconLeft",0),right:Ot(s,"space.iconRight",0)}),this.add(C,{proportion:0,padding:l}),S&&(S=Ai.call(this,C,C,1))}if(d){var h=new yt(t,{orientation:1}),n=Ot(s,"space.separator",0);if(r){var a=Ot(s,"align.title","right"),l={bottom:!y&&e?n:0};h.add(r,{align:a})}if(y){var l={top:r?n:0,bottom:e?n:0,left:Ot(s,"space.separatorLeft",0),right:Ot(s,"space.separatorRight",0)};h.add(y,{expand:!0,padding:l})}if(e){var c=Ot(s,"align.text","right");h.add(e,{align:c})}var l=void 0;u&&(l={right:Ot(s,"space.text",0)}),this.add(h,{proportion:1,padding:l})}if(u){var l;this.orientation===0?l={top:Ot(s,"space.actionTop",0),bottom:Ot(s,"space.actionBottom",0)}:l={left:Ot(s,"space.actionLeft",0),right:Ot(s,"space.actionRight",0)},this.add(u,{proportion:0,padding:l}),m&&(m=Ai.call(this,u,u,1))}this.addChildrenMap("background",f),this.addChildrenMap("icon",C),this.addChildrenMap("iconMask",S),this.addChildrenMap("title",r),this.addChildrenMap("separator",y),this.addChildrenMap("text",e),this.addChildrenMap("action",u),this.addChildrenMap("actionMask",m)}get title(){var t=this.childrenMap.title;return t===void 0?"":t.title}set title(t){var s=this.childrenMap.title;s!==void 0&&s.setText(t)}setTitle(t){return this.title=t,this}appendTitle(t){return this.title+=t,this}get text(){var t=this.childrenMap.text;return t===void 0?"":t.text}set text(t){var s=this.childrenMap.text;s!==void 0&&s.setText(t)}setText(t){return this.text=t,this}appendText(t){return this.text+=t,this}setTexture(t,s){var f=this.childrenMap.icon;if(f!==void 0)return f.setTexture(t,s),this}get texture(){var t=this.childrenMap.icon;if(t!==void 0)return t.texture}get frame(){var t=this.childrenMap.icon;if(t!==void 0)return t.frame}runLayout(t,s,f){if(this.ignoreLayout)return this;super.runLayout(t,s,f);var C=this.childrenMap.iconMask;C&&(C.setPosition(),this.resetChildPositionState(C));var S=this.childrenMap.actionMask;return S&&(S.setPosition(),this.resetChildPositionState(S)),this}resize(t,s){super.resize(t,s);var f=this.childrenMap.iconMask;f&&f.resize();var C=this.childrenMap.actionMask;return C&&C.resize(),this}}st.register("titleLabel",function(i){var t=new Um(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.TitleLabel",Um);const Et=Phaser.Utils.Objects.GetValue,s3=Phaser.Utils.Objects.IsPlainObject;var n3=function(i,t){var s=Et(t,"background",void 0),f=Et(t,"icon",void 0),C=Et(t,"iconMask",void 0),S=Et(t,"nameText",void 0),r=Et(t,"valueText",void 0),y=Et(t,"bar",void 0),e=Et(t,"action",void 0),u=Et(t,"actionMask",void 0);s3(y)&&(y=new Au(i,y),i.add.existing(y),S&&i.children.moveBelow(y,S),r&&i.children.moveBelow(y,r));var m=S||r||y;if(s&&this.addBackground(s),f){var d=void 0;this.orientation===0?(m||e)&&(d={right:Et(t,"space.icon",0),top:Et(t,"space.iconTop",0),bottom:Et(t,"space.iconBottom",0)}):(m||e)&&(d={bottom:Et(t,"space.icon",0),left:Et(t,"space.iconLeft",0),right:Et(t,"space.iconRight",0)}),this.add(f,{proportion:0,padding:d}),C&&(C=Ai.call(this,f,f,1))}if(m){var l=new yt(i,{orientation:1}),h;if(S||r){if(h=new yt(i,{orientation:0}),S){S.text===""&&S.setText(" "),S.setOrigin(0,S.originY);var d={left:Et(t,"space.name",0)};h.add(S,{padding:d})}if(r){r.text===""&&r.setText(" "),r.setOrigin(1,r.originY),h.addSpace();var d={right:Et(t,"space.value",0)};h.add(r,{padding:d}),this.setValueTextFormatCallback(Et(t,"valueTextFormatCallback",r3),Et(t,"valueTextFormatCallbackScope",void 0))}l.add(h,{expand:!0})}if(y){var d={top:h?Et(t,"space.bar",0):0,bottom:Et(t,"space.barBottom",0),left:Et(t,"space.barLeft",0),right:Et(t,"space.barRight",0)};l.add(y,{expand:!0,padding:d})}var d=void 0;e&&(d={right:Et(t,"space.text",0)});var n=Et(t,"align.text","bottom");this.add(l,{proportion:1,align:n,padding:d})}if(e){var d;this.orientation===0?d={top:Et(t,"space.actionTop",0),bottom:Et(t,"space.actionBottom",0)}:d={left:Et(t,"space.actionLeft",0),right:Et(t,"space.actionRight",0)},this.add(e,{proportion:0,padding:d}),u&&(u=Ai.call(this,e,e,1))}this.addChildrenMap("background",s),this.addChildrenMap("icon",f),this.addChildrenMap("iconMask",C),this.addChildrenMap("name",S),this.addChildrenMap("value",r),this.addChildrenMap("bar",y),this.addChildrenMap("action",e),this.addChildrenMap("actionMask",u)},r3=function(i,t,s){return i.toString()};const a3=Phaser.Math.Clamp,o3={setValueTextFormatCallback(i,t){return this.valueTextFormatCallback=i,this.valueTextFormatCallbackScope=t,this},getFormatValueText(i,t,s){i===void 0&&(i=this.value),t===void 0&&(t=this.minValue),s===void 0&&(s=this.maxValue);var f;return this.valueTextFormatCallbackScope?f=this.valueTextFormatCallback(i,t,s):f=this.valueTextFormatCallback.call(this.valueTextFormatCallbackScope,i,t,s),f},updateValueText(i,t,s){var f=this.childrenMap.value;return f&&this.valueTextFormatCallback&&(f.setText(this.getFormatValueText(i,t,s)),f.layout&&f.layout()),this},setValue(i,t,s){return i=a3(i,t,s),this.value=i,this.minValue=t,this.maxValue=s,this.updateValueText(i,t,s),this.setBarValue(i,t,s),this}};class cd extends yt{constructor(t,s){super(t,s),this.type="rexNameValueLabel",n3.call(this,t,s)}get nameText(){var t=this.childrenMap.name;return t===void 0?"":t.text}set nameText(t){var s=this.childrenMap.name;s!==void 0&&s.setText(t)}setNameText(t){return this.nameText=t,this}get valueText(){var t=this.childrenMap.value;return t===void 0?"":t.text}set valueText(t){var s=this.childrenMap.value;s!==void 0&&s.setText(t)}setValueText(t){return this.valueText=t,this}get barValue(){var t=this.childrenMap.bar;if(t!==void 0)return t.value}set barValue(t){var s=this.childrenMap.bar;s!==void 0&&s.setValue(t)}setBarValue(t,s,f){var C=this.childrenMap.bar;return C===void 0?this:(C.setValue(t,s,f),this)}easeBarValueTo(t,s,f){var C=this.childrenMap.bar;return C===void 0?this:(C.easeValueTo(t,s,f),this)}setTexture(t,s){var f=this.childrenMap.icon;if(f!==void 0)return f.setTexture(t,s),this}get texture(){var t=this.childrenMap.icon;if(t!==void 0)return t.texture}get frame(){var t=this.childrenMap.icon;if(t!==void 0)return t.frame}runLayout(t,s,f){if(this.ignoreLayout)return this;super.runLayout(t,s,f);var C=this.childrenMap.iconMask;C&&(C.setPosition(),this.resetChildPositionState(C));var S=this.childrenMap.actionMask;return S&&(S.setPosition(),this.resetChildPositionState(S)),this}resize(t,s){super.resize(t,s);var f=this.childrenMap.iconMask;f&&f.resize();var C=this.childrenMap.actionMask;return C&&C.resize(),this}}Object.assign(cd.prototype,o3);st.register("nameValueLabel",function(i){var t=new cd(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.NameValueLabel",cd);const ga=yt.prototype.add,Cv=yt.prototype.addSpace;var Zh=function(i){var t=!i.isRexSpace,s=!t||this.buttonsExpand?1:0;if(this.sizerChildren.length===0)if(t){var f=!this.buttonsExpand&&(this.buttonsAlign==="right"||this.buttonsAlign==="center"||this.buttonsAlign==="bottom");f&&Cv.call(this),ga.call(this,i,{proportion:s,expand:!0});var C=!this.buttonsExpand&&this.buttonsAlign==="center";C&&Cv.call(this),this.hasTailSpace=C}else ga.call(this,i,{proportion:s,expand:!0}),this.hasTailSpace=!1;else if(this.hasTailSpace){var S=this.sizerChildren.length-1;ga.call(this,i,{index:S,proportion:s,expand:!0})}else ga.call(this,i,{proportion:s,expand:!0});return t&&this.buttonGroup.add(i),this};const h3={addButton(i){if(Qe(i))for(var t=i,s=0,f=t.length;s<f;s++)Zh.call(this,t[s]);else Zh.call(this,i);return this},addButtons(i){for(var t=0,s=i.length;t<s;t++)Zh.call(this,i[t]);return this}},l3=yt.prototype.remove,u3=yt.prototype.clear;var Jh=function(i,t){return this.getParentSizer(i)!==this?this:(this.buttonGroup.remove(i),l3.call(this,i,t),this)};const d3={remove(i,t){if(Qe(i))for(var s=i,f=0,C=s.length;f<C;f++)Jh.call(this,s[f],t);else Jh.call(this,i,t);return this},clear(i){var t=this.buttonGroup.buttons;return t.length=0,u3.call(this,i),this},removeButton(s,t){var s=this.getButton(s);return s?(this.remove(s,t),this):this},clearButtons(i){for(var t=this.buttonGroup.buttons,s=t.length-1;s>=0;s--)Jh.call(this,t[s],i);return this}};var f3=function(i,t,s){if(i){var f=this.setValueCallback,C=this.setValueCallbackScope;f&&(C?f.call(C,i,t,s):f(i,t,s)),this.fireEvent("button.statechange",i,t,s)}},c3=function(i){var t=this;i._selected=void 0,Object.defineProperty(i,"selected",{get:function(){return i._selected},set:function(s){if(i._selected!==s){var f=i._selected;i._selected=s,f3.call(t,i,s,f)}},enumerable:!0,configurable:!0}),i.selected=!1};const v3={add(i){return this.buttons.push(i),i._click||(i._click=new rs(i,this.clickConfig),i._click.on("click",function(t,s,f,C){this.fireEvent("button.click",s,f,C)},this).on("enable",function(t,s){this.fireEvent("button.enable",s)},this).on("disable",function(t,s){this.fireEvent("button.disable",s)},this),i.on("pointerover",function(t,s,f,C){this.fireEvent("button.over",i,t,C)},this).on("pointerout",function(t,s){this.fireEvent("button.out",i,t,s)},this)),this.buttonsType&&(i.name===void 0&&console.error(`${this.parent.constructor.name}: Option button miss value`),c3.call(this,i)),this},addMultiple(i){for(var t=0,s=i.length;t<s;t++)this.add(i[t]);return this}},p3=Phaser.Utils.Array.Remove,g3={remove(i){return this.buttonsType&&delete i.selected,p3(this.buttons,i),this},clear(){if(this.buttonsType)for(var i=this.buttons,t=0,s=i.length;t<s;t++)delete i[t].selected;return this.buttons.length=0,this}};var m3=function(i,t,...s){var f;if(typeof t=="number"){if(f=t,t=this.buttons[f],!t)return}else if(f=this.buttons.indexOf(t),f===-1)return;this.eventEmitter!==this.parent&&this.parent.emit(i,t,f,...s),this.groupName!==void 0?this.eventEmitter.emit(i,t,this.groupName,f,...s):this.eventEmitter.emit(i,t,f,...s)};const er=Phaser.Utils.Objects.GetValue,x3={setButtonsType(i){i===void 0&&(i={});var t=er(i,"buttonsType",i.type);if(this.buttonsType=t,!this.buttonsType)return this;var s,f;switch(s=er(i,"setValueCallback",void 0),f=er(i,"setValueCallbackScope",void 0),s===void 0&&(s=er(i,"setButtonStateCallback",void 0),f=er(i,"setButtonStateCallbackScope",void 0)),this.setValueCallback=s,this.setValueCallbackScope=f,t){case"radio":this.setRadioType();break;case"checkboxes":this.setCheckboxesType();break}return this},setRadioType(){var i=this.parent,t=this.buttons;i._value=void 0;var s=void 0;return Object.defineProperty(i,"value",{get:function(){return i._value},set:function(f){if(i._value!==f){i._value=f;for(var C=0,S=t.length;C<S;C++){var r=t[C];r.rexSizer.hidden||(s===void 0?r.name===f?r.selected=!0:r.selected=!1:s===C?r.selected=!0:r.selected=!1)}}},enumerable:!0,configurable:!0}),i.on("button.click",function(f){s=this.buttons.indexOf(f),i.value=f.name,s=void 0},this),this},setCheckboxesType(){var i=this.parent;return i.on("button.click",function(t){t.selected=!t.selected}),this},clearAllButtonsState(){for(var i=this.buttons,t=0,s=i.length;t<s;t++){var f=i[t];f.selected=!1}return this},getAllButtonsState(){for(var i={},t=this.buttons,s=0,f=t.length;s<f;s++){var C=t[s];C.rexSizer.hidden||(i[C.name]=C.selected)}return i},setSelectedButtonName(i){return this.parent.value=i,this},getSelectedButtonName(){return this.parent.value},setButtonState(i,t){t===void 0&&(t=!0);for(var s=this.buttons,f=0,C=s.length;f<C;f++){var S=s[f];if(!S.rexSizer.hidden&&S.name===i){S.selected=t;break}}return this},getButtonState(i){for(var t=this.buttons,s=0,f=t.length;s<f;s++){var C=t[s];if(!C.rexSizer.hidden&&C.name===i)return C.selected}}};var y3=function(i,t){if(i)if(Qe(i)){for(var s,f=0,C=i.length;f<C;f++)if(s=Sv(i[f],t),s)return s}else{var s;for(var S in i)if(s=Sv(i[S],t),s)return s}else return null},Sv=function(i,t){return i?i.hasOwnProperty("name")?i.name===t?i:null:GetElementByName(i,t):null};const Do={getButton(i){var t=this.buttons,s,f=typeof i;switch(f){case"number":s=t[i];break;case"string":s=y3(t,i);break;default:s=i,t.indexOf(s)===-1&&(s=void 0);break}return s},setButtonEnable(i,t){var s=this.buttons;if(i===void 0||typeof i=="boolean"){t=i;for(var f=0,C=s.length;f<C;f++)s[f]._click.setEnable(t)}else this.getButton(i)._click.setEnable(t);return this},toggleButtonEnable(i){var t=this.buttons;if(i===void 0||typeof i=="boolean")for(var s=0,f=t.length;s<f;s++)t[s]._click.toggleEnable();else this.getButton(i)._click.toggleEnable();return this},getButtonEnable(i){return i===void 0&&(i=0),this.getButton(i)._click.enable},emitButtonClick(i){var t=this.buttonGroup?this.buttonGroup:this;return t.fireEvent("button.click",i),this},showButton(i){return $i(this.getButton(i)),this},hideButton(i){return Ki(this.getButton(i)),this},isButtonShown(i){return ju(this.getButton(i)),this},forEachButtton(i,t){for(var s=this.buttons,f=0,C=s.length;f<C;f++)t?i.call(t,s[f],f,s):i(s[f],f,s);return this}};class Io{constructor(t){this.parent=t.parent,this.eventEmitter=t.eventEmitter,this.groupName=t.groupName,this.clickConfig=t.clickConfig,this.buttonsType=void 0,this.buttons=[]}destroy(){this.parent=void 0,this.eventEmitter=void 0,this.clickConfig=void 0,this.buttons=void 0}}var T3={fireEvent:m3};Object.assign(Io.prototype,v3,g3,x3,Do,T3);const vd={clearAllButtonsState(){return this.buttonGroup.clearAllButtonsState(),this},getAllButtonsState(){return this.buttonGroup.getAllButtonsState()},setSelectedButtonName(i){return this.buttonGroup.setSelectedButtonName(i),this},getSelectedButtonName(){return this.buttonGroup.getSelectedButtonName()},setButtonState(i,t){return this.buttonGroup.setButtonState(i,t),this},getButtonState(i){return this.buttonGroup.getButtonState(i)}},Ps=Phaser.Utils.Objects.GetValue;let qt=class extends yt{constructor(t,s){s===void 0&&(s={});var f=s.space;typeof f=="number"&&(s.space={item:f}),super(t,s),this.type="rexButtons",this.buttonGroup=new Io({parent:this,eventEmitter:Ps(s,"eventEmitter",this),groupName:Ps(s,"groupName",void 0),clickConfig:Ps(s,"click",void 0)}).setButtonsType(s);var C=Ps(s,"background",void 0),S=Ps(s,"buttons",void 0);this.buttonsExpand=Ps(s,"expand",!1),this.buttonsAlign=Ps(s,"align",void 0),C&&this.addBackground(C),S&&this.addButtons(S),this.addChildrenMap("background",C),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){this.scene&&(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}};Object.assign(qt.prototype,h3,d3,Do,vd);st.register("buttons",function(i){var t=new qt(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.Buttons",qt);const C3=Ii.prototype.add,S3={addButton(i,t,s){return C3.call(this,i,t,s,void 0,0,this.buttonsExpand),this.buttonGroup.add(i),this},addButtons(i,t){for(var s=0,f=i;s<f;s++)this.addButton(i[s],void 0,t);return this}},P3=Ii.prototype.remove,E3=Ii.prototype.clear;var Qh=function(s,t){var s=this.getButton(s);return s?(this.buttonGroup.remove(s),P3.call(this,s,t),this):this};const M3={remove(i,t){if(Qe(i))for(var s=i,f=0,C=s.length;f<C;f++)Qh.call(this,s[f],t);else Qh.call(this,i,t);return this},clear(i){var t=this.buttonGroup.buttons;return t.length=0,E3.call(this,i),this},removeButton(i,t){return this.remove(i,t),this},clearButtons(i){for(var t=this.buttonGroup.buttons,s=t.length-1;s>=0;s--)Qh.call(this,t[s],i);return this}},ri=Phaser.Utils.Objects.GetValue;class Ir extends Ii{constructor(t,s){s===void 0&&(s={});var f=ri(s,"row",0),C=ri(s,"column",s.col||0),S=ri(s,"createCellContainerCallback"),r=ri(s,"buttons",void 0),y=ri(s,"expand",!0),e=y?1:0;if(S&&(s.createCellContainerCallback=void 0),r!==void 0){f=Math.max(f,r.length);for(var u=0,m=r.length;u<m;u++)C=Math.max(C,r[u].length)}s.row=f,s.column=C,s.columnProportions=e,s.rowProportions=e,super(t,s),this.type="rexGridButtons",this.buttonGroup=new Io({parent:this,eventEmitter:ri(s,"eventEmitter",this),groupName:ri(s,"groupName",void 0),clickConfig:ri(s,"click",void 0)}).setButtonsType(s);var d=ri(s,"background",void 0);if(this.buttonsExpand=y,ri(s,"space",void 0),d&&this.addBackground(d),r)for(var l,h,n=0,a=r.length;n<a;n++){l=r[n];for(var c=0,o=l.length;c<o;c++)h=l[c],h&&this.addButton(h,c,n)}else if(S)for(var v=0;v<f;v++)for(var g=0;g<C;g++){var h=S(t,g,v);h&&this.addButton(h,g,v)}this.addChildrenMap("background",d),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){this.scene&&(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(Ir.prototype,S3,M3,Do,vd);st.register("gridButtons",function(i){var t=new Ir(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.GridButtons",Ir);const Ym=os.prototype.add;var ma=function(i){return Ym.call(this,i),this.buttonGroup.add(i),this};const w3={addButton(i){if(Qe(i))for(var t=i,s=0,f=t.length;s<f;s++)ma.call(this,t[s]);else ma.call(this,i);return this},addButtons(i){if(Qe(i[0]))for(var t=i,s,f=0,C=t.length-1;f<=C;f++){s=t[f];for(var S=0,r=s.length;S<r;S++)ma.call(this,s[S]);f>C&&Ym.addNewLine(this)}else for(var S=0,r=i.length;S<r;S++)ma.call(this,i[S]);return this}},R3=os.prototype.remove,A3=os.prototype.clear;var qh=function(s,t){var s=this.getButton(s);return s?(this.buttonGroup.remove(s),R3.call(this,s,t),this):this};const O3={remove(i,t){if(Qe(i))for(var s=i,f=0,C=s.length;f<C;f++)qh.call(this,s[f],t);else qh.call(this,i,t);return this},clear(i){var t=this.buttonGroup.buttons;return t.length=0,A3.call(this,i),this},removeButton(i,t){return this.remove(i,t),this},clearButtons(i){for(var t=this.buttonGroup.buttons,s=t.length-1;s>=0;s--)qh.call(this,t[s],i);return this}},hn=Phaser.Utils.Objects.GetValue;class ts extends os{constructor(t,s){s===void 0&&(s={});var f=s.space;typeof f=="number"&&(s.space={item:f,line:f}),super(t,s),this.type="rexFixWidthButtons",this.buttonGroup=new Io({parent:this,eventEmitter:hn(s,"eventEmitter",this),groupName:hn(s,"groupName",void 0),clickConfig:hn(s,"click",void 0)}).setButtonsType(s);var C=hn(s,"background",void 0),S=hn(s,"buttons",void 0);this.buttonsAlign=hn(s,"align",void 0),C&&this.addBackground(C),S&&this.addButtons(S),this.addChildrenMap("background",C),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){this.scene&&(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(ts.prototype,w3,O3,Do,vd);st.register("fixWidthButtons",function(i){var t=new ts(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.FixWidthButtons",ts);const b3={setAccept(i){return this.childrenMap.fileChooser.setAccept(i),this},setMultiple(i){return this.childrenMap.fileChooser.setMultiple(i),this},loadFile(i,t,s,f,C){return this.childrenMap.fileChooser.loadFile(i,t,s,f,C),this},loadFilePromise(i,t,s,f){return this.childrenMap.fileChooser.loadFilePromise(i,t,s,f)}},Pv=Phaser.Utils.Objects.GetValue;class pd extends gi{constructor(t,s){super(t,s),this.type="rexFileSelectorButton";var f=new bo(t);t.add.existing(f),this.addBackground(f),this.addChildrenMap("fileChooser",f),this.setAccept(Pv(s,"accept","")),this.setMultiple(Pv(s,"multiple",!1)),f.on("change",function(C){var S=C.files;S.length!==0&&(S=Array.from(S),this.emit("select",S,this))},this)}get files(){return this.childrenMap.fileChooser.files}}Object.assign(pd.prototype,b3);st.register("fileSelectorButton",function(i){var t=new pd(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.FileSelectorButton",pd);const F3={getChoice(i){var t=this.childrenMap.choicesSizer;if(t)return t.getButton(i)},getAction(i){return this.childrenMap.actionsSizer.getButton(i)},getToolbar(i){return this.childrenMap.toolbarSizer.getButton(i)},getLeftToolbar(i){return this.childrenMap.leftToolbarSizer.getButton(i)},setChoiceEnable(i,t){var s=this.childrenMap.choicesSizer;return s&&s.setButtonEnable(i,t),this},setActionEnable(i,t){return this.childrenMap.actionsSizer.setButtonEnable(i,t),this},setToolbarEnable(i,t){return this.childrenMap.toolbarSizer.setButtonEnable(i,t),this},setLeftToolbarEnable(i,t){return this.childrenMap.leftToolbarSizer.setButtonEnable(i,t),this},toggleChoiceEnable(i){var t=this.childrenMap.choicesSizer;return t&&t.toggleButtonEnable(i),this},toggleActionEnable(i){return this.childrenMap.actionsSizer.toggleButtonEnable(i),this},toggleToolbarEnable(i){return this.childrenMap.toolbarSizer.toggleButtonEnable(i),this},toggleLeftToolbarEnable(i){return this.childrenMap.leftToolbarSizer.toggleButtonEnable(i),this},getChoiceEnable(i){var t=this.childrenMap.choicesSizer;return t?t.getButtonEnable(i):!1},getActionEnable(i){return this.childrenMap.actionsSizer.getButtonEnable(i)},getToolbarEnable(i){return this.childrenMap.toolbarSizer.getButtonEnable(i)},getLeftToolbarEnable(i){return this.childrenMap.leftToolbarSizer.getButtonEnable(i)},emitChoiceClick(i){var t=this.childrenMap.choicesSizer;return t&&t.emitButtonClick(i),this},emitActionClick(i){return this.childrenMap.actionsSizer.emitButtonClick(i),this},emitToolbarClick(i){return this.childrenMap.toolbarSizer.emitButtonClick(i),this},emitLeftToolbarClick(i){return this.childrenMap.leftToolbarSizer.emitButtonClick(i),this},showChoice(i){var t=this.childrenMap.choicesSizer;return t&&t.showButton(i),this},showAction(i){return this.childrenMap.actionsSizer.showButton(i),this},showToolbar(i){return this.childrenMap.toolbarSizer.showButton(i),this},showLeftToolbar(i){return this.childrenMap.leftToolbarSizer.showButton(i),this},hideChoice(i){var t=this.childrenMap.choicesSizer;return t&&t.hideButton(i),this},hideAction(i){return this.childrenMap.actionsSizer.hideButton(i),this},hideToolbar(i){return this.childrenMap.toolbarSizer.hideButton(i),this},hideLeftToolbar(i){return this.childrenMap.leftToolbarSizer.hideButton(i),this},addChoice(i){var t=this.childrenMap.choicesSizer;return t&&t.addButton(i),this},addAction(i){return this.childrenMap.actionsSizer.addButton(i),this},addToolbar(i){return this.childrenMap.toolbarSizer.addButton(i),this},addLeftToolbar(i){return this.childrenMap.leftToolbarSizer.addButton(i),this},removeChoice(i,t){var s=this.childrenMap.choicesSizer;return s&&s.removeButton(i,t),this},removeAction(i,t){return this.childrenMap.actionsSizer.removeButton(i,t),this},removeToolbar(i,t){return this.childrenMap.toolbarSizer.removeButton(i,t),this},removeLeftToolbar(i,t){return this.childrenMap.leftToolbarSizer.removeButton(i,t),this},clearChoices(i){var t=this.childrenMap.choicesSizer;return t&&t.clearButtons(i),this},clearActions(i){return this.childrenMap.actionsSizer.clearButtons(i),this},clearToolbar(i){return this.childrenMap.toolbarSizer.clearButtons(i),this},clearLeftToolbar(i){return this.childrenMap.leftToolbarSizer.clearButtons(i),this},forEachChoice(i,t){var s=this.childrenMap.choicesSizer;return s&&s.forEachButtton(i,t),this},forEachAction(i,t){return this.childrenMap.actionsSizer.forEachButtton(i,t),this},forEachToolbar(i,t){return this.childrenMap.toolbarSizer.forEachButtton(i,t),this},forEachLeftToolbar(i,t){return this.childrenMap.leftToolbarSizer.forEachButtton(i,t),this},setAllButtonsEnable(i){return i===void 0&&(i=!0),this.childrenMap.toolbarSizer&&this.setToolbarEnable(i),this.childrenMap.leftToolbarSizer&&this.setLeftToolbarEnable(i),this.childrenMap.actionsSizer&&this.setActionEnable(i),this.childrenMap.choicesSizer&&this.setChoiceEnable(i),this},getChoicesButtonStates(){var i=this.childrenMap.choicesSizer;return i?i.getAllButtonsState():{}},getChoicesButtonState(i){var t=this.childrenMap.choicesSizer;return i===void 0?t?t.getAllButtonsState():{}:t?t.getButtonState(i):!1},setChoicesButtonState(i,t){var s=this.childrenMap.choicesSizer;return s&&s.setButtonState(i,t),this},clearChoicesButtonStates(){var i=this.childrenMap.choicesSizer;return i&&i.clearAllButtonsState(),this},getChoicesSelectedButtonName(){var i=this.childrenMap.choicesSizer;return i?i.getSelectedButtonName():""},setChoicesSelectedButtonName(i){var t=this.childrenMap.choicesSizer;return t&&t.setSelectedButtonName(i),this}},L3={onCreateModalBehavior(i){i.on("button.click",function(t,s,f,C,S){if(s==="actions"){var r={index:f,text:t.text,button:t,dialog:i};switch(i.buttonsType){case"radio":r.value=i.getChoicesSelectedButtonName();break;case"checkboxes":r.value=i.getChoicesButtonStates();break;default:r.value=void 0}i.modalClose(r)}})},modal(i,t){return i&&i.defaultBehavior===!1?this.onCreateModalBehavior=!1:delete this.onCreateModalBehavior,qu.modal.call(this,i,t),this}};var km={};Object.assign(km,F3,L3);const ut=Phaser.Utils.Objects.GetValue;class Br extends yt{constructor(t,s){s===void 0&&(s={}),s.orientation=1,super(t,s),this.type="rexDialog",this.eventEmitter=ut(s,"eventEmitter",this);var f=ut(s,"background",void 0),C=ut(s,"title",void 0),S=ut(s,"toolbar",void 0),r=ut(s,"toolbarBackground",void 0),y=ut(s,"leftToolbar",void 0),e=ut(s,"leftToolbarBackground",void 0),u=ut(s,"content",void 0),m=ut(s,"description",void 0),d,l=ut(s,"choices",void 0),h=ut(s,"choicesBackground",void 0),n,a=ut(s,"actions",void 0),c=ut(s,"actionsBackground",void 0),o=ut(s,"click",void 0);f&&this.addBackground(f);var v;S&&(v=new qt(t,{groupName:"toolbar",background:r,buttons:S,orientation:0,space:{item:ut(s,"space.toolbarItem",0)},click:o,eventEmitter:this.eventEmitter}));var g;if(y&&(g=new qt(t,{groupName:"leftToolbar",background:e,buttons:y,orientation:0,space:{item:ut(s,"space.leftToolbarItem",0)},click:o,eventEmitter:this.eventEmitter})),C||S||y){var p=!!C&&ut(s,"expand.title",!0),x=ut(s,"align.title","center"),T=C&&!p&&x==="center"||!C&&(S||y),E=!T,M;E?M=new yt(t,{orientation:0}):M=new be(t);var P=E?!0:{height:!0};if(g&&M.add(g,{align:"left",expand:P}),C){E&&!p&&x==="right"&&M.addSpace();var R={left:ut(s,"space.titleLeft",0),right:ut(s,"space.titleRight",0)},A=p?1:0;M.add(C,{align:x,proportion:A,expand:P,padding:R}),E&&!p&&x==="left"&&M.addSpace()}v&&(E&&!C&&M.addSpace(),M.add(v,{align:"right",expand:P}));var w=ut(s,"space.title",0),R;(u||m||l||a)&&(R={bottom:w});var A=ut(s,"proportion.title",0);this.add(M,{padding:R,proportion:A,expand:!0})}if(u){var O=ut(s,"align.content","center"),F=ut(s,"space.content",0),R={left:ut(s,"space.contentLeft",0),right:ut(s,"space.contentRight",0),bottom:m||l||a?F:0},A=ut(s,"proportion.content",0),b=ut(s,"expand.content",!0);this.add(u,{align:O,padding:R,proportion:A,expand:b})}if(m){var O=ut(s,"align.description","center"),D=ut(s,"space.description",0),R={left:ut(s,"space.descriptionLeft",0),right:ut(s,"space.descriptionRight",0),bottom:l||a?D:0},A=ut(s,"proportion.description",0),b=ut(s,"expand.description",!0);this.add(m,{align:O,padding:R,proportion:A,expand:b})}if(l){var I=ut(s,"choicesType","").split("-"),B=ir(I,"wrap")?ts:ir(I,"grid")?Ir:qt,z=ir(I,"radio")?"radio":ir(I,"checkboxes")?"checkboxes":void 0,Y={left:ut(s,"space.choicesBackgroundLeft",0),right:ut(s,"space.choicesBackgroundRight",0),top:ut(s,"space.choicesBackgroundTop",0),bottom:ut(s,"space.choicesBackgroundBottom",0)},X=ut(s,"space.choice",0);B===qt?Y.item=X:B===ts?(Y.item=X,Y.line=ut(s,"space.choiceLine",X)):(Y.column=ut(s,"space.choiceColumn",X),Y.row=ut(s,"space.choiceRow",X));var H={width:ut(s,"choicesWidth",void 0),height:ut(s,"choicesHeight",void 0),groupName:"choices",buttonsType:z,background:h,buttons:l,space:Y,click:o,eventEmitter:this.eventEmitter,setValueCallback:ut(s,"choicesSetValueCallback",void 0),setValueCallbackScope:ut(s,"choicesSetValueCallbackScope",void 0)};B===qt&&(H.orientation=ir(I,"x")?0:1),d=new B(t,H);var N=ut(s,"space.choices",0),R={left:ut(s,"space.choicesLeft",0),right:ut(s,"space.choicesRight",0),bottom:a?N:0},O=ut(s,"align.choices","center"),A=ut(s,"proportion.choices",0),b=ut(s,"expand.choices",!0);this.add(d,{align:O,padding:R,proportion:A,expand:b}),this.buttonsType=z}if(a){n=new qt(t,{groupName:"actions",background:c,buttons:a,orientation:0,space:{item:ut(s,"space.action",0)},expand:ut(s,"expand.actions",!1),align:ut(s,"align.actions","center"),click:o,eventEmitter:this.eventEmitter});var R={left:ut(s,"space.actionsLeft",0),right:ut(s,"space.actionsRight",0)},A=ut(s,"proportion.action",0);this.add(n,{align:"center",padding:R,proportion:A,expand:!0})}sr(this,"click"),sr(this,"over"),sr(this,"out"),sr(this,"enable"),sr(this,"disable"),this.addChildrenMap("background",f),this.addChildrenMap("title",C),this.addChildrenMap("toolbar",S),this.addChildrenMap("leftToolbar",y),this.addChildrenMap("content",u),this.addChildrenMap("description",m),this.addChildrenMap("choices",d?d.buttons:void 0),this.addChildrenMap("actions",n?n.buttons:void 0),this.addChildrenMap("choicesSizer",d),this.addChildrenMap("actionsSizer",n),this.addChildrenMap("toolbarSizer",v),this.addChildrenMap("leftToolbarSizer",g)}}var ir=function(i,t){return i.indexOf(t)!==-1},Ev={actions:"action",choices:"choice",toolbar:"toolbar",leftToolbar:"leftToolbar"},sr=function(i,t){i.on(`button.${t}`,function(s,f,C,S,r){Ev.hasOwnProperty(f)&&i.emit(`${Ev[f]}.${t}`,s,C,S,r)})};Object.assign(Br.prototype,km);st.register("dialog",function(i){var t=new Br(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.Dialog",Br);var Ge=function(i,t,s){var f=new fd(i,t,s);return i.add.existing(f),f},D3=function(i){return i===void 0&&(i={}),I3.call(this,i),B3.call(this,i),G3.call(this,i),N3.call(this,i),this},I3=function(i){var t=this.childrenMap.title;t.resetDisplayContent(i.title)},B3=function(i){var t=this.childrenMap.content;if(t.resetDisplayContent)t.resetDisplayContent(i.content);else{var s=i.content||"";t.setText(s)}},G3=function(i){var t=this.childrenMap.actions;if(t){var s=i.buttons;if(s){for(var S=this.scene,r=this.defaultActionConfig,y=this.defaultActionButtonCreator,e=0,u=s.length;e<u;e++){var m=s[e],d=t[e];d||(d=Ge(S,r,y),this.addAction(d)),d.show().resetDisplayContent(m)}this.buttonMode=s.length;for(var e=s.length,u=t.length;e<u;e++)t[e].hide()}else{var f=t[0];f&&f.resetDisplayContent(i.buttonA);var C=t[1];C&&C.resetDisplayContent(i.buttonB)}}},N3=function(i){var t=this.childrenMap.choices;if(t){var s=i.choices;s||(s=[]);for(var f=this.scene,C=this.defaultChoiceConfig,S=this.defaultActionButtonCreator,r=0,y=s.length;r<y;r++){var e=s[r];typeof e=="string"&&(e={text:e});var u=t[r];u||(u=Ge(f,C,S),this.addChoice(u)),u.show().resetDisplayContent(e);var m;e.hasOwnProperty("value")?m=e.value:m=e.text,u.setName(m)}for(var r=s.length,y=t.length;r<y;r++)t[r].hide()}},V3=function(i,t){_i(i)&&(t=i,i=void 0),i===void 0&&(i={});var s=this.buttonMode===0;return i.hasOwnProperty("anyTouchClose")||(i.anyTouchClose=s),i.hasOwnProperty("manualClose")||(i.manualClose=!s),qu.modal.call(this,i,t),this},z3={resetDisplayContent:D3,modal:V3},U3=function(i){i.setHoverState&&i.setHoverState(!0)},Y3=function(i){i.setHoverState&&i.setHoverState(!1)},k3=function(i,t,s,f){i.setActiveState&&i.setActiveState(f)},X3=function(i){i.setDisableState&&i.setDisableState(!1)},W3=function(i){i.setDisableState&&i.setDisableState(!0)},H3=function(){this.on("button.over",U3).on("button.out",Y3).on("button.enable",X3).on("button.disable",W3).on("button.statechange",k3)};const Xm={v:0,vertical:0,y:0,h:1,horizontal:1,x:1},$3=Phaser.Utils.Objects.GetValue;var Bo=function(i,t){var s=$3(i,"scrollMode",0);return typeof s=="string"&&(s=Xm[s]),s};const Mv=Phaser.Math.Percent;var Wm=function(i,t,s){var f;return i.y===t.y?f=Mv(s.x,i.x,t.x):i.x===t.x&&(f=Mv(s.y,i.y,t.y)),f},K3=function(i,t,s){if(this.enable){_h.x=t,_h.y=s;var f,C;this.reverseAxis?(f=this.getEndPoint(),C=this.getStartPoint()):(f=this.getStartPoint(),C=this.getEndPoint()),this.value=Wm(f,C,_h)}},_h={},wv=function(i,t,s){if(this.enable&&i.isDown){tl.x=i.worldX,tl.y=i.worldY;var f,C;this.reverseAxis?(f=this.getEndPoint(),C=this.getStartPoint()):(f=this.getStartPoint(),C=this.getEndPoint());var S=Wm(f,C,tl);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-S)<.1?this.value=S:this.easeValueTo(S)}},tl={},Hm=function(i,t){t===void 0&&(t=j3);var s=this.childrenMap.thumb,f=s.x,C=s.y;return wr(s,this.innerLeft,this.innerTop,this.innerWidth,this.innerHeight,i),t.x=s.x,t.y=s.y,s.x=f,s.y=C,t},j3={};const Z3=Phaser.Display.Align.LEFT_CENTER,J3=Phaser.Display.Align.TOP_CENTER;var Q3=function(i){if(i===void 0&&(i=q3),this.childrenMap.thumb){var t=this.orientation===0?Z3:J3;Hm.call(this,t,i)}else this.orientation===0?(i.x=this.innerLeft+1,i.y=this.centerY):(i.x=this.centerX,i.y=this.innerTop+1);return i},q3={};const _3=Phaser.Display.Align.RIGHT_CENTER,t6=Phaser.Display.Align.BOTTOM_CENTER;var e6=function(i){if(i===void 0&&(i=i6),this.childrenMap.thumb){var t=this.orientation===0?_3:t6;Hm.call(this,t,i)}else this.orientation===0?(i.x=this.innerRight-1,i.y=this.centerY):(i.x=this.centerX,i.y=this.innerBottom-1);return i},i6={};const Rv=Phaser.Math.Linear;var s6=function(i,t,s,f){return f===void 0&&(f=n6),f.x=Rv(t.x,s.x,i),f.y=Rv(t.y,s.y,i),f},n6={},r6=function(i){var t=this.childrenMap.thumb;if(t===void 0)return this;i===void 0&&(i=this.value);var s,f;return this.reverseAxis?(s=this.getEndPoint(),f=this.getStartPoint()):(s=this.getStartPoint(),f=this.getEndPoint()),s6(i,s,f,t),this.resetChildPositionState(t),this};const a6=Phaser.Display.Align.LEFT_CENTER,o6=Phaser.Display.Align.TOP_CENTER,h6=Phaser.Display.Align.RIGHT_CENTER,l6=Phaser.Display.Align.BOTTOM_CENTER;var u6=function(i){var t=this.childrenMap.indicator;if(t===void 0)return this;i===void 0&&(i=this.value);var s=this.reverseAxis,f,C,S=this.childrenMap.thumb;if(S)if(this.orientation===0){var r=Mt(S);if(s){var y=S.x-r*S.originX;f=this.right-y}else{var y=S.x-r*S.originX,e=y+r;f=e-this.left}}else{var u=St(S);if(s){var m=S.y-u*S.originY;C=this.bottom-m}else{var m=S.y-u*S.originY,d=m+u;C=d-this.top}}else this.orientation===0?f=this.width*i:C=this.height*i;qe(t,f,C);var l;s?l=this.orientation===0?h6:l6:l=this.orientation===0?a6:o6,em(t,this,l),this.resetChildPositionState(t)};const We=Phaser.Utils.Objects.GetValue,xa=Phaser.Utils.Objects.IsPlainObject,d6=Phaser.Math.Clamp,f6=Phaser.Math.Snap.To;let zs=class extends Ns(yt){constructor(t,s){super(t,s),this.type="rexSlider",this.bootProgressBase(s),this.reverseAxis=We(s,"reverseAxis",!1);var f=We(s,"background",void 0),C=We(s,"track",void 0),S=We(s,"indicator",void 0),r=We(s,"thumb",void 0);f&&(xa(f)&&(f=Be(t,f)),this.addBackground(f)),C&&(xa(C)&&(C=Be(t,C)),this.add(C,{proportion:1,expand:!0,minWidth:this.orientation===0?0:void 0,minHeight:this.orientation===1?0:void 0})),S&&(xa(S)&&(S=Be(t,S)),this.pin(S)),r&&(xa(r)&&(r=Be(t,r)),this.pin(r));var y=We(s,"input",0);switch(typeof y=="string"&&(y=c6[y]),y){case 0:r&&(r.setInteractive(),this.scene.input.setDraggable(r),r.on("drag",K3,this).on("dragstart",function(e){this.eventEmitter.emit("inputstart",e)},this).on("dragend",function(e){this.eventEmitter.emit("inputend",e)},this));break;case 1:this.on("pointerdown",wv,this).on("pointermove",wv,this).on("pointerdown",function(e){this.eventEmitter.emit("inputstart",e)},this).on("pointerup",function(e){this.eventEmitter.emit("inputend",e)},this).on("pointerover",function(e){e.isDown&&this.eventEmitter.emit("inputstart",e)},this).on("pointerout",function(e){e.isDown&&this.eventEmitter.emit("inputend",e)},this).setInteractive();break}this.addChildrenMap("background",f),this.addChildrenMap("track",C),this.addChildrenMap("indicator",S),this.addChildrenMap("thumb",r),this.setEnable(We(s,"enable",void 0)),this.setGap(We(s,"gap",void 0)),this.setValue(We(s,"value",0),We(s,"min",void 0),We(s,"max",void 0))}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setGap(t,s,f){return t&&s!==void 0&&(t=t/(f-s)),this.gap=t,this}get value(){return this._value}set value(t){this.gap!==void 0&&(t=f6(t,this.gap));var s=this._value;this._value=d6(t,0,1),s!==this._value&&(this.updateThumb(this._value),this.updateIndicator(this._value),this.eventEmitter.emit("valuechange",this._value,s,this.eventEmitter))}runLayout(t,s,f){return this.ignoreLayout?this:(super.runLayout(t,s,f),this.updateThumb(),this.updateIndicator(),this)}};const c6={pan:0,drag:0,click:1,none:-1};var v6={getStartPoint:Q3,getEndPoint:e6,updateThumb:r6,updateIndicator:u6};Object.assign(zs.prototype,v6);const xe=Phaser.Utils.Objects.GetValue;class Go extends yt{constructor(t,s){super(t,s),this.type="rexScrollBar";var f=xe(s,"background",void 0),C=xe(s,"buttons",void 0),S=xe(C,"top",xe(C,"left",void 0)),r=xe(C,"bottom",xe(C,"right",void 0)),y,e=xe(s,"slider",void 0);if(f&&this.addBackground(f),S){this.add(S);var u=new An(S);u.on("intouch",function(){if(this.enable){var c=y.reverseAxis?this.scrollStep:-this.scrollStep;this.value+=c}},this)}if(e){e.orientation=this.orientation,e.eventEmitter=this,e.value=null;var m;if(this.orientation===0){var d=xe(e,"width",void 0);m=d===void 0?1:0}else{var l=xe(e,"height",void 0);m=l===void 0?1:0}y=new zs(t,e),t.add.existing(y),this.add(y,{proportion:m})}if(r){this.add(r);var u=new An(r);u.on("intouch",function(){if(this.enable){var o=y.reverseAxis?-this.scrollStep:this.scrollStep;this.value+=o}},this)}var h=[S,r];this.addChildrenMap("background",f),this.addChildrenMap("slider",y),this.addChildrenMap("buttons",h);var n=xe(s,"valuechangeCallback",null);if(n!==null){var a=xe(s,"valuechangeCallbackScope",void 0);this.on("valuechange",n,a)}this.setEnable(xe(s,"enable",void 0)),this.setValue(xe(s,"value",0)),this.setScrollStep(xe(C,"step",.01))}setScrollStep(t){return this.scrollStep=t,this}get enable(){return this.childrenMap.slider?this.childrenMap.slider.enable:!1}set enable(t){this.childrenMap.slider&&this.childrenMap.slider.setEnable(t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(t){this.childrenMap.slider&&(this.childrenMap.slider.value=t)}setValue(t,s,f){return this.childrenMap.slider&&this.childrenMap.slider.setValue(t,s,f),this}addValue(t,s,f){return this.childrenMap.slider&&this.childrenMap.slider.addValue(t,s,f),this}getValue(t,s){return this.childrenMap.slider?this.childrenMap.slider.getValue(t,s):0}easeValueTo(t,s,f){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(t,s,f),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(t),this}setEaseValueFunction(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(t),this}}class p6 extends Go{constructor(t,s){s===void 0&&(s={});var f=Fs(s);s={slider:f},s.orientation=f.orientation,delete f.orientation,s.background=f.background,delete f.background,s.buttons=f.buttons,delete f.buttons,super(t,s);var C=this.childrenMap.slider;this.addChildrenMap("track",C.childrenMap.track),this.addChildrenMap("indicator",C.childrenMap.indicator),this.addChildrenMap("thumb",C.childrenMap.thumb)}}let g6=class extends Di{constructor(t,s){super(s),this.parent=t,this.init()}init(){this.start("IDLE")}next_IDLE(){var t,s=this.parent,f=s.dragState;return f.isDown&&(t=s.dragThreshold===0?"DRAG":"DRAGBEGIN"),t}update_IDLE(t,s){this.next()}next_DRAGBEGIN(){var t,s=this.parent,f=s.dragState;return f.isDown?t=f.pointer.getDistance()>=s.dragThreshold?"DRAG":"DRAGBEGIN":t="IDLE",t}update_DRAGBEGIN(t,s){this.next()}next_DRAG(){var t,s=this.parent,f=s.dragState;return f.isUp&&(s.outOfBounds?t="BACK":s.slidingEnable?t="SLIDE":t="IDLE"),t}update_DRAG(t,s){var f=this.parent,C=f.dragState;C.justMoved&&f.dragging(),this.next()}enter_DRAG(){this.parent.onDragStart()}exit_DRAG(){this.parent.onDragEnd()}next_SLIDE(){var t,s=this.parent,f=s.dragState;return f.isDown?t="DRAG":s.isSliding||(t="IDLE"),t}enter_SLIDE(){this.parent.onSliding()}exit_SLIDE(){this.parent.stop()}update_SLIDE(t,s){this.parent.sliding(t,s),this.next()}next_BACK(){var t,s=this.parent,f=s.dragState;return f.isDown?t="DRAG":s.isPullBack||(t="IDLE"),t}enter_BACK(){this.parent.onPullBack()}exit_BACK(){this.parent.stop()}update_BACK(t,s){this.parent.pullBack(t,s),this.next()}};const ya=Phaser.Utils.Objects.GetValue,m6=Phaser.Math.Distance.Between;class x6 extends _t{constructor(t,s){super(t,s),this._enable=void 0,t.setInteractive(ya(s,"inputConfig",void 0)),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.isInTouched=!1,this.holdStartTime=void 0,this.x=void 0,this.y=void 0,this.preX=void 0,this.preY=void 0,this.localX=void 0,this.localY=void 0,this.justMoved=!1,this.setEnable(ya(t,"enable",!0)),this.holdThreshold=ya(t,"holdThreshold",50),this.pointerOutReleaseEnable=ya(t,"pointerOutRelease",!0),this}boot(){this.parent.on("pointerdown",this.onPointIn,this),this.parent.on("pointerup",this.onPointOut,this),this.pointerOutReleaseEnable&&this.parent.on("pointerout",this.onPointOut,this),this.parent.on("pointermove",this.onPointerMove,this),this.scene.sys.events.on("preupdate",this.preupdate,this)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){this._enable!==t&&(t||(this.isInTouched=!1,this.pointer=void 0),this._enable=t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setPointerOutReleaseEnable(t){return t===void 0&&(t=!0),this.pointerOutReleaseEnable=t,this}get isDown(){return this.pointer&&this.pointer.isDown}get isUp(){return!this.isDown}get dx(){return this.x-this.preX}get dy(){return this.y-this.preY}get dt(){var t=Su(this.scene);return t}get speed(){if(this.x===this.preX&&this.y===this.preY)return 0;var t=m6(this.preX,this.preY,this.x,this.y),s=t/(this.dt*.001);return s}get speedX(){return this.dx/(this.dt*.001)}get speedY(){return this.dy/(this.dt*.001)}onPointIn(t,s,f){!this.enable||!t.isDown||this.pointer!==void 0||(this.pointer=t,this.localX=s,this.localY=f)}onPointOut(t){!this.enable||this.pointer!==t||(this.pointer=void 0)}onPointerMove(t,s,f){!this.enable||!t.isDown||this.pointer!==t||(this.localX=s,this.localY=f)}preupdate(t,s){if(this.enable){var f=this.pointer;this.justMoved=!1,f&&!this.isInTouched?(this.x=f.worldX,this.y=f.worldY,this.preX=f.worldX,this.preY=f.worldY,this.isInTouched=!0,this.holdStartTime=void 0,this.emit("touchstart",f,this.localX,this.localY)):f&&this.isInTouched?this.x===f.x&&this.y===f.y?this.holdStartTime===void 0?this.holdStartTime=t:t-this.holdStartTime>this.holdThreshold&&(this.preX=this.x,this.preY=this.y):(this.preX=this.x,this.preY=this.y,this.x=f.worldX,this.y=f.worldY,this.holdStartTime=void 0,this.justMoved=!0,this.emit("touchmove",f,this.localX,this.localY)):!f&&this.isInTouched&&(this.isInTouched=!1,this.holdStartTime=void 0,this.emit("touchend",f))}}}const el=Phaser.Utils.Objects.GetValue;class y6{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){return this.setValue(el(t,"value",0)),this.setSpeed(el(t,"speed",0)),this.setAcceleration(el(t,"acceleration",0)),this}reset(){this.setValue(0),this.setSpeed(0),this.setAcceleration(0)}setValue(t){return this.value=t,this}setSpeed(t){return this.speed=t,this}setAcceleration(t){return this.acceleration=t,this}updateSpeed(t){return this.acceleration!==0&&(this.speed+=this.acceleration*t,this.speed<0&&(this.speed=0)),this}getDeltaValue(t){return this.updateSpeed(t),this.speed<=0?0:this.speed*t}update(t){return this.updateSpeed(t),this.speed>0&&(this.value+=this.getDeltaValue(t)),this}get isMoving(){return this.speed>0}}class T6{constructor(){this.value,this.dir,this.movement=new y6}init(t,s,f,C,S){return this.value=t,this.end=S,S!==void 0?this.dir=t<S:this.dir=s,this.movement.setSpeed(f).setAcceleration(-C),this}stop(){this.movement.reset()}update(t){var s=this.movement.getDeltaValue(t);return this.dir||(s=-s),this.end===void 0?this.value+=s:s===0?this.value=this.end:(this.value+=s,this.dir?this.value>this.end&&(this.value=this.end):this.value<this.end&&(this.value=this.end)),this}get isMoving(){return this.movement.isMoving}}const Nt=Phaser.Utils.Objects.GetValue,C6=Phaser.Math.Clamp;class S6 extends _t{constructor(t,s){super(t,s);var f=Nt(s,"enable",!0);this._state=new g6(this,{enable:f,eventEmitter:!1});var C={inputConfig:Nt(s,"inputConfig",void 0),enable:f,pointerOutRelease:Nt(s,"pointerOutRelease",!0),eventEmitter:!1};this.dragState=new x6(t,C),this._enable=void 0,this._value=void 0,this._slowDown=new T6;var S=Nt(s,"valuechangeCallback",null);if(S!==null){var r=Nt(s,"valuechangeCallbackScope",void 0);this.on("valuechange",S,r)}if(S=Nt(s,"overmaxCallback",null),S!==null){var r=Nt(s,"overmaxCallbackScope",void 0);this.on("overmax",S,r)}if(S=Nt(s,"overminCallback",null),S!==null){var r=Nt(s,"overminCallbackScope",void 0);this.on("overmin",S,r)}this.resetFromJSON(s),this.boot()}resetFromJSON(t){this.setOrientationMode(Nt(t,"orientation",0)),this.setDragThreshold(Nt(t,"threshold",10)),this.setSlidingDeceleration(Nt(t,"slidingDeceleration",5e3)),this.setBackDeceleration(Nt(t,"backDeceleration",2e3));var s=Nt(t,"dragRate",1);s=s*(Nt(t,"dragReverse",!1)?-1:1),this.setDragRate(s);var f=Nt(t,"bounds",void 0);return f?this.setBounds(f):this.setBounds(Nt(t,"max",0),Nt(t,"min",0)),this.setValue(Nt(t,"value",this.maxValue||0)),this.setEnable(Nt(t,"enable",!0)),this}boot(){this.scene.sys.events.on("preupdate",this._state.update,this._state)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this._state.update,this._state),this._state.destroy(t),this.dragState.destroy(t),this._state=void 0,this.dragState=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return this._enable=t,this._state.setEnable(t),this.dragState.setEnable(t),this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setOrientationMode(t){return typeof t=="string"&&(t=P6[t]),this.orientationMode=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setSlidingDeceleration(t){return this.slidingDeceleration=t,this}setBackDeceleration(t){return this.backDeceleration=t,this}setDragRate(t){return this.dragRate=t,this}setBounds(t,s){if(Array.isArray(t)){var f=t;t=f[0],s=f[1]}return t<s?(this.minValue=t,this.maxValue=s):(this.minValue=s,this.maxValue=t),this}get value(){return this._value}set value(t){if(t!==this._value){var s=this._value,f=this.overMax(t),C=this.overMin(t);f&&this.emit("overmax",t,s),C&&this.emit("overmin",t,s),this.backEnable||(f&&(t=this.maxValue),C&&(t=this.minValue)),this._value=t,this.emit("valuechange",t,s)}}setValue(t,s){return s===void 0&&(s=!1),s&&(t=C6(t,this.minValue,this.maxValue)),this.value=t,this}addValue(t,s){return this.setValue(this.value+t,s),this}get state(){return this._state.state}get isDragging(){return this.dragState.isInTouched}get outOfMaxBound(){return this.overMax(this.value)}get outOfMinBound(){return this.overMin(this.value)}get outOfBounds(){return this.outOfMinBound||this.outOfMaxBound}overMax(t){return this.maxValue!=null&&t>this.maxValue}overMin(t){return this.minValue!=null&&t<this.minValue}get backEnable(){return typeof this.backDeceleration=="number"}get isPullBack(){return this._slowDown.isMoving}get slidingEnable(){return typeof this.slidingDeceleration=="number"}get isSliding(){return this._slowDown.isMoving}get dragDelta(){var t;return this.orientationMode===0?t=this.dragState.dy:this.orientationMode===1?t=this.dragState.dx:t=0,t*=this.dragRate,t}get dragSpeed(){var t;return this.orientationMode===0?t=this.dragState.speedY:this.orientationMode===1?t=this.dragState.speedX:t=0,t*=this.dragRate,t}onDragStart(){this.emit("dragstart")}onDragEnd(){this.emit("dragend")}dragging(){this.value+=this.dragDelta}onSliding(){var t=this.value,s=this.dragSpeed;if(s===0){this._slowDown.stop(),this._state.next();return}var f=this.slidingDeceleration;this._slowDown.init(t,s>0,Math.abs(s),f)}sliding(t,s){s*=.001;var f=this._slowDown.update(s).value;this.overMax(f)?(this.value=this.maxValue,this._slowDown.stop()):this.overMin(f)?(this.value=this.minValue,this._slowDown.stop()):this.value=f}onPullBack(){var t=this.value,s=this.outOfMinBound?this.minValue:this.maxValue,f=Math.abs(s-t),C=this.backDeceleration,S=Math.sqrt(2*C*f);this._slowDown.init(t,void 0,S,C,s)}pullBack(t,s){s*=.001,this.value=this._slowDown.update(s).value,this._slowDown.isMoving||this._state.next()}stop(){this._slowDown.stop()}}const P6={y:0,v:0,vertical:0,x:1,h:1,horizontal:1},Ta=Phaser.Utils.Objects.GetValue;class E6 extends _t{constructor(t,s){if(super(t,s),this.parent!==this.scene?this.focusMode=Ta(s,"focus",!1):this.focusMode=!1,this.setSpeed(Ta(s,"speed",.1)),this.setEnable(Ta(s,"enable",!0)),!this.focusMode)this.scene.input.on("wheel",this.onSceneScroll,this);else{var t=this.parent;t.setInteractive(Ta(s,"inputConfig",void 0)).on("wheel",function(C,S,r,y,e){this.enable&&this.scroll(r)},this)}}destroy(){this.focusMode||this.scene.input.off("wheel",this.onSceneScroll,this)}onSceneScroll(t,s,f,C,S,r){this.enable&&this.scroll(C)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setSpeed(t){return this.speed=t,this}scroll(t){t*=this.speed,this.emit("scroll",t,this.parent,this)}}const Vt=Phaser.Utils.Objects.GetValue;var M6=function(i,t){var s=i.scene,f=Bo(t),C=new yt(s,{orientation:f}),S=Vt(t,"child.gameObject",void 0),r=0,y=Vt(t,"slider",void 0),e,u=0,m=Vt(y,"position",0);typeof m=="string"&&(m=w6[m]);var d=m===0,l=Vt(t,"scroller",!0),h,n=Vt(t,"mouseWheelScroller",!1),a;if(S){var c=Vt(t,"space.child",0);if(i.childMargin={},typeof c!="number"){var o=c;f===0?(r={left:Vt(o,"left",0),right:Vt(o,"right",0)},i.childMargin.top=Vt(o,"top",0),i.childMargin.bottom=Vt(o,"bottom",0)):(r={top:Vt(o,"top",0),bottom:Vt(o,"bottom",0)},i.childMargin.top=Vt(o,"left",0),i.childMargin.bottom=Vt(o,"right",0))}else y&&(f===0?r=d?{right:c}:{left:c}:r=d?{bottom:c}:{top:c}),i.childMargin.top=0,i.childMargin.bottom=0;y?(y===!0&&(y={}),y.orientation=C.orientation===0?1:0,e=new p6(s,y),u=Vt(t,"space.slider",0),i.hideUnscrollableSlider=Vt(y,"hideUnscrollableSlider",!1),i.adaptThumbSizeMode=Vt(y,"adaptThumbSize",!1),i.minThumbSize=Vt(y,"minThumbSize",void 0)):(i.adaptThumbSizeMode=!1,i.minThumbSize=void 0),l&&(l===!0&&(l={}),l.orientation=f,h=new S6(S,l)),n&&(a=new E6(S,n)),e&&!d&&C.add(e,{proportion:0,align:"center",padding:u,expand:!0});var v=Vt(t,"child.proportion",1),g=Vt(t,"child.expand",!0);C.add(S,{proportion:v,align:"center",padding:r,expand:g}),e&&d&&C.add(e,{proportion:0,align:"center",padding:u,expand:!0})}return e&&e.on("valuechange",function(p){i.t=p,i.emit("scroll",i)}),h&&h.on("valuechange",function(p){i.childOY=p,i.emit("scroll",i)}),a&&a.on("scroll",function(p){i.addChildOY(-p,!0)}),i.addChildrenMap("child",S),i.addChildrenMap("slider",e),i.addChildrenMap("scroller",h),i.addChildrenMap("mouseWheelScroller",a),C},w6={right:0,left:1,bottom:0,top:1},R6=function(){var i=this.topChildOY,t=this.bottomChildOY,s=this.childrenMap.scroller,f=this.childrenMap.slider;return s&&s.setBounds(t,i),f&&f.setEnable(t!==i),this.updateController(),f&&(this.hideUnscrollableSlider&&this.setChildVisible(f,this.isOverflow),this.adaptThumbSizeMode&&A6.call(this)),this},A6=function(){var i=Math.min(this.childVisibleHeight/this.childHeight,1),t=this.childrenMap.slider,s=t.childrenMap.track,f=t.childrenMap.thumb,C=this.minThumbSize;if(this.scrollMode===0){var S=s.displayHeight*i;C!==void 0&&S<C&&(S=C),qe(f,void 0,S)}else{var r=s.displayWidth*i;C!==void 0&&r<C&&(r=C),qe(f,r,void 0)}O6.call(this)},O6=function(){var i=this.childrenMap.slider,t=i.minWidth,s=i.minHeight;i.minWidth=i.width,i.minHeight=i.height,i.layout(),i.minWidth=t,i.minHeight=s},b6=function(){var i=this.childrenMap.scroller,t=this.childrenMap.slider;i&&i.setValue(this.childOY),t&&t.setValue(this.t)};const ai=Phaser.Utils.Objects.GetValue,Av=Phaser.Math.Clamp;class No extends yt{constructor(t,s){s===void 0&&(s={});var f=Bo(s);s.orientation=f===0?1:0,super(t,s),this.type=ai(s,"type","rexScrollable");var C=ai(s,"background",void 0),S=M6(this,s),r=ai(s,"header",void 0),y=ai(s,"footer",void 0);if(C&&this.addBackground(C),r){var e=ai(s,"align.header","center"),u=ai(s,"space.header",0),m;f===0?m={bottom:u}:m={right:u};var d=ai(s,"expand.header",!0);this.add(r,{proportion:0,align:e,padding:m,expand:d})}if(S&&this.add(S,{proportion:1,align:"center",padding:0,expand:!0}),y){var e=ai(s,"align.footer","center"),l=ai(s,"space.footer",0),m;f===0?m={top:l}:m={left:l};var d=ai(s,"expand.footer",!0);this.add(y,{proportion:0,align:e,padding:m,expand:d})}this.addChildrenMap("background",C),this.addChildrenMap("header",r),this.addChildrenMap("footer",y),this.runLayoutFlag=!1}runLayout(t,s,f){return this.ignoreLayout?this:(super.runLayout(t,s,f),this.resizeController(),this.runLayoutFlag||(this.runLayoutFlag=!0,this.setT(0)),this)}set t(t){var s=this.childMargin;if(s.top!==0||s.bottom!==0){var f=this.childrenMap.child,C=f.topChildOY-f.bottomChildOY,S=C+s.top+s.bottom,r=S*t-s.top;t=r/C}this.childrenMap.child.t=t,this.updateController()}get t(){var t=this.childrenMap.child.t,s=this.childMargin;if(s.top!==0||s.bottom!==0){var f=this.childrenMap.child,C=f.topChildOY-f.bottomChildOY,S=C+s.top+s.bottom,r=C*t+s.top;t=r/S}return t}set childOY(t){this.childrenMap.child.childOY=t,this.updateController()}get childOY(){return this.childrenMap.child.childOY}get topChildOY(){return this.childrenMap.child.topChildOY+this.childMargin.top}get bottomChildOY(){return this.childrenMap.child.bottomChildOY-this.childMargin.bottom}get childVisibleHeight(){return this.childrenMap.child.childVisibleHeight}get childHeight(){return this.childrenMap.child.childHeight}get isOverflow(){var t=this.childrenMap.child;return t.topChildOY!==t.bottomChildOY}get scrollMode(){return this.orientation===0?1:0}setChildOY(t,s){return s===void 0&&(s=!1),s&&(t=Av(t,this.bottomChildOY,this.topChildOY)),this.childOY=t,this}addChildOY(t,s){return this.setChildOY(this.childOY+t,s),this}setT(t,s){return s===void 0&&(s=!1),s&&(t=Av(t,0,1)),this.t=t,this}addT(t,s){return this.setT(this.t+t,s),this}scrollToTop(){return this.t=0,this}scrollToBottom(){if(this.t=1,this.t===0)return this;do this.t=1;while(this.t!==1);return this}get sliderEnable(){var t=this.childrenMap.slider;return t?t.enable:!1}set sliderEnable(t){var s=this.childrenMap.slider;s&&s.setEnable(t)}setSliderEnable(t){return t===void 0&&(t=!0),this.sliderEnable=t,this}get scrollerEnable(){var t=this.childrenMap.scroller;return t?t.enable:!1}set scrollerEnable(t){var s=this.childrenMap.scroller;s&&s.setEnable(t)}setScrollerEnable(t){return t===void 0&&(t=!0),this.scrollerEnable=t,this}get mouseWheelScrollerEnable(){var t=this.childrenMap.mouseWheelScroller;return t?t.enable:!1}set mouseWheelScrollerEnable(t){var s=this.childrenMap.mouseWheelScrollerEnable;s&&s.setEnable(t)}setMouseWheelScrollerEnable(t){return t===void 0&&(t=!0),this.mouseWheelScrollerEnable=t,this}setDropZoneEnable(t){t===void 0&&(t=!0);var s=this.childrenMap.child;return s.setInteractive(),s.input.dropZone=t,this}}var F6={resizeController:R6,updateController:b6};Object.assign(No.prototype,F6);const Ae=0,Ve=1,ze=2;var Gr=function(i){var t;return Vm(i)?t=ze:ud(i)?t=Ae:t=Ve,t},gd=function(i,t,s){var f=Gr(i);switch(f){case Ae:s=i.getWrappedText(t);break;case Ve:s=i.getPenManager(t,s);break;case ze:i.maxWidth>0?s=i.setText(t).getTextBounds().wrappedText.split(`
`):s=t.split(`
`);break}return s},L6=function(i){return i!==void 0&&(this.text=i),this.lines=gd(this.textObject,this.text,this.lines),this.linesCount=this.lines.length,this._textHeight=void 0,this._textVisibleHeight=void 0,this.updateTextObject(),this},$m=function(i){return(i-this.textLineSpacing)/(this.textLineHeight+this.textLineSpacing)},Km=function(i){return i*(this.textLineHeight+this.textLineSpacing)-this.textLineSpacing},D6=function(i){var t=i+this.visibleLinesCount+1,s;switch(this.textObjectType){case Ae:s=this.lines.slice(i,t).join(`
`);break;case Ve:var f=this.lines.getLineStartIndex(i),C=this.lines.getLineEndIndex(t-1);s=this.lines.getSliceTagText(f,C,!0);break;case ze:s=this.lines.slice(i,t).join(`
`);break}return s},md=function(i,t){var s=Gr(i);switch(s){case Ae:var S=i.style,f=S.wordWrapWidth,C=S.wordWrapCallback;S.wordWrapWidth=0,S.wordWrapCallback=void 0,i.setText(t),S.wordWrapWidth=f,S.wordWrapCallback=C;break;case Ve:var S=i.style,r=S.wrapMode;S.wrapMode=0,i.setText(t),S.wrapMode=r;break;case ze:var y=i._maxWidth;i._maxWidth=0,i.setText(t),i._maxWidth=y;break}},jm=function(){var i=this.textObject.rexSizer;this.textObject.y+=i.offsetY-i.preOffsetY,i.preOffsetY=i.offsetY,this.resetChildPositionState(this.textObject),this.textCropEnable&&I6.call(this)},I6=function(){if(this.textObject.setCrop){var i=this.textObject.rexSizer.offsetY,t,s;i<=0?(t=-i,s=this.height):(t=0,s=this.height-i),this.textObject.setCrop(0,t,this.width,s)}},B6=function(){var i=Math.max(Math.floor($m.call(this,-this.textOY)),0),t=Km.call(this,i)+this.textOY,s=D6.call(this,i);return md(this.textObject,s),this.textObject.rexSizer.offsetY=t,jm.call(this),this},G6=function(){return this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,br.call(this),this},N6=function(i,t,s){if(s+=this.textLineHeight+this.textLineSpacing,!(this.textObjectWidth===t&&this._textObjectRealHeight===s)){switch(this.textObjectWidth=t,this._textObjectRealHeight=s,this.textObjectType){case Ae:case Ve:i.setFixedSize(t,s);var f=i.style,C=Math.max(t,0);this.textObjectType===Ae?f.wordWrapWidth=C:(f.wrapMode===0&&(f.wrapMode=1),f.wrapWidth=C);break;case ze:i.setMaxWidth(t);break}this.setText()}},V6=function(){var i,t,s,f=this.left,C=this.top,S,r,y,e;i=this.textObject,i.rexSizer.hidden||(t=i.rexSizer,s=t.padding,S=f+s.left,r=C+s.top,y=this.width-s.left-s.right,e=this.height-s.top-s.bottom,N6.call(this,i,y,e),wr(i,S,r,y,e,t.align),t.preOffsetY=0,jm.call(this),this.textMask&&(this.textMask.setPosition().resize(),this.resetChildPositionState(this.textMask)))};const z6={setText:L6,updateTextObject:B6,preLayout:G6,layoutChildren:V6},Ov=Phaser.Utils.Objects.IsPlainObject,we=Phaser.Utils.Objects.GetValue,U6=Phaser.Display.Align.TOP_LEFT;class Zm extends Vs{constructor(t,s,f,C,S,r){Ov(s)?(r=s,s=we(r,"x",0),f=we(r,"y",0),C=we(r,"width",void 0),S=we(r,"height",void 0)):Ov(C)&&(r=C,C=we(r,"width",void 0),S=we(r,"height",void 0)),super(t,s,f,C,S,r),this.type="rexTextBlock",this.textObject=void 0,this.linesCount=0,this.textMask=void 0,this.textObjectType=void 0,this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,this._textObjectRealHeight=0,this.lines=void 0,this.text=we(r,"content",""),this._textOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setClampMode(we(r,"clamplTextOY",!0)),this.alwaysScrollable=we(r,"alwaysScrollable",!1);var y=we(r,"background",void 0),e=we(r,"text",void 0);e===void 0&&(e=Y6(t)),this.textCropEnable=we(r,"textCrop",!!e.setCrop);var u=we(r,"textMask",!this.textCropEnable);y&&this.addBackground(y),this.add(e),this.sizerChildren=[e];var m=this.getSizerConfig(e);m.align=U6,m.padding=Bn(0),m.expand=!0,this.textObject=e,this.textObjectType=Gr(e),m.preOffsetY=0,m.offsetY=0,u&&(this.textMask=Ai.call(this,this.textObject,this)),this.addChildrenMap("background",y),this.addChildrenMap("text",e)}destroy(t){if(this.scene){if(this.textObject=void 0,this.textMask=void 0,this.lines){switch(this.textObjectType){case Ae:this.lines.length=0;break;case Ve:this.lines.destroy();break;case ze:this.lines.length=0;break}this.lines=void 0}super.destroy(t)}}setClampMode(t){return t===void 0&&(t=!0),this.clampTextOY=t,this}get textLineHeight(){if(this._textLineHeight===void 0){var t;switch(this.textObjectType){case Ae:case Ve:var s=this.textObject.style;t=s.metrics.fontSize+s.strokeThickness;break;case ze:var f=this.textObject.fontSize/this.textObject.fontData.size;t=this.textObject.fontData.lineHeight*f;break}this._textLineHeight=t}return this._textLineHeight}get textLineSpacing(){if(this._textLineSpacing===void 0){var t;switch(this.textObjectType){case Ae:case Ve:t=this.textObject.lineSpacing;break;case ze:t=0;break}this._textLineSpacing=t}return this._textLineSpacing}get visibleLinesCount(){return this._visibleLinesCount===void 0&&(this._visibleLinesCount=Math.floor($m.call(this,this._textObjectRealHeight))),this._visibleLinesCount}get topTextOY(){return 0}get bottomTextOY(){return-this.textVisibleHeight}get textHeight(){return this._textHeight===void 0&&(this._textHeight=Km.call(this,this.linesCount)),this._textHeight}get textObjectHeight(){return this._textObjectRealHeight-(this.textLineHeight+this.textLineSpacing)}get textVisibleHeight(){if(this._textVisibleHeight===void 0){var t=this.textHeight-this.textObjectHeight;!this.alwaysScrollable&&t<0&&(t=0),this._textVisibleHeight=t}return this._textVisibleHeight}textOYExceedTop(t){return t===void 0&&(t=this.textOY),t>this.topTextOY}textOYExeceedBottom(t){return t===void 0&&(t=this.textOY),t<this.bottomTextOY}get textOY(){return this._textOY}set textOY(t){var s=this.topTextOY,f=this.bottomTextOY,C=this.textOYExceedTop(t),S=this.textOYExeceedBottom(t);this.clampTextOY&&(this.visibleLinesCount>this.linesCount?t=0:C?t=s:S&&(t=f)),this._textOY!==t&&(this._textOY=t,this.updateTextObject()),C&&(this.execeedTopState||this.emit("execeedtop",this,t,s)),this.execeedTopState=C,S&&(this.execeedBottomState||this.emit("execeedbottom",this,t,f)),this.execeedBottomState=S}setTextOY(t){return this.textOY=t,this}set t(t){this.textOY=-this.textVisibleHeight*t}get t(){var t=this.textVisibleHeight;return t===0?0:this.textOY/-t}setTextOYByPercentage(t){return this.t=t,this}}var Y6=function(i){return i.add.text(0,0,"")};Object.assign(Zm.prototype,z6);var k6=function(i){Object.defineProperty(i,"childOY",{configurable:!0,get:function(){return i.textOY},set:function(t){i.textOY=t}}),Object.defineProperty(i,"topChildOY",{get:function(){return i.topTextOY}}),Object.defineProperty(i,"bottomChildOY",{get:function(){return i.bottomTextOY}}),Object.defineProperty(i,"childVisibleHeight",{get:function(){return i.textObjectHeight}}),Object.defineProperty(i,"childHeight",{get:function(){return i.textHeight}})};const X6={setText(i){var t=this.childrenMap.child;return t.setText(i),this.resizeController(),this},appendText(i){return this.setText(this.text+i),this}};Phaser.Math.Clamp;const W6={scrollToLine(i){return this.setChildOY(-this.lineHeight*i),this},scrollToNextLine(i){i===void 0&&(i=1);var t=this.lineIndex+i;return this.scrollToLine(t),this}},Si=Phaser.Utils.Objects.GetValue;class Gn extends No{constructor(t,s){s===void 0&&(s={});var f=Si(s,"text",void 0),C=Si(s,"textWidth",void 0),S=Si(s,"textHeight",void 0),r=Si(s,"textCrop",!!f.setCrop),y=Si(s,"textMask",!r),e=Si(s,"content",""),u=new Zm(t,{width:C,height:S,text:f,textMask:y,textCrop:r&&!y,content:e,clamplTextOY:Si(s,"clamplChildOY",!1),alwaysScrollable:Si(s,"alwaysScrollable",!1)});t.add.existing(u);var m=C===void 0?1:0,d=S===void 0;k6(u),s.scrollMode=0,s.type="rexTextArea",s.child={gameObject:u,proportion:m,expand:d};var l=Si(s,"space",void 0);l&&(l.child=l.text),super(t,s),this.addChildrenMap("text",f)}get text(){return this.childrenMap.child.text}get lineHeight(){var t=this.childrenMap.child;return t.textLineHeight+t.textLineSpacing}get lineIndex(){return Math.floor(-this.childOY/this.lineHeight)}get linesCount(){return this.childrenMap.child.linesCount}get contentHeight(){return this.childrenMap.child.textHeight}}Object.assign(Gn.prototype,X6,W6);const Ca=Phaser.Utils.Objects.GetValue;var H6=function(i,t,s){t=t?fe(t):{};var f=Ca(s,"background",Be),C=Ca(s,"text",Nm),S=Ca(s,"track",Be),r=Ca(s,"thumb",Be);f?t.background=f(i,t.background):delete t.background,C?t.text=C(i,t.text):delete t.text;var y=t.slider;y!==!1&&(y===void 0&&(y={}),S?y.track=S(i,y.track):delete y.track,r?y.thumb=r(i,y.thumb):delete y.thumb,t.slider=y);var e=new Gn(i,t);return i.add.existing(e),e};const $6=Phaser.Utils.Objects.GetValue;var K6=function(i,t,s){var f=$6(t,"$type");f===void 0&&t&&(t.hasOwnProperty("slider")||t.hasOwnProperty("scroller"))&&(f="textarea");var C;switch(f){case"textarea":C=new H6(i,t,s);break;default:C=new Ge(i,t,s);break}return i.add.existing(C),C};const j6=Phaser.Utils.Objects.GetValue;class xd extends Br{constructor(t,s,f){s=s?fe(s):{},f===void 0&&(f={});var C=j6(f,"background",Be);C?s.background=C(t,s.background):delete s.background,s.title=Ge(t,s.title,f.title),s.content=K6(t,s.content,f.content),s.content instanceof Gn&&Ei(s,"height")&&!Ei(s,"proportion.content")&&it(s,"proportion.content",1);var S=s.button,r=s.buttonA||S,y=s.buttonB||S,e=s.buttonMode;e===void 0&&(e=r&&y?2:r?1:0);var u=f.button,m=f.buttonA||u,d=f.buttonB||u;switch(e){case 2:s.actions=[Ge(t,r,m),Ge(t,y,d)];break;case 1:s.actions=[Ge(t,r,m)];break;case 0:break;default:s.actions=[];break}var l=s.choice;l&&(s.choices=[]),super(t,s),this.type="rexConfirmDialog",this.buttonMode=e,this.defaultActionConfig=S,this.defaultActionButtonCreator=u,this.defaultChoiceConfig=l,this.defaultChoiceCreator=f.choice;var h=this.childrenMap.actions;this.addChildrenMap("buttonA",h?h[0]:null),this.addChildrenMap("buttonB",h?h[1]:null),H3.call(this)}}Object.assign(xd.prototype,z3);st.register("confirmDialog",function(i,t){var s=new xd(this.scene,i,t);return this.scene.add.existing(s),s});it(window,"RexPlugins.UI.ConfirmDialog",xd);const Sa=Phaser.Utils.Objects.GetValue;var Nr=function(i,t,s){var f=Sa(i,`proportion.${t}`,s.proportion),C=Sa(i,`align.${t}`,"center"),S=Sa(i,`space.${t}`,void 0);if(typeof S=="number"&&s.paddingKey){var r=S;S={},S[s.paddingKey]=r}var y=Sa(i,`expand.${t}`,!0);return{proportion:f,align:C,padding:S,expand:y}},Vo=function(i){return Nr(i,"header",{proportion:0,paddingKey:"bottom"})},zo=function(i){return Nr(i,"leftSide",{proportion:0,paddingKey:"right"})},Uo=function(i){return Nr(i,"content",{proportion:1})},Yo=function(i){return Nr(i,"rightSide",{proportion:0,paddingKey:"left"})},ko=function(i){return Nr(i,"footer",{proportion:0,paddingKey:"top"})},wi=function(i){return{proportion:1,align:"center",padding:0,expand:!0}},Ri=function(i,t){var s=new yt(i,{orientation:t});return i.add.existing(s),s},Z6=function(i){var t=this.scene,s=i.header;s&&this.add(s,Vo(i));var f=Ri(t,0);this.add(f,wi());var C=i.leftSide;C&&f.add(C,zo(i));var S=i.content;S&&f.add(S,Uo(i));var r=i.rightSide;r&&f.add(r,Yo(i));var y=i.footer;y&&this.add(y,ko(i))},J6=function(i){var t=this.scene,s=i.header;s&&this.add(s,Vo(i));var f=Ri(t,0);this.add(f,wi());var C=i.leftSide;C&&f.add(C,zo(i));var S=Ri(t,1);f.add(S,wi());var r=Ri(t,0);S.add(r,wi());var y=i.content;y&&r.add(y,Uo(i));var e=i.rightSide;e&&r.add(e,Yo(i));var u=i.footer;u&&S.add(u,ko(i))},Q6=function(i){var t=this.scene,s=i.header;s&&this.add(s,Vo(i));var f=Ri(t,0);this.add(f,wi());var C=Ri(t,1);f.add(C,wi());var S=Ri(t,0);C.add(S,wi());var r=i.leftSide;r&&S.add(r,zo(i));var y=i.content;y&&S.add(y,Uo(i));var e=i.footer;e&&C.add(e,ko(i));var u=i.rightSide;u&&f.add(u,Yo(i))},q6=function(i){var t=this.scene,s=i.header;s&&this.add(s,Vo(i));var f=Ri(t,0);this.add(f,wi());var C=i.leftSide;C&&f.add(C,zo(i));var S=Ri(t,1);f.add(S,wi());var r=i.content;r&&S.add(r,Uo(i));var y=i.footer;y&&S.add(y,ko(i));var e=i.rightSide;e&&f.add(e,Yo(i))};const bv=Phaser.Utils.Objects.GetValue,Fv=[Z6,J6,Q6,q6];var _6=function(i){this.clear(!0);var t=bv(i,"background",void 0);t&&this.addBackground(t);var s=bv(i,"layoutMode",0);typeof s=="string"&&(s=tD[s.toUpperCase()]);var f=Fv[s]||Fv[0];f.call(this,i),this.addChildrenMap("background",i.background),this.addChildrenMap("header",i.header),this.addChildrenMap("leftSide",i.leftSide),this.addChildrenMap("content",i.content),this.addChildrenMap("rightSide",i.rightSide),this.addChildrenMap("footer",i.footer)};const tD={FFF:0,LFF:1,FFR:2,LFR:3};class Xo extends yt{constructor(t,s){s===void 0&&(s={}),s.orientation=1,super(t,s),this.type="rexHolyGrail",this.build(s)}}var eD={build:_6};Object.assign(Xo.prototype,eD);st.register("holyGrail",function(i){var t=new Xo(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.HolyGrail",Xo);const iD={getButtonsSizer(i){return this.childrenMap[`${i}ButtonsSizer`]},getButton(i,t){var s=this.getButtonsSizer(i);return s?s.getButton(t):void 0},setButtonEnable(i,t,s){return this.getButtonsSizer(i).setButtonEnable(t,s),this},setLeftButtonEnable(i,t){return this.childrenMap.leftButtonsSizer.setButtonEnable(i,t),this},setRightButtonEnable(i,t){return this.childrenMap.rightButtonsSizer.setButtonEnable(i,t),this},setTopButtonEnable(i,t){return this.childrenMap.topButtonsSizer.setButtonEnable(i,t),this},setBottomButtonEnable(i,t){return this.childrenMap.bottomButtonsSizer.setButtonEnable(i,t),this},toggleButtonEnable(i,t){return this.getButtonsSizer(i).toggleButtonEnable(t),this},toggleLeftButtonEnable(i){return this.childrenMap.leftButtonsSizer.toggleButtonEnable(i),this},toggleRightButtonEnable(i){return this.childrenMap.rightButtonsSizer.toggleButtonEnable(i),this},toggleTopButtonEnable(i){return this.childrenMap.topButtonsSizer.toggleButtonEnable(i),this},toggleBottomButtonEnable(i){return this.childrenMap.bottomButtonsSizer.toggleButtonEnable(i),this},getButtonEnable(i,t){return this.getButtonsSizer(i).getButtonEnable(t)},getLeftButtonEnable(i){return this.childrenMap.leftButtonsSizer.getButtonEnable(i)},getRightButtonEnable(i){return this.childrenMap.rightButtonsSizer.getButtonEnable(i)},getTopButtonEnable(i){return this.childrenMap.topButtonsSizer.getButtonEnable(i)},getBottomButtonEnable(i){return this.childrenMap.bottomButtonsSizer.getButtonEnable(i)},emitButtonClick(i,t){var s=this.getButtonsSizer(i);return s?(s.emitButtonClick(t),this):this},emitLeftButtonClick(i){return this.childrenMap.leftButtonsSizer.emitButtonClick(i),this},emitRightButtonClick(i){return this.childrenMap.rightButtonsSizer.emitButtonClick(i),this},emitTopButtonClick(i){return this.childrenMap.topButtonsSizer.emitButtonClick(i),this},emitBottomButtonClick(i){return this.childrenMap.bottomButtonsSizer.emitButtonClick(i),this},getLeftButton(i){return this.childrenMap.leftButtonsSizer.getButton(i)},getRightButton(i){return this.childrenMap.rightButtonsSizer.getButton(i)},getTopButton(i){return this.childrenMap.topButtonsSizer.getButton(i)},getBottomButton(i){return this.childrenMap.bottomButtonsSizer.getButton(i)},showButton(i,t){return $i(this.getButton(i,t)),this},showLeftButton(i){return $i(this.getLeftButton(i)),this},showRightButton(i){return $i(this.getRightButton(i)),this},showTopButton(i){return $i(this.getTopButton(i)),this},showBottomButton(i){return $i(this.getBottomButton(i)),this},hideButton(i,t){return Ki(this.getButton(i,t)),this},hideLeftButton(i){return Ki(this.getLeftButton(i)),this},hideRightButton(i){return Ki(this.getRightButton(i)),this},hideTopButton(i){return Ki(this.getTopButton(i)),this},hideBottomButton(i){return Ki(this.getBottomButton(i)),this},addButton(i,t){return this.getButtonsSizer(i).addButton(t),this},addLeftButton(i){return this.addButton("left",i),this},addRightButton(i){return this.addButton("right",i),this},addTopButton(i){return this.addButton("top",i),this},removeButton(i,t,s){return this.getButtonsSizer(i).removeButton(t,s),this},removeLeftButton(i,t){return this.removeButton("left",i,t),this},removeRightButton(i,t){return this.removeButton("right",i,t),this},removeTopButton(i,t){return this.removeButton("top",i,t),this},removeBottomButton(i,t){return this.removeButton("bottom",i,t),this},clearButtons(i,t){return this.getButtonsSizer(i).clearButtons(t),this},clearLeftButtons(i){return this.clearButtons("left",i),this},clearRightButtons(i){return this.clearButtons("right",i),this},clearTopButtons(i){return this.clearButtons("top",i),this},clearBottomButtonss(i){return this.clearButtons("bottom",i),this},forEachButton(i,t,s){return this.getButtonsSizer(i).forEachButtton(t,s),this},forEachLeftButton(i,t){return this.childrenMap.leftButtonsSizer.forEachButtton(i,t),this},forEachRightButton(i,t){return this.childrenMap.rightButtonsSizer.forEachButtton(i,t),this},forEachTopButton(i,t){return this.childrenMap.topButtonsSizer.forEachButtton(i,t),this},forEachBottomButton(i,t){return this.childrenMap.bottomButtonsSizer.forEachButtton(i,t),this}},bt=Phaser.Utils.Objects.GetValue;class yd extends Ii{constructor(t,s){s===void 0&&(s={}),s.column=3,s.row=3,super(t,s),this.type="rexTabs",this.eventEmitter=bt(s,"eventEmitter",this);var f=bt(s,"background",void 0),C=bt(s,"panel",void 0),S=bt(s,"leftButtons",void 0),r=bt(s,"leftButtonsBackground",void 0),y,e=bt(s,"rightButtons",void 0),u=bt(s,"rightButtonsBackground",void 0),m,d=bt(s,"topButtons",void 0),l=bt(s,"topButtonsBackground",void 0),h,n=bt(s,"bottomButtons",void 0),a=bt(s,"bottomButtonsBackground",void 0),c,o=bt(s,"click",void 0);if(f&&this.addBackground(f),C&&this.add(C,1,1,"center",0,!0),S){var v=bt(s,"space.leftButtonsOffset",0),g=bt(s,"space.leftButton",0);y=new qt(t,{groupName:"left",background:r,buttons:S,orientation:1,space:{item:g},align:bt(s,"align.leftButtons",void 0),click:o,eventEmitter:this.eventEmitter});var p={top:v};this.add(y,0,1,"top",p,!1)}if(e){var x=bt(s,"space.rightButtonsOffset",0),T=bt(s,"space.rightButton",0);m=new qt(t,{groupName:"right",background:u,buttons:e,orientation:1,space:{item:T},align:bt(s,"align.rightButtons",void 0),click:o,eventEmitter:this.eventEmitter});var p={top:x};this.add(m,2,1,"top",p,!1)}if(d){var E=bt(s,"space.topButtonsOffset",0),M=bt(s,"space.topButton",0);h=new qt(t,{groupName:"top",background:l,buttons:d,orientation:0,space:{item:M},align:bt(s,"align.topButtons",void 0),click:o,eventEmitter:this.eventEmitter});var p={left:E};this.add(h,1,0,"left",p,!1)}if(n){var P=bt(s,"space.bottomButtonsOffset",0),w=bt(s,"space.bottomButton",0);c=new qt(t,{groupName:"bottom",background:a,buttons:n,orientation:0,space:{item:w},align:bt(s,"align.bottomButtons",void 0),click:o,eventEmitter:this.eventEmitter});var p={left:P};this.add(c,1,2,"left",p,!1)}this.addChildrenMap("background",f),this.addChildrenMap("panel",C),this.addChildrenMap("leftButtons",S),this.addChildrenMap("rightButtons",e),this.addChildrenMap("topButtons",d),this.addChildrenMap("bottomButtons",n),this.addChildrenMap("leftButtonsSizer",y),this.addChildrenMap("rightButtonsSizer",m),this.addChildrenMap("topButtonsSizer",h),this.addChildrenMap("bottomButtonsSizer",c)}}Object.assign(yd.prototype,iD);st.register("tabs",function(i){var t=new yd(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.Tabs",yd);st.register("slider",function(i){var t=new zs(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.Slider",zs);class Jm{constructor(t,s){this.container=null,this._deltaHeight=0,this.setParent(t)}setParent(t){this.parent=t,this.parentContainer=t.getParentContainer()}destroy(t){t===void 0&&(t=!1),t||this.destroyContainer(),this.deltaHeight=0,this.data=void 0,this.container=null,this.parent=void 0,this.parentContainer=void 0}get table(){return this.parent}get scrollMode(){return this.parentContainer.scrollMode}get colIndx(){return this.parent.cellIndxeToColIndex(this.index)}get rowIndx(){return this.parent.cellIndxeToRowIndex(this.index)}getContainer(){return this.container}setContainer(t){return t?(this.container&&this.container.destroy(),this.container=t,this.parentContainer.add(t),this):(this.destroyContainer(),this)}destroyContainer(){return this.container&&(this.container.destroy(),this.container=null),this}popContainer(){if(this.container){var t=this.container;return this.container=null,this.parentContainer.remove(t),t}else return null}setXY(t,s){return this.container&&this.parentContainer.setChildLocalPosition(this.container,t,s),this}setCellContainerAlign(t){return typeof t=="string"&&(t=In[t]),this.cellContainerAlign=t,this}get deltaHeight(){return this._deltaHeight}set deltaHeight(t){t==null&&(t=0);var s=this.parent;this._deltaHeight===0&&t!==0?s.nonZeroDeltaHeightCount++:this._deltaHeight!==0&&t===0&&s.nonZeroDeltaHeightCount--;var f=this._deltaHeight!==t;if(this._deltaHeight=t,f){s.resetTotalRowsHeight();var C=this.scrollMode===0?"cellheightchange":"cellwidthchange";this.parentContainer.emit(C,this,this.container,this.parentContainer)}}get deltaWidth(){return this.deltaHeight}set deltaWidth(t){this.deltaHeight=t}setDeltaHeight(t){return this.deltaHeight=t,this}setDeltaWidth(t){return this.deltaHeight=t,this}get height(){return this.scrollMode===0?this.deltaHeight+this.parent.defaultCellHeight:this.parent.defaultCellWidth}set height(t){this.scrollMode!==1&&this.setDeltaHeight(t-this.parent.defaultCellHeight)}setHeight(t){return this.height=t,this}get width(){return this.scrollMode===0?this.parent.defaultCellWidth:this.deltaHeight+this.parent.defaultCellHeight}set width(t){this.scrollMode!==0&&this.setDeltaHeight(t-this.parent.defaultCellHeight)}setWidth(t){return this.width=t,this}get scene(){return this.parentContainer.scene}}Object.assign(Jm.prototype,to);const Lv=Phaser.Utils.Objects.GetValue,sD=Phaser.Utils.Array.SpliceOne;class nD{constructor(t,s){this.parent=t,this.cells=[],this.cellPool=new ui,this.resetFromJSON(s)}resetFromJSON(t){t===void 0&&(t={}),this.colCount=void 0,this.nonZeroDeltaHeightCount=0,this.resetTotalRowsHeight();var s=t.cellHeight;s===void 0&&(s=30);var f=t.cellWidth;return f===void 0&&(f=30),this.setDefaultCellHeight(s),this.setDefaultCellWidth(f),this.initCells(Lv(t,"cellsCount",0)),this.setColumnCount(Lv(t,"columns",1)),this}destroy(t){this.cellPool.destroy(),this.cells=void 0,this.parent=void 0}get defaultCellHeightMode(){return this.nonZeroDeltaHeightCount===0}setDefaultCellHeight(t){return this.defaultCellHeight=t,this}setDefaultCellWidth(t){return this.defaultCellWidth=t,this}initCells(t){var s=this.cells;s.length=t;for(var f=0;f<t;f++)s[f]=null;return this}insertNewCells(t,s){var f=this.cells;if(t===f.length){var C=t+s;f.legth=C;for(var S=t;S<C;S++)f[S]=null}else{var r=[];r.length=s;for(var S=0;S<s;S++)r[S]=null;this.cells.splice(t,0,...r)}return this.resetTotalRowsHeight(),this}removeCells(t,s){for(var f=t+s,C=t;C<f;C++)this.freeCell(C);return f===this.cells.length?this.cells.length=t:(s===1?sD(this.cells,t):this.cells.splice(t,s),this.buildCellIndex(t)),this.resetTotalRowsHeight(),this}setColumnCount(t){return this.colCount=t,this.resetTotalRowsHeight(),this}get rowCount(){return Math.ceil(this.cells.length/this.colCount)}get cellsCount(){return this.cells.length}isValidCellIdx(t){return t>=0&&t<this.cells.length}heightToRowIndex(t,s){if(s===void 0&&(s=0),t===0)return 0;if(this.defaultCellHeightMode){var y=t/this.defaultCellHeight;switch(s){case 0:y=Math.floor(y);break;case 1:y=Math.ceil(y);break;default:Number.isInteger(y)?y+=1:y=Math.floor(y);break}return y}for(var f=this.rowCount,C=t,S,r,y=0;;)if(r=this.getRowHeight(y),C-=r,S=y>=0&&y<f,C>0&&S)y+=1;else{if(C===0)return s===2&&(y+=1),y;if(s===1){var e=y;y+=1,S=y>=0&&y<f,S||(y=e)}return y}}widthToColIndex(t,s){if(t===0)return 0;var f=t/this.defaultCellWidth;return s?f=Math.ceil(f):f=Math.floor(f),f}colRowToCellIndex(t,s){return t>=this.colCount?null:s*this.colCount+t}rowIndexToHeight(t,s){if(this.defaultCellHeightMode)return(s-t+1)*this.defaultCellHeight;for(var f,C=0,S=t;S<=s;S++)f=this.getRowHeight(S),C+=f;return C}colIndexToWidth(t,s){return(s-t+1)*this.defaultCellWidth}getRowHeight(t){var s=this.colCount;if(s<=1)return this.getCellHeight(this.colRowToCellIndex(0,t));for(var f=0,C,S=0;S<s;S++)C=this.getCellHeight(this.colRowToCellIndex(S,t)),f<C&&(f=C);return f}getColWidth(t){return this.defaultCellWidth}getCellHeight(t){if(!this.isValidCellIdx(t))return 0;var s;if(this.defaultCellHeightMode)s=this.defaultCellHeight;else{var f=this.getCell(t,!1),C=f?f.deltaHeight:0;s=this.defaultCellHeight+C}return s}resetTotalRowsHeight(){this._totalRowsHeight=null}get totalRowsHeight(){return this._totalRowsHeight===null&&(this._totalRowsHeight=this.rowIndexToHeight(0,this.rowCount-1)),this._totalRowsHeight}get totalColumnWidth(){return this.colCount*this.defaultCellWidth}cellIndxeToColIndex(t){return t%this.colCount}cellIndxeToRowIndex(t){return Math.floor(t/this.colCount)}getCell(t,s){if(!this.isValidCellIdx(t))return null;if(s===void 0&&(s=!0),this.cells[t]===null&&s){var f=this.newCell(t);this.cells[t]=f}return this.cells[t]}newCell(t){var s=this.cellPool.pop();return s===null?s=new Jm(this):s.setParent(this),s.index=t,s}buildCellIndex(t){t===void 0&&(t=0);for(var s=this.cells,f,C=t,S=s.length;C<S;C++)f=s[C],f&&(f.index=C);return this}getParentContainer(){return this.parent}freeCell(t){return typeof t=="number"&&(t=this.cells[t]),t?(t.destroy(),this.cellPool.push(t),this):this}}var rD=function(i){var t=this.table,s=this.topTableOY,f=this.bottomTableOY,C=i>this.topTableOY,S=i<this.bottomTableOY;if(this.clampTableOXY){var r=t.rowCount,y=t.heightToRowIndex(this.instHeight,1);r<y?i=0:C?i=s:S&&(i=f)}return this._tableOY!==i&&(this._tableOY=i),C&&(this.execeedTopState||this.emit("execeedtop",this,i,s)),this.execeedTopState=C,S&&(this.execeedBottomState||this.emit("execeedbottom",this,i,f)),this.execeedBottomState=S,this},aD=function(i){var t=this.table,s=this.leftTableOX,f=this.rightTableOX,C=i>this.leftTableOX,S=i<this.rightTableOX;if(this.clampTableOXY){var r=t.colCount,y=t.widthToColIndex(this.instWidth,!0);r<y?i=0:C?i=s:S&&(i=f)}return this._tableOX!==i&&(this._tableOX=i),C&&(this.execeedLeftState||this.emit("execeedleft",this,i,s)),this.execeedLeftState=C,S&&(this.execeedRightState||this.emit("execeedright",this,i,f)),this.execeedRightState=S,this},Td=function(i){return i.hasOwnProperty("geometryMask")?i.geometryMask:i.bitmapMask};const oD=Phaser.Geom.Intersects.RectangleToRectangle,hD=Phaser.Geom.Rectangle.Overlaps;var lD=function(i,t,s){if(t){s===void 0&&(s=i.getAllChildren());for(var f=i.getBounds(),C=Td(t),S,r,y,e=0,u=s.length;e<u;e++)if(S=s[e],!S.hasOwnProperty("isRexContainerLite")&&S!==C&&uD(S))if(S.getBounds)switch(r=S.getBounds(r),y=dD(f,r),y){case 4:fD(i,S);break;case 0:oD(f,r)||hD(f,r)?il(i,S,t):cD(i,S);break;default:il(i,S,t);break}else il(i,S,t)}},uD=function(i){if(!i.displayList)return!1;for(;;){var t=i.rexContainer;if(t)if(t.visible){var s=t.parent;if(s){i=s;continue}else return!0}else return!1;else return i.visible}},dD=function(i,t){var s=0,f=t.top,C=t.bottom,S=t.left,r=t.right;return s+=i.contains(S,f)?1:0,s+=i.contains(S,C)?1:0,s+=i.contains(r,f)?1:0,s+=i.contains(r,C)?1:0,s},fD=function(i,t,s){i.setChildMaskVisible(t,!0),t.clearMask&&t.clearMask()},il=function(i,t,s){i.setChildMaskVisible(t,!0),t.setMask&&t.setMask(s)},cD=function(i,t,s){i.setChildMaskVisible(t,!1),t.clearMask&&t.clearMask()};const sl=Phaser.Utils.Objects.GetValue,vD={update:0,everyTick:1},Qm={setupChildrenMask(i){return i===!1?this:(this.setMaskUpdateMode(sl(i,"updateMode",0)),this.enableChildrenMask(sl(i,"padding",0)),this.setMaskLayer(sl(i,"layer",void 0)),this.startMaskUpdate(),this)},destroyChildrenMask(){return this.childrenMask?(this.stopMaskUpdate(),this.childrenMask.destroy(),this.childrenMask=void 0,this):this},setMaskUpdateMode(i){return typeof i=="string"&&(i=vD[i]),this.maskUpdateMode=i,this},startMaskUpdate(){this.scene.game.events.on("poststep",this.maskChildren,this)},stopMaskUpdate(){this.scene.game.events.off("poststep",this.maskChildren,this)},enableChildrenMask(i){var t=Ai.call(this,null,this,0,i);return this.childrenMask=t.createGeometryMask(),this},setMaskChildrenFlag(i){return i===void 0&&(i=!0),this.maskChildrenFlag=i,this},setMaskLayer(i){return this.maskLayer=i,this},maskChildren(){return!this.childrenMask||!this.maskChildrenFlag||this.alpha===0||!this.visible?this:(this.privateRenderLayer?this.privateRenderLayer.setMask(this.childrenMask):this.maskLayer?(this.addToLayer(this.maskLayer),this.maskLayer.setMask(this.childrenMask)):lD(this,this.childrenMask),this.maskUpdateMode===0&&(this.maskChildrenFlag=!1),this)},layoutChildrenMask(){if(!this.childrenMask)return this;var i=Td(this.childrenMask);return i.setPosition().resize(),this.resetChildPositionState(i),this}};var pD=function(){if(this.cellsCount!==0){var i=this.table;this.startRowIndex=Math.max(i.heightToRowIndex(-this.tableOY,2),0);for(var t=this.startRowIndex,s=Math.max(i.widthToColIndex(-this.tableOX),0),f=s,C=i.colRowToCellIndex(f,t),S=this.bottomBound,r=this.rightBound,y=i.cellsCount-1,e=i.colCount-1,u=this.getCellTLX(f),m=u,d=this.getCellTLY(t);d<S&&C<=y;){if(this.table.isValidCellIdx(C)){var l=i.getCell(C,!0);this.visibleCells.set(l),this.preVisibleCells.contains(l)||this.showCell(l);var h,n;if(this.scrollMode===0?(h=m,n=d):(h=d,n=m),l.cellContainerAlign==null)l.setXY(h,n);else{var a=l.getContainer();wr(a,h,n,l.width,l.height,l.cellContainerAlign),l.setXY(a.x,a.y)}}m<r&&f<e?(m+=i.getColWidth(f),f+=1):(m=u,d+=i.getRowHeight(t),f=s,t+=1),C=i.colRowToCellIndex(f,t)}}},qm=function(i){var t=null,s=i.getContainer();if(s?(t=s,i.popContainer()):this.cellContainersPool&&(t=this.cellContainersPool.getFirstDead(),t!==null&&t.setActive(!0).setVisible(!0)),this.emit("cellvisible",i,t,this),this.cellContainersPool){var s=i.getContainer();s?t===null?this.cellContainersPool.add(s):t!==s&&(this.cellContainersPool.add(s),this.cellContainersPool.killAndHide(t)):t!==null&&this.cellContainersPool.killAndHide(t)}},gD=function(i){var t=this.scrollMode===0?this.topLeftX:this.topLeftY,s=this.tableOX+this.table.colIndexToWidth(0,i-1)+t;return s},mD=function(i){var t=this.scrollMode===0?this.topLeftY:this.topLeftX,s=this.tableOY+this.table.rowIndexToHeight(0,i-1)+t;return s},xD=function(){var i=this.preVisibleCells,t=this.visibleCells;i.iterate(function(s){t.contains(s)||this.hideCell(s)},this)},_m=function(i){if(this.emit("cellinvisible",i),this.cellContainersPool){var t=i.popContainer();t&&this.cellContainersPool.killAndHide(t)}i.destroyContainer()},yD=function(i){return i===void 0&&(i=!1),i&&(Dv.call(this),this.hideCells()),Dv.call(this),this.showCells(),this.hideCells(),this.setMaskChildrenFlag(),this},Dv=function(){var i=this.preVisibleCells;this.preVisibleCells=this.visibleCells,this.visibleCells=i,this.visibleCells.clear()},TD=function(i){var t=this.table.getCell(i,!1);return t&&this.visibleCells.contains(t)},tx=function(i,t){t-=this.y+this.topLeftY,i-=this.x+this.topLeftX;var s=this.tableOY-(this.scrollMode===0?t:i),f=this.tableOX-(this.scrollMode===0?i:t),C=this.table,S=C.heightToRowIndex(-s,0),r=C.widthToColIndex(-f),y=C.colRowToCellIndex(r,S);return y===null||!this.isCellVisible(y)?null:y},CD=function(i,t){var s=tx.call(this,i,t);if(s!==null)return this.getCellContainer(s)},SD=function(i,t){return this.visibleCells.each(i,t),this},PD=function(i,t){return this.visibleCells.iterate(i,t),this},ED=function(i,t){return this.table.cells.slice().forEach(i,t),this},MD=function(i,t){return this.table.cells.forEach(i,t),this},wD=function(i){var t=this.cellsCount;return t===i?this:(t>i?this.removeCells(i,t-i):this.insertNewCells(t,i-t),this)};const RD=Phaser.Math.Clamp;var AD=function(i,t){return typeof i=="object"&&(i=i.index),t===void 0&&(t=1),t<=0?this:(i=RD(i,0,this.cellsCount),this.table.insertNewCells(i,t),this)},OD=function(i,t){if(typeof i=="object"&&(i=i.index),t===void 0&&(t=1),i<0&&(t+=i,i=0),t<=0)return this;if(i>this.cellsCount)return this;for(var s,f=i,C=i+t;f<C;f++)s=this.getCell(f,!1),s&&(this.visibleCells.contains(s)&&(_m.call(this,s),this.visibleCells.delete(s)),this.preVisibleCells.delete(s));return this.table.removeCells(i,t),this},bD=function(i){return this.table.colCount===i?this:(this.table.setColumnCount(i),this)},FD=function(i,t){return this.setCellsCount(i*t),this.table.setColumnCount(i),this},LD=function(i){var t=this.table.getCell(i,!1);return!t||!t.container?this:(qm.call(this,t),this)},ex={setTableOY:rD,setTableOX:aD,showCells:pD,showCell:qm,getCellTLX:gD,getCellTLY:mD,hideCells:xD,hideCell:_m,updateTable:yD,isCellVisible:TD,pointToCellIndex:tx,pointToCellContainer:CD,eachVisibleCell:SD,iterateVisibleCell:PD,eachCell:ED,iterateCell:MD,setCellsCount:wD,insertNewCells:AD,removeCells:OD,setColumnCount:bD,setGridSize:FD,updateVisibleCell:LD};Object.assign(ex,Qm);const DD=Phaser.GameObjects.Group,Iv=Phaser.Structs.Set,oi=Phaser.Utils.Objects.GetValue;let ix=class extends Oe{constructor(t,s,f,C,S,r){r===void 0&&(r={}),super(t,s,f,C,S),this.type="rexGridTable",this._tableOX=0,this._tableOY=0,this.visibleCells=new Iv,this.preVisibleCells=new Iv,this.execeedTopState=!1,this.execeedBottomState=!1,this.execeedLeftState=!1,this.execeedRightState=!1;var y=oi(r,"reuseCellContainer",!1);y&&(this.cellContainersPool=new DD(t));var e=oi(r,"cellVisibleCallback",null);if(e!==null){var u=oi(r,"cellVisibleCallbackScope",void 0);this.on("cellvisible",e,u)}if(e=oi(r,"cellInvisibleCallback",null),e!==null){var u=oi(r,"cellInvisibleCallbackScope",void 0);this.on("cellinvisible",e,u)}oi(r,"enableLayer",!1)&&this.enableLayer(),this.setupChildrenMask(oi(r,"mask",void 0)),this.setScrollMode(oi(r,"scrollMode",0)),this.setClampMode(oi(r,"clamplTableOXY",!0));var m,d,l,h=this.scrollMode===0;if(h?(m=r.cellWidth,d=r.cellHeight,l=r.columns):(m=r.cellHeight,d=r.cellWidth,l=oi(r,"rows",r.columns)),l||(l=1),this.expandCellSize=m===void 0,this.expandCellSize){var C=h?this.width:this.height;m=C/l}r.cellWidth=m,r.cellHeight=d,r.columns=l,this.table=new nD(this,r),this.updateTable()}destroy(t){this.scene&&(this.destroyChildrenMask(),this.table.destroy(t),this.table=void 0,this.cellContainersPool&&(this.cellContainersPool.destroy(!0),this.cellContainersPool=void 0),super.destroy(t))}setScrollMode(t){return typeof t=="string"&&(t=ID[t.toLowerCase()]),this.scrollMode=t,this}setClampMode(t){return t===void 0&&(t=!0),this.clampTableOXY=t,this}get tableOY(){return this._tableOY}get tableOX(){return this._tableOX}set tableOY(t){this.setTableOY(t).updateTable()}set tableOX(t){this.setTableOX(t).updateTable()}setTableOXY(t,s){return this.setTableOY(s).setTableOX(t),this}addTableOY(t){return this.setTableOY(this.tableOY+t),this}addTableOX(t){return this.setTableOX(this.tableOX+t),this}addTableOXY(t,s){return this.addTableOY(s).addTableOX(t),this}setTableOYByPercentage(t){return this.setTableOY(-this.tableVisibleHeight*t),this}getTableOYPercentage(){var t=this.tableVisibleHeight;return t===0?0:this.tableOY/-t}set t(t){this.setTableOYByPercentage(t).updateTable()}get t(){return this.getTableOYPercentage()}scrollToBottom(){if(this.t=1,this.t===0)return this;do this.t=1;while(this.t!==1);return this}scrollToRow(t){this.scrollToBottom();var s=this.table.rowIndexToHeight(0,t-1);return this.setTableOY(-s).updateTable(),this}scrollToNextRow(t){return t===void 0&&(t=1),this.scrollToRow(this.startRowIndex+t),this}getCell(t){return this.table.getCell(t,!0)}getCellContainer(t){var s=this.table.getCell(t,!1),f;return s&&(f=s.getContainer()),f}get cellsCount(){return this.table.cellsCount}get columnCount(){return this.table.colCount}setCellHeight(t,s){var f;return typeof t=="number"?f=this.table.getCell(t,!0):f=t,f.height=s,this}setCellWidth(t,s){var f;return typeof t=="number"?f=this.table.getCell(t,!0):f=t,f.width=s,this}get instHeight(){return this.scrollMode===0?this.height:this.width}get instWidth(){return this.scrollMode===0?this.width:this.height}get tableHeight(){return this.table.totalRowsHeight}get tableWidth(){return this.table.totalColumnWidth}get topTableOY(){return 0}get bottomTableOY(){return-this.tableVisibleHeight}get leftTableOX(){return 0}get rightTableOX(){return-this.tableVisibleWidth}get tableVisibleHeight(){var t=this.tableHeight-this.instHeight;return t<0&&(t=0),t}get tableVisibleWidth(){var t,s=this.tableWidth,f=this.instWidth;return s>f?t=s-f:t=0,t}get bottomLeftY(){return-(this.displayHeight*this.originY)+this.displayHeight}get topRightX(){return-(this.displayWidth*this.originX)+this.displayWidth}get topLeftX(){return-(this.displayWidth*this.originX)}get topLeftY(){return-(this.displayHeight*this.originY)}get bottomBound(){return this.scrollMode===0?this.bottomLeftY:this.topRightX}get rightBound(){return this.scrollMode===0?this.topRightX:this.bottomLeftY}resize(t,s){return this.width===t&&this.height===s?this:(super.resize(t,s),this.expandCellSize&&this.table.setDefaultCellWidth(this.instWidth/this.table.colCount),this.updateTable(!0),this.layoutChildrenMask(),this.maskChildren(),this)}};Object.assign(ix.prototype,ex);const ID={v:0,vertical:0,h:1,horizontal:1};var BD=function(i){Object.defineProperty(i,"childOY",{configurable:!0,get:function(){return i.tableOY},set:function(t){i.tableOY=t}}),Object.defineProperty(i,"topChildOY",{get:function(){return i.topTableOY}}),Object.defineProperty(i,"bottomChildOY",{get:function(){return i.bottomTableOY}}),Object.defineProperty(i,"childVisibleHeight",{get:function(){return i.instHeight}}),Object.defineProperty(i,"childHeight",{get:function(){return i.tableHeight}})},GD=function(i){i.on("cellvisible",function(t,r,f){var C=this.createCellContainerCallback,S=this.createCellContainerCallbackScope;t.item=this.items[t.index],t.items=this.items;var r;S?r=C.call(S,t,r,f):r=C(t,r,f),r&&(t.cellContainerAlign==null&&r.setOrigin&&r.setOrigin(0),r.isRexSizer&&r.layout()),t.item=void 0,t.items=void 0,t.setContainer(r)},this)},vi=function(i,t,s,f,C,S,r){var y;if(C===void 0?y=f:y=s.pointToCellIndex(f,C),y!=null){var e=s.getCellContainer(y);e&&i.emit(t,e,y,S,r)}},ND=function(i,t){i.on("pointerdown",function(s,f,C,S){vi(this.eventEmitter,"cell.down",i,s.worldX,s.worldY,s,S)},this).on("pointerup",function(s,f,C,S){vi(this.eventEmitter,"cell.up",i,s.worldX,s.worldY,s,S)},this)},VD=function(i,t){i.on("pointermove",Bv,this).on("pointerover",Bv,this).on("pointerout",zD,this)},Bv=function(i,t,s,f){var C=this.childrenMap.child,S=C.pointToCellIndex(i.worldX,i.worldY);if(S!==C.input.lastOverCellIndex){var r=C.input.lastOverCellIndex;C.input.lastOverCellIndex=S,vi(this.eventEmitter,"cell.out",C,r,void 0,i,f),vi(this.eventEmitter,"cell.over",C,S,void 0,i,f)}},zD=function(i,t){var s=this.childrenMap.child,f=s.input.lastOverCellIndex;s.input.lastOverCellIndex=void 0,vi(this.eventEmitter,"cell.out",s,f,void 0,i,t)};const UD=Phaser.Utils.Objects.GetValue;var YD=function(i,t){var s=UD(t,"click",void 0);s!==!1&&(s===void 0&&(s={}),s.threshold=10,i._click=new rs(i,s),i._click.on("click",function(f,C,S,r){vi(this.eventEmitter,"cell.click",C,S.worldX,S.worldY,S,r)},this))};const kD=Phaser.Utils.Objects.GetValue;var XD=function(i,t){var s=kD(t,"tap",void 0);s!==!1&&(i._tap=new Po(i,s),i._tap.on("tap",function(f,C,S){var r=`cell.${f.tapsCount}tap`;vi(this.eventEmitter,r,f.gameObject,f.worldX,f.worldY,S)},this))};const WD=Phaser.Utils.Objects.GetValue;var HD=function(i,t){var s=WD(t,"press",void 0);s!==!1&&(i._press=new Eo(i,s),i._press.on("pressstart",function(f,C,S){vi(this.eventEmitter,"cell.pressstart",i,f.worldX,f.worldY,S)},this).on("pressend",function(f,C,S){vi(this.eventEmitter,"cell.pressend",i,f.worldX,f.worldY,S)},this))};const $D=Phaser.Utils.Objects.GetValue;var KD=function(i,t){var s=$D(t,"swipe",void 0);s!==!1&&(s===void 0&&(s={}),s.dir="4dir",i._swipe=new Dr(i,s),i._swipe.on("swipe",function(f,C,S){var r=f.left?"left":f.right?"right":f.up?"up":"down";vi(this.eventEmitter,`cell.swipe${r}`,i,f.worldX,f.worldY,S)},this))},jD=function(i,t){i.setInteractive(),ND.call(this,i,t),VD.call(this,i,t),YD.call(this,i,t),XD.call(this,i,t),HD.call(this,i,t),KD.call(this,i,t)},ZD=function(i){i===void 0?this.items=[]:this.items=i;var t=this.childrenMap.child;return t.setCellsCount(this.items.length),t.updateTable(!0),this.resizeController(),this};const JD={scrollToRow(i){var t=this.childrenMap.child;return t.scrollToRow(i),this},scrollToNextRow(i){var t=this.childrenMap.child;return t.scrollToNextRow(i),this}},hi=Phaser.Utils.Objects.GetValue;class Cd extends No{constructor(t,s){s===void 0&&(s={});var f=Bo(s),C=hi(s,"table",void 0);C===void 0&&(C={}),C.scrollMode=f,C.clamplTableOXY=hi(s,"clamplChildOY",!1);var S=hi(C,"width",void 0),r=hi(C,"height",void 0),y=new ix(t,0,0,S,r,C);t.add.existing(y);var e,u;f===0?(e=S===void 0?1:0,u=r===void 0):(e=r===void 0?1:0,u=S===void 0),BD(y),y.minWidth=S===void 0?0:void 0,y.minHeight=r===void 0?0:void 0,s.type="rexGridTable",s.child={gameObject:y,proportion:e,expand:u};var m=hi(s,"space",void 0);m&&(m.child=m.table),super(t,s),this.addChildrenMap("table",y),this.addChildrenMap("tableLayer",y.maskLayer),this.eventEmitter=hi(s,"eventEmitter",this);var d=hi(s,"createCellContainerCallback",he),l=hi(s,"createCellContainerCallbackScope",void 0);this.setCreateCellContainerCallback(d,l),GD.call(this,y),this.resizeControllerFlag=!1;var h=f===0?"cellheightchange":"cellwidthchange";y.on(h,function(){this.resizeControllerFlag=!0},this),hi(C,"interactive",!0)&&jD.call(this,y,C),this.setItems(hi(s,"items",[])),t.game.events.on("poststep",this.onPostStep,this)}destroy(t){this.scene&&(this.scene.game.events.off("poststep",this.onPostStep,this),super.destroy(t))}setCreateCellContainerCallback(t,s){return this.createCellContainerCallback=t,this.createCellContainerCallbackScope=s,this}refresh(){return this.setItems(this.items),this}getCell(t){var s=this.childrenMap.child;return s.getCell(t)}getCellContainer(t){var s=this.childrenMap.child;return s.getCellContainer(t)}updateVisibleCell(t){var s=this.childrenMap.child;return s.updateVisibleCell(t)}onPostStep(){this.resizeControllerFlag&&(this.resizeController(),this.resizeControllerFlag=!1)}get startRowIndex(){var t=this.childrenMap.child;return t.startRowIndex}}var QD={setItems:ZD};Object.assign(Cd.prototype,JD,QD);st.register("gridTable",function(i){var t=new Cd(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.GridTable",Cd);var Sd=function(i,t){return i.sameOrientation?i.orientation=t.orientation:i.orientation=t.orientation===0?1:0,i},qD=function(i,t){i.popUp(Sd(i.root.easeIn,i))},_D=function(i,t){i.scaleDown(Sd(i.root.easeOut,i))};const tI={setTransitInCallback(i){return i===void 0&&(i=qD),this.transitInCallback=i,this},setTransitOutCallback(i){return i===void 0&&(i=_D),this.transitOutCallback=i,this}};var eI=function(i,t,s,f,C){var S=i.scene,r=S.time.delayedCall(t,function(){S.sys.events.once("postupdate",function(){s.call(f,C)})});return r};const iI={delayCall(i,t,s){return this.timer=eI(this,i,t,s),this},removeDelayCall(){return this.timer&&(this.timer.remove(!1),this.timer=void 0),this}};var sI=function(i,t){var f=this.childrenMap.subMenu;if(f&&f.parentButton===i)return this;this.collapseSubMenu();var s;this.root.toggleOrientation?s=this.orientation===0?1:0:s=this.orientation;var f=new this.constructor(this.scene,{items:t,orientation:s,space:this.space,createBackgroundCallback:this.root.createBackgroundCallback,createBackgroundCallbackScope:this.root.createBackgroundCallbackScope,createButtonCallback:this.root.createButtonCallback,createButtonCallbackScope:this.root.createButtonCallbackScope,easeIn:this.root.easeIn,easeOut:this.root.easeOut,_rootMenu:this.root,_parentMenu:this,_parentButton:i});return this.pin(f),this.childrenMap.subMenu=f,this.root.emit("expand",f,i,this),this},nI=function(){var i=this.root;i.emit("collapse",this,this.parentButton,i);var t=i.easeOut.duration;return i.transitOutCallback(this,t),this.collapseSubMenu(),this.delayCall(t,this.destroy,this),this},rI=function(){var i=this.childrenMap.subMenu;return i===void 0?this:(this.childrenMap.subMenu=void 0,this.remove(i),i.collapse(),this)},sx={expandSubMenu:sI,collapse:nI,collapseSubMenu:rI};Object.assign(sx,tI,iI);var aI=function(i,t,s,f){var C;return s&&(t.scene=i,f?C=s.call(f,t):C=s(t),t.scene=void 0),C},oI=function(i,t,s,f){var C,S=[],r;if(t&&s)for(var y=0,e=t.length;y<e;y++)C=t[y],C.scene=i,f?r=s.call(f,C,y,t):r=s(C,y,t),C.scene=void 0,S.push(r);return S},hI=function(i){i.on(i.root.expandEventName,function(t,s){if(!this._isPassedEvent){var f=this.root.childrenKey,C=this.items[s][f];C&&this.expandSubMenu(t,C)}},i).on("button.click",function(t,s,f,C){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.click",t,s,f,C),this.root._isPassedEvent=!1)},i).on("button.over",function(t,s,f,C){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.over",t,s,f,C),this.root._isPassedEvent=!1)},i).on("button.out",function(t,s,f,C){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.out",t,s,f,C),this.root._isPassedEvent=!1)},i)},Gv=function(i,t){return typeof t=="number"&&(t={duration:t}),t.hasOwnProperty("orientation")&&t.orientation!==void 0?t.sameOrientation=Lo(t.orientation)===i.orientation:t.sameOrientation=!0,t.destroy=!1,t},lI=function(){var i=this.root,t=i.easeIn.duration;i.transitInCallback(this,t),this!==this.root&&this.delayCall(t,function(){this.root.emit("popup.complete",this)},this)};const ue=Phaser.Utils.Objects.GetValue;class Wo extends qt{constructor(t,s){s===void 0&&(s={}),s.hasOwnProperty("orientation")||(s.orientation=1);var f=s._rootMenu,C=s._parentMenu,S=s._parentButton,r=ue(s,"popup",!0),y=ue(s,"items",void 0),e=ue(s,"createBackgroundCallback",void 0),u=ue(s,"createBackgroundCallbackScope",void 0);s.background=aI(t,y,e,u);var m=ue(s,"createButtonCallback",void 0),d=ue(s,"createButtonCallbackScope",void 0);if(s.buttons=oI(t,y,m,d),super(t,s),this.type="rexMenu",this.items=y,this.root=f===void 0?this:f,this.isRoot=this.root===this,this.parentMenu=C,this.parentButton=S,this.timer=void 0,this.isRoot){this.isPopUpMode=r;var l=s.bounds;l===void 0&&(l=Dn(t)),this.bounds=l,this.subMenuSide=[this.y<l.centerY?Wl:Na,this.x<l.centerX?Xl:Ga];var h=ue(s,"subMenuSide",void 0);h!==void 0&&(typeof h=="string"&&(h=uI[h]),this.subMenuSide[this.orientation]=h),this.toggleOrientation=ue(s,"toggleOrientation",!1),this.expandEventName=ue(s,"expandEvent","button.click"),this.easeIn=Gv(this,ue(s,"easeIn",0)),this.easeOut=Gv(this,ue(s,"easeOut",0)),this.setTransitInCallback(ue(s,"transitIn")),this.setTransitOutCallback(ue(s,"transitOut")),this.createBackgroundCallback=e,this.createBackgroundCallbackScope=u,this.createButtonCallback=m,this.createButtonCallbackScope=d,this.childrenKey=ue(s,"childrenKey","children"),this._isPassedEvent=!1,this.pointerDownOutsideCollapsing=ue(s,"pointerDownOutsideCollapsing",!0),this.pointerDownOutsideCollapsing&&t.input.on("pointerdown",this.onPointerDownOutside,this)}var n=0,a=0;if(!this.root.easeIn.sameOrientation){var c=Sd(this.root.easeIn,this).orientation,o=C?C.orientation:this.orientation,h=this.root.subMenuSide[o];c===0&&h===Ga&&(n=1),c===1&&h===Na&&(a=1)}if(r&&this.setOrigin(n,a).layout(),!this.isRoot){this.setScale(this.root.scaleX,this.root.scaleY);var h=this.root.subMenuSide[C.orientation];switch(h){case Ga:this.alignTop(S.top).alignRight(S.left);break;case Xl:this.alignTop(S.top).alignLeft(S.right);break;case Na:this.alignLeft(S.left).alignBottom(S.top);break;case Wl:this.alignLeft(S.left).alignTop(S.bottom);break}}hI(this),r&&(this.pushIntoBounds(this.root.bounds),lI.call(this))}destroy(t){this.scene&&(this.isRoot&&this.pointerDownOutsideCollapsing&&this.scene.input.off("pointerdown",this.onPointerDownOutside,this),super.destroy(t),this.removeDelayCall())}isInTouching(t){return super.isInTouching(t)?!0:this.childrenMap.subMenu?this.childrenMap.subMenu.isInTouching(t):!1}onPointerDownOutside(t){this.isInTouching(t)||(this.isPopUpMode?this.collapse():this.collapseSubMenu())}}const Ga=2,Xl=0,Na=3,Wl=1,uI={up:Na,down:Wl,left:Ga,right:Xl};Object.assign(Wo.prototype,sx);st.register("menu",function(i){var t=new Wo(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.Menu",Wo);var dI={setWrapEnable(i){return i===void 0&&(i=!0),this.listWrapEnable=i,this},setCreateButtonCallback(i){return this.listCreateButtonCallback=i,this},setCreateListBackgroundCallback(i){return this.listCreateBackgroundCallback=i,this},setButtonClickCallback(i){return this.listOnButtonClick=i,this},setButtonOverCallback(i){return this.listOnButtonOver=i,this},setButtonOutCallback(i){return this.listOnButtonOut=i,this},setListExpandDirection(i){return typeof i=="string"&&(i=fI[i]),this.listExpandDirection=i,this},setListEaseInDuration(i){return i===void 0&&(i=0),this.listEaseInDuration=i,this},setListEaseOutDuration(i){return i===void 0&&(i=0),this.listEaseOutDuration=i,this},setListTransitInCallback(i){return this.listTransitInCallback=i,this},settListTransitOutCallback(i){return this.listTransitOutCallback=i,this},setListBounds(i){return this.listBounds=i,this},setListWidth(i){return this.listWidth=i,this},setListHeight(i){return this.listHeight=i,this},setListSize(i,t){return this.setListWidth(i).setListHeight(t),this},setListAlignmentMode(i){return this.listAlignMode=i,this},setListAlignmentSide(i){return i===void 0&&(i=""),this.listAlignSide=i,this},setListSpace(i){return i===void 0&&(i={}),this.listSpace=i,this},setListDraggable(i){return i===void 0&&(i=!0),this.listDraggable=i,this}};const fI={down:0,up:1};var cI=function(){var i=this.scene,t,s=this.listCreateBackgroundCallback;s&&(t=s.call(this,i),i.add.existing(t));var f=[],C=this.listCreateButtonCallback;if(C)for(var S=this.options,r=0,y=S.length;r<y;r++){var e=C.call(this,i,S[r],r,S);i.add.existing(e),f.push(e)}var u=this.listWidth;u===void 0&&(this.listAlignMode==="text"?u=this.getElement("text").width:u=this.width);var m=this.listHeight,d;return this.listWrapEnable?d=new ts(i,{width:u,height:m,background:t,buttons:f,space:this.listSpace,draggable:this.listDraggable}):d=new qt(i,{width:u,height:m,orientation:"y",background:t,buttons:f,space:this.listSpace,draggable:this.listDraggable}),i.add.existing(d),d},vI=function(i,t,s,f,C){var S={};switch(S.mode=0,s){case 0:case"x":S.end={x:0};break;case 1:case"y":S.end={y:0};break;default:S.end=0;break}return S.duration=t,S.ease=f,C===void 0?C=new pr(i,S):C.resetFromJSON(S),C.restart(),C},pI=function(i,t,s,f,C){return Ei(i,t)?Ft(i,t):Ei(i,s)?Ft(i,s):C};const ln=Phaser.Utils.Objects.GetValue;var gI=function(i,t){var s=ln(t,"expandDirection",void 0);typeof s=="string"&&(s=mI[s]);var f=pI(t,"alignTarget","alignTargetX"),C=ln(t,"alignTargetY",f),S=ln(t,"alignOffsetX",0),r=ln(t,"alignOffsetY",0),y=ln(t,"alignSide",""),e=y.includes("right"),u=ln(t,"bounds"),m=s===0,d=s===1,l=!m&&!d,h=e?1:0,n=m||l?0:1;i.setOrigin(h,n);var a,c;e?a=f.getTopRight().x:a=f.getTopLeft().x,c=C.getBottomLeft().y,i.setPosition(a+S,c+r);var o=u;o||(o=Dn(i.scene)),l&&i.getBottomLeft().y>o.bottom&&(c=C.getTopLeft().y,i.setOrigin(0,1).setPosition(a+S,c+r))};const mI={down:0,up:1},Nv=Phaser.Utils.Objects.GetValue;class nx extends yo{constructor(t,s){s===void 0&&(s={}),s.transitIn==null&&(s.transitIn=function(S,r){Hu(S,r,"y","Cubic")}),s.transitOut==null&&(s.transitOut=function(S,r){vI(S,r,"y","Linear")}),s.manualClose=!0,s.clickOutsideClose=!0,s.destroy=!0,super(t,s),gI(t,s),t.isRexSizer&&t.layout();var f=Nv(s,"touchOutsideClose",!1),C=Nv(s,"anyTouchClose",!1);C&&(f=!1),C?this.once("open",this.anyTouchClose,this):f&&this.once("open",this.touchOutsideClose,this),this.requestOpen()}shutdown(t){this.isShutdown||(this.scene.input.off("pointerup",this.touchCloseCallback,this),super.shutdown(t))}touchOutsideClose(){return this.scene.input.on("pointerup",this.touchCloseCallback,this),this.clickOutsideTest=!0,this}anyTouchClose(){return this.scene.input.once("pointerup",this.touchCloseCallback,this),this}touchCloseCallback(t){this.clickOutsideTest&&gr(this.parent,t.worldX,t.worldY)||this.requestClose()}onOpen(){this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.parent,this),super.onClose()}}var xI=function(){if(this.listPanel)return this;var i=cI.call(this);i.on("button.over",function(f,C,S,r){this.listOnButtonOver&&this.listOnButtonOver.call(this,f,C,S,r),this.emit("button.over",this,i,f,C,S,r)},this).on("button.out",function(f,C,S,r){this.listOnButtonOut&&this.listOnButtonOut.call(this,f,C,S,r),this.emit("button.out",this,i,f,C,S,r)},this);var t;!this.listAlignMode||this.listAlignMode==="label"?t=this:t=this.getElement(this.listAlignMode);var s=new nx(i,{duration:{in:this.listEaseInDuration,out:this.listEaseOutDuration},transitIn:this.listTransitInCallback,transitOut:this.listTransitOutCallback,expandDirection:this.listExpandDirection,alignTargetX:t,alignTargetY:this,alignSide:this.listAlignSide,bounds:this.listBounds,anyTouchClose:!0}).on("open",function(){i.on("button.click",function(f,C,S,r){this.listOnButtonClick&&this.listOnButtonClick.call(this,f,C,S,r),this.emit("button.click",this,i,f,C,S,r)},this),this.emit("list.open",this,i)},this).on("close",function(){this.listPanel=void 0,this.dropDownBehavior=void 0},this);return this.listPanel=i,this.dropDownBehavior=s,this.pin(i),this},yI=function(){return this.dropDownBehavior?(this.dropDownBehavior.requestClose(),this):this},TI=function(){return this.listPanel?this.closeListPanel():this.openListPanel(),this},rx={openListPanel:xI,closeListPanel:yI,toggleListPanel:TI};Object.assign(rx,dI);const Dt=Phaser.Utils.Objects.GetValue;class Vr extends gi{constructor(t,s){super(t,s),this.type="rexDropDownList",this.timer=void 0,this.setOptions(Dt(s,"options"));var f=Dt(s,"list");this.setWrapEnable(Dt(f,"wrap",!1)),this.setCreateButtonCallback(Dt(f,"createButtonCallback")),this.setCreateListBackgroundCallback(Dt(f,"createBackgroundCallback")),this.setButtonClickCallback(Dt(f,"onButtonClick")),this.setButtonOverCallback(Dt(f,"onButtonOver")),this.setButtonOutCallback(Dt(f,"onButtonOut")),this.setListExpandDirection(Dt(f,"expandDirection")),this.setListEaseInDuration(Dt(f,"easeIn",500)),this.setListEaseOutDuration(Dt(f,"easeOut",100)),this.setListTransitInCallback(Dt(f,"transitIn")),this.settListTransitOutCallback(Dt(f,"transitOut")),this.setListSize(Dt(f,"width"),Dt(f,"height")),this.setListAlignmentMode(Dt(f,"alignParent","text")),this.setListAlignmentSide(Dt(f,"alignSide","")),this.setListBounds(Dt(f,"bounds")),this.setListSpace(Dt(f,"space")),this.setListDraggable(Dt(f,"draggable",!1)),this.setValueChangeCallback(Dt(s,"setValueCallback"),Dt(s,"setValueCallbackScope")),this.setValue(Dt(s,"value")),this.onClick(this.toggleListPanel,this)}destroy(t){this.scene&&(this.listPanel&&(this.listPanel.destroy(t),this.listPanel=void 0),super.destroy(t))}setOptions(t){return t===void 0&&(t=[]),this.options=t,this}setValueChangeCallback(t,s){return this.valueChangeCallback=t,this.valueChangeCallbackScope=s,this}setValue(t){return this.value=t,this}get value(){return this._value}set value(t){if(this._value!==t){var s=this._value;this._value=t;var f=this.valueChangeCallback,C=this.valueChangeCallbackScope;f&&(C?f.call(C,this,t,s):f(this,t,s)),this.emit("valuechange",this,t,s)}}emitButtonClick(t){var s=this.options[t];return s?(this.emit("button.click",this,void 0,s,t),this):this}}Object.assign(Vr.prototype,rx);st.register("dropDownList",function(i){var t=new Vr(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.DropDownList",Vr);var ax=function(i,t,s){t=t?fe(t):{},s===void 0&&(s={});var f=t.label||t.button,C=t.button||t.label;delete t.label,delete t.button;var S=s.label||s.button||s,r=s.button||s.label||s,y=dd(i,f,S);return y.list=t.list||{},y.list.createButtonCallback=function(e,u){var m=Ge(e,C,r).resetDisplayContent({text:u.text});return u.hasOwnProperty("value")&&(m.value=u.value),m},y.list.onButtonOver=function(e,u,m,d){e.setHoverState&&e.setHoverState(!0)},y.list.onButtonOut=function(e,u,m,d){e.setHoverState&&e.setHoverState(!1)},y};class ox extends Vr{constructor(t,s,f){s=ax(t,s,f),super(t,s),this.type="rexSimpleDropDownList"}setOptions(t){t===void 0&&(t=[]);for(var s=0,f=t.length;s<f;s++){var C=t[s];typeof C=="string"&&(t[s]={text:C,value:C})}return super.setOptions(t),this}}st.register("simpleDropDownList",function(i,t){var s=new ox(this.scene,i,t);return this.scene.add.existing(s),s});it(window,"RexPlugins.UI.SimpleDropDownList",ox);var CI=function(i,t){i===void 0&&(i=this.startLineIndex),t===void 0&&(t=i+this.pageLinesCount);var s;switch(this.textObjectType){case Ae:case ze:s=this.lines.slice(i,t).join(`
`);break;case Ve:var f=this.lines.getLineStartIndex(i),C=this.lines.getLineEndIndex(t-1);s=this.lines.getSliceTagText(f,C,!0);break}return s},nl=function(i){return Array.isArray(i)?i=i.join(`
`):typeof i=="number"&&(i=i.toString()),i};const SI={clearText(){return this.sections.length=0,this.pageStartIndexes.length=0,this.lines.length=0,this},appendPage(s){var t=this.totalLinesCount;this.sections.push(nl(s));var s=this.sections.join(`
`);this.lines=gd(this.parent,s,this.lines);for(var f=this.totalLinesCount-t,C=Math.ceil(f/this.pageLinesCount),S=0;S<C;S++)this.pageStartIndexes.push(t+S*this.pageLinesCount);return this},setText(i,t){t===void 0&&(t=!0),t&&this.resetPageIdx(),this.clearText();for(var s=nl(i).split(this.pageBreak),f=0,C=s.length;f<C;f++)this.appendPage(s[f]);return this},appendText(i){var t=this.content+nl(i);return this.setText(t,!1),this}},PI=Phaser.Math.Clamp,EI={getPage(i){return i===void 0&&(i=this.pageIndex),this.setPageIndex(i).getLines(this.startLineIndex,this.endLineIndex)},getNextPage(){return this.getPage(this.pageIndex+1)},getPreviousPage(){return this.getPage(this.pageIndex-1)},resetPageIdx(){return this.pageIndex=-1,this},setPageIndex(i){return i=PI(i,0,this.pageCount-1),this.pageIndex=i,this.startLineIndex=this.pageStartIndexes[i],this.endLineIndex=this.pageStartIndexes[i+1],this}},MI={showPage(i){return this.displayText(this.getPage(i)),this},showNextPage(){return this.displayText(this.getNextPage()),this},showPreviousPage(){return this.displayText(this.getPreviousPage()),this},show(){return this.displayText(this.getLines()),this},showNextLine(){return this.displayText(this.setStartLineIndex(this.startLineIndex+1).getLines()),this},showPreviousLine(){return this.displayText(this.setStartLineIndex(this.startLineIndex-1).getLines()),this},displayText(i){md(this.parent,i)}};var hx={getLines:CI};Object.assign(hx,SI,EI,MI);const nr=Phaser.Utils.Objects.GetValue,wI=Phaser.Math.Clamp;class Ho extends _t{constructor(t,s){super(t,{eventEmitter:!1}),this.textObjectType=Gr(this.parent),this.pageStartIndexes=[],this.lines=gd(this.parent,""),this.sections=[],this.resetFromJSON(s)}resetFromJSON(t){return this.setMaxLines(nr(t,"maxLines",void 0)),this.setPageBreak(nr(t,"pageBreak",`\f
`)),this.setText(nr(t,"text","")),this.setStartLineIndex(nr(t,"start",0)),this.setPageIndex(nr(t,"page",-1)),this}toJSON(){return{maxLines:this.maxLines,text:this.content,start:this.startLineIndex,page:this.pageIndex,pageBreak:this.pageBreak}}shutdown(t){if(!this.isShutdown){switch(this.textObjectType){case Ae:this.lines.length=0;break;case Ve:this.lines.destroy();break;case ze:this.lines.length=0;break}this.pageStartIndexes.length=0,this.sections.length=0,this.lines=void 0,this.pageStartIndexes=void 0,this.sections=void 0,super.shutdown(t)}}setMaxLines(t){return this.maxLines=t,this}setPageBreak(t){return this.pageBreak=t,this}get pageCount(){return this.pageStartIndexes.length}get isFirstPage(){return this.pageIndex<=0}get isLastPage(){return this.pageIndex>=this.pageCount-1}get totalLinesCount(){return this.lines?this.lines.length:0}get startLineIndex(){return this._startLineIndex}set startLineIndex(t){t=wI(t,0,this.totalLinesCount-1),this._startLineIndex=t}setStartLineIndex(t){return this.startLineIndex=t,this}get pageLinesCount(){if(this.maxLines!==void 0)return this.maxLines;var t;switch(this.textObjectType){case Ae:case Ve:var s=this.parent.style.maxLines;s>0?t=s:t=this.totalLinesCount;break;case ze:t=this.totalLinesCount;break}return t}get content(){return this.sections.join(this.pageBreak)}}Object.assign(Ho.prototype,hx);var RI=function(i,t){var s=Gr(i);switch(s){case Ae:i.style.syncFont(i.canvas,i.context),t=i.runWordWrap(t);break;case Ve:t=i.getText(t,void 0,void 0,!0);break;case ze:t=i.setText(t).getTextBounds().wrappedText;break}return t};const un=Phaser.Utils.Objects.GetFastValue,rl=Phaser.Utils.Objects.GetValue;class Pd extends _t{constructor(t,s){super(t,s),this.timer=null,this.resetFromJSON(s)}resetFromJSON(t){this.setTextWrapEnable(rl(t,"wrap",!1)),this.setTypeMode(rl(t,"typeMode",0)),this.setTypingSpeed(rl(t,"speed",333)),this.setTextCallback=un(t,"setTextCallback",null),this.setTextCallbackScope=un(t,"setTextCallbackScope",null),this.setTypingContent(un(t,"text","")),this.typingIdx=un(t,"typingIdx",0),this.insertIdx=un(t,"insertIdx",null);var s=un(t,"elapsed",null);return s!==null&&this.start(void 0,void 0,this.typingIdx,s),this}shutdown(t){this.isShutdown||(this.freeTimer(),super.shutdown(t))}setTypeMode(t){return typeof t=="string"&&(t=AI[t]),this.typeMode=t,this}setTypeSpeed(t){return this.speed=t,this}setTypingSpeed(t){return this.speed=t,this}setTextWrapEnable(t){return t===void 0&&(t=!0),this.textWrapEnable=t,this}set text(t){var s=Vv(t);this.textWrapEnable&&(s=RI(this.parent,s)),this._text=s}get text(){return this._text}get isTyping(){return this.getTimer()!==null}get isLastChar(){return this.typingIdx===this.textLen}start(t,s,f,C){return t!==void 0&&this.setTypingContent(t),s!==void 0&&(this.speed=s),f===void 0&&(f=0),this.typingIdx=f+1,this.speed===0?this.stop(!0):(this.setText(""),this.startTimer(C)),this}appendText(t){var s=this.text.concat(Vv(t));return this.isTyping?this.setTypingContent(s):this.start(s,void 0,this.textLen),this}stop(t){var s=this.getTimer();return s&&this.freeTimer(),t&&(this.typingIdx=this.textLen,this.setText(this.text),this.emit("type"),this.emit("complete",this,this.parent)),this}pause(){var t=this.getTimer();return t&&(t.paused=!0),this}resume(){var t=this.getTimer();return t&&(t.paused=!1),this}setTypingContent(t){return this.text=t,this.textLen=this.getTextLength(this.text),this}onTyping(){var t=this.getTypingString(this.text,this.typingIdx,this.textLen,this.typeMode);this.setText(t),this.emit("type"),this.isLastChar?(this.freeTimer(),this.emit("complete",this,this.parent)):(this.timer.delay=this.speed,this.typingIdx++)}getTypingString(t,s,f,C){var S;if(C===0){var r=0,y=s;this.insertIdx=y,S=this.getSubString(t,r,y)}else if(C===1){var y=f,r=y-s;this.insertIdx=0,S=this.getSubString(t,r,y)}else if(C===2){var e=f/2,r=Math.floor(e-s/2),y=r+s;this.insertIdx=s%2?s:0,S=this.getSubString(t,r,y)}else if(C===3){var u=Math.floor(s/2),m;if(u>0){var y=f,r=y-u;m=this.getSubString(t,r,y)}else m="";var d=s-u,l;if(d>0){var r=0,y=r+d;this.insertIdx=y,l=this.getSubString(t,r,y)}else l="",this.insertIdx=0;S=l+m}return S}startTimer(t){this.timer&&this.freeTimer();var s;return t===void 0?s=0:(this.speed,s=t),this.timer=this.scene.time.addEvent({delay:1e-4,startAt:s,loop:!0,callback:this.onTyping,callbackScope:this}),this}getTimer(){return this.timer}freeTimer(){return this.timer&&(this.timer.remove(),this.timer=null),this}setText(t){this.setTextCallback&&(this.setTextCallbackScope?t=this.setTextCallback.call(this.setTextCallbackScope,t,this.isLastChar,this.insertIdx):t=this.setTextCallback(t,this.isLastChar,this.insertIdx)),this.textWrapEnable?md(this.parent,t):this.parent.setText(t)}getTextLength(t){var s=this.parent,f;return s.getPlainText?f=s.getPlainText(t).length:f=t.length,f}getSubString(t,s,f){var C=this.parent,S;return C.getSubString?S=C.getSubString(t,s,f):S=t.slice(s,f),S}}var Vv=function(i){return Array.isArray(i)?i=i.join(`
`):typeof i=="number"&&(i=i.toString()),i};const AI={"left-to-right":0,"right-to-left":1,"middle-to-sides":2,"sides-to-middle":3},zv=Phaser.Utils.Objects.GetValue;class Ed extends gi{constructor(t,s){s===void 0&&(s={text:OI(t)}),super(t,s),this.type="rexTextBox";var f=this.childrenMap.text;this.page=new Ho(f,zv(s,"page",void 0)),this.typing=new Pd(f,zv(s,"typing",s.type)),this.typing.on("complete",this.onPageEnd,this).on("type",this.onType,this),this.textWidth=f.width,this.textHeight=f.height}start(t,s){return this.page.setText(t),s!==void 0&&this.setTypingSpeed(s),this.typeNextPage(),this}typeNextPage(){if(this.isLastPage)this.emit("complete");else{var t=this.page.getNextPage();this.typing.start(t)}return this}pause(){return this.typing.pause(),this}resume(){return this.typing.resume(),this}stop(t){return this.typing.stop(t),this}setTypeSpeed(t){return this.typing.setTypingSpeed(t),this}setTypingSpeed(t){return this.typing.setTypingSpeed(t),this}get isTyping(){return this.typing.isTyping}get isLastPage(){return this.page.isLastPage}get isFirstPage(){return this.page.isFirstPage}get pageCount(){return this.page.pageCount}get pageIndex(){return this.page.pageIndex}onType(){var t=this.childrenMap.text;(this.textWidth!==t.width||this.textHeight!==t.height)&&(this.textWidth=t.width,this.textHeight=t.height,this.getTopmostSizer().layout()),this.emit("type")}onPageEnd(){this.emit("pageend"),this.isLastPage&&this.emit("complete")}}var OI=function(i){return i.add.text(0,0,"",{wordWrap:{width:200},maxLines:5})};st.register("textBox",function(i){var t=new Ed(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.TextBox",Ed);const Re=Phaser.Utils.Objects.GetValue;class Md extends yt{constructor(t,s){super(t,s),this.type="rexNumberBar";var f=Re(s,"background",void 0),C=Re(s,"icon",void 0),S=Re(s,"iconMask",void 0),r=Re(s,"slider",void 0),y=Re(s,"text",void 0),e=Re(s,"space.icon",0),u=Re(s,"space.slider",0);if(f&&this.addBackground(f),C){var m;this.orientation===0?(r||y)&&(m={right:e}):(r||y)&&(m={bottom:e}),this.add(C,{proportion:0,align:"center",padding:m}),S&&(S=Ai.call(this,C,C,1))}var d;if(r){r.orientation=this.orientation,r.eventEmitter=this,r.value=null,r.hasOwnProperty("input")||(r.input=-1),d=new zs(t,r),t.add.existing(d);var m;this.orientation===0?y&&(m={right:u}):y&&(m={bottom:u});var l;if(this.orientation===0){var h=Re(r,"width",void 0);l=h===void 0?1:0}else{var n=Re(r,"height",void 0);l=n===void 0?1:0}this.add(d,{proportion:l,align:"center",padding:m})}y&&this.add(y),this.addChildrenMap("background",f),this.addChildrenMap("icon",C),this.addChildrenMap("iconMask",S),this.addChildrenMap("slider",d),this.addChildrenMap("text",y);var a=Re(s,"valuechangeCallback",null);if(a!==null){var c=Re(s,"valuechangeCallbackScope",void 0);this.on("valuechange",a,c)}this.setEnable(Re(s,"enable",void 0)),this.setValue(Re(s,"value",0))}get enable(){return this.childrenMap.slider?this.childrenMap.slider.enable:!1}set enable(t){this.childrenMap.slider&&this.childrenMap.slider.setEnable(t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(t){this.childrenMap.slider&&(this.childrenMap.slider.value=t)}setValue(t,s,f){return this.childrenMap.slider&&this.childrenMap.slider.setValue(t,s,f),this}addValue(t,s,f){return this.childrenMap.slider&&this.childrenMap.slider.addValue(t,s,f),this}getValue(t,s){return this.childrenMap.slider?this.childrenMap.slider.getValue(t,s):0}easeValueTo(t,s,f){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(t,s,f),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(t),this}setEaseValueFunction(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(t),this}get text(){var t=this.childrenMap.text;if(t===void 0)return"";var s;return t.text?s=t.text:s=t.getData("text"),s}set text(t){var s=this.childrenMap.text;s!==void 0&&(s.setText?s.setText(t):s.setData("text",t))}setText(t){return this.text=t,this}}st.register("numberBar",function(i){var t=new Md(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.NumberBar",Md);st.register("scrollBar",function(i){var t=new Go(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.ScrollBar",Go);const al=Phaser.Utils.Objects.GetValue,Uv={leftTop:"left-top",centerTop:"center-top",rightTop:"right-top",leftCenter:"left-center",center:"center",rightCenter:"right-center",leftBottom:"left-bottom",centerBottom:"center-bottom",rightBottom:"right-bottom"};class wd extends be{constructor(t,s){super(t,s),this.type="rexBadge";var f=al(s,"background",void 0);f&&this.addBackground(f),this.addChildrenMap("background",f);var C=al(s,"main",void 0);C&&this.add(C,{key:"main",align:"center",expand:!1}),this.addChildrenMap("main",C);for(var S in Uv){var r=al(s,S,void 0);r&&(this.add(r,{key:S,align:Uv[S],expand:!1}),this.addChildrenMap(S,r))}}}st.register("badgeLabel",function(i){var t=new wd(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.BadgeLabel",wd);const bI=be.prototype.add;var Yv=function(i,t,s,f,C,S,r,y,e){return i.setVisible(!1),bI.call(this,i,t,s,f,C,S,r,y,e),this};const FI={add:Yv,addPage:Yv};var LI=function(i){return i===void 0?null:this.sizerChildren.hasOwnProperty(i)?this.sizerChildren[i]:null};const kv=Oe.prototype.setChildVisible;var DI=function(i,t){this._previousKey=this._currentKey;var s=this.previousPage;s&&(this.swapMode===0?(kv.call(this,s,!1),this.emit("pageinvisible",s,this._previousKey,this)):s.destroy()),i&&!this.sizerChildren.hasOwnProperty(i)&&this.emit("createpage",i,this),this._currentKey=i;var f=this.currentPage;return f&&(kv.call(this,f,!0),this.emit("pagevisible",f,this._currentKey,this),t===void 0&&(t=this.fadeInDuration),t>0&&f.setAlpha(0).fadeIn(t,1)),this},II=function(i){return this.sizerChildren.hasOwnProperty(i)},lx={getPage:LI,swapPage:DI,hasPage:II};Object.assign(lx,FI);const Xv=Phaser.Utils.Objects.GetValue;class zr extends be{constructor(t,s){super(t,s),this.type="rexPages",this.childrenMap=this.sizerChildren,this._previousKey=void 0,this._currentKey=void 0,this.setSwapMode(Xv(s,"swapMode",0)),this.setFadeInDuration(Xv(s,"fadeIn",0))}setSwapMode(t){return typeof t=="string"&&(t=BI[t]),this.swapMode=t,this}setFadeInDuration(t){return this.fadeInDuration=t,this}get previousKey(){return this._previousKey}get currentKey(){return this._currentKey}set currentKey(t){this.swapPage(t)}get currentPage(){return this.getPage(this.currentKey)}get previousPage(){return this.getPage(this.previousKey)}get keys(){return Object.keys(this.sizerChildren)}}Object.assign(zr.prototype,lx);const BI={invisible:0,destroy:1};st.register("pages",function(i){var t=new zr(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.Pages",zr);const ux=Phaser.Math.Vector3,GI=Phaser.Math.Matrix4;var Wv=new ux,Hv=new ux,$v=new GI,NI=function(i,t,s,f,C,S,r){t===void 0&&(t=0),s===void 0&&(s=0),f===void 0&&(f=0),C===void 0&&(C=0),S===void 0&&(S=0),r===void 0&&(r=0),Wv.set(t,s,f),Hv.set(C,S,r),$v.fromRotationXYTranslation(Hv,Wv,!0);for(var y=0,e=i.vertices.length;y<e;y++)i.vertices[y].transformMat4($v)};const VI=Phaser.GameObjects.Mesh,zI=Phaser.Utils.Objects.IsPlainObject,Es=Phaser.Utils.Objects.GetValue,UI=Phaser.Geom.Mesh.GenerateGridVerts,ol=Phaser.Math.RadToDeg,Va=Phaser.Math.DegToRad,dx=45,YI=1+1/Math.sin(Va(dx));let fx=class extends VI{constructor(t,s,f,C,S,r){zI(s)&&(r=s,s=Es(r,"x",0),f=Es(r,"y",0),C=Es(r,"key",null),S=Es(r,"frame",null)),super(t,s,f,C,S),this.type="rexPerspectiveImage",this.setSizeToFrame(),this.resetPerspective(),this.panZ(YI),this.hideCCW=Es(r,"hideCCW",!0);var y=Es(r,"gridWidth",32),e=Es(r,"gridHeight",y);this.resetVerts(y,e)}get originX(){return .5}get originY(){return .5}get displayOriginX(){return this.width*.5}get displayOriginY(){return this.height*.5}resetPerspective(){return this.setPerspective(this.width,this.height,dx),this}resetVerts(t,s){if(t!==void 0&&(this.gridWidth=t),s!==void 0&&(this.gridHeight=s),this.clear(),this.dirtyCache[9]=-1,this.width===0||this.height===0)return this;var f=this.frame.cutWidth,C=this.frame.cutHeight;UI({mesh:this,texture:this.texture.key,frame:this.frame.name,width:f/this.height,height:C/this.height,widthSegments:Math.ceil(f/this.gridWidth),heightSegments:Math.ceil(C/this.gridHeight)});var S=this.transformInfo;return S&&this.transformVerts(S.x,S.y,S.z,S.rotateX,S.rotateY,S.rotateZ),this}syncSize(){return this.setSizeToFrame(),this.resetPerspective(),this.resetVerts(),this}get rotationX(){return this.modelRotation.x}set rotationX(t){this.modelRotation.x=t}get angleX(){return ol(this.rotationX)}set angleX(t){this.rotationX=Va(t)}get rotationY(){return this.modelRotation.y}set rotationY(t){this.modelRotation.y=t}get angleY(){return ol(this.rotationY)}set angleY(t){this.rotationY=Va(t)}get rotationZ(){return this.modelRotation.z}set rotationZ(t){this.modelRotation.z=t}get angleZ(){return ol(this.rotationZ)}set angleZ(t){this.rotationZ=Va(t)}transformVerts(t,s,f,C,S,r){return t===void 0&&(t=0),s===void 0&&(s=0),f===void 0&&(f=0),C===void 0&&(C=0),S===void 0&&(S=0),r===void 0&&(r=0),this.transformInfo||(this.transformInfo={}),this.transformInfo.x=t,this.transformInfo.y=s,this.transformInfo.rotateX=C,this.transformInfo.rotateY=S,this.transformInfo.rotateZ=r,NI(this,t,s,f,C,S,r),this}forceUpdate(){return this.dirtyCache[10]=1,this}get tint(){return this.vertices.length===0?16777215:this.vertices[0].color}set tint(t){for(var s=this.vertices,f=0,C=s.length;f<C;f++)s[f].color=t}setTint(t){return this.tint=t,this}};const kI=Phaser.Textures.DynamicTexture;var cx=function(i,t,s){t===void 0&&(t=2),s===void 0&&(s=2);var f=new kI(i.sys.textures,null,t,s);return f};const XI=Phaser.Utils.Objects.IsPlainObject,Pa=Phaser.Utils.Objects.GetValue;class vx extends fx{constructor(t,s,f,C,S,r){XI(s)&&(r=s,s=Pa(r,"x",0),f=Pa(r,"y",0),C=Pa(r,"width",32),S=Pa(r,"height",32));var y=cx(t,C,S);super(t,s,f,y,null,r),this.type="rexPerspectiveRenderTexture",this.rt=this.texture}destroy(t){super.destroy(t),this.rt.destroy(),this.rt=null}snapshot(t,s){return s===void 0&&(s={}),s.gameObjects=t,s.renderTexture=this.rt,Ou(s),(this.width!==this.frame.realWidth||this.height!==this.frame.realHeight)&&this.syncSize(),this}}Phaser.Animations.AnimationState;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;var Ze=function(i,t,s,f){if(Array.isArray(i))for(var C=!1,S=0,r=i.length;S<r;S++){var y=i[S];if(!(f&&!y)&&(s?C=t.call(s,y,S,i):C=t(y,S,i),C))return}else{var C=!1;for(var e in i){var y=i[e];if(!(f&&!y)&&(s?C=t.call(s,y,e,i):C=t(y,e,i),C))return}}};const hl=Phaser.Math.RadToDeg,ll=Phaser.Math.DegToRad;class WI extends Oe{constructor(t,s,f,C,S,r){super(t,s,f,C,S),this.faces=r,Ze(r,function(y){y.setPosition(s,f),this.add(y)},this,!0)}get rotationX(){return 0}set rotationX(t){}get angleX(){return hl(this.rotationX)}set angleX(t){this.rotationX=ll(t)}get rotationY(){return 0}set rotationY(t){}get angleY(){return hl(this.rotationY)}set angleY(t){this.rotationY=ll(t)}get rotationZ(){return 0}set rotationZ(t){}get angleZ(){return hl(this.rotationZ)}set angleZ(t){this.rotationZ=ll(t)}setDebug(t,s){return Ze(this.faces,function(f){f.setDebug(t,s)},null,!0),this}panX(t){return Ze(this.faces,function(s){s.panX(t)},null,!0),this}panY(t){return Ze(this.faces,function(s){s.panY(t)},null,!0),this}panZ(t){return Ze(this.faces,function(s){s.panZ(t)},null,!0),this}transformVerts(t,s,f,C,S,r){return Ze(this.faces,function(y){y.transformVerts(t,s,f,C,S,r)},null,!0),this}forEachFace(t,s,f){return Ze(this.faces,t,s,f),this}}const HI=Phaser.Utils.Objects.IsPlainObject,$I={key:"__WHITE"},KI={image:fx,rendertexture:vx};var Kv=function(i,t){t===void 0&&(t=$I);var s;return HI(t)?(t.hasOwnProperty("type")||(t.hasOwnProperty("key")?t.type="image":t.hasOwnProperty("width")&&(t.type="rendertexture")),s=new KI[t.type](i,t),i.add.existing(s)):s=t,s},jI=function(i,t,s){var f;if(s===void 0){f=[];for(var C,S,r=0,y=t.length;r<y;r++)S=t[r],S?C=Kv(i,S):C=null,f.push(C)}else{f={};for(var C,e,r=0,y=s.length;r<y;r++)e=s[r],t.hasOwnProperty(e)?C=Kv(i,t[e]):C=null,f[e]=C}return f};const ZI=Phaser.Math.DegToRad,jv=ZI(180);var JI=function(i,t){var s=t.back;s&&(i.orientation===0?s.transformVerts(0,0,0,0,jv,0):s.transformVerts(0,0,0,jv,0,0))};const ul=Phaser.Utils.Objects.GetValue,QI=Phaser.Math.Linear;let qI=class extends Ds{constructor(t,s){super(t,s),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setEase(ul(t,"ease","Cubic")),this.setFrontToBackDirection(ul(t,"frontToBack",0)),this.setBackToFrontDirection(ul(t,"backToFront",1)),this}setFrontToBackDirection(t){return typeof t=="string"&&(t=Zv[t]),this.endAngleFB=t===0?180:-180,this}setBackToFrontDirection(t){return typeof t=="string"&&(t=Zv[t]),this.endAngleBF=t===0?-180:180,this}start(t,s){if(this.timer.isRunning)return this;this.timer.setDelay(this.delay).setDuration(t);var f=s+1,C=this.parent;return C.face===0?(this.startAngle=0,this.endAngle=this.endAngleFB*f):(this.startAngle=this.endAngleBF,this.endAngle=this.startAngle-this.endAngleBF*f),super.start(),this}flip(t,s){return this.isRunning?this:(t===void 0&&(t=this.duration),s===void 0&&(s=0),this.start(t,s),this.emit("start",this.parent,this),this.parent.currentFaceIndex=(this.parent.currentFaceIndex+s+1)%2,this)}flipRight(t,s){return this.parent.currentFaceIndex===0?this.setFrontToBackDirection(0):this.setBackToFrontDirection(0),this.flip(t,s),this}flipLeft(t,s){return this.parent.currentFaceIndex===0?this.setFrontToBackDirection(1):this.setBackToFrontDirection(1),this.flip(t,s),this}updateGameObject(t,s){var f=this.easeFn(s.t),C=QI(this.startAngle,this.endAngle,f);t.orientation===0?t.angleY=C:t.angleX=C}};const Zv={right:0,"left-to-right":0,left:1,"right-to-left":1},_I=Phaser.Utils.Objects.IsPlainObject,Ms=Phaser.Utils.Objects.GetValue,t4=["back","front"];class e4 extends WI{constructor(t,s,f,C){_I(s)&&(C=s,s=Ms(C,"x",0),f=Ms(C,"y",0));var S=jI(t,C,t4),r=S.back,y=S.front,e=Ms(C,"width"),u=Ms(C,"height");if(e===void 0||u===void 0){if(e===void 0){var m=y?y.width:0,d=r?r.width:0;e=Math.max(m,d)}if(u===void 0){var l=y?y.height:0,h=r?r.height:0;u=Math.max(l,h)}}super(t,s,f,e,u,S),this.type="rexPerspectiveCard",this.frontFaceRotationX=0,this.frontFaceRotationY=0,this.frontFaceRotationZ=0,Ze(S,function(a,c){this[`${c}Face`]=a},this);var n=Ms(C,"flip",void 0);n!==!1&&(this.flip=new qI(this,n)),this.setOrientation(Ms(C,"orientation",0)),JI(this,S),this.setFace(Ms(C,"face",0))}get rotationX(){return this.frontFaceRotationX}set rotationX(t){this.frontFaceRotationX!==t&&(this.frontFaceRotationX=t,Ze(this.faces,function(s){s.rotationX=t},null,!0))}get rotationY(){return this.frontFaceRotationY}set rotationY(t){this.frontFaceRotationY!==t&&(this.frontFaceRotationY=t,Ze(this.faces,function(s){s.rotationY=t},null,!0))}get rotationZ(){return this.frontFaceRotationZ}set rotationZ(t){this.frontFaceRotationZ!==t&&(this.frontFaceRotationZ=t,Ze(this.faces,function(s){s.rotationZ=t},null,!0))}setOrientation(t){return typeof t=="string"&&(t=i4[t]),this.orientation=t,this}get face(){return this.currentFaceIndex}set face(t){typeof t=="string"&&(t=s4[t]),this.currentFaceIndex=t;var s=t===1,f=s?180:0;this.orientation===0?this.angleY=f:this.angleX=f}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}}const i4={x:0,horizontal:0,h:0,y:1,vertical:1,v:1},s4={front:0,back:1};Phaser.Utils.Objects.GetValue;Phaser.Math.RadToDeg;Phaser.Math.DegToRad;Phaser.Math.Angle.WrapDegrees;Phaser.Math.Angle.ShortestBetween;Phaser.Math.Wrap;Phaser.Math.Linear;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Math.DegToRad;Phaser.Math.RadToDeg;Phaser.Math.Angle.WrapDegrees;Phaser.Math.Linear;Phaser.Math.Wrap;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Math.Wrap;const n4=Phaser.Utils.Objects.GetValue;var r4=function(i,t,s){t.visibleSibling=[],t.isRunning=!1,t.useParentBounds=n4(s,"useParentBounds",!1),t.setPosition(i.x,i.y).setVisible(!1),i.pin(t)},px=function(i,t){if(!i)return!1;for(var s=t.visibleSibling,f=0,C=s.length;f<C;f++)i.setChildVisible(s[f],!0);return s.length=0,i.setChildVisible(t,!1),t.isRunning=!1,!0},a4=function(i,t){if(!i)return!1;px(i,t);var s=t.useParentBounds;Ou({gameObjects:i.getAllVisibleChildren(),renderTexture:t.rt,x:t.x,y:t.y,width:s?i.displayWidth:void 0,height:s?i.displayHeighth:void 0,originX:s?i.originX:void 0,originY:s?i.originY:void 0}),i.setChildVisible(t,!0);for(var f=t.visibleSibling,C=i.children,S=0,r=C.length;S<r;S++){var y=C[S];y.visible&&y!==t&&(i.setChildVisible(y,!1),f.push(y))}return t.isRunning=!0,!0},gx=function(i){return class extends i{constructor(s,f){var C=s.scene;super(C,0,0,1,1,f),C.add.existing(this),r4(s,this,f)}destroy(s){this.scene&&(this.exit(),super.destroy(s))}enter(){var s=a4(this.rexContainer.parent,this);return s&&this.syncSize(),this}exit(){return px(this.rexContainer.parent,this),this}}};class mx extends gx(vx){get perspectiveState(){return this.isRunning}}const o4=Phaser.Utils.Objects.GetValue;var h4=function(i){var t=this.scene;this.setSnapshotPadding(o4(i,"snapshotPadding",0)),i=Fs(i),delete i.width,delete i.height,i.front={width:1,height:1},i.back={width:1,height:1};var s=new e4(t,i);t.add.existing(s);var f=s.flip;if(f){var C=this;f.on("start",function(){C.enterPerspectiveMode()}).on("complete",function(){C.exitPerspectiveMode()})}return s};const l4=["front","back"],u4={enterPerspectiveMode(){return this.isInPerspectiveMode?this:(this.setChildVisible(this.perspectiveCard,!0),this.snapshotFace(0),this.snapshotFace(1),this.setChildVisible(this.childrenMap.front,!1),this.setChildVisible(this.childrenMap.back,!1),this.perspectiveCard.setSize(this.width,this.height),this)},exitPerspectiveMode(){if(!this.isInPerspectiveMode)return this;this.setChildVisible(this.perspectiveCard,!1);var i=this.perspectiveCard.face===0;return this.setChildVisible(this.childrenMap.front,i),this.setChildVisible(this.childrenMap.back,!i),this},setSnapshotPadding(i){return this.snapshotPadding=i,this},snapshotFace(i){typeof i=="number"&&(i=l4[i]);var t=this.perspectiveCard.faces[i],s=this.childrenMap[i];t.rt.clear();var f=s.visible;s.visible=!0;var C=s.isRexContainerLite?s.getAllVisibleChildren():s;return t.snapshot(C,{padding:this.snapshotPadding}),s.visible=f,this}},Jv=Phaser.Utils.Objects.GetValue;class Rd extends be{constructor(t,s){super(t,s),this.type="rexPerspectiveCard";var f=s.back,C=Jv(s,"expand.back",!0);this.add(f,{key:"back",expand:C});var S=s.front,r=Jv(s,"expand.front",!0);this.add(S,{key:"front",expand:r}),this.perspectiveCard=h4.call(this,s),this.pin(this.perspectiveCard),this.exitPerspectiveMode(!1)}get flip(){return this.perspectiveCard.flip}get face(){return this.perspectiveCard.face}set face(t){if(!(this.flip&&this.flip.isRunning)){this.perspectiveCard.face=t;var s=t===0,f=this.childrenMap.front,C=this.childrenMap.back;this.setChildVisible(f,s),this.setChildVisible(C,!s)}}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}get isInPerspectiveMode(){return this.perspectiveCard.visible}get rotationX(){return this.perspectiveCard.rotationX}set rotationX(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationX=t}get angleX(){return this.perspectiveCard.angleX}set angleX(t){this.enterPerspectiveMode(),this.perspectiveCard.angleX=t}get rotationY(){return this.perspectiveCard.rotationY}set rotationY(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationY=t}get angleY(){return this.perspectiveCard.angleY}set angleY(t){this.enterPerspectiveMode(),this.perspectiveCard.angleY=t}get rotationZ(){return this.perspectiveCard.rotationZ}set rotationZ(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationZ=t}get angleZ(){return this.perspectiveCard.angleZ}set angleZ(t){this.enterPerspectiveMode(),this.perspectiveCard.angleZ=t}panX(t){return this.enterPerspectiveMode(),this.perspectiveCard.panX(t),this}panY(t){return this.enterPerspectiveMode(),this.perspectiveCard.panY(t),this}panZ(t){return this.enterPerspectiveMode(),this.perspectiveCard.panZ(t),this}transformVerts(t,s,f,C,S,r){return this.enterPerspectiveMode(),this.perspectiveCard.transformVerts(t,s,f,C,S,r),this}forEachFace(t,s,f){return this.enterPerspectiveMode(),this.perspectiveCard.forEachFace(t,s,f),this}}Object.assign(Rd.prototype,u4);st.register("perspectiveCard",function(i){var t=new Rd(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.PerspectiveCard",Rd);var d4=function(i){var t=this.getElement("tabs.buttons");if(!(i>=t.length))return t[i].name},f4=function(i){for(var t=this.getElement("tabs.buttons"),s=0,f=t.length;s<f;s++)if(t[s].name===i)return s};const c4=Phaser.Utils.Objects.IsPlainObject,dl=Phaser.Utils.Objects.GetValue,v4=Phaser.Utils.String.UUID;var p4=function(i,t,s){if(c4(i)){var f=i;i=dl(f,"key"),t=dl(f,"tab"),s=dl(f,"page")}return i||(i=v4()),t.name=i,this.childrenMap.tabs.addButton(t),this.childrenMap.pages.addPage(s,{key:i}),this},g4=function(i,t){var s;if(typeof i=="number"?s=i:s=this.getPageIndex(i),s!=null){var f;t!==void 0&&(f=this.childrenMap.pages.fadeInDuration,this.childrenMap.pages.fadeInDuration=t),this.childrenMap.tabs.emitButtonClick(s),f!==void 0&&(this.childrenMap.pages.fadeInDuration=f)}return this},m4=function(i){return this.swapPage(0,i),this},x4=function(i){var t=this.getElement("tabs.buttons").length-1;return this.swapPage(t,i),this};const y4={swapPage:g4,swapFirstPage:m4,swapLastPage:x4};var T4=function(i,t){typeof i=="number"&&(i=this.getPageKey(i));var s=this.childrenMap.tabs,f=s.getByName(i),C=this.childrenMap.pages,S=C.getElement(i);return!f||!S?this:(C.removeChildrenMap(i),s.removeButton(f,t),C.remove(S,t),this)};const C4={removePage:T4};var S4=function(i){return typeof i=="number"&&(i=this.getPageKey(i)),this.childrenMap.pages.getPage(i)},P4=function(i){var t;return typeof i=="number"?t=i:t=this.getPageIndex(i),this.getElement("tabs.buttons")[t]},xx={getPageKey:d4,getPageIndex:f4,addPage:p4,getPage:S4,getTab:P4};Object.assign(xx,y4,C4);const ws=Phaser.Utils.Objects.GetValue,Ea=yt.prototype.add;let $o=class extends yt{constructor(t,s){s===void 0&&(s={});var f=ws(s,"tabPosition","top"),C=f==="left"||f==="right"?"x":"y";s.orientation=C,super(t,s),this.type="rexTabPages";var S=ws(s,"background",void 0);S&&this.addBackground(S);var r=ws(s,"pages"),y=new zr(t,r);t.add.existing(y);var e=C==="y",u=e?ws(s,"wrapTabs",!1):!1,m=ws(s,"tabs",void 0);m===void 0&&(m={});var d=u?ts:qt;m.orientation=e?"x":"y",m.buttonsType="radio";var l=new d(t,m);t.add.existing(l);var h=u?!0:ws(s,"expand.tabs",!1),n=ws(s,"align.tabs","left");switch(f){case"top":case"left":Ea.call(this,l,{proportion:0,expand:h,align:n}),Ea.call(this,y,{proportion:1,expand:!0});break;case"bottom":case"right":Ea.call(this,y,{proportion:1,expand:!0}),Ea.call(this,l,{proportion:0,expand:h,align:n});break}this.addChildrenMap("background",S),this.addChildrenMap("tabs",l),this.addChildrenMap("pages",y),l.on("button.click",function(a){var c=a.name;y.hasPage(c)&&y.swapPage(c)}),l.on("button.statechange",function(a,c,o,v){var g=o?"tab.focus":"tab.blur";this.emit(g,a,a.name)},this),y.on("pagevisible",function(a,c,o){this.emit("page.focus",a,c)}),y.on("pageinvisible",function(a,c,o){this.emit("page.blur",a,c)})}get currentKey(){return this.getElement("pages").currentKey}set currentKey(t){this.showPage(t)}get keys(){return this.getElement("pages").keys}get currentPage(){return this.getElement("pages").currentPage}get previousPage(){return this.getElement("pages").previousPage}};Object.assign($o.prototype,xx);st.register("tabPages",function(i){var t=new $o(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.TabPages",$o);class E4 extends yo{constructor(t,s){s===void 0&&(s={}),s.destroy=!1,super(t,s)}onOpen(){this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.parent,this),super.onClose()}}const M4={expand(i){if(this.expanded===!0)return this;i===void 0&&(i=this.transitionDuration),this.expanded=!0;var t=this.childrenMap.title,s=this.childrenMap.child;this.show(s);var f=this.reLayoutTarget?this.reLayoutTarget:this.getTopmostSizer();return f.layout(),t.emit("folder.expand",i,this),s.emit("folder.expand",i,this),this.emit("expand.start",this),this.childTransition.once("open",function(){this.emit("expand.complete",this)},this).requestOpen(null,i),this},collapse(i){if(this.expanded===!1)return this;i===void 0&&(i=this.transitionDuration),this.expanded=!1;var t=this.childrenMap.title,s=this.childrenMap.child;return t.emit("folder.collapse",i,this),s.emit("folder.collapse",i,this),this.emit("collapse.start",this),this.childTransition.once("close",function(){this.setChildScale(s,1,1).hide(s);var f=this.reLayoutTarget?this.reLayoutTarget:this.getTopmostSizer();f.layout(),this.emit("collapse.complete",this)},this).requestClose(null,i),this},toggle(i){return this.expanded?this.collapse(i):this.expand(i),this}};var w4=function(i,t){$u.popUp.call(i,t,this.expandDirection)},R4=function(i,t){$u.scaleDown.call(i,t,this.expandDirection)};const A4={setTransitionDuration(i){return this.transitionDuration=i,this.childTransition.setTransitInTime(i).setTransitOutTime(i),this},setExpandCallback(i){return i===void 0&&(i=w4.bind(this)),this.childTransition.setTransitInCallback(i),this},setCollapseCallback(i){return i===void 0&&(i=R4.bind(this)),this.childTransition.setTransitOutCallback(i),this}},He=Phaser.Utils.Objects.GetValue;let Ko=class extends yt{constructor(t,s){s===void 0&&(s={}),s.hasOwnProperty("orientation")||(s.orientation=1),super(t,s),this.type="rexFolder",this.expanded=void 0,this.expandDirection=this.orientation===1?"y":"x";var f=s.background,C=s.title,S=s.child;f&&this.addBackground(f);var r=this.orientation===1?"left":"top",d=He(s,"align.title",r),l=He(s,"expand.title",!0);this.add(C,{proportion:0,align:d,expand:l});var y=He(s,"toggleByTarget",void 0),e=He(s,"toggleClickConfig");y===void 0&&(y=C),y&&um.onClick.call(y,function(){this.toggle()},this,e),this.childTransition=new E4(S);var u=He(s,"customChildOrigin",!1);if(!u){var m=this.rtl?1:0;S.setOrigin(m)}var d=He(s,"align.child","left"),l=He(s,"expand.child",!0),h=l?1:0;this.add(S,{proportion:h,align:d,expand:l}),this.addChildrenMap("title",C),this.addChildrenMap("child",S),this.addChildrenMap("background",f);var n=s.transition;this.setTransitionDuration(He(n,"duration",200)),this.setExpandCallback(He(n,"expandCallback",void 0)),this.setCollapseCallback(He(n,"collapseCallback",void 0)),this.reLayoutTarget=He(s,"reLayoutTarget",void 0);var a=s.onExpandStart;a&&this.on("expand.start",a);var c=s.onExpandComplete;c&&this.on("expand.complete",c);var o=s.onCollapseStart;o&&this.on("collapse.start",o);var v=s.onCollapseComplete;v&&this.on("collapse.complete",v)}};Object.assign(Ko.prototype,M4,A4);st.register("folder",function(i){var t=new Ko(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.Folder",Ko);st.register("textArea",function(i){var t=new Gn(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.TextArea",Gn);var O4=function(){if(this.rexSizer.hidden)return 0;var i,t=this.child,s=t.rexSizer;return s.hidden?i=0:this.scrollMode===0?i=this.getChildWidth(t):i=0,i},b4=function(){if(this.rexSizer.hidden)return 0;var i,t=this.child,s=t.rexSizer;return s.hidden||this.scrollMode===0?i=0:i=t.isRexSizer?Math.max(t.minHeight,t.childrenHeight):t.hasOwnProperty("minHeight")?t.minHeight:St(t),i},F4=function(i){return i===void 0&&(i=[]),this.child&&this.child.isRexSizer&&i.push(this.child),i},L4=function(){var i=this.left,t=this.top;this.scrollMode===0?t+=this.childOY:i+=this.childOY,this.child.setPosition(i,t),this.resetChildPositionState(this.child),this.setMaskChildrenFlag()},D4=function(){var i=this.child,t,s;i.rexSizer.hidden||(this.scrollMode===0?t=this.width:s=this.height,i.isRexSizer?i.runLayout(this,t,s):qe(i,t,s),this.resetChildPosition(),this.layoutChildrenMask(),this.maskChildren())},yx={getChildrenWidth:O4,getChildrenHeight:b4,getChildrenSizers:F4,resetChildPosition:L4,layoutChildren:D4};Object.assign(yx,Qm);const Qv=Phaser.Utils.Objects.IsPlainObject,$e=Phaser.Utils.Objects.GetValue,I4=Phaser.Display.Align.TOP_LEFT;class Tx extends Vs{constructor(t,s,f,C,S,r){Qv(s)?(r=s,s=$e(r,"x",0),f=$e(r,"y",0),C=$e(r,"width",void 0),S=$e(r,"height",void 0)):Qv(C)&&(r=C,C=$e(r,"width",void 0),S=$e(r,"height",void 0)),super(t,s,f,C,S,r),this.type="rexScrollableBlock",this.child=void 0,this.childrenMask=void 0,this._childOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setScrollMode($e(r,"scrollMode",!0)),this.setClampMode($e(r,"clamplChildOY",!0));var y=$e(r,"child",void 0),e=$e(r,"expand",!0);y.setOrigin&&y.setOrigin(0),this.add(y),this.sizerChildren=[y];var u=this.getSizerConfig(y);u.align=I4,u.expand=e,this.child=y,this.setupChildrenMask($e(r,"mask",void 0)),this.maskGameObject=Td(this.childrenMask)}destroy(t){this.scene&&(this.destroyChildrenMask(),this.child=void 0,super.destroy(t))}setScrollMode(t){return typeof t=="string"&&(t=Xm[t.toLowerCase()]),this.scrollMode=t,this}setClampMode(t){return t===void 0&&(t=!0),this.clampChildOY=t,this}get instHeight(){return this.scrollMode===0?this.height:this.width}get instWidth(){return this.scrollMode===0?this.width:this.height}get childHeight(){return this.scrollMode===0?St(this.child):Mt(this.child)}get childWidth(){return this.scrollMode===0?Mt(this.child):St(this.child)}get topChildOY(){return 0}get bottomChildOY(){return-this.visibleHeight}get childVisibleHeight(){return this.instHeight}get visibleHeight(){var t=this.childHeight-this.childVisibleHeight;return t<0&&(t=0),t}childOYExceedTop(t){return t===void 0&&(t=this.childOY),t>this.topChildOY}childOYExeceedBottom(t){return t===void 0&&(t=this.childOY),t<this.bottomChildOY}get childOY(){return this._childOY}set childOY(t){var s=this.topChildOY,f=this.bottomChildOY,C=this.childOYExceedTop(t),S=this.childOYExeceedBottom(t);this.clampChildOY&&(this.childVisibleHeight>this.childHeight?t=0:C?t=s:S&&(t=f)),this._childOY!==t&&(this._childOY=t,this.resetChildPosition()),C&&(this.execeedTopState||this.emit("execeedtop",this,t,s)),this.execeedTopState=C,S&&(this.execeedBottomState||this.emit("execeedbottom",this,t,f)),this.execeedBottomState=S}setChildOY(t){return this.childOY=t,this}set t(t){this.childOY=-this.visibleHeight*t}get t(){var t=this.visibleHeight;return t===0?0:this.childOY/-t}setChildOYByPercentage(t){return this.t=t,this}}Object.assign(Tx.prototype,yx);const rr=Phaser.Utils.Objects.GetValue;class Cx extends No{constructor(t,s){s===void 0&&(s={});var f=Bo(s),C=rr(s,"panel",void 0);C===void 0&&(C={}),C.scrollMode=f,C.clamplChildOY=rr(s,"clamplChildOY",!1);var S=new Tx(t,C);t.add.existing(S);var r=rr(C,"width",void 0),y=rr(C,"height",void 0),e,u;f===0?(e=r===void 0?1:0,u=y===void 0):(e=y===void 0?1:0,u=r===void 0),s.type="rexScrollablePanel",s.child={gameObject:S,proportion:e,expand:u};var m=rr(s,"space",void 0);m&&(m.child=m.panel),super(t,s),this.addChildrenMap("panel",S.child),this.addChildrenMap("panelLayer",S.maskLayer),this.addChildrenMap("mask",S.maskGameObject)}setChildrenInteractive(t){return t===void 0&&(t={}),t.hasOwnProperty("eventEmitter")||(t.eventEmitter=this),t.hasOwnProperty("targets")||(t.targets=[this.childrenMap.panel]),id(this.childrenMap.child,t),this}}st.register("scrollablePanel",function(i){var t=new Cx(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.ScrollablePanel",Cx);const Ma={popUp:function(i,t){i.popUp(t)},scaleDown:function(i,t){i.scaleDown(t)},fadeIn:function(i,t){i.fadeIn(t)},fadeOut:function(i,t){i.fadeOut(t)}};var Hl=function(i,t,s){var f=Ft(s,"reverse",!1),C;if(Qe(i[0]))if(f)for(var r=i.length,S=r-1;S>=0;S--)C=Hl(i[S],t,s);else for(var S=0,r=i.length;S<r;S++)C=Hl(i[S],t,s);else C=B4(i,t,s);return C},B4=function(i,t,s){var f=Ft(s,"argsConvert",void 0),C=Ft(s,"argsConvertScope",void 0),S=i[0];if(ki=Pu(ki,i,1),f){f===!0&&(f=E0,C=void 0);for(var r=0,y=ki.length;r<y;r++)C?ki[r]=f.call(C,ki[r],i):ki[r]=f(ki[r],i)}var e;typeof S=="string"?(e=t[S],e==null&&(e=Ft(t,S,null))):e=S;var u=e.apply(t,ki);return u},ki=[];const Ke=Phaser.Utils.Objects.GetValue;class G4 extends _t{constructor(t,s){super(t,s);var f=Ke(s,"clock",void 0);f||(f=new y0(t)),this.clock=f,this.clock.on("update",this.update,this),this.resetFromJSON(s)}resetFromJSON(t){return this.clock.resetFromJSON(Ke(t,"clock",void 0)),this.state=Ke(t,"state",0),this.commands=Ke(t,"commands",[]),this.scope=Ke(t,"scope",void 0),this.setTimeUnit(Ke(t,"timeUnit",0)),this.setDtMode(Ke(t,"dtMode",0)),this.index=Ke(t,"index",0),this.nextTime=Ke(t,"nextTime",0),this}toJSON(){return{clock:this.clock.toJSON(),state:this.state,commands:this.commands,scope:this.scope,timeUnit:this.timeUnit,dtMode:this.dtMode,index:this.index,nextTime:this.nextTime}}shutdown(t){this.isShutdown||(this.clock.shutdown(t),this.commands=void 0,super.shutdown(t))}load(t,s,f){this.stop();var C=Ke(f,"timeUnit",void 0);C!==void 0&&this.setTimeUnit(C);var S=Ke(f,"dtMode",void 0);return S!==void 0&&this.setDtMode(S),t=t.filter(function(r){var y=r[0];return!isNaN(y)}).map(function(r){var y=r[0];return typeof y=="string"&&(r[0]=parseFloat(r[0])),r}),this.dtMode===0&&t.sort(function(r,y){var e=r[0],u=y[0];return e>u?1:e<u?-1:0}),this.commands=t,this.scope=s,this}start(t){return t===void 0&&(t=0),this.stop(),this.index=0,this.state=1,this.nextTime=this.getNextDt(0),this.clock.start(t),this.update(t),this.emit("start",this.parent,this),this}pause(){return this.clock.pause(),this.emit("pause",this.parent,this),this}resume(){return this.clock.resume(),this.emit("resume",this.parent,this),this}stop(){return this.clock.stop(),this.state=0,this.emit("stop",this.parent,this),this}seek(t){return this.clock.seek(t),this}seekToNext(){return this.seek(this.nextTime),this}get isPlaying(){return this.clock.isRunning}get completed(){return this.state===2}get timeScale(){return this.clock.timeScale}set timeScale(t){this.clock.timeScale=t}setTimeScale(t){return this.timeScale=t,this}get now(){return this.clock.now}update(t){if(this.nextTime>t)return this;for(var s=this.commands.length-1;;){var f=this.commands[this.index],C=f[1];if(Qe(C)||(C=Pu(N4,f,1)),Hl(C,this.scope),this.emit("runcommand",C,this.scope),this.index===s)return this.complete(),this;if(this.index++,this.nextTime=this.getNextDt(this.nextTime),this.nextTime>t)return this}}complete(){this.clock.stop(),this.state=2,this.emit("complete",this.parent,this)}getNextDt(t){var s=this.commands[this.index][0];return this.timeUnit===1&&(s=s*1e3),this.dtMode===1&&(s+=t),s}setDtMode(t){return typeof t=="string"&&(t=z4[t]),this.dtMode=t,this}setTimeUnit(t){return typeof t=="string"&&(t=V4[t]),this.timeUnit=t,this}}var N4=[];const V4={ms:0,s:1,sec:1},z4={abs:0,absolute:0,inc:1,increment:1},ar=Phaser.Utils.Objects.GetValue;class Ad extends gi{constructor(t,s){s===void 0&&(s={text:createDefaultTextObject(t)}),super(t,s),this.type="rexToast",this.setTransitInTime(ar(s,"duration.in",200)),this.setDisplayTime(ar(s,"duration.hold",1200)),this.setTransitOutTime(ar(s,"duration.out",200)),this.setTransitInCallback(ar(s,"transitIn",Xi.popUp)),this.setTransitOutCallback(ar(s,"transitOut",Xi.scaleDown)),this.player=new G4(this,{dtMode:1}),this.messages=[],this.scaleX0=void 0,this.scaleY0=void 0,this.setVisible(!1)}destroy(t){this.scene&&(this.player.destroy(),this.player=void 0,this.messages=void 0,super.destroy(t))}setDisplayTime(t){return this.displayTime=t,this}setTransitOutTime(t){return this.transitOutTime=t,this}setTransitInTime(t){return this.transitInTime=t,this}setTransitInCallback(t){switch(typeof t=="string"&&(t=Xi[t]),t){case Xi.popUp:t=Ma.popUp;break;case Xi.fadeIn:t=Ma.fadeIn;break}return t||(t=he),this.transitInCallback=t,this}setTransitOutCallback(t){switch(typeof t=="string"&&(t=Xi[t]),t){case Xi.scaleDown:t=Ma.scaleDown;break;case Xi.fadeOut:t=Ma.fadeOut;break}return t||(t=he),this.transitOutCallback=t,this}setScale(t,s){return s===void 0&&(s=t),this.scaleX0=t,this.scaleY0=s,super.setScale(t,s),this}showMessage(t){if(this.scaleX0===void 0&&(this.scaleX0=this.scaleX),this.scaleY0===void 0&&(this.scaleY0=this.scaleY),t===void 0){if(this.messages.length===0)return this;t=this.messages.shift()}if(this.player.isPlaying)return this.messages.push(t),this;this.setScale(this.scaleX0,this.scaleY0).setVisible(!0),typeof t=="string"?this.setText(t):t(this),this.layout();var s=[[0,[this.transitInCallback,this,this.transitInTime]],[this.transitInTime,[he]],[this.displayTime,[this.transitOutCallback,this,this.transitOutTime]],[this.transitOutTime,[this.setVisible,!1]],[30,[he]]];return this.player.load(s,this).once("complete",function(){this.showMessage()},this).start(),this}}const Xi={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1};st.register("toast",function(i){var t=new Ad(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.Toast",Ad);var U4=function(i,t){if(t===!1)return null;if(as(t))return t;var s=new bi(i,t);return i.add.existing(s),s},Ur=function(i,t,s){s===void 0&&(s=!0),s?t=t?fe(t):{}:t||(t={});var f=new Cu(i,t);return i.add.existing(f),f};const qv=["AliceBlue","AntiqueWhite","Aqua","Aquamarine","Azure","Beige","Bisque","Black","BlanchedAlmond","Blue","BlueViolet","Brown","BurlyWood","CadetBlue","Chartreuse","Chocolate","Coral","CornflowerBlue","Cornsilk","Crimson","Cyan","DarkBlue","DarkCyan","DarkGoldenRod","DarkGray","DarkGrey","DarkGreen","DarkKhaki","DarkMagenta","DarkOliveGreen","DarkOrange","DarkOrchid","DarkRed","DarkSalmon","DarkSeaGreen","DarkSlateBlue","DarkSlateGray","DarkSlateGrey","DarkTurquoise","DarkViolet","DeepPink","DeepSkyBlue","DimGray","DimGrey","DodgerBlue","FireBrick","FloralWhite","ForestGreen","Fuchsia","Gainsboro","GhostWhite","Gold","GoldenRod","Gray","Grey","Green","GreenYellow","HoneyDew","HotPink","IndianRed","Indigo","Ivory","Khaki","Lavender","LavenderBlush","LawnGreen","LemonChiffon","LightBlue","LightCoral","LightCyan","LightGoldenRodYellow","LightGray","LightGrey","LightGreen","LightPink","LightSalmon","LightSeaGreen","LightSkyBlue","LightSlateGray","LightSlateGrey","LightSteelBlue","LightYellow","Lime","LimeGreen","Linen","Magenta","Maroon","MediumAquaMarine","MediumBlue","MediumOrchid","MediumPurple","MediumSeaGreen","MediumSlateBlue","MediumSpringGreen","MediumTurquoise","MediumVioletRed","MidnightBlue","MintCream","MistyRose","Moccasin","NavajoWhite","Navy","OldLace","Olive","OliveDrab","Orange","OrangeRed","Orchid","PaleGoldenRod","PaleGreen","PaleTurquoise","PaleVioletRed","PapayaWhip","PeachPuff","Peru","Pink","Plum","PowderBlue","Purple","RebeccaPurple","Red","RosyBrown","RoyalBlue","SaddleBrown","Salmon","SandyBrown","SeaGreen","SeaShell","Sienna","Silver","SkyBlue","SlateBlue","SlateGray","SlateGrey","Snow","SpringGreen","SteelBlue","Tan","Teal","Thistle","Tomato","Turquoise","Violet","Wheat","White","WhiteSmoke","Yellow","YellowGreen"],Y4=[15792383,16444375,65535,8388564,15794175,16119260,16770244,0,16772045,255,9055202,10824234,14596231,6266528,8388352,13789470,16744272,6591981,16775388,14423100,65535,139,35723,12092939,11119017,11119017,25600,12433259,9109643,5597999,16747520,10040012,9109504,15308410,9419919,4734347,3100495,3100495,52945,9699539,16716947,49151,6908265,6908265,2003199,11674146,16775920,2263842,16711935,14474460,16316671,16766720,14329120,8421504,8421504,32768,11403055,15794160,16738740,13458524,4915330,16777200,15787660,15132410,16773365,8190976,16775885,11393254,15761536,14745599,16448210,13882323,13882323,9498256,16758465,16752762,2142890,8900346,7833753,7833753,11584734,16777184,65280,3329330,16445670,16711935,8388608,6737322,205,12211667,9662683,3978097,8087790,64154,4772300,13047173,1644912,16121850,16770273,16770229,16768685,128,16643558,8421376,7048739,16753920,16729344,14315734,15657130,10025880,11529966,14381203,16773077,16767673,13468991,16761035,14524637,11591910,8388736,6697881,16711680,12357519,4286945,9127187,16416882,16032864,3050327,16774638,10506797,12632256,8900331,6970061,7372944,7372944,16775930,65407,4620980,13808780,32896,14204888,16737095,4251856,15631086,16113331,16777215,16119285,16776960,10145074];var $l={},_v;for(var wa=0,k4=qv.length;wa<k4;wa++)_v=qv[wa].toLowerCase(),$l[_v]=Y4[wa];var X4=function(i){return i=i.toLowerCase(),$l.hasOwnProperty(i)?$l[i]:null},W4=function(i){return typeof i!="string"||(i.startsWith("#")?i=parseInt(i.substring(1),16):i.startsWith("0x")?i=parseInt(i.substring(2),16):i=X4(i)),i};const H4=Phaser.Utils.String.Pad;var tp=function(i,t){t===void 0&&(t="0x");var s=i.toString(16).toUpperCase();return s=H4(s,6,0,1),s=t+s,s},$4=function(i,t){i&&(i.setTint?i.setTint(t):i.setFillStyle&&i.setFillStyle(t))};const Ie=Phaser.Utils.Objects.GetValue,K4=Phaser.Utils.Objects.IsPlainObject,j4=Phaser.Math.Clamp;let Od=class extends yt{constructor(t,s){s===void 0&&(s={}),s.orientation=0,super(t,s),this.type="rexColorInputLite";var f=Ie(s,"background",void 0),C=Ie(s,"swatch"),S;K4(C)&&(S=Ie(C,"size"));var r=U4(t,Ie(s,"swatch")),y=Ie(s,"inputText",!0),e;if(y&&(e=Ur(t,y)),f&&this.addBackground(f),r){S=Ie(s,"swatchSize",S);var u;S!==void 0?(qe(r,S,S),u=!1):u=Ie(s,"squareExpandSwatch",!0);var m=u?1:0;this.add(r,{proportion:0,expand:!1,fitRatio:m})}if(e){var d=Ie(y,"width")===void 0?1:0,l=Ie(y,"height")===void 0;this.add(e,{proportion:d,expand:l})}this.addChildrenMap("background",f),this.addChildrenMap("swatch",r),this.addChildrenMap("inputText",e),e&&e.on("close",function(){this.setValue(e.value)},this);var h=Ie(s,"valuechangeCallback",null);if(h!==null){var n=Ie(s,"valuechangeCallbackScope",void 0);this.on("valuechange",h,n)}this.setValue(Ie(s,"value",0))}get value(){return this._value}set value(t){if(typeof t=="string"){if(t=W4(t),t==null){var f=this.childrenMap.inputText;f&&f.setText(tp(this._value));return}}else t=j4(Math.floor(t),0,16777215);if(this._value!==t){this._value=t;var s=this.childrenMap.swatch;s&&$4(s,t);var f=this.childrenMap.inputText;f&&f.setText(tp(t)),this.emit("valuechange",this._value)}}setValue(t){return this.value=t,this}get color(){return this._value}set color(t){this.value=t}setColor(t){return this.color=t,this}};var Z4={setCreateColorPickerBackgroundCallback(i){return this.colorPickerCreateBackgroundCallback=i,this},setColorPickerHPalettePosition(i){return this.colorPickerHPalettePosition=i,this},setColorPickerExpandDirection(i){return typeof i=="string"&&(i=J4[i]),this.colorPickerExpandDirection=i,this},setColorPickerEaseInDuration(i){return i===void 0&&(i=0),this.colorPickerEaseInDuration=i,this},setColorPickerEaseOutDuration(i){return i===void 0&&(i=0),this.colorPickerEaseOutDuration=i,this},setColorPickerTransitInCallback(i){return this.colorPickerTransitInCallback=i,this},setColorPickerTransitOutCallback(i){return this.colorPickerTransitOutCallback=i,this},setColorPickerBounds(i){return this.colorPickerBounds=i,this},setColorPickerWidth(i){return this.colorPickerWidth=i,this},setColorPickerHeight(i){return this.colorPickerHeight=i,this},setColorPickerSize(i,t){return this.setColorPickerWidth(i).setColorPickerHeight(t),this},setColorPickerSpace(i){return i===void 0&&(i={}),this.colorPickerSpace=i,this},setColorComponentsHeight(i){return this.colorComponentsHeight=i,this},setColorComponentsFormatLabelConfig(i){return this.colorComponentsFormatLabelConfig=i,this},setColorComponentsInputTextConfig(i){return this.colorComponentsInputTextConfig=i,this},setColorComponentsSpace(i){return i===void 0&&(i={}),this.colorComponentsSpace=i,this}};const J4={down:0,up:1},Sx=Phaser.Display.Color,Ka=Phaser.Math.Percent;var Q4=function(i,t,s){s===void 0&&(s=!1);var f=i.width,C=i.height,S=new Sx;if(s)for(var r=0;r<C;r++){var y=Ka(r,0,C);S.setFromHSV(y,1,1),t.fillStyle=S.rgba,t.fillRect(0,r,f,1)}else for(var e=0;e<f;e++){var y=Ka(e,0,f);S.setFromHSV(y,1,1),t.fillStyle=S.rgba,t.fillRect(e,0,1,C)}},q4=function(i,t,s){for(var f=i.width,C=i.height,S=t.getImageData(0,0,f,C),r=S.data,y=new Sx,e=0;e<C;e++)for(var u=0;u<f;u++){var m=Ka(u,0,f),d=1-Ka(e,0,C);y.setFromHSV(s,m,d);var l=(e*f+u)*4;r[l]=y.red,r[l+1]=y.green,r[l+2]=y.blue,r[l+3]=255}t.putImageData(S,0,0)};const _4=Phaser.Display.Color,ep=Phaser.Math.Percent,t9=Phaser.Display.Color.ColorToRGBA,e9=Phaser.Display.Color.HSVToRGB;class i9 extends Gs{constructor(t,s,f,C,S,r){s===void 0&&(s=0),f===void 0&&(f=0),C===void 0&&(C=2),S===void 0&&(S=2),super(t,s,f,C,S),this.type="rexColorPicker.HPaletteCanvas",this.colorObject=new _4,this.setOrientation(r),this.setSize(C,S)}setOrientation(t){return this.orientation=Lo(t),this}updateTexture(){return Q4(this.canvas,this.context,this.orientation),super.updateTexture(),this}get color(){return this.colorObject.color}get hue(){return this._hue}set hue(t){this._hue=t}getHue(t,s){return t===void 0?this.hue:(this.orientation===0?this.hue=ep(t,0,this.width):this.hue=ep(s,0,this.height),this.hue)}getColor(t,s){if(t===void 0)return this.color;var f=this.getHue(t,s);return this.colorObject.setFromRGB(e9(f,1,1)),this.colorObject.color}setColor(t){return this.color===t?this:this}colorToLocalPosition(t,s){return s===void 0?s={}:s===!0&&(fl===void 0&&(fl={}),s=fl),this.colorObject.setFromRGB(t9(t)),this.orientation===0?(s.x=this.width*this.colorObject.h,s.y=this.height/2):(s.x=this.width/2,s.y=this.height*this.colorObject.h),s}}var fl=void 0,s9=Phaser.Math.RotateAround,Px=function(i,t,s,f){f===void 0?f={}:f===!0&&(cl===void 0&&(cl={}),f=cl),t-=i.width*i.originX,s-=i.height*i.originY;var C={x:t*i.scaleX,y:s*i.scaleY};return s9(C,0,0,-i.rotation),f.x=i.x+t,f.y=i.y+s,f},cl;class n9 extends be{constructor(t,s){s===void 0&&(s={}),super(t,s);var f=s.width!=null?1:0,C=new i9(t).setOrientation(f);t.add.existing(C),this.type="rexColorPicker.HPalette",C.setInteractive().on("pointerdown",this.onPaletteCanvasPointerDown,this).on("pointermove",this.onPaletteCanvasPointerDown,this);var S=new bi(t,{strokeColor:16777215,strokeWidth:2});t.add.existing(S),this.add(C,{key:"paletteCanvas",expand:!0}).add(S,{key:"marker",expand:!1})}resize(t,s){if(this.width===t&&this.height===s)return this;super.resize(t,s);var f=Math.min(t,s);return this.childrenMap.marker.setSize(f,f),this}onPaletteCanvasPointerDown(t,s,f,C){if(t.isDown){var S=this.childrenMap.paletteCanvas,r=S.getColor(s,f);this.setMarkerPosition(r),this.emit("input",r)}}get color(){return this.childrenMap.paletteCanvas.color}setColor(t){if(this.color===t)return this;var s=this.childrenMap.paletteCanvas;return s.setColor(t),this.setMarkerPosition(t),this}setMarkerPosition(t){var s=this.childrenMap.paletteCanvas,f=this.childrenMap.marker,C=s.colorToLocalPosition(t,!0);return Px(s,C.x,C.y,f),this.resetChildPositionState(f),this}getHue(t,s){var f=this.childrenMap.paletteCanvas;return f.getHue(t,s)}}const r9=Phaser.Display.Color,ip=Phaser.Math.Percent,sp=Phaser.Display.Color.ColorToRGBA,a9=Phaser.Display.Color.HSVToRGB;class o9 extends Gs{constructor(t,s,f,C,S,r){s===void 0&&(s=0),f===void 0&&(f=0),C===void 0&&(C=2),S===void 0&&(S=2),super(t,s,f,C,S),this.type="rexColorPicker.SVPaletteCanvas",r===void 0&&(r=1),this.colorObject=new r9,this.setHue(r),this.setSize(C,S)}get color(){return this.colorObject.color}get hue(){return this._hue}set hue(t){this._hue!==t&&(this._hue=t,this.colorObject.h=t,this.dirty=!0)}setHue(t){return this.hue=t,this}updateTexture(){return q4(this.canvas,this.context,this.hue),super.updateTexture(),this}getColor(t,s){if(t===void 0)return this.colorObject.color;var f=ip(t,0,this.width),C=1-ip(s,0,this.height);return this.colorObject.setFromRGB(a9(this.hue,f,C)),this.colorObject.color}setColor(t){return this.color===t?this:(this.colorObject.setFromRGB(sp(t)),this.setHue(this.colorObject.h),this)}colorToLocalPosition(t,s){return s===void 0?s={}:s===!0&&(vl===void 0&&(vl={}),s=vl),this.colorObject.setFromRGB(sp(t)),s.x=this.width*this.colorObject.s,s.y=this.height*(1-this.colorObject.v),s}}var vl=void 0;class h9 extends be{constructor(t,s){super(t,s);var f=new o9(t);t.add.existing(f),this.type="rexColorPicker.SVPalette",f.setInteractive().on("pointerdown",this.onPaletteCanvasPointerDown,this).on("pointermove",this.onPaletteCanvasPointerDown,this);var C=new bi(t,{radius:5,strokeColor:16777215,strokeWidth:2});t.add.existing(C),this.add(f,{key:"paletteCanvas",expand:!0}).add(C,{key:"marker",expand:!1})}onPaletteCanvasPointerDown(t,s,f,C){if(t.isDown){var S=this.childrenMap.paletteCanvas,r=S.getColor(s,f);this.setMarkerPosition(r),this.emit("input",r)}}get color(){return this.childrenMap.paletteCanvas.color}setHue(t){var s=this.childrenMap.paletteCanvas;return s.setHue(t),this}setColor(t){if(this.color===t)return this;var s=this.childrenMap.paletteCanvas;return s.setColor(t),this.setMarkerPosition(t),this}setMarkerPosition(t){var s=this.childrenMap.paletteCanvas,f=this.childrenMap.marker,C=s.colorToLocalPosition(t,!0);return Px(s,C.x,C.y,f),this.resetChildPositionState(f),this}}const je=Phaser.Utils.Objects.GetValue;class bd extends yt{constructor(t,s){super(t,s),this.type="rexColorPicker",this.freezePalettes=!1;var f=je(s,"hPalette.position",0);typeof f=="string"&&(f=l9[f]);var C=f===0||f===2?1:0;this.setOrientation(C);var S=je(s,"background",void 0),r,y;if(this.orientation===0){var r=je(s,"hPalette.width",void 0);r===void 0&&(r=je(s,"hPalette.size",10))}else y=je(s,"hPalette.height",void 0),y===void 0&&(y=je(s,"hPalette.size",10));var e=new n9(t,{width:r,height:y});t.add.existing(e);var u=je(s,"svPalette.width",void 0),m=je(s,"svPalette.height",void 0),d=new h9(t,{width:u,height:m});t.add.existing(d),S&&this.addBackground(S);var l={proportion:0,expand:!0},h,n;this.orientation===0?(h=u===void 0?1:0,n=m===void 0):(h=m===void 0?1:0,n=u===void 0);var a={proportion:h,expand:n};f===0||f===3?this.add(d,a).add(e,l):this.add(e,l).add(d,a),e.on("input",function(){d.setHue(e.getHue()),this.setValue(d.color,!0)},this),d.on("input",function(){this.setValue(d.color,!0)},this),this.addChildrenMap("background",S),this.addChildrenMap("hPalette",e),this.addChildrenMap("svPalette",d);var c=je(s,"valuechangeCallback",null);if(c!==null){var o=je(s,"valuechangeCallbackScope",void 0);this.on("valuechange",c,o)}this.setValue(je(s,"value",16777215))}get value(){return this._value}set value(t){if(this._value!==t){var s=this._value;this._value=t,this.freezePalettes||this.updatePalettes(),this.emit("valuechange",t,s,this)}}setValue(t,s){return this.freezePalettes=!!s,this.value=t,this.freezePalettes=!1,this}get color(){return this._value}set color(t){this.value=t}setColor(t){return this.color=t,this}updatePalettes(){return this.childrenMap.hPalette.setColor(this.color),this.childrenMap.svPalette.setColor(this.color),this}runLayout(t,s,f){return this.ignoreLayout?this:(super.runLayout(t,s,f),this.childrenMap.hPalette.setMarkerPosition(this.value),this.childrenMap.svPalette.setMarkerPosition(this.value),this)}}var l9={bottom:0,left:1,top:2,right:3};const li=Phaser.Utils.Objects.GetValue,u9=Phaser.Display.Color,d9=Phaser.Display.Color.ColorToRGBA,f9=Phaser.Display.Color.HSVToRGB,Rs=Phaser.Math.Clamp;class Fd extends yt{constructor(t,s){s===void 0&&(s={}),s.orientation=0,super(t,s),this.type="rexColorComponents",this.colorObject=new u9;var f=li(s,"background",void 0),C=li(s,"formatLabel",void 0);as(C)||(C=Ge(t,C).resetDisplayContent());var S=[];if(s.inputText0&&s.inputText1&&s.inputText2)S.push(s.inputText0),S.push(s.inputText1),S.push(s.inputText2);else for(var r=li(s,"inputText"),y=0;y<3;y++){var e=Ur(t,r).setMaxLength(3).setNumberInput();S.push(e)}f&&this.addBackground(f);var m=li(s,"proportion.formatLabel",0),u=!!C.isRexContainerLite,d=li(s,"expand.formatLabel",u);this.add(C,{proportion:m,expand:d});for(var m=li(r,"width")===void 0?1:0,d=li(r,"height")===void 0,y=0,l=S.length;y<l;y++)this.add(S[y],{proportion:m,expand:d});this.addChildrenMap("background",f),this.addChildrenMap("formatLabel",C),this.addChildrenMap("components",S),this.onClick(C,this.toggleColorFormat,this);for(var y=0,l=S.length;y<l;y++)S[y].on("close",function(){this.updateColorObject(),this.setValue(this.colorObject.color)},this);var h=li(s,"valuechangeCallback",null);if(h!==null){var n=li(s,"valuechangeCallbackScope",void 0);this.on("valuechange",h,n)}C.setText("RGB"),this.setValue(li(s,"value",16777215))}get value(){return this._value}set value(t){t=Rs(Math.floor(t),0,16777215),this._value!==t&&(this._value=t,this.colorObject.setFromRGB(d9(t)),this.updateComponents(),this.emit("valuechange",this._value))}setValue(t){return this.value=t,this}get color(){return this._value}set color(t){this.value=t}setColor(t){return this.color=t,this}get colorFormat(){return this.childrenMap.formatLabel.text}set colorFormat(t){this.colorFormat!==t&&(this.childrenMap.formatLabel.setText(t),this.updateComponents())}setColorFormat(t){return this.colorFormat=t,this}toggleColorFormat(){return this.colorFormat=this.colorFormat==="RGB"?"HSV":"RGB",this}updateComponents(){var t=this.childrenMap.components,s,f,C;return this.colorFormat==="RGB"?(s=this.colorObject.red,f=this.colorObject.green,C=this.colorObject.blue):(s=Math.floor(this.colorObject.h*360),f=Math.floor(this.colorObject.s*100),C=Math.floor(this.colorObject.v*100)),t[0].setValue(s),t[1].setValue(f),t[2].setValue(C),this}updateColorObject(){var t=this.childrenMap.components;if(this.colorFormat==="RGB"){var s=Rs(t[0].value,0,255),f=Rs(t[1].value,0,255),C=Rs(t[2].value,0,255);this.colorObject.setTo(s,f,C)}else{var S=Rs(t[0].value,0,359)/360,r=Rs(t[1].value,0,100)/100,y=Rs(t[2].value,0,100)/100;this.colorObject.setFromRGB(f9(S,r,y))}return this}}const pl=Phaser.Utils.Objects.GetValue;class c9 extends yt{constructor(t,s){s===void 0&&(s={}),s.orientation=1,super(t,s),this.type="rexColorInput.ColorPickerPanel";var f=pl(s,"background",void 0),C=new bd(t,{hPalette:s.hPalette||{},svPalette:s.svPalette||{},space:{item:pl(s,"space.hPalette",8)}});t.add.existing(C);var S;s.colorComponents&&(S=new Fd(t,s.colorComponents),t.add.existing(S)),f&&(this.addBackground(f),new To(f,{stopAllLevels:!1})),this.add(C,{proportion:1,expand:!0}),S&&this.add(S,{proportion:0,expand:!0}),this.addChildrenMap("background",f),this.addChildrenMap("colorPicker",C),this.addChildrenMap("colorComponents",S),C.on("valuechange",function(r){this.setValue(r)},this),S&&S.on("valuechange",function(r){this.setValue(r)},this),this.setValue(pl(s,"value",16777215))}get value(){return this._value}set value(t){if(this._value!==t){this._value=t;var s=this.childrenMap.colorPicker;s.setValue(t);var f=this.childrenMap.colorComponents;f&&f.setValue(t),this.emit("valuechange",t)}}setValue(t){return this.value=t,this}}Phaser.Utils.Objects.GetValue;var v9=function(t){var t=this.scene,s,f=this.colorPickerCreateBackgroundCallback;f&&(s=f.call(this,t),t.add.existing(s));var C=this.colorPickerWidth;C===void 0&&(C=this.width);var S=this.colorPickerHeight;S===void 0&&(S=C);var r;this.colorComponentsHeight>0?r={height:this.colorComponentsHeight,formatLabel:this.colorComponentsFormatLabelConfig,inputText:this.colorComponentsInputTextConfig,space:this.colorComponentsSpace}:r=!1;var y=new c9(t,{width:C,height:S,background:s,space:this.colorPickerSpace,hPalette:{position:this.colorPickerHPalettePosition},colorComponents:r,value:this.value});return t.add.existing(y),y},p9=function(){if(!this.colorPicker){var i=v9.call(this).layout(),t=new nx(i,{duration:{in:this.colorPickerEaseInDuration,out:this.colorPickerEaseOutDuration},transitIn:this.colorPickerTransitInCallback,transitOut:this.colorPickerTransitOutCallback,expandDirection:this.colorPickerExpandDirection,alignTargetX:this,alignTargetY:this,bounds:this.colorPickerBounds,touchOutsideClose:!0}).on("open",function(){i.on("valuechange",function(s){this.setValue(s)},this)},this).on("close",function(){this.colorPicker=void 0,this.dropDownBehavior=void 0},this);return this.colorPicker=i,this.dropDownBehavior=t,this.pin(i),this}},Ex={openColorPicker:p9};Object.assign(Ex,Z4);const ie=Phaser.Utils.Objects.GetValue;let jo=class extends Od{constructor(t,s){s===void 0&&(s={}),super(t,s),this.type="rexColorInput",s.hasOwnProperty("colorPicker")||(s.colorPicker={background:{color:0}});var f=s.colorPicker,C=f!==!1&&f!==null;if(C){this.setColorPickerSize(ie(f,"width",160),ie(f,"height",170));var S,r=ie(f,"background");r?S=function(h){return Be(h,r)}:S=ie(f,"createBackgroundCallback"),this.setCreateColorPickerBackgroundCallback(S),this.setColorPickerHPalettePosition(ie(f,"hPalettePosition",0)),this.setColorPickerExpandDirection(ie(f,"expandDirection")),this.setColorPickerEaseInDuration(ie(f,"easeIn",200)),this.setColorPickerEaseOutDuration(ie(f,"easeOut",200)),this.setColorPickerTransitInCallback(ie(f,"transitIn")),this.setColorPickerTransitOutCallback(ie(f,"transitOut")),this.setColorPickerBounds(ie(f,"bounds"));var y=ie(f,"space");y===void 0&&(y={left:10,right:10,top:10,bottom:10,item:8}),this.setColorPickerSpace(y)}var e=s.colorComponents,u=e!==!1&&e!==null;if(C&&u){this.setColorComponentsHeight(ie(e,"height",30)),this.setColorComponentsFormatLabelConfig(ie(e,"formatLabel"));var m=ie(e,"inputText");m||(m=ie(s,"inputText")),this.setColorComponentsInputTextConfig(m);var d=ie(e,"space");d===void 0&&(d={item:8}),this.setColorComponentsSpace(d)}var l=this.childrenMap.swatch;l&&C&&this.onClick(l,this.openColorPicker,this)}};Object.assign(jo.prototype,Ex);st.register("colorInput",function(i){var t=new jo(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.ColorInput",jo);st.register("colorInputLite",function(i){var t=new Od(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.ColorInputBase",Od);st.register("colorPicker",function(i){var t=new bd(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.ColorPicker",bd);st.register("colorComponents",function(i){var t=new Fd(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.ColorComponents",Fd);var g9=function(){return function(i,t,s,f){t!=="panel"&&s.setChildVisible(i,!0)}},m9=function(){return function(i,t,s,f){t!=="panel"&&s.setChildVisible(i,!1)}};const x9={show:g9,hide:m9};var y9=function(i,t){return t===void 0&&(t=1),function(s,f,C,S){f!=="panel"&&C.fadeChild(s,S?0:i,t)}},T9=function(i,t){return t===void 0&&(t=0),function(s,f,C,S){f!=="panel"&&C.fadeChild(s,S?0:i,t)}};const C9={show:y9,hide:T9};var np=function(i,t){return function(s,f,C,S){f!=="panel"&&C.moveChild(s,S?0:i,t)}};const S9={show:np,hide:np};var rp=function(i,t){return function(s,f,C,S){f==="panel"&&C.moveChild(s,S?0:i,t)}};const P9={show:rp,hide:rp},gl={visible:x9,fade:C9,move:S9,"move-panel":P9};var E9=function(i){var t,s;[t,...s]=typeof i=="string"?[i]:i;var f,C;return gl.hasOwnProperty(t)?(f=gl[t].show.apply(null,s),C=gl[t].hide.apply(null,s)):(f=he,C=he),{show:f,hide:C}};const M9={showChild(i,t){var s=this.sizerChildren[i];return s&&(this.emit("showchild",s,i,this,t),this.resetChildState(s)),this},hideChild(i,t){var s=this.sizerChildren[i];return s&&(this.emit("hidechild",s,i,this,t),this.resetChildState(s)),this},swapChild(i,t){return this.currentChildKey===i||(this.currentChildKey==="panel"||i==="panel"?(this.previousChildKey=this.currentChildKey,this.currentChildKey=i,this.hideChild(this.previousChildKey,t),this.showChild(this.currentChildKey,t)):(this.swapChild("panel",t),this.swapChild(i,t))),this},showPanel(i){return this.swapChild("panel",i),this},showLeftSide(){return this.swapChild("leftSide"),this},showRightSide(){return this.swapChild("rightSide"),this},showTopSide(){return this.swapChild("topSide"),this},showBottomSide(){return this.swapChild("bottomSide"),this},hideLeftSide(){return this.currentChildKey=="leftSide"&&this.showPanel(),this},hideRightSide(){return this.currentChildKey=="rightSide"&&this.showPanel(),this},hideTopSide(){return this.currentChildKey=="topSide"&&this.showPanel(),this},hideBottomSide(){return this.currentChildKey=="bottomSide"&&this.showPanel(),this},toggleLeftSide(){var i=this.currentChildKey!=="panel"?"panel":"leftSide";return this.swapChild(i),this},toggleRightSide(){var i=this.currentChildKey!=="panel"?"panel":"rightSide";return this.swapChild(i),this},toggleTopSide(){var i=this.currentChildKey!=="panel"?"panel":"topSide";return this.swapChild(i),this},toggleBottomSide(){var i=this.currentChildKey!=="panel"?"panel":"bottomSide";return this.swapChild(i),this}},w9=Oe.prototype.setChildVisible,R9={setChildVisible(i,t){var s;if(typeof i=="string"){var s=i;i=this.sizerChildren[s]}else s=wo(this.sizerChildren,i);return t===void 0&&(t=this.currentChildKey===s),w9.call(this,i,t),this}},A9={fadeChild(i,t,s){var f;return typeof i=="string"?(f=i,i=this.sizerChildren[f]):f=wo(this.sizerChildren,i),t===void 0&&(t=500),s===void 0&&(s=this.currentChildKey===f?1:0),i.fadeIn(t,{start:i.alpha,end:s}),this},fadeChildPromise(i,t,s){return typeof i=="string"&&(i=this.sizerChildren[key]),this.fadeChild(i,t,s),i._fade?se(i._fade):Promise.resolve()}},O9={moveChild(i,t,s,f){var C;typeof i=="string"?(C=i,i=this.sizerChildren[C]):C=wo(this.sizerChildren,i),t===void 0&&(t=500);var S=this.currentChildKey===C;if(f===void 0)switch(C){case"leftSide":case"rightSide":f=Mt(i);break;case"topSide":case"bottomSide":f=St(i);break;default:if(S)switch(this.previousChildKey){case"leftSide":case"rightSide":f=Mt(this.sizerChildren[this.previousChildKey]);break;case"topSide":case"bottomSide":f=St(this.sizerChildren[this.previousChildKey]);break;default:f=0;break}else switch(this.currentChildKey){case"leftSide":case"rightSide":f=Mt(this.sizerChildren[this.currentChildKey]);break;case"topSide":case"bottomSide":f=St(this.sizerChildren[this.currentChildKey]);break;default:f=0;break}break}var r,y,e,u;if(S)switch(C){case"panel":switch(this.previousChildKey){case"leftSide":r=!0;break;case"rightSide":y=!0;break;case"topSide":e=!0;break;case"bottomSide":u=!0;break}break;case"leftSide":y=!0;break;case"rightSide":r=!0;break;case"topSide":u=!0;break;case"bottomSide":e=!0;break}else switch(C){case"panel":switch(this.currentChildKey){case"leftSide":y=!0;break;case"rightSide":r=!0;break;case"topSide":u=!0;break;case"bottomSide":e=!0;break}break;case"leftSide":r=!0;break;case"rightSide":y=!0;break;case"topSide":e=!0;break;case"bottomSide":u=!0;break}return r?i.moveTo(t,`-=${f}`,void 0,s):y?i.moveTo(t,`+=${f}`,void 0,s):e?i.moveTo(t,void 0,`-=${f}`,s):u?i.moveTo(t,void 0,`+=${f}`,s):i.moveTo(0),this},moveChildPromise(i,t,s,f){return typeof i=="string"&&(i=this.sizerChildren[key]),this.moveChild(i,t,s,f),i._easeMove?se(i._easeMove):Promise.resolve()}};var Mx={};Object.assign(Mx,R9,A9,O9);const ye=Phaser.Utils.Objects.GetValue;class Ld extends be{constructor(t,s){super(t,s),this.type="rexSides",this.childrenMap=this.sizerChildren,this.previousChildKey=void 0,this.currentChildKey=void 0;var f=ye(s,"showChildCallback",void 0);if(f)if(_i(f)){var C=ye(s,"showChildCallbackScope",void 0);this.on("showchild",f,C);var S=ye(s,"hideChildCallback",void 0),r=ye(s,"hideChildCallbackScope",void 0);this.on("hidechild",S,r)}else{var y=E9(f);this.on("showchild",y.show),this.on("hidechild",y.hide)}var e=ye(s,"background",void 0),u=ye(s,"panel",void 0),m=ye(s,"leftSide",void 0),d=ye(s,"rightSide",void 0),l=ye(s,"topSide",void 0),h=ye(s,"bottomSide",void 0);if(e&&this.addBackground(e),u&&this.add(u,"panel","center",0,!0),m){var n=ye(s,"expand.left",!0);this.add(m,"leftSide","left-top",0,{height:n})}if(d){var n=ye(s,"expand.right",!0);this.add(d,"rightSide","right-top",0,{height:n})}if(l){var n=ye(s,"expand.top",!0);this.add(l,"topSide","left-top",0,{width:n})}if(h){var n=ye(s,"expand.bottom",!0);this.add(h,"bottomSide","left-bottom",0,{width:n})}}reset(){return this.previousChildKey=void 0,this.currentChildKey="panel",this.showChild("panel",!0),this.hideChild("leftSide",!0),this.hideChild("rightSide",!0),this.hideChild("topSide",!0),this.hideChild("bottomSide",!0),this}}Object.assign(Ld.prototype,M9,Mx);st.register("sides",function(i){var t=new Ld(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.Sides",Ld);class wx extends gi{constructor(t,s){s=dd(t,s),super(t,s),this.type="rexTweaker.Title"}setTitle(t){return t=t?fe(t):{},t.hasOwnProperty("text")||(t.hasOwnProperty("title")?t.text=t.title:t.text=""),this.resetDisplayContent(t),this}}class b9 extends wx{constructor(t,s){s===void 0&&(s={}),super(t,s),this.type="rexTweaker.FolderTitle";var f=new po(t,s.expandedIcon);t.add.existing(f),this.addSpace().add(f,{proportion:0,expand:!1,padding:1,fitRatio:1}),this.addChildrenMap("expandedIcon",f)}setExpandedState(t){t===void 0&&(t=!0);var s=t?"down":"right",f=this.childrenMap.expandedIcon;return f.setDirection(s),this}}var Rx=function(i,t){var s=new Bd(i,t);return i.add.existing(s),s},Dd=function(i,t,s){return Be(i,s)};const F9={setBindingTarget(i){var t=this.childrenMap.child;return t.setBindingTarget(i),this}},L9={getMaxInputRowTitleWidth(){var i=this.childrenMap.child,t=i.getMaxInputRowTitleWidth();return t+this.getInnerPadding("left")},setInputRowTitleWidth(i){i-=this.getInnerPadding("left");var t=this.childrenMap.child;return t.setInputRowTitleWidth(i),this}};class Ax extends Ko{constructor(t,s){super(t,s),this.type="rexTweaker.Folder"}setTitle(t){var s=this.childrenMap.title;return s.setTitle(t),this}}Object.assign(Ax.prototype,F9,L9);const dn=Phaser.Utils.Objects.GetValue;var D9=function(i,t,s){var f=dn(s,"title")||{},C=new b9(i,f);i.add.existing(C),C.on("folder.expand",function(){C.setExpandedState(!0)}).on("folder.collapse",function(){C.setExpandedState(!1)});var S={root:dn(s,"root"),styles:dn(s,"tweaker"),space:dn(s,"space")||{}},r=Rx(i,S),y=dn(s,"background"),e=Dd(i,t,y),u=new Ax(i,{orientation:1,title:C,child:r,background:e,transition:{duration:dn(s,"transition.duration",200)}});return i.add.existing(u),u};const ap=Phaser.Utils.Objects.GetValue;var I9=function(i){var t=this.scene,s=ap(this.styles,"folder")||{};s.tweaker=this.styles,s.root=this.root;var f=D9(t,i,s);delete s.tweaker,delete s.root,this.add(f,{expand:!0}),f.setTitle(i);var C=ap(i,"expanded",!0);C?f.expand(0):f.collapse(0);var S=f.getElement("child");return i.key&&this.root.addChildrenMap(i.key,S),S};const B9={setBindingTarget(i){for(var t=this.childrenMap.pages.children,s=0,f=t.length;s<f;s++)t[s].setBindingTarget(i);return this}},G9={getMaxInputRowTitleWidth(){for(var i=0,t=this.childrenMap.pages.children,s=0,f=t.length;s<f;s++)i=Math.max(i,t[s].getMaxInputRowTitleWidth());return i+this.getInnerPadding("left")},setInputRowTitleWidth(i){i-=this.getInnerPadding("left");for(var t=this.childrenMap.pages.children,s=0,f=t.length;s<f;s++)t[s].setInputRowTitleWidth(i);return this}};class Ox extends $o{constructor(t,s){super(t,s),this.type="rexTweaker.TabPages"}}Object.assign(Ox.prototype,B9,G9);const Ra=Phaser.Utils.Objects.GetValue;var N9=function(i,t,s){var f=new Ox(i,s);i.add.existing(f);for(var C=Ra(s,"tab"),S={root:Ra(s,"root"),styles:Ra(s,"tweaker")},r=Ra(t,"pages")||[],y=0,e=r.length;y<e;y++){var u=r[y];f.addPage({key:u.title,tab:Ge(i,C).setActiveState(!1).resetDisplayContent({text:u.title}),page:Rx(i,S)})}return f.on("tab.focus",function(m,d){m.setActiveState(!0)}).on("tab.blur",function(m,d){m.setActiveState(!1)}),f};const op=Phaser.Utils.Objects.GetValue;var V9=function(i){var t=this.scene,s=op(this.styles,"tab")||{};s.tweaker=this.styles,s.root=this.root;var f=N9(t,i,s);delete s.tweaker,delete s.root,this.add(f,{expand:!0});for(var C=op(i,"pages")||[],S=[],r=0,y=0,e=C.length;y<e;y++){var u=f.getPage(y),m=C[y].show;m&&(r=y);var d=C[y].key;d&&this.root.addChildrenMap(d,u),S.push(u)}return f.swapPage(r,0),S};const za="string",bx="number",Fx="range",Lx="list",z9="buttons",Dx="boolean",U9="toggleSwitch",Y9="color";var k9=function(i,t,s){if(s.view)return s.view;if(s.options)return Lx;if(!i)return za;var f=i[t];switch(typeof f){case"number":return X9(s,"min","max")?Fx:bx;case"string":return za;case"boolean":return Dx;default:return za}},X9=function(i,...t){for(var s=0,f=t.length;s<f;s++)if(i[t[s]]===void 0)return!1;return!0};const W9={setupBinding(){var i=this.childrenMap.inputField;return i.on("valuechange",function(t){!this.bindingTarget||!this.autoUpdateEnable||(this.bindingTarget[this.bindTargetKey]=t)},this),this},setAutoUpdateEnable(i){return i===void 0&&(i=!0),this.autoUpdateEnable=i,this},setBindingTarget(i,t){return this.bindingTarget=i,t!==void 0&&this.setBindingTargetKey(t),this.syncTargetValue(),this},setBindingTargetKey(i){return this.bindTargetKey=i,this},syncTargetValue(){if(!this.bindingTarget||!this.bindTargetKey)return this;var i=this.childrenMap.inputField;return i.syncValue(this.bindingTarget[this.bindTargetKey]),this}},H9={startMonitorTarget(){return this.isMonitoring?this:(this.isMonitoring=!0,this.scene.events.on("postupdate",this.onMonitorTarget,this),this)},stopMonitorTarget(){return this.isMonitoring?(this.isMonitoring=!1,this.scene.events.off("postupdate",this.onMonitorTarget,this),this):this},onMonitorTarget(){if(this.bindingTarget){var i=this.bindingTarget[this.bindTargetKey],t=this.childrenMap.inputField;t.value!==i&&t.syncValue(i)}}},$9={getMinTitleWidth(){var i=this.childrenMap.title;if(!i)return 0;var t=i.rexSizer.padding,s=this.getChildWidth(this.childrenMap.title)+t.left+t.right;return s+this.getInnerPadding("left")},setMinTitleWidth(i){var t=this.childrenMap.title;if(!t)return this;var s=t.rexSizer.padding;return i-=s.left+s.right,t.minWidth=i,this}},ml=Phaser.Utils.Objects.GetValue;class Id extends yt{constructor(t,s){super(t,s),this.type="rexTweaker.InputRow",this.bindingTarget=void 0,this.bindTargetKey=void 0,this.autoUpdateEnable=!0;var f=s.inputTitle,C=s.inputField,S=s.background,u=ml(s,"proportion.title",0),r=ml(s,"space.title",0),y;this.orientation===0?y={right:r}:y={bottom:r},this.add(f,{proportion:u,expand:!0,padding:y});var e=s.parentOrientation===1?1:0,u=ml(s,"proportion.inputField",e);this.add(C,{proportion:u,expand:!0}),S&&this.addBackground(S),this.addChildrenMap("title",f),this.addChildrenMap("inputField",C),this.addChildrenMap("background",S),this.setupBinding()}destroy(t){this.scene&&(this.stopMonitorTarget(),super.destroy(t))}setTitle(t){var s=this.childrenMap.title;return s.setTitle(t),this}preLayout(){var t=this.childrenMap.title;t&&(t.minWidth=0),super.preLayout()}}Object.assign(Id.prototype,W9,H9,$9);var Ix=function(i,t,s){var f=new wx(i,s);return i.add.existing(f),f};class hs extends yt{get bindingTarget(){return this.getParentSizer().bindingTarget}get bindingKey(){return this.getParentSizer().bindTargetKey}get value(){return this._value}validate(t){return this.syncValueFlag||!this.validateCallback?!0:this.validateCallback(t,this._value,this.bindingTarget,this.bindingKey)}set value(t){if(this._value!==t){var s=this._value;this._value=t,this.syncValueFlag||this.emit("valuechange",t,s,this.bindingTarget,this.bindingKey)}}getValue(){return this.value}setValue(t){return this.value=t,this}syncValue(t){return this.syncValueFlag=!0,this.value=t,this.syncValueFlag=!1,this}get readOnly(){return this._readOnly}set readOnly(t){this._readOnly=t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,!0}setTextFormatCallback(t){return this.textFormatCallback=t,this}setValidateCallback(t){return this.validateCallback=t,this}}class K9 extends hs{constructor(t,s){s===void 0&&(s={}),super(t),this.type="rexTweaker.TextInput";var f=s.inputText,C=Ur(t,f);this.add(C,{proportion:1,expand:!0}),this.addChildrenMap("inputText",C),C.on("close",function(){this.setValue(C.value)},this)}get value(){return this._value}set value(t){if(this._value!==t){this.validate(t)||(t=this._value);var s=this.textFormatCallback?this.textFormatCallback(t):t;this.childrenMap.inputText.setText(s),super.value=t}}setInputTextReadOnly(t){return t===void 0&&(t=!0),this.childrenMap.inputText.setReadOnly(t),this}}var hp=function(i,t,s){var f=new K9(i,s);return i.add.existing(f),f.setInputTextReadOnly(!!t.inputTextReadOnly),f};class j9 extends hs{constructor(t,s){s===void 0&&(s={}),super(t),this.type="rexTweaker.NumberInput";var f=s.inputNumber||s.inputText,C=Ur(t,f).setNumberInput();this.add(C,{proportion:1,expand:!0}),this.addChildrenMap("inputText",C),C.on("close",function(){this.setValue(C.value)},this)}get value(){return this._value}set value(t){if(this._value!==t){this.validate(t)||(t=this._value);var s=this.textFormatCallback?this.textFormatCallback(t):t;this.childrenMap.inputText.setText(s),super.value=t}}setInputTextReadOnly(t){return t===void 0&&(t=!0),this.childrenMap.inputText.setReadOnly(t),this}}var Z9=function(i,t,s){var f=new j9(i,s);return i.add.existing(f),f.setInputTextReadOnly(!!t.inputTextReadOnly),f},J9=function(i,t){var s=new zs(i,t);return i.add.existing(s),s};const xl=Phaser.Utils.Objects.GetValue,Q9=Phaser.Math.Linear,q9=Phaser.Math.Snap.Floor;class _9 extends hs{constructor(t,s){s===void 0&&(s={}),super(t),this.type="rexTweaker.RangeInput";var f=s.slider,C=this.orientation===0?"track.height":"track.width",S=xl(f,C),r=J9(t,f),m=s.parentOrientation===1?2:0,d=xl(s,"proportion.range.slider",m),y=S===void 0;this.add(r,{proportion:d,expand:y});var e=s.inputNumber||s.inputText,u=Ur(t,e).setNumberInput(),m=s.parentOrientation===1?1:0,d=xl(s,"proportion.range.inputText",m);this.add(u,{proportion:d,expand:!0}),this.addChildrenMap("slider",r),this.addChildrenMap("inputText",u),u.on("close",function(){this.setValue(u.value)},this),r.on("valuechange",function(){var l=Q9(this.minValue,this.maxValue,r.value);this.step&&(l=q9(l,this.step,this.minValue)),this.setValue(l)},this)}get value(){return this._value}set value(t){if(this._value!==t){this.validate(t)||(t=this._value);var s=this.textFormatCallback?this.textFormatCallback(t):t;this.childrenMap.inputText.setText("").setText(s),this.childrenMap.slider.setValue(t,this.minValue,this.maxValue),super.value=t}}setRange(t,s,f){return this.minValue=t,this.maxValue=s,this.step=f,this.childrenMap.slider.setGap(f,t,s),this}setInputTextReadOnly(t){return t===void 0&&(t=!0),this.childrenMap.inputText.setReadOnly(t),this}}var tB=function(i,t,s){var f=new _9(i,s);return i.add.existing(f),f.setRange(t.min,t.max,t.step),f.setInputTextReadOnly(!!t.inputTextReadOnly),f},eB=function(i,t){t=ax(i,t);var s=new Vr(i,t);return i.add.existing(s),s},Bx=function(i,t){for(var s=0,f=i.length;s<f;s++){var C=i[s];if(C.value===t)return s}},iB=function(i,t){var s=Bx(i,t);if(s!=null)return i[s].text};class sB extends hs{constructor(t,s){s===void 0&&(s={}),super(t),this.type="rexTweaker.ListInput";var f=eB(t,s.list);this.add(f,{proportion:1,expand:!0}),this.addChildrenMap("list",f),f.on("button.click",function(C,S,r,y,e,u){this.setValue(r.value)},this)}get value(){return this._value}set value(t){if(this._value!==t){this.validate(t)||(t=this._value);var s=this.childrenMap.list,f=iB(s.options,t);s.resetDisplayContent({text:f}),super.value=t}}setOptions(t){return this.childrenMap.list.setOptions(t),this}}var nB=function(i,t,s){var f=new sB(i,s);return i.add.existing(f),f.setOptions(t.options),f},Gx=function(i,t){var s=new qt(i,t);return i.add.existing(s),s},rB=function(i,t){for(var s=0,f=i.length;s<f;s++){var C=i[s];C&&C.setActiveState(s===t)}};const aB=Phaser.Utils.Objects.GetValue;class oB extends hs{constructor(t,s){s===void 0&&(s={}),super(t),this.type="rexTweaker.ButtonsInput";var f=s.button?fe(s.button):{},C=aB(f,"expand",!0);C&&(f.align="center"),delete f.expand;var S=Gx(t,{expand:C});S.buttonConfig=f,this.add(S,{proportion:1,expand:!0}),this.addChildrenMap("list",S),S.on("button.click",function(r,y,e,u){var m=S.options[y];m&&(this._selectedIndex=y,this.setValue(m.value),this._selectedIndex=void 0)},this)}get value(){return this._value}set value(t){if(this._value!==t){this.validate(t)||(t=this._value);var s=this.childrenMap.list,f=this._selectedIndex;f===void 0&&(f=Bx(s.options,t)),rB(s.childrenMap.buttons,f),super.value=t}}setOptions(t){var s=this.childrenMap.list;s.options=t;var f=this.scene,C=s.buttonConfig;s.clearButtons(!0);for(var S=0,r=t.length;S<r;S++){var y=t[S],e=Ge(f,C).setActiveState(!1).resetDisplayContent({text:y.text});s.addButton(e)}return this}}var hB=function(i,t,s){var f=new oB(i,s);return i.add.existing(f),f.setOptions(t.options),f},lB=function(i,t){var s=new Eu(i,t);return i.add.existing(s),s};const uB=Phaser.Utils.Objects.GetValue;class dB extends hs{constructor(t,s){s===void 0&&(s={}),super(t),this.type="rexTweaker.CheckboxInput";var f=s.checkbox,C=lB(t,f),S=uB(f,"size");S!==void 0&&C.setSize(S,S);var r=S!==void 0?0:1;this.add(C,{proportion:0,expand:!1,fitRatio:r}),this.addChildrenMap("checkbox",C),C.on("valuechange",function(y){this.setValue(y)},this)}get value(){return this._value}set value(t){this._value!==t&&(this.validate(t)||(t=this._value),this.childrenMap.checkbox.setValue(t),super.value=t)}}var fB=function(i,t,s){var f=new dB(i,s);return i.add.existing(f),f},cB=function(i,t){var s=new Mu(i,t);return i.add.existing(s),s};const vB=Phaser.Utils.Objects.GetValue;class pB extends hs{constructor(t,s){s===void 0&&(s={}),super(t),this.type="rexTweaker.ToggleSwitchInput";var f=s.toggleSwitch,C=cB(t,f),S=vB(f,"size");S!==void 0&&C.setSize(S,S);var r=S!==void 0?0:1;this.addSpace().add(C,{proportion:0,expand:!1,fitRatio:r}),this.addChildrenMap("toggleSwitch",C),C.on("valuechange",function(y){this.setValue(y)},this)}get value(){return this._value}set value(t){this._value!==t&&(this.validate(t)||(t=this._value),this.childrenMap.toggleSwitch.setValue(t),super.value=t)}}var gB=function(i,t,s){var f=new pB(i,s);return i.add.existing(f),f},mB=function(i,t,s){s===void 0&&(s=!0),s?t=t?fe(t):{}:t||(t={});var f=new jo(i,t);return i.add.existing(f),f};class xB extends hs{constructor(t,s){s===void 0&&(s={}),super(t),this.type="rexTweaker.ColorInput";var f=s.colorInput,C=mB(t,f);this.add(C,{proportion:1,expand:!0}),this.addChildrenMap("colorInput",C),C.on("valuechange",function(S){this.setValue(S)},this)}get value(){return this._value}set value(t){this._value!==t&&(this.validate(t)||(t=this._value),this.childrenMap.colorInput.setValue(t),super.value=t)}}var yB=function(i,t,s){var f=new xB(i,s);return i.add.existing(f),f},TB=function(i,t,s){var f=t.view,C;switch(f){case za:C=hp;break;case bx:C=Z9;break;case Fx:C=tB;break;case Lx:C=nB;break;case z9:C=hB;break;case Dx:C=fB;break;case U9:C=gB;break;case Y9:C=yB;break;default:C=_i(f)?f:hp;break}var S=C(i,t,s,S);return S.setTextFormatCallback(t.format),S};const lp=Phaser.Utils.Objects.GetValue;var CB=function(i,t,s){var f=lp(s,"title")||{},C=Ix(i,t,f),S=TB(i,t,s),r=lp(s,"background")||{},y=Be(i,r),e=new Id(i,{...t,...s,inputTitle:C,inputField:S,background:y});return i.add.existing(e),e.setTitle(t),e};Phaser.Utils.Objects.GetValue;var SB=function(i,t,s){arguments.length===1?(s=i,i=s.bindingTarget,t=s.bindingKey):s===void 0&&(s={}),s.title||(s.title=t),s.view||(s.view=k9(i,t,s));var f=this.styles.inputRow||{};f.parentOrientation=this.styles.orientation;var C=CB(this.scene,s,f),S=C.childrenMap.inputField,r;return this.orientation===1?r=0:(r=this.itemWidth>0?0:1,C.setMinWidth(this.itemWidth)),this.add(C,{proportion:r,expand:!0}),s.onValueChange&&S.on("valuechange",s.onValueChange),s.onValidate&&S.setValidateCallback(s.onValidate),C.setAutoUpdateEnable(s.autoUpdate),C.setBindingTarget(i,t),s.monitor&&C.startMonitorTarget(),s.key&&this.root.addChildrenMap(s.key,C),this},PB=function(i,t){var s=new bi(i,t);return i.add.existing(s),s};const yl=Phaser.Utils.Objects.GetValue;var EB=function(i,t,s){for(var f=yl(s,"title")||{},C=Ix(i,t,f),S=t.buttons,r=yl(s,"button")||{},y=[],e=0,u=S.length;e<u;e++){var m=Ge(i,r);y.push(m);var d=S[e];m.resetDisplayContent({text:d.label}),m.callback=d.callback}var l=Gx(i,{buttons:y,expand:y.length===1}),h=yl(s,"background")||{},n=PB(i,h),a=new Id(i,{...s,inputTitle:C,inputField:l,background:n});return i.add.existing(a),a.setTitle(t),l.on("button.click",function(c){c.callback(a.bindingTarget)}),a};const MB=Phaser.Utils.Objects.GetValue;var up=function(i){var t=this.scene;i===void 0&&(i={}),i.hasOwnProperty("label")&&(i.buttons=[{label:i.label,callback:i.callback}],delete i.label,delete i.callback);var s=i.bindingTarget;delete i.bindingTarget;var f=MB(this.styles,"inputRow")||{},C=EB(t,i,f);return this.add(C,{expand:!0}),s&&C.setBindingTarget(s),i.key&&this.root.addChildrenMap(i.key,C),this};const wB=Phaser.Utils.Objects.GetValue;var RB=function(i){var t=this.scene,s=wB(this.styles,"separator"),f=Dd(t,i,s);return this.add(f,{expand:!0}),this},AB=function(i){for(var t=this.sizerChildren,s=0,f=t.length;s<f;s++){var C=t[s];C.setBindingTarget&&C.setBindingTarget(i)}return this},OB=function(){for(var i=0,t=this.sizerChildren,s=0,f=t.length;s<f;s++){var C=t[s];C.rexSizer.hidden||(C.getMinTitleWidth?i=Math.max(i,C.getMinTitleWidth()):C.getMaxInputRowTitleWidth&&(i=Math.max(i,C.getMaxInputRowTitleWidth())))}return i+this.getInnerPadding("left")},bB=function(i){i-=this.getInnerPadding("left");for(var t=this.sizerChildren,s=0,f=t.length;s<f;s++){var C=t[s];C.rexSizer.hidden||(C.setMinTitleWidth?C.setMinTitleWidth(i):C.setInputRowTitleWidth&&C.setInputRowTitleWidth(i))}return this},FB={addFolder:I9,addTab:V9,addInput:SB,addButton:up,addButtons:up,addSeparator:RB,setBindingTarget:AB,getMaxInputRowTitleWidth:OB,setInputRowTitleWidth:bB};const Aa=Phaser.Utils.Objects.GetValue;class Bd extends yt{constructor(t,s){if(s===void 0&&(s={}),s.orientation===void 0&&(s.orientation=1),super(t,s),this.type="rexTweakerShell",this.root=s.root||this,this.styles=Aa(s,"styles")||{},this.styles.orientation=this.orientation,this.itemWidth=Aa(this.styles,"itemWidth",0),this.root===this&&this.orientation===1){var f=Aa(s,"inputRow.alignTitle");if(f===void 0){var C=Aa(this.styles,"inputRow.proportion.title");f=!C}else f&&it(this.styles,"inputRow.proportion.title",0);this.alignInputRowTitle=f}else this.alignInputRowTitle=!1;var S=Dd(t,void 0,s.background);S&&this.addBackground(S)}preLayout(){super.preLayout(),this.alignInputRowTitle&&this.setInputRowTitleWidth(this.getMaxInputRowTitleWidth())}}Object.assign(Bd.prototype,FB);class Nx extends Bd{constructor(t,s){s===void 0&&(s={}),s.styles===void 0&&(s.styles={}),s.background=s.styles.background||{},s.space=s.styles.space||{},super(t,s),this.type="rexTweaker"}}st.register("tweaker",function(i){var t=new Nx(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.Tweaker",Nx);/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function Vx(i){return typeof i>"u"||i===null}function LB(i){return typeof i=="object"&&i!==null}function DB(i){return Array.isArray(i)?i:Vx(i)?[]:[i]}function IB(i,t){var s,f,C,S;if(t)for(S=Object.keys(t),s=0,f=S.length;s<f;s+=1)C=S[s],i[C]=t[C];return i}function BB(i,t){var s="",f;for(f=0;f<t;f+=1)s+=i;return s}function GB(i){return i===0&&Number.NEGATIVE_INFINITY===1/i}var NB=Vx,VB=LB,zB=DB,UB=BB,YB=GB,kB=IB,Ht={isNothing:NB,isObject:VB,toArray:zB,repeat:UB,isNegativeZero:YB,extend:kB};function zx(i,t){var s="",f=i.reason||"(unknown reason)";return i.mark?(i.mark.name&&(s+='in "'+i.mark.name+'" '),s+="("+(i.mark.line+1)+":"+(i.mark.column+1)+")",!t&&i.mark.snippet&&(s+=`

`+i.mark.snippet),f+" "+s):f}function mr(i,t){Error.call(this),this.name="YAMLException",this.reason=i,this.mark=t,this.message=zx(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}mr.prototype=Object.create(Error.prototype);mr.prototype.constructor=mr;mr.prototype.toString=function(t){return this.name+": "+zx(this,t)};var de=mr;function Tl(i,t,s,f,C){var S="",r="",y=Math.floor(C/2)-1;return f-t>y&&(S=" ... ",t=f-y+S.length),s-f>y&&(r=" ...",s=f+y-r.length),{str:S+i.slice(t,s).replace(/\t/g,"→")+r,pos:f-t+S.length}}function Cl(i,t){return Ht.repeat(" ",t-i.length)+i}function XB(i,t){if(t=Object.create(t||null),!i.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var s=/\r?\n|\r|\0/g,f=[0],C=[],S,r=-1;S=s.exec(i.buffer);)C.push(S.index),f.push(S.index+S[0].length),i.position<=S.index&&r<0&&(r=f.length-2);r<0&&(r=f.length-1);var y="",e,u,m=Math.min(i.line+t.linesAfter,C.length).toString().length,d=t.maxLength-(t.indent+m+3);for(e=1;e<=t.linesBefore&&!(r-e<0);e++)u=Tl(i.buffer,f[r-e],C[r-e],i.position-(f[r]-f[r-e]),d),y=Ht.repeat(" ",t.indent)+Cl((i.line-e+1).toString(),m)+" | "+u.str+`
`+y;for(u=Tl(i.buffer,f[r],C[r],i.position,d),y+=Ht.repeat(" ",t.indent)+Cl((i.line+1).toString(),m)+" | "+u.str+`
`,y+=Ht.repeat("-",t.indent+m+3+u.pos)+`^
`,e=1;e<=t.linesAfter&&!(r+e>=C.length);e++)u=Tl(i.buffer,f[r+e],C[r+e],i.position-(f[r]-f[r+e]),d),y+=Ht.repeat(" ",t.indent)+Cl((i.line+e+1).toString(),m)+" | "+u.str+`
`;return y.replace(/\n$/,"")}var WB=XB,HB=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],$B=["scalar","sequence","mapping"];function KB(i){var t={};return i!==null&&Object.keys(i).forEach(function(s){i[s].forEach(function(f){t[String(f)]=s})}),t}function jB(i,t){if(t=t||{},Object.keys(t).forEach(function(s){if(HB.indexOf(s)===-1)throw new de('Unknown option "'+s+'" is met in definition of "'+i+'" YAML type.')}),this.options=t,this.tag=i,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(s){return s},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=KB(t.styleAliases||null),$B.indexOf(this.kind)===-1)throw new de('Unknown kind "'+this.kind+'" is specified for "'+i+'" YAML type.')}var ne=jB;function dp(i,t){var s=[];return i[t].forEach(function(f){var C=s.length;s.forEach(function(S,r){S.tag===f.tag&&S.kind===f.kind&&S.multi===f.multi&&(C=r)}),s[C]=f}),s}function ZB(){var i={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,s;function f(C){C.multi?(i.multi[C.kind].push(C),i.multi.fallback.push(C)):i[C.kind][C.tag]=i.fallback[C.tag]=C}for(t=0,s=arguments.length;t<s;t+=1)arguments[t].forEach(f);return i}function Kl(i){return this.extend(i)}Kl.prototype.extend=function(t){var s=[],f=[];if(t instanceof ne)f.push(t);else if(Array.isArray(t))f=f.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(s=s.concat(t.implicit)),t.explicit&&(f=f.concat(t.explicit));else throw new de("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");s.forEach(function(S){if(!(S instanceof ne))throw new de("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(S.loadKind&&S.loadKind!=="scalar")throw new de("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(S.multi)throw new de("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),f.forEach(function(S){if(!(S instanceof ne))throw new de("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var C=Object.create(Kl.prototype);return C.implicit=(this.implicit||[]).concat(s),C.explicit=(this.explicit||[]).concat(f),C.compiledImplicit=dp(C,"implicit"),C.compiledExplicit=dp(C,"explicit"),C.compiledTypeMap=ZB(C.compiledImplicit,C.compiledExplicit),C};var Ux=Kl,Yx=new ne("tag:yaml.org,2002:str",{kind:"scalar",construct:function(i){return i!==null?i:""}}),kx=new ne("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(i){return i!==null?i:[]}}),Xx=new ne("tag:yaml.org,2002:map",{kind:"mapping",construct:function(i){return i!==null?i:{}}}),Wx=new Ux({explicit:[Yx,kx,Xx]});function JB(i){if(i===null)return!0;var t=i.length;return t===1&&i==="~"||t===4&&(i==="null"||i==="Null"||i==="NULL")}function QB(){return null}function qB(i){return i===null}var Hx=new ne("tag:yaml.org,2002:null",{kind:"scalar",resolve:JB,construct:QB,predicate:qB,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function _B(i){if(i===null)return!1;var t=i.length;return t===4&&(i==="true"||i==="True"||i==="TRUE")||t===5&&(i==="false"||i==="False"||i==="FALSE")}function t8(i){return i==="true"||i==="True"||i==="TRUE"}function e8(i){return Object.prototype.toString.call(i)==="[object Boolean]"}var $x=new ne("tag:yaml.org,2002:bool",{kind:"scalar",resolve:_B,construct:t8,predicate:e8,represent:{lowercase:function(i){return i?"true":"false"},uppercase:function(i){return i?"TRUE":"FALSE"},camelcase:function(i){return i?"True":"False"}},defaultStyle:"lowercase"});function i8(i){return 48<=i&&i<=57||65<=i&&i<=70||97<=i&&i<=102}function s8(i){return 48<=i&&i<=55}function n8(i){return 48<=i&&i<=57}function r8(i){if(i===null)return!1;var t=i.length,s=0,f=!1,C;if(!t)return!1;if(C=i[s],(C==="-"||C==="+")&&(C=i[++s]),C==="0"){if(s+1===t)return!0;if(C=i[++s],C==="b"){for(s++;s<t;s++)if(C=i[s],C!=="_"){if(C!=="0"&&C!=="1")return!1;f=!0}return f&&C!=="_"}if(C==="x"){for(s++;s<t;s++)if(C=i[s],C!=="_"){if(!i8(i.charCodeAt(s)))return!1;f=!0}return f&&C!=="_"}if(C==="o"){for(s++;s<t;s++)if(C=i[s],C!=="_"){if(!s8(i.charCodeAt(s)))return!1;f=!0}return f&&C!=="_"}}if(C==="_")return!1;for(;s<t;s++)if(C=i[s],C!=="_"){if(!n8(i.charCodeAt(s)))return!1;f=!0}return!(!f||C==="_")}function a8(i){var t=i,s=1,f;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),f=t[0],(f==="-"||f==="+")&&(f==="-"&&(s=-1),t=t.slice(1),f=t[0]),t==="0")return 0;if(f==="0"){if(t[1]==="b")return s*parseInt(t.slice(2),2);if(t[1]==="x")return s*parseInt(t.slice(2),16);if(t[1]==="o")return s*parseInt(t.slice(2),8)}return s*parseInt(t,10)}function o8(i){return Object.prototype.toString.call(i)==="[object Number]"&&i%1===0&&!Ht.isNegativeZero(i)}var Kx=new ne("tag:yaml.org,2002:int",{kind:"scalar",resolve:r8,construct:a8,predicate:o8,represent:{binary:function(i){return i>=0?"0b"+i.toString(2):"-0b"+i.toString(2).slice(1)},octal:function(i){return i>=0?"0o"+i.toString(8):"-0o"+i.toString(8).slice(1)},decimal:function(i){return i.toString(10)},hexadecimal:function(i){return i>=0?"0x"+i.toString(16).toUpperCase():"-0x"+i.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),h8=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function l8(i){return!(i===null||!h8.test(i)||i[i.length-1]==="_")}function u8(i){var t,s;return t=i.replace(/_/g,"").toLowerCase(),s=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?s===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:s*parseFloat(t,10)}var d8=/^[-+]?[0-9]+e/;function f8(i,t){var s;if(isNaN(i))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===i)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===i)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Ht.isNegativeZero(i))return"-0.0";return s=i.toString(10),d8.test(s)?s.replace("e",".e"):s}function c8(i){return Object.prototype.toString.call(i)==="[object Number]"&&(i%1!==0||Ht.isNegativeZero(i))}var jx=new ne("tag:yaml.org,2002:float",{kind:"scalar",resolve:l8,construct:u8,predicate:c8,represent:f8,defaultStyle:"lowercase"}),Zx=Wx.extend({implicit:[Hx,$x,Kx,jx]}),Jx=Zx,Qx=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),qx=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function v8(i){return i===null?!1:Qx.exec(i)!==null||qx.exec(i)!==null}function p8(i){var t,s,f,C,S,r,y,e=0,u=null,m,d,l;if(t=Qx.exec(i),t===null&&(t=qx.exec(i)),t===null)throw new Error("Date resolve error");if(s=+t[1],f=+t[2]-1,C=+t[3],!t[4])return new Date(Date.UTC(s,f,C));if(S=+t[4],r=+t[5],y=+t[6],t[7]){for(e=t[7].slice(0,3);e.length<3;)e+="0";e=+e}return t[9]&&(m=+t[10],d=+(t[11]||0),u=(m*60+d)*6e4,t[9]==="-"&&(u=-u)),l=new Date(Date.UTC(s,f,C,S,r,y,e)),u&&l.setTime(l.getTime()-u),l}function g8(i){return i.toISOString()}var _x=new ne("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:v8,construct:p8,instanceOf:Date,represent:g8});function m8(i){return i==="<<"||i===null}var ty=new ne("tag:yaml.org,2002:merge",{kind:"scalar",resolve:m8}),Gd=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function x8(i){if(i===null)return!1;var t,s,f=0,C=i.length,S=Gd;for(s=0;s<C;s++)if(t=S.indexOf(i.charAt(s)),!(t>64)){if(t<0)return!1;f+=6}return f%8===0}function y8(i){var t,s,f=i.replace(/[\r\n=]/g,""),C=f.length,S=Gd,r=0,y=[];for(t=0;t<C;t++)t%4===0&&t&&(y.push(r>>16&255),y.push(r>>8&255),y.push(r&255)),r=r<<6|S.indexOf(f.charAt(t));return s=C%4*6,s===0?(y.push(r>>16&255),y.push(r>>8&255),y.push(r&255)):s===18?(y.push(r>>10&255),y.push(r>>2&255)):s===12&&y.push(r>>4&255),new Uint8Array(y)}function T8(i){var t="",s=0,f,C,S=i.length,r=Gd;for(f=0;f<S;f++)f%3===0&&f&&(t+=r[s>>18&63],t+=r[s>>12&63],t+=r[s>>6&63],t+=r[s&63]),s=(s<<8)+i[f];return C=S%3,C===0?(t+=r[s>>18&63],t+=r[s>>12&63],t+=r[s>>6&63],t+=r[s&63]):C===2?(t+=r[s>>10&63],t+=r[s>>4&63],t+=r[s<<2&63],t+=r[64]):C===1&&(t+=r[s>>2&63],t+=r[s<<4&63],t+=r[64],t+=r[64]),t}function C8(i){return Object.prototype.toString.call(i)==="[object Uint8Array]"}var ey=new ne("tag:yaml.org,2002:binary",{kind:"scalar",resolve:x8,construct:y8,predicate:C8,represent:T8}),S8=Object.prototype.hasOwnProperty,P8=Object.prototype.toString;function E8(i){if(i===null)return!0;var t=[],s,f,C,S,r,y=i;for(s=0,f=y.length;s<f;s+=1){if(C=y[s],r=!1,P8.call(C)!=="[object Object]")return!1;for(S in C)if(S8.call(C,S))if(!r)r=!0;else return!1;if(!r)return!1;if(t.indexOf(S)===-1)t.push(S);else return!1}return!0}function M8(i){return i!==null?i:[]}var iy=new ne("tag:yaml.org,2002:omap",{kind:"sequence",resolve:E8,construct:M8}),w8=Object.prototype.toString;function R8(i){if(i===null)return!0;var t,s,f,C,S,r=i;for(S=new Array(r.length),t=0,s=r.length;t<s;t+=1){if(f=r[t],w8.call(f)!=="[object Object]"||(C=Object.keys(f),C.length!==1))return!1;S[t]=[C[0],f[C[0]]]}return!0}function A8(i){if(i===null)return[];var t,s,f,C,S,r=i;for(S=new Array(r.length),t=0,s=r.length;t<s;t+=1)f=r[t],C=Object.keys(f),S[t]=[C[0],f[C[0]]];return S}var sy=new ne("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:R8,construct:A8}),O8=Object.prototype.hasOwnProperty;function b8(i){if(i===null)return!0;var t,s=i;for(t in s)if(O8.call(s,t)&&s[t]!==null)return!1;return!0}function F8(i){return i!==null?i:{}}var ny=new ne("tag:yaml.org,2002:set",{kind:"mapping",resolve:b8,construct:F8}),Nd=Jx.extend({implicit:[_x,ty],explicit:[ey,iy,sy,ny]}),es=Object.prototype.hasOwnProperty,ja=1,ry=2,ay=3,Za=4,Sl=1,L8=2,fp=3,D8=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,I8=/[\x85\u2028\u2029]/,B8=/[,\[\]\{\}]/,oy=/^(?:!|!!|![a-z\-]+!)$/i,hy=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function cp(i){return Object.prototype.toString.call(i)}function fi(i){return i===10||i===13}function bs(i){return i===9||i===32}function Te(i){return i===9||i===32||i===10||i===13}function mn(i){return i===44||i===91||i===93||i===123||i===125}function G8(i){var t;return 48<=i&&i<=57?i-48:(t=i|32,97<=t&&t<=102?t-97+10:-1)}function N8(i){return i===120?2:i===117?4:i===85?8:0}function V8(i){return 48<=i&&i<=57?i-48:-1}function vp(i){return i===48?"\0":i===97?"\x07":i===98?"\b":i===116||i===9?"	":i===110?`
`:i===118?"\v":i===102?"\f":i===114?"\r":i===101?"\x1B":i===32?" ":i===34?'"':i===47?"/":i===92?"\\":i===78?"":i===95?" ":i===76?"\u2028":i===80?"\u2029":""}function z8(i){return i<=65535?String.fromCharCode(i):String.fromCharCode((i-65536>>10)+55296,(i-65536&1023)+56320)}var ly=new Array(256),uy=new Array(256);for(var fn=0;fn<256;fn++)ly[fn]=vp(fn)?1:0,uy[fn]=vp(fn);function U8(i,t){this.input=i,this.filename=t.filename||null,this.schema=t.schema||Nd,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=i.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function dy(i,t){var s={name:i.filename,buffer:i.input.slice(0,-1),position:i.position,line:i.line,column:i.position-i.lineStart};return s.snippet=WB(s),new de(t,s)}function ft(i,t){throw dy(i,t)}function Ja(i,t){i.onWarning&&i.onWarning.call(null,dy(i,t))}var pp={YAML:function(t,s,f){var C,S,r;t.version!==null&&ft(t,"duplication of %YAML directive"),f.length!==1&&ft(t,"YAML directive accepts exactly one argument"),C=/^([0-9]+)\.([0-9]+)$/.exec(f[0]),C===null&&ft(t,"ill-formed argument of the YAML directive"),S=parseInt(C[1],10),r=parseInt(C[2],10),S!==1&&ft(t,"unacceptable YAML version of the document"),t.version=f[0],t.checkLineBreaks=r<2,r!==1&&r!==2&&Ja(t,"unsupported YAML version of the document")},TAG:function(t,s,f){var C,S;f.length!==2&&ft(t,"TAG directive accepts exactly two arguments"),C=f[0],S=f[1],oy.test(C)||ft(t,"ill-formed tag handle (first argument) of the TAG directive"),es.call(t.tagMap,C)&&ft(t,'there is a previously declared suffix for "'+C+'" tag handle'),hy.test(S)||ft(t,"ill-formed tag prefix (second argument) of the TAG directive");try{S=decodeURIComponent(S)}catch{ft(t,"tag prefix is malformed: "+S)}t.tagMap[C]=S}};function Qi(i,t,s,f){var C,S,r,y;if(t<s){if(y=i.input.slice(t,s),f)for(C=0,S=y.length;C<S;C+=1)r=y.charCodeAt(C),r===9||32<=r&&r<=1114111||ft(i,"expected valid JSON character");else D8.test(y)&&ft(i,"the stream contains non-printable characters");i.result+=y}}function gp(i,t,s,f){var C,S,r,y;for(Ht.isObject(s)||ft(i,"cannot merge mappings; the provided source object is unacceptable"),C=Object.keys(s),r=0,y=C.length;r<y;r+=1)S=C[r],es.call(t,S)||(t[S]=s[S],f[S]=!0)}function xn(i,t,s,f,C,S,r,y,e){var u,m;if(Array.isArray(C))for(C=Array.prototype.slice.call(C),u=0,m=C.length;u<m;u+=1)Array.isArray(C[u])&&ft(i,"nested arrays are not supported inside keys"),typeof C=="object"&&cp(C[u])==="[object Object]"&&(C[u]="[object Object]");if(typeof C=="object"&&cp(C)==="[object Object]"&&(C="[object Object]"),C=String(C),t===null&&(t={}),f==="tag:yaml.org,2002:merge")if(Array.isArray(S))for(u=0,m=S.length;u<m;u+=1)gp(i,t,S[u],s);else gp(i,t,S,s);else!i.json&&!es.call(s,C)&&es.call(t,C)&&(i.line=r||i.line,i.lineStart=y||i.lineStart,i.position=e||i.position,ft(i,"duplicated mapping key")),C==="__proto__"?Object.defineProperty(t,C,{configurable:!0,enumerable:!0,writable:!0,value:S}):t[C]=S,delete s[C];return t}function Vd(i){var t;t=i.input.charCodeAt(i.position),t===10?i.position++:t===13?(i.position++,i.input.charCodeAt(i.position)===10&&i.position++):ft(i,"a line break is expected"),i.line+=1,i.lineStart=i.position,i.firstTabInLine=-1}function zt(i,t,s){for(var f=0,C=i.input.charCodeAt(i.position);C!==0;){for(;bs(C);)C===9&&i.firstTabInLine===-1&&(i.firstTabInLine=i.position),C=i.input.charCodeAt(++i.position);if(t&&C===35)do C=i.input.charCodeAt(++i.position);while(C!==10&&C!==13&&C!==0);if(fi(C))for(Vd(i),C=i.input.charCodeAt(i.position),f++,i.lineIndent=0;C===32;)i.lineIndent++,C=i.input.charCodeAt(++i.position);else break}return s!==-1&&f!==0&&i.lineIndent<s&&Ja(i,"deficient indentation"),f}function Zo(i){var t=i.position,s;return s=i.input.charCodeAt(t),!!((s===45||s===46)&&s===i.input.charCodeAt(t+1)&&s===i.input.charCodeAt(t+2)&&(t+=3,s=i.input.charCodeAt(t),s===0||Te(s)))}function zd(i,t){t===1?i.result+=" ":t>1&&(i.result+=Ht.repeat(`
`,t-1))}function Y8(i,t,s){var f,C,S,r,y,e,u,m,d=i.kind,l=i.result,h;if(h=i.input.charCodeAt(i.position),Te(h)||mn(h)||h===35||h===38||h===42||h===33||h===124||h===62||h===39||h===34||h===37||h===64||h===96||(h===63||h===45)&&(C=i.input.charCodeAt(i.position+1),Te(C)||s&&mn(C)))return!1;for(i.kind="scalar",i.result="",S=r=i.position,y=!1;h!==0;){if(h===58){if(C=i.input.charCodeAt(i.position+1),Te(C)||s&&mn(C))break}else if(h===35){if(f=i.input.charCodeAt(i.position-1),Te(f))break}else{if(i.position===i.lineStart&&Zo(i)||s&&mn(h))break;if(fi(h))if(e=i.line,u=i.lineStart,m=i.lineIndent,zt(i,!1,-1),i.lineIndent>=t){y=!0,h=i.input.charCodeAt(i.position);continue}else{i.position=r,i.line=e,i.lineStart=u,i.lineIndent=m;break}}y&&(Qi(i,S,r,!1),zd(i,i.line-e),S=r=i.position,y=!1),bs(h)||(r=i.position+1),h=i.input.charCodeAt(++i.position)}return Qi(i,S,r,!1),i.result?!0:(i.kind=d,i.result=l,!1)}function k8(i,t){var s,f,C;if(s=i.input.charCodeAt(i.position),s!==39)return!1;for(i.kind="scalar",i.result="",i.position++,f=C=i.position;(s=i.input.charCodeAt(i.position))!==0;)if(s===39)if(Qi(i,f,i.position,!0),s=i.input.charCodeAt(++i.position),s===39)f=i.position,i.position++,C=i.position;else return!0;else fi(s)?(Qi(i,f,C,!0),zd(i,zt(i,!1,t)),f=C=i.position):i.position===i.lineStart&&Zo(i)?ft(i,"unexpected end of the document within a single quoted scalar"):(i.position++,C=i.position);ft(i,"unexpected end of the stream within a single quoted scalar")}function X8(i,t){var s,f,C,S,r,y;if(y=i.input.charCodeAt(i.position),y!==34)return!1;for(i.kind="scalar",i.result="",i.position++,s=f=i.position;(y=i.input.charCodeAt(i.position))!==0;){if(y===34)return Qi(i,s,i.position,!0),i.position++,!0;if(y===92){if(Qi(i,s,i.position,!0),y=i.input.charCodeAt(++i.position),fi(y))zt(i,!1,t);else if(y<256&&ly[y])i.result+=uy[y],i.position++;else if((r=N8(y))>0){for(C=r,S=0;C>0;C--)y=i.input.charCodeAt(++i.position),(r=G8(y))>=0?S=(S<<4)+r:ft(i,"expected hexadecimal character");i.result+=z8(S),i.position++}else ft(i,"unknown escape sequence");s=f=i.position}else fi(y)?(Qi(i,s,f,!0),zd(i,zt(i,!1,t)),s=f=i.position):i.position===i.lineStart&&Zo(i)?ft(i,"unexpected end of the document within a double quoted scalar"):(i.position++,f=i.position)}ft(i,"unexpected end of the stream within a double quoted scalar")}function W8(i,t){var s=!0,f,C,S,r=i.tag,y,e=i.anchor,u,m,d,l,h,n=Object.create(null),a,c,o,v;if(v=i.input.charCodeAt(i.position),v===91)m=93,h=!1,y=[];else if(v===123)m=125,h=!0,y={};else return!1;for(i.anchor!==null&&(i.anchorMap[i.anchor]=y),v=i.input.charCodeAt(++i.position);v!==0;){if(zt(i,!0,t),v=i.input.charCodeAt(i.position),v===m)return i.position++,i.tag=r,i.anchor=e,i.kind=h?"mapping":"sequence",i.result=y,!0;s?v===44&&ft(i,"expected the node content, but found ','"):ft(i,"missed comma between flow collection entries"),c=a=o=null,d=l=!1,v===63&&(u=i.input.charCodeAt(i.position+1),Te(u)&&(d=l=!0,i.position++,zt(i,!0,t))),f=i.line,C=i.lineStart,S=i.position,On(i,t,ja,!1,!0),c=i.tag,a=i.result,zt(i,!0,t),v=i.input.charCodeAt(i.position),(l||i.line===f)&&v===58&&(d=!0,v=i.input.charCodeAt(++i.position),zt(i,!0,t),On(i,t,ja,!1,!0),o=i.result),h?xn(i,y,n,c,a,o,f,C,S):d?y.push(xn(i,null,n,c,a,o,f,C,S)):y.push(a),zt(i,!0,t),v=i.input.charCodeAt(i.position),v===44?(s=!0,v=i.input.charCodeAt(++i.position)):s=!1}ft(i,"unexpected end of the stream within a flow collection")}function H8(i,t){var s,f,C=Sl,S=!1,r=!1,y=t,e=0,u=!1,m,d;if(d=i.input.charCodeAt(i.position),d===124)f=!1;else if(d===62)f=!0;else return!1;for(i.kind="scalar",i.result="";d!==0;)if(d=i.input.charCodeAt(++i.position),d===43||d===45)Sl===C?C=d===43?fp:L8:ft(i,"repeat of a chomping mode identifier");else if((m=V8(d))>=0)m===0?ft(i,"bad explicit indentation width of a block scalar; it cannot be less than one"):r?ft(i,"repeat of an indentation width identifier"):(y=t+m-1,r=!0);else break;if(bs(d)){do d=i.input.charCodeAt(++i.position);while(bs(d));if(d===35)do d=i.input.charCodeAt(++i.position);while(!fi(d)&&d!==0)}for(;d!==0;){for(Vd(i),i.lineIndent=0,d=i.input.charCodeAt(i.position);(!r||i.lineIndent<y)&&d===32;)i.lineIndent++,d=i.input.charCodeAt(++i.position);if(!r&&i.lineIndent>y&&(y=i.lineIndent),fi(d)){e++;continue}if(i.lineIndent<y){C===fp?i.result+=Ht.repeat(`
`,S?1+e:e):C===Sl&&S&&(i.result+=`
`);break}for(f?bs(d)?(u=!0,i.result+=Ht.repeat(`
`,S?1+e:e)):u?(u=!1,i.result+=Ht.repeat(`
`,e+1)):e===0?S&&(i.result+=" "):i.result+=Ht.repeat(`
`,e):i.result+=Ht.repeat(`
`,S?1+e:e),S=!0,r=!0,e=0,s=i.position;!fi(d)&&d!==0;)d=i.input.charCodeAt(++i.position);Qi(i,s,i.position,!1)}return!0}function mp(i,t){var s,f=i.tag,C=i.anchor,S=[],r,y=!1,e;if(i.firstTabInLine!==-1)return!1;for(i.anchor!==null&&(i.anchorMap[i.anchor]=S),e=i.input.charCodeAt(i.position);e!==0&&(i.firstTabInLine!==-1&&(i.position=i.firstTabInLine,ft(i,"tab characters must not be used in indentation")),!(e!==45||(r=i.input.charCodeAt(i.position+1),!Te(r))));){if(y=!0,i.position++,zt(i,!0,-1)&&i.lineIndent<=t){S.push(null),e=i.input.charCodeAt(i.position);continue}if(s=i.line,On(i,t,ay,!1,!0),S.push(i.result),zt(i,!0,-1),e=i.input.charCodeAt(i.position),(i.line===s||i.lineIndent>t)&&e!==0)ft(i,"bad indentation of a sequence entry");else if(i.lineIndent<t)break}return y?(i.tag=f,i.anchor=C,i.kind="sequence",i.result=S,!0):!1}function $8(i,t,s){var f,C,S,r,y,e,u=i.tag,m=i.anchor,d={},l=Object.create(null),h=null,n=null,a=null,c=!1,o=!1,v;if(i.firstTabInLine!==-1)return!1;for(i.anchor!==null&&(i.anchorMap[i.anchor]=d),v=i.input.charCodeAt(i.position);v!==0;){if(!c&&i.firstTabInLine!==-1&&(i.position=i.firstTabInLine,ft(i,"tab characters must not be used in indentation")),f=i.input.charCodeAt(i.position+1),S=i.line,(v===63||v===58)&&Te(f))v===63?(c&&(xn(i,d,l,h,n,null,r,y,e),h=n=a=null),o=!0,c=!0,C=!0):c?(c=!1,C=!0):ft(i,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),i.position+=1,v=f;else{if(r=i.line,y=i.lineStart,e=i.position,!On(i,s,ry,!1,!0))break;if(i.line===S){for(v=i.input.charCodeAt(i.position);bs(v);)v=i.input.charCodeAt(++i.position);if(v===58)v=i.input.charCodeAt(++i.position),Te(v)||ft(i,"a whitespace character is expected after the key-value separator within a block mapping"),c&&(xn(i,d,l,h,n,null,r,y,e),h=n=a=null),o=!0,c=!1,C=!1,h=i.tag,n=i.result;else if(o)ft(i,"can not read an implicit mapping pair; a colon is missed");else return i.tag=u,i.anchor=m,!0}else if(o)ft(i,"can not read a block mapping entry; a multiline key may not be an implicit key");else return i.tag=u,i.anchor=m,!0}if((i.line===S||i.lineIndent>t)&&(c&&(r=i.line,y=i.lineStart,e=i.position),On(i,t,Za,!0,C)&&(c?n=i.result:a=i.result),c||(xn(i,d,l,h,n,a,r,y,e),h=n=a=null),zt(i,!0,-1),v=i.input.charCodeAt(i.position)),(i.line===S||i.lineIndent>t)&&v!==0)ft(i,"bad indentation of a mapping entry");else if(i.lineIndent<t)break}return c&&xn(i,d,l,h,n,null,r,y,e),o&&(i.tag=u,i.anchor=m,i.kind="mapping",i.result=d),o}function K8(i){var t,s=!1,f=!1,C,S,r;if(r=i.input.charCodeAt(i.position),r!==33)return!1;if(i.tag!==null&&ft(i,"duplication of a tag property"),r=i.input.charCodeAt(++i.position),r===60?(s=!0,r=i.input.charCodeAt(++i.position)):r===33?(f=!0,C="!!",r=i.input.charCodeAt(++i.position)):C="!",t=i.position,s){do r=i.input.charCodeAt(++i.position);while(r!==0&&r!==62);i.position<i.length?(S=i.input.slice(t,i.position),r=i.input.charCodeAt(++i.position)):ft(i,"unexpected end of the stream within a verbatim tag")}else{for(;r!==0&&!Te(r);)r===33&&(f?ft(i,"tag suffix cannot contain exclamation marks"):(C=i.input.slice(t-1,i.position+1),oy.test(C)||ft(i,"named tag handle cannot contain such characters"),f=!0,t=i.position+1)),r=i.input.charCodeAt(++i.position);S=i.input.slice(t,i.position),B8.test(S)&&ft(i,"tag suffix cannot contain flow indicator characters")}S&&!hy.test(S)&&ft(i,"tag name cannot contain such characters: "+S);try{S=decodeURIComponent(S)}catch{ft(i,"tag name is malformed: "+S)}return s?i.tag=S:es.call(i.tagMap,C)?i.tag=i.tagMap[C]+S:C==="!"?i.tag="!"+S:C==="!!"?i.tag="tag:yaml.org,2002:"+S:ft(i,'undeclared tag handle "'+C+'"'),!0}function j8(i){var t,s;if(s=i.input.charCodeAt(i.position),s!==38)return!1;for(i.anchor!==null&&ft(i,"duplication of an anchor property"),s=i.input.charCodeAt(++i.position),t=i.position;s!==0&&!Te(s)&&!mn(s);)s=i.input.charCodeAt(++i.position);return i.position===t&&ft(i,"name of an anchor node must contain at least one character"),i.anchor=i.input.slice(t,i.position),!0}function Z8(i){var t,s,f;if(f=i.input.charCodeAt(i.position),f!==42)return!1;for(f=i.input.charCodeAt(++i.position),t=i.position;f!==0&&!Te(f)&&!mn(f);)f=i.input.charCodeAt(++i.position);return i.position===t&&ft(i,"name of an alias node must contain at least one character"),s=i.input.slice(t,i.position),es.call(i.anchorMap,s)||ft(i,'unidentified alias "'+s+'"'),i.result=i.anchorMap[s],zt(i,!0,-1),!0}function On(i,t,s,f,C){var S,r,y,e=1,u=!1,m=!1,d,l,h,n,a,c;if(i.listener!==null&&i.listener("open",i),i.tag=null,i.anchor=null,i.kind=null,i.result=null,S=r=y=Za===s||ay===s,f&&zt(i,!0,-1)&&(u=!0,i.lineIndent>t?e=1:i.lineIndent===t?e=0:i.lineIndent<t&&(e=-1)),e===1)for(;K8(i)||j8(i);)zt(i,!0,-1)?(u=!0,y=S,i.lineIndent>t?e=1:i.lineIndent===t?e=0:i.lineIndent<t&&(e=-1)):y=!1;if(y&&(y=u||C),(e===1||Za===s)&&(ja===s||ry===s?a=t:a=t+1,c=i.position-i.lineStart,e===1?y&&(mp(i,c)||$8(i,c,a))||W8(i,a)?m=!0:(r&&H8(i,a)||k8(i,a)||X8(i,a)?m=!0:Z8(i)?(m=!0,(i.tag!==null||i.anchor!==null)&&ft(i,"alias node should not have any properties")):Y8(i,a,ja===s)&&(m=!0,i.tag===null&&(i.tag="?")),i.anchor!==null&&(i.anchorMap[i.anchor]=i.result)):e===0&&(m=y&&mp(i,c))),i.tag===null)i.anchor!==null&&(i.anchorMap[i.anchor]=i.result);else if(i.tag==="?"){for(i.result!==null&&i.kind!=="scalar"&&ft(i,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+i.kind+'"'),d=0,l=i.implicitTypes.length;d<l;d+=1)if(n=i.implicitTypes[d],n.resolve(i.result)){i.result=n.construct(i.result),i.tag=n.tag,i.anchor!==null&&(i.anchorMap[i.anchor]=i.result);break}}else if(i.tag!=="!"){if(es.call(i.typeMap[i.kind||"fallback"],i.tag))n=i.typeMap[i.kind||"fallback"][i.tag];else for(n=null,h=i.typeMap.multi[i.kind||"fallback"],d=0,l=h.length;d<l;d+=1)if(i.tag.slice(0,h[d].tag.length)===h[d].tag){n=h[d];break}n||ft(i,"unknown tag !<"+i.tag+">"),i.result!==null&&n.kind!==i.kind&&ft(i,"unacceptable node kind for !<"+i.tag+'> tag; it should be "'+n.kind+'", not "'+i.kind+'"'),n.resolve(i.result,i.tag)?(i.result=n.construct(i.result,i.tag),i.anchor!==null&&(i.anchorMap[i.anchor]=i.result)):ft(i,"cannot resolve a node with !<"+i.tag+"> explicit tag")}return i.listener!==null&&i.listener("close",i),i.tag!==null||i.anchor!==null||m}function J8(i){var t=i.position,s,f,C,S=!1,r;for(i.version=null,i.checkLineBreaks=i.legacy,i.tagMap=Object.create(null),i.anchorMap=Object.create(null);(r=i.input.charCodeAt(i.position))!==0&&(zt(i,!0,-1),r=i.input.charCodeAt(i.position),!(i.lineIndent>0||r!==37));){for(S=!0,r=i.input.charCodeAt(++i.position),s=i.position;r!==0&&!Te(r);)r=i.input.charCodeAt(++i.position);for(f=i.input.slice(s,i.position),C=[],f.length<1&&ft(i,"directive name must not be less than one character in length");r!==0;){for(;bs(r);)r=i.input.charCodeAt(++i.position);if(r===35){do r=i.input.charCodeAt(++i.position);while(r!==0&&!fi(r));break}if(fi(r))break;for(s=i.position;r!==0&&!Te(r);)r=i.input.charCodeAt(++i.position);C.push(i.input.slice(s,i.position))}r!==0&&Vd(i),es.call(pp,f)?pp[f](i,f,C):Ja(i,'unknown document directive "'+f+'"')}if(zt(i,!0,-1),i.lineIndent===0&&i.input.charCodeAt(i.position)===45&&i.input.charCodeAt(i.position+1)===45&&i.input.charCodeAt(i.position+2)===45?(i.position+=3,zt(i,!0,-1)):S&&ft(i,"directives end mark is expected"),On(i,i.lineIndent-1,Za,!1,!0),zt(i,!0,-1),i.checkLineBreaks&&I8.test(i.input.slice(t,i.position))&&Ja(i,"non-ASCII line breaks are interpreted as content"),i.documents.push(i.result),i.position===i.lineStart&&Zo(i)){i.input.charCodeAt(i.position)===46&&(i.position+=3,zt(i,!0,-1));return}if(i.position<i.length-1)ft(i,"end of the stream or a document separator is expected");else return}function fy(i,t){i=String(i),t=t||{},i.length!==0&&(i.charCodeAt(i.length-1)!==10&&i.charCodeAt(i.length-1)!==13&&(i+=`
`),i.charCodeAt(0)===65279&&(i=i.slice(1)));var s=new U8(i,t),f=i.indexOf("\0");for(f!==-1&&(s.position=f,ft(s,"null byte is not allowed in input")),s.input+="\0";s.input.charCodeAt(s.position)===32;)s.lineIndent+=1,s.position+=1;for(;s.position<s.length-1;)J8(s);return s.documents}function Q8(i,t,s){t!==null&&typeof t=="object"&&typeof s>"u"&&(s=t,t=null);var f=fy(i,s);if(typeof t!="function")return f;for(var C=0,S=f.length;C<S;C+=1)t(f[C])}function q8(i,t){var s=fy(i,t);if(s.length!==0){if(s.length===1)return s[0];throw new de("expected a single document in the stream, but found more")}}var _8=Q8,t7=q8,cy={loadAll:_8,load:t7},vy=Object.prototype.toString,py=Object.prototype.hasOwnProperty,Ud=65279,e7=9,xr=10,i7=13,s7=32,n7=33,r7=34,jl=35,a7=37,o7=38,h7=39,l7=42,gy=44,u7=45,Qa=58,d7=61,f7=62,c7=63,v7=64,my=91,xy=93,p7=96,yy=123,g7=124,Ty=125,le={};le[0]="\\0";le[7]="\\a";le[8]="\\b";le[9]="\\t";le[10]="\\n";le[11]="\\v";le[12]="\\f";le[13]="\\r";le[27]="\\e";le[34]='\\"';le[92]="\\\\";le[133]="\\N";le[160]="\\_";le[8232]="\\L";le[8233]="\\P";var m7=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],x7=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function y7(i,t){var s,f,C,S,r,y,e;if(t===null)return{};for(s={},f=Object.keys(t),C=0,S=f.length;C<S;C+=1)r=f[C],y=String(t[r]),r.slice(0,2)==="!!"&&(r="tag:yaml.org,2002:"+r.slice(2)),e=i.compiledTypeMap.fallback[r],e&&py.call(e.styleAliases,y)&&(y=e.styleAliases[y]),s[r]=y;return s}function T7(i){var t,s,f;if(t=i.toString(16).toUpperCase(),i<=255)s="x",f=2;else if(i<=65535)s="u",f=4;else if(i<=4294967295)s="U",f=8;else throw new de("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+s+Ht.repeat("0",f-t.length)+t}var C7=1,yr=2;function S7(i){this.schema=i.schema||Nd,this.indent=Math.max(1,i.indent||2),this.noArrayIndent=i.noArrayIndent||!1,this.skipInvalid=i.skipInvalid||!1,this.flowLevel=Ht.isNothing(i.flowLevel)?-1:i.flowLevel,this.styleMap=y7(this.schema,i.styles||null),this.sortKeys=i.sortKeys||!1,this.lineWidth=i.lineWidth||80,this.noRefs=i.noRefs||!1,this.noCompatMode=i.noCompatMode||!1,this.condenseFlow=i.condenseFlow||!1,this.quotingType=i.quotingType==='"'?yr:C7,this.forceQuotes=i.forceQuotes||!1,this.replacer=typeof i.replacer=="function"?i.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function xp(i,t){for(var s=Ht.repeat(" ",t),f=0,C=-1,S="",r,y=i.length;f<y;)C=i.indexOf(`
`,f),C===-1?(r=i.slice(f),f=y):(r=i.slice(f,C+1),f=C+1),r.length&&r!==`
`&&(S+=s),S+=r;return S}function Zl(i,t){return`
`+Ht.repeat(" ",i.indent*t)}function P7(i,t){var s,f,C;for(s=0,f=i.implicitTypes.length;s<f;s+=1)if(C=i.implicitTypes[s],C.resolve(t))return!0;return!1}function qa(i){return i===s7||i===e7}function Tr(i){return 32<=i&&i<=126||161<=i&&i<=55295&&i!==8232&&i!==8233||57344<=i&&i<=65533&&i!==Ud||65536<=i&&i<=1114111}function yp(i){return Tr(i)&&i!==Ud&&i!==i7&&i!==xr}function Tp(i,t,s){var f=yp(i),C=f&&!qa(i);return(s?f:f&&i!==gy&&i!==my&&i!==xy&&i!==yy&&i!==Ty)&&i!==jl&&!(t===Qa&&!C)||yp(t)&&!qa(t)&&i===jl||t===Qa&&C}function E7(i){return Tr(i)&&i!==Ud&&!qa(i)&&i!==u7&&i!==c7&&i!==Qa&&i!==gy&&i!==my&&i!==xy&&i!==yy&&i!==Ty&&i!==jl&&i!==o7&&i!==l7&&i!==n7&&i!==g7&&i!==d7&&i!==f7&&i!==h7&&i!==r7&&i!==a7&&i!==v7&&i!==p7}function M7(i){return!qa(i)&&i!==Qa}function hr(i,t){var s=i.charCodeAt(t),f;return s>=55296&&s<=56319&&t+1<i.length&&(f=i.charCodeAt(t+1),f>=56320&&f<=57343)?(s-55296)*1024+f-56320+65536:s}function Cy(i){var t=/^\n* /;return t.test(i)}var Sy=1,Jl=2,Py=3,Ey=4,pn=5;function w7(i,t,s,f,C,S,r,y){var e,u=0,m=null,d=!1,l=!1,h=f!==-1,n=-1,a=E7(hr(i,0))&&M7(hr(i,i.length-1));if(t||r)for(e=0;e<i.length;u>=65536?e+=2:e++){if(u=hr(i,e),!Tr(u))return pn;a=a&&Tp(u,m,y),m=u}else{for(e=0;e<i.length;u>=65536?e+=2:e++){if(u=hr(i,e),u===xr)d=!0,h&&(l=l||e-n-1>f&&i[n+1]!==" ",n=e);else if(!Tr(u))return pn;a=a&&Tp(u,m,y),m=u}l=l||h&&e-n-1>f&&i[n+1]!==" "}return!d&&!l?a&&!r&&!C(i)?Sy:S===yr?pn:Jl:s>9&&Cy(i)?pn:r?S===yr?pn:Jl:l?Ey:Py}function R7(i,t,s,f,C){i.dump=(function(){if(t.length===0)return i.quotingType===yr?'""':"''";if(!i.noCompatMode&&(m7.indexOf(t)!==-1||x7.test(t)))return i.quotingType===yr?'"'+t+'"':"'"+t+"'";var S=i.indent*Math.max(1,s),r=i.lineWidth===-1?-1:Math.max(Math.min(i.lineWidth,40),i.lineWidth-S),y=f||i.flowLevel>-1&&s>=i.flowLevel;function e(u){return P7(i,u)}switch(w7(t,y,i.indent,r,e,i.quotingType,i.forceQuotes&&!f,C)){case Sy:return t;case Jl:return"'"+t.replace(/'/g,"''")+"'";case Py:return"|"+Cp(t,i.indent)+Sp(xp(t,S));case Ey:return">"+Cp(t,i.indent)+Sp(xp(A7(t,r),S));case pn:return'"'+O7(t)+'"';default:throw new de("impossible error: invalid scalar style")}})()}function Cp(i,t){var s=Cy(i)?String(t):"",f=i[i.length-1]===`
`,C=f&&(i[i.length-2]===`
`||i===`
`),S=C?"+":f?"":"-";return s+S+`
`}function Sp(i){return i[i.length-1]===`
`?i.slice(0,-1):i}function A7(i,t){for(var s=/(\n+)([^\n]*)/g,f=(function(){var u=i.indexOf(`
`);return u=u!==-1?u:i.length,s.lastIndex=u,Pp(i.slice(0,u),t)})(),C=i[0]===`
`||i[0]===" ",S,r;r=s.exec(i);){var y=r[1],e=r[2];S=e[0]===" ",f+=y+(!C&&!S&&e!==""?`
`:"")+Pp(e,t),C=S}return f}function Pp(i,t){if(i===""||i[0]===" ")return i;for(var s=/ [^ ]/g,f,C=0,S,r=0,y=0,e="";f=s.exec(i);)y=f.index,y-C>t&&(S=r>C?r:y,e+=`
`+i.slice(C,S),C=S+1),r=y;return e+=`
`,i.length-C>t&&r>C?e+=i.slice(C,r)+`
`+i.slice(r+1):e+=i.slice(C),e.slice(1)}function O7(i){for(var t="",s=0,f,C=0;C<i.length;s>=65536?C+=2:C++)s=hr(i,C),f=le[s],!f&&Tr(s)?(t+=i[C],s>=65536&&(t+=i[C+1])):t+=f||T7(s);return t}function b7(i,t,s){var f="",C=i.tag,S,r,y;for(S=0,r=s.length;S<r;S+=1)y=s[S],i.replacer&&(y=i.replacer.call(s,String(S),y)),(Oi(i,t,y,!1,!1)||typeof y>"u"&&Oi(i,t,null,!1,!1))&&(f!==""&&(f+=","+(i.condenseFlow?"":" ")),f+=i.dump);i.tag=C,i.dump="["+f+"]"}function Ep(i,t,s,f){var C="",S=i.tag,r,y,e;for(r=0,y=s.length;r<y;r+=1)e=s[r],i.replacer&&(e=i.replacer.call(s,String(r),e)),(Oi(i,t+1,e,!0,!0,!1,!0)||typeof e>"u"&&Oi(i,t+1,null,!0,!0,!1,!0))&&((!f||C!=="")&&(C+=Zl(i,t)),i.dump&&xr===i.dump.charCodeAt(0)?C+="-":C+="- ",C+=i.dump);i.tag=S,i.dump=C||"[]"}function F7(i,t,s){var f="",C=i.tag,S=Object.keys(s),r,y,e,u,m;for(r=0,y=S.length;r<y;r+=1)m="",f!==""&&(m+=", "),i.condenseFlow&&(m+='"'),e=S[r],u=s[e],i.replacer&&(u=i.replacer.call(s,e,u)),Oi(i,t,e,!1,!1)&&(i.dump.length>1024&&(m+="? "),m+=i.dump+(i.condenseFlow?'"':"")+":"+(i.condenseFlow?"":" "),Oi(i,t,u,!1,!1)&&(m+=i.dump,f+=m));i.tag=C,i.dump="{"+f+"}"}function L7(i,t,s,f){var C="",S=i.tag,r=Object.keys(s),y,e,u,m,d,l;if(i.sortKeys===!0)r.sort();else if(typeof i.sortKeys=="function")r.sort(i.sortKeys);else if(i.sortKeys)throw new de("sortKeys must be a boolean or a function");for(y=0,e=r.length;y<e;y+=1)l="",(!f||C!=="")&&(l+=Zl(i,t)),u=r[y],m=s[u],i.replacer&&(m=i.replacer.call(s,u,m)),Oi(i,t+1,u,!0,!0,!0)&&(d=i.tag!==null&&i.tag!=="?"||i.dump&&i.dump.length>1024,d&&(i.dump&&xr===i.dump.charCodeAt(0)?l+="?":l+="? "),l+=i.dump,d&&(l+=Zl(i,t)),Oi(i,t+1,m,!0,d)&&(i.dump&&xr===i.dump.charCodeAt(0)?l+=":":l+=": ",l+=i.dump,C+=l));i.tag=S,i.dump=C||"{}"}function Mp(i,t,s){var f,C,S,r,y,e;for(C=s?i.explicitTypes:i.implicitTypes,S=0,r=C.length;S<r;S+=1)if(y=C[S],(y.instanceOf||y.predicate)&&(!y.instanceOf||typeof t=="object"&&t instanceof y.instanceOf)&&(!y.predicate||y.predicate(t))){if(s?y.multi&&y.representName?i.tag=y.representName(t):i.tag=y.tag:i.tag="?",y.represent){if(e=i.styleMap[y.tag]||y.defaultStyle,vy.call(y.represent)==="[object Function]")f=y.represent(t,e);else if(py.call(y.represent,e))f=y.represent[e](t,e);else throw new de("!<"+y.tag+'> tag resolver accepts not "'+e+'" style');i.dump=f}return!0}return!1}function Oi(i,t,s,f,C,S,r){i.tag=null,i.dump=s,Mp(i,s,!1)||Mp(i,s,!0);var y=vy.call(i.dump),e=f,u;f&&(f=i.flowLevel<0||i.flowLevel>t);var m=y==="[object Object]"||y==="[object Array]",d,l;if(m&&(d=i.duplicates.indexOf(s),l=d!==-1),(i.tag!==null&&i.tag!=="?"||l||i.indent!==2&&t>0)&&(C=!1),l&&i.usedDuplicates[d])i.dump="*ref_"+d;else{if(m&&l&&!i.usedDuplicates[d]&&(i.usedDuplicates[d]=!0),y==="[object Object]")f&&Object.keys(i.dump).length!==0?(L7(i,t,i.dump,C),l&&(i.dump="&ref_"+d+i.dump)):(F7(i,t,i.dump),l&&(i.dump="&ref_"+d+" "+i.dump));else if(y==="[object Array]")f&&i.dump.length!==0?(i.noArrayIndent&&!r&&t>0?Ep(i,t-1,i.dump,C):Ep(i,t,i.dump,C),l&&(i.dump="&ref_"+d+i.dump)):(b7(i,t,i.dump),l&&(i.dump="&ref_"+d+" "+i.dump));else if(y==="[object String]")i.tag!=="?"&&R7(i,i.dump,t,S,e);else{if(y==="[object Undefined]")return!1;if(i.skipInvalid)return!1;throw new de("unacceptable kind of an object to dump "+y)}i.tag!==null&&i.tag!=="?"&&(u=encodeURI(i.tag[0]==="!"?i.tag.slice(1):i.tag).replace(/!/g,"%21"),i.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",i.dump=u+" "+i.dump)}return!0}function D7(i,t){var s=[],f=[],C,S;for(Ql(i,s,f),C=0,S=f.length;C<S;C+=1)t.duplicates.push(s[f[C]]);t.usedDuplicates=new Array(S)}function Ql(i,t,s){var f,C,S;if(i!==null&&typeof i=="object")if(C=t.indexOf(i),C!==-1)s.indexOf(C)===-1&&s.push(C);else if(t.push(i),Array.isArray(i))for(C=0,S=i.length;C<S;C+=1)Ql(i[C],t,s);else for(f=Object.keys(i),C=0,S=f.length;C<S;C+=1)Ql(i[f[C]],t,s)}function I7(i,t){t=t||{};var s=new S7(t);s.noRefs||D7(i,s);var f=i;return s.replacer&&(f=s.replacer.call({"":f},"",f)),Oi(s,0,f,!0,!0)?s.dump+`
`:""}var B7=I7,G7={dump:B7};function Yd(i,t){return function(){throw new Error("Function yaml."+i+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var N7=ne,V7=Ux,z7=Wx,U7=Zx,Y7=Jx,k7=Nd,X7=cy.load,W7=cy.loadAll,H7=G7.dump,$7=de,K7={binary:ey,float:jx,map:Xx,null:Hx,pairs:sy,set:ny,timestamp:_x,bool:$x,int:Kx,merge:ty,omap:iy,seq:kx,str:Yx},j7=Yd("safeLoad","load"),Z7=Yd("safeLoadAll","loadAll"),J7=Yd("safeDump","dump"),Q7={Type:N7,Schema:V7,FAILSAFE_SCHEMA:z7,JSON_SCHEMA:U7,CORE_SCHEMA:Y7,DEFAULT_SCHEMA:k7,load:X7,loadAll:W7,dump:H7,YAMLException:$7,types:K7,safeLoad:j7,safeLoadAll:Z7,safeDump:J7},lr=function(i){if(typeof i=="string")try{return Q7.load(i)}catch(t){console.log(t);return}return i},q7=function(i,t){if(i.hasOwnProperty("$type"))return i.$type;if(i.hasOwnProperty("name")){var s=t[`#${i.name}`];if(s&&s.hasOwnProperty("$type"))return s.$type}if(i.hasOwnProperty("$class"))for(var f=i.$class.split(" "),C=0,S=f.length;C<S;C++){var s=t[`.${f[C]}`];if(s&&s.hasOwnProperty("$type"))return s.$type}},Ua=function(i,t){if(t===void 0)return i;for(var s in t)if(!i.hasOwnProperty(s))i[s]=fe(t[s]);else{var f=i[s];f&&typeof f=="object"&&Ua(f,t[s])}return i},It=function(i,t){if(t===void 0)return i;if(i.hasOwnProperty("name")&&Ua(i,t[`#${i.name}`]),i.hasOwnProperty("$class"))for(var s=i.$class.split(" "),f=0,C=s.length;f<C;f++)Ua(i,t[`.${s[f]}`]);return i.hasOwnProperty("$type")&&Ua(i,t[i.$type]),i};const wp=["tint","alpha","visible","flipX","flipY"];var Us=function(i,t){for(var s=0,f=wp.length;s<f;s++){var C=wp[s],S=t[C];S!==void 0&&(i[C]=S)}return t.cropResize&&!i.resize&&(i.resize=function(r,y){return i.setCrop(0,0,r,y),i}),i},My=function(i,t,s,f,C,S){t=It(t,f);var r=new S(i,0,0,t.key,t.frame);return t.width!==void 0&&r.setDisplayWidth(t.width),t.height!==void 0&&r.setDisplayHeight(t.height),Us(r,t),i.add.existing(r),r};const _7=Phaser.GameObjects.Image;var tG=function(i,t,s,f,C){return My(i,t,s,f,C,_7)};const eG=Phaser.GameObjects.Sprite;var iG=function(i,t,s,f,C){return My(i,t,s,f,C,eG)};const sG=Phaser.GameObjects.Video;var nG=function(i,t,s,f,C){t=It(t,f);var S=new sG(i,0,0,t.key);return t.width!==void 0&&S.setDisplayWidth(t.width),t.height!==void 0&&S.setDisplayHeight(t.height),Us(S,t),i.add.existing(S),S};const rG=Phaser.GameObjects.Text;var aG=function(i,t,s,f,C){t=It(t,f);var S=new rG(i,0,0,t.text,t);return Us(S,t),i.add.existing(S),S},oG=function(i,t,s,f,C){t=It(t,f);var S=new ro(i,0,0,t.text,t);return Us(S,t),i.add.existing(S),S},hG=function(i,t,s,f,C){t=It(t,f);var S=new bi(i,t);return i.add.existing(S),S},lG=function(i,t,s,f,C){t=It(t,f);var S=new _a(i,t);return Us(S,t),i.add.existing(S),S},uG=function(i,t,s,f,C){t=It(t,f);var S=new eo(i,t);return i.add.existing(S),S},dG=function(i,t,s,f,C){t=It(t,f);var S=t.width||1,r=t.height||1,y=new Gs(i,0,0,S,r);return t.fill!==void 0&&y.fill(t.fill),Us(y,t),i.add.existing(y),y},fG=function(i,t,s,f,C){t=It(t,f);var S=new wu(i,0,0,t.key,t.frame,t);return t.width!==void 0&&S.setDisplayWidth(t.width),t.height!==void 0&&S.setDisplayHeight(t.height),Us(S,t),i.add.existing(S),S},cG=function(i,t,s,f,C){var S=new Fo(i);return S},dt=function(i,t,s,f,C,S){var r=t[s];if(r){var y;return y=bn(i,r,f,C,S),t[s]=y,y}},Rp=function(i,t,s,f,C){if(t){Array.isArray(t)||(t=[t]);for(var S=0,r=t.length;S<r;S++){var y=t[S];y.$child||(y={$child:y},t[S]=y),dt(i,y,"$child",s,f,C)}}return t},Yr=function(i,t,s,f,C,S){t=It(t,f);var r=Rp(i,t.background,s,f,C),y=Rp(i,t.children,s,f,C),e=new S(i,t);if(i.add.existing(e),r)for(var u=0,m=r.length;u<m;u++){var d=r[u];e.addBackground(d.$child,d.padding)}if(y)for(var u=0,m=y.length;u<m;u++){var d=y[u];e.add(d.$child,d)}return e},vG=function(i,t,s,f,C){return Yr(i,t,s,f,C,yt)},pG=function(i,t,s,f,C){return Yr(i,t,s,f,C,os)},gG=function(i,t,s,f,C){var S=t.createCellContainerCallback;if(S){var r=S.$child;delete S.$child,t.createCellContainerCallback=function(y,e,u,m){var d=bn(y,r,s,f,C);for(var l in S)m[l]=S[l];return d}}return Yr(i,t,s,f,C,Ii)},mG=function(i,t,s,f,C){return Yr(i,t,s,f,C,be)},Zi=function(i,t,s,f,C,S){var r=t[s];if(r){if(Array.isArray(r))for(var y=0,e=r.length;y<e;y++)Array.isArray(r[y])?Zi(i,r,y,f,C,S):dt(i,r,y,f,C,S);else for(var u in r)dt(i,r,u,f,C,S);return r}},xG=function(i,t,s,f,C){t=It(t,f),dt(i,t,"background",s,f,C),Zi(i,t,"buttons",s,f,C);var S=new qt(i,t);return i.add.existing(S),S},yG=function(i,t,s,f,C){t=It(t,f),dt(i,t,"background",s,f,C),Zi(i,t,"buttons",s,f,C);var S=new ts(i,t);return i.add.existing(S),S},TG=function(i,t,s,f,C){t=It(t,f),dt(i,t,"background",s,f,C);var S=t.buttons;if(S)for(var r=0,y=S.length;r<y;r++)Zi(i,S,r,s,f,C);var e=t.createCellContainerCallback;if(e){var u=e.$child;delete e.$child,t.createCellContainerCallback=function(d,l,h,n){var a=bn(d,u,s,f,C);for(var c in e)n[c]=e[c];return a}}var m=new Ir(i,t);return i.add.existing(m),m},kd=function(i,t,s,f,C,S){t=It(t,f),dt(i,t,"background",s,f,C),dt(i,t,"icon",s,f,C),dt(i,t,"text",s,f,C),dt(i,t,"action",s,f,C);var r=new S(i,t);return i.add.existing(r),r},CG=function(i,t,s,f,C){return kd(i,t,s,f,C,gi)},SG=function(i,t,s,f,C){t=It(t,f),dt(i,t,"background",s,f,C),dt(i,t,"main",s,f,C),dt(i,t,"leftTop",s,f,C),dt(i,t,"centerTop",s,f,C),dt(i,t,"rightTop",s,f,C),dt(i,t,"leftCenter",s,f,C),dt(i,t,"center",s,f,C),dt(i,t,"rightCenter",s,f,C),dt(i,t,"leftBottom",s,f,C),dt(i,t,"centerBottom",s,f,C),dt(i,t,"rightBottom",s,f,C);var S=new wd(i,t);return i.add.existing(S),S},PG=function(i,t,s,f,C){t=It(t,f),dt(i,t,"background",s,f,C),dt(i,t,"toolbarBackground",s,f,C),dt(i,t,"leftToolbarBackground",s,f,C),dt(i,t,"choicesBackground",s,f,C),dt(i,t,"actionsBackground",s,f,C),dt(i,t,"title",s,f,C),Zi(i,t,"toolbar",s,f,C),Zi(i,t,"leftToolbar",s,f,C),dt(i,t,"content",s,f,C),dt(i,t,"description",s,f,C),Zi(i,t,"choices",s,f,C),Zi(i,t,"actions",s,f,C);var S=new Br(i,t);return i.add.existing(S),S},EG=function(i,t,s,f,C){return kd(i,t,s,f,C,Ed)},MG=function(i,t,s,f,C){t=It(t,f),dt(i,t,"background",s,f,C),dt(i,t,"track",s,f,C),dt(i,t,"indicator",s,f,C),dt(i,t,"thumb",s,f,C);var S=new zs(i,t);return i.add.existing(S),S},Xd=function(i,t,s,f,C){return t&&(dt(i,t,"background",s,f,C),dt(i,t,"track",s,f,C),dt(i,t,"indicator",s,f,C),dt(i,t,"thumb",s,f,C)),t},wG=function(i,t,s,f,C){t=It(t,f),dt(i,t,"background",s,f,C),dt(i,t,"icon",s,f,C),Xd(i,t.slider,s,f,C),dt(i,t,"text",s,f,C);var S=new Md(i,t);return i.add.existing(S),S},RG=function(i,t,s,f,C){t=It(t,f),dt(i,t,"background",s,f,C),Xd(i,t.slider,s,f,C);var S=t.buttons;S&&(dt(i,S,"top",s,f,C),dt(i,S,"bottom",s,f,C),dt(i,S,"left",s,f,C),dt(i,S,"right",s,f,C));var r=new Go(i,t);return i.add.existing(r),r},AG=function(i,t,s,f,C){t=It(t,f),dt(i,t,"background",s,f,C),dt(i,t,"text",s,f,C),Xd(i,t.slider,s,f,C),dt(i,t,"header",s,f,C),dt(i,t,"footer",s,f,C);var S=new Gn(i,t);return i.add.existing(S),S},OG=function(i,t,s,f,C){return Yr(i,t,s,f,C,zr)},bG=function(i,t,s,f,C){return kd(i,t,s,f,C,Ad)},FG=function(i,t,s,f,C){t=It(t,f),dt(i,t,"background",s,f,C),dt(i,t,"text",s,f,C);var S=new Ro(i,t);return i.add.existing(S),S},LG=function(i,t,s,f,C){t=It(t,f),dt(i,t,"background",s,f,C),dt(i,t,"content",s,f,C),dt(i,t,"leftSide",s,f,C),dt(i,t,"rightSide",s,f,C),dt(i,t,"header",s,f,C),dt(i,t,"footer",s,f,C);var S=new Xo(i,t);return i.add.existing(S),S},DG=function(i,t,s,f,C){t=It(t,f);var S=t.background;delete t.background,S&&(t.createBackgroundCallback=function(y){var e=y.scene,u=bn(e,fe(S),s,f,C);return u}),t.createButtonCallback=function(y,e,u){var m=y.scene,d=y.$next;delete y.scene,delete y.$next;var l=bn(m,fe(y),s,f,C);return y.scene=m,y.$next=d,l},t.childrenKey="$next";var r=new Wo(i,t);return i.add.existing(r),r},IG={Image:tG,Sprite:iG,Video:nG,Text:aG,BBCodeText:oG,RoundRectangle:hG,Ninepatch:lG,Ninepatch2:uG,Canvas:dG,CircleMaskImage:fG,Space:cG,Sizer:vG,FixWidthSizer:pG,GridSizer:gG,OverlapSizer:mG,Buttons:xG,FixWidthButtons:yG,GridButtons:TG,Label:CG,BadgeLabel:SG,Dialog:PG,TextBox:EG,Slider:MG,NumberBar:wG,ScrollBar:RG,TextArea:AG,Pages:OG,Toast:bG,Knob:FG,HolyGrail:LG,Menu:DG},bn=function(i,t,s,f,C){var S=q7(t,f);if(!S){console.warn(`rexUI.Make: Can't get type name in ${JSON.stringify(t)}`);return}var r;if(C&&(r=C[S]),r||(r=IG[S]),!r){console.warn(`rexUI.Make: Can't create ${S} game object.`);return}var y=r(i,t,s,f,C);return t.name&&y.setName(t.name),y},BG=function(i,t,s,f,C){if(t=lr(t),Array.isArray(t))t=t[t.length-1];else if(t.$root){var S=t;if(t=t.$root,delete S.$root,f===void 0)f=S;else for(var r in S)f[r]||(f[r]=S[r])}f=lr(f);var y=bn(i,t,s,f,C);return y};const Ap=Phaser.Utils.Objects.IsPlainObject;class wy{constructor(t,s,f){this.setScene(t),this.setStyles(s),this.setBuilders(f)}setScene(t){return this.scene=t,this}setStyles(t){return this.styles=lr(t),this}addStyle(t,s){if(this.styles===void 0&&(this.styles={}),typeof t=="string"&&s===void 0&&(t=lr(t)),Ap(t)){var f=t;for(t in f)this.styles[t]=f[t]}else this.styles[t]=lr(s);return this}clearStyles(){return this.setStyles(),this}setBuilders(t){return this.customBuilders=t,this}addBuilder(t,s){if(this.customBuilders===void 0&&(this.customBuilders={}),Ap(t)){var f=t;for(t in f)this.customBuilders[t]=f[t]}else this.customBuilders[t]=s;return this}clearBuilder(){return this.setBuilders(),this}make(t,s){return BG(this.scene,t,s,this.styles,this.customBuilders)}}st.register("maker",function(i,t){return new wy(this.scene,i,t)});it(window,"RexPlugins.UI.Maker",wy);st.register("click",function(i,t){return new rs(i,t)});it(window,"RexPlugins.UI.Click",rs);st.register("clickOutside",function(i,t){return new _u(i,t)});it(window,"RexPlugins.UI.ClickOutside",_u);st.register("inTouching",function(i,t){return new An(i,t)});it(window,"RexPlugins.UI.InTouching",An);st.register("tap",function(i,t){return as(i)||(t=i,i=this.scene),new Po(i,t)});it(window,"RexPlugins.UI.Tap",Po);st.register("press",function(i,t){return as(i)||(t=i,i=this.scene),new Eo(i,t)});it(window,"RexPlugins.UI.Press",Eo);st.register("swipe",function(i,t){return as(i)||(t=i,i=this.scene),new Dr(i,t)});it(window,"RexPlugins.UI.Swipe",Dr);st.register("pan",function(i,t){return as(i)||(t=i,i=this.scene),new fm(i,t)});it(window,"RexPlugins.UI.Pan",fm);var Ry=function(i){for(var t=i.scene.input,s=t.manager,f=s.pointersTotal,C=s.pointers,S,r=0;r<f;r++)if(S=C[r],!(!S.primaryDown||t.getDragState(S)!==0||!yu(i,S)))return t.setDragState(S,1),t._drag[S.id]=[i],t.dragDistanceThreshold===0||t.dragTimeThreshold===0?(t.setDragState(S,3),t.processDragStartList(S)):t.setDragState(S,2),!0;return!1};const Oa=Phaser.Utils.Objects.GetValue,Op=Phaser.Math.Distance.Between,bp=Phaser.Math.RotateAroundDistance;class Ay extends _t{constructor(t,s){super(t,{eventEmitter:!1}),this._enable=void 0,t.setInteractive(Oa(s,"inputConfig",void 0)),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.setEnable(Oa(t,"enable",!0)),this.setAxisMode(Oa(t,"axis",0)),this.setAxisRotation(Oa(t,"rotation",0)),this}toJSON(){return{enable:this.enable,axis:this.axisMode,rotation:this.axisRotation}}boot(){var t=this.parent;t.on("dragstart",this.onDragStart,this),t.on("drag",this.onDrag,this),t.on("dragend",this.onDragEnd,this)}shutdown(t){this.isShutdown||(this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragend(),this._enable=t,this.scene.input.setDraggable(this.parent,t),this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setAxisMode(t){return typeof t=="string"&&(t=GG[t]),this.axisMode=t,this}setAxisRotation(t){return this.axisRotation=t,this}drag(){return Ry(this.parent),this}dragend(){if(this.isDragging)return this.scene.input.setDragState(this.pointer,5),this}onDragStart(t,s,f){this.isDragging||(this.pointer=t)}onDrag(t,s,f){if(this.pointer===t){var C=this.parent;if(this.axisMode===0)C.x=s,C.y=f;else if(this.axisRotation===0)this.axisMode===1?C.x=s:this.axisMode===2&&(C.y=f);else{var S,r={x:s,y:f};S=Op(r.x,r.y,C.x,C.y),r=bp(r,C.x,C.y,-this.axisRotation,S),this.axisMode===1?r.y=C.y:this.axisMode===2&&(r.x=C.x),S=Op(r.x,r.y,C.x,C.y),r=bp(r,C.x,C.y,this.axisRotation,S),C.x=r.x,C.y=r.y}}}onDragEnd(t,s,f,C){this.pointer===t&&(this.pointer=void 0)}get isDragging(){return this.pointer!==void 0}}const GG={both:0,"h&v":0,"x&y":0,horizontal:1,h:1,x:1,vertical:2,v:2,y:2};st.register("drag",function(i,t){return new Ay(i,t)});it(window,"RexPlugins.UI.Drag",Ay);st.register("pinch",function(i){return new cm(this.scene,i)});it(window,"RexPlugins.UI.Pinch",cm);st.register("rotate",function(i){return new ed(this.scene,i)});it(window,"RexPlugins.UI.Rotate",ed);const NG=Phaser.Utils.Objects.IsPlainObject,Fp=Phaser.Utils.Objects.GetValue;var Lp=function(i,t,s){var f;if(i===void 0)i=s.texture.key,t=s.frame.name;else if(NG(i)){var C=i;i=Fp(C,"key",s.texture.key),t=Fp(C,"frame",s.frame.name)}else typeof i=="string"||(f=i);return f===void 0&&(f=function(S){S.setTexture(i,t)}),f};const or=Phaser.Utils.Objects.GetValue,VG=Phaser.Utils.Objects.GetAdvancedValue,zG=Phaser.Math.Linear;class Oy extends Ds{constructor(t,s){super(t,s),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setDuration(VG(t,"duration",500)),this.setEase(or(t,"ease","Sine")),this.setOrientation(or(t,"orientation",0)),this.setFrontFace(or(t,"front",void 0)),this.setBackFace(or(t,"back",void 0)),this.setFace(or(t,"face",0)),this}setOrientation(t){return typeof t=="string"&&(t=UG[t]),this.orientation=t,this}get face(){return this._face}set face(t){typeof t=="string"&&(t=YG[t]),this._face=t,t===0&&this.frontFaceCallback?this.frontFaceCallback(this.parent):t===1&&this.backFaceCallback&&this.backFaceCallback(this.parent)}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}setFrontFace(t,s){return this.frontFaceCallback=Lp(t,s,this.parent),this}setBackFace(t,s){return this.backFaceCallback=Lp(t,s,this.parent),this}start(){if(this.timer.isRunning)return this;var t=this.parent;return this.orientation===0?this.scale0=t.scaleX:this.scale0=t.scaleY,this.timer.setDelay(this.delay).setDuration(this.duration/2).setRepeat(1),super.start(),this}flip(t){return this.isRunning?this:(t!==void 0&&this.setDuration(t),this.start(),this)}updateGameObject(t,s){s.justRestart&&this.toggleFace();var f=s.t;s.isOddIteration&&(f=1-f),f=this.easeFn(f);var C=zG(this.scale0,0,f);this.orientation===0?t.scaleX=C:t.scaleY=C}}const UG={x:0,horizontal:0,y:1,vertical:1},YG={front:0,back:1};st.register("flip",function(i,t){return new Oy(i,t)});it(window,"RexPlugins.UI.Flip",Oy);st.register("shake",function(i,t){return new Ku(i,t)});it(window,"RexPlugins.UI.Shake",Ku);st.register("touchEventStop",function(i,t){return new To(i,t)});it(window,"RexPlugins.UI.TouchEventStop",To);st.register("perspective",function(i,t){return new mx(i,t)});it(window,"RexPlugins.UI.Perspective",mx);const by=Phaser.Math.RotateAround;var Pl=function(i,t,s){var f=i.width/2,C=i.height/2;return oe.x=t-f,oe.y=s-C,by(oe,0,0,i.rotation),oe.x*=i.scaleX,oe.y*=i.scaleY,oe.x+=i.x,oe.y+=i.y,oe},kG=function(i,t,s){var f=i.width/2,C=i.height/2;return oe.x=t-i.x,oe.y=s-i.y,oe.x/=i.scaleX,oe.y/=i.scaleY,by(oe,0,0,-i.rotation),oe.x+=f,oe.y+=C,oe},oe={x:0,y:0};class XG{constructor(t,s){this.parent=t,this.vertex=s,this._localX=void 0,this._localY=void 0}destroy(){this.parent=void 0,this.vertex=void 0}updateVertexPosition(t,s){var f=this.parent,C=f.height,S=f.frame.cutWidth/C/2,r=f.frame.cutHeight/C/2,y=t/C-S,e=s/C-r,u=this.vertex;return u.x=y,u.y=-e,f.forceUpdate(),this}get localX(){return this._localX}set localX(t){this.setLocalXY(t,this._localY)}get localY(){return this._localY}set localY(t){this.setLocalXY(this._localX,t)}get localXOrigin(){return this._localXOrigin}get localYOrigin(){return this._localYOrigin}resetLocalXY(t,s){return this._localXOrigin=t,this._localYOrigin=s,this._localX=t,this._localY=s,this}setLocalXY(t,s,f){return this._localX===t&&this._localY===s?this:(this._localX=t,this._localY=s,f||this.updateVertexPosition(t,s),this)}setWorldXY(t,s){if(this._worldX===t&&this._worldY===s)return this;var f=kG(this.parent,t,s);return this.setLocalXY(f.x,f.y),this}setPosition(t,s){return this.setWorldXY(t,s),this}getWorldXY(){return Pl(this.parent,this._localX,this._localY)}get x(){var t=Pl(this.parent,this._localX,this._localY);return t.x}set x(t){this.setWorldXY(t,this.y)}get y(){var t=Pl(this.parent,this._localX,this._localY);return t.y}set y(t){this.setWorldXY(this.x,t)}}const WG=Phaser.Geom.Mesh.Vertex,HG=Phaser.Geom.Mesh.Face;var $G=function(i){for(var t=i.isNinePointMode,s=t?9:4,f=i.vertices,C=i.faces,S=i.controlPoints,r=0;r<s;r++){var y=new WG;f.push(y),S.push(new XG(i,y))}var e;t?e=ZG:i.fourPointsModeRTL?e=jG:e=KG;for(var r=0,u=e.length;r<u;r+=3){var m=f[e[r+0]],d=f[e[r+1]],l=f[e[r+2]];C.push(new HG(m,d,l))}t?(i.topLeft=S[0],i.topCenter=S[1],i.topRight=S[2],i.centerLeft=S[3],i.center=S[4],i.centerRight=S[5],i.bottomLeft=S[6],i.bottomCenter=S[7],i.bottomRight=S[8]):(i.topLeft=S[0],i.topRight=S[1],i.bottomLeft=S[2],i.bottomRight=S[3])};const KG=[0,2,3,0,3,1],jG=[1,3,2,1,2,0],ZG=[0,3,4,0,4,1,1,4,2,4,5,2,3,6,4,6,7,4,4,7,8,4,8,5];var JG=function(i){var t,s=0,f=i.height,C=0,S=i.width;if(i.isNinePointMode){var r=(C+S)/2,y=(s+f)/2;t=[C,s,r,s,S,s,C,y,r,y,S,y,C,f,r,f,S,f]}else t=[C,s,S,s,C,f,S,f];return t};const QG=Phaser.GameObjects.Mesh,qG=Phaser.Utils.Objects.IsPlainObject,cn=Phaser.Utils.Objects.GetValue;let _G=class extends QG{constructor(t,s,f,C,S,r){qG(s)&&(r=s,s=cn(r,"x",0),f=cn(r,"y",0),C=cn(r,"key",null),S=cn(r,"frame",null)),super(t,s,f,C,S),this.type="rexQuadImage",this.isNinePointMode=cn(r,"ninePointMode",!1),this.fourPointsModeRTL=cn(r,"rtl",!1),this.controlPoints=[],$G(this),this.hideCCW=!1,this.syncSize()}preDestroy(){for(var t=0,s=this.controlPoints.length;t<s;t++)this.controlPoints[t].destroy();this.controlPoints=void 0,super.preDestroy()}resetVerts(){this.dirtyCache[9]=-1;for(var t=JG(this),s=this.width,f=this.height,C=this.frame.cutWidth/f/2,S=this.frame.cutHeight/f/2,r=this.frame.u0,y=this.frame.u1,e=this.frame.v0,u=this.frame.v1,m=y-r,d=u-e,l=this.controlPoints,h=0,n=t.length;h<n;h+=2){var a=t[h+0],c=t[h+1],o=h/2,v=a/f-C,g=c/f-S,p=r+m*(a/s),x=e+d*(c/f);this.vertices[o].set(v,-g,0).setUVs(p,x),l[o].resetLocalXY(a,c)}return this}syncSize(){return this.setSizeToFrame(),this.setOrtho(this.width/this.height,1),this.resetVerts(),this}forceUpdate(){return this.dirtyCache[10]=1,this}get tint(){return this.vertices.length===0?16777215:this.vertices[0].color}set tint(t){for(var s=this.vertices,f=0,C=s.length;f<C;f++)s[f].color=t}setTint(t){return this.tint=t,this}};Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;var Dp=function(i,t,s){t===void 0&&(t=0),s===void 0&&(s=0);for(var f=i.width,C=i.height,S=f*.5,r=C*.5,y=Math.tan(t)*r,e=Math.tan(s)*S,u=i.controlPoints,m=0,d=u.length;m<d;m++){var l=u[m],h=l.localXOrigin,n=l.localYOrigin;l.localX=h+(n>r?y:-y),l.localY=n+(h>S?e:-e)}};const tN=Phaser.Utils.Objects.IsPlainObject,ba=Phaser.Utils.Objects.GetValue,Ip=Phaser.Math.DegToRad,Bp=Phaser.Math.RadToDeg;class eN extends _G{constructor(t,s,f,C,S){if(tN(s)){var r=s;s=ba(r,"x",0),f=ba(r,"y",0),C=ba(r,"key",null),S=ba(r,"frame",null)}super(t,s,f,C,S),this.type="rexSkewmage",this._skewX=0,this._skewY=0}get skewX(){return this._skewX}set skewX(t){this._skewX=t,Dp(this,this._skewX,this._skewY)}get skewXDeg(){return Bp(this._skewX)}set skewXDeg(t){this.skewX=Ip(t)}get skewY(){return this._skewY}set skewY(t){this._skewY=t,Dp(this,this._skewX,this._skewY)}get skewYDeg(){return Bp(this._skewY)}set skewYDeg(t){this.skewY=Ip(t)}setSkewX(t){return this.skewX=t,this}setSkewY(t){return this.skewY=t,this}setSkew(t,s){return s===void 0&&(s=t),this.skewX=t,this.skewY=s,this}setSkewXDeg(t){return this.skewXDeg=t,this}setSkewYDeg(t){return this.skewYDeg=t,this}setSkewDeg(t,s){return s===void 0&&(s=t),this.skewXDeg=t,this.skewYDeg=s,this}}const iN=Phaser.Utils.Objects.IsPlainObject,Fa=Phaser.Utils.Objects.GetValue;class sN extends eN{constructor(t,s,f,C,S){if(iN(s)){var r=s;s=Fa(r,"x",0),f=Fa(r,"y",0),C=Fa(r,"width",32),S=Fa(r,"height",32)}var y=cx(t,C,S);super(t,s,f,y,null),this.type="rexSkewRenderTexture",this.rt=this.texture}destroy(t){super.destroy(t),this.rt.destroy(),this.rt=null}}class Fy extends gx(sN){get skewState(){return this.isRunning}}st.register("skew",function(i,t){return new Fy(i,t)});it(window,"RexPlugins.UI.Skew",Fy);st.register("anchor",function(i,t){return new Wu(i,t)});it(window,"RexPlugins.UI.Anchor",Wu);st.register("textTyping",function(i,t){return new Pd(i,t)});it(window,"RexPlugins.UI.TextTyping",Pd);st.register("textPage",function(i,t){return new Ho(i,t)});it(window,"RexPlugins.UI.TextPage",Ho);var yn=void 0,nN=function(i){i!==yn&&(yn!==void 0&&yn.close(),yn=i)},rN=function(i){i===yn&&(yn=void 0)};const Pi=Phaser.Utils.Objects.GetValue,aN=Phaser.Utils.Objects.Clone;var oN=function(i,t){t===void 0&&(t={}),t=aN(t);var s=i.scene,f=i.style,C=Pi(t,"backgroundColor",f.backgroundColor);C===null&&(C="transparent"),t.text=Pi(t,"text",i.text),t.fontFamily=Pi(t,"fontFamily",f.fontFamily),t.fontSize=Pi(t,"fontSize",f.fontSize),t.color=Pi(t,"color",f.color),t.backgroundColor=C,t.direction=Pi(t,"rtl",f.rtl)?"rtl":"ltr",t.align=Pi(t,"align",hN(f)),t.direction==="rtl"&&ud(i)&&(t.align="right");var S=new Oo(s,i.x,i.y,Pi(t,"width",i.width),Pi(t,"height",i.height),t);S.setOrigin(i.originX,i.originY).setScrollFactor(i.scrollFactorX,i.scrollFactorY);var r=i.parentContainer;return r?r.add(S):s.add.existing(S),S},hN=function(i){return i.hasOwnProperty("align")?i.align:i.hasOwnProperty("halign")?i.halign:"left"};const La=Phaser.Utils.Objects.GetValue,lN=Phaser.Utils.Objects.Merge;var uN=function(i,t){i===void 0&&(i={}),i=lN(i,this.openConfig),nN(this),_i(i)&&(t=i,i=void 0),t===void 0&&(t=La(i,"onClose",void 0));var s=La(i,"onOpen",void 0),f=La(i,"onTextChanged",void 0);return this.inputText=oN(this.parent,i).on("textchange",function(C){var S=C.text;f?f(this.parent,S):this.parent.text=S},this).setFocus(),this.parent.setVisible(!1),this.onClose=t,La(i,"enterClose",!0)&&this.scene.input.keyboard.once("keydown-ENTER",this.close,this),this.delayCall=this.scene.time.delayedCall(0,function(){this.scene.input.once("pointerdown",this.close,this),s&&s(this.parent),this.emit("open",this.parent)},[],this),this},dN=function(){return rN(this),this.parent.setVisible(!0),this.inputText&&(this.inputText.destroy(),this.inputText=void 0),this.delayCall&&(this.delayCall.remove(),this.delayCall=void 0),this.scene.input.keyboard.off("keydown-ENTER",this.close,this),this.scene.input.off("pointerdown",this.close,this),this.onClose&&this.onClose(this.parent),this.emit("close",this.parent),this},fN={open:uN,close:dN};const cN=Phaser.Utils.Objects.GetValue;class Jo extends _t{constructor(t,s){super(t),this.inputText=void 0,this.onClose=void 0,this.delayCall=void 0,this.setOpenConfig(s);var f=cN(s,"clickEnable",!0);f&&t.on("pointerdown",function(){this.open()},this).setInteractive()}shutdown(t){this.isShutdown||(this.close(),super.shutdown(t))}setOpenConfig(t){return t===void 0&&(t={}),this.openConfig=t,this}get isOpened(){return this.inputText!==void 0}get text(){return this.isOpened?this.inputText.text:this.parent.text}}Object.assign(Jo.prototype,fN);var vN=function(i,t,s){return i._edit||(i._edit=new Jo(i,{clickEnable:!1})),i._edit.open(t,s),i._edit};st.register("textEdit",function(i,t){return new Jo(i,t)});it(window,"RexPlugins.UI.TextEdit",Jo);const El=65535;var ql=function(i,t,s){if(t==null)return i;if(t===0)return Ml(i,0,s),i;var f=i.text.length;if(f===0)return Ml(i,t,s),i;for(var C=Math.floor(t*1.5/f),S={},r=Np(i,C,t,s,S),y=0;y<=El&&r!==0;y++){if(C+=r,C<0){C=0;break}r=Np(i,C,t,s,S)}return y===El&&console.warn(`SetFontSizeToFitWidth: Test count exceeds ${El}`),i.setFontSize(C),Ml(i,t,s),i},Gp=function(i,t,s){return s[t]===void 0&&(i.setFontSize(t),s[t]={width:i.width,height:i.height}),s[t]},Np=function(i,t,s,f,C){var S=Gp(i,t,C),r=Gp(i,t+1,C);if(f!==void 0){if(S.height<=f&&r.height>f)return 0;if(S.height>f)return-1}return S.width<=s&&r.width>s?0:S.width>s?-1:Math.floor(s-S.width)},Ml=function(i,t,s){var f=i.style;f.fixedWidth=t,f.parent.width=t,s!==void 0&&(f.fixedHeight=s,f.parent.height=s),f.update(!1)},pN=function(i,t){return t===void 0&&(t=0),i._minWidth=t,i.runWidthWrap=function(s,f){return ql(i,s,f),i},i.resize=function(s,f){return i.width===s&&i.height===f||i.setFixedSize(s,f),i},i};class Ly extends Phaser.Plugins.ScenePlugin{constructor(t,s){super(t,s),this.add=new st(t)}start(){var t=this.scene.events;t.on("destroy",this.destroy,this)}isInTouching(t,s,f,C){return t.visible?Co(t,s,f,C):!1}get viewport(){return Dn(this.scene,this.scene.cameras.main,!0)}}var gN={getParentSizer:Ue,getTopmostSizer:J0,hide:Ki,show:$i,isShown:ju,edit:vN,wrapExpandText:zm,fontSizeExpandText:pN,fontSizeResize:ql,setFontSizeToFitWidth:ql,waitEvent:uo,waitComplete:se,delayPromise:Em,setChildrenInteractive:id,fadeIn:mo,fadeOutDestroy:xo,easeMoveTo:nm,easeMoveFrom:rm,modal:Qu,modalPromise:pb,modalClose:lm,requestDrag:Ry,openFileChooser:SL};Object.assign(Ly.prototype,gN);class mN extends lt.Scene{constructor(){super("BootScene")}async preload(){}create(){this.scene.start("PreloadScene")}}class xN extends lt.Scene{rexUI;constructor(){super("PreloadScene")}preload(){const t=this.scale.width,s=this.scale.height,f=this.rexUI.add.sizer({x:t/2,y:s/2,width:420,height:28,orientation:0}),C=this.add.rectangle(0,0,420,24,2236962).setOrigin(.5),S=this.add.rectangle(-208,0,0,16,2148759).setOrigin(0,.5);f.add(C,0,"center",0,!0),f.add(S,0,"center",{left:2,right:2},!1),f.layout(),this.load.on("progress",y=>{S.width=412*y,f.layout()}),this.load.on("complete",()=>{f.destroy(),["weapon_laser","weapon_cannon","weapon_missile","weapon_railgun","weapon_plasma","weapon_flak"].forEach(e=>{try{this.textures.exists(e)&&this.textures.get(e).setFilter(lt.Textures.FilterMode.LINEAR)}catch(u){console.warn(`Не удалось установить фильтр для ${e}:`,u)}}),this.waitForFontsAndStart()});const r=[new FontFace("Request","url(/fonts/Request\\ Regular.ttf)").load(),new FontFace("HooskaiChamferedSquare","url(/fonts/HooskaiChamferedSquare.ttf)").load()];Promise.all(r).then(y=>{y.forEach(e=>{document.fonts.add(e),console.log(`Loaded font: ${e.family}`)})}).catch(y=>{console.warn("Failed to preload fonts:",y)});try{const y=new URL("/assets/alpha_image-C86CfvlY.png",import.meta.url).href;this.load.image("ship_alpha",y)}catch{}this.load.image("ship_alpha_public","/assets/ships/alpha/alpha_image.png"),this.load.image("ship_ordo_patrol_gunship","/assets/ships/ordo_patrol_gunship.png"),this.load.image("ship_explorer","/assets/ships/alpha/explorer_ship.jpg"),this.load.image("ship_trader","/assets/ships/alpha/trader_ship.jpg"),this.load.image("bg_nebula_blue","/assets/Nebula_Blue.png"),this.load.image("bg_stars1","/assets/Stars-Big_1_1_PC.png"),this.load.image("weapon_laser","/assets/weapons/laser_cannon.png"),this.load.image("weapon_cannon","/assets/weapons/heavy_laser_cannon.png"),this.load.image("weapon_missile","/assets/weapons/imperial_photon_cannon.png"),this.load.image("weapon_railgun","/assets/weapons/basic_railgin.png"),this.load.image("weapon_plasma","/assets/weapons/ion_cannon.png"),this.load.image("weapon_flak","/assets/weapons/impulse_charger.png");for(let y=0;y<=9;y++){const e=y.toString().padStart(2,"0");this.load.image(`planet_${e}`,`/assets/planet${e}.png`)}}async waitForFontsAndStart(){console.log("Waiting for fonts to load...");const t=s=>{const C=document.createElement("canvas").getContext("2d");if(!C)return!1;C.font=`16px ${s}`;const S=C.measureText("test").width;C.font="16px Arial";const r=C.measureText("test").width;return S!==r};try{await document.fonts.ready,console.log("Fonts ready event fired");const s=t("Request"),f=t("HooskaiChamferedSquare");console.log("Font status:",{Request:s,HooskaiChamferedSquare:f}),(!s||!f)&&(console.log("Fonts not ready, waiting additional 500ms..."),await new Promise(C=>setTimeout(C,500)))}catch(s){console.warn("Font loading error:",s),await new Promise(f=>setTimeout(f,1e3))}console.log("Starting game scenes..."),this.scene.start("StarSystemScene"),this.scene.launch("UIScene")}create(){}}const yN="modulepreload",TN=function(i){return"/"+i},Vp={},Da=function(t,s,f){let C=Promise.resolve();if(s&&s.length>0){let e=function(u){return Promise.all(u.map(m=>Promise.resolve(m).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),y=r?.nonce||r?.getAttribute("nonce");C=e(s.map(u=>{if(u=TN(u),u in Vp)return;Vp[u]=!0;const m=u.endsWith(".css"),d=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const l=document.createElement("link");if(l.rel=m?"stylesheet":yN,m||(l.as="script"),l.crossOrigin="",l.href=u,y&&l.setAttribute("nonce",y),document.head.appendChild(l),m)return new Promise((h,n)=>{l.addEventListener("load",h),l.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${u}`)))})}))}function S(r){const y=new Event("vite:preloadError",{cancelable:!0});if(y.payload=r,window.dispatchEvent(y),!y.defaultPrevented)throw r}return C.then(r=>{for(const y of r||[])y.status==="rejected"&&S(y.reason);return t().catch(S)})};class CN{scene;settings;gameplay;system;assets;items;keybinds;modules;persistence;ships;weapons;aiProfiles;player;stardwellers;systemsIndex;systemProfiles;factions;combatAI;constructor(t){this.scene=t}async loadAll(){const t=async g=>{for(const p of g)try{const x=await fetch(p);if(x.ok)return await x.json()}catch{}return{}},[s,f,C,S,r,y,e,u,m,d,l,h,n,a,c,o,v]=await Promise.all([t(["/configs/general/settings.json","/configs/settings.json"]),t(["/configs/general/gameplay.json","/configs/gameplay.json"]),t(["/configs/systems/system.json","/configs/system.json"]),t(["/configs/general/assets.json","/configs/assets.json"]),t(["/configs/general/items.json","/configs/items.json"]),t(["/configs/general/keybinds.json","/configs/keybinds.json"]),t(["/configs/general/modules.json","/configs/modules.json"]),t(["/configs/general/persistence.json","/configs/persistence.json"]),t(["/configs/ships/ships.json","/configs/ships.json"]),t(["/configs/ships/weapons.json","/configs/weapons.json"]),t(["/configs/general/player.json","/configs/player.json"]),t(["/configs/npc/ai_profiles.json","/configs/ai_profiles.json"]),t(["/configs/systems/systems.json","/configs/systems.json"]),t(["/configs/systems/system_profiles.json","/configs/system_profiles.json"]),t(["/configs/npc/stardwellers.json","/configs/stardwellers.json"]),t(["/configs/npc/factions.json","/configs/factions.json"]),t(["/configs/npc/combat_ai_profiles.json","/configs/combat_ai_profiles.json"])]);this.settings=s,this.gameplay=f,this.system=C,this.assets=S,this.items=r,this.keybinds=y,this.modules=e,this.persistence=u,this.ships=m,this.weapons=d,this.player=l,this.aiProfiles=h,this.stardwellers=c,this.systemsIndex=n,this.systemProfiles=a,this.factions=o,this.combatAI=v}}class SN{scene;config;buffer={};constructor(t,s){this.scene=t,this.config=s}get key(){return this.config.persistence.saveKey}getLastPlayerState(){try{const t=localStorage.getItem(this.key);return t?JSON.parse(t).player:void 0}catch{return}}setLastPlayerState(t){this.buffer.player=t}flush(){try{const t=JSON.stringify(this.buffer);localStorage.setItem(this.key,t)}catch{}}}class PN{scene;config;save;following=null;constructor(t,s,f){this.scene=t,this.config=s,this.save=f}enableFollow(t){this.following=t,this.scene.cameras.main.startFollow(t,!0,.08,.08)}disableFollow(){this.following=null,this.scene.cameras.main.stopFollow()}setZoom(t){const{minZoom:s,maxZoom:f}=this.config.settings.camera;this.scene.cameras.main.setZoom(Phaser.Math.Clamp(t,s,f))}zoomDelta(t){const s=this.scene.cameras.main;this.setZoom(s.zoom+t)}isFollowing(){return!!this.following}}class EN{scene;config;edgePanEnabled=!1;isDragging=!1;lastX=0;lastY=0;dragDistance=0;dragEnabled=!0;leftClickHandlers=[];rightClickHandlers=[];constructor(t,s){this.scene=t,this.config=s,this.initMouse(),this.initWheel(),this.edgePanEnabled&&this.initEdgePan(),this.initDragPan()}onRightClick(t){this.rightClickHandlers.push(t)}onLeftClick(t){this.leftClickHandlers.push(t)}setDragEnabled(t){this.dragEnabled=t,t||(this.isDragging=!1,this.dragDistance=0)}initMouse(){this.scene.input.mouse?.disableContextMenu();const t=f=>f?.event?.button===2||f?.buttons===2||f?.rightButtonDown?.()||f?.rightButtonReleased?.(),s=f=>f?.event?.button===0||f?.leftButtonDown?.()||f?.leftButtonReleased?.();this.scene.input.on("pointerdown",f=>{t(f)&&this.rightClickHandlers.forEach(C=>C(f.worldX,f.worldY))}),this.scene.input.on("pointerup",f=>{s(f)&&(this.isDragging&&this.dragDistance<6?this.leftClickHandlers.forEach(C=>C(f.worldX,f.worldY)):this.isDragging||this.leftClickHandlers.forEach(C=>C(f.worldX,f.worldY)),this.isDragging=!1,this.dragDistance=0),t(f)&&this.rightClickHandlers.forEach(C=>C(f.worldX,f.worldY))})}initWheel(){this.scene.input.on("wheel",(t,s,f,C)=>{const S=this.scene.cameras.main,r=this.config.settings.camera.minZoom,y=this.config.settings.camera.maxZoom,e=C>0?-.1:.1,u=S.zoom,m=Phaser.Math.Clamp(u+e,r,y);if(m===u)return;const d=this.scene.scale.width*.5,l=this.scene.scale.height*.5,h=S.getWorldPoint?S.getWorldPoint(d,l):new Phaser.Math.Vector2(S.scrollX+d/u,S.scrollY+l/u);S.setZoom(m),S.centerOn(h.x,h.y)})}initEdgePan(){const t=this.config.settings.camera.edgePanMargin,s=this.config.settings.camera.edgePanSpeed;this.scene.events.on(Phaser.Scenes.Events.UPDATE,(f,C)=>{if(!this.edgePanEnabled)return;const S=this.scene.cameras.main,r=this.scene.input.activePointer,y=this.scene.scale.width,e=this.scene.scale.height,u=C/1e3;let m=0,d=0;r.x<t?m=-1:r.x>y-t&&(m=1),r.y<t?d=-1:r.y>e-t&&(d=1),(m!==0||d!==0)&&(S.scrollX+=m*s*u,S.scrollY+=d*s*u)})}initDragPan(){this.scene.input.on("pointerdown",t=>{t.leftButtonDown()&&this.dragEnabled&&(this.isDragging=!0,this.lastX=t.x,this.lastY=t.y,this.dragDistance=0)}),this.scene.input.on("pointerup",t=>{t.leftButtonReleased()&&(this.isDragging=!1,this.dragDistance=0)}),this.scene.input.on("pointermove",t=>{if(!this.isDragging||!this.dragEnabled)return;const s=this.scene.cameras.main,f=(t.x-this.lastX)/s.zoom,C=(t.y-this.lastY)/s.zoom;s.scrollX-=f,s.scrollY-=C,this.lastX=t.x,this.lastY=t.y,this.dragDistance+=Math.hypot(f,C)})}}class MN{scene;config;constructor(t,s){this.scene=t,this.config=s}planPath(t){return{points:[new Phaser.Math.Vector2(t.goal.x,t.goal.y)]}}}class Dy{scene;config;pauseManager;pauseSystemName="movement";speed=0;target=null;headingRad=null;command=null;orbitAngle=0;lastTargetUpdate=0;controlledObject=null;targetVelocity=new Phaser.Math.Vector2(0,0);shipId;constructor(t,s,f){this.scene=t,this.config=s,this.shipId=f,this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.update,this)}setPauseManager(t){this.pauseManager=t}setPauseSystemName(t){this.pauseSystemName=t}init(){window.setTargetUpdateRate=t=>{this.config.gameplay.movement.TARGET_UPDATE_INTERVAL_MS=t,console.log(`[Movement] Target update interval set to ${t}ms`)}}followPath(t,s){const f=s.points[s.points.length-1];this.setMovementCommand({mode:"move_to",target:new Phaser.Math.Vector2(f.x,f.y)},t)}setMovementCommand(t,s){this.command=t,t.targetObject?(this.target=new Phaser.Math.Vector2(t.targetObject.x,t.targetObject.y),t.target=this.target):this.target=t.target,this.controlledObject=s;const f=this.shipId??this.config.player?.shipId??this.config.ships?.current,C=Phaser.Math.DegToRad(this.config.ships?.defs?.[f]?.sprite?.noseOffsetDeg??0);if(this.headingRad=s.rotation-C,s.__moveRef=this,t.mode==="orbit"){const S=s.x-t.target.x,r=s.y-t.target.y;this.orbitAngle=Math.atan2(r,S),t.targetObject&&(this.lastTargetUpdate=0)}}getTarget(){return this.target}getCurrentCommand(){return this.command}moveTo(t,s){this.setMovementCommand({mode:"move_to",target:t},s)}followTarget(t,s,f){this.setMovementCommand({mode:"follow",target:t,distance:s},f)}followObject(t,s,f){this.setMovementCommand({mode:"follow",target:new Phaser.Math.Vector2(t.x,t.y),distance:s,targetObject:t},f)}orbitTarget(t,s,f){this.setMovementCommand({mode:"orbit",target:t,distance:s},f)}orbitObject(t,s,f){this.setMovementCommand({mode:"orbit",target:new Phaser.Math.Vector2(t.x,t.y),distance:s,targetObject:t},f)}pursueTarget(t,s){this.setMovementCommand({mode:"pursue",target:new Phaser.Math.Vector2(t.x,t.y),distance:100,targetObject:t},s)}update(t,s){if(this.pauseManager?.isSystemPausable(this.pauseSystemName)&&this.pauseManager?.getPaused()){this.pauseManager?.getDebugSetting("log_system_states")&&console.log(`[MovementManager] ${this.pauseSystemName} paused, skipping update`);return}const f=this.scene.children.getAll().find(m=>m.__moveRef===this);if(!f)return;const C=this.shipId??this.config.player?.shipId??this.config.ships?.current,S=C?this.config.ships.defs[C]:void 0,r=S?.movement??this.config.gameplay.movement,y=Phaser.Math.DegToRad(S?.sprite?.noseOffsetDeg??0);if(this.headingRad==null&&(this.headingRad=f.rotation-y),!this.command||!this.target){this.speed=Math.max(0,this.speed-r.DECELERATION),this.headingRad=(this.headingRad%(Math.PI*2)+Math.PI*2)%(Math.PI*2),f.rotation=this.headingRad+y,this.speed>0&&(f.x+=Math.cos(this.headingRad)*this.speed,f.y+=Math.sin(this.headingRad)*this.speed);return}const e=this.config.gameplay.movement.TARGET_UPDATE_INTERVAL_MS||100,u=this.command?.mode==="orbit"?Math.min(e,50):e;if(t-this.lastTargetUpdate>u&&(this.updateDynamicTarget(t-this.lastTargetUpdate),this.lastTargetUpdate=t),!this.command){this.speed=Math.max(0,this.speed-r.DECELERATION),this.headingRad=(this.headingRad%(Math.PI*2)+Math.PI*2)%(Math.PI*2),f.rotation=this.headingRad+y,this.speed>0&&(f.x+=Math.cos(this.headingRad)*this.speed,f.y+=Math.sin(this.headingRad)*this.speed);return}this.executeMovementMode(f,s,r,y),this.headingRad=(this.headingRad%(Math.PI*2)+Math.PI*2)%(Math.PI*2),f.rotation=this.headingRad+y,this.speed>0&&(f.x+=Math.cos(this.headingRad)*this.speed,f.y+=Math.sin(this.headingRad)*this.speed)}updateDynamicTarget(t){if(!this.command||!this.command.targetObject){this.targetVelocity.set(0,0);return}if(!this.command.targetObject.active||this.command.targetObject.destroyed){this.command=null,this.target=null,this.targetVelocity.set(0,0);return}const s=this.target.x,f=this.target.y;this.target.x=this.command.targetObject.x,this.target.y=this.command.targetObject.y;const C=t/1e3;if(C>0){const S=(this.target.x-s)/C,r=(this.target.y-f)/C;this.targetVelocity.set(S,r)}Math.hypot(this.target.x-s,this.target.y-f)}executeMovementMode(t,s,f,C){const S=this.command;switch(S.mode){case"move_to":this.executeMoveToMode(t,s,f);break;case"follow":this.executeFollowMode(t,s,f,S.distance||300);break;case"orbit":this.executeOrbitMode(t,s,f,S.distance||500);break;case"pursue":this.executePursueMode(t,s,f,S.distance||100);break}}executeMoveToMode(t,s,f){const C=this.target.x-t.x,S=this.target.y-t.y,r=Math.hypot(C,S);if(r<2){this.command=null,this.target=null;return}const y=r<f.SLOWING_RADIUS?f.MAX_SPEED*(r/f.SLOWING_RADIUS):f.MAX_SPEED,e=typeof f.ACCELERATION_PENALTY_AT_MAX=="number"?Phaser.Math.Clamp(f.ACCELERATION_PENALTY_AT_MAX,0,1):0,u=Phaser.Math.Clamp(this.speed/Math.max(1e-6,f.MAX_SPEED),0,1),m=e*u,d=f.ACCELERATION*(1-m);this.speed<y?this.speed=Math.min(this.speed+d,y):this.speed=Math.max(this.speed-f.DECELERATION,y);let h=Math.atan2(S,C)-this.headingRad;for(;h>Math.PI;)h-=2*Math.PI;for(;h<-Math.PI;)h+=2*Math.PI;let n=0;if(this.speed>.1){const o=1/(1+this.speed/f.MAX_SPEED*f.TURN_PENALTY_MULTIPLIER);n=f.TURN_SPEED*o}if(!(Math.abs(h)<.02)&&n>0){const c=Math.min(Math.abs(h),n);this.headingRad+=Math.sign(h)*c,this.speed=Math.max(this.speed-f.DECELERATION*f.TURN_DECELERATION_FACTOR,0)}}executeFollowMode(t,s,f,C){const S=this.target.x-t.x,r=this.target.y-t.y,e=Math.hypot(S,r)-C;if(Math.abs(e)<20){const d=this.targetVelocity.length();if(this.speed<d?this.speed=Math.min(this.speed+f.ACCELERATION,d):this.speed=Math.max(this.speed-f.DECELERATION,d),d>1){const l=this.targetVelocity.angle();this.turnTowardsOriginal(l,f)}return}const u=f.MAX_SPEED*Phaser.Math.Clamp(Math.abs(e)/(f.SLOWING_RADIUS||200),0,1);this.speed<u?this.speed=Math.min(this.speed+f.ACCELERATION,u):this.speed=Math.max(this.speed-f.DECELERATION,u);let m=Math.atan2(r,S);e<0&&(m+=Math.PI),this.turnTowardsOriginal(m,f)}executeOrbitMode(t,s,f,C){const S=this.target,r=new Phaser.Math.Vector2(t.x-S.x,t.y-S.y);if(r.lengthSq()<1){this.speed=Math.max(0,this.speed-f.DECELERATION);return}const y=r.length(),u=r.clone().normalize().rotate(Math.PI/2).scale(f.MAX_SPEED*.7),m=y-C,d=Phaser.Math.Clamp(m*-1,-f.MAX_SPEED*.5,f.MAX_SPEED*.5),l=r.clone().normalize().scale(d),h=u.add(l),n=h.angle(),a=Phaser.Math.Clamp(h.length(),0,f.MAX_SPEED);this.speed<a?this.speed=Math.min(this.speed+f.ACCELERATION,a):this.speed=Math.max(this.speed-f.DECELERATION,a),this.turnTowardsOriginal(n,f)}executePursueMode(t,s,f,C){const S=this.target.x-t.x,r=this.target.y-t.y,y=Math.hypot(S,r);if(y<=C){this.speed=Math.max(0,this.speed-f.DECELERATION*2);return}const e=Math.max(C+50,f.SLOWING_RADIUS),u=y<e?f.MAX_SPEED*((y-C)/(e-C)):f.MAX_SPEED;this.speed<u?this.speed=Math.min(this.speed+f.ACCELERATION,u):this.speed=Math.max(this.speed-f.DECELERATION,Math.max(0,u));const m=Math.atan2(r,S);this.turnTowardsOriginal(m,f)}turnTowardsOriginal(t,s){let f=t-this.headingRad;for(;f>Math.PI;)f-=2*Math.PI;for(;f<-Math.PI;)f+=2*Math.PI;let C=s.TURN_SPEED;if(this.speed>.1){const y=1/(1+this.speed/s.MAX_SPEED*s.TURN_PENALTY_MULTIPLIER);C=s.TURN_SPEED*y}if(!(Math.abs(f)<.02)&&C>0){const r=Math.min(Math.abs(f),C);this.headingRad+=Math.sign(f)*r,this.speed=Math.max(this.speed-s.DECELERATION*s.TURN_DECELERATION_FACTOR,0)}}}class wN{scene;config;npcStates=new Map;pauseManager;constructor(t,s){this.scene=t,this.config=s}setPauseManager(t){this.pauseManager=t;for(const s of this.npcStates.values())s.movementManager.setPauseManager(t),s.movementManager.setPauseSystemName("npcMovementManager")}registerNPC(t,s,f){const C=new Dy(this.scene,this.config,s);this.pauseManager&&C.setPauseManager(this.pauseManager),C.setPauseSystemName("npcMovementManager");const S=f?this.config.combatAI?.profiles?.[f]:null,r=S?.movementMode||"move_to",y=S?.movementDistance||300,e={obj:t,movementManager:C,mode:r,distance:y};return this.npcStates.set(t,e),e}unregisterNPC(t){this.npcStates.delete(t)}setNPCTarget(t,s){const f=this.npcStates.get(t);if(!f)return;f.currentTarget=s;const C=new Phaser.Math.Vector2(s.x,s.y),S={mode:f.mode,target:C,distance:f.distance,targetObject:s.targetObject};f.movementManager.setMovementCommand(S,t)}getNPCTarget(t){return this.npcStates.get(t)?.currentTarget||null}getNPCMode(t){return this.npcStates.get(t)?.mode||null}setNPCMode(t,s,f){const C=this.npcStates.get(t);C&&(C.mode=s,f!==void 0&&(C.distance=f),C.currentTarget&&this.setNPCTarget(t,C.currentTarget))}hasNPCReachedTarget(t){const s=this.npcStates.get(t);return!s||!s.currentTarget?!0:!s.movementManager.getCurrentCommand()}getAllNPCs(){return Array.from(this.npcStates.keys())}clear(){this.npcStates.clear()}}var As=(i=>(i.STAR="star",i.PLANET="planet",i.STATION="station",i.POI_VISIBLE="poi_visible",i.POI_HIDDEN="poi_hidden",i.CELESTIAL_BODY="celestial_body",i))(As||{}),_l=(i=>(i.NPC="npc",i.PROJECTILE="projectile",i.EFFECT="effect",i.DEBRIS="debris",i))(_l||{}),En=(i=>(i[i.EMERGENCY_FLEE=100]="EMERGENCY_FLEE",i[i.COMBAT=80]="COMBAT",i[i.PLAYER_COMMAND=60]="PLAYER_COMMAND",i[i.SCENARIO=50]="SCENARIO",i[i.PATROL=40]="PATROL",i[i.TRADE=20]="TRADE",i[i.IDLE=10]="IDLE",i))(En||{});class RN{scene;pauseManager;config;contexts=new Map;AGGRESSION_COOLDOWN_RATE=.3;TARGET_SWITCH_THRESHOLD=1.4;TARGET_STABILITY_TIME=1500;DAMAGE_MEMORY_TIME=3e4;constructor(t,s){this.scene=t,this.config=s,this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.update,this)}setPauseManager(t){this.pauseManager=t}registerNPC(t,s,f,C){const S=t.__uniqueId||"unknown";if(this.contexts.has(t))return;for(const[y,e]of this.contexts.entries())y.__uniqueId===S&&y!==t&&this.contexts.delete(y);const r={obj:t,state:"spawning",previousState:"spawning",stateEnterTime:this.scene.time.now,aggression:{level:0,lastDamageTime:0,lastCombatTime:0,cooldownRate:this.AGGRESSION_COOLDOWN_RATE,sources:new Map},targetStabilization:{currentTarget:null,targetScore:0,targetSwitchTime:0,requiredAdvantage:this.TARGET_SWITCH_THRESHOLD,stabilityPeriod:this.TARGET_STABILITY_TIME},movementQueue:[],currentMovement:null,aiProfile:s,combatAI:f,faction:C,legacy:{__behavior:t.__behavior,__state:t.__state,intent:t.intent}};this.contexts.set(t,r),this.scene.time.delayedCall(1,()=>{const y=this.contexts.get(t);y&&y.obj===t&&this.initializeFromLegacy(y)})}initializeFromLegacy(t){switch(t.obj.__behavior||t.aiProfile){case"patrol":this.transitionTo(t,"patrolling");break;case"planet_trader":case"orbital_trade":this.transitionTo(t,"trading");break;case"aggressive":this.transitionTo(t,"combat_seeking");break;case"static":this.transitionTo(t,"idle");break;default:this.transitionTo(t,"idle")}}unregisterNPC(t){t.__uniqueId;const s=this.contexts.get(t);s&&s.obj===t&&this.contexts.delete(t)}transitionTo(t,s){if(!this.canTransition(t.state,s))return!1;const f=t.state;return this.exitState(t,f),t.previousState=f,t.state=s,t.stateEnterTime=this.scene.time.now,this.enterState(t,s),!0}canTransition(t,s){const f=[["destroyed","*"],["docking","trading"],["undocking","docking"]];for(const[C,S]of f)if((C===t||C==="*")&&(S===s||S==="*"))return!1;return!0}exitState(t,s){switch(s){case"combat_attacking":case"combat_seeking":t.aggression.lastCombatTime=this.scene.time.now;break}}enterState(t,s){const f=t.obj;switch(s){case"docking":f.__state="docking";break;case"docked":f.__state="docked";break;case"undocking":f.__state="undocking";break;case"trading":f.__state="travel";break;default:delete f.__state}}addMovementCommand(t,s,f,C,S,r){const y=this.contexts.get(t);if(!y)return!1;const e={mode:s,target:f,distance:C,priority:S,source:r,timestamp:this.scene.time.now};return y.currentMovement&&y.currentMovement.priority>S?!1:(y.movementQueue=y.movementQueue.filter(u=>u.priority>=S),y.movementQueue.push(e),y.movementQueue.sort((u,m)=>m.priority-u.priority),(!y.currentMovement||S>y.currentMovement.priority)&&(y.currentMovement=e),!0)}updateAggression(t,s){const f=this.scene.time.now,C=t.aggression;for(const[y,e]of C.sources.entries())f-e.lastTime>this.DAMAGE_MEMORY_TIME&&C.sources.delete(y);const S=f-C.lastDamageTime,r=f-C.lastCombatTime;if(S>5e3&&r>3e3){const y=C.cooldownRate*(s/1e3);C.level=Math.max(0,C.level-y)}}registerDamage(t,s,f){t.__uniqueId,f&&f.__uniqueId;const C=this.contexts.get(t);if(!C||C.obj!==t)return;const S=this.scene.time.now,r=C.aggression;t.__uniqueId,this.scene.combatManager?.ship;const y=s*.01;if(r.level,r.level=Math.min(1,r.level+y),r.lastDamageTime=S,f){const e=r.sources.get(f)||{damage:0,lastTime:0};e.damage+=s,e.lastTime=S,r.sources.set(f,e)}(C.state==="idle"||C.state==="patrolling"||C.state==="trading")&&this.transitionTo(C,"combat_seeking")}evaluateTarget(t,s){if(!s||!s.active)return-1;const f=t.obj,C=t.aggression;let S=0;const r=C.sources.get(s);if(r){let e=r.damage*2;S+=e;const u=this.scene.time.now-r.lastTime;u<5e3&&(S+=(5e3-u)*.001)}const y=Phaser.Math.Distance.Between(f.x,f.y,s.x,s.y);return S-=y*.002,s===t.targetStabilization.currentTarget&&(S+=2),S}selectStableTarget(t,s){if(s.length===0)return null;const f=t.targetStabilization,C=this.scene.time.now;t.obj.__uniqueId;let S=null,r=-1;const y=this.scene.combatManager?.ship,e=s.find(m=>m===y),u=[];for(const m of s){const d=this.evaluateTarget(t,m),l=m===e,h=l?"PLAYER":`#${m.__uniqueId||"UNK"}`;u.push({id:h,score:d.toFixed(2),isPlayer:l}),d>r&&(r=d,S=m)}if(S&&(S===e||`${S.__uniqueId||"UNK"}`),f.currentTarget&&(f.currentTarget===e||`${f.currentTarget.__uniqueId||"UNK"}`),S!==f.currentTarget){const m=C-f.targetSwitchTime,l=(f.currentTarget?f.targetScore:0)*(1+f.requiredAdvantage),h=m>f.stabilityPeriod,n=r>l;return!!!f.currentTarget||h&&n?(f.currentTarget=S,f.targetScore=r,f.targetSwitchTime=C,S):f.currentTarget}else return f.targetScore=r,S}getState(t){return this.contexts.get(t)?.state||null}getContext(t){return this.contexts.get(t)||null}isInCombat(t){const s=this.getState(t);return s==="combat_seeking"||s==="combat_attacking"||s==="combat_fleeing"}update(t,s){if(this.pauseManager?.isSystemPausable("npcStateManager")&&this.pauseManager?.getPaused())return;const f=[];for(const[C,S]of this.contexts.entries()){if(S.obj!==C){f.push(C);continue}if(!C.active){f.push(C);continue}this.updateAggression(S,s),this.updateMovementQueue(S),this.updateStateLogic(S,s)}for(const C of f)this.contexts.delete(C)}updateMovementQueue(t){const s=this.scene.time.now;t.movementQueue=t.movementQueue.filter(f=>s-f.timestamp<1e4),t.movementQueue.length>0?t.currentMovement=t.movementQueue[0]:t.currentMovement=null}updateStateLogic(t,s){const f=t.state,C=this.scene.time.now-t.stateEnterTime;switch(f){case"spawning":C>100&&this.initializeFromLegacy(t);break;case"combat_seeking":if(t.aggression.level<.1){const S=t.aiProfile||t.legacy.__behavior;S==="patrol"?this.transitionTo(t,"patrolling"):S==="planet_trader"||S==="orbital_trade"?this.transitionTo(t,"trading"):this.transitionTo(t,"idle")}break;case"combat_attacking":(!t.targetStabilization.currentTarget||!t.targetStabilization.currentTarget.active)&&this.transitionTo(t,"combat_seeking");break;case"combat_fleeing":t.aggression.level<.3&&C>5e3&&this.transitionTo(t,"combat_seeking");break}}forceState(t,s){const f=this.contexts.get(t);return f?this.transitionTo(f,s):!1}destroy(){this.scene.events.off(Phaser.Scenes.Events.UPDATE,this.update,this),this.contexts.clear()}}class Wd{static npcCounter=0;pauseManager;scene;config;npcMovement;fogOfWar;npcStateManager;ship;selectedTarget=null;selectionCircle;radarCircle;selectionBaseRadius=70;selectionPulsePhase=0;lastFireTimesByShooter=new WeakMap;lastPirateLogMs=new WeakMap;weaponSlots=["laser","cannon","missile"];playerWeaponTargets=new Map;activeBeams=new WeakMap;beamCooldowns=new WeakMap;playerChargeUntil={};beamPrepUntil=new WeakMap;targets=[];combatRings=new Map;constructor(t,s){this.scene=t,this.config=s,this.npcMovement=new wN(t,s),this.npcStateManager=new RN(t,s),this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.update,this),this.scene.events.on("game-resumed",this.onGameResumed,this)}clearIntentFor(t){const s=this.targets.find(f=>f.obj===t);s&&(s.intent=null)}setAIProfileFor(t,s){const f=this.targets.find(S=>S.obj===t);if(!f)return;const C=this.config.aiProfiles.profiles[s];C&&(f.aiProfileKey=s,f.ai=f.ai||{type:"ship",preferRange:0,speed:0},f.ai.behavior=C.behavior,f.ai.retreatHpPct=C.combat?.retreatHpPct??0)}attachShip(t){this.ship=t}setFogOfWar(t){this.fogOfWar=t}setPauseManager(t){this.pauseManager=t,this.npcMovement.setPauseManager(t)}onGameResumed(t){this.pauseManager?.getDebugSetting("log_pause_events")&&console.log("[CombatManager] Game resumed, no manual timer adjustment needed")}onWeaponChargeCompletedDuringPause(t){}getWeaponChargeProgress(t){const s=this.playerChargeUntil[t];if(!s)return 1;const f=this.pauseManager?.getAdjustedTime()??this.scene.time.now;if(f>=s)return 1;const C=this.config.weapons.defs[t];if(!C)return 1;const S=1e3/Math.max(.001,C.fireRatePerSec??1),r=s-S,y=f-r;return Math.max(0,Math.min(1,y/S))}isWeaponCharging(t){const s=this.playerChargeUntil[t];if(s&&(this.pauseManager?.getAdjustedTime()??this.scene.time.now)<s)return!0;const f=this.beamCooldowns.get(this.ship);return f&&f[t]?(this.pauseManager?.getAdjustedTime()??this.scene.time.now)<f[t]:!1}getBeamRefreshProgress(t){const s=this.beamCooldowns.get(this.ship);if(!s||!s[t])return 1;const f=s[t],C=this.pauseManager?.getAdjustedTime()??this.scene.time.now;if(C>=f)return 1;const S=this.config.weapons.defs[t];if(!S)return 1;const r=Math.max(0,S?.beam?.refreshMs??500),y=f-r,e=C-y;return Math.max(0,Math.min(1,e/r))}getTargetObjects(){return this.targets.map(t=>t.obj)}getSelectedTarget(){return this.selectedTarget}spawnNPCPrefab(t,s,f){const C=this.config.stardwellers?.prefabs?.[t],S=C?.shipId??t,r=this.config.ships.defs[S]??this.config.ships.defs[this.config.ships.current];if(!r)return null;let y;const e=r.sprite,u=e.key&&this.scene.textures.exists(e.key)?e.key:this.scene.textures.exists("ship_alpha")?"ship_alpha":"ship_alpha_public";y=this.scene.add.image(s,f,u).setDepth(.8),y.__prefabKey=t,y.setOrigin(e.origin?.x??.5,e.origin?.y??.5),y.setDisplaySize(e.displaySize?.width??64,e.displaySize?.height??128),y.__uniqueId=++Wd.npcCounter,y.setRotation(Phaser.Math.DegToRad(e.noseOffsetDeg??0)),y.__baseScaleX=y.scaleX,y.__baseScaleY=y.scaleY,y.setAlpha(1),y.setVisible(!0),y.__noseOffsetRad=Phaser.Math.DegToRad(e.noseOffsetDeg??0);const m=128,d=Math.max(y.displayWidth,y.displayHeight)*.5+16,l=this.scene.add.rectangle(y.x-m/2,y.y-d,m,8,1120295).setOrigin(0,.5).setDepth(.5),h=this.scene.add.rectangle(y.x-m/2,y.y-d,m,8,2278750).setOrigin(0,.5).setDepth(.6);l.setVisible(!1),h.setVisible(!1);const n=C?.aiProfile??"planet_trader",a=this.config.aiProfiles.profiles[n]??{behavior:"static"},c={preferRange:0,retreatHpPct:a.combat?.retreatHpPct??0,type:"ship",behavior:a.behavior},o={obj:y,hp:r.hull??100,hpMax:r.hull??100,hpBarBg:l,hpBarFill:h,ai:c,shipId:C?.shipId??S,faction:C?.faction,combatAI:C?.combatAI,aiProfileKey:n,intent:null};return C?.weapons&&Array.isArray(C.weapons)&&(o.weaponSlots=C.weapons.slice(0)),this.targets.push(o),this.npcMovement.registerNPC(y,S,C?.combatAI),this.npcStateManager.registerNPC(y,n,C?.combatAI,C?.faction),this.fogOfWar&&this.fogOfWar.registerDynamicObject(y,_l.NPC),y}bindInput(t){t.onLeftClick((s,f)=>{const C=this.findTargetAt(s,f);C?this.selectTarget(C.obj):(!this.selectedTarget||!this.isTargetCombatSelected(this.selectedTarget))&&this.clearSelection()})}findTargetAt(t,s){const f=this.targets.filter(S=>{const r=S.obj.__state;return!(r==="docking"||r==="docked"||r==="undocking")});let C=f.find(S=>{const r=this.getEffectiveRadius(S.obj)+12;return Phaser.Math.Distance.Between(S.obj.x,S.obj.y,t,s)<=r});return C||(C=f.find(S=>{const r=S.hpBarBg;if(!r||!r.visible)return!1;const y=r.x,e=r.y-r.height*.5,u=r.x+r.width,m=r.y+r.height*.5;return t>=y&&t<=u&&s>=e&&s<=m}),C)?C:(C=f.find(S=>{const r=S.obj,y=r.displayWidth??r.width??128,e=r.displayHeight??r.height??128,u=r.x-y*.5,m=r.y-e*.5,d=r.x+y*.5,l=r.y+e*.5;return t>=u&&t<=d&&s>=m&&s<=l}),C??null)}forceSelectTarget(t){this.selectTarget(t)}setPlayerWeaponTarget(t,s){if(this.playerWeaponTargets.get(t),s){this.playerWeaponTargets.set(t,s);const f=this.config.weapons.defs[t];if(f)if((f.type??"single")==="beam"){const C=Math.max(0,f?.beam?.refreshMs??500),S=this.beamCooldowns.get(this.ship)??{};this.beamCooldowns.set(this.ship,S);const r=this.pauseManager?.getAdjustedTime()??this.scene.time.now;S[t]=r+C,this.stopBeamIfAny(this.ship,t)}else{const C=this.getShooterTimes(this.ship),S=1e3/Math.max(.001,f.fireRatePerSec??1),r=this.pauseManager?.getAdjustedTime()??this.scene.time.now;C[t]=r+S}}else{this.playerWeaponTargets.delete(t);try{this.scene.events.emit("weapon-out-of-range",t,!1)}catch{}}this.refreshSelectionCircleColor(),this.refreshCombatRings(),this.refreshCombatUIAssigned()}clearPlayerWeaponTargets(){if(this.playerWeaponTargets.size>0){const t=Array.from(this.playerWeaponTargets.keys());if(this.playerWeaponTargets.clear(),t.length>0)for(const s of t)try{this.scene.events.emit("weapon-out-of-range",s,!1)}catch{}}this.refreshSelectionCircleColor(),this.refreshCombatRings(),this.refreshCombatUIAssigned()}getPlayerWeaponTargets(){return this.playerWeaponTargets}getHpBarInfoFor(t){const s=this.targets.find(f=>f.obj===t);return s?{x:s.hpBarBg.x,y:s.hpBarBg.y,width:s.hpBarBg.width,height:s.hpBarBg.height}:null}selectTarget(t){this.selectedTarget=t;const s=this.getEffectiveRadius(t)+5;if(this.selectionBaseRadius=s,this.selectionCircle?(this.selectionCircle.setPosition(t.x,t.y).setVisible(!0),this.selectionCircle.setRadius(s),this.selectionCircle.setFillStyle(10392450,.15),this.selectionCircle.setStrokeStyle(2,10392450,1)):(this.selectionCircle=this.scene.add.circle(t.x,t.y,s,10392450,.15).setDepth(.45),this.selectionCircle.setStrokeStyle(2,10392450,1)),t!==this.ship){const f=this.getRadarRangeFor(t);f>0?this.radarCircle?(this.radarCircle.setPosition(t.x,t.y).setVisible(!0),this.radarCircle.setRadius(f),this.radarCircle.setFillStyle(7041664,.08),this.radarCircle.setStrokeStyle(1,7041664,.6)):(this.radarCircle=this.scene.add.circle(t.x,t.y,f,7041664,.08).setDepth(.4),this.radarCircle.setStrokeStyle(1,7041664,.6)):this.radarCircle?.setVisible(!1)}else this.radarCircle?.setVisible(!1);for(const f of this.targets){const C=f.obj===t;if(f.hpBarBg.setVisible(C),f.hpBarFill.setVisible(C),this.updateHpBar(f),C){if(!f.nameLabel){const d=`${this.resolveDisplayName(f)||"Unknown"} #${f.obj.__uniqueId||""}`;f.nameLabel=this.scene.add.text(0,0,d,{color:"#ffffff",fontSize:"20px",fontFamily:"HooskaiChamferedSquare"}).setOrigin(.5,1).setDepth(.7)}const r=this.getRelation("player",f.faction,f.overrides?.factions)==="confrontation"?"#A93226":"#9E9382",e=`${this.resolveDisplayName(f)||"Unknown"} #${f.obj.__uniqueId||""}`;f.nameLabel.setText(e+""),f.nameLabel.setColor(r),f.nameLabel.setVisible(!0),this.updateHpBar(f)}else f.nameLabel?.setVisible(!1)}this.refreshSelectionCircleColor()}clearSelection(){this.selectedTarget=null,this.selectionCircle?.setVisible(!1),this.radarCircle?.setVisible(!1);for(const t of this.targets)t.hpBarBg.setVisible(!1),t.hpBarFill.setVisible(!1),t.nameLabel?.setVisible(!1)}update(t,s){const f=this.pauseManager?.isSystemPausable("combat")&&this.pauseManager?.getPaused();if(this.selectedTarget&&this.selectionCircle){this.selectionPulsePhase+=s*.01;const y=this.selectionBaseRadius+Math.sin(this.selectionPulsePhase)*3;this.selectionCircle.setRadius(y),this.selectionCircle.setPosition(this.selectedTarget.x,this.selectedTarget.y),this.radarCircle&&this.radarCircle.visible&&this.radarCircle.setPosition(this.selectedTarget.x,this.selectedTarget.y)}if(!this.ship)return;f||this.updateSensors(s),f||this.updateEnemiesAI(s);const C=this.getRadarRangeFor(this.ship),S=[];for(const[y,e]of this.playerWeaponTargets.entries())Phaser.Math.Distance.Between(this.ship.x,this.ship.y,e.x,e.y)>C&&S.push(y);if(S.length>0){const y=new Set;for(const e of S){const u=this.playerWeaponTargets.get(e);u&&y.add(u),this.playerWeaponTargets.delete(e)}try{this.scene.events.emit("player-weapon-target-cleared",null,S)}catch{}this.refreshCombatRings(),this.refreshCombatUIAssigned(),this.refreshSelectionCircleColor()}this.selectedTarget&&Phaser.Math.Distance.Between(this.ship.x,this.ship.y,this.selectedTarget.x,this.selectedTarget.y)>C&&this.clearSelection();const r=this.config.player?.weapons??[];if(r.length){const y=this.pauseManager?.getAdjustedTime()??this.scene.time.now;this.getShooterTimes(this.ship);for(let e=0;e<r.length;e++){const u=r[e],m=this.playerWeaponTargets.get(u);if(!m||!m.active)continue;const d=this.config.weapons.defs[u];if(!d)continue;const l=m.x-this.ship.x,h=m.y-this.ship.y,n=Math.hypot(l,h);if((d.type??"single")==="beam"){const c=this.beamCooldowns.get(this.ship)??{};this.beamCooldowns.set(this.ship,c);const o=c[u]??0,v=this.beamPrepUntil.get(this.ship)??{};this.beamPrepUntil.set(this.ship,v);const g=v[u]??0;if(n>d.range){g&&delete v[u];try{this.scene.events.emit("weapon-out-of-range",u,!0)}catch{}this.stopBeamIfAny(this.ship,u);continue}try{this.scene.events.emit("weapon-out-of-range",u,!1)}catch{}if(y<o){this.stopBeamIfAny(this.ship,u);continue}if(!g){const p=Math.max(0,d?.beam?.refreshMs??500);v[u]=y+p;continue}y>=g&&(delete v[u],f||this.ensureBeam(this.ship,u,d,m,n));continue}const a=1e3/Math.max(.001,d.fireRatePerSec??1);if(n>d.range){this.playerChargeUntil[u]&&delete this.playerChargeUntil[u];try{this.scene.events.emit("weapon-out-of-range",u,!0)}catch{}continue}try{this.scene.events.emit("weapon-out-of-range",u,!1)}catch{}if(!this.playerChargeUntil[u]){this.playerChargeUntil[u]=y+a;continue}if(y>=this.playerChargeUntil[u]&&!f){this.pauseManager?.getDebugSetting("log_pause_events")&&console.log(`[CombatManager] Weapon ${u} fired: now=${y}, nextReady=${y+a}`),this.playerChargeUntil[u]=y+a;const c=this.resolveMuzzleOffset(this.ship,e,d.muzzleOffset),o={...d,muzzleOffset:c};(o.type??"single")==="burst"?this.fireBurstWeapon(u,o,m,this.ship):this.fireWeapon(u,o,m,this.ship)}}}for(const y of this.targets){if(!y.ai||!y.intent||y.intent.type!=="attack")continue;const e=y.intent.target;if(!e||!e.active)continue;const u=this.weaponSlots,m=y.weaponSlots;m&&m.length&&(this.weaponSlots=m),this.autoFire(y.obj,e),this.weaponSlots=u}for(const[y,e]of this.combatRings.entries()){if(!y||!y.active){e.destroy(),this.combatRings.delete(y);continue}const u=this.getEffectiveRadius(y)+5;e.setRadius(u),e.setPosition(y.x,y.y)}this.refreshCombatUIAssigned()}refreshSelectionCircleColor(){const t=this.selectedTarget;if(!t||!this.selectionCircle)return;Array.from(this.playerWeaponTargets.values()).some(f=>f===t)?(this.selectionCircle.setFillStyle(11088422,.15),this.selectionCircle.setStrokeStyle(2,11088422,1)):(this.selectionCircle.setFillStyle(10392450,.15),this.selectionCircle.setStrokeStyle(2,10392450,1))}isTargetCombatSelected(t){if(!t)return!1;for(const s of this.playerWeaponTargets.values())if(s===t)return!0;return!1}updateEnemiesAI(t){for(const s of this.targets){if(!s.ai||s.ai.type!=="ship"||s.obj.__returningHome)continue;const f=s.obj;if((!s.intent||s.intent.type===void 0)&&s.ai.behavior&&s.ai.behavior!=="aggressive"){this.updateHpBar(s);continue}const C=(()=>{if(s.combatAI){const u=this.config.combatAI?.profiles?.[s.combatAI];if(u&&typeof u.retreatHpPct=="number")return u.retreatHpPct}return s.ai.retreatHpPct??0})();let S=s.intent&&s.intent.type==="attack"?s.intent.target:this.ship;const r=s.intent&&s.intent.type==="flee"?s.intent.target:null;if(S&&(!S.active||S.destroyed)){S=null,s.intent=null;const u=this.npcStateManager.getContext(f);u&&(u.targetStabilization.currentTarget=null,u.targetStabilization.targetScore=0)}r&&(!r.active||r.destroyed)&&(s.intent=null);let y;if(r){if(!s.__fleeDir){let m=r;if(s.damageLog?.totalDamageBySource?.size){let n=null,a=-1;for(const[c,o]of s.damageLog.totalDamageBySource.entries())c?.active&&o>a&&(a=o,n=c);n&&(m=n)}const d=f.x-m.x,l=f.y-m.y,h=Math.hypot(d,l)||1;s.__fleeDir={x:d/h,y:l/h}}const u=1e3;y={x:f.x+s.__fleeDir.x*u,y:f.y+s.__fleeDir.y*u},this.npcMovement.setNPCTarget(f,y),this.npcStateManager.addMovementCommand(f,"move_to",y,void 0,En.EMERGENCY_FLEE,"combat_manager_flee")}else if(S&&S.active&&!S.destroyed)if(s.hp/s.hpMax<=C){s.intent?.type,s.intent={type:"flee",target:S};const m=f.x-S.x,d=f.y-S.y,l=Math.hypot(m,d),h=800;y={x:S.x+m/l*h,y:S.y+d/l*h},this.npcMovement.setNPCTarget(f,y),this.npcStateManager.addMovementCommand(f,"move_to",y,void 0,En.EMERGENCY_FLEE,"combat_manager_retreat")}else{let m=null;const d=s.intent?.type==="attack"?s.intent.target:null,l=this.targets.filter(c=>c.obj!==f&&c.obj.active).filter(c=>this.getRelation(s.faction,c.faction,s.overrides?.factions)==="confrontation").map(c=>c.obj);this.getRelation(s.faction,"player",s.overrides?.factions)==="confrontation"&&this.ship&&this.ship.active&&!l.includes(this.ship)&&l.push(this.ship);const a=this.npcStateManager.getContext(f);if(a&&l.length>0&&(m=this.npcStateManager.selectStableTarget(a,l)),m&&m!==d&&m.active&&!m.destroyed&&(S=m),S&&S.active&&!S.destroyed?(s.intent?.type,s.intent?.target,s.intent={type:"attack",target:S}):s.intent?.type==="attack"&&(s.intent=null),s.intent?.type==="attack"&&s.intent.target&&s.intent.target.active&&!s.intent.target.destroyed){const c=s.combatAI?this.config.combatAI?.profiles?.[s.combatAI]:void 0,o=c?.movementMode??"orbit",v=c?.movementDistance??500;this.npcMovement.setNPCMode(f,o,v),this.npcMovement.setNPCTarget(f,{x:s.intent.target.x,y:s.intent.target.y,targetObject:s.intent.target}),this.npcStateManager.addMovementCommand(f,o,{x:s.intent.target.x,y:s.intent.target.y,targetObject:s.intent.target},v,En.COMBAT,"combat_manager_attack")}}else if(s.intent?.type==="flee"){const u=s.__lastIntentObj;u&&u.active?(s.intent={type:"attack",target:u},this.npcMovement.setNPCTarget(f,{x:u.x,y:u.y,targetObject:u})):(s.intent,s.intent=null);try{f.__targetPatrol=null}catch{}}else if(s.intent){s.intent=null;const u=this.npcStateManager.getContext(f);u&&(u.targetStabilization.currentTarget=null,u.targetStabilization.targetScore=0)}const e=this.config.system?.size;if(e){const u=Math.max(0,e.width*.2),m=Math.max(0,e.height*.2),d=Math.max(u,e.width-u),l=Math.max(m,e.height-m);f.x=Phaser.Math.Clamp(f.x,u,d),f.y=Phaser.Math.Clamp(f.y,m,l)}this.updateHpBar(s)}}fireWeapon(t,s,f,C){const S=this.getMuzzleWorldPositionFor(C,s.muzzleOffset),r=this.getAimedTargetPoint(C,f,s),y=Math.atan2(r.y-S.y,r.x-S.x);let e;if(s.projectile.shape==="rect")e=this.scene.add.rectangle(S.x,S.y,s.projectile.width,s.projectile.height,Number(s.projectile.color.replace("#","0x"))).setDepth(.8),e.setRotation?.(y);else{const g=s.projectile.radius??4;e=this.scene.add.circle(S.x,S.y,g,Number(s.projectile.color.replace("#","0x"))).setDepth(.8)}e.__combat={damage:s.damage,target:f},e.setDepth?.((C.depth??1)-.1),this.fogOfWar&&this.fogOfWar.registerDynamicObject(e,_l.PROJECTILE);const u=s.projectileSpeed,m=Math.cos(y)*u,d=Math.sin(y)*u,l=s.range/Math.max(1,u)*1e3+50,h=this.targets.find(g=>g.obj===C),n=h?.faction??(C===this.ship?"player":void 0),a=h?.overrides?.factions,c=(g,p)=>{if(this.pauseManager?.isSystemPausable("combat")&&this.pauseManager?.getPaused())return;if(e.x+=m*(p/1e3),e.y+=d*(p/1e3),!f||!f.active){this.scene.events.off(Phaser.Scenes.Events.UPDATE,c),e.destroy?.();return}for(let E=0;E<this.targets.length;E++){const M=this.targets[E],P=M.obj;if(!P||!P.active||P===C)continue;const w=P.__state;if(w==="docking"||w==="docked"||w==="undocking"||typeof P.alpha=="number"&&P.alpha<=.05||P.visible===!1)continue;const A=this.getEffectiveRadius(P);if(Phaser.Math.Distance.Between(e.x,e.y,P.x,P.y)<=A){const F=M.faction;this.getRelation(n,F,a)==="confrontation"&&(this.applyDamage(P,s.damage,C),this.spawnHitEffect(e.x,e.y,s)),this.scene.events.off(Phaser.Scenes.Events.UPDATE,c),this.fogOfWar&&this.fogOfWar.unregisterObject(e),e.destroy?.();return}}const x=this.getEffectiveRadius(f);if(Phaser.Math.Distance.Between(e.x,e.y,f.x,f.y)<=x){const E=f.__state;E==="docking"||E==="docked"||E==="undocking"||typeof f.alpha=="number"&&f.alpha<=.05||f.visible===!1||(this.applyDamage(f,s.damage,C),this.spawnHitEffect(e.x,e.y,s)),this.scene.events.off(Phaser.Scenes.Events.UPDATE,c),this.fogOfWar&&this.fogOfWar.unregisterObject(e),e.destroy?.()}};this.scene.events.on(Phaser.Scenes.Events.UPDATE,c);const o=`projectile-${C.__uniqueId||"player"}-${t}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,v=this.scene.time.delayedCall(l,()=>{this.scene.events.off(Phaser.Scenes.Events.UPDATE,c),this.fogOfWar&&this.fogOfWar.unregisterObject(e),e.destroy?.()});if(this.pauseManager&&this.pauseManager.pauseTimer(v,o),this.pauseManager){const g=`projectile-${Date.now()}-${Math.random()}`;this.pauseManager.pauseTimer(v,g),e.__pauseTimerId=g}if(C===this.ship)try{this.scene.events.emit("player-weapon-fired",t,f)}catch{}}fireBurstWeapon(t,s,f,C){const S=Math.max(1,s?.burst?.count??3),r=Math.max(1,s?.burst?.delayMs??80);for(let y=0;y<S;y++){const e=this.scene.time.delayedCall(y*r,()=>{if(this.pauseManager?.isSystemPausable("combat")&&this.pauseManager?.getPaused()||!C?.active||!f?.active)return;const u=s.muzzleOffset,m={...s,muzzleOffset:u};this.fireWeapon(t,m,f,C)});if(this.pauseManager){const u=`burst-${C.__uniqueId||"player"}-${t}-${y}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;this.pauseManager.pauseTimer(e,u)}}}getMuzzleWorldPositionFor(t,s){const f=t.rotation,C=Math.cos(f),S=Math.sin(f),r=s.x,y=s.y,e=t.x+r*C-y*S,u=t.y+r*S+y*C;return{x:e,y:u}}resolveMuzzleOffset(t,s,f){if(t===this.ship){const y=this.config.player?.shipId??this.config.ships.current,u=this.config.ships.defs[y]?.combat?.slots?.[s]?.offset;if(u)return u}const S=this.targets.find(y=>y.obj===t)?.shipId;if(S){const y=this.config.ships.defs[S]?.combat?.slots?.[s]?.offset;if(y)return y}return this.config.ships.defs[this.config.player?.shipId??this.config.ships.current]?.combat?.slots?.[s]?.offset??f}autoFire(t,s){if(!s||!s.active||!t||!t.active)return;const f=s.x-t.x,C=s.y-t.y,S=Math.hypot(f,C),r=this.getShooterTimes(t),y=this.weaponSlots;for(let e=0;e<y.length;e++){const u=y[e],m=this.config.weapons.defs[u];if(!m)continue;if((m.type??"single")==="beam"){const n=this.pauseManager?.getAdjustedTime()??this.scene.time.now,a=this.beamCooldowns.get(t)??{};this.beamCooldowns.set(t,a);const c=a[u]??0;n>=c&&S<=m.range?this.pauseManager?.isSystemPausable("combat")&&this.pauseManager?.getPaused()||this.ensureBeam(t,u,m,s,S):this.stopBeamIfAny(t,u);continue}if(S>m.range){this.stopBeamIfAny(t,u);continue}const d=this.pauseManager?.getAdjustedTime()??this.scene.time.now,l=1e3/Math.max(.001,m.fireRatePerSec??1),h=r[u]??0;if(d-h>=l&&!(this.pauseManager?.isSystemPausable("combat")&&this.pauseManager?.getPaused())){r[u]=d;const a=this.resolveMuzzleOffset(t,e,m.muzzleOffset),c={...m,muzzleOffset:a};(c.type??"single")==="burst"?this.fireBurstWeapon(u,c,s,t):this.fireWeapon(u,c,s,t)}}}getShooterTimes(t){let s=this.lastFireTimesByShooter.get(t);return s||(s={},this.lastFireTimesByShooter.set(t,s)),s}applyDamage(t,s,f){const C=t?.__state;if(C==="docking"||C==="docked"||C==="undocking")return;const S=this.targets.find(r=>r.obj===t);if(S){if(S.hp-=s,S.hp<0&&(S.hp=0),this.updateHpBar(S),this.floatDamageText(t.x,t.y-70,s),this.npcStateManager.registerDamage(t,s,f),S.damageLog||(S.damageLog={firstAttacker:void 0,totalDamageBySource:new Map,lastDamageTimeBySource:new Map}),f){S.damageLog.firstAttacker||(S.damageLog.firstAttacker=f);const r=S.damageLog.totalDamageBySource,y=S.damageLog.lastDamageTimeBySource,e=r.get(f)??0;r.set(f,e+s);const u=this.pauseManager?.getAdjustedTime()??this.scene.time.now;y.set(f,u)}if(f){const r=this.getRadarRangeFor(S.obj),y=f.x??S.obj.x,e=f.y??S.obj.y;if(Phaser.Math.Distance.Between(S.obj.x,S.obj.y,y,e)>r){const d=(S.combatAI?this.config.combatAI?.profiles?.[S.combatAI]:void 0)?.outdistance_attack??"flee";if(d==="target"){S.intent={type:"attack",target:f};const l=this.pauseManager?.getAdjustedTime()??this.scene.time.now;S.forceIntentUntil=l+4e3}else if(d==="flee"){S.intent={type:"flee",target:f};const l=this.pauseManager?.getAdjustedTime()??this.scene.time.now;S.forceIntentUntil=l+4e3}}if(S.overrides=S.overrides??{},S.overrides.factions=S.overrides.factions??{},f===this.ship)S.overrides.factions.player="confrontation";else{const d=this.targets.find(l=>l.obj===f)?.faction;d&&(S.overrides.factions[d]="confrontation")}}if(S.hp<=0){for(const e of this.targets){if(e.intent?.target===t){e.intent=null;const m=this.npcStateManager.getContext(e.obj);m&&(m.targetStabilization.currentTarget=null,m.targetStabilization.targetScore=0)}e.damageLog&&(e.damageLog.totalDamageBySource?.has(t)&&e.damageLog.totalDamageBySource.delete(t),e.damageLog.lastDamageTimeBySource?.has(t)&&e.damageLog.lastDamageTimeBySource.delete(t),e.damageLog.firstAttacker===t&&(e.damageLog.firstAttacker=void 0));const u=this.npcStateManager.getContext(e.obj);u&&u.aggression.sources.delete(t)}try{S.obj.destroy?.()}catch{}try{S.hpBarBg.destroy()}catch{}try{S.hpBarFill.destroy()}catch{}try{S.nameLabel?.destroy()}catch{}const r=this.combatRings.get(t);if(r){try{r.destroy()}catch{}this.combatRings.delete(t)}this.selectedTarget===t&&this.clearSelection();const y=[];for(const[e,u]of this.playerWeaponTargets.entries())u===t&&(this.playerWeaponTargets.delete(e),y.push(e));if(y.length)try{this.scene.events.emit("player-weapon-target-cleared",t,y)}catch{}this.npcMovement.unregisterNPC(t),this.npcStateManager.unregisterNPC(t),this.fogOfWar&&this.fogOfWar.unregisterObject(t),this.targets=this.targets.filter(e=>e.obj!==t);return}return}if(t===this.ship){const r=this.scene;r?.applyDamageToPlayer&&r.applyDamageToPlayer(s)}}updateHpBar(t){const s=Phaser.Math.Clamp(t.hp/Math.max(1,t.hpMax),0,1),f=128;t.hpBarFill.width=f*s;const C=this.getEffectiveRadius(t.obj)+16;t.hpBarBg.setPosition(t.obj.x-f/2,t.obj.y-C),t.hpBarFill.setPosition(t.obj.x-f/2,t.obj.y-C),t.nameLabel&&t.nameLabel.setPosition(t.obj.x,t.hpBarBg.y-4)}getEffectiveRadius(t){if(typeof t.displayWidth=="number"&&typeof t.displayHeight=="number")return Math.max(t.displayWidth,t.displayHeight)*.5;if(typeof t.radius=="number")return t.radius;const s=typeof t.width=="number"?t.width:128,f=typeof t.height=="number"?t.height:128;return Math.max(s,f)*.5}getRadarRangeFor(t){const s=this.targets.find(y=>y.obj===t),f=s?.shipId??(t===this.ship?this.config.player?.shipId??this.config.ships.current:void 0),C=f?this.config.ships.defs[f]:void 0,S=s?.radarRange;return typeof S=="number"?S:C?.sensors?.radar_range??C?.combat?.sensorRadius??800}getRelation(t,s,f){return!t||!s?"neutral":f&&f[s]?f[s]:this.config.factions?.factions?.[t]?.relations?.[s]??"neutral"}updateSensors(t){for(const s of this.targets){this.npcStateManager.getState(s.obj);const f=this.npcStateManager.isInCombat(s.obj),C=this.npcStateManager.getContext(s.obj);if(f&&C)continue;const S=s.forceIntentUntil,r=this.pauseManager?.getAdjustedTime()??this.scene.time.now;if(S&&r<S){s.intent?.target?.active||(s.intent=null,s.forceIntentUntil=0);continue}S&&(s.forceIntentUntil=0),C&&C.aggression.level<.3,s.intent=null;const y=s.faction,e=this.getRadarRangeFor(s.obj),u=[];for(const p of this.targets){if(p===s)continue;const x=p.obj,T=x?.__state,E=typeof x?.alpha=="number"&&x.alpha<=.05||x?.visible===!1;if(!x?.active)continue;if(T==="docked"||T==="docking"){this.clearAssignmentsForTarget(x);continue}if(E)continue;Phaser.Math.Distance.Between(s.obj.x,s.obj.y,x.x,x.y)<=e&&u.push(p)}const m=this.ship,l=Phaser.Math.Distance.Between(s.obj.x,s.obj.y,m.x,m.y)<=e;l&&u.push({obj:m,faction:"player"});const h=s.aiProfileKey,a=(h?this.config.aiProfiles.profiles[h]:void 0)?.sensors?.react?.onFaction;let c=null;const o=u.sort((p,x)=>(p.faction==="pirate"?1:0)-(x.faction==="pirate"?1:0));for(const p of o){const x=this.getRelation(y,p.faction,s.overrides?.factions),T=a?.[x]??"ignore";if(!(p.obj?.__state==="docked"||p.obj?.__state==="docking")){if(T==="attack"){c={type:"attack",target:p.obj};break}if(T==="flee"){c={type:"flee",target:p.obj};break}}}const g=s.intent?.target;if(g&&(!g.active||g.__state==="docked"||g.__state==="docking")?s.intent=null:s.intent=c,s.faction==="pirate"){const p=s.__lastIntentType,x=s.__lastIntentObj;!!c?.type!=!!p||c?.type!==p||c?.target,s.__lastIntentType=c?.type,s.__lastIntentObj=c?.target??null}if(!l&&C){const p=this.pauseManager?.getAdjustedTime()??this.scene.time.now,x=p-C.aggression.lastDamageTime,T=p-C.aggression.lastCombatTime;x>15e3&&T>1e4&&C.aggression.level<.2&&(s.overrides=s.overrides??{},s.overrides.factions=s.overrides.factions??{},s.overrides.factions.player==="confrontation"&&delete s.overrides.factions.player)}else C||(s.overrides=s.overrides??{},s.overrides.factions=s.overrides.factions??{},s.overrides.factions.player==="confrontation"&&delete s.overrides.factions.player)}}getAimedTargetPoint(t,s,f){let C=typeof f?.accuracy=="number"?Phaser.Math.Clamp(f.accuracy,0,1):1,S=1;const r=this.targets.find(R=>R.obj===t);if(t===this.ship){const R=this.config.player?.shipId??this.config.ships.current,O=this.config.ships.defs[R]?.combat?.accuracy;typeof O=="number"&&(S=Phaser.Math.Clamp(O,0,1))}else if(r){const R=r.shipId??this.config.ships.current,O=this.config.ships.defs[R]?.combat?.accuracy;typeof O=="number"&&(S=Phaser.Math.Clamp(O,0,1))}const y=Phaser.Math.Clamp(C*S,0,1),e=s.__prevPos||{x:s.x,y:s.y},u=Math.max(1/60,this.scene.game.loop.delta/1e3),m=(s.x-e.x)/u,d=(s.y-e.y)/u;s.__prevPos={x:s.x,y:s.y};const l=f.projectileSpeed,h=t.x,n=t.y,a=s.x,c=s.y,o=a-h,v=c-n,g=m*m+d*d-l*l,p=2*(o*m+v*d),x=o*o+v*v;let T;if(Math.abs(g)<.001)T=x/Math.max(1,-p);else{const R=p*p-4*g*x;if(R<0)T=0;else{const A=(-p-Math.sqrt(R))/(2*g),O=(-p+Math.sqrt(R))/(2*g);T=Math.min(A,O),T<0&&(T=Math.max(A,O)),T<0&&(T=0)}}const E=a+m*T*y,M=c+d*T*y,P=Phaser.Math.Linear(a,E,y),w=Phaser.Math.Linear(c,M,y);return{x:P,y:w}}ensureBeam(t,s,f,C,S){const r=S<=f.range,y=t?.active&&C?.active,e=this.activeBeams.get(t)||new Map;this.activeBeams.set(t,e);const u=e.get(s);if(u&&u.target!==C&&this.stopBeamIfAny(t,s),!r||!y){u&&this.stopBeamIfAny(t,s);return}if(u)return;const m=(t?.depth??1)-.05,d=this.scene.add.graphics().setDepth(m),l=Math.max(10,f?.beam?.tickMs??100),h=Math.max(l,f?.beam?.durationMs??1e3),n=Math.max(0,f?.beam?.refreshMs??500),a=f?.beam?.damagePerTick??1,c=this.scene.time.addEvent({delay:l,loop:!0,callback:()=>{if(this.pauseManager?.isSystemPausable("combat")&&this.pauseManager?.getPaused())return;if(!t?.active||!C?.active){this.stopBeamIfAny(t,s);return}const g=C.x-t.x,p=C.y-t.y;if(Math.hypot(g,p)>f.range){this.stopBeamIfAny(t,s);return}if(this.applyDamage(C,a,t),f.hitEffect){const T=this.getEffectiveRadius(C),E=new Phaser.Math.Vector2(g,p).normalize(),M={x:C.x-E.x*T,y:C.y-E.y*T};this.spawnHitEffect(M.x,M.y,f)}}});this.pauseManager&&this.pauseManager.pauseTimer(c,`beam-tick-${t.__uniqueId||"player"}-${s}`);const o=()=>{if(this.pauseManager?.isSystemPausable("combat")&&this.pauseManager?.getPaused())return;if(!t?.active||!C?.active){this.stopBeamIfAny(t,s);return}const g=C.x-t.x,p=C.y-t.y;if(Math.hypot(g,p)>f.range){this.stopBeamIfAny(t,s);return}const T=this.getMuzzleWorldPositionFor(t,f.muzzleOffset),E=this.getEffectiveRadius(C),M=new Phaser.Math.Vector2(g,p).normalize(),P={x:C.x-M.x*E,y:C.y-M.y*E};d.clear();const w=(f?.beam?.color||f?.hitEffect?.color||f?.projectile?.color||"#60a5fa").replace("#","0x"),R=Math.max(1,Math.floor(f?.beam?.outerWidth??6)),A=Math.max(1,Math.floor(f?.beam?.innerWidth??3)),O=Phaser.Math.Clamp(f?.beam?.outerAlpha??.25,0,1),F=Phaser.Math.Clamp(f?.beam?.innerAlpha??.9,0,1);d.lineStyle(R,Number(w),O),d.beginPath(),d.moveTo(T.x,T.y),d.lineTo(P.x,P.y),d.strokePath(),d.lineStyle(A,Number(w),F),d.beginPath(),d.moveTo(T.x,T.y),d.lineTo(P.x,P.y),d.strokePath(),d.setAlpha(1),d.__hitPoint=P};if(this.scene.events.on(Phaser.Scenes.Events.UPDATE,o),d.__beamRedraw=o,e.set(s,{gfx:d,timer:c,target:C}),t===this.ship)try{this.scene.events.emit("beam-start",s,h)}catch{}const v=this.scene.time.delayedCall(h,()=>{const g=this.beamCooldowns.get(t)??{};this.beamCooldowns.set(t,g);const p=this.pauseManager?.getAdjustedTime()??this.scene.time.now;if(g[s]=p+n,t===this.ship)try{this.scene.events.emit("beam-refresh",s,n)}catch{}this.stopBeamIfAny(t,s)});if(this.pauseManager&&this.pauseManager.pauseTimer(v,`beam-duration-${t.__uniqueId||"player"}-${s}`),t===this.ship)try{this.scene.events.emit("player-weapon-fired",s,C)}catch{}}stopBeamIfAny(t,s){const f=this.activeBeams.get(t);if(!f)return;const C=f.get(s);if(C){try{C.timer.remove(!1)}catch{}try{const S=C.gfx.__beamRedraw;S&&this.scene.events.off(Phaser.Scenes.Events.UPDATE,S)}catch{}try{C.gfx.clear(),C.gfx.destroy()}catch{}if(this.pauseManager){const S=t.__uniqueId||"player";this.pauseManager.unregisterUpdateHandler(`beam-tick-${S}-${s}`),this.pauseManager.unregisterUpdateHandler(`beam-duration-${S}-${s}`)}f.delete(s)}}spawnHitEffect(t,s,f){const C=Number(f.hitEffect.color.replace("#","0x")),S=f.hitEffect.radius??16,r=this.scene.add.circle(t,s,S,C,.6).setDepth(.9);this.scene.tweens.add({targets:r,alpha:0,scale:1.4,duration:f.hitEffect.durationMs??200,onComplete:()=>r.destroy()})}floatDamageText(t,s,f){const C=this.scene.add.text(t,s,`-${f}`,{color:"#f87171",fontSize:"24px"}).setOrigin(.5).setDepth(1.2);this.scene.tweens.add({targets:C,y:s-30,alpha:0,duration:700,ease:"Sine.easeOut",onComplete:()=>C.destroy()})}resolveDisplayName(t){const s=t.shipId;return s&&this.config.ships?.defs?.[s]?.displayName?this.config.ships.defs[s].displayName:null}refreshCombatRings(){const t=new Set;for(const s of this.playerWeaponTargets.values())s&&s.active&&t.add(s);for(const s of this.targets)s.intent?.target===this.ship&&t.add(s.obj);for(const[s,f]of this.combatRings.entries())t.has(s)||(f.destroy(),this.combatRings.delete(s));for(const s of t.values())if(!this.combatRings.has(s)){const f=this.getEffectiveRadius(s)+5,C=this.scene.add.circle(s.x,s.y,f,11088422,.12).setDepth(.44);C.setStrokeStyle(2,11088422,1),this.combatRings.set(s,C)}}refreshCombatUIAssigned(){const t=new Set;for(const s of this.playerWeaponTargets.values())s&&s.active&&t.add(s);for(const s of this.targets)s.intent?.target===this.ship&&t.add(s.obj);for(const s of this.targets)if(t.has(s.obj)){if(s.hpBarBg.setVisible(!0),s.hpBarFill.setVisible(!0),!s.nameLabel){this.resolveDisplayName(s);const m=`${this.resolveDisplayName(s)||"Unknown"} #${s.obj.__uniqueId||""}`;s.nameLabel=this.scene.add.text(0,0,m,{color:"#ffffff",fontSize:"16px",fontFamily:"HooskaiChamferedSquare"}).setOrigin(.5,1).setDepth(.7)}const S=this.getRelation("player",s.faction,s.overrides?.factions)==="confrontation"?"#A93226":"#9E9382";s.nameLabel.setColor(S);const y=`${this.resolveDisplayName(s)||"Unknown"} #${s.obj.__uniqueId||""}`;s.nameLabel.setText(y+""),s.nameLabel.setVisible(!0),this.updateHpBar(s)}else s.obj!==this.selectedTarget&&(s.hpBarBg.setVisible(!1),s.hpBarFill.setVisible(!1),s.nameLabel?.setVisible(!1))}clearAssignmentsForTarget(t){const s=[];for(const[f,C]of Array.from(this.playerWeaponTargets.entries()))C===t&&(this.playerWeaponTargets.delete(f),s.push(f));if(s.length){try{this.scene.events.emit("player-weapon-target-cleared",t,s)}catch{}this.refreshCombatRings(),this.refreshCombatUIAssigned()}}forceCleanupInactiveTargets(){const t=[];for(const s of this.targets)if(!s.obj||!s.obj.active){try{s.obj.destroy?.()}catch{}try{s.hpBarBg.destroy()}catch{}try{s.hpBarFill.destroy()}catch{}try{s.nameLabel?.destroy()}catch{}t.push(s.obj)}t.length&&(this.targets=this.targets.filter(s=>!t.includes(s.obj)),t.forEach(s=>{this.npcStateManager.unregisterNPC(s);const f=this.combatRings.get(s);if(f){try{f.destroy()}catch{}this.combatRings.delete(s)}}))}destroy(){this.npcStateManager.destroy(),this.scene.events.off(Phaser.Scenes.Events.UPDATE,this.update,this)}}class AN{scene;config;currentRadarRange=1200;constructor(t,s){this.scene=t,this.config=s}getRadarRange(){const t=this.config.player?.shipId??this.config.ships.current,s=this.config.ships.defs[t];return s?.sensors?.radar_range?this.currentRadarRange=s.sensors.radar_range:s?.combat?.sensorRadius&&(this.currentRadarRange=s.combat.sensorRadius),this.currentRadarRange}setRadarRange(t){this.currentRadarRange=t}calculateVisibilityZones(t){const s=this.config.gameplay?.fogOfWar,f=s?.fadeZone?.innerRadius??.85,C=s?.fadeZone?.outerRadius??1.15;return{innerRadius:t*f,fadeStartRadius:t*f,fadeEndRadius:t,outerRadius:t*C}}isInRadarRange(t,s,f,C){return Math.hypot(t-f,s-C)<=this.getRadarRange()}}class ON{scene;constructor(t){this.scene=t}updateObjectVisibility(t,s,f){const C={innerRadius:.85,outerRadius:1.15},S=this.calculateAlpha(s,f,C);S<=0?this.setObjectVisible(t,!1):(this.setObjectVisible(t,!0),this.setObjectAlpha(t,S))}calculateAlpha(t,s,f){const C=s*f.innerRadius,S=s*f.outerRadius;return t<=C?1:t<=s?1-(t-C)/(s-C)*.5:t<=S?.5-(t-s)/(S-s)*.5:0}setObjectVisible(t,s){"setVisible"in t&&typeof t.setVisible=="function"&&t.setVisible(s)}setObjectAlpha(t,s){"setAlpha"in t&&typeof t.setAlpha=="function"?t.setAlpha(s):"alpha"in t&&(t.alpha=s)}}class bN{scene;config;radarSystem;visibilityManager;trackedObjects=new Map;playerX=0;playerY=0;enabled=!0;lastUpdateTime=0;radarRing;constructor(t,s){this.scene=t,this.config=s,this.radarSystem=new AN(t,s),this.visibilityManager=new ON(t)}init(){const t=this.config.gameplay?.fogOfWar;this.enabled=t?.enabled??!0,this.enabled&&(this.createRadarRing(),this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.update,this))}update(t){if(this.enabled)try{const s=this.scene.time.now,f=this.config.gameplay?.fogOfWar,C=f?.performance?.updateInterval??50;if(s-this.lastUpdateTime<C)return;this.lastUpdateTime=s;const S=this.radarSystem.getRadarRange(),r=f?.performance?.maxObjectsPerFrame??20;let y=0;const e=[];for(const[u,m]of this.trackedObjects){if(y>=r)break;if(!u||!u.active||u.scene!==this.scene){e.push(u);continue}try{const d=u.x,l=u.y;if(typeof d!="number"||typeof l!="number"||isNaN(d)||isNaN(l))continue;const h=Math.hypot(d-this.playerX,l-this.playerY);if(m.isStatic){this.visibilityManager.setObjectVisible(u,!0),this.visibilityManager.setObjectAlpha(u,m.originalAlpha);continue}this.visibilityManager.updateObjectVisibility(u,h,S),m.lastDistance=h,y++}catch(d){console.warn("[FogOfWar] Error processing object:",d),e.push(u)}}for(const u of e)this.unregisterObject(u);this.updateRadarRing()}catch(s){console.error("[FogOfWar] Critical error in update:",s)}}registerStaticObject(t,s){if(!t||!t.active){console.warn("[FogOfWar] Attempted to register invalid static object");return}try{const f=t.alpha??1,C={gameObject:t,type:s,isStatic:!0,lastDistance:0,lastAlpha:f,needsUpdate:!1,originalAlpha:f};this.trackedObjects.set(t,C)}catch(f){console.error("[FogOfWar] Error registering static object:",f)}}registerDynamicObject(t,s){if(!t||!t.active){console.warn("[FogOfWar] Attempted to register invalid dynamic object");return}try{const f=t.alpha??1,C={gameObject:t,type:s,isStatic:!1,lastDistance:0,lastAlpha:f,needsUpdate:!0,originalAlpha:f};this.trackedObjects.set(t,C)}catch(f){console.error("[FogOfWar] Error registering dynamic object:",f)}}unregisterObject(t){this.trackedObjects.delete(t)}setPlayerPosition(t,s){this.playerX=t,this.playerY=s}setRadarRange(t){this.radarSystem.setRadarRange(t)}setEnabled(t){if(this.enabled=t,t)this.radarRing&&this.radarRing.setVisible(!1);else{for(const[s,f]of this.trackedObjects)this.visibilityManager.setObjectVisible(s,!0),this.visibilityManager.setObjectAlpha(s,f.originalAlpha);this.radarRing&&this.radarRing.setVisible(!0)}}isObjectVisible(t){const s=this.trackedObjects.get(t);if(!s||s.isStatic)return!0;const f=t.x,C=t.y,S=Math.hypot(f-this.playerX,C-this.playerY),r=this.radarSystem.getRadarRange();return S<=r}getVisibleObjects(){const t=[];for(const[s,f]of this.trackedObjects)this.isObjectVisible(s)&&t.push(s);return t}getRadarRange(){return this.radarSystem.getRadarRange()}getPlayerPosition(){return{x:this.playerX,y:this.playerY}}destroy(){this.scene.events.off(Phaser.Scenes.Events.UPDATE,this.update,this),this.radarRing&&this.radarRing.destroy(),this.trackedObjects.clear()}createRadarRing(){const t=this.radarSystem.getRadarRange();this.radarRing=this.scene.add.circle(this.playerX,this.playerY,t,65280,0).setStrokeStyle(2,65280,.3).setDepth(1e3)}updateRadarRing(){if(this.radarRing)try{const t=this.radarSystem.getRadarRange();this.radarRing.setPosition(this.playerX,this.playerY),this.radarRing.setRadius(t)}catch(t){console.error("[FogOfWar] Error updating radar ring:",t)}}}class FN{scene;isPaused=!1;pausedTimers=new Map;pausedTweens=[];pausedPhysics=!1;config=null;pauseStartTime=0;totalPausedTime=0;pausedUpdateHandlers=new Map;constructor(t){this.scene=t,this.loadConfig()}togglePause(){return this.isPaused?this.resume():this.pause(),this.isPaused}pause(){this.isPaused||(this.isPaused=!0,this.pauseStartTime=this.scene.time.now,this.pauseTimers(),this.pauseTweens(),this.scene.events.emit("game-paused"),this.scene.scene.get("UIScene")?.events.emit("game-paused"),this.getDebugSetting("log_pause_events")&&console.log("[PauseManager] Game paused at",this.pauseStartTime))}resume(){if(!this.isPaused)return;const t=this.scene.time.now-this.pauseStartTime;this.totalPausedTime+=t,this.isPaused=!1,this.resumeTimers(),this.resumeTweens(),this.scene.events.emit("game-resumed",{pauseDuration:t,totalPausedTime:this.totalPausedTime}),this.scene.scene.get("UIScene")?.events.emit("game-resumed"),this.getDebugSetting("log_pause_events")&&console.log("[PauseManager] Game resumed, pause duration:",t,"total paused:",this.totalPausedTime)}getPaused(){return this.isPaused}getAdjustedTime(){const t=this.scene.time.now;return this.isPaused?this.pauseStartTime:t-this.totalPausedTime}adjustTimestamp(t){return this.totalPausedTime===0?t:t+this.totalPausedTime}pauseTimer(t,s){t&&t.getProgress()<1&&(t.paused=!0,this.pausedTimers.set(s,t))}resumeTimer(t){const s=this.pausedTimers.get(t);s&&(s.paused=!1,this.pausedTimers.delete(t))}registerUpdateHandler(t,s){this.pausedUpdateHandlers.set(t,s)}unregisterUpdateHandler(t){this.pausedUpdateHandlers.delete(t)}shouldProcessUpdate(t){return this.isPaused?this.config?this.isSystemNonPausable(t):["ui","camera","input"].includes(t):!0}async loadConfig(){try{const t=await fetch("/configs/general/pause.json");this.config=await t.json(),this.config?.debug?.log_pause_events&&console.log("[PauseManager] Config loaded:",this.config)}catch(t){console.warn("[PauseManager] Failed to load pause config, using defaults:",t),this.config=null}}isSystemPausable(t){if(!this.config)return!1;const s=this.config.systems.pausable;return s.core[t]===!0||s.npc[t]===!0||s.world[t]===!0||s.phaser[t]===!0}isSystemNonPausable(t){if(!this.config)return["ui","camera","input","minimap","background"].includes(t);const s=this.config.systems.non_pausable;return s.ui[t]===!0||s.visual[t]===!0||s.infrastructure[t]===!0||s.systems[t]===!0}getSpecialCase(t){return this.config?.special_cases?.[t]||null}getDebugSetting(t){return this.config?.debug?.[t]===!0}getSystemsInfo(){if(!this.config)return{pausable:[],nonPausable:[]};const t=[],s=[],f=this.config.systems.pausable;Object.keys(f.core).concat(Object.keys(f.npc),Object.keys(f.world),Object.keys(f.phaser)).forEach(S=>t.push(S));const C=this.config.systems.non_pausable;return Object.keys(C.ui).concat(Object.keys(C.visual),Object.keys(C.infrastructure),Object.keys(C.systems)).forEach(S=>s.push(S)),{pausable:t,nonPausable:s}}debugLogConfig(){if(!this.config){console.log("[PauseManager] No config loaded");return}const t=this.getSystemsInfo();console.group("[PauseManager] Configuration Info"),console.log("🔴 Pausable systems:",t.pausable),console.log("🟢 Non-pausable systems:",t.nonPausable),console.log("⚙️ Special cases:",Object.keys(this.config.special_cases||{})),console.log("🐛 Debug settings:",this.config.debug),console.groupEnd()}pauseTimers(){}resumeTimers(){for(const[t,s]of this.pausedTimers.entries())s&&(s.paused=!1);this.pausedTimers.clear()}pauseTweens(){const t=this.scene.tweens.getTweens?.()||[];let s=0,f=0,C=0;for(const S of t)if(S&&S.isPlaying()){if(S.__isUITween){f++,this.getDebugSetting("log_pause_events")&&console.log(`[PauseManager] Skipped UI tween: id=${S.id}, targets=${S.targets?.length}`);continue}S.pause(),this.pausedTweens.push(S),s++,this.getDebugSetting("log_pause_events")&&console.log(`[PauseManager] Paused tween: id=${S.id}, targets=${S.targets?.length}`)}else C++;this.getDebugSetting("log_pause_events")&&console.log(`[PauseManager] Tween summary: ${s} paused, ${f} skipped (UI), ${C} not playing, ${t.length} total`)}resumeTweens(){for(const t of this.pausedTweens)t&&t.isPaused()&&t.resume();this.pausedTweens=[]}destroy(){this.pausedTimers.clear(),this.pausedTweens=[],this.pausedUpdateHandlers.clear()}}class LN{scene;currentCycle=10;cycleTimer=null;cycleStartTime=0;isPaused=!1;CYCLE_DURATION_MS=180*1e3;INITIAL_CYCLE=10;eventListeners=new Map;constructor(t){this.scene=t}init(){this.currentCycle=this.INITIAL_CYCLE,this.startNewCycle()}startNewCycle(){this.cycleStartTime=this.scene.time.now,this.cycleTimer=this.scene.time.delayedCall(this.CYCLE_DURATION_MS,this.onCycleComplete,[],this),this.emitEvent("cycle_start",{type:"cycle_complete",cycle:this.currentCycle,progress:0})}onCycleComplete(){this.currentCycle++,this.emitEvent("cycle_complete",{type:"cycle_complete",cycle:this.currentCycle-1,progress:1}),this.startNewCycle()}getCurrentCycle(){return this.currentCycle}getCurrentCycleFormatted(){return this.currentCycle.toString().padStart(4,"0")}getCycleProgress(){if(!this.cycleTimer||this.isPaused)return 0;const t=this.scene.time.now-this.cycleStartTime;return Math.min(t/this.CYCLE_DURATION_MS,1)}getCycleTimeRemaining(){if(!this.cycleTimer||this.isPaused)return this.CYCLE_DURATION_MS;const t=this.scene.time.now-this.cycleStartTime;return Math.max(0,this.CYCLE_DURATION_MS-t)}getCycleTimeRemainingFormatted(){const t=this.getCycleTimeRemaining(),s=Math.ceil(t/1e3),f=Math.floor(s/60),C=s%60;return`${f.toString().padStart(2,"0")}:${C.toString().padStart(2,"0")}`}pause(){this.isPaused||(this.isPaused=!0,this.cycleTimer&&(this.cycleTimer.paused=!0))}resume(){this.isPaused&&(this.isPaused=!1,this.cycleTimer&&(this.cycleTimer.paused=!1))}forceCompleteCycle(){this.cycleTimer&&this.cycleTimer.remove(),this.onCycleComplete()}setCycle(t){this.currentCycle=Math.max(1,t),this.cycleTimer&&this.cycleTimer.remove(),this.startNewCycle()}addEventListener(t,s){this.eventListeners.has(t)||this.eventListeners.set(t,[]),this.eventListeners.get(t).push(s)}removeEventListener(t,s){const f=this.eventListeners.get(t);if(f){const C=f.indexOf(s);C>-1&&f.splice(C,1)}}emitEvent(t,s){const f=this.eventListeners.get(t);f&&f.forEach(C=>{try{C(s)}catch(S){console.error(`[TimeManager] Error in event listener for ${t}:`,S)}}),this.scene.events.emit(`time-${t}`,s)}getTimeStats(){return{currentCycle:this.currentCycle,cycleFormatted:this.getCurrentCycleFormatted(),progress:this.getCycleProgress(),remainingMs:this.getCycleTimeRemaining(),remainingFormatted:this.getCycleTimeRemainingFormatted(),isPaused:this.isPaused,cycleDurationMs:this.CYCLE_DURATION_MS}}destroy(){this.cycleTimer&&(this.cycleTimer.remove(),this.cycleTimer=null),this.eventListeners.clear()}}class DN extends lt.Scene{config;save;cameraMgr;inputMgr;pathfinding;movement;combat;fogOfWar;pauseManager;timeManager;npcs=[];rightMouseHoldStart=0;isRightMouseDown=!1;rightMouseStartPos={x:0,y:0};rightClickTargetNPC=null;lastPointerWorld;ship;playerHp;playerHpMax;routeGraphics;clickMarker;planets=[];encounterMarkers=[];starfield;bgTile;bgParallax=.2;aimLine;orbitalSpeedScale=.1;npcSim;constructor(){super("StarSystemScene")}async create(){this.config=new CN(this),await this.config.loadAll();const t=this.cache.json.get("systems_index")??await(async()=>{try{return await(await fetch("/configs/systems/systems.json")).json()}catch{}return await(await fetch("/configs/systems.json")).json()})(),s=this.cache.json.get("system_profiles")??await(async()=>{try{return await(await fetch("/configs/systems/system_profiles.json")).json()}catch{}return await(await fetch("/configs/system_profiles.json")).json()})(),C=(()=>{try{return localStorage.getItem("sf_selectedSystem")}catch{return null}})()||t.current,S=t.defs[C];if(S?.type==="procedural"){const{generateSystem:D}=await Da(async()=>{const{generateSystem:B}=await import("./SystemGenerator-B3BGUg1A.js");return{generateSystem:B}},[]),I=s.profiles[S.profile??"default"];this.config.system=D(I)}else S?.type==="static"&&S.configPath&&(this.config.system=await fetch(S.configPath).then(D=>D.json()));this.save=new SN(this,this.config),this.cameraMgr=new PN(this,this.config,this.save),this.inputMgr=new EN(this,this.config),this.pathfinding=new MN(this,this.config),this.movement=new Dy(this,this.config),this.combat=new Wd(this,this.config),this.fogOfWar=new bN(this,this.config),this.pauseManager=new FN(this),this.timeManager=new LN(this),this.timeManager.init(),this.combat.setPauseManager(this.pauseManager),this.combat.npcStateManager?.setPauseManager(this.pauseManager),this.movement.setPauseManager(this.pauseManager),this.events.on("game-paused",()=>{this.timeManager.pause()}),this.events.on("game-resumed",()=>{this.timeManager.resume()});const r=this.config.system,y=25e3,e=Math.min(r.size.width,y),u=Math.min(r.size.height,y);this.cameras.main.setBounds(0,0,e,u);const{BackgroundTiler:m}=await Da(async()=>{const{BackgroundTiler:D}=await import("./BackgroundTiler-Bibs2MOk.js");return{BackgroundTiler:D}},[]);try{this.textures.get("bg_stars1").setFilter(lt.Textures.FilterMode.LINEAR)}catch{}const d=new m(this,"bg_stars1",-30,.6,1,lt.BlendModes.SCREEN);d.init(r.size.width,r.size.height);let l=null;if(this.textures.exists("bg_nebula_blue")){try{this.textures.get("bg_nebula_blue").setFilter(lt.Textures.FilterMode.LINEAR)}catch{}l=new m(this,"bg_nebula_blue",-25,.8,.8,lt.BlendModes.SCREEN),l.init(r.size.width,r.size.height)}this.events.on(lt.Scenes.Events.UPDATE,()=>{d.update(),l&&l.update()}),this.starfield=this.add.graphics().setDepth(-15),this.drawStarfield(),this.events.on(lt.Scenes.Events.UPDATE,this.updateBackground,this),this.scale.on("resize",D=>{this.bgTile&&(this.bgTile.width=D.width,this.bgTile.height=D.height)});const h=this.add.circle(r.star.x,r.star.y,80,16763904).setDepth(0);this.fogOfWar.init(),this.fogOfWar.registerStaticObject(h,As.STAR);const{SpaceStationManager:n}=await Da(async()=>{const{SpaceStationManager:D}=await import("./SpaceStationManager-BByg0Xf7.js");return{SpaceStationManager:D}},[]);new n(this,this.config).init();for(const D of r.poi){const I=r.star.x+(D.x??0),B=r.star.y+(D.y??0),z=this.add.circle(I,B,24,10066329,.4).setDepth(.5),Y=this.add.text(I,B,"?",{color:"#ffffff",fontSize:"24px",fontStyle:"bold"}).setOrigin(.5).setDepth(.6),H=this.config.systemProfiles?.profiles?.default?.encounters?.types?.find(U=>U.name===D.name),N=H&&typeof H.activation_range=="number"?H.activation_range:400;this.encounterMarkers.push({id:D.id,name:D.name,x:I,y:B,typeId:H?.id,activationRange:N,marker:z,label:Y}),this.fogOfWar.registerStaticObject(z,D.discovered?As.POI_VISIBLE:As.POI_HIDDEN),this.fogOfWar.registerStaticObject(Y,D.discovered?As.POI_VISIBLE:As.POI_HIDDEN)}for(let D=0;D<r.planets.length;D++){const I=r.planets[D],B=`planet_${(D%10).toString().padStart(2,"0")}`,z=this.add.image(0,0,B).setDepth(0);z.setDisplaySize(512,512).setOrigin(.5);const Y=Math.random()*360,X={obj:z,data:{...I,angleDeg:Y}};this.planets.push(X);const H=lt.Math.DegToRad(Y),N=r.star.x+Math.cos(H)*I.orbit.radius,U=r.star.y+Math.sin(H)*I.orbit.radius;z.x=N,z.y=U,this.fogOfWar.registerStaticObject(z,As.PLANET);const L=this.add.text(N,U-180,I.id,{fontFamily:"HooskaiChamferedSquare",fontSize:"36px",color:"#ffffff",stroke:"#000000",strokeThickness:6}).setOrigin(.5).setDepth(2);X.label=L;const G=r.planets.find(V=>V.id===I.id);G&&(G._x=N,G._y=U)}try{const{NPCLazySimulationManager:D}=await Da(async()=>{const{NPCLazySimulationManager:I}=await import("./NPCLazySimulationManager-BnKUbXt6.js");return{NPCLazySimulationManager:I}},[]);this.npcSim=new D(this,this.config,this.fogOfWar),this.npcSim.setPauseManager(this.pauseManager),this.npcSim.init()}catch{}const c={x:r.star.x+300,y:r.star.y,headingDeg:0,zoom:1},o=this.config.player?.start??{},v=this.save.getLastPlayerState()??{x:o.x??c.x,y:o.y??c.y,headingDeg:o.headingDeg??c.headingDeg,zoom:o.zoom??c.zoom},g=this.config.player?.shipId??this.config.ships.current,p=this.config.ships.defs[g],x=p?.sprite,T=this.textures.exists("ship_alpha")?"ship_alpha":"ship_alpha_public",E=x?.key&&this.textures.exists(x.key)?x.key:T;this.ship=this.add.image(v.x,v.y,E);const M=x?.origin?.x??.5,P=x?.origin?.y??.5;this.ship.setOrigin(M,P);const w=x?.displaySize?.width??64,R=x?.displaySize?.height??128;this.ship.setDisplaySize(w,R),this.ship.setDepth(1);const A=lt.Math.DegToRad(x?.noseOffsetDeg??0);this.ship.setRotation(lt.Math.DegToRad(v.headingDeg)+A),this.cameraMgr.enableFollow(this.ship),this.combat.attachShip(this.ship),this.combat.setFogOfWar(this.fogOfWar),this.cameraMgr.setZoom(this.config.player?.start?.zoom??v.zoom??1),this.fogOfWar.setPlayerPosition(this.ship.x,this.ship.y),this.playerHpMax=p?.hull??100,this.playerHp=this.playerHpMax,this.routeGraphics=this.add.graphics({lineStyle:{width:2,color:5100287,alpha:.85}}).setDepth(.5),this.aimLine=this.add.graphics({}).setDepth(.6),this.events.emit("system-ready",{config:this.config,ship:this.ship,pauseManager:this.pauseManager,timeManager:this.timeManager}),this.setupMouseControls(),this.combat.bindInput(this.inputMgr),this.input.keyboard?.addKey(lt.Input.Keyboard.KeyCodes.F)?.on("down",()=>{this.cameraMgr.isFollowing()?this.cameraMgr.disableFollow():this.cameraMgr.enableFollow(this.ship)}),this.input.keyboard?.addKey(lt.Input.Keyboard.KeyCodes.P)?.on("down",()=>{this.pauseManager.togglePause()}),this.input.keyboard?.addKey(lt.Input.Keyboard.KeyCodes.D)?.on("down",D=>{D.ctrlKey&&D.shiftKey&&this.pauseManager.debugLogConfig()}),this.events.on(lt.Scenes.Events.SHUTDOWN,()=>{const D=this.cameras?this.cameras.main:void 0;this.save.setLastPlayerState({x:this.ship?.x??0,y:this.ship?.y??0,headingDeg:lt.Math.RadToDeg(this.ship?.rotation??0),zoom:D?.zoom??1}),this.save.flush()}),this.events.on(lt.Scenes.Events.UPDATE,(D,I)=>{(!this.pauseManager.isSystemPausable("planetOrbits")||!this.pauseManager.getPaused())&&this.updateSystem(D,I)}),this.events.on(lt.Scenes.Events.UPDATE,()=>{(!this.pauseManager.isSystemPausable("combat")||!this.pauseManager.getPaused())&&this.drawAimLine()}),this.events.on(lt.Scenes.Events.UPDATE,()=>{(!this.pauseManager.isSystemPausable("encounters")||!this.pauseManager.getPaused())&&this.updateEncounters()}),this.events.on(lt.Scenes.Events.UPDATE,(D,I)=>{!this.pauseManager.isSystemPausable("npcStateManager")||!this.pauseManager.getPaused()?this.updateNPCs(I):this.pauseManager.getDebugSetting?.("log_system_states")&&console.log("[StarSystemScene] updateNPCs paused")}),this.events.on(lt.Scenes.Events.UPDATE,(D,I)=>{!this.pauseManager.isSystemPausable("npcMovementManager")||!this.pauseManager.getPaused()?this.updatePatrolNPCs(I):this.pauseManager.getDebugSetting?.("log_system_states")&&console.log("[StarSystemScene] updatePatrolNPCs paused")}),this.events.on(lt.Scenes.Events.UPDATE,(D,I)=>{(!this.pauseManager.isSystemPausable("fogOfWar")||!this.pauseManager.getPaused())&&this.ship&&this.fogOfWar&&this.fogOfWar.setPlayerPosition(this.ship.x,this.ship.y)})}applyDamageToPlayer(t){this.playerHp=Math.max(0,this.playerHp-t),this.events.emit("player-damaged",this.playerHp);try{const s=this.scene.get("UIScene"),f=this,C=this.add.text(this.ship.x,this.ship.y-70,`-${t}`,{color:"#f87171",fontSize:"24px"}).setOrigin(.5).setDepth(2);this.tweens.add({targets:C,y:this.ship.y-100,alpha:0,duration:700,ease:"Sine.easeOut",onComplete:()=>C.destroy()})}catch{}this.playerHp<=0&&this.gameOver()}getPauseManager(){return this.pauseManager}getTimeManager(){return this.timeManager}gameOver(){const t=this.scene.get("UIScene");t?.showGameOver&&t.showGameOver()}drawPath(t){if(this.routeGraphics.clear(),t.length===0)return;this.routeGraphics.beginPath(),this.routeGraphics.moveTo(t[0].x,t[0].y);for(let f=1;f<t.length;f++)this.routeGraphics.lineTo(t[f].x,t[f].y);this.routeGraphics.strokePath();const s=t.length;if(s>=2){const f=t[s-2],C=t[s-1],S=Math.atan2(C.y-f.y,C.x-f.x),r=14,y=new lt.Math.Vector2(C.x-Math.cos(S)*r+Math.cos(S+Math.PI/2)*(r*.5),C.y-Math.sin(S)*r+Math.sin(S+Math.PI/2)*(r*.5)),e=new lt.Math.Vector2(C.x-Math.cos(S)*r+Math.cos(S-Math.PI/2)*(r*.5),C.y-Math.sin(S)*r+Math.sin(S-Math.PI/2)*(r*.5));this.routeGraphics.fillStyle(5100287,.9),this.routeGraphics.fillTriangle(C.x,C.y,y.x,y.y,e.x,e.y)}}updateSystem(t,s){const f=this.config?.system;if(!f||!f.star||!f.planets)return;const C=s/1e3;for(const S of this.planets){S.data.angleDeg=(S.data.angleDeg+S.data.orbit.angularSpeedDegPerSec*C*this.orbitalSpeedScale)%360;const r=lt.Math.DegToRad(S.data.angleDeg),y=f.star.x+Math.cos(r)*S.data.orbit.radius,e=f.star.y+Math.sin(r)*S.data.orbit.radius;S.obj.x=y,S.obj.y=e,S.label&&S.label.setPosition(y,e-180);const u=f.planets.find(m=>m.id===S.data.id);u&&(u._x=y,u._y=e)}}drawAimLine(){if(!this.aimLine)return;this.aimLine.clear();const t=this.movement.getTarget();t&&(this.aimLine.lineStyle(2,16777215,.2),this.aimLine.beginPath(),this.aimLine.moveTo(this.ship.x,this.ship.y),this.aimLine.lineTo(t.x,t.y),this.aimLine.strokePath(),this.aimLine.lineStyle(2,16777215,1),this.aimLine.strokeCircle(t.x,t.y,8),this.aimLine.fillStyle(16737380,1),this.aimLine.fillCircle(t.x,t.y,8),this.aimLine.lineStyle(2,16777215,1),this.aimLine.strokeCircle(t.x,t.y,8))}updateEncounters(){const t=this.ship;if(t){for(const s of this.encounterMarkers)if(Math.hypot(s.x-t.x,s.y-t.y)<=(s.activationRange??400)){this.showEncounterBanner(s.name),s.marker.destroy(),s.label.destroy(),s.typeId==="lost_treasure"?this.add.rectangle(s.x,s.y,48,48,16769126).setDepth(.4):s.typeId,this.encounterMarkers=this.encounterMarkers.filter(C=>C!==s);break}}}getPlanetWorldPosById(t){const s=this.planets.find(S=>S.data?.id===t);if(s&&s.obj)return{x:s.obj.x,y:s.obj.y};const f=this.config?.system,C=f?.planets?.find(S=>S.id===t);if(C){const S=C._x??f.star.x+C.orbit.radius,r=C._y??f.star.y;return{x:S,y:r}}return null}updatePatrolNPCs(t){const s=this.config?.system;if(!(!s||!Array.isArray(s.planets)))for(const f of this.npcs){if(f.__behavior!=="patrol")continue;const C=this.combat,S=C?.targets?.find(d=>d.obj===f);if(S&&S.intent){const d=S.intent;if(d?.type==="attack"){const l=d.target;(!l?.active||l.__state==="docked")&&(f.__targetPatrol=null)}continue}let r=f.__targetPatrol;if(!r||r._isPlanet&&!this.getPlanetWorldPosById(r.id)){if(Math.random()<.2){const l=Math.random()*Math.PI*2,h=300+Math.random()*400;f.__targetPatrol={_isPoint:!0,x:s.star.x+Math.cos(l)*h,y:s.star.y+Math.sin(l)*h}}else{const l=this.pickRandomPlanet();f.__targetPatrol={_isPlanet:!0,id:l.id}}r=f.__targetPatrol}let y=s.star.x,e=s.star.y;if(r._isPoint)y=r.x,e=r.y;else if(r._isPlanet){const d=this.getPlanetWorldPosById(r.id);d&&(y=d.x,e=d.y)}C.npcStateManager?.addMovementCommand(f,"move_to",{x:y,y:e},void 0,En.PATROL,"scene_patrol")!==!1&&(C.npcMovement.setNPCMode(f,"move_to"),C.npcMovement.setNPCTarget(f,{x:y,y:e})),Math.hypot(y-f.x,e-f.y)<160&&(f.__targetPatrol=null)}}showEncounterBanner(t){const s=this.scale.width,f=this.scale.height,C=this.add.text(s/2,f/2,`Вы нашли: ${t}`,{color:"#ffffff",fontSize:"28px",fontStyle:"bold"}).setOrigin(.5).setScrollFactor(0).setDepth(5e3);this.tweens.add({targets:C,alpha:0,duration:2200,ease:"Sine.easeIn",onComplete:()=>C.destroy()})}updateNPCs(t){const s=this.config?.system;if(!(!s||!Array.isArray(s.planets)||!this.ship))for(const f of this.npcs){const C=f.__behavior;if(C!=="planet_trader"&&C!=="orbital_trade")continue;const S=this.combat,r=S?.targets?.find(d=>d.obj===f);if(r&&r.intent)continue;let y=f.__targetPlanet;y||(f.__targetPlanet=this.pickRandomPlanet(),y=f.__targetPlanet);const e=s.planets.find(d=>d.id===y.id);if(!e){f.__targetPlanet=this.pickRandomPlanet();continue}const u=this.getPlanetWorldPosById(y.id)??{x:e?._x,y:e?._y},m=f.__state??"travel";if(m==="travel"){const d=this.planets.find(a=>a.data?.id===y.id);S.npcStateManager?.addMovementCommand(f,"move_to",{x:u.x,y:u.y,targetObject:d?.obj},void 0,En.TRADE,"scene_trader")!==!1&&S.npcMovement.setNPCTarget(f,{x:u.x,y:u.y,targetObject:d?.obj});const h=Math.hypot(u.x-f.x,u.y-f.y),n=y.dockRange??this.config.gameplay.dock_range??220;if(h<n){f.__state="docking";try{S.clearAssignmentsForTarget?.(f)}catch{}const a=3e3+Math.random()*1e3,c=f.__baseScaleX??f.scaleX??1,o=f.__baseScaleY??f.scaleY??1;this.tweens.add({targets:f,x:u.x,y:u.y,scaleX:c*.2,scaleY:o*.2,alpha:0,duration:a,ease:"Sine.easeInOut",onComplete:()=>{f.__state="docked",this.time.delayedCall(1e4+Math.random()*5e4,()=>{if(!f.active)return;const v=s.planets.filter(E=>E.id!==y.id);v.length>0?f.__targetPlanet=v[Math.floor(Math.random()*v.length)]:f.__targetPlanet=y,f.__state="undocking";const g=Math.random()*Math.PI*2,p=this.getPlanetWorldPosById(y.id),x=p?.x??s.star.x+y.orbit.radius,T=p?.y??s.star.y;f.x=x,f.y=T,this.tweens.add({targets:f,x:x+Math.cos(g)*200,y:T+Math.sin(g)*200,scaleX:c,scaleY:o,alpha:1,duration:a,ease:"Sine.easeInOut",onComplete:()=>{f.__state="travel"}})})}})}}else if(m==="docking"||m==="docked"||m==="undocking")continue}}pickRandomPlanet(){const t=this.config.system,s=Math.floor(Math.random()*t.planets.length);return t.planets[s]}pickNearestPlanet(t,s){const f=this.config.system;let C=null,S=Number.POSITIVE_INFINITY;for(const r of f.planets){const y=r._x??f.star.x+r.orbit.radius,e=r._y??f.star.y,u=Math.hypot(y-t,e-s);u<S&&(S=u,C=r)}return C??null}drawStarfield(){const t=this.starfield;t.clear();const s=this.config.system,f=600;t.fillStyle(16777215,.3);for(let C=0;C<f;C++){const S=Math.random()*s.size.width,r=Math.random()*s.size.height,y=Math.random()*1.5+.2;t.fillCircle(S,r,y)}}updateBackground(){if(!this.bgTile)return;const t=this.cameras.main;this.bgTile.tilePositionX=-t.scrollX*this.bgParallax,this.bgTile.tilePositionY=-t.scrollY*this.bgParallax}getUIScene(){return this.scene.get("UIScene")}findNPCAt(t,s){for(const f of this.npcs){if(!f.active)continue;const C=f.__state;if(C==="docking"||C==="docked"||C==="undocking"||typeof f.alpha=="number"&&f.alpha<=.05)continue;const S=Math.max(f.displayWidth,f.displayHeight)*.5+15;if(Math.hypot(f.x-t,f.y-s)<=S)return f}return null}setupMouseControls(){this.input.on("pointerdown",t=>{t.rightButtonDown()&&(this.isRightMouseDown=!0,this.rightMouseHoldStart=this.time.now,this.rightMouseStartPos={x:t.worldX,y:t.worldY},this.rightClickTargetNPC=this.findNPCAt(t.worldX,t.worldY))}),this.input.on("pointerup",t=>{if(t.rightButtonReleased()){if(this.isRightMouseDown){this.isRightMouseDown=!1;const s=this.time.now-this.rightMouseHoldStart;if(this.getUIScene().isRadialMenuVisible()){const f=this.getUIScene().getRadialMenuSelection();this.getUIScene().hideRadialMenu(),f&&this.executeMovementCommand(f,t.worldX,t.worldY,this.rightClickTargetNPC)}else s<200&&this.executeSimpleMoveTo(t.worldX,t.worldY)}else this.executeSimpleMoveTo(t.worldX,t.worldY);this.rightClickTargetNPC=null}}),this.input.on("pointermove",t=>{this.isRightMouseDown&&t.rightButtonDown()&&(this.time.now-this.rightMouseHoldStart>200&&this.rightClickTargetNPC&&!this.getUIScene().isRadialMenuVisible()&&this.getUIScene().showRadialMenu(t.x,t.y),this.getUIScene().isRadialMenuVisible()&&(this.getUIScene().updateRadialMenuSelection(t.y),this.lastPointerWorld={x:t.worldX,y:t.worldY}))})}executeSimpleMoveTo(t,s){const f=this.findNPCAt(t,s);f?(this.movement.pursueTarget(f,this.ship),this.clickMarker&&this.clickMarker.setVisible(!1)):(this.clickMarker?(this.clickMarker.setPosition(t,s).setVisible(!0),this.clickMarker.setFillStyle(65416),this.clickMarker.setRadius(10)):this.clickMarker=this.add.circle(t,s,10,65416).setDepth(.55).setAlpha(.7),this.movement.moveTo(new lt.Math.Vector2(t,s),this.ship)),this.drawAimLine()}executeMovementCommand(t,s,f,C){const S=C||this.findNPCAt(s,f);S?this.clickMarker&&this.clickMarker.setVisible(!1):this.clickMarker?(this.clickMarker.setPosition(s,f).setVisible(!0),this.clickMarker.setFillStyle(65416),this.clickMarker.setRadius(10)):this.clickMarker=this.add.circle(s,f,10,65416).setDepth(.55).setAlpha(.7);const r=new lt.Math.Vector2(s,f);switch(t.mode){case"follow":S?this.movement.followObject(S,t.distance,this.ship):this.movement.followTarget(r,t.distance,this.ship);break;case"orbit":S?this.movement.orbitObject(S,t.distance,this.ship):this.movement.orbitTarget(r,t.distance,this.ship);break;default:this.movement.moveTo(r,this.ship);break}this.drawAimLine(),this.lastPointerWorld=void 0}}class IN{scene;config;g;width=240;height=180;worldW=1;worldH=1;shipRef=null;fogOfWar;constructor(t,s){this.scene=t,this.config=s}init(t,s,f,C){f&&(this.width=f),C&&(this.height=C);const S=this.config?.system;S?.size?(this.worldW=S.size.width,this.worldH=S.size.height):(this.worldW=5e3,this.worldH=5e3),this.g=this.scene.add.graphics(),this.g.setScrollFactor(0).setDepth(1e3),this.g._mx=t,this.g._my=s,this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.render,this)}attachShip(t){this.shipRef=t}setFogOfWar(t){this.fogOfWar=t}render(){if(!this.g)return;const t=this.g._mx??0,s=this.g._my??0,f=this.config?.system;if(!f){this.g.clear();const n=this.g._mx??0,a=this.g._my??0;this.g.fillStyle(0,.6),this.g.fillRect(n-4,a-4,this.width+8,this.height+8),this.g.lineStyle(1,10653550),this.g.strokeRect(n,a,this.width,this.height);return}const C=this.width/this.worldW,S=this.height/this.worldH;this.g.clear(),this.g.fillStyle(2894381,.97),this.g.fillRect(t-4,s-4,this.width+8,this.height+8),this.g.lineStyle(1,10653550),this.g.strokeRect(t,s,this.width,this.height);const r=t,y=s;this.width,this.height;const e=(n,a)=>n>=0&&a>=0&&n<=this.worldW&&a<=this.worldH,u=(n,a)=>({sx:r+n*C,sy:y+a*S});if(this.g.fillStyle(16763904,1),e(f.star.x,f.star.y)){const{sx:n,sy:a}=u(f.star.x,f.star.y);this.g.fillCircle(n,a,4)}for(const n of f.planets){const a=n._x??f.star.x+n.orbit.radius,c=n._y??f.star.y;if(e(a,c)){const{sx:o,sy:v}=u(a,c);this.g.fillStyle(49832,1),this.g.fillRect(o-1.5,v-1.5,3,3)}}if(Array.isArray(f.poi))for(const n of f.poi){const a=f.star.x+(n.x??0),c=f.star.y+(n.y??0);if(e(a,c)){const{sx:o,sy:v}=u(a,c);this.g.fillStyle(15787660,1),this.g.fillCircle(o,v,3.5)}}if(this.shipRef){const n=this.shipRef;if(e(n.x,n.y)){const{sx:a,sy:c}=u(n.x,n.y);this.g.fillStyle(6130331,1),this.g.fillRect(a-2,c-2,4,4)}}const m=this.scene.scene.get("StarSystemScene"),d=m?.combat;if(d&&Array.isArray(d.targets))for(const n of d.targets){const a=n.obj;if(!a||!a.active||a===this.shipRef||!e(a.x,a.y)||this.fogOfWar&&!this.fogOfWar.isObjectVisible(a))continue;const{sx:c,sy:o}=u(a.x,a.y),v="player",g=n.faction,p=d.getRelation?d.getRelation(v,g,void 0):"neutral";let x=10392450;p==="ally"?x=2278750:p==="confrontation"&&(x=11088422),this.g.fillStyle(x,1),this.g.fillCircle(c,o,2.2)}if(this.fogOfWar&&this.shipRef){const n=this.shipRef;if(e(n.x,n.y)){const a=this.fogOfWar.getRadarRange(),{sx:c,sy:o}=u(n.x,n.y),v=a*C;v>2&&(this.g.lineStyle(1,6130331,.6),this.g.strokeCircle(c,o,v))}}const h=m?.cameras?.main?.worldView;if(h){const n=t+h.x*C,a=s+h.y*S,c=h.width*C,o=h.height*S,v=t,g=s,p=t+this.width,x=s+this.height;!(n>p||n+c<v||a>x||a+o<g)&&(this.g.lineStyle(2,6750054,1),this.g.strokeRect(n,a,c,o))}}}class BN{scene;configRef;pauseManager;timeManager;combatManager;speedText;followToggle;hullFill;playerHp=null;shipNameText;shipIcon;systemTitleText;systemSectorText;weaponSlotsContainer;weaponPanel;hullBarWidth=1228;hullRect;uiTextResolution=2;gameOverGroup;followLabel;minimap;minimapHit;isMinimapDragging=!1;minimapBounds;pauseIndicator;pauseBlinkTween;cycleCounterText;cycleProgressBar;cycleProgressBarBg;slotRecords=[];selectedSlots=new Set;cursorIcons=new Map;cursorOrder=[];assignedIconsBySlot=new Map;cooldownBarsBySlot=new Map;outOfRangeTexts=new Map;assignedBlinkTweens=new Map;constructor(t){this.scene=t}init(t,s,f,C){this.configRef=t,this.pauseManager=f,this.timeManager=C,this.selectedSlots.clear(),this.cursorOrder=[],this.assignedIconsBySlot.clear(),this.createHUD(s),this.createWeaponBar(),this.createMinimap(s),this.createSystemTitle(),this.createPauseUI(),this.createTimeUI();const S=this.scene.scene.get("StarSystemScene");this.combatManager=S.combat,S.events.on("player-damaged",u=>this.onPlayerDamaged(u)),S.events.on("player-weapon-fired",u=>this.flashAssignedIcon(u)),S.events.on("player-weapon-target-cleared",(u,m)=>m.forEach(d=>this.removeAssignedIcon(d))),S.events.on("beam-start",(u,m)=>this.showBeamDuration(u,m)),S.events.on("weapon-out-of-range",(u,m)=>this.toggleOutOfRange(u,m)),this.scene.events.on("game-resumed",()=>{this.updateWeaponChargeBars()}),this.scene.events.on(lt.Scenes.Events.UPDATE,()=>this.updateHUD()),this.scene.events.on(lt.Scenes.Events.UPDATE,()=>this.updateFollowMode()),this.scene.events.on(lt.Scenes.Events.UPDATE,()=>this.realignCursorIcons()),this.scene.events.on(lt.Scenes.Events.UPDATE,()=>this.syncSlotsVisual()),this.scene.events.on(lt.Scenes.Events.UPDATE,()=>this.updateTimeUI()),this.scene.events.on(lt.Scenes.Events.UPDATE,()=>this.updateWeaponChargeBars());const r=this.scene.input.keyboard;[lt.Input.Keyboard.KeyCodes.ONE,lt.Input.Keyboard.KeyCodes.TWO,lt.Input.Keyboard.KeyCodes.THREE,lt.Input.Keyboard.KeyCodes.FOUR,lt.Input.Keyboard.KeyCodes.FIVE,lt.Input.Keyboard.KeyCodes.SIX,lt.Input.Keyboard.KeyCodes.SEVEN,lt.Input.Keyboard.KeyCodes.EIGHT,lt.Input.Keyboard.KeyCodes.NINE].forEach((u,m)=>{r?.addKey(u)?.on("down",()=>this.toggleSelectSlotByIndex(m))}),r?.addKey(lt.Input.Keyboard.KeyCodes.BACKTICK??192)?.on("down",()=>{this.selectedSlots.size===this.slotRecords.length&&this.slotRecords.length>0?this.clearAllSelections():this.selectAllWeapons()}),this.scene.input.on("pointerup",u=>{u.leftButtonReleased()&&this.handleLeftClickForWeapons(u),u.rightButtonReleased()&&this.handleRightClickForWeapons()})}createHUD(t){const s=this.scene.rexUI,f=this.scene.scale.width,C=this.scene.scale.height,S=24,r=C-S;console.log("Creating HUD - fonts should be loaded by PreloadScene");const e=(()=>{const p=document.createElement("canvas").getContext("2d");if(p){p.font="16px Request";const x=p.measureText("test").width;p.font="16px Arial";const T=p.measureText("test").width,E=x!==T;return console.log("Request font status in HUD:",E,"fonts available"),E}return!1})(),u=this.scene.add.text(S+16,r-52,"0",{color:"#F5F0E9",fontSize:"32px",fontFamily:"Request",padding:{top:8,bottom:4,left:2,right:2}}).setOrigin(0,.8).setScrollFactor(0).setDepth(1502),m=this.scene.add.text(S+16+4,r-52,"U/S",{color:"#F5F0E9",fontSize:"20px",fontFamily:"Request",padding:{top:10,bottom:4,left:0,right:0}}).setOrigin(0,.8).setScrollFactor(0).setDepth(1502);try{u.setResolution?.(this.uiTextResolution)}catch{}this.speedText=u,this.scene.events.on(lt.Scenes.Events.UPDATE,()=>{u&&u.active&&m&&m.active&&(m.x=u.x+u.width+6,m.y=u.y)}),e||(console.warn("Request font not loaded in HUD creation - applying with delay"),this.scene.time.delayedCall(100,()=>{u&&u.active&&(u.setFontFamily("Request"),console.log("Applied Request font to speed text with delay"))})),this.scene.__hudSpeedValue=u,this.scene.__hudSpeedSuffix=m,this.scene.add.rectangle(S+36+76,r-34,200,4,10653550).setOrigin(.5,1).setScrollFactor(0).setDepth(1502);const d=this.scene.add.rectangle(0,0,260,56,988970).setStrokeStyle(2,3359061),l=this.scene.add.text(0,0,"Следовать",{color:"#F5F0E9",fontSize:"28px"});try{l.setResolution?.(this.uiTextResolution)}catch{}this.followToggle=s.add.label({x:0,y:0,background:d,text:l,space:{left:20,right:20,top:8,bottom:8}}).layout().setScrollFactor(0).setDepth(1500).setInteractive({useHandCursor:!0}).on("pointerdown",()=>{const g=this.scene.scene.get("StarSystemScene");g?.cameraMgr?.isFollowing?.()?g.cameraMgr.disableFollow():g?.cameraMgr?.enableFollow?.(t)}),this.followToggle.setPosition(f-S-150,r-160);const h=this.configRef.player?.shipId??this.configRef.ships?.current,n=h?this.configRef.ships?.defs[h]:void 0,a=n?.displayName??"Ship",c=n?.sprite?.key??(this.scene.textures.exists("ship_alpha")?"ship_alpha":"ship_alpha_public"),o=this.scene.add.image(f-S-48,r-48,c).setScrollFactor(0).setDepth(1500).setDisplaySize(96,96);o.setOrigin(1,1),o.setRotation(0),this.shipIcon=o;const v=this.scene.add.text(f-S-48-16,r-48-48,a,{color:"#F5F0E9",fontSize:"32px",fontFamily:"HooskaiChamferedSquare"}).setScrollFactor(0).setDepth(1500).setOrigin(1,.5);try{v.setResolution?.(this.uiTextResolution)}catch{}this.shipNameText=v,this.scene.__hudSpeedValue=u}createSystemTitle(){if(!this.configRef)return;const t=this.configRef.system,s=20,f=48,C=20,S=this.minimapBounds,r=S?S.x+S.w/2:this.scene.scale.width/2,y=S?S.y+S.h+s:40,e=this.scene.add.text(r,y,t.name??"",{color:"#ffffff",fontSize:`${f}px`,fontFamily:"HooskaiChamferedSquare"}).setOrigin(.5,0).setScrollFactor(0).setDepth(1501),u=t.sector?`Сектор ${t.sector}`:"",m=this.scene.add.text(r,y+f+C,u,{color:"#ffffff",fontSize:"24px",fontFamily:"roboto"}).setOrigin(.5,0).setScrollFactor(0).setDepth(1501);try{e.setResolution?.(this.uiTextResolution),m.setResolution?.(this.uiTextResolution)}catch{}this.systemTitleText=e,this.systemSectorText=m,this.scene.scale.on("resize",d=>{const l=this.minimapBounds,h=l?l.x+l.w/2:d.width/2,n=l?l.y+l.h+s:40;this.systemTitleText?.setPosition(h,n),this.systemSectorText?.setPosition(h,n+f+C)})}createWeaponBar(){if(!this.configRef)return;const t=this.scene.scale.width,s=this.scene.scale.height,f=this.configRef.settings?.ui?.weaponSlots?.size??112,C=2894381,S=10653550,r=this.scene.add.container(0,0).setDepth(1500);r.setScrollFactor(0);const e=(this.configRef.player?.weapons??[]).filter(I=>I&&I.trim()!==""),u=Math.max(1,e.length),m=900,d=200,l=600,h=60,n=20,a=(t-m)/2,c=s-n-d;this.weaponPanel=this.scene.add.rectangle(a,c,m,d,2894381,1).setOrigin(0,0).setScrollFactor(0).setDepth(1499),this.weaponPanel.setStrokeStyle(2,S,1);const o=Math.max(8,f*.125),v=u*f+(u-1)*o,g=(t-v)/2,p=c-f/2,x=this.configRef.weapons?.defs??{},T=this.configRef.items?.rarities??{};this.slotRecords=[];for(let I=0;I<u;I++){const B=g+I*(f+o),z=p,Y=this.scene.add.rectangle(B,z,f,f,C,1).setOrigin(0,0).setDepth(1500).setScrollFactor(0);Y.setStrokeStyle(2,S,1),r.add(Y);const X=e[I];if(X&&x[X]){const k=x[X].rarity,W=k&&T[k]?.color?Number(T[k].color.replace("#","0x")):0,$=this.scene.add.rectangle(B+1,z+1,f-2,f-2,W,.75).setOrigin(0,0).setDepth(1500).setScrollFactor(0);r.add($);const K=x[X].icon??X;if(this.scene.textures.exists(K)){try{this.scene.textures.get(K).setFilter(lt.Textures.FilterMode.LINEAR)}catch{}const j=this.scene.add.image(B+f/2,z+f/2,K).setDepth(1501).setScrollFactor(0);j.setOrigin(.5,0);const Z=this.configRef.settings?.ui?.weaponSlots?.iconPadding??8,J=f-Z*2,Q=this.scene.textures.get(K),_=Q.source[0].width,q=Q.source[0].height,et=Math.min(J/_,J/q);j.setScale(et),r.add(j);const rt={slotIndex:I,slotKey:X,baseX:B,baseY:z,size:f,bg:Y,outline:this.scene.add.rectangle(B,z,f,f,0,0).setOrigin(0,0).setDepth(1503).setScrollFactor(0),under:$,icon:j};rt.outline.setStrokeStyle(0,65280,1),this.slotRecords.push(rt),rt.badge=void 0,rt.badgeText=void 0;const ot=this.scene.add.zone(B,z,f,f).setOrigin(0,0).setScrollFactor(0).setDepth(1504).setInteractive({useHandCursor:!0});ot.on("pointerdown",()=>this.toggleSelectSlotByIndex(I)),r.add(ot)}}const H=Math.max(32,f*.35),N=Math.max(4,f*.05),U=this.scene.add.rectangle(B+N,z+f-N-H,H,H,2894381,1).setOrigin(0,0).setDepth(1502).setScrollFactor(0);U.setStrokeStyle(2,S,1);const L=Math.max(18,H*.5),G=this.scene.add.text(B+N+H/2,z+f-N-H/2,`${I+1}`,{color:"#F5F0E9",fontSize:`${L}px`,fontFamily:"Request",padding:{top:Math.max(2,L*.15),bottom:4,left:2,right:2}}).setOrigin(.5,.5).setDepth(1503).setScrollFactor(0);G.setFontFamily("Request");try{G.setResolution?.(this.uiTextResolution)}catch{}r.add(U),r.add(G);const V=this.slotRecords.find(k=>k.slotIndex===I);V&&(V.badge=U,V.badgeText=G)}this.weaponSlotsContainer=r;const E=(t-l)/2,M=c+d-100;this.scene.add.rectangle(E,M,l,h,0,0).setOrigin(0,0).setScrollFactor(0).setDepth(1500).setStrokeStyle(2,S,1),this.scene.add.rectangle(E,M,l,h,1980971,1).setOrigin(0,0).setScrollFactor(0).setDepth(1500);const w=this.scene.add.rectangle(E+2,M+2,l-4,h-4,1999945,1).setOrigin(0,0).setScrollFactor(0).setDepth(1501);this.hullFill=w;const O=this.scene.add.text(E+16,M+h/2-10,"100",{color:"#F5F0E9",fontSize:"24px",fontFamily:"Request",padding:{top:6,bottom:2,left:2,right:2}}).setOrigin(0,.4).setScrollFactor(0).setDepth(1502);try{O.setResolution?.(this.uiTextResolution)}catch{}this.scene.__hudHullValue=O;const b=document.createElement("canvas").getContext("2d");let D=!1;if(b){b.font="16px Request";const I=b.measureText("test").width;b.font="16px Arial";const B=b.measureText("test").width;D=I!==B}D||(console.warn("Request font not loaded for HP text - applying with delay"),this.scene.time.delayedCall(100,()=>{O&&O.active&&(O.setFontFamily("Request"),console.log("Applied Request font to HP text with delay"))})),this.hullRect={x:E,y:M,w:l,h},this.syncSlotsVisual()}onPlayerDamaged(t){if(this.playerHp=t,this.updateHUD(),this.hullRect&&this.hullFill){const s=this.scene.add.rectangle(this.hullFill.x,this.hullFill.y,this.hullFill.width,this.hullFill.height,16777215,.35).setOrigin(0,0).setScrollFactor(0).setDepth(1502);this.scene.tweens.add({targets:s,alpha:0,duration:180,ease:"Sine.easeOut",onComplete:()=>s.destroy()})}}updateHUD(){if(!this.configRef)return;const s=this.scene.scene.get("StarSystemScene")?.ship;if(s&&this.speedText){const C=this.getMovementConfig()?.MAX_SPEED??1,S=s.__prevPos||{x:s.x,y:s.y},r=s.x-S.x,y=s.y-S.y,e=Math.max(1/60,this.scene.game.loop.delta/1e3),u=Math.hypot(r,y)/e;s.__prevPos={x:s.x,y:s.y};const m=Math.round((C>0?u/C:0)*C*10),d=this.scene.__hudSpeedValue;d&&d.setText(`${m}`)}if(this.hullFill&&this.configRef){const f=this.configRef.player?.shipId??this.configRef.ships?.current,C=f?this.configRef.ships?.defs[f]?.hull??100:100,S=this.playerHp!=null?this.playerHp:C,r=lt.Math.Clamp(C>0?S/C:0,0,1),y=this.hullRect?.w??this.hullBarWidth;this.hullFill.width=(y-4)*r;const e=this.scene.__hudHullValue;e&&e.setText(`${Math.round(S)}/${C}`)}}updateFollowMode(){const t=this.scene.scene.get("StarSystemScene");if(t?.cameraMgr?.isFollowing?.()??!1){if(!this.followLabel){const C=this.scene.scale.width,S=this.scene.scale.height,r=24;this.followLabel=this.scene.add.text(C-r-75,S-r-220,"Режим следования",{color:"#ffffff",fontSize:"24px"}).setOrigin(.5,1).setScrollFactor(0).setDepth(2e3)}t?.inputMgr?.setDragEnabled?.(!1)}else this.followLabel?.destroy(),this.followLabel=void 0,t?.inputMgr?.setDragEnabled?.(!0)}isClickInWeaponSlot(t,s){for(const f of this.slotRecords){const C=f.baseX,S=f.bg?.y??f.baseY,r=f.size;if(t>=C&&t<=C+r&&s>=S&&s<=S+r)return!0}return!1}toggleSelectSlotByIndex(t){const s=this.slotRecords[t];s&&(this.selectedSlots.has(t)?this.deselectSlot(s):this.selectSlot(s))}selectSlot(t){this.selectedSlots.add(t.slotIndex),this.cursorOrder.includes(t.slotIndex)||this.cursorOrder.push(t.slotIndex),t.outline.setStrokeStyle(2,65382,1);const s=t.baseY-20,f=[t.bg,t.outline,t.under,t.icon].filter(Boolean);if(Math.abs(t.bg.y-s)>1){this.scene.tweens.add({targets:f,y:s,duration:90,ease:"Sine.easeOut"});const C=t.badge,S=t.badgeText;if(C&&S){const r=t.size,y=Math.max(32,r*.35),e=Math.max(4,r*.05);this.scene.tweens.add({targets:C,y:s+r-e-y,duration:90,ease:"Sine.easeOut"}),this.scene.tweens.add({targets:S,y:s+r-e-y/2,duration:90,ease:"Sine.easeOut"})}}this.addCursorIcon(t),this.realignCursorIcons()}deselectSlot(t){if(this.selectedSlots.delete(t.slotIndex),this.cursorOrder=this.cursorOrder.filter(f=>f!==t.slotIndex),Array.from(this.assignedIconsBySlot.keys()).includes(t.slotKey)){t.outline.setStrokeStyle(2,11088422,1),[t.bg,t.outline,t.under,t.icon].filter(Boolean).forEach(r=>{r&&(r.y=t.baseY-20)});const C=t.badge,S=t.badgeText;if(C&&S){const r=t.size,y=Math.max(32,r*.35),e=Math.max(4,r*.05);C.y=t.baseY-20+r-e-y,S.y=t.baseY-20+r-e-y/2}}else{t.outline.setStrokeStyle(0,65382,1);const f=[t.bg,t.outline,t.under,t.icon].filter(Boolean);this.scene.tweens.add({targets:f,y:t.baseY,duration:90,ease:"Sine.easeOut"});const C=t.badge,S=t.badgeText;if(C&&S){const r=t.size,y=Math.max(32,r*.35),e=Math.max(4,r*.05);this.scene.tweens.add({targets:C,y:t.baseY+r-e-y,duration:90,ease:"Sine.easeOut"}),this.scene.tweens.add({targets:S,y:t.baseY+r-e-y/2,duration:90,ease:"Sine.easeOut"})}}this.removeCursorIcon(t.slotIndex),this.realignCursorIcons()}addCursorIcon(t){if(this.cursorIcons.has(t.slotIndex))return;const s=48,f=this.configRef.weapons.defs,C=this.configRef.items?.rarities,S=f[t.slotKey]?.rarity,r=S&&C?.[S]?.color?Number(C[S].color.replace("#","0x")):0,y=f[t.slotKey]?.icon??t.slotKey,e=this.scene.add.rectangle(0,0,s,s,2894381,1).setOrigin(.5).setScrollFactor(0).setDepth(4002);e.setStrokeStyle(2,65382,1);const u=this.scene.add.rectangle(0,0,s-6,s-6,r,.8).setOrigin(.5).setScrollFactor(0).setDepth(4002),m=this.scene.add.image(0,0,y).setOrigin(.5).setScrollFactor(0).setDepth(4003);try{const l=this.scene.textures.get(y),h=Math.min((s-12)/l.source[0].width,(s-12)/l.source[0].height);m.setScale(h)}catch{}const d=this.scene.add.container(0,0,[u,e,m]).setDepth(4002).setAlpha(.95);this.cursorIcons.set(t.slotIndex,d)}removeCursorIcon(t){const s=this.cursorIcons.get(t);s&&(this.cursorIcons.delete(t),s.destroy())}selectAllWeapons(){for(const t of this.slotRecords)this.selectedSlots.has(t.slotIndex)||this.selectSlot(t)}clearAllSelections(){for(const t of Array.from(this.selectedSlots.values())){const s=this.slotRecords[t];s&&this.deselectSlot(s),this.removeCursorIcon(t)}this.selectedSlots.clear(),this.cursorOrder=[]}handleLeftClickForWeapons(t){if(this.selectedSlots.size===0||this.isClickInWeaponSlot(t.x,t.y))return;const s=this.scene.scene.get("StarSystemScene"),f=s.cameras?.main;let C=t.worldX,S=t.worldY;if(f){const y=new lt.Math.Vector2;try{f.getWorldPoint?.(t.x,t.y,y),!Number.isNaN(y.x)&&!Number.isNaN(y.y)&&(C=y.x,S=y.y)}catch{C=f.scrollX+t.x/f.zoom,S=f.scrollY+t.y/f.zoom}}const r=s.combat?.findTargetAt?.(C,S);if(r){const y=(this.configRef.player?.weapons??[]).filter(u=>!!u);Array.from(this.selectedSlots.values()).sort((u,m)=>u-m).forEach(u=>{const m=y[u];if(!m)return;const d=r.obj??r,l=s.combat.getPlayerWeaponTargets().get(m);l&&l!==d&&this.removeAssignedIcon(m),s.combat.setPlayerWeaponTarget(m,d),s.combat.forceSelectTarget(d),this.createAssignedIcon(m,d),this.removeCursorIcon(u);const h=this.slotRecords[u];h&&this.deselectSlot(h)}),this.selectedSlots.clear()}else{const y=(this.configRef.player?.weapons??[]).filter(u=>!!u);Array.from(this.selectedSlots.values()).forEach(u=>{const m=y[u];if(!m)return;s.combat.setPlayerWeaponTarget(m,null),this.removeAssignedIcon(m),this.removeCursorIcon(u);const d=this.slotRecords[u];d&&this.deselectSlot(d)}),this.selectedSlots.clear(),this.cursorOrder=[]}}handleRightClickForWeapons(){if((this.configRef?.settings?.ui?.combat?.rightClickCancelSelectedWeapons??!0)&&this.selectedSlots.size!==0){for(const s of Array.from(this.selectedSlots.values())){this.removeCursorIcon(s);const f=this.slotRecords[s];f&&this.deselectSlot(f)}this.selectedSlots.clear()}}createAssignedIcon(t,s){this.assignedIconsBySlot.get(t)&&this.removeAssignedIcon(t);const C=48,S=this.configRef.weapons.defs,r=this.configRef.items?.rarities,y=S[t]?.rarity,e=y&&r?.[y]?.color?Number(r[y].color.replace("#","0x")):0,u=S[t]?.icon??t,m=this.scene.scene.get("StarSystemScene"),d=m.add.rectangle(0,0,C,C,2894381,1).setOrigin(.5).setDepth(.65);d.setStrokeStyle(2,11088422,1);const l=m.add.rectangle(0,0,C-6,C-6,e,.8).setOrigin(.5).setDepth(.65),h=m.add.image(0,0,u).setOrigin(.5).setDepth(.66);try{const g=this.scene.textures.get(u),p=Math.min((C-12)/g.source[0].width,(C-12)/g.source[0].height);h.setScale(p)}catch{}const n=m.add.rectangle(0,0,C,C,0,0).setOrigin(.5).setDepth(.67).setStrokeStyle(2,11088422,1).setAlpha(0),a=m.add.container(0,0,[l,d,h,n]).setDepth(.66),c=()=>{const g=m.combat?.getHpBarInfoFor?.(s);if(!g)return;const p=g.x,x=g.y,T=Array.from(this.assignedIconsBySlot.entries()).filter(([,O])=>O.target===s).map(([O])=>O),E=T.indexOf(t),M=C+8,P=T.length*M-8,R=p+(g.width-P)/2+C/2+E*M,A=x-(C+16);a.x=R,a.y=A};m.events.on(lt.Scenes.Events.UPDATE,c),this.assignedIconsBySlot.set(t,{target:s,container:a,updater:c});const o=(this.configRef.player?.weapons??[]).findIndex(g=>g===t),v=o>=0?this.slotRecords[o]:void 0;if(v){v.outline.setStrokeStyle(2,11088422,1);const g=v.baseY-20;[v.bg,v.outline,v.under,v.icon].filter(Boolean).forEach(E=>{E&&(E.y=g)});const x=v.badge,T=v.badgeText;if(x&&T){const E=v.size,M=Math.max(32,E*.35),P=Math.max(4,E*.05);x.y=g+E-P-M,T.y=g+E-P-M/2}}a.__flash=n}removeAssignedIcon(t){const s=this.assignedIconsBySlot.get(t);if(!s)return;this.assignedIconsBySlot.delete(t),this.scene.scene.get("StarSystemScene").events.off(lt.Scenes.Events.UPDATE,s.updater),s.container.destroy();const C=this.cooldownBarsBySlot.get(t);if(C){try{C.bg.destroy()}catch{}try{C.fill.destroy()}catch{}try{C.outline.destroy()}catch{}this.cooldownBarsBySlot.delete(t)}const S=(this.configRef.player?.weapons??[]).findIndex(y=>y===t),r=S>=0?this.slotRecords[S]:void 0;if(r){const y=this.selectedSlots.has(r.slotIndex),e=r.baseY+(y?-20:0);[r.bg,r.outline,r.under,r.icon].filter(Boolean).forEach(l=>{l&&(l.y=e)});const m=r.badge,d=r.badgeText;if(m&&d){const l=r.size,h=Math.max(32,l*.35),n=Math.max(4,l*.05);m.y=e+l-n-h,d.y=e+l-n-h/2}y?r.outline.setStrokeStyle(2,65382,1):r.outline.setStrokeStyle(0,65382,1)}}flashAssignedIcon(t){const C=this.assignedIconsBySlot.get(t)?.container?.list?.find(y=>y.strokeColor===11088422);if(!C)return;C.setAlpha(1),this.scene.tweens.add({targets:C,alpha:0,duration:120}),this.showCooldownBarInHUD(t);const S=(this.configRef.player?.weapons??[]).findIndex(y=>y===t),r=S>=0?this.slotRecords[S]:void 0;if(r){r.outline.setStrokeStyle(2,11088422,1);const y=this.scene.tweens.add({targets:r.outline,alpha:.2,duration:80,yoyo:!0,onComplete:()=>{r.outline.setAlpha(1),r.outline.setStrokeStyle(2,11088422,1)}}),e=this.assignedBlinkTweens.get(t)??[];e.push(y),this.assignedBlinkTweens.set(t,e)}}showCooldownBarInHUD(t){const s=(this.configRef.player?.weapons??[]).findIndex(S=>S===t);if(s<0)return;const f=this.slotRecords[s];if(!f)return;const C=this.ensureHudBar(t,f);C.bg.setVisible(!0),C.outline.setVisible(!0),C.fill.setVisible(!0)}updateWeaponChargeBars(){if(this.pauseManager?.getPaused()||!this.combatManager||!this.configRef?.player?.weapons)return;const t=this.configRef.player.weapons;for(let s=0;s<t.length;s++){const f=t[s];if(!f)continue;const C=this.slotRecords[s];if(!C)continue;if(this.combatManager.isWeaponCharging(f)){const e=(this.configRef.weapons.defs[f]?.type??"single")==="beam"?this.combatManager.getBeamRefreshProgress(f):this.combatManager.getWeaponChargeProgress(f),u=this.ensureHudBar(f,C);u.bg.setVisible(!0),u.outline.setVisible(!0),u.fill.setVisible(!0),u.fill.width=e*(u.width-4),this.toggleOutOfRange(f,!1)}else{const r=this.cooldownBarsBySlot.get(f);r&&(r.bg.setVisible(!1),r.outline.setVisible(!1),r.fill.setVisible(!1))}}}toggleOutOfRange(t,s){const f=(this.configRef.player?.weapons??[]).findIndex(e=>e===t);if(f<0)return;const C=this.slotRecords[f];if(!C)return;let S=this.outOfRangeTexts.get(t);S||(S=this.scene.add.text(0,0,"OUT OF RANGE",{color:"#D5008F",fontSize:"16px",fontFamily:"roboto"}).setDepth(1504).setScrollFactor(0),this.outOfRangeTexts.set(t,S));const r=C.baseX,y=C.bg.y+C.size+6+10;S.setPosition(r,y).setVisible(s)}showBeamDuration(t,s){const f=(this.configRef.player?.weapons??[]).findIndex(r=>r===t);if(f<0)return;const C=this.slotRecords[f];if(!C)return;const S=this.ensureHudBar(t,C);S.bg.setVisible(!0),S.outline.setVisible(!0),S.fill.setVisible(!0),S.fill.width=Math.max(0,S.width-4);try{this.scene.tweens.killTweensOf(S.fill)}catch{}this.scene.time.delayedCall(Math.max(0,s),()=>{S.bg.setVisible(!0),S.outline.setVisible(!0),S.fill.setVisible(!0)})}ensureHudBar(t,s){let f=this.cooldownBarsBySlot.get(t);if(!f){const r=s.size,y=20,e=10653550,u=12343862,d=this.scene.add.rectangle(0,0,r,y,2894381,1).setDepth(1502).setOrigin(0,0).setScrollFactor(0),l=this.scene.add.rectangle(0,0,r,y,0,0).setDepth(1503).setOrigin(0,0).setScrollFactor(0).setStrokeStyle(2,e,1),h=this.scene.add.rectangle(0,0,0,y-4,u,1).setDepth(1503).setOrigin(0,0).setScrollFactor(0);f={bg:d,outline:l,fill:h,width:r,height:y},this.cooldownBarsBySlot.set(t,f)}const C=s.baseX,S=s.bg.y+s.size+6;return f.bg.setPosition(C,S),f.outline.setPosition(C,S),f.fill.setPosition(C+2,S+2),f}realignCursorIcons(){const f=this.cursorOrder.filter(y=>this.cursorIcons.has(y)),C=f.length*52-4,S=this.scene.input.activePointer,r=S.x-C/2+48/2;f.forEach((y,e)=>{const u=this.cursorIcons.get(y);u.x=r+e*52,u.y=S.y-48-8})}createMinimap(t){if(!this.configRef)return;const s=512,f=384,C=this.scene.scale.width-s-40,S=40;this.minimapBounds={x:C,y:S,w:s,h:f},this.minimap=new IN(this.scene,this.configRef),this.minimap.init(C,S,s,f),this.minimap.attachShip(t);const r=this.scene.scene.get("StarSystemScene");r?.fogOfWar&&this.minimap.setFogOfWar(r.fogOfWar),this.minimapHit=this.scene.add.zone(C,S,s,f).setOrigin(0,0).setScrollFactor(0).setDepth(1001),this.minimapHit.setInteractive({useHandCursor:!0}),this.minimapHit.on("pointerdown",y=>{const e=this.configRef.system,u=(y.x-C)/s,m=(y.y-S)/f,d=lt.Math.Clamp(u*e.size.width,0,e.size.width),l=lt.Math.Clamp(m*e.size.height,0,e.size.height),h=this.scene.scene.get("StarSystemScene");h?.cameraMgr?.isFollowing?.()&&h.cameraMgr.disableFollow(),h.cameras.main.centerOn(d,l),y.leftButtonDown()&&(this.isMinimapDragging=!0)}),this.scene.input.on("pointermove",y=>{if(!this.isMinimapDragging||!y.leftButtonDown())return;const e=this.configRef.system,u=(y.x-C)/s,m=(y.y-S)/f,d=lt.Math.Clamp(u*e.size.width,0,e.size.width),l=lt.Math.Clamp(m*e.size.height,0,e.size.height);this.scene.scene.get("StarSystemScene").cameras.main.centerOn(d,l)}),this.scene.input.on("pointerup",()=>{this.isMinimapDragging=!1}),this.scene.scale.on("resize",y=>{const e=y.width-s-40,u=40;this.minimapBounds={x:e,y:u,w:s,h:f}})}getMovementConfig(){const t=this.configRef?.gameplay?.movement,s=this.configRef?.player?.shipId;return(s?this.configRef?.ships?.defs[s]?.movement:void 0)??t}createPauseUI(){const t=this.scene.scale.width,s=this.scene.scale.height;this.pauseIndicator=this.scene.add.text(t/2,s/2-100,"ПАУЗА",{color:"#ffffff",fontSize:"72px",fontFamily:"HooskaiChamferedSquare",stroke:"#000000",strokeThickness:8}).setOrigin(.5,.5).setScrollFactor(0).setDepth(5e3).setVisible(!1);try{this.pauseIndicator.setResolution?.(this.uiTextResolution)}catch{}this.scene.events.on("game-paused",()=>this.showPauseIndicator()),this.scene.events.on("game-resumed",()=>this.hidePauseIndicator()),this.scene.scale.on("resize",f=>{this.pauseIndicator&&this.pauseIndicator.setPosition(f.width/2,f.height/2-100)})}createTimeUI(){if(!this.minimapBounds){const m=this.scene.scale.width;this.scene.scale.height;const d=m-512-40,l=40,h=512;this.minimapBounds={x:d,y:l,w:h,h:384}}const t=this.minimapBounds.x,s=this.minimapBounds.y,f=this.minimapBounds.w,C=t+f/2,S=s-80;this.cycleCounterText=this.scene.add.text(C,S,`Имперская эпоха
Цикл: 0010`,{color:"#ffffff",fontSize:"28px",fontFamily:"HooskaiChamferedSquare",align:"center",lineSpacing:8}).setOrigin(.5,1).setScrollFactor(0).setDepth(1501);try{this.cycleCounterText.setResolution?.(this.uiTextResolution)}catch{}const r=S+12,y=f-40,e=4,u=t+20;this.cycleProgressBarBg=this.scene.add.rectangle(u,r,y,e,2894381,1).setOrigin(0,.5).setScrollFactor(0).setDepth(1500),this.cycleProgressBarBg.setStrokeStyle(1,10653550,1),this.cycleProgressBar=this.scene.add.rectangle(u+1,r,0,e-2,2278750,1).setOrigin(0,.5).setScrollFactor(0).setDepth(1501),this.scene.scale.on("resize",m=>{if(this.cycleCounterText&&this.minimapBounds){const d=m.width-this.minimapBounds.w-40,l=d+this.minimapBounds.w/2;this.cycleCounterText.setPosition(l,S),this.cycleProgressBarBg&&this.cycleProgressBarBg.setPosition(d+20,r),this.cycleProgressBar&&this.cycleProgressBar.setPosition(d+21,r)}})}showPauseIndicator(){this.pauseIndicator&&(this.pauseIndicator.setVisible(!0),this.pauseBlinkTween&&this.pauseBlinkTween.destroy(),this.pauseBlinkTween=this.scene.tweens.add({targets:this.pauseIndicator,alpha:.3,duration:800,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),this.pauseBlinkTween.__isUITween=!0)}hidePauseIndicator(){this.pauseIndicator&&(this.pauseIndicator.setVisible(!1),this.pauseBlinkTween&&(this.pauseBlinkTween.destroy(),this.pauseBlinkTween=void 0),this.pauseIndicator.setAlpha(1))}updateTimeUI(){if(!this.timeManager||!this.cycleCounterText||!this.cycleProgressBar)return;const t=this.timeManager.getCurrentCycleFormatted();this.cycleCounterText.setText(`Имперская эпоха
Цикл: ${t}`);const s=this.timeManager.getCycleProgress(),f=(this.minimapBounds?.w??512)-42;this.cycleProgressBar.width=Math.max(0,s*f)}updateForNewSystem(t,s){this.configRef=t,this.destroyElements(),this.createHUD(s),this.createWeaponBar(),this.createMinimap(s);const f=this.scene.scene.get("StarSystemScene");f?.fogOfWar&&this.minimap&&this.minimap.setFogOfWar(f.fogOfWar)}destroyElements(){this.speedText?.destroy(),this.followToggle?.destroy(),this.shipNameText?.destroy(),this.shipIcon?.destroy(),this.weaponSlotsContainer?.destroy(),this.weaponPanel?.destroy(),this.hullFill?.destroy(),this.followLabel?.destroy(),this.gameOverGroup?.destroy(),this.minimapHit?.destroy(),this.pauseIndicator?.destroy(),this.cycleCounterText?.destroy(),this.cycleProgressBar?.destroy(),this.cycleProgressBarBg?.destroy(),this.pauseBlinkTween&&(this.pauseBlinkTween.destroy(),this.pauseBlinkTween=void 0),this.speedText=void 0,this.followToggle=void 0,this.shipNameText=void 0,this.shipIcon=void 0,this.weaponSlotsContainer=void 0,this.weaponPanel=void 0,this.hullFill=void 0,this.followLabel=void 0,this.gameOverGroup=void 0,this.minimapHit=void 0,this.pauseIndicator=void 0,this.cycleCounterText=void 0,this.cycleProgressBar=void 0,this.cycleProgressBarBg=void 0,this.scene.__hudHullValue?.destroy(),this.scene.__hudHullValue=void 0,this.scene.__hudSpeedValue?.destroy(),this.scene.__hudSpeedValue=void 0,this.playerHp=null,this.hullRect=void 0;const f=this.scene.scene.get("StarSystemScene");for(const{updater:C,container:S}of Array.from(this.assignedIconsBySlot.values())){try{f.events.off(lt.Scenes.Events.UPDATE,C)}catch{}try{S.destroy()}catch{}}this.assignedIconsBySlot.clear(),this.selectedSlots.clear(),this.cursorOrder=[]}showGameOver(){if(this.gameOverGroup)return;const t=this.scene.scale.width,s=this.scene.scale.height,f=this.scene.add.rectangle(0,0,t,s,0,.6).setOrigin(0).setScrollFactor(0).setDepth(3e3),C=this.scene.add.text(0,0,"Корабль уничтожен",{color:"#ffffff",fontSize:"64px"}).setOrigin(.5).setScrollFactor(0).setDepth(3001),S=this.scene.rexUI.add.label({x:0,y:0,background:this.scene.add.rectangle(0,0,400,88,988970).setStrokeStyle(2,3359061),text:this.scene.add.text(0,0,"Перезапуск",{color:"#e2e8f0",fontSize:"36px"}),space:{left:28,right:28,top:16,bottom:16}}).layout().setScrollFactor(0).setDepth(3001).setInteractive({useHandCursor:!0}).on("pointerdown",()=>{this.scene.scene.get("StarSystemScene"),this.scene.scene.stop("UIScene"),this.scene.scene.stop("StarSystemScene"),this.scene.scene.start("PreloadScene")});C.setPosition(t/2,s/2-80),S.setPosition(t/2,s/2+40);const r=this.scene.add.container(0,0,[f,C,S]).setDepth(3e3);this.gameOverGroup=r}syncSlotsVisual(){for(const t of this.slotRecords){const s=Array.from(this.assignedIconsBySlot.keys()).includes(t.slotKey),f=this.selectedSlots.has(t.slotIndex),C=s||f,S=t.baseY+(C?-20:0),r=[t.bg,t.outline,t.under,t.icon].filter(Boolean);for(const u of r)u.y!==S&&(u.y=S);const y=t.badge,e=t.badgeText;if(y&&e){const u=t.size,m=Math.max(32,u*.35),d=Math.max(4,u*.05);y.y=S+u-d-m,e.y=S+u-d-m/2}s?t.outline.setStrokeStyle(2,11088422,1):f?t.outline.setStrokeStyle(2,65382,1):t.outline.setStrokeStyle(0,65382,1)}}}class GN{scene;container;items=[{id:"follow_300",label:"Следование 300",mode:"follow",distance:300},{id:"follow_6000",label:"Следование 6000",mode:"follow",distance:6e3},{id:"orbit_500",label:"Орбита 500",mode:"orbit",distance:500},{id:"orbit_800",label:"Орбита 800",mode:"orbit",distance:800}];selectedIndex=0;isVisible=!1;backgroundRect;itemTexts=[];selectionIndicator;menuWidth=200;menuHeight=160;itemHeight=32;padding=12;constructor(t){this.scene=t}show(t,s){this.isVisible||(this.isVisible=!0,this.selectedIndex=0,this.container=this.scene.add.container(t,s).setDepth(1e4),this.backgroundRect=this.scene.add.rectangle(0,0,this.menuWidth,this.menuHeight,2042167).setStrokeStyle(2,4937059,1).setAlpha(.95),this.container.add(this.backgroundRect),this.selectionIndicator=this.scene.add.rectangle(0,-this.menuHeight/2+this.padding+this.itemHeight/2,this.menuWidth-this.padding*2,this.itemHeight-4,3900150,.3).setStrokeStyle(1,3900150,.8),this.container.add(this.selectionIndicator),this.itemTexts=[],this.items.forEach((f,C)=>{const S=this.scene.add.text(-this.menuWidth/2+this.padding,-this.menuHeight/2+this.padding+C*this.itemHeight+this.itemHeight/2,f.label,{fontSize:"16px",fontFamily:"HooskaiChamferedSquare",color:"#ffffff"}).setOrigin(0,.5);this.itemTexts.push(S),this.container.add(S)}),this.updateSelection())}hide(){this.isVisible&&(this.isVisible=!1,this.container?.destroy(),this.container=void 0,this.backgroundRect=void 0,this.itemTexts=[],this.selectionIndicator=void 0)}updateSelection(t){if(!(!this.isVisible||!this.container))if(t!==void 0){const s=this.container.y,f=t-s,C=-this.menuHeight/2+this.padding,S=f-C;let r=Math.floor(S/this.itemHeight);r=lt.Math.Clamp(r,0,this.items.length-1),r!==this.selectedIndex&&(this.selectedIndex=r,this.updateVisualSelection())}else this.updateVisualSelection()}updateVisualSelection(){if(!this.selectionIndicator)return;const t=-this.menuHeight/2+this.padding+this.selectedIndex*this.itemHeight+this.itemHeight/2;this.selectionIndicator.setY(t),this.itemTexts.forEach((s,f)=>{f===this.selectedIndex?s.setColor("#ffffff"):s.setColor("#9ca3af")})}getSelectedItem(){return!this.isVisible||this.selectedIndex<0||this.selectedIndex>=this.items.length?null:this.items[this.selectedIndex]}isMenuVisible(){return this.isVisible}moveSelectionUp(){this.isVisible&&(this.selectedIndex=Math.max(0,this.selectedIndex-1),this.updateVisualSelection())}moveSelectionDown(){this.isVisible&&(this.selectedIndex=Math.min(this.items.length-1,this.selectedIndex+1),this.updateVisualSelection())}}class NN extends lt.Scene{hud;debugText;configRef;uiTextResolution=1;systemMenu;radialMenu;constructor(){super("UIScene")}create(){this.uiTextResolution=2;try{this.cameras.main.setRoundPixels(!1)}catch{}const t=this.add.text(32,32,"Space is feodal",{color:"#F5F0E9",fontFamily:"HooskaiChamferedSquare",fontSize:"48px"}).setScrollFactor(0).setDepth(1e3);try{t.setResolution?.(this.uiTextResolution)}catch{}this.debugText=this.add.text(32,80,"",{color:"#F5F0E9",fontSize:"28px"}).setScrollFactor(0).setDepth(1e3);try{this.debugText.setResolution?.(this.uiTextResolution)}catch{}this.radialMenu=new GN(this);const s=this.scene.get("StarSystemScene"),f=S=>{this.configRef=S.config,this.hud=new BN(this),this.hud.init(S.config,S.ship,S.pauseManager,S.timeManager),s.events.on("system-ready",r=>{this.configRef=r.config,this.hud.updateForNewSystem(r.config,r.ship)})};s.config&&s.ship?f({config:s.config,ship:s.ship,pauseManager:s.pauseManager,timeManager:s.timeManager}):s.events.once("system-ready",f),this.input.keyboard?.addKey(lt.Input.Keyboard.KeyCodes.M)?.on("down",()=>this.toggleSystemMenu())}showGameOver(){this.hud?.showGameOver()}async toggleSystemMenu(){if(this.systemMenu){this.systemMenu.destroy(),this.systemMenu=void 0;return}const t=this.scale.width,s=this.scale.height,f=await(async()=>{try{return await(await fetch("/configs/systems/systems.json")).json()}catch{return await(await fetch("/configs/systems.json")).json()}})(),C=Object.entries(f.defs).map(([u,m])=>({id:u,name:m.name})),S=this.add.rectangle(t/2,s/2,720,480,988970,.95).setScrollFactor(0).setDepth(4e3);S.setStrokeStyle(2,3359061);const r=this.add.text(t/2,s/2-180,"Смена системы (M)",{color:"#e2e8f0",fontSize:"36px"}).setOrigin(.5).setDepth(4001).setScrollFactor(0),y=[],e=this.rexUI;C.forEach((u,m)=>{const d=e.add.label({x:t/2,y:s/2-80+m*80,background:this.add.rectangle(0,0,560,60,1120295).setStrokeStyle(2,3359061),text:this.add.text(0,0,u.name,{color:"#e2e8f0",fontSize:"28px"}),space:{left:20,right:20,top:12,bottom:12}}).layout().setScrollFactor(0).setDepth(4001).setInteractive({useHandCursor:!0}).on("pointerdown",async()=>{try{localStorage.setItem("sf_selectedSystem",u.id)}catch{}const l=this.scene.get("StarSystemScene");l.scene.stop("StarSystemScene"),l.scene.stop("UIScene"),l.scene.start("PreloadScene")});y.push(d)}),this.systemMenu=this.add.container(0,0,[S,r,...y]).setDepth(4e3)}showRadialMenu(t,s){this.radialMenu.show(t,s)}hideRadialMenu(){this.radialMenu.hide()}updateRadialMenuSelection(t){this.radialMenu.updateSelection(t)}getRadialMenuSelection(){return this.radialMenu.getSelectedItem()}isRadialMenuVisible(){return this.radialMenu.isMenuVisible()}}const VN={type:lt.AUTO,parent:"app",backgroundColor:"#0b0f1a",scale:{mode:lt.Scale.FIT,autoCenter:lt.Scale.CENTER_BOTH,width:3840,height:2160,min:{width:1920,height:1080},max:{width:3840,height:2160}},render:{antialias:!0,pixelArt:!1,roundPixels:!1},plugins:{scene:[{key:"rexUI",plugin:Ly,mapping:"rexUI"}]},scene:[mN,xN,DN,NN]};new lt.Game(VN);export{_l as D};
